(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+qE3":function(t,e,n){"use strict";var i,o="object"==typeof Reflect?Reflect:null,r=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function o(){void 0!==r&&t.removeListener("error",r),n([].slice.call(arguments))}var r;"error"!==e&&(r=function(n){t.removeListener(e,o),i(n)},t.once("error",r)),t.once(e,o)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var o,r,a;if(c(n),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),r=t._events),a=r[e]),void 0===a)a=r[e]=n,++t._eventsCount;else if("function"==typeof a?a=r[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(o=h(t))>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=d.bind(i);return o.listener=n,i.wrapFn=o,o}function g(t,e,n){var i=t._events;if(void 0===i)return[];var o=i[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):f(o,o.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var c=l.length,h=f(l,c);for(n=0;n<c;++n)r(h[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,i,o,r,a;if(c(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return g(this,t,!0)},s.prototype.rawListeners=function(t){return g(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},"0KjW":function(t,e,n){"use strict";var i=n("KXza");t.exports=i},"2+Hy":function(t,e,n){"use strict";var i=n("YI60"),o=n("U6jy"),r=n("uhBA"),a=n("d0rS"),s=n("jLWS"),l=1;function c(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var i=o(n,e.headers),a=Object.keys(i).reduce((function(t,e){return t[e.toLowerCase()]=i[e],t}),{});this.id=l++,this._options=e,this.emitter=new r,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.headers=a}c.prototype.url=function(t){var e=a.prependOrigin(this.path,this.origin);e=a.appendQueryObject(e,this.query);var n=this.params;if(t){e=a.appendQueryParam(e,"access_token",t);var r=i(t).user;n=o({ownerId:r},n)}return a.interpolateRouteParams(e,n)},c.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(s.EVENT_RESPONSE,e),e}),(function(e){throw t.error=e,t.emitter.emit(s.EVENT_ERROR,e),e}))},c.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},c.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,o(t))}))}function i(e){t(e,null,(function(){}))}function o(t){t.send().then(n,i)}o(this)},c.prototype.clone=function(){return this._extend()},c.prototype._extend=function(t){var e=o(this._options,t);return new c(this.client,e)},t.exports=c},"49sm":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function i(i,o){if(t)if(e){var r="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=o(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"})))}else e=o;else t=o}return i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=i;function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,o,r,a;for(void 0===e&&(e=1e-6),o=t,a=0;a<8;a++){if(r=this.sampleCurveX(o)-t,Math.abs(r)<e)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=r/s}if((o=t)<(n=0))return n;if(o>(i=1))return i;for(;n<i;){if(r=this.sampleCurveX(o),Math.abs(r-t)<e)return o;t>r?n=o:i=o,o=.5*(i-n)+n}return o},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var o=r;function r(t,e){this.x=t,this.y=e}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),o=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function l(t,e,i,o){var r=new n(t,e,i,o);return function(t){return r.solve(t)}}var c=l(.25,.1,.25,1);function h(t,e,n){return Math.min(n,Math.max(e,t))}function u(t,e,n){var i=n-e,o=((t-e)%i+i)%i+e;return o===e?n:o}function d(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,o=e;i<o.length;i+=1){var r=o[i];for(var a in r)t[a]=r[a]}return t}var p=1;function g(){return p++}function m(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function f(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function v(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function b(t,e){return-1!==t.indexOf(e,t.length-e.length)}function y(t,e,n){var i={};for(var o in t)i[o]=e.call(n||this,t[o],o,t);return i}function _(t,e,n){var i={};for(var o in t)e.call(n||this,t[o],o,t)&&(i[o]=t[o]);return i}function C(t){return Array.isArray(t)?t.map(C):"object"==typeof t&&t?y(t,C):t}var x={};function w(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function I(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function A(t){for(var e=0,n=0,i=t.length,o=i-1,r=void 0,a=void 0;n<i;o=n++)e+=((a=t[o]).x-(r=t[n]).x)*(r.y+a.y);return e}function P(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function O(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,i,o){var r=i||o;return e[n]=!r||r.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var M=null;function k(t){if(null==M){var e=t.navigator?t.navigator.userAgent:null;M=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return M}function S(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var E,T,R,L,z=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),B=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,j=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,D={now:z,frame:function(t){var e=B(t);return{cancel:function(){return j(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=a.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return E||(E=a.document.createElement("a")),E.href=t,E.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==T&&(T=a.matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},V={supported:!1,testSupport:function(t){!N&&L&&($?Z(t):R=t)}},N=!1,$=!1;function Z(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,L),t.isContextLost())return;V.supported=!0}catch(t){}t.deleteTexture(e),N=!0}a.document&&((L=a.document.createElement("img")).onload=function(){R&&Z(R),R=null,$=!0},L.onerror=function(){N=!0,R=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="01",W=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function H(t){return 0===t.indexOf("mapbox:")}W.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},W.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},W.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},W.prototype.normalizeStyleURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},W.prototype.normalizeGlyphsURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},W.prototype.normalizeSourceURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},W.prototype.normalizeSpriteURL=function(t,e,n,i){var o=Y(t);return H(t)?(o.path="/styles/v1"+o.path+"/sprite"+e+n,this._makeAPIURL(o,this._customAccessToken||i)):(o.path+=""+e+n,J(o))},W.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!H(t))return t;var n=Y(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(D.devicePixelRatio>=2||512===e?"@2x":"")+(V.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var i=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(n.params)||F.ACCESS_TOKEN;return F.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,i)},W.prototype.canonicalizeTileURL=function(t,e){var n=Y(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=n.path.replace("/v4/","");var o=n.params;return e&&(o=o.filter((function(t){return!t.match(/^access_token=/)}))),o.length&&(i+="?"+o.join("&")),i},W.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&H(e),i=[],o=0,r=t.tiles||[];o<r.length;o+=1){var a=r[o];U(a)?i.push(this.canonicalizeTileURL(a,n)):i.push(a)}return i},W.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Y(F.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!F.REQUIRE_ACCESS_TOKEN)return J(t);if(!(e=e||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),J(t)};var K=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function U(t){return K.test(t)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(t){var e=t.match(X);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function J(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function q(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,n=q(F.ACCESS_TOKEN);return e=n&&n.u?a.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):F.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var i=a.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var o=a.localStorage.getItem(n);o&&(this.anonId=o)}catch(t){w("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(t){},Q.prototype.postEvent=function(t,e,n,i){var o=this;if(F.EVENTS_URL){var r=Y(F.EVENTS_URL);r.params.push("access_token="+(i||F.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:G,userId:this.anonId},s=e?d(a,e):a,l={url:J(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Ct(l,(function(t){o.pendingRequest=null,n(t),o.saveEventData(),o.processRequests(i)}))}},Q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,nt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,i){this.skuToken=n,(F.EVENTS_URL&&i||F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||U(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,o=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),f(this.anonId)||(this.anonId=m()),this.postEvent(o,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Q),it=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||U(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=q(F.ACCESS_TOKEN),i=n?n.u:F.ACCESS_TOKEN,o=i!==this.eventData.tokenU;f(this.anonId)||(this.anonId=m(),o=!0);var r=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(r),l=(r-this.eventData.lastSuccess)/864e5;o=o||l>=1||l<-1||a.getDate()!==s.getDate()}else o=!0;if(!o)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=r,e.eventData.tokenU=i)}),t)}},e}(Q)),ot=it.postTurnstileEvent.bind(it),rt=new nt,at=rt.postMapLoadEvent.bind(rt),st=500,lt=50;function ct(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function ht(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ut,dt=1/0;function pt(){return null==ut&&(ut=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ut}var gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(gt);var mt,ft,vt=function(t){function e(e,n,i){401===n&&U(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),bt=P()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},yt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(bt())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,i=new a.AbortController,o=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:bt(),signal:i.signal}),r=!1,s=!1,l=(n=o.url).indexOf("sku=")>0&&U(n);"json"===t.type&&o.headers.set("Accept","application/json");var c=function(n,i,r){if(!s){if(n&&"SecurityError"!==n.message&&w(n),i&&r)return h(i);var c=Date.now();a.fetch(o).then((function(n){if(n.ok){var i=l?n.clone():null;return h(n,i,c)}return e(new vt(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},h=function(n,i,l){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){s||(i&&l&&function(t,e,n){if(ct(),tt){var i={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var o=O(e.headers.get("Cache-Control")||"");o["no-store"]||(o["max-age"]&&i.headers.set("Expires",new Date(n+1e3*o["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var n=new a.Response(e,i);ct(),tt&&tt.then((function(e){return e.put(ht(t.url),n)})).catch((function(t){return w(t.message)}))})))}}(o,i,l),r=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return l?function(t,e){if(ct(),!tt)return e(null);var n=ht(t.url);tt.then((function(t){t.match(n).then((function(i){var o=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=O(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),o&&t.put(n,i.clone()),e(null,i,o)})).catch(e)})).catch(e)}(o,c):c(null,null),{cancel:function(){s=!0,r||i.abort()}}}(t,e);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new a.XMLHttpRequest;for(var i in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new vt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},_t=function(t,e){return yt(d(t,{type:"arrayBuffer"}),e)},Ct=function(t,e){return yt(d(t,{method:"POST"}),e)};function xt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function wt(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}mt=[],ft=0;var It=function(t,e){void 0===e&&(e={}),d(this,e),this.type=t},At=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",d({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(It),Pt=function(){};Pt.prototype.on=function(t,e){return this._listeners=this._listeners||{},xt(t,e,this._listeners),this},Pt.prototype.off=function(t,e){return wt(t,e,this._listeners),wt(t,e,this._oneTimeListeners),this},Pt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},xt(t,e,this._oneTimeListeners),this},Pt.prototype.fire=function(t,e){"string"==typeof t&&(t=new It(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var i=0,o=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];i<o.length;i+=1)o[i].call(this,t);for(var r=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];r<a.length;r+=1){var s=a[r];wt(n,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(d(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof At&&console.error(t.error);return this},Pt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Pt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Ot={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Mt=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function kt(t){var e=t.value;return e?[new Mt(t.key,e,"constants have been deprecated as of v8")]:[]}function St(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,o=e;i<o.length;i+=1){var r=o[i];for(var a in r)t[a]=r[a]}return t}function Et(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Tt(t){if(Array.isArray(t))return t.map(Tt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Tt(t[n]);return e}return Et(t)}var Rt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Lt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var o=i[n];this.bindings[o[0]]=o[1]}};Lt.prototype.concat=function(t){return new Lt(this,t)},Lt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Lt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var zt={kind:"null"},Bt={kind:"number"},jt={kind:"string"},Dt={kind:"boolean"},Ft={kind:"color"},Vt={kind:"object"},Nt={kind:"value"},$t={kind:"collator"},Zt={kind:"formatted"},Gt={kind:"resolvedImage"};function Wt(t,e){return{kind:"array",itemType:t,N:e}}function Ht(t){if("array"===t.kind){var e=Ht(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Kt=[zt,Bt,jt,Dt,Ft,Zt,Vt,Wt(Nt),Gt];function Ut(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ut(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=Kt;n<i.length;n+=1)if(!Ut(i[n],e))return null}return"Expected "+Ht(t)+" but found "+Ht(e)+" instead."}function Xt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Yt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Jt=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function o(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function r(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var h=s.substr(0,l),u=s.substr(l+1,c-(l+1)).split(","),d=1;switch(h){case"rgba":if(4!==u.length)return null;d=r(u.pop());case"rgb":return 3!==u.length?null:[o(u[0]),o(u[1]),o(u[2]),d];case"hsla":if(4!==u.length)return null;d=r(u.pop());case"hsl":if(3!==u.length)return null;var p=(parseFloat(u[0])%360+360)%360/360,g=r(u[1]),m=r(u[2]),f=m<=.5?m*(g+1):m+g-m*g,v=2*m-f;return[i(255*a(v,f,p+1/3)),i(255*a(v,f,p)),i(255*a(v,f,p-1/3)),d];default:return null}}return null}}catch(t){}})).parseCSSColor,qt=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};qt.parse=function(t){if(t){if(t instanceof qt)return t;if("string"==typeof t){var e=Jt(t);if(e)return new qt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},qt.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],i=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+i+")"},qt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},qt.black=new qt(0,0,0,1),qt.white=new qt(1,1,1,1),qt.transparent=new qt(0,0,0,0),qt.red=new qt(1,0,0,1);var Qt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(t,e,n,i,o){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=o},ee=function(t){this.sections=t};ee.fromString=function(t){return new ee([new te(t,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ee.factory=function(t){return t instanceof ee?t:ee.fromString(t)},ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ee.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var o={};i.fontStack&&(o["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(o["font-scale"]=i.scale),i.textColor&&(o["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(o)}}return t};var ne=function(t){this.name=t.name,this.available=t.available};function ie(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function oe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof qt)return!0;if(t instanceof Qt)return!0;if(t instanceof ee)return!0;if(t instanceof ne)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!oe(n[e]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!oe(t[i]))return!1;return!0}return!1}function re(t){if(null===t)return zt;if("string"==typeof t)return jt;if("boolean"==typeof t)return Dt;if("number"==typeof t)return Bt;if(t instanceof qt)return Ft;if(t instanceof Qt)return $t;if(t instanceof ee)return Zt;if(t instanceof ne)return Gt;if(Array.isArray(t)){for(var e,n=t.length,i=0,o=t;i<o.length;i+=1){var r=re(o[i]);if(e){if(e===r)continue;e=Nt;break}e=r}return Wt(e||Nt,n)}return Vt}function ae(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof qt||t instanceof ee||t instanceof ne?t.toString():JSON.stringify(t)}ne.prototype.toString=function(){return this.name},ne.fromString=function(t){return t?new ne({name:t,available:!1}):null},ne.prototype.serialize=function(){return["image",this.name]};var se=function(t,e){this.type=t,this.value=e};se.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!oe(t[1]))return e.error("invalid value");var n=t[1],i=re(n),o=e.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new se(i,n)},se.prototype.evaluate=function(){return this.value},se.prototype.eachChild=function(){},se.prototype.outputDefined=function(){return!0},se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof qt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var le=function(t){this.name="ExpressionEvaluationError",this.message=t};le.prototype.toJSON=function(){return this.message};var ce={string:jt,number:Bt,boolean:Dt,object:Vt},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,o=t[0];if("array"===o){var r,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in ce)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=ce[s],i++}else r=Nt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}n=Wt(r,a)}else n=ce[o];for(var l=[];i<t.length;i++){var c=e.parse(t[i],i,Nt);if(!c)return null;l.push(c)}return new he(n,l)},he.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Ut(this.type,re(n)))return n;if(e===this.args.length-1)throw new le("Expected value to be of type "+Ht(this.type)+", but found "+Ht(re(n))+" instead.")}return null},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},he.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ue=function(t){this.type=Zt,this.sections=t};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var i=[],o=!1,r=1;r<=t.length-1;++r){var a=t[r];if(o&&"object"==typeof a&&!Array.isArray(a)){o=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Bt)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Wt(jt))))return null;var c=null;if(a["text-color"]&&!(c=e.parse(a["text-color"],1,Ft)))return null;var h=i[i.length-1];h.scale=s,h.font=l,h.textColor=c}else{var u=e.parse(t[r],1,Nt);if(!u)return null;var d=u.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:u,scale:null,font:null,textColor:null})}}return new ue(i)},ue.prototype.evaluate=function(t){return new ee(this.sections.map((function(e){var n=e.content.evaluate(t);return re(n)===Gt?new te("",n,null,null,null):new te(ae(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ue.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},ue.prototype.outputDefined=function(){return!1},ue.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.content.serialize());var o={};i.scale&&(o["font-scale"]=i.scale.serialize()),i.font&&(o["text-font"]=i.font.serialize()),i.textColor&&(o["text-color"]=i.textColor.serialize()),t.push(o)}return t};var de=function(t){this.type=Gt,this.input=t};de.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,jt);return n?new de(n):e.error("No image name provided.")},de.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ne.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},de.prototype.eachChild=function(t){t(this.input)},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){return["image",this.input.serialize()]};var pe={"to-boolean":Dt,"to-color":Ft,"to-number":Bt,"to-string":jt},ge=function(t,e){this.type=t,this.args=e};ge.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var i=pe[n],o=[],r=1;r<t.length;r++){var a=e.parse(t[r],r,Nt);if(!a)return null;o.push(a)}return new ge(i,o)},ge.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,i=0,o=this.args;i<o.length;i+=1){if(n=null,(e=o[i].evaluate(t))instanceof qt)return e;if("string"==typeof e){var r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ie(e[0],e[1],e[2],e[3])))return new qt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new le(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new le("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ee.fromString(ae(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ne.fromString(ae(this.args[0].evaluate(t))):ae(this.args[0].evaluate(t))},ge.prototype.eachChild=function(t){this.args.forEach(t)},ge.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ge.prototype.serialize=function(){if("formatted"===this.type.kind)return new ue([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new de(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var me=["Unknown","Point","LineString","Polygon"],fe=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};fe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},fe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?me[this.feature.type]:this.feature.type:null},fe.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},fe.prototype.canonicalID=function(){return this.canonical},fe.prototype.properties=function(){return this.feature&&this.feature.properties||{}},fe.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=qt.parse(t)),e};var ve=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ve.parse=function(t,e){var n,i=t[0],o=ve.definitions[i];if(!o)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(o)?o[0]:o.type,a=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),l=null,c=0,h=s;c<h.length;c+=1){var u=h[c],d=u[0],p=u[1];l=new Fe(e.registry,e.path,null,e.scope);for(var g=[],m=!1,f=1;f<t.length;f++){var v=t[f],b=Array.isArray(d)?d[f-1]:d.type,y=l.parse(v,1+g.length,b);if(!y){m=!0;break}g.push(y)}if(!m)if(Array.isArray(d)&&d.length!==g.length)l.error("Expected "+d.length+" arguments, but found "+g.length+" instead.");else{for(var _=0;_<g.length;_++){var C=Array.isArray(d)?d[_]:d.type,x=g[_];l.concat(_+1).checkSubtype(C,x.type)}if(0===l.errors.length)return new ve(i,r,p,g)}}if(1===s.length)(n=e.errors).push.apply(n,l.errors);else{for(var w=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Ht).join(", ")+")":"("+Ht(e.type)+"...)"})).join(" | "),I=[],A=1;A<t.length;A++){var P=e.parse(t[A],1+I.length);if(!P)return null;I.push(Ht(P.type))}e.error("Expected arguments of type "+w+", but found ("+I.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var n in ve.definitions=e,e)t[n]=ve};var be=function(t,e,n){this.type=$t,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function ye(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function _e(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ce(t,e){var n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,o=Math.pow(2,e.z);return[Math.round(n*o*8192),Math.round(i*o*8192)]}function xe(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function we(t,e){for(var n,i,o,r,a,s,l,c=!1,h=0,u=e.length;h<u;h++)for(var d=e[h],p=0,g=d.length;p<g-1;p++){if((r=(n=t)[0]-(i=d[p])[0])*(l=n[1]-(o=d[p+1])[1])-(s=n[0]-o[0])*(a=n[1]-i[1])==0&&r*s<=0&&a*l<=0)return!1;xe(t,d[p],d[p+1])&&(c=!c)}return c}function Ie(t,e){for(var n=0;n<e.length;n++)if(we(t,e[n]))return!0;return!1}function Ae(t,e,n,i){var o=i[0]-n[0],r=i[1]-n[1],a=(t[0]-n[0])*r-o*(t[1]-n[1]),s=(e[0]-n[0])*r-o*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Pe(t,e,n){for(var i=0,o=n;i<o.length;i+=1)for(var r=o[i],a=0;a<r.length-1;++a)if(0!=(u=[(h=r[a+1])[0]-(c=r[a])[0],h[1]-c[1]])[0]*(d=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-u[1]*d[0]&&Ae(s,l,c,h)&&Ae(c,h,s,l))return!0;var s,l,c,h,u,d;return!1}function Oe(t,e){for(var n=0;n<t.length;++n)if(!we(t[n],e))return!1;for(var i=0;i<t.length-1;++i)if(Pe(t[i],t[i+1],e))return!1;return!0}function Me(t,e){for(var n=0;n<e.length;n++)if(Oe(t,e[n]))return!0;return!1}function ke(t,e,n){for(var i=[],o=0;o<t.length;o++){for(var r=[],a=0;a<t[o].length;a++){var s=Ce(t[o][a],n);ye(e,s),r.push(s)}i.push(r)}return i}function Se(t,e,n){for(var i=[],o=0;o<t.length;o++){var r=ke(t[o],e,n);i.push(r)}return i}function Ee(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){var o=.5*i,r=t[0]-n[0]>o?-i:n[0]-t[0]>o?i:0;0===r&&(r=t[0]-n[2]>o?-i:n[2]-t[0]>o?i:0),t[0]+=r}ye(e,t)}function Te(t,e,n,i){for(var o=8192*Math.pow(2,i.z),r=[8192*i.x,8192*i.y],a=[],s=0,l=t;s<l.length;s+=1)for(var c=0,h=l[s];c<h.length;c+=1){var u=h[c],d=[u.x+r[0],u.y+r[1]];Ee(d,e,n,o),a.push(d)}return a}function Re(t,e,n,i){for(var o,r=8192*Math.pow(2,i.z),a=[8192*i.x,8192*i.y],s=[],l=0,c=t;l<c.length;l+=1){for(var h=[],u=0,d=c[l];u<d.length;u+=1){var p=d[u],g=[p.x+a[0],p.y+a[1]];ye(e,g),h.push(g)}s.push(h)}if(e[2]-e[0]<=r/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var m=0,f=s;m<f.length;m+=1)for(var v=0,b=f[m];v<b.length;v+=1)Ee(b[v],e,n,r)}return s}be.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Dt);if(!i)return null;var o=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Dt);if(!o)return null;var r=null;return n.locale&&!(r=e.parse(n.locale,1,jt))?null:new be(i,o,r)},be.prototype.evaluate=function(t){return new Qt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},be.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},be.prototype.outputDefined=function(){return!1},be.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Le=function(t,e){this.type=Dt,this.geojson=t,this.geometries=e};function ze(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Le)return!1;var e=!0;return t.eachChild((function(t){e&&!ze(t)&&(e=!1)})),e}function Be(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Be(t)&&(e=!1)})),e}function je(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!je(t,e)&&(n=!1)})),n}Le.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(oe(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var i=0;i<n.features.length;++i){var o=n.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Le(n,n.features[i].geometry)}else if("Feature"===n.type){var r=n.geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Le(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Le(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Le.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if("Polygon"===e.type){var r=ke(e.coordinates,i,o),a=Te(t.geometry(),n,i,o);if(!_e(n,i))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!we(l[s],r))return!1}if("MultiPolygon"===e.type){var c=Se(e.coordinates,i,o),h=Te(t.geometry(),n,i,o);if(!_e(n,i))return!1;for(var u=0,d=h;u<d.length;u+=1)if(!Ie(d[u],c))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if("Polygon"===e.type){var r=ke(e.coordinates,i,o),a=Re(t.geometry(),n,i,o);if(!_e(n,i))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Oe(l[s],r))return!1}if("MultiPolygon"===e.type){var c=Se(e.coordinates,i,o),h=Re(t.geometry(),n,i,o);if(!_e(n,i))return!1;for(var u=0,d=h;u<d.length;u+=1)if(!Me(d[u],c))return!1}return!0}(t,this.geometries)}return!1},Le.prototype.eachChild=function(){},Le.prototype.outputDefined=function(){return!0},Le.prototype.serialize=function(){return["within",this.geojson]};var De=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};De.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new De(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},De.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},De.prototype.eachChild=function(){},De.prototype.outputDefined=function(){return!1},De.prototype.serialize=function(){return["var",this.name]};var Fe=function(t,e,n,i,o){void 0===e&&(e=[]),void 0===i&&(i=new Lt),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=o,this.expectedType=n};function Ve(t,e){for(var n,i=t.length-1,o=0,r=i,a=0;o<=r;)if((n=t[a=Math.floor((o+r)/2)])<=e){if(a===i||e<t[a+1])return a;o=a+1}else{if(!(n>e))throw new le("Input is not a number.");r=a-1}return 0}Fe.prototype.parse=function(t,e,n,i,o){return void 0===o&&(o={}),e?this.concat(e,n,i)._parse(t,o):this._parse(t,o)},Fe.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new he(e,[t]):"coerce"===n?new ge(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[i];if(o){var r=o.parse(t,this);if(!r)return null;if(this.expectedType){var a=this.expectedType,s=r.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else r=n(r,a,e.typeAnnotation||"coerce");else r=n(r,a,e.typeAnnotation||"assert")}if(!(r instanceof se)&&"resolvedImage"!==r.type.kind&&function t(e){if(e instanceof De)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof be)return!1;if(e instanceof Le)return!1;var n=e instanceof ge||e instanceof he,i=!0;return e.eachChild((function(e){i=n?i&&t(e):i&&e instanceof se})),!!i&&ze(e)&&je(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(r)){var l=new fe;try{r=new se(r.type,r.evaluate(l))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Fe.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,o=n?this.scope.concat(n):this.scope;return new Fe(this.registry,i,e||null,o,this.errors)},Fe.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Rt(i,t))},Fe.prototype.checkSubtype=function(t,e){var n=Ut(t,e);return n&&this.error(n),n};var Ne=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,o=n;i<o.length;i+=1){var r=o[i],a=r[1];this.labels.push(r[0]),this.outputs.push(a)}};function $e(t,e,n){return t*(1-n)+e*n}Ne.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Bt);if(!n)return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var r=1;r<t.length;r+=2){var a=1===r?-1/0:t[r],s=t[r+1],l=r,c=r+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=e.parse(s,c,o);if(!h)return null;o=o||h.type,i.push([a,h])}return new Ne(o,n,i)},Ne.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var o=e.length;return i>=e[o-1]?n[o-1].evaluate(t):n[Ve(e,i)].evaluate(t)},Ne.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ne.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Ne.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ze=Object.freeze({__proto__:null,number:$e,color:function(t,e,n){return new qt($e(t.r,e.r,n),$e(t.g,e.g,n),$e(t.b,e.b,n),$e(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,i){return $e(t,e[i],n)}))}}),Ge=6/29*3*(6/29),We=Math.PI/180,He=180/Math.PI;function Ke(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ge+4/29}function Ue(t){return t>6/29?t*t*t:Ge*(t-4/29)}function Xe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Je(t){var e=Ye(t.r),n=Ye(t.g),i=Ye(t.b),o=Ke((.4124564*e+.3575761*n+.1804375*i)/.95047),r=Ke((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*r-16,a:500*(o-r),b:200*(r-Ke((.0193339*e+.119192*n+.9503041*i)/1.08883)),alpha:t.a}}function qe(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Ue(e),n=.95047*Ue(n),i=1.08883*Ue(i),new qt(Xe(3.2404542*n-1.5371385*e-.4985314*i),Xe(-.969266*n+1.8760108*e+.041556*i),Xe(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Qe(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var tn={forward:Je,reverse:qe,interpolate:function(t,e,n){return{l:$e(t.l,e.l,n),a:$e(t.a,e.a,n),b:$e(t.b,e.b,n),alpha:$e(t.alpha,e.alpha,n)}}},en={forward:function(t){var e=Je(t),n=e.l,i=e.a,o=e.b,r=Math.atan2(o,i)*He;return{h:r<0?r+360:r,c:Math.sqrt(i*i+o*o),l:n,alpha:t.a}},reverse:function(t){var e=t.h*We,n=t.c;return qe({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Qe(t.h,e.h,n),c:$e(t.c,e.c,n),l:$e(t.l,e.l,n),alpha:$e(t.alpha,e.alpha,n)}}},nn=Object.freeze({__proto__:null,lab:tn,hcl:en}),on=function(t,e,n,i,o){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var r=0,a=o;r<a.length;r+=1){var s=a[r],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function rn(t,e,n,i){var o=i-n,r=t-n;return 0===o?0:1===e?r/o:(Math.pow(e,r)-1)/(Math.pow(e,o)-1)}on.interpolationFactor=function(t,e,i,o){var r=0;if("exponential"===t.name)r=rn(e,t.base,i,o);else if("linear"===t.name)r=rn(e,1,i,o);else if("cubic-bezier"===t.name){var a=t.controlPoints;r=new n(a[0],a[1],a[2],a[3]).solve(rn(e,1,i,o))}return r},on.parse=function(t,e){var n=t[0],i=t[1],o=t[2],r=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(o=e.parse(o,2,Bt)))return null;var l=[],c=null;"interpolate-hcl"===n||"interpolate-lab"===n?c=Ft:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var h=0;h<r.length;h+=2){var u=r[h],d=r[h+1],p=h+3,g=h+4;if("number"!=typeof u)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(l.length&&l[l.length-1][0]>=u)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var m=e.parse(d,g,c);if(!m)return null;c=c||m.type,l.push([u,m])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new on(c,n,i,o,l):e.error("Type "+Ht(c)+" is not interpolatable.")},on.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var o=e.length;if(i>=e[o-1])return n[o-1].evaluate(t);var r=Ve(e,i),a=on.interpolationFactor(this.interpolation,i,e[r],e[r+1]),s=n[r].evaluate(t),l=n[r+1].evaluate(t);return"interpolate"===this.operator?Ze[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?en.reverse(en.interpolate(en.forward(s),en.forward(l),a)):tn.reverse(tn.interpolate(tn.forward(s),tn.forward(l),a))},on.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},on.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},on.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var an=function(t,e){this.type=t,this.args=e};an.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var o=[],r=0,a=t.slice(1);r<a.length;r+=1){var s=e.parse(a[r],1+o.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,o.push(s)}var l=i&&o.some((function(t){return Ut(i,t.type)}));return new an(l?Nt:n,o)},an.prototype.evaluate=function(t){for(var e,n=null,i=0,o=0,r=this.args;o<r.length&&(i++,(n=r[o].evaluate(t))&&n instanceof ne&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null===n);o+=1);return n},an.prototype.eachChild=function(t){this.args.forEach(t)},an.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},an.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var sn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};sn.prototype.evaluate=function(t){return this.result.evaluate(t)},sn.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},sn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var o=t[i];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var r=e.parse(t[i+1],i+1);if(!r)return null;n.push([o,r])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new sn(n,a):null},sn.prototype.outputDefined=function(){return this.result.outputDefined()},sn.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var ln=function(t,e,n){this.type=t,this.index=e,this.input=n};ln.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Bt),i=e.parse(t[2],2,Wt(e.expectedType||Nt));return n&&i?new ln(i.type.itemType,n,i):null},ln.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new le("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new le("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new le("Array index must be an integer, but found "+e+" instead.");return n[e]},ln.prototype.eachChild=function(t){t(this.index),t(this.input)},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var cn=function(t,e){this.type=Dt,this.needle=t,this.haystack=e};cn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Nt),i=e.parse(t[2],2,Nt);return n&&i?Xt(n.type,[Dt,jt,Bt,zt,Nt])?new cn(n,i):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(n.type)+" instead"):null},cn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Ht(re(e))+" instead.");if(!Yt(n,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Ht(re(n))+" instead.");return n.indexOf(e)>=0},cn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},cn.prototype.outputDefined=function(){return!0},cn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hn=function(t,e,n){this.type=Bt,this.needle=t,this.haystack=e,this.fromIndex=n};hn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Nt),i=e.parse(t[2],2,Nt);if(!n||!i)return null;if(!Xt(n.type,[Dt,jt,Bt,zt,Nt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(n.type)+" instead");if(4===t.length){var o=e.parse(t[3],3,Bt);return o?new hn(n,i,o):null}return new hn(n,i)},hn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Ht(re(e))+" instead.");if(!Yt(n,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Ht(re(n))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)},hn.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},hn.prototype.outputDefined=function(){return!1},hn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var un=function(t,e,n,i,o,r){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=o,this.otherwise=r};un.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o={},r=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var h=0,u=s;h<u.length;h+=1){var d=u[h];if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,re(d)))return null}else n=re(d);if(void 0!==o[String(d)])return c.error("Branch labels must be unique.");o[String(d)]=r.length}var p=e.parse(l,a,i);if(!p)return null;i=i||p.type,r.push(p)}var g=e.parse(t[1],1,Nt);if(!g)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==g.type.kind&&e.concat(1).checkSubtype(n,g.type)?null:new un(n,i,g,o,r,m):null},un.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},un.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},un.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},un.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},o=0,r=Object.keys(this.cases).sort();o<r.length;o+=1){var a=r[o];void 0===(u=i[this.cases[a]])?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[u][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=n;l<c.length;l+=1){var h=c[l],u=h[0],d=h[1];e.push(1===d.length?s(d[0]):d.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var dn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};dn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],o=1;o<t.length-1;o+=2){var r=e.parse(t[o],o,Dt);if(!r)return null;var a=e.parse(t[o+1],o+1,n);if(!a)return null;i.push([r,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new dn(n,i,s):null},dn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],o=i[1];if(i[0].evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},dn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],o=i[1];t(i[0]),t(o)}t(this.otherwise)},dn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},dn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var pn=function(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i};function gn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function mn(t,e,n,i){return 0===i.compare(e,n)}function fn(t,e,n){var i="=="!==t&&"!="!==t;return function(){function o(t,e,n){this.type=Dt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return o.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],r=e.parse(t[1],1,Nt);if(!r)return null;if(!gn(n,r.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Ht(r.type)+"'.");var a=e.parse(t[2],2,Nt);if(!a)return null;if(!gn(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Ht(a.type)+"'.");if(r.type.kind!==a.type.kind&&"value"!==r.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Ht(r.type)+"' and '"+Ht(a.type)+"'.");i&&("value"===r.type.kind&&"value"!==a.type.kind?r=new he(a.type,[r]):"value"!==r.type.kind&&"value"===a.type.kind&&(a=new he(r.type,[a])));var s=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==a.type.kind&&"value"!==r.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,$t)))return null}return new o(r,a,s)},o.prototype.evaluate=function(o){var r=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){var s=re(r),l=re(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new le('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var c=re(r),h=re(a);if("string"!==c.kind||"string"!==h.kind)return e(o,r,a)}return this.collator?n(o,r,a,this.collator.evaluate(o)):e(o,r,a)},o.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},o.prototype.outputDefined=function(){return!0},o.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},o}()}pn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Nt),i=e.parse(t[2],2,Bt);if(!n||!i)return null;if(!Xt(n.type,[Wt(Nt),jt,Nt]))return e.error("Expected first argument to be of type array or string, but found "+Ht(n.type)+" instead");if(4===t.length){var o=e.parse(t[3],3,Bt);return o?new pn(n.type,n,i,o):null}return new pn(n.type,n,i)},pn.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new le("Expected first argument to be of type array or string, but found "+Ht(re(e))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)},pn.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var vn=fn("==",(function(t,e,n){return e===n}),mn),bn=fn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!mn(0,e,n,i)})),yn=fn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),_n=fn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Cn=fn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),xn=fn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0})),wn=function(t,e,n,i,o){this.type=jt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=o};wn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Bt);if(!n)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=e.parse(i.locale,1,jt)))return null;var r=null;if(i.currency&&!(r=e.parse(i.currency,1,jt)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,Bt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,Bt))?null:new wn(n,o,r,a,s)},wn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},wn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var In=function(t){this.type=Bt,this.input=t};In.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Ht(n.type)+" instead."):new In(n):null},In.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new le("Expected value to be of type string or array, but found "+Ht(re(e))+" instead.")},In.prototype.eachChild=function(t){t(this.input)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var An={"==":vn,"!=":bn,">":_n,"<":yn,">=":xn,"<=":Cn,array:he,at:ln,boolean:he,case:dn,coalesce:an,collator:be,format:ue,image:de,in:cn,"index-of":hn,interpolate:on,"interpolate-hcl":on,"interpolate-lab":on,length:In,let:sn,literal:se,match:un,number:he,"number-format":wn,object:he,slice:pn,step:Ne,string:he,"to-boolean":ge,"to-color":ge,"to-number":ge,"to-string":ge,var:De,within:Le};function Pn(t,e){var n=e[0],i=e[1],o=e[2],r=e[3];n=n.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var a=r?r.evaluate(t):1,s=ie(n,i,o,a);if(s)throw new le(s);return new qt(n/255*a,i/255*a,o/255*a,a)}function On(t,e){return t in e}function Mn(t,e){var n=e[t];return void 0===n?null:n}function kn(t){return{type:t}}function Sn(t){return{result:"success",value:t}}function En(t){return{result:"error",value:t}}function Tn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Rn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ln(t){return!!t.expression&&t.expression.interpolated}function zn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Bn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function jn(t){return t}function Dn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Fn(t,e,n,i,o){return Dn(typeof n===o?i[n]:void 0,t.default,e.default)}function Vn(t,e,n){if("number"!==zn(n))return Dn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Ve(t.stops.map((function(t){return t[0]})),n);return t.stops[o][1]}function Nn(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==zn(n))return Dn(t.default,e.default);var o=t.stops.length;if(1===o)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[o-1][0])return t.stops[o-1][1];var r=Ve(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,i){var o=i-n,r=t-n;return 0===o?0:1===e?r/o:(Math.pow(e,r)-1)/(Math.pow(e,o)-1)}(n,i,t.stops[r][0],t.stops[r+1][0]),s=t.stops[r][1],l=t.stops[r+1][1],c=Ze[e.type]||jn;if(t.colorSpace&&"rgb"!==t.colorSpace){var h=nn[t.colorSpace];c=function(t,e){return h.reverse(h.interpolate(h.forward(t),h.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return c(n,i,a)}}:c(s,l,a)}function $n(t,e,n){return"color"===e.type?n=qt.parse(n):"formatted"===e.type?n=ee.fromString(n.toString()):"resolvedImage"===e.type?n=ne.fromString(n.toString()):zn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Dn(n,t.default,e.default)}ve.register(An,{error:[{kind:"error"},[jt],function(t,e){throw new le(e[0].evaluate(t))}],typeof:[jt,[Nt],function(t,e){return Ht(re(e[0].evaluate(t)))}],"to-rgba":[Wt(Bt,4),[Ft],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ft,[Bt,Bt,Bt],Pn],rgba:[Ft,[Bt,Bt,Bt,Bt],Pn],has:{type:Dt,overloads:[[[jt],function(t,e){return On(e[0].evaluate(t),t.properties())}],[[jt,Vt],function(t,e){var n=e[1];return On(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Nt,overloads:[[[jt],function(t,e){return Mn(e[0].evaluate(t),t.properties())}],[[jt,Vt],function(t,e){var n=e[1];return Mn(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Nt,[jt],function(t,e){return Mn(e[0].evaluate(t),t.featureState||{})}],properties:[Vt,[],function(t){return t.properties()}],"geometry-type":[jt,[],function(t){return t.geometryType()}],id:[Nt,[],function(t){return t.id()}],zoom:[Bt,[],function(t){return t.globals.zoom}],"heatmap-density":[Bt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Bt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Nt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Bt,kn(Bt),function(t,e){for(var n=0,i=0,o=e;i<o.length;i+=1)n+=o[i].evaluate(t);return n}],"*":[Bt,kn(Bt),function(t,e){for(var n=1,i=0,o=e;i<o.length;i+=1)n*=o[i].evaluate(t);return n}],"-":{type:Bt,overloads:[[[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Bt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Bt,[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Bt,[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Bt,[],function(){return Math.LN2}],pi:[Bt,[],function(){return Math.PI}],e:[Bt,[],function(){return Math.E}],"^":[Bt,[Bt,Bt],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Bt,[Bt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Bt,[Bt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Bt,[Bt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Bt,[Bt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Bt,[Bt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Bt,[Bt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Bt,[Bt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Bt,kn(Bt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Bt,kn(Bt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Bt,[Bt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Bt,[Bt],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Bt,[Bt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Bt,[Bt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Dt,[jt,Nt],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[Dt,[Nt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Dt,[jt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Dt,[jt,Nt],function(t,e){var n=e[0],i=e[1],o=t.properties()[n.value],r=i.value;return typeof o==typeof r&&o<r}],"filter-id-<":[Dt,[Nt],function(t,e){var n=e[0],i=t.id(),o=n.value;return typeof i==typeof o&&i<o}],"filter->":[Dt,[jt,Nt],function(t,e){var n=e[0],i=e[1],o=t.properties()[n.value],r=i.value;return typeof o==typeof r&&o>r}],"filter-id->":[Dt,[Nt],function(t,e){var n=e[0],i=t.id(),o=n.value;return typeof i==typeof o&&i>o}],"filter-<=":[Dt,[jt,Nt],function(t,e){var n=e[0],i=e[1],o=t.properties()[n.value],r=i.value;return typeof o==typeof r&&o<=r}],"filter-id-<=":[Dt,[Nt],function(t,e){var n=e[0],i=t.id(),o=n.value;return typeof i==typeof o&&i<=o}],"filter->=":[Dt,[jt,Nt],function(t,e){var n=e[0],i=e[1],o=t.properties()[n.value],r=i.value;return typeof o==typeof r&&o>=r}],"filter-id->=":[Dt,[Nt],function(t,e){var n=e[0],i=t.id(),o=n.value;return typeof i==typeof o&&i>=o}],"filter-has":[Dt,[Nt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Dt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Dt,[Wt(jt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Dt,[Wt(Nt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Dt,[jt,Wt(Nt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Dt,[jt,Wt(Nt)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var o=n+i>>1;if(e[o]===t)return!0;e[o]>t?i=o-1:n=o+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[kn(Dt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[kn(Dt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Dt,[Dt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Dt,[jt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[jt,[jt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[jt,[jt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[jt,kn(Nt),function(t,e){return e.map((function(e){return ae(e.evaluate(t))})).join("")}],"resolved-locale":[jt,[$t],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Zn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new fe,this._defaultValue=e?function(t){return"color"===t.type&&Bn(t.default)?new qt(0,0,0,0):"color"===t.type?qt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Gn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in An}function Wn(t,e){var n=new Fe(An,[],e?function(t){var e={color:Ft,string:jt,number:Bt,enum:jt,boolean:Dt,formatted:Zt,resolvedImage:Gt};return"array"===t.type?Wt(e[t.value]||Nt,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Sn(new Zn(i,e)):En(n.errors)}Zn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,o,r){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=r,this.expression.evaluate(this._evaluator)},Zn.prototype.evaluate=function(t,e,n,i,o,r){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=r||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new le("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Hn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Be(e.expression)};Hn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,o,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,o,r)},Hn.prototype.evaluate=function(t,e,n,i,o,r){return this._styleExpression.evaluate(t,e,n,i,o,r)};var Kn=function(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Be(e.expression),this.interpolationType=i};function Un(t,e){if("error"===(t=Wn(t,e)).result)return t;var n=t.value.expression,i=ze(n);if(!i&&!Tn(e))return En([new Rt("","data expressions not supported")]);var o=je(n,["zoom"]);if(!o&&!Rn(e))return En([new Rt("","zoom expressions not supported")]);var r=function t(e){var n=null;if(e instanceof sn)n=t(e.result);else if(e instanceof an)for(var i=0,o=e.args;i<o.length&&!(n=t(o[i]));i+=1);else(e instanceof Ne||e instanceof on)&&e.input instanceof ve&&"zoom"===e.input.name&&(n=e);return n instanceof Rt||e.eachChild((function(e){var i=t(e);i instanceof Rt?n=i:!n&&i?n=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return r||o?r instanceof Rt?En([r]):r instanceof on&&!Ln(e)?En([new Rt("",'"interpolate" expressions cannot be used with this property')]):Sn(r?new Kn(i?"camera":"composite",t.value,r.labels,r instanceof on?r.interpolation:void 0):new Hn(i?"constant":"source",t.value)):En([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Kn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,o,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,o,r)},Kn.prototype.evaluate=function(t,e,n,i,o,r){return this._styleExpression.evaluate(t,e,n,i,o,r)},Kn.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?on.interpolationFactor(this.interpolationType,t,e,n):0};var Xn=function(t,e){this._parameters=t,this._specification=e,St(this,function t(e,n){var i,o,r,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),c=e.type||(Ln(n)?"exponential":"interval");if(a&&((e=St({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],qt.parse(t[1])]}))),e.default=qt.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!nn[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)i=Nn;else if("interval"===c)i=Vn;else if("categorical"===c){i=Fn,o=Object.create(null);for(var h=0,u=e.stops;h<u.length;h+=1){var d=u[h];o[d[0]]=d[1]}r=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');i=$n}if(s){for(var p={},g=[],m=0;m<e.stops.length;m++){var f=e.stops[m],v=f[0].zoom;void 0===p[v]&&(p[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},g.push(v)),p[v].stops.push([f[0].value,f[1]])}for(var b=[],y=0,_=g;y<_.length;y+=1){var C=_[y];b.push([p[C].zoom,t(p[C],n)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:on.interpolationFactor.bind(void 0,x),zoomStops:b.map((function(t){return t[0]})),evaluate:function(t,i){var o=t.zoom;return Nn({stops:b,base:e.base},n,o).evaluate(o,i)}}}if(l){var w="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:on.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return i(e,n,t.zoom,o,r)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Dn(e.default,n.default):i(e,n,s,o,r)}}}(this._parameters,this._specification))};function Yn(t){var e=t.key,n=t.value,i=t.valueSpec||{},o=t.objectElementValidators||{},r=t.style,a=t.styleSpec,s=[],l=zn(n);if("object"!==l)return[new Mt(e,n,"object expected, "+l+" found")];for(var c in n){var h=c.split(".")[0],u=i[h]||i["*"],d=void 0;if(o[h])d=o[h];else if(i[h])d=Ci;else if(o["*"])d=o["*"];else{if(!i["*"]){s.push(new Mt(e,n[c],'unknown property "'+c+'"'));continue}d=Ci}s=s.concat(d({key:(e?e+".":e)+c,value:n[c],valueSpec:u,style:r,styleSpec:a,object:n,objectKey:c},n))}for(var p in i)o[p]||i[p].required&&void 0===i[p].default&&void 0===n[p]&&s.push(new Mt(e,n,'missing required property "'+p+'"'));return s}function Jn(t){var e=t.value,n=t.valueSpec,i=t.style,o=t.styleSpec,r=t.key,a=t.arrayElementValidator||Ci;if("array"!==zn(e))return[new Mt(r,e,"array expected, "+zn(e)+" found")];if(n.length&&e.length!==n.length)return[new Mt(r,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Mt(r,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};o.$version<7&&(s.function=n.function),"object"===zn(n.value)&&(s=n.value);for(var l=[],c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:i,styleSpec:o,key:r+"["+c+"]"}));return l}function qn(t){var e=t.key,n=t.value,i=t.valueSpec,o=zn(n);return"number"===o&&n!=n&&(o="NaN"),"number"!==o?[new Mt(e,n,"number expected, "+o+" found")]:"minimum"in i&&n<i.minimum?[new Mt(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new Mt(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function Qn(t){var e,n,i,o=t.valueSpec,r=Et(t.value.type),a={},s="categorical"!==r&&void 0===t.value.property,l=!s,c="array"===zn(t.value.stops)&&"array"===zn(t.value.stops[0])&&"object"===zn(t.value.stops[0][0]),h=Yn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return[new Mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Jn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:u})),"array"===zn(n)&&0===n.length&&e.push(new Mt(t.key,n,"array must have at least one stop")),e},default:function(t){return Ci({key:t.key,value:t.value,valueSpec:o,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===r&&s&&h.push(new Mt(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||h.push(new Mt(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!Ln(t.valueSpec)&&h.push(new Mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Tn(t.valueSpec)?h.push(new Mt(t.key,t.value,"property functions not supported")):s&&!Rn(t.valueSpec)&&h.push(new Mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==t.value.property||h.push(new Mt(t.key,t.value,'"property" property is required')),h;function u(t){var e=[],r=t.value,s=t.key;if("array"!==zn(r))return[new Mt(s,r,"array expected, "+zn(r)+" found")];if(2!==r.length)return[new Mt(s,r,"array length 2 expected, length "+r.length+" found")];if(c){if("object"!==zn(r[0]))return[new Mt(s,r,"object expected, "+zn(r[0])+" found")];if(void 0===r[0].zoom)return[new Mt(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Mt(s,r,"object stop key must have value")];if(i&&i>Et(r[0].zoom))return[new Mt(s,r[0].zoom,"stop zoom values must appear in ascending order")];Et(r[0].zoom)!==i&&(i=Et(r[0].zoom),n=void 0,a={}),e=e.concat(Yn({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:qn,value:d}}))}else e=e.concat(d({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Gn(Tt(r[1]))?e.concat([new Mt(s+"[1]",r[1],"expressions are not allowed in function stops.")]):e.concat(Ci({key:s+"[1]",value:r[1],valueSpec:o,style:t.style,styleSpec:t.styleSpec}))}function d(t,i){var s=zn(t.value),l=Et(t.value),c=null!==t.value?t.value:i;if(e){if(s!==e)return[new Mt(t.key,c,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Mt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){var h="number expected, "+s+" found";return Tn(o)&&void 0===r&&(h+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mt(t.key,c,h)]}return"categorical"!==r||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&void 0!==n&&l<n?[new Mt(t.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===r&&l in a?[new Mt(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Mt(t.key,c,"integer expected, found "+l)]}}function ti(t){var e=("property"===t.expressionContext?Un:Wn)(Tt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Mt(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Be(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Be(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!je(n,["zoom","feature-state"]))return[new Mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ze(n))return[new Mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(t){var e=t.key,n=t.value,i=t.valueSpec,o=[];return Array.isArray(i.values)?-1===i.values.indexOf(Et(n))&&o.push(new Mt(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(Et(n))&&o.push(new Mt(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),o}function ni(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!ni(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Xn.deserialize=function(t){return new Xn(t._parameters,t._specification)},Xn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ii={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function oi(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ni(t)||(t=ai(t));var e=Wn(t,ii);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,i){return e.value.evaluate(t,n,{},i)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function ri(t,e){return t<e?-1:t>e?1:0}function ai(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?si(t[1],t[2],"=="):"!="===n?hi(si(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?si(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(ai))):"all"===n?["all"].concat(t.slice(1).map(ai)):"none"===n?["all"].concat(t.slice(1).map(ai).map(hi)):"in"===n?li(t[1],t.slice(2)):"!in"===n?hi(li(t[1],t.slice(2))):"has"===n?ci(t[1]):"!has"===n?hi(ci(t[1])):"within"!==n||t}function si(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function li(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(ri)]]:["filter-in-small",t,["literal",e]]}}function ci(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function hi(t){return["!",t]}function ui(t){return ni(Tt(t.value))?ti(St({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==zn(n))return[new Mt(i,n,"array expected, "+zn(n)+" found")];var o,r=e.styleSpec,a=[];if(n.length<1)return[new Mt(i,n,"filter array must have at least 1 element")];switch(a=a.concat(ei({key:i+"[0]",value:n[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Et(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Et(n[1])&&a.push(new Mt(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Mt(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(o=zn(n[1]))&&a.push(new Mt(i+"[1]",n[1],"string expected, "+o+" found"));for(var s=2;s<n.length;s++)o=zn(n[s]),"$type"===Et(n[1])?a=a.concat(ei({key:i+"["+s+"]",value:n[s],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new Mt(i+"["+s+"]",n[s],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(t({key:i+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=zn(n[1]),2!==n.length?a.push(new Mt(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==o&&a.push(new Mt(i+"[1]",n[1],"string expected, "+o+" found"));break;case"within":o=zn(n[1]),2!==n.length?a.push(new Mt(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==o&&a.push(new Mt(i+"[1]",n[1],"object expected, "+o+" found"))}return a}(t)}function di(t,e){var n=t.key,i=t.style,o=t.styleSpec,r=t.value,a=t.objectKey,s=o[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Ci({key:n,value:r,valueSpec:o.transition,style:i,styleSpec:o});var c,h=t.valueSpec||s[a];if(!h)return[new Mt(n,r,'unknown property "'+a+'"')];if("string"===zn(r)&&Tn(h)&&!h.tokens&&(c=/^{([^}]+)}$/.exec(r)))return[new Mt(n,r,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var u=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&u.push(new Mt(n,r,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Bn(Tt(r))&&"identity"===Et(r.type)&&u.push(new Mt(n,r,'"text-font" does not support identity functions'))),u.concat(Ci({key:t.key,value:r,valueSpec:h,style:i,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function pi(t){return di(t,"paint")}function gi(t){return di(t,"layout")}function mi(t){var e=[],n=t.value,i=t.key,o=t.style,r=t.styleSpec;n.type||n.ref||e.push(new Mt(i,n,'either "type" or "ref" is required'));var a,s=Et(n.type),l=Et(n.ref);if(n.id)for(var c=Et(n.id),h=0;h<t.arrayIndex;h++){var u=o.layers[h];Et(u.id)===c&&e.push(new Mt(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+u.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new Mt(i,n[t],'"'+t+'" is prohibited for ref layers'))})),o.layers.forEach((function(t){Et(t.id)===l&&(a=t)})),a?a.ref?e.push(new Mt(i,n.ref,"ref cannot reference another ref layer")):s=Et(a.type):e.push(new Mt(i,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var d=o.sources&&o.sources[n.source],p=d&&Et(d.type);d?"vector"===p&&"raster"===s?e.push(new Mt(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new Mt(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new Mt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&d.lineMetrics||e.push(new Mt(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Mt(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Mt(i,n.source,'source "'+n.source+'" not found'))}else e.push(new Mt(i,n,'missing required property "source"'));return e=e.concat(Yn({key:i,value:n,valueSpec:r.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ci({key:i+".type",value:n.type,valueSpec:r.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:ui,layout:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return gi(St({layerType:s},t))}}})},paint:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return pi(St({layerType:s},t))}}})}}}))}function fi(t){var e=t.value,n=t.key,i=zn(e);return"string"!==i?[new Mt(n,e,"string expected, "+i+" found")]:[]}var vi={promoteId:function(t){var e=t.key,n=t.value;if("string"===zn(n))return fi({key:e,value:n});var i=[];for(var o in n)i.push.apply(i,fi({key:e+"."+o,value:n[o]}));return i}};function bi(t){var e=t.value,n=t.key,i=t.styleSpec,o=t.style;if(!e.type)return[new Mt(n,e,'"type" is required')];var r,a=Et(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Yn({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i,objectElementValidators:vi});case"geojson":if(r=Yn({key:n,value:e,valueSpec:i.source_geojson,style:o,styleSpec:i,objectElementValidators:vi}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],c=l[0],h="string"==typeof c?[c,["accumulated"],["get",s]]:c;r.push.apply(r,ti({key:n+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),r.push.apply(r,ti({key:n+"."+s+".reduce",value:h,expressionContext:"cluster-reduce"}))}return r;case"video":return Yn({key:n,value:e,valueSpec:i.source_video,style:o,styleSpec:i});case"image":return Yn({key:n,value:e,valueSpec:i.source_image,style:o,styleSpec:i});case"canvas":return[new Mt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,styleSpec:i})}}function yi(t){var e=t.value,n=t.styleSpec,i=n.light,o=t.style,r=[],a=zn(e);if(void 0===e)return r;if("object"!==a)return r.concat([new Mt("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);r=r.concat(l&&i[l[1]]&&i[l[1]].transition?Ci({key:s,value:e[s],valueSpec:n.transition,style:o,styleSpec:n}):i[s]?Ci({key:s,value:e[s],valueSpec:i[s],style:o,styleSpec:n}):[new Mt(s,e[s],'unknown property "'+s+'"')])}return r}var _i={"*":function(){return[]},array:Jn,boolean:function(t){var e=t.value,n=t.key,i=zn(e);return"boolean"!==i?[new Mt(n,e,"boolean expected, "+i+" found")]:[]},number:qn,color:function(t){var e=t.key,n=t.value,i=zn(n);return"string"!==i?[new Mt(e,n,"color expected, "+i+" found")]:null===Jt(n)?[new Mt(e,n,'color expected, "'+n+'" found')]:[]},constants:kt,enum:ei,filter:ui,function:Qn,layer:mi,object:Yn,source:bi,light:yi,string:fi,formatted:function(t){return 0===fi(t).length?[]:ti(t)},resolvedImage:function(t){return 0===fi(t).length?[]:ti(t)}};function Ci(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&Bn(Et(e))?Qn(t):n.expression&&Gn(Tt(e))?ti(t):n.type&&_i[n.type]?_i[n.type](t):Yn(St({},t,{valueSpec:n.type?i[n.type]:n}))}function xi(t){var e=t.value,n=t.key,i=fi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new Mt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new Mt(n,e,'"glyphs" url must include a "{range}" token'))),i}function wi(t,e){void 0===e&&(e=Ot);var n=[];return n=n.concat(Ci({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:xi,"*":function(){return[]}}})),t.constants&&(n=n.concat(kt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ii(n)}function Ii(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Ai(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Ii(t.apply(this,e))}}wi.source=Ai(bi),wi.light=Ai(yi),wi.layer=Ai(mi),wi.filter=Ai(ui),wi.paintProperty=Ai(pi),wi.layoutProperty=Ai(gi);var Pi=wi,Oi=Pi.light,Mi=Pi.paintProperty,ki=Pi.layoutProperty;function Si(t,e){var n=!1;if(e&&e.length)for(var i=0,o=e;i<o.length;i+=1)t.fire(new At(new Error(o[i].message))),n=!0;return n}var Ei=Ti;function Ti(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],this.d=(e=o[1])+2*(n=o[2]);for(var r=0;r<this.d*this.d;r++){var a=o[3+r],s=o[3+r+1];i.push(a===s?null:o.subarray(a,s))}var l=o[3+i.length+1];this.keys=o.subarray(o[3+i.length],l),this.bboxes=o.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}Ti.prototype.insert=function(t,e,n,i,o){this._forEachCell(e,n,i,o,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o)},Ti.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ti.prototype._insertCell=function(t,e,n,i,o,r){this.cells[o].push(r)},Ti.prototype.query=function(t,e,n,i,o){var r=this.min,a=this.max;if(t<=r&&e<=r&&a<=n&&a<=i&&!o)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},o),s},Ti.prototype._queryCell=function(t,e,n,i,o,r,a,s){var l=this.cells[o];if(null!==l)for(var c=this.keys,h=this.bboxes,u=0;u<l.length;u++){var d=l[u];if(void 0===a[d]){var p=4*d;(s?s(h[p+0],h[p+1],h[p+2],h[p+3]):t<=h[p+2]&&e<=h[p+3]&&n>=h[p+0]&&i>=h[p+1])?(a[d]=!0,r.push(c[d])):a[d]=!1}}},Ti.prototype._forEachCell=function(t,e,n,i,o,r,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),h=this._convertToCellCoord(n),u=this._convertToCellCoord(i),d=l;d<=h;d++)for(var p=c;p<=u;p++){var g=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&o.call(this,t,e,n,i,g,r,a,s))return}},Ti.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Ti.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ti.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var r=e,a=0;a<t.length;a++){var s=t[a];o[3+a]=r,o.set(s,r),r+=s.length}return o[3+t.length]=r,o.set(this.keys,r),o[3+t.length+1]=r+=this.keys.length,o.set(this.bboxes,r),r+=this.bboxes.length,o.buffer};var Ri=a.ImageData,Li=a.ImageBitmap,zi={};function Bi(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),zi[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var ji in Bi("Object",Object),Ei.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Ei.deserialize=function(t){return new Ei(t.buffer)},Bi("Grid",Ei),Bi("Color",qt),Bi("Error",Error),Bi("ResolvedImage",ne),Bi("StylePropertyFunction",Xn),Bi("StyleExpression",Zn,{omit:["_evaluator"]}),Bi("ZoomDependentExpression",Kn),Bi("ZoomConstantExpression",Hn),Bi("CompoundExpression",ve,{omit:["_evaluate"]}),An)An[ji]._classRegistryKey||Bi("Expression_"+ji,An[ji]);function Di(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Fi(t){return Li&&t instanceof Li}function Vi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Di(t)||Fi(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ri)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],o=0,r=t;o<r.length;o+=1)i.push(Vi(r[o],e));return i}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(zi[s].omit.indexOf(c)>=0)){var h=t[c];l[c]=zi[s].shallow.indexOf(c)>=0?h:Vi(h,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function Ni(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Di(t)||Fi(t)||ArrayBuffer.isView(t)||t instanceof Ri)return t;if(Array.isArray(t))return t.map(Ni);if("object"==typeof t){var e=t.$name||"Object",n=zi[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),o=0,r=Object.keys(t);o<r.length;o+=1){var a=r[o];if("$name"!==a){var s=t[a];i[a]=zi[e].shallow.indexOf(a)>=0?s:Ni(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var $i=function(){this.first=!0};$i.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Zi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Gi(t){for(var e=0,n=t;e<n.length;e+=1)if(Wi(n[e].charCodeAt(0)))return!0;return!1}function Wi(t){return!(746!==t&&747!==t&&(t<4352||!(Zi["Bopomofo Extended"](t)||Zi.Bopomofo(t)||Zi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Zi["CJK Compatibility Ideographs"](t)||Zi["CJK Compatibility"](t)||Zi["CJK Radicals Supplement"](t)||Zi["CJK Strokes"](t)||!(!Zi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Zi["CJK Unified Ideographs Extension A"](t)||Zi["CJK Unified Ideographs"](t)||Zi["Enclosed CJK Letters and Months"](t)||Zi["Hangul Compatibility Jamo"](t)||Zi["Hangul Jamo Extended-A"](t)||Zi["Hangul Jamo Extended-B"](t)||Zi["Hangul Jamo"](t)||Zi["Hangul Syllables"](t)||Zi.Hiragana(t)||Zi["Ideographic Description Characters"](t)||Zi.Kanbun(t)||Zi["Kangxi Radicals"](t)||Zi["Katakana Phonetic Extensions"](t)||Zi.Katakana(t)&&12540!==t||!(!Zi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Zi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Zi["Unified Canadian Aboriginal Syllabics"](t)||Zi["Unified Canadian Aboriginal Syllabics Extended"](t)||Zi["Vertical Forms"](t)||Zi["Yijing Hexagram Symbols"](t)||Zi["Yi Syllables"](t)||Zi["Yi Radicals"](t))))}function Hi(t){return!(Wi(t)||function(t){return!!(Zi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Zi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Zi["Letterlike Symbols"](t)||Zi["Number Forms"](t)||Zi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Zi["Control Pictures"](t)&&9251!==t||Zi["Optical Character Recognition"](t)||Zi["Enclosed Alphanumerics"](t)||Zi["Geometric Shapes"](t)||Zi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Zi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Zi["CJK Symbols and Punctuation"](t)||Zi.Katakana(t)||Zi["Private Use Area"](t)||Zi["CJK Compatibility Forms"](t)||Zi["Small Form Variants"](t)||Zi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Ki(t){return t>=1424&&t<=2303||Zi["Arabic Presentation Forms-A"](t)||Zi["Arabic Presentation Forms-B"](t)}function Ui(t,e){return!(!e&&Ki(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Zi.Khmer(t))}function Xi(t){for(var e=0,n=t;e<n.length;e+=1)if(Ki(n[e].charCodeAt(0)))return!0;return!1}var Yi=null,Ji="unavailable",qi=null,Qi=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ji="error"),Yi&&Yi(t)};function to(){eo.fire(new It("pluginStateChange",{pluginStatus:Ji,pluginURL:qi}))}var eo=new Pt,no=function(){return Ji},io=function(){if("deferred"!==Ji||!qi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji="loading",to(),qi&&_t({url:qi},(function(t){t?Qi(t):(Ji="loaded",to())}))},oo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ji||null!=oo.applyArabicShaping},isLoading:function(){return"loading"===Ji},setState:function(t){Ji=t.pluginStatus,qi=t.pluginURL},isParsed:function(){return null!=oo.applyArabicShaping&&null!=oo.processBidirectionalText&&null!=oo.processStyledBidirectionalText},getPluginURL:function(){return qi}},ro=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $i,this.transition={})};ro.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Ui(i[n].charCodeAt(0),e))return!1;return!0}(t,oo.isLoaded())},ro.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ro.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var ao=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Bn(t))return new Xn(t,e);if(Gn(t)){var n=Un(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=qt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};ao.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ao.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var so=function(t){this.property=t,this.value=new ao(t,void 0)};so.prototype.transitioned=function(t,e){return new co(this.property,this.value,e,d({},t.transition,this.transition),t.now)},so.prototype.untransitioned=function(){return new co(this.property,this.value,null,{},0)};var lo=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};lo.prototype.getValue=function(t){return C(this._values[t].value.value)},lo.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new so(this._values[t].property)),this._values[t].value=new ao(this._values[t].property,null===e?void 0:C(e))},lo.prototype.getTransition=function(t){return C(this._values[t].transition)},lo.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new so(this._values[t].property)),this._values[t].transition=C(e)||void 0},lo.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],o=this.getValue(i);void 0!==o&&(t[i]=o);var r=this.getTransition(i);void 0!==r&&(t[i+"-transition"]=r)}return t},lo.prototype.transitioned=function(t,e){for(var n=new ho(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var r=o[i];n._values[r]=this._values[r].transitioned(t,e._values[r])}return n},lo.prototype.untransitioned=function(){for(var t=new ho(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var co=function(t,e,n,i,o){this.property=t,this.value=e,this.begin=o+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};co.prototype.possiblyEvaluate=function(t,e,n){var i=t.now||0,o=this.value.possiblyEvaluate(t,e,n),r=this.prior;if(r){if(i>this.end)return this.prior=null,o;if(this.value.isDataDriven())return this.prior=null,o;if(i<this.begin)return r.possiblyEvaluate(t,e,n);var a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t,e,n),o,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return o};var ho=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};ho.prototype.possiblyEvaluate=function(t,e,n){for(var i=new go(this._properties),o=0,r=Object.keys(this._values);o<r.length;o+=1){var a=r[o];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i},ho.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var uo=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};uo.prototype.getValue=function(t){return C(this._values[t].value)},uo.prototype.setValue=function(t,e){this._values[t]=new ao(this._values[t].property,null===e?void 0:C(e))},uo.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],o=this.getValue(i);void 0!==o&&(t[i]=o)}return t},uo.prototype.possiblyEvaluate=function(t,e,n){for(var i=new go(this._properties),o=0,r=Object.keys(this._values);o<r.length;o+=1){var a=r[o];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i};var po=function(t,e,n){this.property=t,this.value=e,this.parameters=n};po.prototype.isConstant=function(){return"constant"===this.value.kind},po.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},po.prototype.evaluate=function(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)};var go=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};go.prototype.get=function(t){return this._values[t]};var mo=function(t){this.specification=t};mo.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},mo.prototype.interpolate=function(t,e,n){var i=Ze[this.specification.type];return i?i(t,e,n):t};var fo=function(t,e){this.specification=t,this.overrides=e};fo.prototype.possiblyEvaluate=function(t,e,n,i){return new po(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)},fo.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new po(this,{kind:"constant",value:void 0},t.parameters);var i=Ze[this.specification.type];return i?new po(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},fo.prototype.evaluate=function(t,e,n,i,o,r){return"constant"===t.kind?t.value:t.evaluate(e,n,i,o,r)};var vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0===t.value)return new po(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var o=t.expression.evaluate(e,null,{},n,i),r="resolvedImage"===t.property.specification.type&&"string"!=typeof o?o.name:o,a=this._calculate(r,r,r,e);return new po(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new po(this,{kind:"constant",value:s},e)}return new po(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i,o,r){if("source"===t.kind){var a=t.evaluate(e,n,i,o,r);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(fo),bo=function(t){this.specification=t};bo.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){var o=t.expression.evaluate(e,null,{},n,i);return this._calculate(o,o,o,e)}return this._calculate(t.expression.evaluate(new ro(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ro(Math.floor(e.zoom),e)),t.expression.evaluate(new ro(Math.floor(e.zoom+1),e)),e)}},bo.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},bo.prototype.interpolate=function(t){return t};var yo=function(t){this.specification=t};yo.prototype.possiblyEvaluate=function(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)},yo.prototype.interpolate=function(){return!1};var _o=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new ao(n,void 0),o=this.defaultTransitionablePropertyValues[e]=new so(n);this.defaultTransitioningPropertyValues[e]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};Bi("DataDrivenProperty",fo),Bi("DataConstantProperty",mo),Bi("CrossFadedDataDrivenProperty",vo),Bi("CrossFadedProperty",bo),Bi("ColorRampProperty",yo);var Co=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new uo(n.layout)),n.paint)){for(var i in this._transitionablePaint=new lo(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var o in e.layout)this.setLayoutProperty(o,e.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new go(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(ki,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return b(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Mi,"layers."+this.id+".paint."+t,t,e,n))return!1;if(b(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],o="cross-faded-data-driven"===i.property.specification["property-type"],r=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||r||o||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Si(this,t.call(Pi,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Ot,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof po&&Tn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Pt),xo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},wo=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Io=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ao(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map((function(t){var o=xo[t.type].BYTES_PER_ELEMENT,r=n=Po(n,Math.max(e,o)),a=t.components||1;return i=Math.max(i,o),n+=o*a,{name:t.name,type:t.type,components:a,offset:r}})),size:Po(n,Math.max(i,e)),alignment:e}}function Po(t,e){return Math.ceil(t/e)*e}Io.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Io.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Io.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Io.prototype.clear=function(){this.length=0},Io.prototype.resize=function(t){this.reserve(t),this.length=t},Io.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Io.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}(Io);Oo.prototype.bytesPerElement=4,Bi("StructArrayLayout2i4",Oo);var Mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,o){var r=4*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,this.int16[r+3]=o,t},e}(Io);Mo.prototype.bytesPerElement=8,Bi("StructArrayLayout4i8",Mo);var ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,o,r)},e.prototype.emplace=function(t,e,n,i,o,r,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=o,this.int16[s+4]=r,this.int16[s+5]=a,t},e}(Io);ko.prototype.bytesPerElement=12,Bi("StructArrayLayout2i4i12",ko);var So=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,o,r)},e.prototype.emplace=function(t,e,n,i,o,r,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=o,this.uint8[l+6]=r,this.uint8[l+7]=a,t},e}(Io);So.prototype.bytesPerElement=8,Bi("StructArrayLayout2i4ub8",So);var Eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}(Io);Eo.prototype.bytesPerElement=8,Bi("StructArrayLayout2f8",Eo);var To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r,a,s,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,i,o,r,a,s,l,c)},e.prototype.emplace=function(t,e,n,i,o,r,a,s,l,c,h){var u=10*t;return this.uint16[u+0]=e,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=o,this.uint16[u+4]=r,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,this.uint16[u+8]=c,this.uint16[u+9]=h,t},e}(Io);To.prototype.bytesPerElement=20,Bi("StructArrayLayout10ui20",To);var Ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r,a,s,l,c,h,u){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,o,r,a,s,l,c,h,u)},e.prototype.emplace=function(t,e,n,i,o,r,a,s,l,c,h,u,d){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=o,this.uint16[p+4]=r,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=h,this.int16[p+10]=u,this.int16[p+11]=d,t},e}(Io);Ro.prototype.bytesPerElement=24,Bi("StructArrayLayout4i4ui4i24",Ro);var Lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var o=3*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,t},e}(Io);Lo.prototype.bytesPerElement=12,Bi("StructArrayLayout3f12",Lo);var zo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Io);zo.prototype.bytesPerElement=4,Bi("StructArrayLayout1ul4",zo);var Bo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r,a,s,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,i,o,r,a,s,l)},e.prototype.emplace=function(t,e,n,i,o,r,a,s,l,c){var h=10*t,u=5*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=i,this.int16[h+3]=o,this.int16[h+4]=r,this.int16[h+5]=a,this.uint32[u+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=c,t},e}(Io);Bo.prototype.bytesPerElement=20,Bi("StructArrayLayout6i1ul2ui20",Bo);var jo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,o,r)},e.prototype.emplace=function(t,e,n,i,o,r,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=o,this.int16[s+4]=r,this.int16[s+5]=a,t},e}(Io);jo.prototype.bytesPerElement=12,Bi("StructArrayLayout2i2i2i12",jo);var Do=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i,o)},e.prototype.emplace=function(t,e,n,i,o,r){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=o,this.int16[s+7]=r,t},e}(Io);Do.prototype.bytesPerElement=16,Bi("StructArrayLayout2f1f2i16",Do);var Fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,o){var r=12*t,a=3*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,this.float32[a+1]=i,this.float32[a+2]=o,t},e}(Io);Fo.prototype.bytesPerElement=12,Bi("StructArrayLayout2ub2f12",Fo);var Vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var o=3*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=i,t},e}(Io);Vo.prototype.bytesPerElement=6,Bi("StructArrayLayout3ui6",Vo);var No=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f)},e.prototype.emplace=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f,v){var b=24*t,y=12*t,_=48*t;return this.int16[b+0]=e,this.int16[b+1]=n,this.uint16[b+2]=i,this.uint16[b+3]=o,this.uint32[y+2]=r,this.uint32[y+3]=a,this.uint32[y+4]=s,this.uint16[b+10]=l,this.uint16[b+11]=c,this.uint16[b+12]=h,this.float32[y+7]=u,this.float32[y+8]=d,this.uint8[_+36]=p,this.uint8[_+37]=g,this.uint8[_+38]=m,this.uint32[y+10]=f,this.int16[b+22]=v,t},e}(Io);No.prototype.bytesPerElement=48,Bi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",No);var $o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f,v,b,y,_,C,x,w,I,A,P,O){var M=this.length;return this.resize(M+1),this.emplace(M,t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f,v,b,y,_,C,x,w,I,A,P,O)},e.prototype.emplace=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f,v,b,y,_,C,x,w,I,A,P,O,M){var k=34*t,S=17*t;return this.int16[k+0]=e,this.int16[k+1]=n,this.int16[k+2]=i,this.int16[k+3]=o,this.int16[k+4]=r,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=l,this.uint16[k+8]=c,this.uint16[k+9]=h,this.uint16[k+10]=u,this.uint16[k+11]=d,this.uint16[k+12]=p,this.uint16[k+13]=g,this.uint16[k+14]=m,this.uint16[k+15]=f,this.uint16[k+16]=v,this.uint16[k+17]=b,this.uint16[k+18]=y,this.uint16[k+19]=_,this.uint16[k+20]=C,this.uint16[k+21]=x,this.uint16[k+22]=w,this.uint32[S+12]=I,this.float32[S+13]=A,this.float32[S+14]=P,this.float32[S+15]=O,this.float32[S+16]=M,t},e}(Io);$o.prototype.bytesPerElement=68,Bi("StructArrayLayout8i15ui1ul4f68",$o);var Zo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Io);Zo.prototype.bytesPerElement=4,Bi("StructArrayLayout1f4",Zo);var Go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var o=3*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,t},e}(Io);Go.prototype.bytesPerElement=6,Bi("StructArrayLayout3i6",Go);var Wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var o=4*t;return this.uint32[2*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=i,t},e}(Io);Wo.prototype.bytesPerElement=8,Bi("StructArrayLayout1ul2ui8",Wo);var Ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}(Io);Ho.prototype.bytesPerElement=4,Bi("StructArrayLayout2ui4",Ho);var Ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Io);Ko.prototype.bytesPerElement=2,Bi("StructArrayLayout1ui2",Ko);var Uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,o){var r=4*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,this.float32[r+3]=o,t},e}(Io);Uo.prototype.bytesPerElement=16,Bi("StructArrayLayout4f16",Uo);var Xo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new o(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(wo);Xo.prototype.size=20;var Yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Xo(this,t)},e}(Bo);Bi("CollisionBoxArray",Yo);var Jo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(wo);Jo.prototype.size=48;var qo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Jo(this,t)},e}(No);Bi("PlacedSymbolArray",qo);var Qo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(wo);Qo.prototype.size=68;var tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Qo(this,t)},e}($o);Bi("SymbolInstanceArray",tr);var er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Zo);Bi("GlyphOffsetArray",er);var nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Go);Bi("SymbolLineVertexArray",nr);var ir=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(wo);ir.prototype.size=8;var or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ir(this,t)},e}(Wo);Bi("FeatureIndexArray",or);var rr=Ao([{name:"a_pos",components:2,type:"Int16"}],4).members,ar=function(t){void 0===t&&(t=[]),this.segments=t};function sr(t,e){return 256*(t=h(Math.floor(t),0,255))+h(Math.floor(e),0,255)}ar.prototype.prepareSegment=function(t,e,n,i){var o=this.segments[this.segments.length-1];return t>ar.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+ar.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!o||o.vertexLength+t>ar.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i)&&(o={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(o.sortKey=i),this.segments.push(o)),o},ar.prototype.get=function(){return this.segments},ar.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},ar.simpleSegment=function(t,e,n,i){return new ar([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])},ar.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bi("SegmentVector",ar);var lr=Ao([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),cr=e((function(t){t.exports=function(t,e){var n,i,o,r,a,s,l,c;for(i=t.length-(n=3&t.length),o=e,a=3432918353,s=461845907,c=0;c<i;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,o=27492+(65535&(r=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return o^=t.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}})),hr=e((function(t){t.exports=function(t,e){for(var n,i=t.length,o=e^i,r=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+((1540483477*(n>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++r;switch(i){case 3:o^=(255&t.charCodeAt(r+2))<<16;case 2:o^=(255&t.charCodeAt(r+1))<<8;case 1:o=1540483477*(65535&(o^=255&t.charCodeAt(r)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0}})),ur=cr,dr=hr;ur.murmur3=cr,ur.murmur2=dr;var pr=function(){this.ids=[],this.positions=[],this.indexed=!1};pr.prototype.add=function(t,e,n,i){this.ids.push(mr(t)),this.positions.push(e,n,i)},pr.prototype.getPositions=function(t){for(var e=mr(t),n=0,i=this.ids.length-1;n<i;){var o=n+i>>1;this.ids[o]>=e?i=o:n=o+1}for(var r=[];this.ids[n]===e;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r},pr.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,o){for(;i<o;){for(var r=e[i+o>>1],a=i-1,s=o+1;;){do{a++}while(e[a]<r);do{s--}while(e[s]>r);if(a>=s)break;fr(e,a,s),fr(n,3*a,3*s),fr(n,3*a+1,3*s+1),fr(n,3*a+2,3*s+2)}s-i<o-s?(t(e,n,i,s),i=s+1):(t(e,n,s+1,o),o=s)}}(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}},pr.deserialize=function(t){var e=new pr;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var gr=Math.pow(2,53)-1;function mr(t){var e=+t;return!isNaN(e)&&e<=gr?e:ur(String(t))}function fr(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}Bi("FeaturePositionMap",pr);var vr=function(t,e){this.gl=t.gl,this.location=e},br=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(vr),yr=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(vr),_r=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(vr),Cr=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(vr),xr=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(vr),wr=function(t){function e(e,n){t.call(this,e,n),this.current=qt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(vr),Ir=new Float32Array(16),Ar=function(t){function e(e,n){t.call(this,e,n),this.current=Ir}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(vr);function Pr(t){return[sr(255*t.r,255*t.g),sr(255*t.b,255*t.a)]}var Or=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};Or.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},Or.prototype.getBinding=function(t,e,n){return"color"===this.type?new wr(t,e):new yr(t,e)};var Mr=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Mr.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Mr.prototype.setUniform=function(t,e,n,i){var o="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;o&&t.set(o)},Mr.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new xr(t,e):new yr(t,e)};var kr=function(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new i};kr.prototype.populatePaintArray=function(t,e,n,i,o){var r=this.paintVertexArray.length,a=this.expression.evaluate(new ro(0),e,{},i,[],o);this.paintVertexArray.resize(t),this._setPaintValue(r,t,a)},kr.prototype.updatePaintArray=function(t,e,n,i){var o=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,o)},kr.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var i=Pr(n),o=t;o<e;o++)this.paintVertexArray.emplace(o,i[0],i[1]);else{for(var r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},kr.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},kr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Sr=function(t,e,n,i,o,r){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new r};Sr.prototype.populatePaintArray=function(t,e,n,i,o){var r=this.expression.evaluate(new ro(this.zoom),e,{},i,[],o),a=this.expression.evaluate(new ro(this.zoom+1),e,{},i,[],o),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,r,a)},Sr.prototype.updatePaintArray=function(t,e,n,i){var o=this.expression.evaluate({zoom:this.zoom},n,i),r=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,o,r)},Sr.prototype._setPaintValue=function(t,e,n,i){if("color"===this.type)for(var o=Pr(n),r=Pr(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,o[0],o[1],r[0],r[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}},Sr.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Sr.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=h(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)},Sr.prototype.getBinding=function(t,e,n){return new yr(t,e)};var Er=function(t,e,n,i,o,r){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=i,this.layerId=r,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Er.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)},Er.prototype.updatePaintArray=function(t,e,n,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)},Er.prototype._setPaintValues=function(t,e,n,i){if(i&&n){var o=i[n.min],r=i[n.mid],a=i[n.max];if(o&&r&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,r.tl[0],r.tl[1],r.br[0],r.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],r.pixelRatio,o.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,r.tl[0],r.tl[1],r.br[0],r.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],r.pixelRatio,a.pixelRatio)}},Er.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,lr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,lr.members,this.expression.isStateDependent))},Er.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Tr=function(t,e,n){this.binders={},this._buffers=[];var i=[];for(var o in t.paint._values)if(n(o)){var r=t.paint.get(o);if(r instanceof po&&Tn(r.property.specification)){var a=Lr(o,t.type),s=r.value,l=r.property.specification.type,c=r.property.useIntegerZoom,h=r.property.specification["property-type"],u="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===s.kind)this.binders[o]=u?new Mr(s.value,a):new Or(s.value,a,l),i.push("/u_"+o);else if("source"===s.kind||u){var d=zr(o,l,"source");this.binders[o]=u?new Er(s,l,c,e,d,t.id):new kr(s,a,l,d),i.push("/a_"+o)}else{var p=zr(o,l,"composite");this.binders[o]=new Sr(s,a,l,c,e,p),i.push("/z_"+o)}}}this.cacheKey=i.sort().join("")};Tr.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof kr||e instanceof Sr?e.maxValue:0},Tr.prototype.populatePaintArrays=function(t,e,n,i,o){for(var r in this.binders){var a=this.binders[r];(a instanceof kr||a instanceof Sr||a instanceof Er)&&a.populatePaintArray(t,e,n,i,o)}},Tr.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var i=this.binders[n];i instanceof Mr&&i.setConstantPatternPositions(t,e)}},Tr.prototype.updatePaintArrays=function(t,e,n,i,o){var r=!1;for(var a in t)for(var s=0,l=e.getPositions(a);s<l.length;s+=1){var c=l[s],h=n.feature(c.index);for(var u in this.binders){var d=this.binders[u];if((d instanceof kr||d instanceof Sr||d instanceof Er)&&!0===d.expression.isStateDependent){var p=i.paint.get(u);d.expression=p.value,d.updatePaintArray(c.start,c.end,h,t[a],o),r=!0}}}return r},Tr.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof Or||n instanceof Mr)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Tr.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof kr||n instanceof Sr)for(var i=0;i<n.paintVertexAttributes.length;i++)t.push(n.paintVertexAttributes[i].name);else if(n instanceof Er)for(var o=0;o<lr.members.length;o++)t.push(lr.members[o].name)}return t},Tr.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Or||n instanceof Mr||n instanceof Sr)for(var i=0,o=n.uniformNames;i<o.length;i+=1)t.push(o[i])}return t},Tr.prototype.getPaintVertexBuffers=function(){return this._buffers},Tr.prototype.getUniforms=function(t,e){var n=[];for(var i in this.binders){var o=this.binders[i];if(o instanceof Or||o instanceof Mr||o instanceof Sr)for(var r=0,a=o.uniformNames;r<a.length;r+=1){var s=a[r];if(e[s]){var l=o.getBinding(t,e[s],s);n.push({name:s,property:i,binding:l})}}}return n},Tr.prototype.setUniforms=function(t,e,n,i){for(var o=0,r=e;o<r.length;o+=1){var a=r[o],s=a.name,l=a.property;this.binders[l].setUniform(a.binding,i,n.get(l),s)}},Tr.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Er){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof kr||n instanceof Sr)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Tr.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof kr||n instanceof Sr||n instanceof Er)&&n.upload(t)}this.updatePaintBuffers()},Tr.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof kr||e instanceof Sr||e instanceof Er)&&e.destroy()}};var Rr=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,o=t;i<o.length;i+=1){var r=o[i];this.programConfigurations[r.id]=new Tr(r,e,n)}this.needsUpload=!1,this._featureMap=new pr,this._bufferOffset=0};function Lr(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function zr(t,e,n){var i={color:{source:Eo,composite:Uo},number:{source:Zo,composite:Eo}},o=function(t){return{"line-pattern":{source:To,composite:To},"fill-pattern":{source:To,composite:To},"fill-extrusion-pattern":{source:To,composite:To}}[t]}(t);return o&&o[n]||i[e][n]}Rr.prototype.populatePaintArrays=function(t,e,n,i,o,r){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,o,r);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Rr.prototype.updatePaintArrays=function(t,e,n,i){for(var o=0,r=n;o<r.length;o+=1){var a=r[o];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},Rr.prototype.get=function(t){return this.programConfigurations[t]},Rr.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Rr.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Bi("ConstantBinder",Or),Bi("CrossFadedConstantBinder",Mr),Bi("SourceExpressionBinder",kr),Bi("CrossFadedCompositeBinder",Er),Bi("CompositeExpressionBinder",Sr),Bi("ProgramConfiguration",Tr,{omit:["_buffers"]}),Bi("ProgramConfigurationSet",Rr);var Br=Math.pow(2,14)-1,jr=-Br-1;function Dr(t){for(var e=8192/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var o=n[i],r=0;r<o.length;r++){var a=o[r],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=h(s,jr,Br),a.y=h(l,jr,Br),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Fr(t,e,n,i,o){t.emplaceBack(2*e+(i+1)/2,2*n+(o+1)/2)}var Vr=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Oo,this.indexArray=new Vo,this.segments=new ar,this.programConfigurations=new Rr(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Nr(t,e){for(var n=0;n<t.length;n++)if(Yr(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(Yr(t,e[i]))return!0;return!!Wr(t,e)}function $r(t,e,n){return!!Yr(t,e)||!!Kr(e,t,n)}function Zr(t,e){if(1===t.length)return Xr(e,t[0]);for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)if(Yr(t,i[o]))return!0;for(var r=0;r<t.length;r++)if(Xr(e,t[r]))return!0;for(var a=0;a<e.length;a++)if(Wr(t,e[a]))return!0;return!1}function Gr(t,e,n){if(t.length>1){if(Wr(t,e))return!0;for(var i=0;i<e.length;i++)if(Kr(e[i],t,n))return!0}for(var o=0;o<t.length;o++)if(Kr(t[o],e,n))return!0;return!1}function Wr(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],o=t[n+1],r=0;r<e.length-1;r++)if(Hr(i,o,e[r],e[r+1]))return!0;return!1}function Hr(t,e,n,i){return I(t,n,i)!==I(e,n,i)&&I(t,e,n)!==I(t,e,i)}function Kr(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var o=1;o<e.length;o++)if(Ur(t,e[o-1],e[o])<i)return!0;return!1}function Ur(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(o<0?e:o>1?n:n.sub(e)._mult(o)._add(e))}function Xr(t,e){for(var n,i,o,r=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)(i=n[s]).y>e.y!=(o=n[l]).y>e.y&&e.x<(o.x-i.x)*(e.y-i.y)/(o.y-i.y)+i.x&&(r=!r);return r}function Yr(t,e){for(var n=!1,i=0,o=t.length-1;i<t.length;o=i++){var r=t[i],a=t[o];r.y>e.y!=a.y>e.y&&e.x<(a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x&&(n=!n)}return n}function Jr(t,e,n){var i=n[0],o=n[2];if(t.x<i.x&&e.x<i.x||t.x>o.x&&e.x>o.x||t.y<i.y&&e.y<i.y||t.y>o.y&&e.y>o.y)return!1;var r=I(t,e,n[0]);return r!==I(t,e,n[1])||r!==I(t,e,n[2])||r!==I(t,e,n[3])}function qr(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Qr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ta(t,e,n,i,r){if(!e[0]&&!e[1])return t;var a=o.convert(e)._mult(r);"viewport"===n&&a._rotate(-i);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(a));return s}Vr.prototype.populate=function(t,e,n){var i=this.layers[0],o=[],r=null;"circle"===i.type&&(r=i.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var l=s[a],c=l.feature,h=l.id,u=l.index,d=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,g={type:c.type,id:h,properties:c.properties,geometry:p?Dr(c):[]};if(this.layers[0]._featureFilter.filter(new ro(this.zoom),g,n)){p||(g.geometry=Dr(c));var m=r?r.evaluate(g,{},n):void 0;o.push({id:h,properties:c.properties,type:c.type,sourceLayerIndex:d,index:u,geometry:g.geometry,patterns:{},sortKey:m})}}r&&o.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,v=o;f<v.length;f+=1){var b=v[f],y=b.geometry,_=b.index,C=b.sourceLayerIndex,x=t[_].feature;this.addFeature(b,y,_,n),e.featureIndex.insert(x,y,_,C,this.index)}},Vr.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Vr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Vr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vr.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Vr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vr.prototype.addFeature=function(t,e,n,i){for(var o=0,r=e;o<r.length;o+=1)for(var a=0,s=r[o];a<s.length;a+=1){var l=s[a],c=l.x,h=l.y;if(!(c<0||c>=8192||h<0||h>=8192)){var u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),d=u.vertexLength;Fr(this.layoutVertexArray,c,h,-1,-1),Fr(this.layoutVertexArray,c,h,1,-1),Fr(this.layoutVertexArray,c,h,1,1),Fr(this.layoutVertexArray,c,h,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),u.vertexLength+=4,u.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)},Bi("CircleBucket",Vr,{omit:["layers"]});var ea=new _o({"circle-sort-key":new fo(Ot.layout_circle["circle-sort-key"])}),na={paint:new _o({"circle-radius":new fo(Ot.paint_circle["circle-radius"]),"circle-color":new fo(Ot.paint_circle["circle-color"]),"circle-blur":new fo(Ot.paint_circle["circle-blur"]),"circle-opacity":new fo(Ot.paint_circle["circle-opacity"]),"circle-translate":new mo(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new mo(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mo(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mo(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fo(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fo(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fo(Ot.paint_circle["circle-stroke-opacity"])}),layout:ea},ia="undefined"!=typeof Float32Array?Float32Array:Array;function oa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ra(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],p=e[10],g=e[11],m=e[12],f=e[13],v=e[14],b=e[15],y=n[0],_=n[1],C=n[2],x=n[3];return t[0]=y*i+_*s+C*u+x*m,t[1]=y*o+_*l+C*d+x*f,t[2]=y*r+_*c+C*p+x*v,t[3]=y*a+_*h+C*g+x*b,t[4]=(y=n[4])*i+(_=n[5])*s+(C=n[6])*u+(x=n[7])*m,t[5]=y*o+_*l+C*d+x*f,t[6]=y*r+_*c+C*p+x*v,t[7]=y*a+_*h+C*g+x*b,t[8]=(y=n[8])*i+(_=n[9])*s+(C=n[10])*u+(x=n[11])*m,t[9]=y*o+_*l+C*d+x*f,t[10]=y*r+_*c+C*p+x*v,t[11]=y*a+_*h+C*g+x*b,t[12]=(y=n[12])*i+(_=n[13])*s+(C=n[14])*u+(x=n[15])*m,t[13]=y*o+_*l+C*d+x*f,t[14]=y*r+_*c+C*p+x*v,t[15]=y*a+_*h+C*g+x*b,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var aa,sa=ra;function la(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3];return t[0]=n[0]*i+n[4]*o+n[8]*r+n[12]*a,t[1]=n[1]*i+n[5]*o+n[9]*r+n[13]*a,t[2]=n[2]*i+n[6]*o+n[10]*r+n[14]*a,t[3]=n[3]*i+n[7]*o+n[11]*r+n[15]*a,t}aa=new ia(3),ia!=Float32Array&&(aa[0]=0,aa[1]=0,aa[2]=0),function(){var t=new ia(4);ia!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var ca=(function(){var t=new ia(2);ia!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,na)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Vr(t)},e.prototype.queryRadius=function(t){var e=t;return qr("circle-radius",this,e)+qr("circle-stroke-width",this,e)+Qr(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,r,a,s){for(var l=ta(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),r.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h="map"===this.paint.get("circle-pitch-alignment"),u=h?l:function(t,e){return t.map((function(t){return ha(t,e)}))}(l,s),d=h?c*a:c,p=0,g=i;p<g.length;p+=1)for(var m=0,f=g[p];m<f.length;m+=1){var v=f[m],b=h?v:ha(v,s),y=d,_=la([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?y*=_[3]/r.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(y*=r.cameraToCenterDistance/_[3]),$r(u,b,y))return!0}return!1},e}(Co));function ha(t,e){var n=la([],[t.x,t.y,0,1],e);return new o(n[0]/n[3],n[1]/n[3])}var ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Vr);function da(t,e,n,i){var o=e.width,r=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==o*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(o*r*n);return t.width=o,t.height=r,t.data=i,t}function pa(t,e,n){var i=e.width,o=e.height;if(i!==t.width||o!==t.height){var r=da({},{width:i,height:o},n);ga(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,o)},n),t.width=i,t.height=o,t.data=r.data}}function ga(t,e,n,i,o,r){if(0===o.width||0===o.height)return e;if(o.width>t.width||o.height>t.height||n.x>t.width-o.width||n.y>t.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>e.width||o.height>e.height||i.x>e.width-o.width||i.y>e.height-o.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<o.height;l++)for(var c=((n.y+l)*t.width+n.x)*r,h=((i.y+l)*e.width+i.x)*r,u=0;u<o.width*r;u++)s[h+u]=a[c+u];return e}Bi("HeatmapBucket",ua,{omit:["layers"]});var ma=function(t,e){da(this,t,1,e)};ma.prototype.resize=function(t){pa(this,t,1)},ma.prototype.clone=function(){return new ma({width:this.width,height:this.height},new Uint8Array(this.data))},ma.copy=function(t,e,n,i,o){ga(t,e,n,i,o,1)};var fa=function(t,e){da(this,t,4,e)};fa.prototype.resize=function(t){pa(this,t,4)},fa.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},fa.prototype.clone=function(){return new fa({width:this.width,height:this.height},new Uint8Array(this.data))},fa.copy=function(t,e,n,i,o){ga(t,e,n,i,o,4)},Bi("AlphaImage",ma),Bi("RGBAImage",fa);var va={paint:new _o({"heatmap-radius":new fo(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fo(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mo(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yo(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mo(Ot.paint_heatmap["heatmap-opacity"])})};function ba(t){var e={},n=t.resolution||256,i=t.clips?t.clips.length:1,o=t.image||new fa({width:n,height:i}),r=function(n,i,r){e[t.evaluationKey]=r;var a=t.expression.evaluate(e);o.data[n+i+0]=Math.floor(255*a.r/a.a),o.data[n+i+1]=Math.floor(255*a.g/a.a),o.data[n+i+2]=Math.floor(255*a.b/a.a),o.data[n+i+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<i;++a,s+=4*n)for(var l=0,c=0;l<n;l++,c+=4){var h=l/(n-1),u=t.clips[a];r(s,c,u.start*(1-h)+u.end*h)}else for(var d=0,p=0;d<n;d++,p+=4)r(0,p,d/(n-1));return o}var ya=function(t){function e(e){t.call(this,e,va),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ua(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=ba({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Co),_a={paint:new _o({"hillshade-illumination-direction":new mo(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mo(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mo(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mo(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mo(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mo(Ot.paint_hillshade["hillshade-accent-color"])})},Ca=function(t){function e(e){t.call(this,e,_a)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Co),xa=Ao([{name:"a_pos",components:2,type:"Int16"}],4).members,wa=Aa,Ia=Aa;function Aa(t,e,n){n=n||2;var i,o,r,a,s,l,c,h=e&&e.length,u=h?e[0]*n:t.length,d=Pa(t,0,u,n,!0),p=[];if(!d||d.next===d.prev)return p;if(h&&(d=function(t,e,n,i){var o,r,a,s=[];for(o=0,r=e.length;o<r;o++)(a=Pa(t,e[o]*i,o<r-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(ja(a));for(s.sort(Ra),o=0;o<s.length;o++)La(s[o],n),n=Oa(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=r=t[0],o=a=t[1];for(var g=n;g<u;g+=n)(s=t[g])<i&&(i=s),(l=t[g+1])<o&&(o=l),s>r&&(r=s),l>a&&(a=l);c=0!==(c=Math.max(r-i,a-o))?1/c:0}return Ma(d,p,n,i,o,c),p}function Pa(t,e,n,i,o){var r,a;if(o===Ya(t,e,n,i)>0)for(r=e;r<n;r+=i)a=Ka(r,t[r],t[r+1],a);else for(r=n-i;r>=e;r-=i)a=Ka(r,t[r],t[r+1],a);return a&&Na(a,a.next)&&(Ua(a),a=a.next),a}function Oa(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Na(i,i.next)&&0!==Va(i.prev,i,i.next))i=i.next;else{if(Ua(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ma(t,e,n,i,o,r,a){if(t){!a&&r&&function(t,e,n,i){var o=t;do{null===o.z&&(o.z=Ba(o.x,o.y,e,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,i,o,r,a,s,l,c=1;do{for(n=t,t=null,r=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(o=n,n=n.nextZ,s--):(o=i,i=i.nextZ,l--),r?r.nextZ=o:t=o,o.prevZ=r,r=o;n=i}r.nextZ=null,c*=2}while(a>1)}(o)}(t,i,o,r);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,r?Sa(t,i,o,r):ka(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Ua(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Ma(t=Ea(Oa(t),e,n),e,n,i,o,r,2):2===a&&Ta(t,e,n,i,o,r):Ma(Oa(t),e,n,i,o,r,1);break}}}function ka(t){var e=t.prev,n=t,i=t.next;if(Va(e,n,i)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(Da(e.x,e.y,n.x,n.y,i.x,i.y,o.x,o.y)&&Va(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function Sa(t,e,n,i){var o=t.prev,r=t,a=t.next;if(Va(o,r,a)>=0)return!1;for(var s=o.x>r.x?o.x>a.x?o.x:a.x:r.x>a.x?r.x:a.x,l=o.y>r.y?o.y>a.y?o.y:a.y:r.y>a.y?r.y:a.y,c=Ba(o.x<r.x?o.x<a.x?o.x:a.x:r.x<a.x?r.x:a.x,o.y<r.y?o.y<a.y?o.y:a.y:r.y<a.y?r.y:a.y,e,n,i),h=Ba(s,l,e,n,i),u=t.prevZ,d=t.nextZ;u&&u.z>=c&&d&&d.z<=h;){if(u!==t.prev&&u!==t.next&&Da(o.x,o.y,r.x,r.y,a.x,a.y,u.x,u.y)&&Va(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,d!==t.prev&&d!==t.next&&Da(o.x,o.y,r.x,r.y,a.x,a.y,d.x,d.y)&&Va(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;u&&u.z>=c;){if(u!==t.prev&&u!==t.next&&Da(o.x,o.y,r.x,r.y,a.x,a.y,u.x,u.y)&&Va(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&Da(o.x,o.y,r.x,r.y,a.x,a.y,d.x,d.y)&&Va(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ea(t,e,n){var i=t;do{var o=i.prev,r=i.next.next;!Na(o,r)&&$a(o,i,i.next,r)&&Wa(o,r)&&Wa(r,o)&&(e.push(o.i/n),e.push(i.i/n),e.push(r.i/n),Ua(i),Ua(i.next),i=t=r),i=i.next}while(i!==t);return Oa(i)}function Ta(t,e,n,i,o,r){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Fa(a,s)){var l=Ha(a,s);return a=Oa(a,a.next),l=Oa(l,l.next),Ma(a,e,n,i,o,r),void Ma(l,e,n,i,o,r)}s=s.next}a=a.next}while(a!==t)}function Ra(t,e){return t.x-e.x}function La(t,e){if(e=function(t,e){var n,i=e,o=t.x,r=t.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=o&&s>a){if(a=s,s===o){if(r===i.y)return i;if(r===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(o===a)return n;var l,c=n,h=n.x,u=n.y,d=1/0;i=n;do{o>=i.x&&i.x>=h&&o!==i.x&&Da(r<u?o:a,r,h,u,r<u?a:o,r,i.x,i.y)&&(l=Math.abs(r-i.y)/(o-i.x),Wa(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&za(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(t,e)){var n=Ha(e,t);Oa(e,e.next),Oa(n,n.next)}}function za(t,e){return Va(t.prev,t,e.prev)<0&&Va(e.next,t,t.next)<0}function Ba(t,e,n,i,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ja(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Da(t,e,n,i,o,r,a,s){return(o-a)*(e-s)-(t-a)*(r-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(r-s)-(o-a)*(i-s)>=0}function Fa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&$a(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Wa(t,e)&&Wa(e,t)&&function(t,e){var n=t,i=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Va(t.prev,t,e.prev)||Va(t,e.prev,e))||Na(t,e)&&Va(t.prev,t,t.next)>0&&Va(e.prev,e,e.next)>0)}function Va(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Na(t,e){return t.x===e.x&&t.y===e.y}function $a(t,e,n,i){var o=Ga(Va(t,e,n)),r=Ga(Va(t,e,i)),a=Ga(Va(n,i,t)),s=Ga(Va(n,i,e));return o!==r&&a!==s||!(0!==o||!Za(t,n,e))||!(0!==r||!Za(t,i,e))||!(0!==a||!Za(n,t,i))||!(0!==s||!Za(n,e,i))}function Za(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ga(t){return t>0?1:t<0?-1:0}function Wa(t,e){return Va(t.prev,t,t.next)<0?Va(t,e,t.next)>=0&&Va(t,t.prev,e)>=0:Va(t,e,t.prev)<0||Va(t,t.next,e)<0}function Ha(t,e){var n=new Xa(t.i,t.x,t.y),i=new Xa(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function Ka(t,e,n,i){var o=new Xa(t,e,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function Ua(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ya(t,e,n,i){for(var o=0,r=e,a=n-i;r<n;r+=i)o+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return o}function Ja(t,e,n,i,o){!function t(e,n,i,o,r){for(;o>i;){if(o-i>600){var a=o-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*c/a+h)),Math.min(o,Math.floor(n+(a-s)*c/a+h)),r)}var u=e[n],d=i,p=o;for(qa(e,i,n),r(e[o],u)>0&&qa(e,i,o);d<p;){for(qa(e,d,p),d++,p--;r(e[d],u)<0;)d++;for(;r(e[p],u)>0;)p--}0===r(e[i],u)?qa(e,i,p):qa(e,++p,o),p<=n&&(i=p+1),n<=p&&(o=p-1)}}(t,e,n||0,i||t.length-1,o||Qa)}function qa(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Qa(t,e){return t<e?-1:t>e?1:0}function ts(t,e){var n=t.length;if(n<=1)return[t];for(var i,o,r=[],a=0;a<n;a++){var s=A(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===o&&(o=s<0),o===s<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}if(i&&r.push(i),e>1)for(var l=0;l<r.length;l++)r[l].length<=e||(Ja(r[l],e,1,r[l].length-1,es),r[l]=r[l].slice(0,e));return r}function es(t,e){return e.area-t.area}function ns(t,e,n){for(var i=n.patternDependencies,o=!1,r=0,a=e;r<a.length;r+=1){var s=a[r].paint.get(t+"-pattern");s.isConstant()||(o=!0);var l=s.constantOr(null);l&&(o=!0,i[l.to]=!0,i[l.from]=!0)}return o}function is(t,e,n,i,o){for(var r=o.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],c=l.paint.get(t+"-pattern").value;if("constant"!==c.kind){var h=c.evaluate({zoom:i-1},n,{},o.availableImages),u=c.evaluate({zoom:i},n,{},o.availableImages),d=c.evaluate({zoom:i+1},n,{},o.availableImages);u=u&&u.name?u.name:u,d=d&&d.name?d.name:d,r[h=h&&h.name?h.name:h]=!0,r[u]=!0,r[d]=!0,n.patterns[l.id]={min:h,mid:u,max:d}}}return n}Aa.deviation=function(t,e,n,i){var o=e&&e.length,r=Math.abs(Ya(t,0,o?e[0]*n:t.length,n));if(o)for(var a=0,s=e.length;a<s;a++)r-=Math.abs(Ya(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<i.length;a+=3){var c=i[a]*n,h=i[a+1]*n,u=i[a+2]*n;l+=Math.abs((t[c]-t[u])*(t[h+1]-t[c+1])-(t[c]-t[h])*(t[u+1]-t[c+1]))}return 0===r&&0===l?0:Math.abs((l-r)/r)},Aa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,o=0;o<t.length;o++){for(var r=0;r<t[o].length;r++)for(var a=0;a<e;a++)n.vertices.push(t[o][r][a]);o>0&&n.holes.push(i+=t[o-1].length)}return n},wa.default=Ia;var os=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Oo,this.indexArray=new Vo,this.indexArray2=new Ho,this.programConfigurations=new Rr(t.layers,t.zoom),this.segments=new ar,this.segments2=new ar,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};os.prototype.populate=function(t,e,n){this.hasPattern=ns("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),o=[],r=0,a=t;r<a.length;r+=1){var s=a[r],l=s.feature,c=s.id,h=s.index,u=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p={type:l.type,id:c,properties:l.properties,geometry:d?Dr(l):[]};if(this.layers[0]._featureFilter.filter(new ro(this.zoom),p,n)){d||(p.geometry=Dr(l));var g=i?i.evaluate(p,{},n,e.availableImages):void 0;o.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:u,index:h,geometry:p.geometry,patterns:{},sortKey:g})}}i&&o.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,f=o;m<f.length;m+=1){var v=f[m],b=v.geometry,y=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var C=is("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(C)}else this.addFeature(v,b,y,n,{});e.featureIndex.insert(t[y].feature,b,y,_,this.index)}},os.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},os.prototype.addFeatures=function(t,e,n){for(var i=0,o=this.patternFeatures;i<o.length;i+=1){var r=o[i];this.addFeature(r,r.geometry,r.index,e,n)}},os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},os.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xa),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},os.prototype.addFeature=function(t,e,n,i,o){for(var r=0,a=ts(e,500);r<a.length;r+=1){for(var s=a[r],l=0,c=0,h=s;c<h.length;c+=1)l+=h[c].length;for(var u=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),d=u.vertexLength,p=[],g=[],m=0,f=s;m<f.length;m+=1){var v=f[m];if(0!==v.length){v!==s[0]&&g.push(p.length/2);var b=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),y=b.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(y+v.length-1,y),p.push(v[0].x),p.push(v[0].y);for(var _=1;_<v.length;_++)this.layoutVertexArray.emplaceBack(v[_].x,v[_].y),this.indexArray2.emplaceBack(y+_-1,y+_),p.push(v[_].x),p.push(v[_].y);b.vertexLength+=v.length,b.primitiveLength+=v.length}}for(var C=wa(p,g),x=0;x<C.length;x+=3)this.indexArray.emplaceBack(d+C[x],d+C[x+1],d+C[x+2]);u.vertexLength+=l,u.primitiveLength+=C.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)},Bi("FillBucket",os,{omit:["layers","patternFeatures"]});var rs=new _o({"fill-sort-key":new fo(Ot.layout_fill["fill-sort-key"])}),as={paint:new _o({"fill-antialias":new mo(Ot.paint_fill["fill-antialias"]),"fill-opacity":new fo(Ot.paint_fill["fill-opacity"]),"fill-color":new fo(Ot.paint_fill["fill-color"]),"fill-outline-color":new fo(Ot.paint_fill["fill-outline-color"]),"fill-translate":new mo(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new mo(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new vo(Ot.paint_fill["fill-pattern"])}),layout:rs},ss=function(t){function e(e){t.call(this,e,as)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new os(t)},e.prototype.queryRadius=function(){return Qr(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,r,a){return Zr(ta(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),r.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(Co),ls=Ao([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cs=hs;function hs(t,e,n,i,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(us,this,e)}function us(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[i]=o}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function ds(t){for(var e,n,i=0,o=0,r=t.length,a=r-1;o<r;a=o++)i+=((n=t[a]).x-(e=t[o]).x)*(e.y+n.y);return i}hs.types=["Unknown","Point","LineString","Polygon"],hs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,a=0,s=0,l=[];t.pos<n;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new o(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},hs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,o=0,r=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(i<=0){var h=t.readVarint();n=7&h,i=h>>3}if(i--,1===n||2===n)(o+=t.readSVarint())<a&&(a=o),o>s&&(s=o),(r+=t.readSVarint())<l&&(l=r),r>c&&(c=r);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},hs.prototype.toGeoJSON=function(t,e,n){var i,o,r=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=hs.types[this.type];function h(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/r-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/r)*Math.PI/180))-90]}}switch(this.type){case 1:var u=[];for(i=0;i<l.length;i++)u[i]=l[i][0];h(l=u);break;case 2:for(i=0;i<l.length;i++)h(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,o=[],r=0;r<e;r++){var a=ds(t[r]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&o.push(n),n=[t[r]]):n.push(t[r]))}return n&&o.push(n),o}(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)h(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var ps=gs;function gs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ms,this,e),this.length=this._features.length}function ms(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function fs(t,e,n){if(3===t){var i=new ps(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}gs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new cs(this._pbf,e,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(fs,{},e)},VectorTileFeature:cs,VectorTileLayer:ps},bs=vs.VectorTileFeature.types,ys=Math.pow(2,13);function _s(t,e,n,i,o,r,a,s){t.emplaceBack(e,n,2*Math.floor(i*ys)+a,o*ys*2,r*ys*2,Math.round(s))}var Cs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ko,this.indexArray=new Vo,this.programConfigurations=new Rr(t.layers,t.zoom),this.segments=new ar,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function xs(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Cs.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=ns("fill-extrusion",this.layers,e);for(var i=0,o=t;i<o.length;i+=1){var r=o[i],a=r.feature,s=r.id,l=r.index,c=r.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,u={type:a.type,id:s,properties:a.properties,geometry:h?Dr(a):[]};if(this.layers[0]._featureFilter.filter(new ro(this.zoom),u,n)){var d={id:s,sourceLayerIndex:c,index:l,geometry:h?u.geometry:Dr(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(is("fill-extrusion",this.layers,d,this.zoom,e)):this.addFeature(d,d.geometry,l,n,{}),e.featureIndex.insert(a,d.geometry,l,c,this.index,!0)}}},Cs.prototype.addFeatures=function(t,e,n){for(var i=0,o=this.features;i<o.length;i+=1){var r=o[i];this.addFeature(r,r.geometry,r.index,e,n)}},Cs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Cs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ls),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cs.prototype.addFeature=function(t,e,n,i,o){for(var r=0,a=ts(e,500);r<a.length;r+=1){for(var s=a[r],l=0,c=0,h=s;c<h.length;c+=1)l+=h[c].length;for(var u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=0,p=s;d<p.length;d+=1){var g=p[d];if(0!==g.length&&!((T=g).every((function(t){return t.x<0}))||T.every((function(t){return t.x>8192}))||T.every((function(t){return t.y<0}))||T.every((function(t){return t.y>8192}))))for(var m=0,f=0;f<g.length;f++){var v=g[f];if(f>=1){var b=g[f-1];if(!xs(v,b)){u.vertexLength+4>ar.MAX_VERTEX_ARRAY_LENGTH&&(u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var y=v.sub(b)._perp()._unit(),_=b.dist(v);m+_>32768&&(m=0),_s(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,0,m),_s(this.layoutVertexArray,v.x,v.y,y.x,y.y,0,1,m),_s(this.layoutVertexArray,b.x,b.y,y.x,y.y,0,0,m+=_),_s(this.layoutVertexArray,b.x,b.y,y.x,y.y,0,1,m);var C=u.vertexLength;this.indexArray.emplaceBack(C,C+2,C+1),this.indexArray.emplaceBack(C+1,C+2,C+3),u.vertexLength+=4,u.primitiveLength+=2}}}}if(u.vertexLength+l>ar.MAX_VERTEX_ARRAY_LENGTH&&(u=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===bs[t.type]){for(var x=[],w=[],I=u.vertexLength,A=0,P=s;A<P.length;A+=1){var O=P[A];if(0!==O.length){O!==s[0]&&w.push(x.length/2);for(var M=0;M<O.length;M++){var k=O[M];_s(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),x.push(k.x),x.push(k.y)}}}for(var S=wa(x,w),E=0;E<S.length;E+=3)this.indexArray.emplaceBack(I+S[E],I+S[E+2],I+S[E+1]);u.primitiveLength+=S.length/3,u.vertexLength+=l}}var T;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)},Bi("FillExtrusionBucket",Cs,{omit:["layers","features"]});var ws={paint:new _o({"fill-extrusion-opacity":new mo(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fo(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mo(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mo(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vo(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fo(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fo(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mo(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Is=function(t){function e(e){t.call(this,e,ws)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Cs(t)},e.prototype.queryRadius=function(){return Qr(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,s,l){var c=ta(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),h=this.paint.get("fill-extrusion-height").evaluate(e,n),u=this.paint.get("fill-extrusion-base").evaluate(e,n),d=function(t,e,n,i){for(var r=[],a=0,s=t;a<s.length;a+=1){var l=s[a],c=[l.x,l.y,0,1];la(c,c,e),r.push(new o(c[0]/c[3],c[1]/c[3]))}return r}(c,l),p=function(t,e,n,i){for(var r=[],a=[],s=i[8]*e,l=i[9]*e,c=i[10]*e,h=i[11]*e,u=i[8]*n,d=i[9]*n,p=i[10]*n,g=i[11]*n,m=0,f=t;m<f.length;m+=1){for(var v=[],b=[],y=0,_=f[m];y<_.length;y+=1){var C=_[y],x=C.x,w=C.y,I=i[0]*x+i[4]*w+i[12],A=i[1]*x+i[5]*w+i[13],P=i[2]*x+i[6]*w+i[14],O=i[3]*x+i[7]*w+i[15],M=P+c,k=O+h,S=I+u,E=A+d,T=P+p,R=O+g,L=new o((I+s)/k,(A+l)/k);L.z=M/k,v.push(L);var z=new o(S/R,E/R);z.z=T/R,b.push(z)}r.push(v),a.push(b)}return[r,a]}(i,u,h,l);return function(t,e,n){var i=1/0;Zr(n,e)&&(i=Ps(n,e[0]));for(var o=0;o<e.length;o++)for(var r=e[o],a=t[o],s=0;s<r.length-1;s++){var l=r[s],c=[l,r[s+1],a[s+1],a[s],l];Nr(n,c)&&(i=Math.min(i,Ps(n,c)))}return i!==1/0&&i}(p[0],p[1],d)},e}(Co);function As(t,e){return t.x*e.x+t.y*e.y}function Ps(t,e){if(1===t.length){for(var n,i=0,o=e[i++];!n||o.equals(n);)if(!(n=e[i++]))return 1/0;for(;i<e.length;i++){var r=e[i],a=t[0],s=n.sub(o),l=r.sub(o),c=a.sub(o),h=As(s,s),u=As(s,l),d=As(l,l),p=As(c,s),g=As(c,l),m=h*d-u*u,f=(d*p-u*g)/m,v=(h*g-u*p)/m,b=o.z*(1-f-v)+n.z*f+r.z*v;if(isFinite(b))return b}return 1/0}for(var y=1/0,_=0,C=e;_<C.length;_+=1)y=Math.min(y,C[_].z);return y}var Os=Ao([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ms=Ao([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ks=vs.VectorTileFeature.types,Ss=Math.cos(Math.PI/180*37.5),Es=Math.pow(2,14)/.5,Ts=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new So,this.layoutVertexArray2=new Eo,this.indexArray=new Vo,this.programConfigurations=new Rr(t.layers,t.zoom),this.segments=new ar,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ts.prototype.populate=function(t,e,n){this.hasPattern=ns("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),o=[],r=0,a=t;r<a.length;r+=1){var s=a[r],l=s.feature,c=s.id,h=s.index,u=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p={type:l.type,id:c,properties:l.properties,geometry:d?Dr(l):[]};if(this.layers[0]._featureFilter.filter(new ro(this.zoom),p,n)){d||(p.geometry=Dr(l));var g=i?i.evaluate(p,{},n):void 0;o.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:u,index:h,geometry:p.geometry,patterns:{},sortKey:g})}}i&&o.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,f=o;m<f.length;m+=1){var v=f[m],b=v.geometry,y=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var C=is("line",this.layers,v,this.zoom,e);this.patternFeatures.push(C)}else this.addFeature(v,b,y,n,{});e.featureIndex.insert(t[y].feature,b,y,_,this.index)}},Ts.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ts.prototype.addFeatures=function(t,e,n){for(var i=0,o=this.patternFeatures;i<o.length;i+=1){var r=o[i];this.addFeature(r,r.geometry,r.index,e,n)}},Ts.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ts.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ms)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Os),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ts.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ts.prototype.addFeature=function(t,e,n,i,o){var r=this.layers[0].layout,a=r.get("line-join").evaluate(t,{}),s=r.get("line-cap"),l=r.get("line-miter-limit"),c=r.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var h=0,u=e;h<u.length;h+=1)this.addLine(u[h],t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)},Ts.prototype.addLine=function(t,e,n,i,o,r){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===ks[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(s?3:2))){"bevel"===n&&(o=1.05);var h,u=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),p=void 0,g=void 0,m=void 0,f=void 0;this.e1=this.e2=-1,s&&(f=t[c].sub(h=t[l-2])._unit()._perp());for(var v=c;v<l;v++)if(!(g=v===l-1?s?t[c+1]:void 0:t[v+1])||!t[v].equals(g)){f&&(m=f),h&&(p=h),h=t[v],f=g?g.sub(h)._unit()._perp():m;var b=(m=m||f).add(f);0===b.x&&0===b.y||b._unit();var y=m.x*f.x+m.y*f.y,_=b.x*f.x+b.y*f.y,C=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),w=_<Ss&&p&&g,I=m.x*f.y-m.y*f.x>0;if(w&&v>c){var A=h.dist(p);if(A>2*u){var P=h.sub(h.sub(p)._mult(u/A)._round());this.updateDistance(p,P),this.addCurrentVertex(P,m,0,0,d),p=P}}var O=p&&g,M=O?n:s?"butt":i;if(O&&"round"===M&&(C<r?M="miter":C<=2&&(M="fakeround")),"miter"===M&&C>o&&(M="bevel"),"bevel"===M&&(C>2&&(M="flipbevel"),C<o&&(M="miter")),p&&this.updateDistance(p,h),"miter"===M)b._mult(C),this.addCurrentVertex(h,b,0,0,d);else if("flipbevel"===M){if(C>100)b=f.mult(-1);else{var k=C*m.add(f).mag()/m.sub(f).mag();b._perp()._mult(k*(I?-1:1))}this.addCurrentVertex(h,b,0,0,d),this.addCurrentVertex(h,b.mult(-1),0,0,d)}else if("bevel"===M||"fakeround"===M){var S=-Math.sqrt(C*C-1),E=I?S:0,T=I?0:S;if(p&&this.addCurrentVertex(h,m,E,T,d),"fakeround"===M)for(var R=Math.round(180*x/Math.PI/20),L=1;L<R;L++){var z=L/R;if(.5!==z){var B=z-.5;z+=z*B*(z-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*B*B+(.848013+y*(.215638*y-1.06021)))}var j=f.sub(m)._mult(z)._add(m)._unit()._mult(I?-1:1);this.addHalfVertex(h,j.x,j.y,!1,I,0,d)}g&&this.addCurrentVertex(h,f,-E,-T,d)}else if("butt"===M)this.addCurrentVertex(h,b,0,0,d);else if("square"===M){var D=p?1:-1;this.addCurrentVertex(h,b,D,D,d)}else"round"===M&&(p&&(this.addCurrentVertex(h,m,0,0,d),this.addCurrentVertex(h,m,1,1,d,!0)),g&&(this.addCurrentVertex(h,f,-1,-1,d,!0),this.addCurrentVertex(h,f,0,0,d)));if(w&&v<l-1){var F=h.dist(g);if(F>2*u){var V=h.add(g.sub(h)._mult(u/F)._round());this.updateDistance(h,V),this.addCurrentVertex(V,f,0,0,d),h=V}}}}},Ts.prototype.addCurrentVertex=function(t,e,n,i,o,r){void 0===r&&(r=!1);var a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,r,!1,n,o),this.addHalfVertex(t,a,s,r,!0,-i,o),this.distance>Es/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,i,o,r))},Ts.prototype.addHalfVertex=function(t,e,n,i,o,r,a){var s=.5*(this.lineClips?this.scaledDistance*(Es-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(i?1:0),(t.y<<1)+(o?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===r?0:r<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),o?this.e2=l:this.e1=l},Ts.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ts.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Bi("LineBucket",Ts,{omit:["layers","patternFeatures"]});var Rs=new _o({"line-cap":new mo(Ot.layout_line["line-cap"]),"line-join":new fo(Ot.layout_line["line-join"]),"line-miter-limit":new mo(Ot.layout_line["line-miter-limit"]),"line-round-limit":new mo(Ot.layout_line["line-round-limit"]),"line-sort-key":new fo(Ot.layout_line["line-sort-key"])}),Ls={paint:new _o({"line-opacity":new fo(Ot.paint_line["line-opacity"]),"line-color":new fo(Ot.paint_line["line-color"]),"line-translate":new mo(Ot.paint_line["line-translate"]),"line-translate-anchor":new mo(Ot.paint_line["line-translate-anchor"]),"line-width":new fo(Ot.paint_line["line-width"]),"line-gap-width":new fo(Ot.paint_line["line-gap-width"]),"line-offset":new fo(Ot.paint_line["line-offset"]),"line-blur":new fo(Ot.paint_line["line-blur"]),"line-dasharray":new bo(Ot.paint_line["line-dasharray"]),"line-pattern":new vo(Ot.paint_line["line-pattern"]),"line-gradient":new yo(Ot.paint_line["line-gradient"])}),layout:Rs},zs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new ro(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,o){return n=d({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,o)},e}(fo))(Ls.paint.properties["line-width"].specification);zs.useIntegerZoom=!0;var Bs=function(t){function e(e){t.call(this,e,Ls),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ne,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=zs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ts(t)},e.prototype.queryRadius=function(t){var e=t,n=js(qr("line-width",this,e),qr("line-gap-width",this,e)),i=qr("line-offset",this,e);return n/2+Math.abs(i)+Qr(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,s){var l=ta(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*js(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),h=this.paint.get("line-offset").evaluate(e,n);return h&&(i=function(t,e){for(var n=[],i=new o(0,0),r=0;r<t.length;r++){for(var a=t[r],s=[],l=0;l<a.length;l++){var c=a[l],h=a[l+1],u=0===l?i:c.sub(a[l-1])._unit()._perp(),d=l===a.length-1?i:h.sub(c)._unit()._perp(),p=u._add(d)._unit();p._mult(1/(p.x*d.x+p.y*d.y)),s.push(p._mult(e)._add(c))}n.push(s)}return n}(i,h*s)),function(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];if(t.length>=3)for(var r=0;r<o.length;r++)if(Yr(t,o[r]))return!0;if(Gr(t,o,n))return!0}return!1}(l,i,c)},e.prototype.isTileClipped=function(){return!0},e}(Co);function js(t,e){return e>0?e+2*t:t}var Ds=Ao([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fs=Ao([{name:"a_projected_pos",components:3,type:"Float32"}],4),Vs=(Ao([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ao([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ns=(Ao([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ao([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),$s=Ao([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zs(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),oo.applyArabicShaping&&(t=oo.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ao([{name:"triangle",components:3,type:"Uint16"}]),Ao([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ao([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ao([{type:"Float32",name:"offsetX"}]),Ao([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Gs={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ws=function(t,e,n,i,o){var r,a,s=8*o-i-1,l=(1<<s)-1,c=l>>1,h=-7,u=n?o-1:0,d=n?-1:1,p=t[e+u];for(u+=d,r=p&(1<<-h)-1,p>>=-h,h+=s;h>0;r=256*r+t[e+u],u+=d,h-=8);for(a=r&(1<<-h)-1,r>>=-h,h+=i;h>0;a=256*a+t[e+u],u+=d,h-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),r-=c}return(p?-1:1)*a*Math.pow(2,r-i)},Hs=function(t,e,n,i,o,r){var a,s,l,c=8*r-o-1,h=(1<<c)-1,u=h>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,g=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=h?(s=0,a=h):a+u>=1?(s=(e*l-1)*Math.pow(2,o),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=g,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+p]=255&a,p+=g,a/=256,c-=8);t[n+p-g]|=128*m},Ks=Us;function Us(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Us.Varint=0,Us.Fixed64=1,Us.Bytes=2,Us.Fixed32=5;var Xs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ys(t){return t.type===Us.Bytes?t.readVarint()+t.pos:t.pos+1}function Js(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function qs(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var o=n.pos-1;o>=t;o--)n.buf[o+i]=n.buf[o]}function Qs(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function tl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function el(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function nl(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function il(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function ol(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function rl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function al(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function sl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function ll(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function cl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function hl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function ul(t,e,n){1===t&&n.readMessage(dl,e)}function dl(t,e,n){if(3===t){var i=n.readMessage(pl,{}),o=i.width,r=i.height,a=i.left,s=i.top,l=i.advance;e.push({id:i.id,bitmap:new ma({width:o+6,height:r+6},i.bitmap),metrics:{width:o,height:r,left:a,top:s,advance:l}})}}function pl(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function gl(t){for(var e=0,n=0,i=0,o=t;i<o.length;i+=1){var r=o[i];e+=r.w*r.h,n=Math.max(n,r.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,l=0,c=0,h=t;c<h.length;c+=1)for(var u=h[c],d=a.length-1;d>=0;d--){var p=a[d];if(!(u.w>p.w||u.h>p.h)){if(u.x=p.x,u.y=p.y,l=Math.max(l,u.y+u.h),s=Math.max(s,u.x+u.w),u.w===p.w&&u.h===p.h){var g=a.pop();d<a.length&&(a[d]=g)}else u.h===p.h?(p.x+=u.w,p.w-=u.w):u.w===p.w?(p.y+=u.h,p.h-=u.h):(a.push({x:p.x+u.w,y:p.y,w:p.w-u.w,h:u.h}),p.y+=u.h,p.h-=u.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}Us.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),o=i>>3,r=this.pos;this.type=7&i,t(o,e,this),this.pos===r&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ll(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=hl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ll(this.buf,this.pos)+4294967296*ll(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=ll(this.buf,this.pos)+4294967296*hl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ws(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ws(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,o,r=n.buf;if(i=(112&(o=r[n.pos++]))>>4,o<128)return Js(t,i,e);if(i|=(127&(o=r[n.pos++]))<<3,o<128)return Js(t,i,e);if(i|=(127&(o=r[n.pos++]))<<10,o<128)return Js(t,i,e);if(i|=(127&(o=r[n.pos++]))<<17,o<128)return Js(t,i,e);if(i|=(127&(o=r[n.pos++]))<<24,o<128)return Js(t,i,e);if(i|=(1&(o=r[n.pos++]))<<31,o<128)return Js(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Xs?function(t,e,n){return Xs.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",o=e;o<n;){var r,a,s,l=t[o],c=null,h=l>239?4:l>223?3:l>191?2:1;if(o+h>n)break;1===h?l<128&&(c=l):2===h?128==(192&(r=t[o+1]))&&(c=(31&l)<<6|63&r)<=127&&(c=null):3===h?(a=t[o+2],128==(192&(r=t[o+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&r)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===h&&(a=t[o+2],s=t[o+3],128==(192&(r=t[o+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,h=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),o+=h}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Us.Bytes)return t.push(this.readVarint(e));var n=Ys(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Us.Bytes)return t.push(this.readSVarint());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Us.Bytes)return t.push(this.readBoolean());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Us.Bytes)return t.push(this.readFloat());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Us.Bytes)return t.push(this.readDouble());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Us.Bytes)return t.push(this.readFixed32());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Us.Bytes)return t.push(this.readSFixed32());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Us.Bytes)return t.push(this.readFixed64());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Us.Bytes)return t.push(this.readSFixed64());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Us.Varint)for(;this.buf[this.pos++]>127;);else if(e===Us.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Us.Fixed32)this.pos+=4;else{if(e!==Us.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),cl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),cl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),cl(this.buf,-1&t,this.pos),cl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),cl(this.buf,-1&t,this.pos),cl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,o,r=0;r<e.length;r++){if((i=e.charCodeAt(r))>55295&&i<57344){if(!o){i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):o=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,o=i;continue}i=o-55296<<10|i-56320|65536,o=null}else o&&(t[n++]=239,t[n++]=191,t[n++]=189,o=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&qs(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Hs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Hs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&qs(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Us.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,tl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,el,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,nl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ol,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,al,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,sl,e)},writeBytesField:function(t,e){this.writeTag(t,Us.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Us.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Us.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Us.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Us.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Us.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Us.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Us.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Us.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Us.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ml=function(t,e){var n=e.pixelRatio,i=e.version,o=e.stretchX,r=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=o,this.stretchY=r,this.content=a,this.version=i},fl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},fl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},fl.tlbr.get=function(){return this.tl.concat(this.br)},fl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ml.prototype,fl);var vl=function(t,e){var n={},i={};this.haveRenderCallbacks=[];var o=[];this.addImages(t,n,o),this.addImages(e,i,o);var r=gl(o),a=new fa({width:r.w||1,height:r.h||1});for(var s in t){var l=t[s],c=n[s].paddedRect;fa.copy(l.data,a,{x:0,y:0},{x:c.x+1,y:c.y+1},l.data)}for(var h in e){var u=e[h],d=i[h].paddedRect,p=d.x+1,g=d.y+1,m=u.data.width,f=u.data.height;fa.copy(u.data,a,{x:0,y:0},{x:p,y:g},u.data),fa.copy(u.data,a,{x:0,y:f-1},{x:p,y:g-1},{width:m,height:1}),fa.copy(u.data,a,{x:0,y:0},{x:p,y:g+f},{width:m,height:1}),fa.copy(u.data,a,{x:m-1,y:0},{x:p-1,y:g},{width:1,height:f}),fa.copy(u.data,a,{x:0,y:0},{x:p+m,y:g},{width:1,height:f})}this.image=a,this.iconPositions=n,this.patternPositions=i};vl.prototype.addImages=function(t,e,n){for(var i in t){var o=t[i],r={x:0,y:0,w:o.data.width+2,h:o.data.height+2};n.push(r),e[i]=new ml(r,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},vl.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},vl.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl;n.update(e.data,void 0,{x:i[0],y:i[1]})}},Bi("ImagePosition",ml),Bi("ImageAtlas",vl);var bl={horizontal:1,vertical:2,horizontalOnly:3},yl=function(){this.scale=1,this.fontStack="",this.imageName=null};yl.forText=function(t,e){var n=new yl;return n.scale=t||1,n.fontStack=e,n},yl.forImage=function(t){var e=new yl;return e.imageName=t,e};var _l=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Cl(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m){var f,v=_l.fromFeature(t,o);u===bl.vertical&&v.verticalizePunctuation();var b=oo.processBidirectionalText,y=oo.processStyledBidirectionalText;if(b&&1===v.sections.length){f=[];for(var _=0,C=b(v.toString(),Ml(v,c,r,e,i,p,g));_<C.length;_+=1){var x=C[_],w=new _l;w.text=x,w.sections=v.sections;for(var I=0;I<x.length;I++)w.sectionIndex.push(0);f.push(w)}}else if(y){f=[];for(var A=0,P=y(v.text,v.sectionIndex,Ml(v,c,r,e,i,p,g));A<P.length;A+=1){var O=P[A],M=new _l;M.text=O[0],M.sectionIndex=O[1],M.sections=v.sections,f.push(M)}}else f=function(t,e){for(var n=[],i=t.text,o=0,r=0,a=e;r<a.length;r+=1){var s=a[r];n.push(t.substring(o,s)),o=s}return o<i.length&&n.push(t.substring(o,i.length)),n}(v,Ml(v,c,r,e,i,p,g));var k=[],S={positionedLines:k,text:v.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:u,iconsInText:!1,verticalizable:!1};return function(t,e,n,i,o,r,a,s,l,c,h,u){for(var d=0,p=-17,g=0,m=0,f="right"===s?1:"left"===s?0:.5,v=0,b=0,y=o;b<y.length;b+=1){var _=y[b];_.trim();var C=_.getMaxScale(),x=24*(C-1),w={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=w;var I=w.positionedGlyphs,A=0;if(_.length()){for(var P=0;P<_.length();P++){var O=_.getSection(P),M=_.getSectionIndex(P),k=_.getCharCode(P),S=0,E=null,T=null,R=null,L=24,z=!(l===bl.horizontal||!h&&!Wi(k)||h&&(xl[k]||(G=k,Zi.Arabic(G)||Zi["Arabic Supplement"](G)||Zi["Arabic Extended-A"](G)||Zi["Arabic Presentation Forms-A"](G)||Zi["Arabic Presentation Forms-B"](G))));if(O.imageName){var B=i[O.imageName];if(!B)continue;R=O.imageName,t.iconsInText=t.iconsInText||!0,T=B.paddedRect;var j=B.displaySize;O.scale=24*O.scale/u,S=x+(24-j[1]*O.scale),L=(E={width:j[0],height:j[1],left:1,top:-3,advance:z?j[1]:j[0]}).advance;var D=z?j[0]*O.scale-24*C:j[1]*O.scale-24*C;D>0&&D>A&&(A=D)}else{var F=n[O.fontStack],V=F&&F[k];if(V&&V.rect)T=V.rect,E=V.metrics;else{var N=e[O.fontStack],$=N&&N[k];if(!$)continue;E=$.metrics}S=24*(C-O.scale)}z?(t.verticalizable=!0,I.push({glyph:k,imageName:R,x:d,y:p+S,vertical:z,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:E,rect:T}),d+=L*O.scale+c):(I.push({glyph:k,imageName:R,x:d,y:p+S,vertical:z,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:E,rect:T}),d+=E.advance*O.scale+c)}0!==I.length&&(g=Math.max(d-c,g),Sl(I,0,I.length-1,f,A)),d=0;var Z=r*C+A;w.lineOffset=Math.max(A,x),p+=Z,m=Math.max(Z,m),++v}else p+=r,++v}var G,W=p- -17,H=kl(a),K=H.horizontalAlign,U=H.verticalAlign;(function(t,e,n,i,o,r,a,s,l){var c,h=(e-n)*o;c=r!==a?-s*i- -17:(-i*l+.5)*a;for(var u=0,d=t;u<d.length;u+=1)for(var p=0,g=d[u].positionedGlyphs;p<g.length;p+=1){var m=g[p];m.x+=h,m.y+=c}})(t.positionedLines,f,K,U,g,m,r,W,o.length),t.top+=-U*W,t.bottom=t.top+W,t.left+=-K*g,t.right=t.left+g}(S,e,n,i,f,a,s,l,u,c,d,m),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(k)&&S}_l.fromFeature=function(t,e){for(var n=new _l,i=0;i<t.sections.length;i++){var o=t.sections[i];o.image?n.addImageSection(o):n.addTextSection(o,e)}return n},_l.prototype.length=function(){return this.text.length},_l.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},_l.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},_l.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},_l.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,o=t.charCodeAt(n-1)||null;e+=i&&Hi(i)&&!Gs[t[n+1]]||o&&Hi(o)&&!Gs[t[n-1]]||!Gs[t[n]]?t[n]:Gs[t[n]]}return e}(this.text)},_l.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&xl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&xl[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},_l.prototype.substring=function(t,e){var n=new _l;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},_l.prototype.toString=function(){return this.text},_l.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},_l.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(yl.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(n)},_l.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(yl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}else w("Can't add FormattedSection with an empty image.")},_l.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wl={};function Il(t,e,n,i,o,r){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*24/r+o:0}var s=n[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+o:0}function Al(t,e,n,i){var o=Math.pow(t-e,2);return i?t<e?o/2:2*o:o+Math.abs(n)*n}function Pl(t,e,n){var i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function Ol(t,e,n,i,o,r){for(var a=null,s=Al(e,n,o,r),l=0,c=i;l<c.length;l+=1){var h=c[l],u=Al(e-h.x,n,o,r)+h.badness;u<=s&&(a=h,s=u)}return{index:t,x:e,priorBreak:a,badness:s}}function Ml(t,e,n,i,o,r,a){if("point"!==r)return[];if(!t)return[];for(var s,l=[],c=function(t,e,n,i,o,r){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=Il(t.getCharCode(s),l,i,o,e,r)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,o,a),h=t.text.indexOf("\u200b")>=0,u=0,d=0;d<t.length();d++){var p=t.getSection(d),g=t.getCharCode(d);if(xl[g]||(u+=Il(g,p,i,o,e,a)),d<t.length()-1){var m=!((s=g)<11904||!(Zi["Bopomofo Extended"](s)||Zi.Bopomofo(s)||Zi["CJK Compatibility Forms"](s)||Zi["CJK Compatibility Ideographs"](s)||Zi["CJK Compatibility"](s)||Zi["CJK Radicals Supplement"](s)||Zi["CJK Strokes"](s)||Zi["CJK Symbols and Punctuation"](s)||Zi["CJK Unified Ideographs Extension A"](s)||Zi["CJK Unified Ideographs"](s)||Zi["Enclosed CJK Letters and Months"](s)||Zi["Halfwidth and Fullwidth Forms"](s)||Zi.Hiragana(s)||Zi["Ideographic Description Characters"](s)||Zi["Kangxi Radicals"](s)||Zi["Katakana Phonetic Extensions"](s)||Zi.Katakana(s)||Zi["Vertical Forms"](s)||Zi["Yi Radicals"](s)||Zi["Yi Syllables"](s)));(wl[g]||m||p.imageName)&&l.push(Ol(d+1,u,c,l,Pl(g,t.getCharCode(d+1),m&&h),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Ol(t.length(),u,c,l,0,!0))}function kl(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Sl(t,e,n,i,o){if(i||o)for(var r=t[n],a=(t[n].x+r.metrics.advance*r.scale)*i,s=e;s<=n;s++)t[s].x-=a,t[s].y+=o}function El(t,e,n,i,o,r){var a,s=t.image;if(s.content){var l=s.content,c=s.pixelRatio||1;a=[l[0]/c,l[1]/c,s.displaySize[0]-l[2]/c,s.displaySize[1]-l[3]/c]}var h,u,d,p,g=e.left*r,m=e.right*r;"width"===n||"both"===n?(p=o[0]+g-i[3],u=o[0]+m+i[1]):u=(p=o[0]+(g+m-s.displaySize[0])/2)+s.displaySize[0];var f=e.top*r,v=e.bottom*r;return"height"===n||"both"===n?(h=o[1]+f-i[0],d=o[1]+v+i[2]):d=(h=o[1]+(f+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:h,right:u,bottom:d,left:p,collisionPadding:a}}wl[10]=!0,wl[32]=!0,wl[38]=!0,wl[40]=!0,wl[41]=!0,wl[43]=!0,wl[45]=!0,wl[47]=!0,wl[173]=!0,wl[183]=!0,wl[8203]=!0,wl[8208]=!0,wl[8211]=!0,wl[8231]=!0;var Tl=function(t){function e(e,n,i,o){t.call(this,e,n),this.angle=i,void 0!==o&&(this.segment=o)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(o);function Rl(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ro(t+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,o=n.interpolationType,r=0;r<i.length&&i[r]<=t;)r++;for(var a=r=Math.max(0,r-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[r],l=i[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:o}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new ro(s)),maxSize:n.evaluate(new ro(l)),interpolationType:o}}function Ll(t,e,n){var i=e.uSize,o=n.lowerSize;return"source"===t.kind?o/128:"composite"===t.kind?$e(o/128,n.upperSize/128,e.uSizeT):i}function zl(t,e){var n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var o=t.interpolationType,r=o?h(on.interpolationFactor(o,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?i=$e(t.minSize,t.maxSize,r):n=r}return{uSizeT:n,uSize:i}}Bi("Anchor",Tl);var Bl=Object.freeze({__proto__:null,getSizeData:Rl,evaluateSizeForFeature:Ll,evaluateSizeForZoom:zl,SIZE_PACK_FACTOR:128});function jl(t,e,n,i,o){if(void 0===e.segment)return!0;for(var r=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(r),r=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],c=0;s<n/2;){var h=t[a],u=t[a+1];if(!u)return!1;var d=t[a-1].angleTo(h)-h.angleTo(u);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),c+=d;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>o)return!1;a++,s+=h.dist(u)}return!0}function Dl(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Fl(t,e,n){return t?.6*e*n:0}function Vl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Nl(t,e,n,i,o,r){for(var a=Fl(n,o,r),s=Vl(n,i)*r,l=0,c=Dl(t)/2,h=0;h<t.length-1;h++){var u=t[h],d=t[h+1],p=u.dist(d);if(l+p>c){var g=(c-l)/p,m=$e(u.x,d.x,g),f=$e(u.y,d.y,g),v=new Tl(m,f,d.angleTo(u),h);return v._round(),!a||jl(t,v,s,a,e)?v:void 0}l+=p}}function $l(t,e,n,i,o,r,a,s,l){var c=Fl(i,r,a),h=Vl(i,o),u=h*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-u<e/4&&(e=u+e/4),function t(e,n,i,o,r,a,s,l,c){for(var h=a/2,u=Dl(e),d=0,p=n-i,g=[],m=0;m<e.length-1;m++){for(var f=e[m],v=e[m+1],b=f.dist(v),y=v.angleTo(f);p+i<d+b;){var _=((p+=i)-d)/b,C=$e(f.x,v.x,_),x=$e(f.y,v.y,_);if(C>=0&&C<c&&x>=0&&x<c&&p-h>=0&&p+h<=u){var w=new Tl(C,x,y,m);w._round(),o&&!jl(e,w,a,o,r)||g.push(w)}}d+=b}return l||g.length||s||(g=t(e,d/2,i,o,r,a,s,!0,c)),g}(t,d?e/2*s%e:(h/2+2*r)*a*s%e,e,c,n,u,d,!1,l)}function Zl(t,e,n,i,r){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],c=void 0,h=0;h<l.length-1;h++){var u=l[h],d=l[h+1];u.x<e&&d.x<e||(u.x<e?u=new o(e,u.y+(e-u.x)/(d.x-u.x)*(d.y-u.y))._round():d.x<e&&(d=new o(e,u.y+(e-u.x)/(d.x-u.x)*(d.y-u.y))._round()),u.y<n&&d.y<n||(u.y<n?u=new o(u.x+(n-u.y)/(d.y-u.y)*(d.x-u.x),n)._round():d.y<n&&(d=new o(u.x+(n-u.y)/(d.y-u.y)*(d.x-u.x),n)._round()),u.x>=i&&d.x>=i||(u.x>=i?u=new o(i,u.y+(i-u.x)/(d.x-u.x)*(d.y-u.y))._round():d.x>=i&&(d=new o(i,u.y+(i-u.x)/(d.x-u.x)*(d.y-u.y))._round()),u.y>=r&&d.y>=r||(u.y>=r?u=new o(u.x+(r-u.y)/(d.y-u.y)*(d.x-u.x),r)._round():d.y>=r&&(d=new o(u.x+(r-u.y)/(d.y-u.y)*(d.x-u.x),r)._round()),c&&u.equals(c[c.length-1])||a.push(c=[u]),c.push(d)))))}return a}function Gl(t,e,n,i){var r=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,h=t.right-t.left,u=t.bottom-t.top,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],g=function(t,e){return t+e[1]-e[0]},m=d.reduce(g,0),f=p.reduce(g,0),v=l-m,b=c-f,y=0,_=m,C=0,x=f,w=0,I=v,A=0,P=b;if(a.content&&i){var O=a.content;y=Wl(d,0,O[0]),C=Wl(p,0,O[1]),_=Wl(d,O[0],O[2]),x=Wl(p,O[1],O[3]),w=O[0]-y,A=O[1]-C,I=O[2]-O[0]-_,P=O[3]-O[1]-x}var M=function(i,r,l,c){var d=Kl(i.stretch-y,_,h,t.left),p=Ul(i.fixed-w,I,i.stretch,m),g=Kl(r.stretch-C,x,u,t.top),v=Ul(r.fixed-A,P,r.stretch,f),b=Kl(l.stretch-y,_,h,t.left),O=Ul(l.fixed-w,I,l.stretch,m),M=Kl(c.stretch-C,x,u,t.top),k=Ul(c.fixed-A,P,c.stretch,f),S=new o(d,g),E=new o(b,g),T=new o(b,M),R=new o(d,M),L=new o(p/s,v/s),z=new o(O/s,k/s),B=e*Math.PI/180;if(B){var j=Math.sin(B),D=Math.cos(B),F=[D,-j,j,D];S._matMult(F),E._matMult(F),R._matMult(F),T._matMult(F)}var V=i.stretch+i.fixed,N=r.stretch+r.fixed;return{tl:S,tr:E,bl:R,br:T,tex:{x:a.paddedRect.x+1+V,y:a.paddedRect.y+1+N,w:l.stretch+l.fixed-V,h:c.stretch+c.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:z,minFontScaleX:I/s/h,minFontScaleY:P/s/u,isSDF:n}};if(i&&(a.stretchX||a.stretchY))for(var k=Hl(d,v,m),S=Hl(p,b,f),E=0;E<k.length-1;E++)for(var T=k[E],R=k[E+1],L=0;L<S.length-1;L++)r.push(M(T,S[L],R,S[L+1]));else r.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return r}function Wl(t,e,n){for(var i=0,o=0,r=t;o<r.length;o+=1){var a=r[o];i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return i}function Hl(t,e,n){for(var i=[{fixed:-1,stretch:0}],o=0,r=t;o<r.length;o+=1){var a=r[o],s=a[0],l=a[1],c=i[i.length-1];i.push({fixed:s-c.stretch,stretch:c.stretch}),i.push({fixed:s-c.stretch,stretch:c.stretch+(l-s)})}return i.push({fixed:e+1,stretch:n}),i}function Kl(t,e,n,i){return t/e*n+i}function Ul(t,e,n,i){return t-e*n/i}var Xl=function(t,e,n,i,r,a,s,l,c,h){if(this.boxStartIndex=t.length,c){var u=a.top,d=a.bottom,p=a.collisionPadding;p&&(u-=p[1],d+=p[3]);var g=d-u;g>0&&(g=Math.max(10,g),this.circleDiameter=g)}else{var m=a.top*s-l,f=a.bottom*s+l,v=a.left*s-l,b=a.right*s+l,y=a.collisionPadding;if(y&&(v-=y[0]*s,m-=y[1]*s,b+=y[2]*s,f+=y[3]*s),h){var _=new o(v,m),C=new o(b,m),x=new o(v,f),w=new o(b,f),I=h*Math.PI/180;_._rotate(I),C._rotate(I),x._rotate(I),w._rotate(I),v=Math.min(_.x,C.x,x.x,w.x),b=Math.max(_.x,C.x,x.x,w.x),m=Math.min(_.y,C.y,x.y,w.y),f=Math.max(_.y,C.y,x.y,w.y)}t.emplaceBack(e.x,e.y,v,m,b,f,n,i,r)}this.boxEndIndex=t.length},Yl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Jl),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Jl(t,e){return t<e?-1:t>e?1:0}function ql(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=1/0,r=1/0,a=-1/0,s=-1/0,l=t[0],c=0;c<l.length;c++){var h=l[c];(!c||h.x<i)&&(i=h.x),(!c||h.y<r)&&(r=h.y),(!c||h.x>a)&&(a=h.x),(!c||h.y>s)&&(s=h.y)}var u=Math.min(a-i,s-r),d=u/2,p=new Yl([],Ql);if(0===u)return new o(i,r);for(var g=i;g<a;g+=u)for(var m=r;m<s;m+=u)p.push(new tc(g+d,m+d,d,t));for(var f=function(t){for(var e=0,n=0,i=0,o=t[0],r=0,a=o.length,s=a-1;r<a;s=r++){var l=o[r],c=o[s],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,i+=(l.y+c.y)*h,e+=3*h}return new tc(n/e,i/e,0,t)}(t),v=p.length;p.length;){var b=p.pop();(b.d>f.d||!f.d)&&(f=b,n&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,v)),b.max-f.d<=e||(p.push(new tc(b.p.x-(d=b.h/2),b.p.y-d,d,t)),p.push(new tc(b.p.x+d,b.p.y-d,d,t)),p.push(new tc(b.p.x-d,b.p.y+d,d,t)),p.push(new tc(b.p.x+d,b.p.y+d,d,t)),v+=4)}return n&&(console.log("num probes: "+v),console.log("best distance: "+f.d)),f.p}function Ql(t,e){return e.max-t.max}function tc(t,e,n,i){this.p=new o(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,o=0;o<e.length;o++)for(var r=e[o],a=0,s=r.length,l=s-1;a<s;l=a++){var c=r[a],h=r[l];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),i=Math.min(i,Ur(t,c,h))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Yl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Yl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Yl.prototype.peek=function(){return this.data[0]},Yl.prototype._up=function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var o=t-1>>1,r=e[o];if(n(i,r)>=0)break;e[t]=r,t=o}e[t]=i},Yl.prototype._down=function(t){for(var e=this.data,n=this.compare,i=this.length>>1,o=e[t];t<i;){var r=1+(t<<1),a=e[r],s=r+1;if(s<this.length&&n(e[s],a)<0&&(r=s,a=e[s]),n(a,o)>=0)break;e[t]=a,t=r}e[t]=o};var ec=Number.POSITIVE_INFINITY;function nc(t,e){return e[1]!==ec?function(t,e,n){var i=0,o=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":o=n-7;break;case"bottom-right":case"bottom-left":case"bottom":o=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,o]}(t,e[0],e[1]):function(t,e){var n=0,i=0;e<0&&(e=0);var o=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=o-7;break;case"bottom-right":case"bottom-left":i=7-o;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-o;break;case"top-left":case"bottom-left":n=o;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function ic(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oc(t,e,n,i,r,a,s,l,c,h,u,d,p,g,m){var f=function(t,e,n,i,r,a,s,l){for(var c=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=[],u=0,d=e.positionedLines;u<d.length;u+=1)for(var p=d[u],g=0,m=p.positionedGlyphs;g<m.length;g+=1){var f=m[g];if(f.rect){var v=f.rect||{},b=4,y=!0,_=1,C=0,x=(r||l)&&f.vertical,w=f.metrics.advance*f.scale/2;if(l&&e.verticalizable&&(C=p.lineOffset/2-(f.imageName?-(24-f.metrics.width*f.scale)/2:24*(f.scale-1))),f.imageName){var I=s[f.imageName];y=I.sdf,b=1/(_=I.pixelRatio)}var A=r?[f.x+w,f.y]:[0,0],P=r?[0,0]:[f.x+w+n[0],f.y+n[1]-C],O=[0,0];x&&(O=P,P=[0,0]);var M=(f.metrics.left-b)*f.scale-w+P[0],k=(-f.metrics.top-b)*f.scale+P[1],S=M+v.w*f.scale/_,E=k+v.h*f.scale/_,T=new o(M,k),R=new o(S,k),L=new o(M,E),z=new o(S,E);if(x){var B=new o(-w,w- -17),j=-Math.PI/2,D=12-w,F=new o(22-D,-(f.imageName?D:0)),V=new(Function.prototype.bind.apply(o,[null].concat(O)));T._rotateAround(j,B)._add(F)._add(V),R._rotateAround(j,B)._add(F)._add(V),L._rotateAround(j,B)._add(F)._add(V),z._rotateAround(j,B)._add(F)._add(V)}if(c){var N=Math.sin(c),$=Math.cos(c),Z=[$,-N,N,$];T._matMult(Z),R._matMult(Z),L._matMult(Z),z._matMult(Z)}var G=new o(0,0),W=new o(0,0);h.push({tl:T,tr:R,bl:L,br:z,tex:v,writingMode:e.writingMode,glyphOffset:A,sectionIndex:f.sectionIndex,isSDF:y,pixelOffsetTL:G,pixelOffsetBR:W,minFontScaleX:0,minFontScaleY:0})}}return h}(0,n,l,r,a,s,i,t.allowVerticalPlacement),v=t.textSizeData,b=null;"source"===v.kind?(b=[128*r.layout.get("text-size").evaluate(s,{})])[0]>32640&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===v.kind&&((b=[128*g.compositeTextSizes[0].evaluate(s,{},m),128*g.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||b[1]>32640)&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,f,b,l,a,s,h,e,c.lineStartIndex,c.lineLength,p,m);for(var y=0,_=u;y<_.length;y+=1)d[_[y]]=t.text.placedSymbolArray.length-1;return 4*f.length}function rc(t){for(var e in t)return t[e];return null}function ac(t,e,n,i){var o=t.compareText;if(e in o){for(var r=o[e],a=r.length-1;a>=0;a--)if(i.dist(r[a])<n)return!0}else o[e]=[];return o[e].push(i),!1}var sc=vs.VectorTileFeature.types,lc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cc(t,e,n,i,o,r,a,s,l,c,h,u,d){var p=s?Math.min(32640,Math.round(s[0])):0,g=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*o),r,a,(p<<1)+(l?1:0),g,16*c,16*h,256*u,256*d)}function hc(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function uc(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Xi(n[e].text))return!0;return!1}var dc=function(t){this.layoutVertexArray=new Ro,this.indexArray=new Vo,this.programConfigurations=t,this.segments=new ar,this.dynamicLayoutVertexArray=new Lo,this.opacityVertexArray=new zo,this.placedSymbolArray=new qo};dc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},dc.prototype.upload=function(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ds.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,lc,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))},dc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Bi("SymbolBuffers",dc);var pc=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ar,this.collisionVertexArray=new Fo};pc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Vs.members,!0)},pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Bi("CollisionBuffers",pc);var gc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oa([]),this.placementViewportMatrix=oa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rl(this.zoom,e["text-size"]),this.iconSizeData=Rl(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),o=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==o&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return bl[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};gc.prototype.createArrays=function(){this.text=new dc(new Rr(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new dc(new Rr(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new er,this.lineVertexArray=new nr,this.symbolInstances=new tr},gc.prototype.calculateGlyphDependencies=function(t,e,n,i,o){for(var r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,(n||i)&&o){var a=Gs[t.charAt(r)];a&&(e[a.charCodeAt(0)]=!0)}},gc.prototype.populate=function(t,e,n){var i=this.layers[0],o=i.layout,r=o.get("text-font"),a=o.get("text-field"),s=o.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof ee&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],l||c){for(var u=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,g=new ro(this.zoom),m=0,f=t;m<f.length;m+=1){var v=f[m],b=v.feature,y=v.id,_=v.index,C=v.sourceLayerIndex,x=i._featureFilter.needGeometry,w={type:b.type,id:y,properties:b.properties,geometry:x?Dr(b):[]};if(i._featureFilter.filter(g,w,n)){x||(w.geometry=Dr(b));var I=void 0;if(l){var A=i.getValueAndResolveTokens("text-field",w,n,p),P=ee.factory(A);uc(P)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===no()||this.hasRTLText&&oo.isParsed())&&(I=Zs(P,i,w))}var O=void 0;if(c){var M=i.getValueAndResolveTokens("icon-image",w,n,p);O=M instanceof ne?M:ne.fromString(M)}if(I||O){var k=this.sortFeaturesByKey?h.evaluate(w,{},n):void 0,S={id:y,text:I,icon:O,index:_,sourceLayerIndex:C,geometry:Dr(b),properties:b.properties,type:sc[b.type],sortKey:k};if(this.features.push(S),O&&(u[O.name]=!0),I){var E=r.evaluate(w,{},n).join(","),T="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bl.vertical)>=0;for(var R=0,L=I.sections;R<L.length;R+=1){var z=L[R];if(z.image)u[z.image.name]=!0;else{var B=Gi(I.toString()),j=z.fontStack||E,D=d[j]=d[j]||{};this.calculateGlyphDependencies(z.text,D,T,this.allowVerticalPlacement,B)}}}}}}"line"===o.get("symbol-placement")&&(this.features=function(t){var e={},n={},i=[],o=0;function r(e){i.push(t[e]),o++}function a(t,e,o){var r=n[t];return delete n[t],n[e]=r,i[r].geometry[0].pop(),i[r].geometry[0]=i[r].geometry[0].concat(o[0]),r}function s(t,n,o){var r=e[n];return delete e[n],e[t]=r,i[r].geometry[0].shift(),i[r].geometry[0]=o[0].concat(i[r].geometry[0]),r}function l(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var c=0;c<t.length;c++){var h=t[c],u=h.geometry,d=h.text?h.text.toString():null;if(d){var p=l(d,u),g=l(d,u,!0);if(p in n&&g in e&&n[p]!==e[g]){var m=s(p,g,u),f=a(p,g,i[m].geometry);delete e[p],delete n[g],n[l(d,i[f].geometry,!0)]=f,i[m].geometry=null}else p in n?a(p,g,u):g in e?s(p,g,u):(r(c),e[p]=o-1,n[g]=o-1)}else r(c)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},gc.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},gc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},gc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},gc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},gc.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),o=t.dist(e[t.segment]),r={},a=t.segment+1;a<e.length;a++)r[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)r[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:o},s>0&&(o+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var c=r[l];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},gc.prototype.addSymbols=function(t,e,n,i,o,r,a,s,l,c,h,u){for(var d=t.indexArray,p=t.layoutVertexArray,g=t.segments.prepareSegment(4*e.length,p,d,r.sortKey),m=this.glyphOffsetArray.length,f=g.vertexLength,v=this.allowVerticalPlacement&&a===bl.vertical?Math.PI/2:0,b=r.text&&r.text.sections,y=0;y<e.length;y++){var _=e[y],C=_.tl,x=_.tr,w=_.bl,I=_.br,A=_.tex,P=_.pixelOffsetTL,O=_.pixelOffsetBR,M=_.minFontScaleX,k=_.minFontScaleY,S=_.glyphOffset,E=_.isSDF,T=_.sectionIndex,R=g.vertexLength,L=S[1];cc(p,s.x,s.y,C.x,L+C.y,A.x,A.y,n,E,P.x,P.y,M,k),cc(p,s.x,s.y,x.x,L+x.y,A.x+A.w,A.y,n,E,O.x,P.y,M,k),cc(p,s.x,s.y,w.x,L+w.y,A.x,A.y+A.h,n,E,P.x,O.y,M,k),cc(p,s.x,s.y,I.x,L+I.y,A.x+A.w,A.y+A.h,n,E,O.x,O.y,M,k),hc(t.dynamicLayoutVertexArray,s,v),d.emplaceBack(R,R+1,R+2),d.emplaceBack(R+1,R+2,R+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),y!==e.length-1&&T===e[y+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,r,r.index,{},u,b&&b[T])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,f,l,c,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,h)},gc.prototype._addCollisionDebugVertex=function(t,e,n,i,o,r){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,o,Math.round(r.x),Math.round(r.y))},gc.prototype.addCollisionDebugVertices=function(t,e,n,i,r,a,s){var l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),c=l.vertexLength,h=r.layoutVertexArray,u=r.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(h,u,a,d,p,new o(t,e)),this._addCollisionDebugVertex(h,u,a,d,p,new o(n,e)),this._addCollisionDebugVertex(h,u,a,d,p,new o(n,i)),this._addCollisionDebugVertex(h,u,a,d,p,new o(t,i)),l.vertexLength+=4;var g=r.indexArray;g.emplaceBack(c,c+1),g.emplaceBack(c+1,c+2),g.emplaceBack(c+2,c+3),g.emplaceBack(c+3,c),l.primitiveLength+=4},gc.prototype.addDebugCollisionBoxes=function(t,e,n,i){for(var o=t;o<e;o++){var r=this.collisionBoxArray.get(o);this.addCollisionDebugVertices(r.x1,r.y1,r.x2,r.y2,i?this.textCollisionBox:this.iconCollisionBox,r.anchorPoint,n)}},gc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pc(jo,Ns.members,Ho),this.iconCollisionBox=new pc(jo,Ns.members,Ho);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},gc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,o,r,a,s,l){for(var c={},h=e;h<n;h++){var u=t.get(h);c.textBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},c.textFeatureIndex=u.featureIndex;break}for(var d=i;d<o;d++){var p=t.get(d);c.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},c.verticalTextFeatureIndex=p.featureIndex;break}for(var g=r;g<a;g++){var m=t.get(g);c.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},c.iconFeatureIndex=m.featureIndex;break}for(var f=s;f<l;f++){var v=t.get(f);c.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.verticalIconFeatureIndex=v.featureIndex;break}return c},gc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},gc.prototype.hasTextData=function(){return this.text.segments.get().length>0},gc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},gc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},gc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},gc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs,o=n.vertexStartIndex;o<i;o+=4)t.indexArray.emplaceBack(o,o+1,o+2),t.indexArray.emplaceBack(o+1,o+2,o+3)},gc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),i=[],o=[],r=[],a=0;a<this.symbolInstances.length;++a){r.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+n*s.anchorY)),o.push(s.featureIndex)}return r.sort((function(t,e){return i[t]-i[e]||o[e]-o[t]})),r},gc.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},gc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,i=this.symbolInstanceIndexes;n<i.length;n+=1){var o=this.symbolInstances.get(i[n]);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t,n,i){t>=0&&i.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Bi("SymbolBucket",gc,{omit:["layers","collisionBoxArray","features","compareText"]}),gc.MAX_GLYPHS=65535,gc.addDynamicAttributes=hc;var mc=new _o({"symbol-placement":new mo(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new mo(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mo(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fo(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mo(Ot.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mo(Ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mo(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new mo(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mo(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new fo(Ot.layout_symbol["icon-size"]),"icon-text-fit":new mo(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mo(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new fo(Ot.layout_symbol["icon-image"]),"icon-rotate":new fo(Ot.layout_symbol["icon-rotate"]),"icon-padding":new mo(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new mo(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new fo(Ot.layout_symbol["icon-offset"]),"icon-anchor":new fo(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mo(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mo(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mo(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new fo(Ot.layout_symbol["text-field"]),"text-font":new fo(Ot.layout_symbol["text-font"]),"text-size":new fo(Ot.layout_symbol["text-size"]),"text-max-width":new fo(Ot.layout_symbol["text-max-width"]),"text-line-height":new mo(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new fo(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new fo(Ot.layout_symbol["text-justify"]),"text-radial-offset":new fo(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mo(Ot.layout_symbol["text-variable-anchor"]),"text-anchor":new fo(Ot.layout_symbol["text-anchor"]),"text-max-angle":new mo(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new mo(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new fo(Ot.layout_symbol["text-rotate"]),"text-padding":new mo(Ot.layout_symbol["text-padding"]),"text-keep-upright":new mo(Ot.layout_symbol["text-keep-upright"]),"text-transform":new fo(Ot.layout_symbol["text-transform"]),"text-offset":new fo(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new mo(Ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mo(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new mo(Ot.layout_symbol["text-optional"])}),fc={paint:new _o({"icon-opacity":new fo(Ot.paint_symbol["icon-opacity"]),"icon-color":new fo(Ot.paint_symbol["icon-color"]),"icon-halo-color":new fo(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new fo(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fo(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new mo(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new mo(Ot.paint_symbol["icon-translate-anchor"]),"text-opacity":new fo(Ot.paint_symbol["text-opacity"]),"text-color":new fo(Ot.paint_symbol["text-color"],{runtimeType:Ft,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new fo(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new fo(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new fo(Ot.paint_symbol["text-halo-blur"]),"text-translate":new mo(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new mo(Ot.paint_symbol["text-translate-anchor"])}),layout:mc},vc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:zt,this.defaultValue=t};vc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},vc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},vc.prototype.outputDefined=function(){return!1},vc.prototype.serialize=function(){return null},Bi("FormatSectionOverride",vc,{omit:["defaultValue"]});var bc=function(t){function e(e){t.call(this,e,fc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var o=[],r=0,a=i;r<a.length;r+=1){var s=a[r];o.indexOf(s)<0&&o.push(s)}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,i){var o=this.layout.get(t).evaluate(e,{},n,i),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||Gn(r.value)||!o?o:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,o)},e.prototype.createBucket=function(t){return new gc(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=fc.paint.overridableProperties;t<n.length;t+=1){var i=n[t];if(e.hasPaintOverride(this.layout,i)){var o,r=this.paint.get(i),a=new vc(r),s=new Zn(a,r.property.specification);o="constant"===r.value.kind||"source"===r.value.kind?new Hn("source",s):new Kn("composite",s,r.value.zoomStops,r.value._interpolationType),this.paint._values[i]=new po(r.property,o,r.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,i){return!(!this.layout||n.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),i=fc.paint.properties[e],o=!1,r=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i.overrides&&i.overrides.hasOverride(n[e]))return void(o=!0)};if("constant"===n.value.kind&&n.value.value instanceof ee)r(n.value.value.sections);else if("source"===n.value.kind){var a=n.value;a._styleExpression&&function t(e){o||(e instanceof se&&re(e.value)===Zt?r(e.value.sections):e instanceof ue?r(e.sections):e.eachChild(t))}(a._styleExpression.expression)}return o},e}(Co),yc={paint:new _o({"background-color":new mo(Ot.paint_background["background-color"]),"background-pattern":new bo(Ot.paint_background["background-pattern"]),"background-opacity":new mo(Ot.paint_background["background-opacity"])})},_c=function(t){function e(e){t.call(this,e,yc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Co),Cc={paint:new _o({"raster-opacity":new mo(Ot.paint_raster["raster-opacity"]),"raster-hue-rotate":new mo(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mo(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mo(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new mo(Ot.paint_raster["raster-saturation"]),"raster-contrast":new mo(Ot.paint_raster["raster-contrast"]),"raster-resampling":new mo(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new mo(Ot.paint_raster["raster-fade-duration"])})},xc=function(t){function e(e){t.call(this,e,Cc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Co),wc=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Co),Ic={circle:ca,heatmap:ya,hillshade:Ca,fill:ss,"fill-extrusion":Is,line:Bs,symbol:bc,background:_c,raster:xc},Ac=a.HTMLImageElement,Pc=a.HTMLCanvasElement,Oc=a.HTMLVideoElement,Mc=a.ImageData,kc=a.ImageBitmap,Sc=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};Sc.prototype.update=function(t,e,n){var i=t.width,o=t.height,r=!(this.size&&this.size[0]===i&&this.size[1]===o||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),r)this.size=[i,o],t instanceof Ac||t instanceof Pc||t instanceof Oc||t instanceof Mc||kc&&t instanceof kc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=n||{x:0,y:0},c=l.x,h=l.y;t instanceof Ac||t instanceof Pc||t instanceof Oc||t instanceof Mc||kc&&t instanceof kc?s.texSubImage2D(s.TEXTURE_2D,0,c,h,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,c,h,i,o,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Sc.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},Sc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ec=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Ec.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Ec.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Tc=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new Ec(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?t:a};function Rc(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Tc.prototype.send=function(t,e,n,i,o){var r=this;void 0===o&&(o=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=k(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:o,sourceMapId:this.mapId,data:Vi(e,s)},s),{cancel:function(){n&&delete r.callbacks[a],r.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:r.mapId})}}},Tc.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var i=this.cancelCallbacks[n];delete this.cancelCallbacks[n],i&&i()}else P()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Tc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Tc.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Ni(e.error)):i(null,Ni(e.data)))}else{var o=!1,r=k(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){o=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Vi(e):null,data:Vi(i,r)},r)}:function(t){o=!0},s=null,l=Ni(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var c=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,c[0],l.source)[c[1]](l,a)}else a(new Error("Could not find function "+e.type));!o&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Tc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Lc=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Lc.prototype.setNorthEast=function(t){return this._ne=t instanceof zc?new zc(t.lng,t.lat):zc.convert(t),this},Lc.prototype.setSouthWest=function(t){return this._sw=t instanceof zc?new zc(t.lng,t.lat):zc.convert(t),this},Lc.prototype.extend=function(t){var e,n,i=this._sw,o=this._ne;if(t instanceof zc)e=t,n=t;else{if(!(t instanceof Lc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Lc.convert(t)):this.extend(zc.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return i||o?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),o.lng=Math.max(n.lng,o.lng),o.lat=Math.max(n.lat,o.lat)):(this._sw=new zc(e.lng,e.lat),this._ne=new zc(n.lng,n.lat)),this},Lc.prototype.getCenter=function(){return new zc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Lc.prototype.getSouthWest=function(){return this._sw},Lc.prototype.getNorthEast=function(){return this._ne},Lc.prototype.getNorthWest=function(){return new zc(this.getWest(),this.getNorth())},Lc.prototype.getSouthEast=function(){return new zc(this.getEast(),this.getSouth())},Lc.prototype.getWest=function(){return this._sw.lng},Lc.prototype.getSouth=function(){return this._sw.lat},Lc.prototype.getEast=function(){return this._ne.lng},Lc.prototype.getNorth=function(){return this._ne.lat},Lc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Lc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Lc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Lc.prototype.contains=function(t){var e=zc.convert(t),n=e.lng,i=e.lat,o=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&o},Lc.convert=function(t){return!t||t instanceof Lc?t:new Lc(t)};var zc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};zc.prototype.wrap=function(){return new zc(u(this.lng,-180,180),this.lat)},zc.prototype.toArray=function(){return[this.lng,this.lat]},zc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},zc.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,i=t.lat*e,o=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(o,1))},zc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Lc(new zc(this.lng-n,this.lat-e),new zc(this.lng+n,this.lat+e))},zc.convert=function(t){if(t instanceof zc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new zc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new zc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bc=2*Math.PI*6371008.8;function jc(t){return Bc*Math.cos(t*Math.PI/180)}function Dc(t){return(180+t)/360}function Fc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Vc(t,e){return t/jc(e)}function Nc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var $c=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};$c.fromLngLat=function(t,e){void 0===e&&(e=0);var n=zc.convert(t);return new $c(Dc(n.lng),Fc(n.lat),Vc(e,n.lat))},$c.prototype.toLngLat=function(){return new zc(360*this.x-180,Nc(this.y))},$c.prototype.toAltitude=function(){return this.z*jc(Nc(this.y))},$c.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bc*(t=Nc(this.y),1/Math.cos(t*Math.PI/180));var t};var Zc=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Hc(0,t,t,e,n)};Zc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Zc.prototype.url=function(t,e){var n,i,o,r,a,s=(i=this.y,o=this.z,r=Rc(256*(n=this.x),256*(i=Math.pow(2,o)-i-1),o),a=Rc(256*(n+1),256*(i+1),o),r[0]+","+r[1]+","+a[0]+","+a[1]),l=function(t,e,n){for(var i,o="",r=t;r>0;r--)o+=(e&(i=1<<r-1)?1:0)+(n&i?2:0);return o}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Zc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new o(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Zc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gc=function(t,e){this.wrap=t,this.canonical=e,this.key=Hc(t,e.z,e.z,e.x,e.y)},Wc=function(t,e,n,i,o){this.overscaledZ=t,this.wrap=e,this.canonical=new Zc(n,+i,+o),this.key=Hc(e,t,n,i,o)};function Hc(t,e,n,i,o){(t*=2)<0&&(t=-1*t-1);var r=1<<n;return(r*r*t+r*o+i).toString(36)+n.toString(36)+e.toString(36)}Wc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Wc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Wc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Wc.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Hc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Hc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Wc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Wc.prototype.children=function(t){if(this.overscaledZ>=t)return[new Wc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Wc(e,this.wrap,e,n,i),new Wc(e,this.wrap,e,n+1,i),new Wc(e,this.wrap,e,n,i+1),new Wc(e,this.wrap,e,n+1,i+1)]},Wc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Wc.prototype.wrapped=function(){return new Wc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wc.prototype.unwrapTo=function(t){return new Wc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Wc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wc.prototype.toUnwrapped=function(){return new Gc(this.wrap,this.canonical)},Wc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new $c(t.x-this.wrap,t.y))},Bi("CanonicalTileID",Zc),Bi("OverscaledTileID",Wc,{omit:["posMatrix"]});var Kc=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var o=0;o<i;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(i,o)]=this.data[this._idx(i-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,i)]=this.data[this._idx(o,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};Kc.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[i],n[i+1],n[i+2])},Kc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Kc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Kc.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Kc.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Kc.prototype.getPixels=function(){return new fa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Kc.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,o=e*this.dim+this.dim,r=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=o-1;break;case 1:o=i+1}switch(n){case-1:r=a-1;break;case 1:a=r+1}for(var s=-e*this.dim,l=-n*this.dim,c=r;c<a;c++)for(var h=i;h<o;h++)this.data[this._idx(h,c)]=t.data[this._idx(h+s,c+l)]},Bi("DEMData",Kc);var Uc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Uc.prototype.encode=function(t){return this._stringToNumber[t]},Uc.prototype.decode=function(t){return this._numberToString[t]};var Xc=function(t,e,n,i,o){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=o},Yc={geometry:{configurable:!0}};Yc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Yc.geometry.set=function(t){this._geometry=t},Xc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Xc.prototype,Yc);var Jc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jc.prototype.updateState=function(t,e,n){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},d(this.stateChanges[t][i],n),null===this.deletedStates[t])for(var o in this.deletedStates[t]={},this.state[t])o!==i&&(this.deletedStates[t][o]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var r in this.deletedStates[t][i]={},this.state[t][i])n[r]||(this.deletedStates[t][i][r]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},Jc.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},Jc.prototype.getState=function(t,e){var n=String(e),i=d({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var o=this.deletedStates[t][e];if(null===o)return{};for(var r in o)delete i[r]}return i},Jc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Jc.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var o={};for(var r in this.stateChanges[i])this.state[i][r]||(this.state[i][r]={}),d(this.state[i][r],this.stateChanges[i][r]),o[r]=this.state[i][r];n[i]=o}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var h=0,u=Object.keys(this.deletedStates[a][c]);h<u.length;h+=1)delete this.state[a][c][u[h]];s[c]=this.state[a][c]}n[a]=n[a]||{},d(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)};var qc=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ei(8192,16,0),this.grid3D=new Ei(8192,16,0),this.featureIndexArray=new or,this.promoteId=e};function Qc(t,e,n,i,o){return y(t,(function(t,r){var a=e instanceof go?e.get(r):null;return a&&a.evaluate?a.evaluate(n,i,o):a}))}function th(t){for(var e=1/0,n=1/0,i=-1/0,o=-1/0,r=0,a=t;r<a.length;r+=1){var s=a[r];e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}return{minX:e,minY:n,maxX:i,maxY:o}}function eh(t,e){return e-t}qc.prototype.insert=function(t,e,n,i,o,r){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,o);for(var s=r?this.grid3D:this.grid,l=0;l<e.length;l++){for(var c=e[l],h=[1/0,1/0,-1/0,-1/0],u=0;u<c.length;u++){var d=c[u];h[0]=Math.min(h[0],d.x),h[1]=Math.min(h[1],d.y),h[2]=Math.max(h[2],d.x),h[3]=Math.max(h[3],d.y)}h[0]<8192&&h[1]<8192&&h[2]>=0&&h[3]>=0&&s.insert(a,h[0],h[1],h[2],h[3])}},qc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new Ks(this.rawTileData)).layers,this.sourceLayerCoder=new Uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},qc.prototype.query=function(t,e,n,i){var r=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,l=oi(a.filter),c=t.queryGeometry,h=t.queryPadding*s,u=th(c),d=this.grid.query(u.minX-h,u.minY-h,u.maxX+h,u.maxY+h),p=th(t.cameraQueryGeometry),g=0,m=this.grid3D.query(p.minX-h,p.minY-h,p.maxX+h,p.maxY+h,(function(e,n,i,r){return function(t,e,n,i,r){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&n<=l.y&&i>=l.x&&r>=l.y)return!0}var c=[new o(e,n),new o(e,r),new o(i,r),new o(i,n)];if(t.length>2)for(var h=0,u=c;h<u.length;h+=1)if(Yr(t,u[h]))return!0;for(var d=0;d<t.length-1;d++)if(Jr(t[d],t[d+1],c))return!0;return!1}(t.cameraQueryGeometry,e-h,n-h,i+h,r+h)}));g<m.length;g+=1)d.push(m[g]);d.sort(eh);for(var f,v={},b=function(o){var h=d[o];if(h!==f){f=h;var u=r.featureIndexArray.get(h),p=null;r.loadMatchingFeature(v,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,l,a.layers,a.availableImages,e,n,i,(function(e,n,i){return p||(p=Dr(e)),n.queryIntersectsFeature(c,e,i,p,r.z,t.transform,s,t.pixelPosMatrix)}))}},y=0;y<d.length;y++)b(y);return v},qc.prototype.loadMatchingFeature=function(t,e,n,i,o,r,a,s,l,c,h){var u=this.bucketLayerIDs[e];if(!r||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,u)){var d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(i);if(o.filter(new ro(this.tileID.overscaledZ),p))for(var g=this.getId(p,d),m=0;m<u.length;m++){var f=u[m];if(!(r&&r.indexOf(f)<0)){var v=s[f];if(v){var b={};void 0!==g&&c&&(b=c.getState(v.sourceLayer||"_geojsonTileLayer",g));var y=l[f];y.paint=Qc(y.paint,v.paint,p,b,a),y.layout=Qc(y.layout,v.layout,p,b,a);var _=!h||h(p,v,b);if(_){var C=new Xc(p,this.z,this.x,this.y,g);C.layer=y;var x=t[f];void 0===x&&(x=t[f]=[]),x.push({featureIndex:i,feature:C,intersectionZ:_})}}}}}},qc.prototype.lookupSymbolFeatures=function(t,e,n,i,o,r,a,s){var l={};this.loadVTLayers();for(var c=oi(o),h=0,u=t;h<u.length;h+=1)this.loadMatchingFeature(l,n,i,u[h],c,r,a,s,e);return l},qc.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,o=n[e];i<o.length;i+=1)if(t===o[i])return!0;return!1},qc.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Bi("FeatureIndex",qc,{omit:["rawTileData","sourceLayerCoder"]});var nh=function(t,e){this.tileID=t,this.uid=g(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};nh.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<D.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},nh.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},nh.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=function(){var t=r[o],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=i;a<s.length;a+=1)n[s[a].id]=t}},o=0,r=t;o<r.length;o+=1)i();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var o=this.buckets[i];if(o instanceof gc){if(this.hasSymbolBuckets=!0,!n)break;o.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var r in this.buckets){var a=this.buckets[r];if(a instanceof gc&&a.hasRTLText){this.hasRTLText=!0,oo.isLoading()||oo.isLoaded()||"deferred"!==no()||io();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Yo},nh.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},nh.prototype.getBucket=function(t){return this.buckets[t.id]},nh.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sc(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sc(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},nh.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},nh.prototype.queryRenderedFeatures=function(t,e,n,i,o,r,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:o,scale:r,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,n):{}},nh.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),o=e?e.sourceLayer:"",r=i._geojsonTileLayer||i[o];if(r)for(var a=oi(e&&e.filter),s=this.tileID.canonical,l=s.z,c=s.x,h=s.y,u={z:l,x:c,y:h},d=0;d<r.length;d++){var p=r.feature(d);if(a.filter(new ro(this.tileID.overscaledZ),p)){var g=n.getId(p,o),m=new Xc(p,l,c,h,g);m.tile=u,t.push(m)}}}},nh.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},nh.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},nh.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=O(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var r=this.expirationTime-e;r?this.expirationTime=i+Math.max(r,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},nh.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},nh.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets)if(e.style.hasLayer(i)){var o=this.buckets[i],r=o.layers[0].sourceLayer||"_geojsonTileLayer",a=n[r],s=t[r];if(a&&s&&0!==Object.keys(s).length){o.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(o)))}}}},nh.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},nh.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()},nh.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},nh.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=D.now()+t},nh.prototype.setDependencies=function(t,e){for(var n={},i=0,o=e;i<o.length;i+=1)n[o[i]]=!0;this.dependencies[t]=n},nh.prototype.hasDependency=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var o=this.dependencies[i[n]];if(o)for(var r=0,a=e;r<a.length;r+=1)if(o[a[r]])return!0}return!1};var ih=a.performance,oh=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},ih.mark(this._marks.start)};oh.prototype.finish=function(){ih.mark(this._marks.end);var t=ih.getEntriesByName(this._marks.measure);return 0===t.length&&(ih.measure(this._marks.measure,this._marks.start,this._marks.end),t=ih.getEntriesByName(this._marks.measure),ih.clearMarks(this._marks.start),ih.clearMarks(this._marks.end),ih.clearMeasures(this._marks.measure)),t},t.Actor=Tc,t.AlphaImage=ma,t.CanonicalTileID=Zc,t.CollisionBoxArray=Yo,t.Color=qt,t.DEMData=Kc,t.DataConstantProperty=mo,t.DictionaryCoder=Uc,t.EXTENT=8192,t.ErrorEvent=At,t.EvaluationParameters=ro,t.Event=It,t.Evented=Pt,t.FeatureIndex=qc,t.FillBucket=os,t.FillExtrusionBucket=Cs,t.ImageAtlas=vl,t.ImagePosition=ml,t.LineBucket=Ts,t.LngLat=zc,t.LngLatBounds=Lc,t.MercatorCoordinate=$c,t.ONE_EM=24,t.OverscaledTileID=Wc,t.Point=o,t.Point$1=o,t.Properties=_o,t.Protobuf=Ks,t.RGBAImage=fa,t.RequestManager=W,t.RequestPerformance=oh,t.ResourceType=gt,t.SegmentVector=ar,t.SourceFeatureState=Jc,t.StructArrayLayout1ui2=Ko,t.StructArrayLayout2f1f2i16=Do,t.StructArrayLayout2i4=Oo,t.StructArrayLayout3ui6=Vo,t.StructArrayLayout4i8=Mo,t.SymbolBucket=gc,t.Texture=Sc,t.Tile=nh,t.Transitionable=lo,t.Uniform1f=yr,t.Uniform1i=br,t.Uniform2f=_r,t.Uniform3f=Cr,t.Uniform4f=xr,t.UniformColor=wr,t.UniformMatrix4f=Ar,t.UnwrappedTileID=Gc,t.ValidationError=Mt,t.WritingMode=bl,t.ZoomHistory=$i,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=hc,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,o=new Array(t.length),r=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(r=t),o[a]=e,0==--i&&n(r,o)}))}))},t.bezier=l,t.bindAll=v,t.browser=D,t.cacheEntryPossiblyAdded=function(t){++dt>lt&&(t.getActor().send("enforceCacheSizeLimit",st),dt=0)},t.clamp=h,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Zl,t.clone=function(t){var e=new ia(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=C,t.clone$2=function(t){var e=new ia(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=$s,t.config=F,t.create=function(){var t=new ia(16);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new ia(9);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new ia(4);return ia!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Wn,t.createLayout=Ao,t.createStyleLayer=function(t){return"custom"===t.type?new wc(t):new Ic[t.type](t)},t.cross=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],l=n[2];return t[0]=o*l-r*s,t[1]=r*a-i*l,t[2]=i*s-o*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var o in e)if(!t(e[o],n[o]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=c,t.emitValidationErrors=Si,t.endsWith=b,t.enforceCacheSizeLimit=function(t){ct(),tt&&tt.then((function(e){e.keys().then((function(n){for(var i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Ll,t.evaluateSizeForZoom=zl,t.evaluateVariableOffset=nc,t.evented=eo,t.extend=d,t.featureFilter=oi,t.filterObject=_,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=kl,t.getAnchorJustification=ic,t.getArrayBuffer=_t,t.getImage=function t(e,n){if(V.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ft>=F.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return mt.push(i),i}ft++;var o=!1,r=function(){if(!o)for(o=!0,ft--;mt.length&&ft<F.MAX_PARALLEL_IMAGE_REQUESTS;){var e=mt.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},s=_t(e,(function(t,e,i,o){r(),t?n(t):e&&(pt()?function(t,e){var n=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(e,n):function(t,e,n,i){var o=new a.Image,r=a.URL;o.onload=function(){e(null,o),r.revokeObjectURL(o.src)},o.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});o.cacheControl=n,o.expires=i,o.src=t.byteLength?r.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(e,n,i,o))}));return{cancel:function(){s.cancel(),r()}}},t.getJSON=function(t,e){return yt(d(t,{type:"json"}),e)},t.getRTLTextPluginStatus=no,t.getReferrer=bt,t.getVideo=function(t,e){var n,i,o=a.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(var r=0;r<t.length;r++){var s=a.document.createElement("source");n=t[r],i=void 0,(i=a.document.createElement("a")).href=n,(i.protocol!==a.document.location.protocol||i.host!==a.document.location.host)&&(o.crossOrigin="Anonymous"),s.src=t[r],o.appendChild(s)}return{cancel:function(){}}},t.identity=oa,t.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],p=e[11],g=e[12],m=e[13],f=e[14],v=e[15],b=n*s-i*a,y=n*l-o*a,_=n*c-r*a,C=i*l-o*s,x=i*c-r*s,w=o*c-r*l,I=h*m-u*g,A=h*f-d*g,P=h*v-p*g,O=u*f-d*m,M=u*v-p*m,k=d*v-p*f,S=b*k-y*M+_*O+C*P-x*A+w*I;return S?(t[0]=(s*k-l*M+c*O)*(S=1/S),t[1]=(o*M-i*k-r*O)*S,t[2]=(m*w-f*x+v*C)*S,t[3]=(d*x-u*w-p*C)*S,t[4]=(l*P-a*k-c*A)*S,t[5]=(n*k-o*P+r*A)*S,t[6]=(f*_-g*w-v*y)*S,t[7]=(h*w-d*_+p*y)*S,t[8]=(a*M-s*P+c*I)*S,t[9]=(i*P-n*M-r*I)*S,t[10]=(g*x-m*_+v*b)*S,t[11]=(u*_-h*x-p*b)*S,t[12]=(s*A-a*O-l*I)*S,t[13]=(n*O-i*A+o*I)*S,t[14]=(m*y-g*C-f*b)*S,t[15]=(h*C-u*y+d*b)*S,t):null},t.isChar=Zi,t.isMapboxURL=H,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.makeRequest=yt,t.mapObject=y,t.mercatorXfromLng=Dc,t.mercatorYfromLat=Fc,t.mercatorZfromAltitude=Vc,t.mul=sa,t.multiply=ra,t.mvt=vs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],i=e[1],o=e[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},t.number=$e,t.offscreenCanvasSupported=pt,t.ortho=function(t,e,n,i,o,r,a){var s=1/(e-n),l=1/(i-o),c=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+i)*l,t[14]=(a+r)*c,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ks(t).readFields(ul,[])},t.pbf=Ks,t.performSymbolLayout=function(t,e,n,i,o,r,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var h=t.textSizeData,u=h.maxZoom;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new ro(h.minZoom),a),l["text-size"].possiblyEvaluate(new ro(u),a)]}if("composite"===t.iconSizeData.kind){var d=t.iconSizeData,p=d.maxZoom;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new ro(d.minZoom),a),l["icon-size"].possiblyEvaluate(new ro(p),a)]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new ro(t.zoom+1),a),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new ro(t.zoom+1),a),c.textMaxSize=l["text-size"].possiblyEvaluate(new ro(18));for(var g=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),f=s.get("text-keep-upright"),v=s.get("text-size"),b=function(){var r=_[y],l=s.get("text-font").evaluate(r,{},a).join(","),h=v.evaluate(r,{},a),u=c.layoutTextSize.evaluate(r,{},a),d=c.layoutIconSize.evaluate(r,{},a),p={horizontal:{},vertical:void 0},b=r.text,C=[0,0];if(b){var x=b.toString(),I=24*s.get("text-letter-spacing").evaluate(r,{},a),A=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i=n[e].charCodeAt(0),Zi.Arabic(i)||Zi["Arabic Supplement"](i)||Zi["Arabic Extended-A"](i)||Zi["Arabic Presentation Forms-A"](i)||Zi["Arabic Presentation Forms-B"](i))return!1;var i;return!0}(x)?I:0,P=s.get("text-anchor").evaluate(r,{},a),O=s.get("text-variable-anchor");if(!O){var M=s.get("text-radial-offset").evaluate(r,{},a);C=M?nc(P,[24*M,ec]):s.get("text-offset").evaluate(r,{},a).map((function(t){return 24*t}))}var k=m?"center":s.get("text-justify").evaluate(r,{},a),S=s.get("symbol-placement"),E="point"===S?24*s.get("text-max-width").evaluate(r,{},a):0,T=function(){t.allowVerticalPlacement&&Gi(x)&&(p.vertical=Cl(b,e,n,o,l,E,g,P,"left",A,C,bl.vertical,!0,S,u,h))};if(!m&&O){for(var R="auto"===k?O.map((function(t){return ic(t)})):[k],L=!1,z=0;z<R.length;z++){var B=R[z];if(!p.horizontal[B])if(L)p.horizontal[B]=p.horizontal[0];else{var j=Cl(b,e,n,o,l,E,g,"center",B,A,C,bl.horizontal,!1,S,u,h);j&&(p.horizontal[B]=j,L=1===j.positionedLines.length)}}T()}else{"auto"===k&&(k=ic(P));var D=Cl(b,e,n,o,l,E,g,P,k,A,C,bl.horizontal,!1,S,u,h);D&&(p.horizontal[k]=D),T(),Gi(x)&&m&&f&&(p.vertical=Cl(b,e,n,o,l,E,g,P,k,A,C,bl.vertical,!1,S,u,h))}}var F=void 0,V=!1;if(r.icon&&r.icon.name){var N=i[r.icon.name];N&&(F=function(t,e,n){var i=kl(n),o=e[0]-t.displaySize[0]*i.horizontalAlign,r=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:r,bottom:r+t.displaySize[1],left:o,right:o+t.displaySize[0]}}(o[r.icon.name],s.get("icon-offset").evaluate(r,{},a),s.get("icon-anchor").evaluate(r,{},a)),V=N.sdf,void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(N.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var $=rc(p.horizontal)||p.vertical;t.iconsInText=!!$&&$.iconsInText,($||F)&&function(t,e,n,i,o,r,a,s,l,c,h){var u=r.textMaxSize.evaluate(e,{});void 0===u&&(u=a);var d,p=t.layers[0].layout,g=p.get("icon-offset").evaluate(e,{},h),m=rc(n.horizontal),f=a/24,v=t.tilePixelRatio*f,b=t.tilePixelRatio*u/24,y=t.tilePixelRatio*s,_=t.tilePixelRatio*p.get("symbol-spacing"),C=p.get("text-padding")*t.tilePixelRatio,x=p.get("icon-padding")*t.tilePixelRatio,I=p.get("text-max-angle")/180*Math.PI,A="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),P="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),O=p.get("symbol-placement"),M=_/2,k=p.get("icon-text-fit");i&&"none"!==k&&(t.allowVerticalPlacement&&n.vertical&&(d=El(i,n.vertical,k,p.get("icon-text-fit-padding"),g,f)),m&&(i=El(i,m,k,p.get("icon-text-fit-padding"),g,f)));var S=function(s,u){u.x<0||u.x>=8192||u.y<0||u.y>=8192||function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m,f,v,b,y,_,C,x,I,A){var P,O,M,k,S,E=t.addToLineVertexArray(e,n),T=0,R=0,L=0,z=0,B=-1,j=-1,D={},F=ur(""),V=0,N=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(V=(P=s.layout.get("text-offset").evaluate(_,{},I).map((function(t){return 24*t})))[0],N=P[1]):(V=24*s.layout.get("text-radial-offset").evaluate(_,{},I),N=ec),t.allowVerticalPlacement&&i.vertical){var $=s.layout.get("text-rotate").evaluate(_,{},I)+90;k=new Xl(l,e,c,h,u,i.vertical,d,p,g,$),a&&(S=new Xl(l,e,c,h,u,a,f,v,g,$))}if(o){var Z=s.layout.get("icon-rotate").evaluate(_,{}),G="none"!==s.layout.get("icon-text-fit"),W=Gl(o,Z,x,G),H=a?Gl(a,Z,x,G):void 0;M=new Xl(l,e,c,h,u,o,f,v,!1,Z),T=4*W.length;var K=t.iconSizeData,U=null;"source"===K.kind?(U=[128*s.layout.get("icon-size").evaluate(_,{})])[0]>32640&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===K.kind&&((U=[128*C.compositeIconSizes[0].evaluate(_,{},I),128*C.compositeIconSizes[1].evaluate(_,{},I)])[0]>32640||U[1]>32640)&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,W,U,y,b,_,!1,e,E.lineStartIndex,E.lineLength,-1,I),B=t.icon.placedSymbolArray.length-1,H&&(R=4*H.length,t.addSymbols(t.icon,H,U,y,b,_,bl.vertical,e,E.lineStartIndex,E.lineLength,-1,I),j=t.icon.placedSymbolArray.length-1)}for(var X in i.horizontal){var Y=i.horizontal[X];if(!O){F=ur(Y.text);var J=s.layout.get("text-rotate").evaluate(_,{},I);O=new Xl(l,e,c,h,u,Y,d,p,g,J)}var q=1===Y.positionedLines.length;if(L+=oc(t,e,Y,r,s,g,_,m,E,i.vertical?bl.horizontal:bl.horizontalOnly,q?Object.keys(i.horizontal):[X],D,B,C,I),q)break}i.vertical&&(z+=oc(t,e,i.vertical,r,s,g,_,m,E,bl.vertical,["vertical"],D,j,C,I));var Q=O?O.boxStartIndex:t.collisionBoxArray.length,tt=O?O.boxEndIndex:t.collisionBoxArray.length,et=k?k.boxStartIndex:t.collisionBoxArray.length,nt=k?k.boxEndIndex:t.collisionBoxArray.length,it=M?M.boxStartIndex:t.collisionBoxArray.length,ot=M?M.boxEndIndex:t.collisionBoxArray.length,rt=S?S.boxStartIndex:t.collisionBoxArray.length,at=S?S.boxEndIndex:t.collisionBoxArray.length,st=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=lt(O,st),st=lt(k,st),st=lt(M,st);var ct=(st=lt(S,st))>-1?1:0;ct&&(st*=A/24),t.glyphOffsetArray.length>=gc.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,D.right>=0?D.right:-1,D.center>=0?D.center:-1,D.left>=0?D.left:-1,D.vertical||-1,B,j,F,Q,tt,et,nt,it,ot,rt,at,c,L,z,T,R,ct,0,d,V,N,st)}(t,u,s,n,i,o,d,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,C,A,l,y,x,P,g,e,r,c,h,a)};if("line"===O)for(var E=0,T=Zl(e.geometry,0,0,8192,8192);E<T.length;E+=1)for(var R=T[E],L=0,z=$l(R,_,I,n.vertical||m,i,24,b,t.overscaling,8192);L<z.length;L+=1){var B=z[L];m&&ac(t,m.text,M,B)||S(R,B)}else if("line-center"===O)for(var j=0,D=e.geometry;j<D.length;j+=1){var F=D[j];if(F.length>1){var V=Nl(F,I,n.vertical||m,i,24,b);V&&S(F,V)}}else if("Polygon"===e.type)for(var N=0,$=ts(e.geometry,0);N<$.length;N+=1){var Z=$[N],G=ql(Z,16);S(Z[0],new Tl(G.x,G.y,0))}else if("LineString"===e.type)for(var W=0,H=e.geometry;W<H.length;W+=1){var K=H[W];S(K,new Tl(K[0].x,K[0].y,0))}else if("Point"===e.type)for(var U=0,X=e.geometry;U<X.length;U+=1)for(var Y=0,J=X[U];Y<J.length;Y+=1){var q=J[Y];S([q],new Tl(q.x,q.y,0))}}(t,r,p,F,i,c,u,d,C,V,a)},y=0,_=t.features;y<_.length;y+=1)b();r&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,i,o){var r,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=(o+i)*(r=1/(i-o)),t[14]=2*o*i*r):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var o=e[i];o in t&&(n[o]=t[o])}return n},t.plugin=oo,t.polygonIntersectsPolygon=Nr,t.postMapLoadEvent=at,t.postTurnstileEvent=ot,t.potpack=gl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Bi,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ji,pluginURL:qi}),eo.on("pluginStateChange",t),t},t.renderColorRamp=ba,t.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=o*l+a*s,t[2]=i*-s+r*l,t[3]=o*-s+a*l,t},t.rotateX=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[4],a=e[5],s=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+c*i,t[5]=a*o+h*i,t[6]=s*o+u*i,t[7]=l*o+d*i,t[8]=c*o-r*i,t[9]=h*o-a*i,t[10]=u*o-s*i,t[11]=d*o-l*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],a=e[1],s=e[2],l=e[3],c=e[4],h=e[5],u=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+c*i,t[1]=a*o+h*i,t[2]=s*o+u*i,t[3]=l*o+d*i,t[4]=c*o-r*i,t[5]=h*o-a*i,t[6]=u*o-s*i,t[7]=d*o-l*i,t},t.scale=function(t,e,n){var i=n[0],o=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){st=t,lt=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Ji||"loading"===Ji||"loaded"===Ji)throw new Error("setRTLTextPlugin cannot be called multiple times.");qi=D.resolveURL(t),Ji="deferred",Yi=e,to(),n||io()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=Ot,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Bl,t.transformMat3=function(t,e,n){var i=e[0],o=e[1],r=e[2];return t[0]=i*n[0]+o*n[3]+r*n[6],t[1]=i*n[1]+o*n[4]+r*n[7],t[2]=i*n[2]+o*n[5]+r*n[8],t},t.transformMat4=la,t.translate=function(t,e,n){var i,o,r,a,s,l,c,h,u,d,p,g,m=n[0],f=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*f+e[8]*v+e[12],t[13]=e[1]*m+e[5]*f+e[9]*v+e[13],t[14]=e[2]*m+e[6]*f+e[10]*v+e[14],t[15]=e[3]*m+e[7]*f+e[11]*v+e[15]):(o=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],p=e[10],g=e[11],t[0]=i=e[0],t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=h,t[8]=u,t[9]=d,t[10]=p,t[11]=g,t[12]=i*m+s*f+u*v+e[12],t[13]=o*m+l*f+d*v+e[13],t[14]=r*m+c*f+p*v+e[14],t[15]=a*m+h*f+g*v+e[15]),t},t.triggerPluginCompletionEvent=Qi,t.uniqueId=g,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Oi,t.validateStyle=Pi,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=vs,t.version="1.12.0",t.warnOnce=w,t.webpSupported=V,t.window=a,t.wrap=u})),i(0,(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",o=0,r=t;o<r.length;o+=1)i+=e(r[o])+",";return i+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+e(t[a[l]])+",";return s+"}"}function n(n){for(var i="",o=0,r=t.refProperties;o<r.length;o+=1)i+="/"+e(n[r[o]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var o=this,r=0,a=e;r<a.length;r+=1){var s=a[r];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,h=i;c<h.length;c+=1){var u=h[c];delete this.keyCache[u],delete this._layerConfigs[u],delete this._layers[u]}this.familiesBySource={};for(var d=0,p=function(t,e){for(var i={},o=0;o<t.length;o++){var r=e&&e[t[o].id]||n(t[o]);e&&(e[t[o].id]=r);var a=i[r];a||(a=i[r]=[]),a.push(t[o])}var s=[];for(var l in i)s.push(i[l]);return s}(t.values(this._layerConfigs),this.keyCache);d<p.length;d+=1){var g=p[d].map((function(t){return o._layers[t.id]})),m=g[0];if("none"!==m.visibility){var f=m.source||"",v=this.familiesBySource[f];v||(v=this.familiesBySource[f]={});var b=m.sourceLayer||"_geojsonTileLayer",y=v[b];y||(y=v[b]=[]),y.push(g)}}};var o=function(e){var n={},i=[];for(var o in e){var r=e[o],a=n[o]={};for(var s in r){var l=r[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(c),a[s]={rect:c,metrics:l.metrics}}}}var h=t.potpack(i),u=new t.AlphaImage({width:h.w||1,height:h.h||1});for(var d in e){var p=e[d];for(var g in p){var m=p[+g];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var f=n[d][g].rect;t.AlphaImage.copy(m.bitmap,u,{x:0,y:0},{x:f.x+1,y:f.y+1},m.bitmap)}}}this.image=u,this.positions=n};t.register("GlyphAtlas",o);var r=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,i){for(var o=new t.EvaluationParameters(n),r=0,a=e;r<a.length;r+=1)a[r].recalculate(o,i)}function s(e,n){var i=t.getArrayBuffer(e.request,(function(e,i,o,r){e?n(e):i&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:o,expires:r})}));return function(){i.cancel(),n()}}r.prototype.parse=function(e,n,i,r,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var c=new t.DictionaryCoder(Object.keys(e.layers).sort()),h=new t.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=[];var u,d,p,g,m={},f={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},v=n.familiesBySource[this.source];for(var b in v){var y=e.layers[b];if(y){1===y.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=c.encode(b),C=[],x=0;x<y.length;x++){var w=y.feature(x),I=h.getId(w,b);C.push({feature:w,id:I,index:x,sourceLayerIndex:_})}for(var A=0,P=v[b];A<P.length;A+=1){var O=P[A],M=O[0];M.minzoom&&this.zoom<Math.floor(M.minzoom)||M.maxzoom&&this.zoom>=M.maxzoom||"none"!==M.visibility&&(a(O,this.zoom,i),(m[M.id]=M.createBucket({index:h.bucketLayerIDs.length,layers:O,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(C,f,this.tileID.canonical),h.bucketLayerIDs.push(O.map((function(t){return t.id}))))}}}var k=t.mapObject(f.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(k).length?r.send("getGlyphs",{uid:this.uid,stacks:k},(function(t,e){u||(u=t,d=e,T.call(l))})):d={};var S=Object.keys(f.iconDependencies);S.length?r.send("getImages",{icons:S,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){u||(u=t,p=e,T.call(l))})):p={};var E=Object.keys(f.patternDependencies);function T(){if(u)return s(u);if(d&&p&&g){var e=new o(d),n=new t.ImageAtlas(p,g);for(var r in m){var l=m[r];l instanceof t.SymbolBucket?(a(l.layers,this.zoom,i),t.performSymbolLayout(l,d,e.positions,p,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(a(l.layers,this.zoom,i),l.addFeatures(f,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}E.length?r.send("getImages",{icons:E,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){u||(u=t,g=e,T.call(l))})):g={},T.call(this)};var l=function(t,e,n,i){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,n){var i=this,o=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[o]=new r(e);s.abort=this.loadVectorData(e,(function(e,r){if(delete i.loading[o],e||!r)return s.status="done",i.loaded[o]=s,n(e);var l=r.rawData,c={};r.expires&&(c.expires=r.expires),r.cacheControl&&(c.cacheControl=r.cacheControl);var h={};if(a){var u=a.finish();u&&(h.resourceTiming=JSON.parse(JSON.stringify(u)))}s.vectorTile=r.vectorTile,s.parse(r.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:l.slice(0)},i,c,h))})),i.loaded=i.loaded||{},i.loaded[o]=s}))},l.prototype.reloadTile=function(t,e){var n=this,i=this.loaded,o=t.uid,r=this;if(i&&i[o]){var a=i[o];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var o=a.reloadCallback;o&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,n.availableImages,r.actor,o)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},l.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var c=t.window.ImageBitmap,h=function(){this.loaded={}};function u(t,e){if(0!==t.length){d(t[0],e);for(var n=1;n<t.length;n++)d(t[n],!e)}}function d(t,e){for(var n=0,i=0,o=t.length,r=o-1;i<o;r=i++)n+=(t[i][0]-t[r][0])*(t[r][1]+t[i][1]);n>=0!=!!e&&t.reverse()}h.prototype.loadTile=function(e,n){var i=e.uid,o=e.encoding,r=e.rawImageData,a=c&&r instanceof c?this.getImageData(r):r,s=new t.DEMData(i,a,o);this.loaded=this.loaded||{},this.loaded[i]=s,n(null,s)},h.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},h.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};g.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var o=i[n];e.push([new t.Point$1(o[0],o[1])])}return e}for(var r=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],c=0,h=s[a];c<h.length;c+=1){var u=h[c];l.push(new t.Point$1(u[0],u[1]))}r.push(l)}return r},g.prototype.toGeoJSON=function(t,e,n){return p.call(this,t,e,n)};var m=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};m.prototype.feature=function(t){return new g(this._features[t])};var f=t.vectorTile.VectorTileFeature,v=b;function b(t,e){this.options=e||{},this.features=t,this.length=t.length}function y(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}b.prototype.feature=function(t){return new y(this.features[t],this.options.extent)},y.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],o=[],r=0;r<i.length;r++)o.push(new t.Point$1(i[r][0],i[r][1]));this.geometry.push(o)}return this.geometry},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,o=-1/0,r=0;r<t.length;r++)for(var a=t[r],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),o=Math.max(o,l.y)}return[e,i,n,o]},y.prototype.toGeoJSON=f.prototype.toGeoJSON;var _=x,C=v;function x(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,w,t.layers[n])}(e,n),n.finish()}function w(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,I,i);var o=i.keys;for(n=0;n<o.length;n++)e.writeStringField(3,o[n]);var r=i.values;for(n=0;n<r.length;n++)e.writeMessage(4,k,r[n])}function I(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,A,t),e.writeVarintField(3,n.type),e.writeMessage(4,M,n)}function A(t,e){var n=t.feature,i=t.keys,o=t.values,r=t.keycache,a=t.valuecache;for(var s in n.properties){var l=r[s];void 0===l&&(i.push(s),r[s]=l=i.length-1),e.writeVarint(l);var c=n.properties[s],h=typeof c;"string"!==h&&"boolean"!==h&&"number"!==h&&(c=JSON.stringify(c));var u=h+":"+c,d=a[u];void 0===d&&(o.push(c),a[u]=d=o.length-1),e.writeVarint(d)}}function P(t,e){return(e<<3)+(7&t)}function O(t){return t<<1^t>>31}function M(t,e){for(var n=t.loadGeometry(),i=t.type,o=0,r=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===i&&(c=l.length),e.writeVarint(P(1,c));for(var h=3===i?l.length-1:l.length,u=0;u<h;u++){1===u&&1!==i&&e.writeVarint(P(2,h-1));var d=l[u].x-o,p=l[u].y-r;e.writeVarint(O(d)),e.writeVarint(O(p)),o+=d,r+=p}3===i&&e.writeVarint(P(7,1))}}function k(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function S(t,e,n,i){E(t,n,i),E(e,2*n,2*i),E(e,2*n+1,2*i+1)}function E(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function T(t,e,n,i){var o=t-n,r=e-i;return o*o+r*r}_.fromVectorTileJs=x,_.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new v(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return x({layers:n})},_.GeoJSONWrapper=C;var R=function(t){return t[0]},L=function(t){return t[1]},z=function(t,e,n,i,o){void 0===e&&(e=R),void 0===n&&(n=L),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=t;for(var r=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new r(t.length),s=this.coords=new o(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);!function t(e,n,i,o,r,a){if(!(r-o<=i)){var s=o+r>>1;!function t(e,n,i,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,l=i-o+1,c=Math.log(s),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(s-h)/s)*(l-s/2<0?-1:1);t(e,n,i,Math.max(o,Math.floor(i-l*h/s+u)),Math.min(r,Math.floor(i+(s-l)*h/s+u)),a)}var d=n[2*i+a],p=o,g=r;for(S(e,n,o,i),n[2*r+a]>d&&S(e,n,o,r);p<g;){for(S(e,n,p,g),p++,g--;n[2*p+a]<d;)p++;for(;n[2*g+a]>d;)g--}n[2*o+a]===d?S(e,n,o,g):S(e,n,++g,r),g<=i&&(o=g+1),i<=g&&(r=g-1)}}(e,n,s,o,r,a%2),t(e,n,i,o,s-1,a+1),t(e,n,i,s+1,r,a+1)}}(a,s,i,0,a.length-1,0)};z.prototype.range=function(t,e,n,i){return function(t,e,n,i,o,r,a){for(var s,l,c=[0,t.length-1,0],h=[];c.length;){var u=c.pop(),d=c.pop(),p=c.pop();if(d-p<=a)for(var g=p;g<=d;g++)l=e[2*g+1],(s=e[2*g])>=n&&s<=o&&l>=i&&l<=r&&h.push(t[g]);else{var m=Math.floor((p+d)/2);l=e[2*m+1],(s=e[2*m])>=n&&s<=o&&l>=i&&l<=r&&h.push(t[m]);var f=(u+1)%2;(0===u?n<=s:i<=l)&&(c.push(p),c.push(m-1),c.push(f)),(0===u?o>=s:r>=l)&&(c.push(m+1),c.push(d),c.push(f))}}return h}(this.ids,this.coords,t,e,n,i,this.nodeSize)},z.prototype.within=function(t,e,n){return function(t,e,n,i,o,r){for(var a=[0,t.length-1,0],s=[],l=o*o;a.length;){var c=a.pop(),h=a.pop(),u=a.pop();if(h-u<=r)for(var d=u;d<=h;d++)T(e[2*d],e[2*d+1],n,i)<=l&&s.push(t[d]);else{var p=Math.floor((u+h)/2),g=e[2*p],m=e[2*p+1];T(g,m,n,i)<=l&&s.push(t[p]);var f=(c+1)%2;(0===c?n-o<=g:i-o<=m)&&(a.push(u),a.push(p-1),a.push(f)),(0===c?n+o>=g:i+o>=m)&&(a.push(p+1),a.push(h),a.push(f))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var B={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},j=function(t){this.options=G(Object.create(B),t),this.trees=new Array(this.options.maxZoom+1)};function D(t,e,n,i,o){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:o}}function F(t,e){var n=t.geometry.coordinates,i=n[1];return{x:$(n[0]),y:Z(i),zoom:1/0,index:e,parentId:-1}}function V(t){return{type:"Feature",id:t.id,properties:N(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,i}function N(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return G(G({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function $(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function G(t,e){for(var n in e)t[n]=e[n];return t}function W(t){return t.x}function H(t){return t.y}function K(t,e,n,i,o,r){var a=o-n,s=r-i;if(0!==a||0!==s){var l=((t-n)*a+(e-i)*s)/(a*a+s*s);l>1?(n=o,i=r):l>0&&(n+=a*l,i+=s*l)}return(a=t-n)*a+(s=e-i)*s}function U(t,e,n,i){var o={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)X(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)X(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++)X(t,e[i][o])}(o),o}function X(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Y(t,e,n,i){if(e.geometry){var o=e.geometry.coordinates,r=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===r)J(o,s);else if("MultiPoint"===r)for(var c=0;c<o.length;c++)J(o[c],s);else if("LineString"===r)q(o,s,a,!1);else if("MultiLineString"===r){if(n.lineMetrics){for(c=0;c<o.length;c++)q(o[c],s=[],a,!1),t.push(U(l,"LineString",s,e.properties));return}Q(o,s,a,!1)}else if("Polygon"===r)Q(o,s,a,!0);else{if("MultiPolygon"!==r){if("GeometryCollection"===r){for(c=0;c<e.geometry.geometries.length;c++)Y(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<o.length;c++){var h=[];Q(o[c],h,a,!0),s.push(h)}}t.push(U(l,r,s,e.properties))}}function J(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function q(t,e,n,i){for(var o,r,a=0,s=0;s<t.length;s++){var l=tt(t[s][0]),c=et(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=i?(o*c-l*r)/2:Math.sqrt(Math.pow(l-o,2)+Math.pow(c-r,2))),o=l,r=c}var h=e.length-3;e[2]=1,function t(e,n,i,o){for(var r,a=o,s=i-n>>1,l=i-n,c=e[n],h=e[n+1],u=e[i],d=e[i+1],p=n+3;p<i;p+=3){var g=K(e[p],e[p+1],c,h,u,d);if(g>a)r=p,a=g;else if(g===a){var m=Math.abs(p-s);m<l&&(r=p,l=m)}}a>o&&(r-n>3&&t(e,n,r,o),e[r+2]=a,i-r>3&&t(e,r,i,o))}(e,0,h,n),e[h+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Q(t,e,n,i){for(var o=0;o<t.length;o++){var r=[];q(t[o],r,n,i),e.push(r)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,i,o,r,a,s){if(i/=e,r>=(n/=e)&&a<i)return t;if(a<n||r>=i)return null;for(var l=[],c=0;c<t.length;c++){var h=t[c],u=h.geometry,d=h.type,p=0===o?h.minX:h.minY,g=0===o?h.maxX:h.maxY;if(p>=n&&g<i)l.push(h);else if(!(g<n||p>=i)){var m=[];if("Point"===d||"MultiPoint"===d)it(u,m,n,i,o);else if("LineString"===d)ot(u,m,n,i,o,!1,s.lineMetrics);else if("MultiLineString"===d)at(u,m,n,i,o,!1);else if("Polygon"===d)at(u,m,n,i,o,!0);else if("MultiPolygon"===d)for(var f=0;f<u.length;f++){var v=[];at(u[f],v,n,i,o,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(f=0;f<m.length;f++)l.push(U(h.id,d,m[f],h.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(U(h.id,d,m,h.tags))}}}return l.length?l:null}function it(t,e,n,i,o){for(var r=0;r<t.length;r+=3){var a=t[r+o];a>=n&&a<=i&&(e.push(t[r]),e.push(t[r+1]),e.push(t[r+2]))}}function ot(t,e,n,i,o,r,a){for(var s,l,c=rt(t),h=0===o?lt:ct,u=t.start,d=0;d<t.length-3;d+=3){var p=t[d],g=t[d+1],m=t[d+2],f=t[d+3],v=t[d+4],b=0===o?p:g,y=0===o?f:v,_=!1;a&&(s=Math.sqrt(Math.pow(p-f,2)+Math.pow(g-v,2))),b<n?y>n&&(l=h(c,p,g,f,v,n),a&&(c.start=u+s*l)):b>i?y<i&&(l=h(c,p,g,f,v,i),a&&(c.start=u+s*l)):st(c,p,g,m),y<n&&b>=n&&(l=h(c,p,g,f,v,n),_=!0),y>i&&b<=i&&(l=h(c,p,g,f,v,i),_=!0),!r&&_&&(a&&(c.end=u+s*l),e.push(c),c=rt(t)),a&&(u+=s)}var C=t.length-3;p=t[C],g=t[C+1],m=t[C+2],(b=0===o?p:g)>=n&&b<=i&&st(c,p,g,m),C=c.length-3,r&&C>=3&&(c[C]!==c[0]||c[C+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function rt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,i,o,r){for(var a=0;a<t.length;a++)ot(t[a],e,n,i,o,r,!1)}function st(t,e,n,i){t.push(e),t.push(n),t.push(i)}function lt(t,e,n,i,o,r){var a=(r-e)/(i-e);return t.push(r),t.push(n+(o-n)*a),t.push(1),a}function ct(t,e,n,i,o,r){var a=(r-n)/(o-n);return t.push(e+(i-e)*a),t.push(r),t.push(1),a}function ht(t,e){for(var n=[],i=0;i<t.length;i++){var o,r=t[i],a=r.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)o=ut(r.geometry,e);else if("MultiLineString"===a||"Polygon"===a){o=[];for(var s=0;s<r.geometry.length;s++)o.push(ut(r.geometry[s],e))}else if("MultiPolygon"===a)for(o=[],s=0;s<r.geometry.length;s++){for(var l=[],c=0;c<r.geometry[s].length;c++)l.push(ut(r.geometry[s][c],e));o.push(l)}n.push(U(r.id,a,o,r.tags))}return n}function ut(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function dt(t,e){if(t.transformed)return t;var n,i,o,r=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,h=l.type;if(l.geometry=[],1===h)for(i=0;i<c.length;i+=2)l.geometry.push(pt(c[i],c[i+1],e,r,a,s));else for(i=0;i<c.length;i++){var u=[];for(o=0;o<c[i].length;o+=2)u.push(pt(c[i][o],c[i][o+1],e,r,a,s));l.geometry.push(u)}}return t.transformed=!0,t}function pt(t,e,n,i,o,r){return[Math.round(n*(t*i-o)),Math.round(n*(e*i-r))]}function gt(t,e,n,i,o){for(var r=e===o.maxZoom?0:o.tolerance/((1<<e)*o.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,mt(a,t[s],r,o);var l=t[s].minX,c=t[s].minY,h=t[s].maxX,u=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),h>a.maxX&&(a.maxX=h),u>a.maxY&&(a.maxY=u)}return a}function mt(t,e,n,i){var o=e.geometry,r=e.type,a=[];if("Point"===r||"MultiPoint"===r)for(var s=0;s<o.length;s+=3)a.push(o[s]),a.push(o[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===r)ft(a,o,t,n,!1,!1);else if("MultiLineString"===r||"Polygon"===r)for(s=0;s<o.length;s++)ft(a,o[s],t,n,"Polygon"===r,0===s);else if("MultiPolygon"===r)for(var l=0;l<o.length;l++){var c=o[l];for(s=0;s<c.length;s++)ft(a,c[s],t,n,!0,0===s)}if(a.length){var h=e.tags||null;if("LineString"===r&&i.lineMetrics){for(var u in h={},e.tags)h[u]=e.tags[u];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var d={geometry:a,type:"Polygon"===r||"MultiPolygon"===r?3:"LineString"===r||"MultiLineString"===r?2:1,tags:h};null!==e.id&&(d.id=e.id),t.features.push(d)}}function ft(t,e,n,i,o,r){var a=i*i;if(i>0&&e.size<(o?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;o&&function(t,e){for(var n=0,i=0,o=t.length,r=o-2;i<o;r=i,i+=2)n+=(t[i]-t[r])*(t[i+1]+t[r+1]);if(n>0===e)for(i=0,o=t.length;i<o/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[o-2-i],t[i+1]=t[o-1-i],t[o-2-i]=a,t[o-1-i]=s}}(s,r),t.push(s)}}function vt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)Y(n,t.features[i],e,i);else Y(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,o=nt(t,1,-1-n,n,0,-1,2,e),r=nt(t,1,1-n,2+n,0,-1,2,e);return(o||r)&&(i=nt(t,1,-n,1+n,0,-1,2,e)||[],o&&(i=ht(o,1).concat(i)),r&&(i=i.concat(ht(r,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bt(t,e,n){return 32*((1<<t)*n+e)+t}function yt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var o=new m(i.features),r=_(o);0===r.byteOffset&&r.byteLength===r.buffer.byteLength||(r=new Uint8Array(r)),e(null,{vectorTile:o,rawData:r.buffer})}j.prototype.load=function(t){var e=this.options,n=e.log,i=e.minZoom,o=e.maxZoom,r=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(F(t[l],l));this.trees[o+1]=new z(s,W,H,r,Float32Array),n&&console.timeEnd(a);for(var c=o;c>=i;c--){var h=+Date.now();s=this._cluster(s,c),this.trees[c]=new z(s,W,H,r,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-h)}return n&&console.timeEnd("total time"),this},j.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),o=180===t[2]?180:((t[2]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,o=180;else if(n>o){var a=this.getClusters([n,i,180,r],e),s=this.getClusters([-180,i,o,r],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],c=[],h=0,u=l.range($(n),Z(r),$(o),Z(i));h<u.length;h+=1){var d=l.points[u[h]];c.push(d.numPoints?V(d):this.points[d.index])}return c},j.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",o=this.trees[n];if(!o)throw new Error(i);var r=o.points[e];if(!r)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],l=0,c=o.within(r.x,r.y,a);l<c.length;l+=1){var h=o.points[c[l]];h.parentId===t&&s.push(h.numPoints?V(h):this.points[h.index])}if(0===s.length)throw new Error(i);return s},j.prototype.getLeaves=function(t,e,n){var i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i},j.prototype.getTile=function(t,e,n){var i=this.trees[this._limitZoom(t)],o=Math.pow(2,t),r=this.options,a=r.radius/r.extent,s=(n-a)/o,l=(n+1+a)/o,c={features:[]};return this._addTileFeatures(i.range((e-a)/o,s,(e+1+a)/o,l),i.points,e,n,o,c),0===e&&this._addTileFeatures(i.range(1-a/o,s,1,l),i.points,o,n,o,c),e===o-1&&this._addTileFeatures(i.range(0,s,a/o,l),i.points,-1,n,o,c),c.features.length?c:null},j.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},j.prototype._appendLeaves=function(t,e,n,i,o){for(var r=0,a=this.getChildren(e);r<a.length;r+=1){var s=a[r],l=s.properties;if(l&&l.cluster?o+l.point_count<=i?o+=l.point_count:o=this._appendLeaves(t,l.cluster_id,n,i,o):o<i?o++:t.push(s),t.length===n)break}return o},j.prototype._addTileFeatures=function(t,e,n,i,o,r){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],c=l.numPoints,h={type:1,geometry:[[Math.round(this.options.extent*(l.x*o-n)),Math.round(this.options.extent*(l.y*o-i))]],tags:c?N(l):this.points[l.index].properties},u=void 0;c?u=l.id:this.options.generateId?u=l.index:this.points[l.index].id&&(u=this.points[l.index].id),void 0!==u&&(h.id=u),r.features.push(h)}},j.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},j.prototype._cluster=function(t,e){for(var n=[],i=this.options,o=i.reduce,r=i.minPoints,a=i.radius/(i.extent*Math.pow(2,e)),s=0;s<t.length;s++){var l=t[s];if(!(l.zoom<=e)){l.zoom=e;for(var c=this.trees[e+1],h=c.within(l.x,l.y,a),u=l.numPoints||1,d=u,p=0,g=h;p<g.length;p+=1){var m=c.points[g[p]];m.zoom>e&&(d+=m.numPoints||1)}if(d>=r){for(var f=l.x*u,v=l.y*u,b=o&&u>1?this._map(l,!0):null,y=(s<<5)+(e+1)+this.points.length,_=0,C=h;_<C.length;_+=1){var x=c.points[C[_]];if(!(x.zoom<=e)){x.zoom=e;var w=x.numPoints||1;f+=x.x*w,v+=x.y*w,x.parentId=y,o&&(b||(b=this._map(l,!0)),o(b,this._map(x)))}}l.parentId=y,n.push(D(f/d,v/d,y,d,b))}else if(n.push(l),d>1)for(var I=0,A=h;I<A.length;I+=1){var P=c.points[A[I]];P.zoom<=e||(P.zoom=e,n.push(P))}}}return n},j.prototype._getOriginId=function(t){return t-this.points.length>>5},j.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},j.prototype._map=function(t,e){if(t.numPoints)return e?G({},t.properties):t.properties;var n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?G({},i):i},vt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vt.prototype.splitTile=function(t,e,n,i,o,r,a){for(var s=[t,e,n,i],l=this.options,c=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var h=1<<e,u=bt(e,n,i),d=this.tiles[u];if(!d&&(c>1&&console.time("creation"),d=this.tiles[u]=gt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,o){if(e===l.maxZoom||e===o)continue;var g=1<<o-e;if(n!==Math.floor(r/g)||i!==Math.floor(a/g))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,f,v,b,y,_,C=.5*l.buffer/l.extent,x=.5-C,w=.5+C,I=1+C;m=f=v=b=null,y=nt(t,h,n-C,n+w,0,d.minX,d.maxX,l),_=nt(t,h,n+x,n+I,0,d.minX,d.maxX,l),t=null,y&&(m=nt(y,h,i-C,i+w,1,d.minY,d.maxY,l),f=nt(y,h,i+x,i+I,1,d.minY,d.maxY,l),y=null),_&&(v=nt(_,h,i-C,i+w,1,d.minY,d.maxY,l),b=nt(_,h,i+x,i+I,1,d.minY,d.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(f||[],e+1,2*n,2*i+1),s.push(v||[],e+1,2*n+1,2*i),s.push(b||[],e+1,2*n+1,2*i+1)}}},vt.prototype.getTile=function(t,e,n){var i=this.options,o=i.extent,r=i.debug;if(t<0||t>24)return null;var a=1<<t,s=bt(t,e=(e%a+a)%a,n);if(this.tiles[s])return dt(this.tiles[s],o);r>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,h=e,u=n;!l&&c>0;)c--,h=Math.floor(h/2),u=Math.floor(u/2),l=this.tiles[bt(c,h,u)];return l&&l.source?(r>1&&console.log("found parent tile z%d-%d-%d",c,h,u),r>1&&console.time("drilling down"),this.splitTile(l.source,c,h,u,t,e,n),r>1&&console.timeEnd("drilling down"),this.tiles[s]?dt(this.tiles[s],o):null):null};var _t=function(e){function n(t,n,i,o){e.call(this,t,n,i,yt),o&&(this.loadGeoJSON=o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(function(r,a){if(r||!a)return n(r);if("object"!=typeof a)return n(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function t(e,n){var i,o=e&&e.type;if("FeatureCollection"===o)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===o)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===o)t(e.geometry,n);else if("Polygon"===o)u(e.coordinates,n);else if("MultiPolygon"===o)for(i=0;i<e.coordinates.length;i++)u(e.coordinates[i],n);return e}(a,!0);try{if(i.filter){var s=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var l=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:l}}e._geoJSONIndex=i.cluster?new j(function(e){var n=e.superclusterOptions,i=e.clusterProperties;if(!i||!n)return n;for(var o={},r={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i),c=0,h=l;c<h.length;c+=1){var u=h[c],d=i[u],p=d[0],g=t.createExpression(d[1]),m=t.createExpression("string"==typeof p?[p,["accumulated"],["get",u]]:p);o[u]=g.value,r[u]=m.value}return n.map=function(t){s.properties=t;for(var e={},n=0,i=l;n<i.length;n+=1){var r=i[n];e[r]=o[r].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,i=l;n<i.length;n+=1){var o=i[n];a.accumulated=t[o],t[o]=r[o].evaluate(a,s)}},n}(i)).load(a.features):function(t,e){return new vt(t,e)}(a,i.geojsonVtOptions)}catch(r){return n(r)}e.loaded={};var c={};if(o){var h=o.finish();h&&(c.resourceTiming={},c.resourceTiming[i.source]=JSON.parse(JSON.stringify(h)))}n(null,c)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(l),Ct=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:_t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(t,e){this.referrer=e},Ct.prototype.setImages=function(t,e,n){for(var i in this.availableImages[t]=e,this.workerSources[t]){var o=this.workerSources[t][i];for(var r in o)o[r].availableImages=e}n()},Ct.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Ct.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Ct.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Ct.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Ct.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Ct.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Ct.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Ct.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ct.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},Ct.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Ct.prototype.syncRTLPluginState=function(e,n,i){try{t.plugin.setState(n);var o=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=o){this.self.importScripts(o);var r=t.plugin.isParsed();i(r?void 0:new Error("RTL Text Plugin failed to import scripts from "+o),r)}}catch(t){i(t.toString())}},Ct.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Ct.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},Ct.prototype.getWorkerSource=function(t,e,n){var i=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,o){i.actor.send(e,n,o,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},Ct.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new h),this.demWorkerSources[t][e]},Ct.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ct(self)),Ct})),i(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[n=t&&t.failIfMajorPerformanceCaveat]&&(i[n]=function(t){var n=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t);if(!n)return!1;var i=n.createShader(n.VERTEX_SHADER);return!(!i||n.isContextLost())&&(n.shaderSource(i,"void main() {}"),n.compileShader(i),!0===n.getShaderParameter(i,n.COMPILE_STATUS))}(n)),i[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,i){var o=t.window.document.createElement(e);return void 0!==n&&(o.className=n),i&&i.appendChild(o),o},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},i=t.window.document&&t.window.document.documentElement.style;function o(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var r,a=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){i&&a&&(r=i[a],i[a]="none")},n.enableDrag=function(){i&&a&&(i[a]=r)};var s=o(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}n.addEventListener=function(t,e,n,i){void 0===i&&(i={}),t.addEventListener(e,n,"passive"in i&&l?i:i.capture)},n.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),t.removeEventListener(e,n,"passive"in i&&l?i:i.capture)};var h=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};function u(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",h,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",h,!0)}),0)},n.mousePos=function(e,n){var i=e.getBoundingClientRect();return new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},n.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),o=[],r=0;r<n.length;r++)o.push(new t.Point(n[r].clientX-i.left-e.clientLeft,n[r].clientY-i.top-e.clientTop));return o},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var d=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,i=0,o=t;i<o.length;i+=1){var r=o[i];if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,o=t;i<o.length;i+=1)this.images[o[i]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,i)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{var o={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(o,i);this.patterns[e]={bin:o,position:r}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),o=i.w,r=i.h,a=this.atlasImage;for(var s in a.resize({width:o||1,height:r||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,h=l.y+1,u=this.images[s].data,d=u.width,p=u.height;t.RGBAImage.copy(u,a,{x:0,y:0},{x:c,y:h},{width:d,height:p}),t.RGBAImage.copy(u,a,{x:0,y:p-1},{x:c,y:h-1},{width:d,height:1}),t.RGBAImage.copy(u,a,{x:0,y:0},{x:c,y:h+p},{width:d,height:1}),t.RGBAImage.copy(u,a,{x:d-1,y:0},{x:c-1,y:h},{width:1,height:p}),t.RGBAImage.copy(u,a,{x:0,y:0},{x:c+d,y:h},{width:1,height:p})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var o=this.images[i];u(o)&&this.updateImage(i,o)}}},n}(t.Evented),p=f,g=f,m=1e20;function f(t,e,n,i,o,r){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=o||"sans-serif",this.fontWeight=r||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(t,e,n,i,o,r,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)i[l]=t[l*e+s];for(b(i,o,r,a,n),l=0;l<n;l++)t[l*e+s]=o[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)i[s]=t[l*e+s];for(b(i,o,r,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(o[s])}}function b(t,e,n,i,o){n[0]=0,i[0]=-m,i[1]=+m;for(var r=1,a=0;r<o;r++){for(var s=(t[r]+r*r-(t[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);s<=i[a];)a--,s=(t[r]+r*r-(t[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);n[++a]=r,i[a]=s,i[a+1]=+m}for(r=0,a=0;r<o;r++){for(;i[a+1]<r;)a++;e[r]=(r-n[a])*(r-n[a])+t[n[a]]}}f.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=e.data[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?m:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?m:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)n[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return n},p.default=g;var y=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,n){var i=this,o=[];for(var r in e)for(var a=0,s=e[r];a<s.length;a+=1)o.push({stack:r,id:s[a]});t.asyncAll(o,(function(t,e){var n=t.stack,o=t.id,r=i.entries[n];r||(r=i.entries[n]={glyphs:{},requests:{},ranges:{}});var a=r.glyphs[o];if(void 0===a){if(a=i._tinySDF(r,n,o))return r.glyphs[o]=a,void e(null,{stack:n,id:o,glyph:a});var s=Math.floor(o/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(r.ranges[s])e(null,{stack:n,id:o,glyph:a});else{var l=r.requests[s];l||(l=r.requests[s]=[],y.loadGlyphRange(n,s,i.url,i.requestManager,(function(t,e){if(e){for(var n in e)i._doesCharSupportLocalGlyph(+n)||(r.glyphs[+n]=e[+n]);r.ranges[s]=!0}for(var o=0,a=l;o<a.length;o+=1)(0,a[o])(t,e);delete r.requests[s]}))),l.push((function(t,i){t?e(t):i&&e(null,{stack:n,id:o,glyph:i[o]||null})}))}}else e(null,{stack:n,id:o,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o],s=a.stack,l=a.id,c=a.glyph;(i[s]||(i[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}n(null,i)}}))},y.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},y.prototype._tinySDF=function(e,n,i){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(i)){var r=e.tinySDF;if(!r){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),r=e.tinySDF=new y.TinySDF(24,3,8,.25,o,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},r.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,n,i,o,r){var a=256*n,s=a+255,l=o.transformRequest(o.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,n){if(e)r(e);else if(n){for(var i={},o=0,a=t.parseGlyphPBF(n);o<a.length;o+=1){var s=a[o];i[s.id]=s}r(null,i)}}))},y.TinySDF=p;var _=function(){this.specification=t.styleSpec.light.position};_.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},_.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var C=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new _,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),x=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(C),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var i in e){var o=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),o):this._transitionable.setValue(i,o)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),w=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};w.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},w.prototype.getDashRanges=function(t,e,n){var i=[],o=t.length%2==1?-t[t.length-1]*n:0,r=t[0]*n,a=!0;i.push({left:o,right:r,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var c=t[l];i.push({left:o=s*n,right:r=(s+=c)*n,isDash:a=!a,zeroLength:0===c})}return i},w.prototype.addRoundDash=function(t,e,n){for(var i=e/2,o=-n;o<=n;o++)for(var r=this.width*(this.nextRow+n+o),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var c=Math.abs(l-s.left),h=Math.abs(l-s.right),u=Math.min(c,h),d=void 0,p=o/n*(i+1);if(s.isDash){var g=i-Math.abs(p);d=Math.sqrt(u*u+g*g)}else d=i-Math.sqrt(u*u+p*p);this.data[r+l]=Math.max(0,Math.min(255,d+128))}},w.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}var o=t[0],r=t[t.length-1];o.isDash===r.isDash&&(o.left=r.left-this.width,r.right=o.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],c=0;c<this.width;c++){c/l.right>1&&(l=t[++s]);var h=Math.abs(c-l.left),u=Math.abs(c-l.right),d=Math.min(h,u);this.data[a+c]=Math.max(0,Math.min(255,(l.isDash?d:-d)+128))}},w.prototype.addDash=function(e,n){var i=n?7:0,o=2*i+1;if(this.nextRow+o>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var r=0,a=0;a<e.length;a++)r+=e[a];if(0!==r){var s=this.width/r,l=this.getDashRanges(e,this.width,s);n?this.addRoundDash(l,s,i):this.addRegularDash(l)}var c={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:r};return this.nextRow+=o,this.dirty=!0,c},w.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var I=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var o=this.workerPool.acquire(this.id),r=0;r<o.length;r++){var a=new e.Actor(o[r],i,this.id);a.name="Worker "+r,this.actors.push(a)}};function A(e,n,i){var o=function(o,r){if(o)return i(o);if(r){var a=t.pick(t.extend(r,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(a.vectorLayers=r.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),i(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),o):t.browser.frame((function(){return o(null,e)}))}I.prototype.broadcast=function(e,n,i){t.asyncAll(this.actors,(function(t,i){t.send(e,n,i)}),i=i||function(){})},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},I.Actor=t.Actor;var P=function(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24};P.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},P.prototype.contains=function(e){var n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),o=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),r=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<r&&e.y>=o&&e.y<a};var O=function(e){function n(n,i,o,r){if(e.call(this),this.id=n,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new P(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},n.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function r(i,o){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}o.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",o,r.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",o,r.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),M=function(e){function n(n,i,o,r){e.call(this),this.id=n,this.dispatcher=o,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new P(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var i=this,o=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(o,t.ResourceType.Tile),(function(o,r){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(o)e.state="errored",n(o);else if(r){i.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(a,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),k=function(e){function n(n,i,o,r){e.call(this,n,i,o,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function o(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,r){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=t.window.ImageBitmap&&r instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?r:t.browser.getImageData(r,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,o.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),o=(n.x-1+i)%i,r=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,r,n.z,o,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,r,n.z,o,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,r,n.z,o,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(M),S=function(e){function n(n,i,o,r){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(r),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var i=t.extend({},this.workerOptions),o=this._data;"string"==typeof o?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(o),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(o),this.actor.send(this.type+".loadData",i,(function(t,o){n._removed||o&&o.abandoned||(n._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[n.id]&&(n._resourceTiming=o.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:i.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var i=this,o=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(o,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,r){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,i.map.painter,"reloadTile"===o),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),E=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),T=function(e){function n(t,n,i,o){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(o,r){i._loaded=!0,o?i.fire(new t.ErrorEvent(o)):r&&(i.image=r,e&&(i.coordinates=e),n&&n(),i._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,i=1/0,o=-1/0,r=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];n=Math.min(n,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),r=Math.max(r,l.y)}var c=Math.max(o-n,r-i),h=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),u=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((n+o)/2*u),Math.floor((i+r)/2*u))}(i),this.minzoom=this.maxzoom=this.tileID.z;var o=i.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),R=function(e){function n(t,n,i,o){e.call(this,t,n,i,o),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var i=0,o=n.urls;i<o.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(o[i],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,i){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(T),L=function(e){function n(n,i,o,r){e.call(this,n,i,o,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(T),z={vector:O,raster:M,"raster-dem":k,geojson:S,video:R,image:T,canvas:L};function B(e,n){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function j(t,e,n,i,o,r){var a=function(t,e,n){if(t)for(var i=0,o=t;i<o.length;i+=1){var r=e[o[i]];if(r&&r.source===n&&"fill-extrusion"===r.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(o&&o.layers,e,t.id),s=r.maxPitchScaleFactor(),l=t.tilesIn(i,s,a);l.sort(D);for(var c=[],h=0,u=l;h<u.length;h+=1){var d=u[h];c.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(e,n,t._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,o,r,s,B(t.transform,d.tileID))})}var p=function(t){for(var e={},n={},i=0,o=t;i<o.length;i+=1){var r=o[i],a=r.queryResults,s=r.wrappedTileID,l=n[s]=n[s]||{};for(var c in a)for(var h=a[c],u=l[c]=l[c]||{},d=e[c]=e[c]||[],p=0,g=h;p<g.length;p+=1){var m=g[p];u[m.featureIndex]||(u[m.featureIndex]=!0,d.push(m))}}return e}(c);for(var g in p)p[g].forEach((function(e){var n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return p}function D(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}var F=function(t,e){this.max=t,this.onRemove=e,this.reset()};F.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},F.prototype.add=function(t,e,n){var i=this,o=t.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((function(){i.remove(t,r)}),n)),this.data[o].push(r),this.order.push(o),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},F.prototype.has=function(t){return t.wrapped().key in this.data},F.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},F.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},F.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},F.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},F.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),o=this.data[n][i];return this.data[n].splice(i,1),o.timeout&&clearTimeout(o.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(o.value),this.order.splice(this.order.indexOf(n),1),this},F.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},F.prototype.filter=function(t){var e=[];for(var n in this.data)for(var i=0,o=this.data[n];i<o.length;i+=1){var r=o[i];t(r.value)||e.push(r)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var V=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},$=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var o=t.gl;this.buffer=o.createBuffer(),t.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};$.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},$.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},$.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},$.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var o=this.attributes[i],r=e.attributes[o.name];void 0!==r&&t.vertexAttribPointer(r,o.components,t[N[o.type]],!1,this.itemSize,o.offset+this.itemSize*(n||0))}},$.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Z=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Z.prototype.get=function(){return this.current},Z.prototype.set=function(t){},Z.prototype.getDefault=function(){return this.default},Z.prototype.setDefault=function(){this.set(this.default)};var G=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Z),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Z),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Z),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Z),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Z),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Z),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Z),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Z),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Z),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Z),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Z),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),ot=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Z),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Z),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Z),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Z),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Z),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Z),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Z),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Z),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Z),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Z),vt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Z),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Z),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),Ct=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Z),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(Ct),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Ct),It=function(t,e,n,i){this.context=t,this.width=e,this.height=n;var o=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new xt(t,o),i&&(this.depthAttachment=new wt(t,o))};It.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var At=function(t,e,n){this.func=t,this.mask=e,this.range=n};At.ReadOnly=!1,At.ReadWrite=!0,At.disabled=new At(519,At.ReadOnly,[0,1]);var Pt=function(t,e,n,i,o,r){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=o,this.pass=r};Pt.disabled=new Pt({func:519,mask:0},0,0,7680,7680,7680);var Ot=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ot.disabled=new Ot(Ot.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ot.unblended=new Ot(Ot.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ot.alphaBlended=new Ot([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Mt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Mt.disabled=new Mt(!1,1029,2305),Mt.backCCW=new Mt(!0,1029,2305);var kt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new W(this),this.clearStencil=new H(this),this.colorMask=new K(this),this.depthMask=new U(this),this.stencilMask=new X(this),this.stencilFunc=new Y(this),this.stencilOp=new J(this),this.stencilTest=new q(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new it(this),this.blendColor=new ot(this),this.blendEquation=new rt(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ct(this),this.activeTexture=new ht(this),this.viewport=new ut(this),this.bindFramebuffer=new dt(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new gt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new vt(this),this.pixelStoreUnpack=new bt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(t,e){return new V(this,t,e)},kt.prototype.createVertexBuffer=function(t,e,n){return new $(this,t,e,n)},kt.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,o=i.createRenderbuffer();return this.bindRenderbuffer.set(o),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),o},kt.prototype.createFramebuffer=function(t,e,n){return new It(this,t,e,n)},kt.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,o=0;e&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(o)},kt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},kt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Ot.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var St=function(e){function n(n,i,o){var r=this;e.call(this),this.id=n,this.dispatcher=o,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))})),this.on("error",(function(){r._sourceErrored=!0})),this._source=function(e,n,i,o){var r=new z[n.type](e,n,i,o);if(r.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+r.id);return t.bindAll(["load","abort","unload","serialize","prepare"],r),r}(n,i,o,this),this._tiles={},this._cache=new F(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Et).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var o in this._tiles)this._isIdRenderable(o,e)&&i.push(this._tiles[o]);return e?i.sort((function(e,i){var o=e.tileID,r=i.tileID,a=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle),s=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle);return o.overscaledZ-r.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Et).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,o){if(o)return e.state="errored",void(404!==o.status?this._source.fire(new t.ErrorEvent(o,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);r(t,o),r(o,t)}}function r(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,o=Math.pow(2,t.tileID.canonical.z),r=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+o)?n+=o:1===Math.abs(n-o)&&(n-=o)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[r]&&(t.neighboringTiles[r].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var o in this._tiles){var r=this._tiles[o];if(!(i[o]||!r.hasData()||r.tileID.overscaledZ<=e||r.tileID.overscaledZ>n)){for(var a=r.tileID;r&&r.tileID.overscaledZ>e+1;){var s=r.tileID.scaledTo(r.tileID.overscaledZ-1);(r=this._tiles[s.key])&&r.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){i[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var i=t.overscaledZ-1;i>=e;i--){var o=t.scaledTo(i),r=this._getLoadedTile(o);if(r)return r}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,i=Math.floor(e*n*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),n[o.tileID.key]=o}for(var r in this._tiles=n,this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var o;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(o=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter((function(t){return i._source.hasTile(t)})))):o=[];var r=e.coveringZoomLevel(this._source),a=Math.max(r-n.maxOverzooming,this._source.minzoom),s=Math.max(r+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(o,r);if(Tt(this._source.type)){for(var c={},h={},u=0,d=Object.keys(l);u<d.length;u+=1){var p=d[u],g=l[p],m=this._tiles[p];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var f=this.findLoadedParent(g,a);f&&(this._addTile(f.tileID),c[f.tileID.key]=f.tileID),h[p]=g}}for(var v in this._retainLoadedChildren(h,r,s,l),c)l[v]||(this._coveredTiles[v]=!0,l[v]=c[v])}for(var b in l)this._tiles[b].clearFadeHold();for(var y=0,_=t.keysDifference(this._tiles,l);y<_.length;y+=1){var C=_[y],x=this._tiles[C];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(C)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},o={},r=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var h=c[l],u=this._addTile(h);i[h.key]=h,u.hasData()||e<this._source.maxzoom&&(s[h.key]=h)}this._retainLoadedChildren(s,e,a,i);for(var d=0,p=t;d<p.length;d+=1){var g=p[d],m=this._tiles[g.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var f=g.children(this._source.maxzoom)[0],v=this.getTile(f);if(v&&v.hasData()){i[f.key]=f;continue}}else{var b=g.children(this._source.maxzoom);if(i[b[0].key]&&i[b[1].key]&&i[b[2].key]&&i[b[3].key])continue}for(var y=m.wasRequested(),_=g.overscaledZ-1;_>=r;--_){var C=g.scaledTo(_);if(o[C.key])break;if(o[C.key]=!0,!(m=this.getTile(C))&&y&&(m=this._addTile(C)),m&&(i[C.key]=C,y=m.wasRequested(),m.hasData()))break}}}return i},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,i=this._tiles[t].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);var o=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(o))break;i=o}for(var r=0,a=e;r<a.length;r+=1)this._loadedParentTiles[a[r]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,i){var o=this,r=[],a=this.transform;if(!a)return r;for(var s=i?a.getCameraQueryGeometry(e):e,l=e.map((function(t){return a.pointCoordinate(t)})),c=s.map((function(t){return a.pointCoordinate(t)})),h=this.getIds(),u=1/0,d=1/0,p=-1/0,g=-1/0,m=0,f=c;m<f.length;m+=1){var v=f[m];u=Math.min(u,v.x),d=Math.min(d,v.y),p=Math.max(p,v.x),g=Math.max(g,v.y)}for(var b=function(e){var i=o._tiles[h[e]];if(!i.holdingForFade()){var s=i.tileID,m=Math.pow(2,a.zoom-i.tileID.overscaledZ),f=n*i.queryPadding*t.EXTENT/i.tileSize/m,v=[s.getTilePoint(new t.MercatorCoordinate(u,d)),s.getTilePoint(new t.MercatorCoordinate(p,g))];if(v[0].x-f<t.EXTENT&&v[0].y-f<t.EXTENT&&v[1].x+f>=0&&v[1].y+f>=0){var b=l.map((function(t){return s.getTilePoint(t)})),y=c.map((function(t){return s.getTilePoint(t)}));r.push({tile:i,tileID:s,queryGeometry:b,cameraQueryGeometry:y,scale:m})}}},y=0;y<h.length;y++)b(y);return r},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,o=n;i<o.length;i+=1){var r=o[i];r.posMatrix=this.transform.calculatePosMatrix(r.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Tt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var i=this._tiles[t];i&&i.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function Et(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Tt(t){return"raster"===t||"image"===t||"video"===t}function Rt(){return new t.window.Worker(Xo.workerUrl)}St.maxOverzooming=10,St.maxUnderzooming=3;var Lt="mapboxgl_preloaded_worker_pool",zt=function(){this.active={}};zt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<zt.workerCount;)this.workers.push(new Rt);return this.active[t]=!0,this.workers.slice()},zt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},zt.prototype.isPreloaded=function(){return!!this.active[Lt]},zt.prototype.numActive=function(){return Object.keys(this.active).length};var Bt,jt=Math.floor(t.browser.hardwareConcurrency/2);function Dt(){return Bt||(Bt=new zt),Bt}function Ft(e,n){var i={};for(var o in e)"ref"!==o&&(i[o]=e[o]);return t.refProperties.forEach((function(t){t in n&&(i[t]=n[t])})),i}function Vt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Ft(t[i],e[t[i].ref]));return t}zt.workerCount=Math.max(Math.min(jt,6),1);var Nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $t(t,e,n){n.push({command:Nt.addSource,args:[t,e[t]]})}function Zt(t,e,n){e.push({command:Nt.removeSource,args:[t]}),n[t]=!0}function Gt(t,e,n,i){Zt(t,n,i),$t(t,e,n)}function Wt(e,n,i){var o;for(o in e[i])if(e[i].hasOwnProperty(o)&&"data"!==o&&!t.deepEqual(e[i][o],n[i][o]))return!1;for(o in n[i])if(n[i].hasOwnProperty(o)&&"data"!==o&&!t.deepEqual(e[i][o],n[i][o]))return!1;return!0}function Ht(e,n,i,o,r,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[o,s,n[s],r]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[o,s,n[s],r]}))}function Kt(t){return t.id}function Ut(t,e){return t[e.id]=e,t}var Xt=function(t,e){this.reset(t,e)};Xt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,i=this._distances[n],o=e*this.paddedLength+this.padding;i<o&&n<this._distances.length;)i=this._distances[++n];var r=n-1,a=this._distances[r],s=i-a,l=s>0?(o-a)/s:0;return this.points[r].mult(1-l).add(this.points[n].mult(l))};var Yt=function(t,e,n){var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var r=0;r<this.xCellCount*this.yCellCount;r++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Jt(e,n,i,o,r){var a=t.create();return n?(t.scale(a,a,[1/r,1/r,1]),i||t.rotateZ(a,a,o.angle)):t.multiply(a,o.labelPlaneMatrix,e),a}function qt(e,n,i,o,r){if(n){var a=t.clone(e);return t.scale(a,a,[r,r,1]),i||t.rotateZ(a,a,-o.angle),a}return o.glCoordMatrix}function Qt(e,n){var i=[e.x,e.y,0,1];he(i,i,n);var o=i[3];return{point:new t.Point(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function te(t,e){return.5+t/e*.5}function ee(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function ne(e,n,i,o,r,a,s,l){var c=o?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(c,i.transform.zoom),u=[256/i.width*2+1,256/i.height*2+1],d=o?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();for(var p=e.lineVertexArray,g=o?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,f=!1,v=0;v<g.length;v++){var b=g.get(v);if(b.hidden||b.writingMode===t.WritingMode.vertical&&!f)ce(b.numGlyphs,d);else{f=!1;var y=[b.anchorX,b.anchorY,0,1];if(t.transformMat4(y,y,n),ee(y,u)){var _=te(i.transform.cameraToCenterDistance,y[3]),C=t.evaluateSizeForFeature(c,h,b),x=s?C/_:C*_,w=new t.Point(b.anchorX,b.anchorY),I=Qt(w,r).point,A={},P=re(b,x,!1,l,n,r,a,e.glyphOffsetArray,p,d,I,w,A,m);f=P.useVertical,(P.notEnoughRoom||f||P.needsFlipping&&re(b,x,!0,l,n,r,a,e.glyphOffsetArray,p,d,I,w,A,m).notEnoughRoom)&&ce(b.numGlyphs,d)}else ce(b.numGlyphs,d)}}o?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function ie(t,e,n,i,o,r,a,s,l,c,h){var u=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(u-1),f=se(t*g,n,i,o,r,a,s.segment,d,p,l,c,h);if(!f)return null;var v=se(t*m,n,i,o,r,a,s.segment,d,p,l,c,h);return v?{first:f,last:v}:null}function oe(e,n,i,o){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*o?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function re(e,n,i,o,r,a,s,l,c,h,u,d,p,g){var m,f=n/24,v=e.lineOffsetX*f,b=e.lineOffsetY*f;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,C=e.lineStartIndex+e.lineLength,x=ie(f,l,v,b,i,u,d,e,c,a,p);if(!x)return{notEnoughRoom:!0};var w=Qt(x.first.point,s).point,I=Qt(x.last.point,s).point;if(o&&!i){var A=oe(e.writingMode,w,I,g);if(A)return A}m=[x.first];for(var P=e.glyphStartIndex+1;P<y-1;P++)m.push(se(f*l.getoffsetX(P),v,b,i,u,d,e.segment,_,C,c,a,p));m.push(x.last)}else{if(o&&!i){var O=Qt(d,r).point,M=e.lineStartIndex+e.segment+1,k=new t.Point(c.getx(M),c.gety(M)),S=Qt(k,r),E=S.signedDistanceFromCamera>0?S.point:ae(d,k,O,1,r),T=oe(e.writingMode,O,E,g);if(T)return T}var R=se(f*l.getoffsetX(e.glyphStartIndex),v,b,i,u,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p);if(!R)return{notEnoughRoom:!0};m=[R]}for(var L=0,z=m;L<z.length;L+=1){var B=z[L];t.addDynamicAttributes(h,B.point,B.angle)}return{}}function ae(t,e,n,i,o){var r=Qt(t.add(t.sub(e)._unit()),o).point,a=n.sub(r);return n.add(a._mult(i/a.mag()))}function se(e,n,i,o,r,a,s,l,c,h,u,d){var p=o?e-n:e+n,g=p>0?1:-1,m=0;o&&(g*=-1,m=Math.PI),g<0&&(m+=Math.PI);for(var f=g>0?l+s:l+s+1,v=r,b=r,y=0,_=0,C=Math.abs(p),x=[];y+_<=C;){if((f+=g)<l||f>=c)return null;if(b=v,x.push(v),void 0===(v=d[f])){var w=new t.Point(h.getx(f),h.gety(f)),I=Qt(w,u);if(I.signedDistanceFromCamera>0)v=d[f]=I.point;else{var A=f-g;v=ae(0===y?a:new t.Point(h.getx(A),h.gety(A)),w,b,C-y+1,u)}}y+=_,_=b.dist(v)}var P=(C-y)/_,O=v.sub(b),M=O.mult(P)._add(b);M._add(O._unit()._perp()._mult(i*g));var k=m+Math.atan2(v.y-b.y,v.x-b.x);return x.push(M),{point:M,angle:k,path:x}}Yt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yt.prototype.insert=function(t,e,n,i,o){this._forEachCell(e,n,i,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o)},Yt.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Yt.prototype._insertBoxCell=function(t,e,n,i,o,r){this.boxCells[o].push(r)},Yt.prototype._insertCircleCell=function(t,e,n,i,o,r){this.circleCells[o].push(r)},Yt.prototype._query=function(t,e,n,i,o,r){if(n<0||t>this.width||i<0||e>this.height)return!o&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(o)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],h=this.circles[3*l+1],u=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:c-u,y1:h-u,x2:c+u,y2:h+u})}return r?a.filter(r):a}return this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:o,seenUids:{box:{},circle:{}}},r),o?a.length>0:a},Yt.prototype._queryCircle=function(t,e,n,i,o){var r=t-n,a=t+n,s=e-n,l=e+n;if(a<0||r>this.width||l<0||s>this.height)return!i&&[];var c=[];return this._forEachCell(r,s,a,l,this._queryCellCircle,c,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},o),i?c.length>0:c},Yt.prototype.query=function(t,e,n,i,o){return this._query(t,e,n,i,!1,o)},Yt.prototype.hitTest=function(t,e,n,i,o){return this._query(t,e,n,i,!0,o)},Yt.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Yt.prototype._queryCell=function(t,e,n,i,o,r,a,s){var l=a.seenUids,c=this.boxCells[o];if(null!==c)for(var h=this.bboxes,u=0,d=c;u<d.length;u+=1){var p=d[u];if(!l.box[p]){l.box[p]=!0;var g=4*p;if(t<=h[g+2]&&e<=h[g+3]&&n>=h[g+0]&&i>=h[g+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return r.push(!0),!0;r.push({key:this.boxKeys[p],x1:h[g],y1:h[g+1],x2:h[g+2],y2:h[g+3]})}}}var m=this.circleCells[o];if(null!==m)for(var f=this.circles,v=0,b=m;v<b.length;v+=1){var y=b[v];if(!l.circle[y]){l.circle[y]=!0;var _=3*y;if(this._circleAndRectCollide(f[_],f[_+1],f[_+2],t,e,n,i)&&(!s||s(this.circleKeys[y]))){if(a.hitTest)return r.push(!0),!0;var C=f[_],x=f[_+1],w=f[_+2];r.push({key:this.circleKeys[y],x1:C-w,y1:x-w,x2:C+w,y2:x+w})}}}},Yt.prototype._queryCellCircle=function(t,e,n,i,o,r,a,s){var l=a.circle,c=a.seenUids,h=this.boxCells[o];if(null!==h)for(var u=this.bboxes,d=0,p=h;d<p.length;d+=1){var g=p[d];if(!c.box[g]){c.box[g]=!0;var m=4*g;if(this._circleAndRectCollide(l.x,l.y,l.radius,u[m+0],u[m+1],u[m+2],u[m+3])&&(!s||s(this.boxKeys[g])))return r.push(!0),!0}}var f=this.circleCells[o];if(null!==f)for(var v=this.circles,b=0,y=f;b<y.length;b+=1){var _=y[b];if(!c.circle[_]){c.circle[_]=!0;var C=3*_;if(this._circlesCollide(v[C],v[C+1],v[C+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return r.push(!0),!0}}},Yt.prototype._forEachCell=function(t,e,n,i,o,r,a,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),h=this._convertToXCellCoord(n),u=this._convertToYCellCoord(i),d=l;d<=h;d++)for(var p=c;p<=u;p++)if(o.call(this,t,e,n,i,this.xCellCount*p+d,r,a,s))return},Yt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Yt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Yt.prototype._circlesCollide=function(t,e,n,i,o,r){var a=i-t,s=o-e,l=n+r;return l*l>a*a+s*s},Yt.prototype._circleAndRectCollide=function(t,e,n,i,o,r,a){var s=(r-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;var c=(a-o)/2,h=Math.abs(e-(o+c));if(h>c+n)return!1;if(l<=s||h<=c)return!0;var u=l-s,d=h-c;return u*u+d*d<=n*n};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(le,3*i)}}function he(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[4]*o+n[12],t[1]=n[1]*i+n[5]*o+n[13],t[3]=n[3]*i+n[7]*o+n[15],t}var ue=function(t,e,n){void 0===e&&(e=new Yt(t.width+200,t.height+200,25)),void 0===n&&(n=new Yt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function de(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}ue.prototype.placeCollisionBox=function(t,e,n,i,o){var r=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=n*r.perspectiveRatio,s=t.x1*a+r.point.x,l=t.y1*a+r.point.y,c=t.x2*a+r.point.x,h=t.y2*a+r.point.y;return!this.isInsideGrid(s,l,c,h)||!e&&this.grid.hitTest(s,l,c,h,o)?{box:[],offscreen:!1}:{box:[s,l,c,h],offscreen:this.isOffscreen(s,l,c,h)}},ue.prototype.placeCollisionCircles=function(e,n,i,o,r,a,s,l,c,h,u,d,p){var g=[],m=new t.Point(n.anchorX,n.anchorY),f=Qt(m,a),v=te(this.transform.cameraToCenterDistance,f.signedDistanceFromCamera),b=(h?r/v:r*v)/t.ONE_EM,y=Qt(m,s).point,_=ie(b,o,n.lineOffsetX*b,n.lineOffsetY*b,!1,y,m,n,i,s,{}),C=!1,x=!1,w=!0;if(_){for(var I=.5*d*v+p,A=new t.Point(-100,-100),P=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),O=new Xt,M=_.first,k=_.last,S=[],E=M.path.length-1;E>=1;E--)S.push(M.path[E]);for(var T=1;T<k.path.length;T++)S.push(k.path[T]);var R=2.5*I;if(l){var L=S.map((function(t){return Qt(t,l)}));S=L.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:L.map((function(t){return t.point}))}var z=[];if(S.length>0){for(var B=S[0].clone(),j=S[0].clone(),D=1;D<S.length;D++)B.x=Math.min(B.x,S[D].x),B.y=Math.min(B.y,S[D].y),j.x=Math.max(j.x,S[D].x),j.y=Math.max(j.y,S[D].y);z=B.x>=A.x&&j.x<=P.x&&B.y>=A.y&&j.y<=P.y?[S]:j.x<A.x||B.x>P.x||j.y<A.y||B.y>P.y?[]:t.clipLine([S],A.x,A.y,P.x,P.y)}for(var F=0,V=z;F<V.length;F+=1){var N;O.reset(V[F],.25*I),N=O.length<=.5*I?1:Math.ceil(O.paddedLength/R)+1;for(var $=0;$<N;$++){var Z=$/Math.max(N-1,1),G=O.lerp(Z),W=G.x+100,H=G.y+100;g.push(W,H,I,0);var K=W-I,U=H-I,X=W+I,Y=H+I;if(w=w&&this.isOffscreen(K,U,X,Y),x=x||this.isInsideGrid(K,U,X,Y),!e&&this.grid.hitTestCircle(W,H,I,u)&&(C=!0,!c))return{circles:[],offscreen:!1,collisionDetected:C}}}}return{circles:!c&&C||!x?[]:g,offscreen:w,collisionDetected:C}},ue.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,o=1/0,r=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],h=new t.Point(c.x+100,c.y+100);i=Math.min(i,h.x),o=Math.min(o,h.y),r=Math.max(r,h.x),a=Math.max(a,h.y),n.push(h)}for(var u={},d={},p=0,g=this.grid.query(i,o,r,a).concat(this.ignoredGrid.query(i,o,r,a));p<g.length;p+=1){var m=g[p],f=m.key;if(void 0===u[f.bucketInstanceId]&&(u[f.bucketInstanceId]={}),!u[f.bucketInstanceId][f.featureIndex]){var v=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,v)&&(u[f.bucketInstanceId][f.featureIndex]=!0,void 0===d[f.bucketInstanceId]&&(d[f.bucketInstanceId]=[]),d[f.bucketInstanceId].push(f.featureIndex))}}return d},ue.prototype.insertCollisionBox=function(t,e,n,i,o){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:o},t[0],t[1],t[2],t[3])},ue.prototype.insertCollisionCircles=function(t,e,n,i,o){for(var r=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:o},s=0;s<t.length;s+=4)r.insertCircle(a,t[s],t[s+1],t[s+2])},ue.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var o=[n,i,0,1];return he(o,o,e),{point:new t.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}},ue.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},ue.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary},ue.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var pe=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};pe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ge=function(t,e,n,i,o){this.text=new pe(t?t.text:null,e,n,o),this.icon=new pe(t?t.icon:null,e,i,o)};ge.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var me=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},fe=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ve=function(t,e,n,i,o){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=o},be=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ye(e,n,i,o,r){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,l=-(a.verticalAlign-.5)*i,c=t.evaluateVariableOffset(e,o);return new t.Point(s+c[0]*r,l+c[1]*r)}function _e(e,n,i,o,r,a){var s=e.x1,l=e.x2,c=e.y1,h=e.y2,u=e.anchorPointX,d=e.anchorPointY,p=new t.Point(n,i);return o&&p._rotate(r?a:-a),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:h+p.y,anchorPointX:u,anchorPointY:d}}be.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Ce=function(t,e,n,i){this.transform=t.clone(),this.collisionIndex=new ue(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new be(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function xe(t,e,n,i,o){t.emplaceBack(e?1:0,n?1:0,i||0,o||0),t.emplaceBack(e?1:0,n?1:0,i||0,o||0),t.emplaceBack(e?1:0,n?1:0,i||0,o||0),t.emplaceBack(e?1:0,n?1:0,i||0,o||0)}Ce.prototype.getBucketParts=function(e,n,i,o){var r=i.getBucket(n),a=i.latestFeatureIndex;if(r&&a&&n.id===r.layerIds[0]){var s=i.collisionBoxArray,l=r.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),h=i.tileSize/t.EXTENT,u=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),g=de(i,1,this.transform.zoom),m=Jt(u,d,p,this.transform,g),f=null;if(d){var v=qt(u,d,p,this.transform,g);f=t.multiply([],this.transform.labelPlaneMatrix,v)}this.retainedQueryData[r.bucketInstanceId]=new ve(r.bucketInstanceId,a,r.sourceLayerIndex,r.index,i.tileID);var b={bucket:r,layout:l,posMatrix:u,textLabelPlaneMatrix:m,labelToScreenMatrix:f,scale:c,textPixelRatio:h,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(r.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(r.sourceID)};if(o)for(var y=0,_=r.sortKeyRanges;y<_.length;y+=1){var C=_[y];e.push({sortKey:C.sortKey,symbolInstanceStart:C.symbolInstanceStart,symbolInstanceEnd:C.symbolInstanceEnd,parameters:b})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:r.symbolInstances.length,parameters:b})}},Ce.prototype.attemptAnchorPlacement=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g){var m,f=[u.textOffset0,u.textOffset1],v=ye(t,n,i,f,o),b=this.collisionIndex.placeCollisionBox(_e(e,v.x,v.y,r,a,this.transform.angle),h,s,l,c.predicate);if(!g||0!==this.collisionIndex.placeCollisionBox(_e(g,v.x,v.y,r,a,this.transform.angle),h,s,l,c.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID].text&&(m=this.prevPlacement.variableOffsets[u.crossTileID].anchor),this.variableOffsets[u.crossTileID]={textOffset:f,width:n,height:i,anchor:t,textBoxScale:o,prevAnchor:m},this.markUsedJustification(d,t,u,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,u),this.placedOrientations[u.crossTileID]=p),{shift:v,placedGlyphBoxes:b}):void 0},Ce.prototype.placeLayerBucketPart=function(e,n,i){var o=this,r=e.parameters,a=r.bucket,s=r.layout,l=r.posMatrix,c=r.textLabelPlaneMatrix,h=r.labelToScreenMatrix,u=r.textPixelRatio,d=r.holdingForFade,p=r.collisionBoxArray,g=r.partiallyEvaluatedTextSize,m=r.collisionGroup,f=s.get("text-optional"),v=s.get("icon-optional"),b=s.get("text-allow-overlap"),y=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),C="map"===s.get("text-pitch-alignment"),x="none"!==s.get("icon-text-fit"),w="viewport-y"===s.get("symbol-z-order"),I=b&&(y||!a.hasIconData()||v),A=y&&(b||!a.hasTextData()||f);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var P=function(e,r){if(!n[e.crossTileID])if(d)o.placements[e.crossTileID]=new me(!1,!1,!1);else{var p,w=!1,P=!1,O=!0,M=null,k={box:null,offscreen:null},S={box:null,offscreen:null},E=null,T=null,R=0,L=0,z=0;r.textFeatureIndex?R=r.textFeatureIndex:e.useRuntimeCollisionCircles&&(R=e.featureIndex),r.verticalTextFeatureIndex&&(L=r.verticalTextFeatureIndex);var B=r.textBox;if(B){var j=function(n){var i=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&o.prevPlacement){var r=o.prevPlacement.placedOrientations[e.crossTileID];r&&(o.placedOrientations[e.crossTileID]=r,o.markUsedOrientation(a,i=r,e))}return i},D=function(n,i){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r.verticalTextBox)for(var o=0,s=a.writingModes;o<s.length&&(s[o]===t.WritingMode.vertical?(k=i(),S=k):k=n(),!(k&&k.box&&k.box.length));o+=1);else k=n()};if(s.get("text-variable-anchor")){var F=s.get("text-variable-anchor");if(o.prevPlacement&&o.prevPlacement.variableOffsets[e.crossTileID]){var V=o.prevPlacement.variableOffsets[e.crossTileID];F.indexOf(V.anchor)>0&&(F=F.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var N=function(t,n,i){for(var r=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,h=x&&!y?n:null,d={box:[],offscreen:!1},p=b?2*F.length:F.length,g=0;g<p;++g){var f=o.attemptAnchorPlacement(F[g%F.length],t,r,s,c,_,C,u,l,m,g>=F.length,e,a,i,h);if(f&&(d=f.placedGlyphBoxes)&&d.box&&d.box.length){w=!0,M=f.shift;break}}return d};D((function(){return N(B,r.iconBox,t.WritingMode.horizontal)}),(function(){var n=r.verticalTextBox;return a.allowVerticalPlacement&&!(k&&k.box&&k.box.length)&&e.numVerticalGlyphVertices>0&&n?N(n,r.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),k&&(w=k.box,O=k.offscreen);var $=j(k&&k.box);if(!w&&o.prevPlacement){var Z=o.prevPlacement.variableOffsets[e.crossTileID];Z&&(o.variableOffsets[e.crossTileID]=Z,o.markUsedJustification(a,Z.anchor,e,$))}}else{var G=function(t,n){var i=o.collisionIndex.placeCollisionBox(t,b,u,l,m.predicate);return i&&i.box&&i.box.length&&(o.markUsedOrientation(a,n,e),o.placedOrientations[e.crossTileID]=n),i};D((function(){return G(B,t.WritingMode.horizontal)}),(function(){var n=r.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?G(n,t.WritingMode.vertical):{box:null,offscreen:null}})),j(k&&k.box&&k.box.length)}}if(w=(p=k)&&p.box&&p.box.length>0,O=p&&p.offscreen,e.useRuntimeCollisionCircles){var W=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),H=t.evaluateSizeForFeature(a.textSizeData,g,W),K=s.get("text-padding");E=o.collisionIndex.placeCollisionCircles(b,W,a.lineVertexArray,a.glyphOffsetArray,H,l,c,h,i,C,m.predicate,e.collisionCircleDiameter,K),w=b||E.circles.length>0&&!E.collisionDetected,O=O&&E.offscreen}if(r.iconFeatureIndex&&(z=r.iconFeatureIndex),r.iconBox){var U=function(t){var e=x&&M?_e(t,M.x,M.y,_,C,o.transform.angle):t;return o.collisionIndex.placeCollisionBox(e,y,u,l,m.predicate)};P=S&&S.box&&S.box.length&&r.verticalIconBox?(T=U(r.verticalIconBox)).box.length>0:(T=U(r.iconBox)).box.length>0,O=O&&T.offscreen}var X=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Y=v||0===e.numIconVertices;if(X||Y?Y?X||(P=P&&w):w=P&&w:P=w=P&&w,w&&p&&p.box&&o.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,S&&S.box&&L?L:R,m.ID),P&&T&&o.collisionIndex.insertCollisionBox(T.box,s.get("icon-ignore-placement"),a.bucketInstanceId,z,m.ID),E&&(w&&o.collisionIndex.insertCollisionCircles(E.circles,s.get("text-ignore-placement"),a.bucketInstanceId,R,m.ID),i)){var J=a.bucketInstanceId,q=o.collisionCircleArrays[J];void 0===q&&(q=o.collisionCircleArrays[J]=new fe);for(var Q=0;Q<E.circles.length;Q+=4)q.circles.push(E.circles[Q+0]),q.circles.push(E.circles[Q+1]),q.circles.push(E.circles[Q+2]),q.circles.push(E.collisionDetected?1:0)}o.placements[e.crossTileID]=new me(w||I,P||A,O||a.justReloaded),n[e.crossTileID]=!0}};if(w)for(var O=a.getSortedSymbolIndexes(this.transform.angle),M=O.length-1;M>=0;--M){var k=O[M];P(a.symbolInstances.get(k),a.collisionArrays[k])}else for(var S=e.symbolInstanceStart;S<e.symbolInstanceEnd;S++)P(a.symbolInstances.get(S),a.collisionArrays[S]);if(i&&a.bucketInstanceId in this.collisionCircleArrays){var E=this.collisionCircleArrays[a.bucketInstanceId];t.invert(E.invProjMatrix,l),E.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},Ce.prototype.markUsedJustification=function(e,n,i,o){var r;r=o===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var l=s[a];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=r>=0&&l!==r?0:i.crossTileID)}},Ce.prototype.markUsedOrientation=function(e,n,i){for(var o=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,r=n===t.WritingMode.vertical?n:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=o;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=r)},Ce.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,o=e?e.opacities:{},r=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=o[s];c?(this.opacities[s]=new ge(c,i,l.text,l.icon),n=n||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new ge(null,i,l.text,l.icon,l.skipFade),n=n||l.text||l.icon)}for(var h in o){var u=o[h];if(!this.opacities[h]){var d=new ge(u,i,!1,!1);d.isHidden()||(this.opacities[h]=d,n=n||u.text.placed||u.icon.placed)}}for(var p in r)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=r[p]);for(var g in a)this.placedOrientations[g]||!this.opacities[g]||this.opacities[g].isHidden()||(this.placedOrientations[g]=a[g]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Ce.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,o=e;i<o.length;i+=1){var r=o[i],a=r.getBucket(t);a&&r.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,r.collisionBoxArray)}},Ce.prototype.updateBucketOpacities=function(e,n,i){var o=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var r=e.layers[0].layout,a=new ge(null,0,!1,!1,!0),s=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),c=r.get("text-variable-anchor"),h="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),d="none"!==r.get("icon-text-fit"),p=new ge(null,0,s&&(l||!e.hasIconData()||r.get("icon-optional")),l&&(s||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);for(var g=function(t,e,n){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)},m=function(i){var r=e.symbolInstances.get(i),s=r.numHorizontalGlyphVertices,l=r.numVerticalGlyphVertices,m=r.crossTileID,f=o.opacities[m];n[m]?f=a:f||(o.opacities[m]=f=p),n[m]=!0;var v=r.numIconVertices>0,b=o.placedOrientations[r.crossTileID],y=b===t.WritingMode.vertical,_=b===t.WritingMode.horizontal||b===t.WritingMode.horizontalOnly;if(s>0||l>0){var C=Se(f.text);g(e.text,s,y?Ee:C),g(e.text,l,_?Ee:C);var x=f.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=x||_?1:0);var w=o.variableOffsets[r.crossTileID];w&&o.markUsedJustification(e,w.anchor,r,b);var I=o.placedOrientations[r.crossTileID];I&&(o.markUsedJustification(e,"left",r,I),o.markUsedOrientation(e,I,r))}if(v){var A=Se(f.icon),P=!(d&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(g(e.icon,r.numIconVertices,P?A:Ee),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=f.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(g(e.icon,r.numVerticalIconVertices,P?Ee:A),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var O=e.collisionArrays[i];if(O){var M=new t.Point(0,0);if(O.textBox||O.verticalTextBox){var k=!0;if(c){var S=o.variableOffsets[m];S?(M=ye(S.anchor,S.width,S.height,S.textOffset,S.textBoxScale),h&&M._rotate(u?o.transform.angle:-o.transform.angle)):k=!1}O.textBox&&xe(e.textCollisionBox.collisionVertexArray,f.text.placed,!k||y,M.x,M.y),O.verticalTextBox&&xe(e.textCollisionBox.collisionVertexArray,f.text.placed,!k||_,M.x,M.y)}var E=Boolean(!_&&O.verticalIconBox);O.iconBox&&xe(e.iconCollisionBox.collisionVertexArray,f.icon.placed,E,d?M.x:0,d?M.y:0),O.verticalIconBox&&xe(e.iconCollisionBox.collisionVertexArray,f.icon.placed,!E,d?M.x:0,d?M.y:0)}}},f=0;f<e.symbolInstances.length;f++)m(f);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var v=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=v.invProjMatrix,e.placementViewportMatrix=v.viewportMatrix,e.collisionCircleArray=v.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},Ce.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ce.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},Ce.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Ce.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},Ce.prototype.setStale=function(){this.stale=!0};var we=Math.pow(2,25),Ie=Math.pow(2,24),Ae=Math.pow(2,17),Pe=Math.pow(2,16),Oe=Math.pow(2,9),Me=Math.pow(2,8),ke=Math.pow(2,1);function Se(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*we+e*Ie+n*Ae+e*Pe+n*Oe+e*Me+n*ke+e}var Ee=0,Te=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Te.prototype.continuePlacement=function(t,e,n,i,o){for(var r=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(r,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,o())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,r.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<r.length;)if(e.placeLayerBucketPart(r[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,o())return!0;return!1};var Re=function(t,e,n,i,o,r,a){this.placement=new Ce(t,o,r,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};Re.prototype.isDone=function(){return this._done},Re.prototype.continuePlacement=function(e,n,i){for(var o=this,r=t.browser.now(),a=function(){var e=t.browser.now()-r;return!o._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Te(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Re.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Le=512/t.EXTENT/2,ze=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var o=e.get(i),r=o.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}};ze.prototype.getScaledCoordinates=function(e,n){var i=Le/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},ze.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),o=0;o<t.length;o++){var r=t.get(o);if(!r.crossTileID){var a=this.indexedSymbolInstances[r.key];if(a)for(var s=this.getScaledCoordinates(r,e),l=0,c=a;l<c.length;l+=1){var h=c[l];if(Math.abs(h.coord.x-s.x)<=i&&Math.abs(h.coord.y-s.y)<=i&&!n[h.crossTileID]){n[h.crossTileID]=!0,r.crossTileID=h.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};je.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],o={};for(var r in i){var a=i[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),o[a.tileID.key]=a}this.indexes[n]=o}this.lng=t},je.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var r in this.indexes){var a=this.indexes[r];if(Number(r)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else{var c=a[t.scaledTo(Number(r)).key];c&&c.findMatches(e.symbolInstances,t,o)}}for(var h=0;h<e.symbolInstances.length;h++){var u=e.symbolInstances.get(h);u.crossTileID||(u.crossTileID=n.generate(),o[u.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ze(t,e.symbolInstances,e.bucketInstanceId),!0},je.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,o=e.indexedSymbolInstances[n];i<o.length;i+=1)delete this.usedCrossTileIDs[t][o[i].crossTileID]},je.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var o in i)t[i[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[o]),delete i[o],e=!0)}return e};var De=function(){this.layerIndexes={},this.crossTileIDs=new Be,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};De.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new je);var o=!1,r={};i.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,c,this.crossTileIDs)&&(o=!0),r[c.bucketInstanceId]=!0)}return i.removeStaleBuckets(r)&&(o=!0),o},De.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Fe=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},Ve=t.pick(Nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ne=t.pick(Nt,["setCenter","setZoom","setBearing","setPitch"]),$e=function(){var e={},n=t.styleSpec.$version;for(var i in t.styleSpec.$root){var o,r=t.styleSpec.$root[i];r.required&&null!=(o="version"===i?n:"array"===r.type?[]:{})&&(e[i]=o)}return e}(),Ze=function(e){function n(i,o){var r=this;void 0===o&&(o={}),e.call(this),this.map=i,this.dispatcher=new I(Dt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new y(i._requestManager,o.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new De,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var i in a.sourceCaches)a.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var o=r._layers[i];o.source===n.id&&r._validateLayer(o)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var o="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,(function(e,n){i._request=null,e?i.fire(new t.ErrorEvent(e)):n&&i._load(n,o)}))},n.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load($e,!1)},n.prototype._load=function(e,n){if(!n||!Fe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=Vt(this.stylesheet.layers);this._order=o.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var r=0,a=o;r<a.length;r+=1){var s=a[r];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,i){var o,r,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,a||(a=t,o=e,h())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,a||(a=t,r=e,h())}));function h(){if(a)i(a);else if(o&&r){var e=t.browser.getImageData(r),n={};for(var s in o){var l=o[s],c=l.width,h=l.height,u=l.x,d=l.y,p=l.sdf,g=l.pixelRatio,m=l.stretchX,f=l.stretchY,v=l.content,b=new t.RGBAImage({width:c,height:h});t.RGBAImage.copy(e,b,{x:u,y:d},{x:0,y:0},{width:c,height:h}),n[s]={data:b,pixelRatio:g,sdf:p,stretchX:m,stretchY:f,content:v}}i(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,i){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(i)for(var o in i)n.imageManager.addImage(o,i[o]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var o=n.getSource();("geojson"===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+o.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var o=this._layers[i[n]];"custom"!==o.type&&e.push(o.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);for(var r in(i.length||o.length)&&this._updateWorkerLayers(i,o),this._updatedSources){var a=this._updatedSources[r];"reload"===a?this._reloadSource(r):"clear"===a&&this._clearSource(r)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var c=0,h=this._order;c<h.length;c+=1){var u=this._layers[h[c]];u.recalculate(e,this._availableImages),!u.isHidden(e.zoom)&&u.source&&(this.sourceCaches[u.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Vt(e.layers);var i=function(e,n){if(!e)return[{command:Nt.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Nt.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Nt.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Nt.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Nt.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Nt.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Nt.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Nt.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Nt.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Nt.setLight,args:[n.light]});var o={},r=[];!function(e,n,i,o){var r;for(r in n=n||{},e=e||{})e.hasOwnProperty(r)&&(n.hasOwnProperty(r)||Zt(r,i,o));for(r in n)n.hasOwnProperty(r)&&(e.hasOwnProperty(r)?t.deepEqual(e[r],n[r])||("geojson"===e[r].type&&"geojson"===n[r].type&&Wt(e,n,r)?i.push({command:Nt.setGeoJSONSourceData,args:[r,n[r].data]}):Gt(r,n,i,o)):$t(r,n,i))}(e.sources,n.sources,r,o);var a=[];e.layers&&e.layers.forEach((function(t){o[t.source]?i.push({command:Nt.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(r),function(e,n,i){n=n||[];var o,r,a,s,l,c,h,u=(e=e||[]).map(Kt),d=n.map(Kt),p=e.reduce(Ut,{}),g=n.reduce(Ut,{}),m=u.slice(),f=Object.create(null);for(o=0,r=0;o<u.length;o++)g.hasOwnProperty(a=u[o])?r++:(i.push({command:Nt.removeLayer,args:[a]}),m.splice(m.indexOf(a,r),1));for(o=0,r=0;o<d.length;o++)m[m.length-1-o]!==(a=d[d.length-1-o])&&(p.hasOwnProperty(a)?(i.push({command:Nt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-r),1)):r++,i.push({command:Nt.addLayer,args:[g[a],c=m[m.length-o]]}),m.splice(m.length-o,0,a),f[a]=!0);for(o=0;o<d.length;o++)if(s=p[a=d[o]],l=g[a],!f[a]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(h in Ht(s.layout,l.layout,i,a,null,Nt.setLayoutProperty),Ht(s.paint,l.paint,i,a,null,Nt.setPaintProperty),t.deepEqual(s.filter,l.filter)||i.push({command:Nt.setFilter,args:[a,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||i.push({command:Nt.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?Ht(s[h],l[h],i,a,h.slice(6),Nt.setPaintProperty):t.deepEqual(s[h],l[h])||i.push({command:Nt.setLayerProperty,args:[a,h,l[h]]}));for(h in l)l.hasOwnProperty(h)&&!s.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?Ht(s[h],l[h],i,a,h.slice(6),Nt.setPaintProperty):t.deepEqual(s[h],l[h])||i.push({command:Nt.setLayerProperty,args:[a,h,l[h]]}))}else i.push({command:Nt.removeLayer,args:[a]}),c=m[m.lastIndexOf(a)+1],i.push({command:Nt.addLayer,args:[l,c]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Nt.setStyle,args:[n]}]}return i}(this.serialize(),e).filter((function(t){return!(t.command in Ne)}));if(0===i.length)return!1;var o=i.filter((function(t){return!(t.command in Ve)}));if(o.length>0)throw new Error("Unimplemented: "+o.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,i){var o=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var r=this.sourceCaches[e]=new St(e,n,this.dispatcher);r.style=this,r.setEventedParent(this,(function(){return{isSourceLoaded:o.loaded(),source:r.serialize(),sourceId:e}})),r.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var o=e.id;if(this.getLayer(o))this.fire(new t.ErrorEvent(new Error('Layer with id "'+o+'" already exists on this map')));else{var r;if("custom"===e.type){if(Fe(this,t.validateCustomStyleLayer(e)))return;r=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(o,e.source),e=t.clone$1(e),e=t.extend(e,{source:o})),this._validate(t.validateStyle.layer,"layers."+o,e,{arrayIndex:-1},i))return;r=t.createStyleLayer(e),this._validateLayer(r),r.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[r.id]=r.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,o),this._layerOrderChanged=!0,this._layers[o]=r,this._removedLayers[o]&&r.source&&"custom"!==r.type){var s=this._removedLayers[o];delete this._removedLayers[o],s.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause())}this._updateLayer(r),r.onAdd&&r.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var o=n?this._order.indexOf(n):this._order.length;n&&-1===o?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(o,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var o=this.getLayer(e);o?o.minzoom===n&&o.maxzoom===i||(null!=n&&(o.minzoom=n),null!=i&&(o.maxzoom=i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);if(o){if(!t.deepEqual(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,"layers."+o.id+".filter",n,null,i)||(o.filter=t.clone$1(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getLayoutProperty(n),i)||(r.setLayoutProperty(n,i,o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getPaintProperty(n),i)||(r.setPaintProperty(n,i,o)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){var a=r.getSource().type;"geojson"===a&&o?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||o?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.setFeatureState(o,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var i=e.source,o=this.sourceCaches[i];if(void 0!==o){var r=o.getSource().type,a="vector"===r?e.sourceLayer:void 0;"vector"!==r||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):o.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,o=this.sourceCaches[n];if(void 0!==o){if("vector"!==o.getSource().type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},i={},o=[],r=this._order.length-1;r>=0;r--){var a=this._order[r];if(n(a)){i[a]=r;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][a];if(c)for(var h=0,u=c;h<u.length;h+=1)o.push(u[h])}}}o.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],p=this._order.length-1;p>=0;p--){var g=this._order[p];if(n(g))for(var m=o.length-1;m>=0;m--){var f=o[m].feature;if(i[f.layer.id]<p)break;d.push(f),o.pop()}else for(var v=0,b=t;v<b.length;v+=1){var y=b[v][g];if(y)for(var _=0,C=y;_<C.length;_+=1)d.push(C[_].feature)}}return d},n.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var o={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var r=0,a=n.layers;r<a.length;r+=1){var s=a[r],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];o[l.source]=!0}}var c=[];for(var h in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!o[h]||c.push(j(this.sourceCaches[h],this._layers,this._serializedLayers,e,n,i));return this.placement&&c.push(function(t,e,n,i,o,r,a){for(var s={},l=r.queryRenderedSymbols(i),c=[],h=0,u=Object.keys(l).map(Number);h<u.length;h+=1)c.push(a[u[h]]);c.sort(D);for(var d=function(){var n=g[p],i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,o.filter,o.layers,o.availableImages,t);for(var r in i){var a=s[r]=s[r]||[],c=i[r];c.sort((function(t,e){var i=n.featureSortOrder;if(i){var o=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-o}return e.featureIndex-t.featureIndex}));for(var h=0,u=c;h<u.length;h+=1)a.push(u[h])}},p=0,g=c;p<g.length;p+=1)d();var m=function(e){s[e].forEach((function(i){var o=i.feature,r=n[t[e].source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=r}))};for(var f in s)m(f);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],o={},r=0;r<n.length;r++){var a=n[r],s=a.tileID.canonical.key;o[s]||(o[s]=!0,a.querySourceFeatures(i,e))}return i}(i,n):[]},n.prototype.addSourceType=function(t,e,i){return n.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var i=this.light.getLight(),o=!1;for(var r in e)if(!t.deepEqual(e[r],i[r])){o=!0;break}if(o){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,i,o,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},o)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,i,o,r){void 0===r&&(r=!1);for(var a=!1,s=!1,l={},c=0,h=this._order;c<h.length;c+=1){var u=this._layers[h[c]];if("symbol"===u.type){if(!l[u.source]){var d=this.sourceCaches[u.source];l[u.source]=d.getRenderableIds(!0).map((function(t){return d.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var p=this.crossTileSymbolIndex.addLayer(u,l[u.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Re(e,this._order,r,n,i,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var g=0,m=this._order;g<m.length;g+=1){var f=this._layers[m[g]];"symbol"===f.type&&this.placement.updateLayerOpacities(f,l[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,i){return t.makeRequest(n,i)},n}(t.Evented);Ze.getSourceType=function(t){return z[t]},Ze.setSourceType=function(t,e){z[t]=e},Ze.registerForPluginStateChange=t.registerForPluginStateChange;var Ge=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),We=bn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),He=bn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ke=bn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ue=bn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xe=bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=bn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Je=bn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),qe=bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qe=bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tn=bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),en=bn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=bn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=bn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=bn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),an=bn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=bn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ln=bn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),cn=bn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),hn=bn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),un=bn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),dn=bn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pn=bn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),gn=bn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),mn=bn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),fn=bn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),vn=bn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function bn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute ([\w]+) ([\w]+)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=r?r.concat(o):o,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,i,o){return s[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,i,o){var r="float"===i?"vec2":"vec4",a=o.match(/color/)?"color":r;return s[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+r+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+r+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})),staticAttributes:i,staticUniforms:a}}var yn=Object.freeze({__proto__:null,prelude:We,background:He,backgroundPattern:Ke,circle:Ue,clippingMask:Xe,heatmap:Ye,heatmapTexture:Je,collisionBox:qe,collisionCircle:Qe,debug:tn,fill:en,fillOutline:nn,fillOutlinePattern:on,fillPattern:rn,fillExtrusion:an,fillExtrusionPattern:sn,hillshadePrepare:ln,hillshade:cn,line:hn,lineGradient:un,linePattern:dn,lineSDF:pn,raster:gn,symbolIcon:mn,symbolSDF:fn,symbolTextAndIcon:vn}),_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Cn(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var i=t[n].split(" ");e.push(i.pop())}return e}_n.prototype.bind=function(t,e,n,i,o,r,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,c=0;!l&&c<i.length;c++)this.boundPaintVertexBuffers[c]!==i[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===o&&this.boundVertexOffset===r&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),o&&o.dynamicDraw&&o.bind(),s&&s.bind()):this.freshBind(e,n,i,o,r,a,s)},_n.prototype.freshBind=function(t,e,n,i,o,r,a){var s,l=t.numAttributes,c=this.context,h=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=r,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var u=l;u<s;u++)h.disableVertexAttribArray(u)}e.enableAttributes(h,t);for(var d=0,p=n;d<p.length;d+=1)p[d].enableAttributes(h,t);r&&r.enableAttributes(h,t),a&&a.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,o);for(var g=0,m=n;g<m.length;g+=1){var f=m[g];f.bind(),f.setVertexAttribPointers(h,t,o)}r&&(r.bind(),r.setVertexAttribPointers(h,t,o)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(h,t,o)),c.currentNumAttributes=l},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xn=function(t,e,n,i,o,r){var a=t.gl;this.program=a.createProgram();for(var s=Cn(n.staticAttributes),l=i?i.getBinderAttributes():[],c=s.concat(l),h=n.staticUniforms?Cn(n.staticUniforms):[],u=i?i.getBinderUniforms():[],d=[],p=0,g=h.concat(u);p<g.length;p+=1){var m=g[p];d.indexOf(m)<0&&d.push(m)}var f=i?i.defines():[];r&&f.push("#define OVERDRAW_INSPECTOR;");var v=f.concat(We.fragmentSource,n.fragmentSource).join("\n"),b=f.concat(We.vertexSource,n.vertexSource).join("\n"),y=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(y,v),a.compileShader(y),a.attachShader(this.program,y);var _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,b),a.compileShader(_),a.attachShader(this.program,_),this.attributes={};var C={};this.numAttributes=c.length;for(var x=0;x<this.numAttributes;x++)c[x]&&(a.bindAttribLocation(this.program,x,c[x]),this.attributes[c[x]]=x);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(y);for(var w=0;w<d.length;w++){var I=d[w];if(I&&!C[I]){var A=a.getUniformLocation(this.program,I);A&&(C[I]=A)}}this.fixedUniforms=o(t,C),this.binderUniforms=i?i.getUniforms(t,C):[]}}};function wn(t,e,n){var i=1/de(n,1,e.transform.tileZoom),o=Math.pow(2,n.tileID.overscaledZ),r=n.tileSize*Math.pow(2,e.transform.tileZoom)/o,a=r*(n.tileID.canonical.x+n.tileID.wrap*o),s=r*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}xn.prototype.draw=function(t,e,n,i,o,r,a,s,l,c,h,u,d,p,g,m){var f,v=t.gl;if(!this.failedToCreate){for(var b in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(o),t.setCullFace(r),this.fixedUniforms)this.fixedUniforms[b].set(a[b]);p&&p.setUniforms(t,this.binderUniforms,u,{zoom:d});for(var y=(f={},f[v.LINES]=2,f[v.TRIANGLES]=3,f[v.LINE_STRIP]=1,f)[e],_=0,C=h.get();_<C.length;_+=1){var x=C[_],w=x.vaos||(x.vaos={});(w[s]||(w[s]=new _n)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,x.vertexOffset,g,m),v.drawElements(e,x.primitiveLength*y,v.UNSIGNED_SHORT,x.primitiveOffset*y*2)}}};var In=function(e,n,i,o){var r=n.style.light,a=r.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===r.properties.get("anchor")&&t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l);var c=r.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:o}},An=function(e,n,i,o,r,a,s){return t.extend(In(e,n,i,o),wn(a,n,s),{u_height_factor:-Math.pow(2,r.overscaledZ)/s.tileSize/8})},Pn=function(t){return{u_matrix:t}},On=function(e,n,i,o){return t.extend(Pn(e),wn(i,n,o))},Mn=function(t,e){return{u_matrix:t,u_world:e}},kn=function(e,n,i,o,r){return t.extend(On(e,n,i,o),{u_world:r})},Sn=function(e,n,i,o){var r,a,s=e.transform;if("map"===o.paint.get("circle-pitch-alignment")){var l=de(i,1,s.zoom);r=!0,a=[l,l]}else r=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},En=function(t,e,n){var i=de(n,1,e.zoom),o=Math.pow(2,e.zoom-n.tileID.overscaledZ),r=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*o),e.pixelsToGLUnits[1]/(i*o)],u_overscale_factor:r}},Tn=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Rn=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},Ln=function(t){return{u_matrix:t}},zn=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:de(e,1,n),u_intensity:i}},Bn=function(e,n,i){var o=e.transform;return{u_matrix:Nn(e,n,i),u_ratio:1/de(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},jn=function(e,n,i,o){return t.extend(Bn(e,n,i),{u_image:0,u_image_height:o})},Dn=function(e,n,i,o){var r=e.transform,a=Vn(n,r);return{u_matrix:Nn(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/de(n,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Fn=function(e,n,i,o,r){var a=e.lineAtlas,s=Vn(n,e.transform),l="round"===i.layout.get("line-cap"),c=a.getDash(o.from,l),h=a.getDash(o.to,l),u=c.width*r.fromScale,d=h.width*r.toScale;return t.extend(Bn(e,n,i),{u_patternscale_a:[s/u,-c.height/2],u_patternscale_b:[s/d,-h.height/2],u_sdfgamma:a.width/(256*Math.min(u,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:h.y,u_mix:r.t})};function Vn(t,e){return 1/de(t,1,e.tileZoom)}function Nn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var $n=function(t,e,n,i,o){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(a=o.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(r=o.paint.get("raster-contrast"),r>0?1/(1-r):1+r),u_spin_weights:Zn(o.paint.get("raster-hue-rotate"))};var r,a};function Zn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Gn,Wn=function(t,e,n,i,o,r,a,s,l,c){var h=o.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:h.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:h.width/h.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:r,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:c,u_texture:0}},Hn=function(e,n,i,o,r,a,s,l,c,h,u){var d=r.transform;return t.extend(Wn(e,n,i,o,r,a,s,l,c,h),{u_gamma_scale:o?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+u})},Kn=function(e,n,i,o,r,a,s,l,c,h){return t.extend(Hn(e,n,i,o,r,a,s,l,!0,c,!0),{u_texsize_icon:h,u_texture_icon:1})},Un=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Xn=function(e,n,i,o,r,a){return t.extend(function(t,e,n,i){var o=n.imageManager.getPattern(t.from.toString()),r=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,l=a.height,c=Math.pow(2,i.tileID.overscaledZ),h=i.tileSize*Math.pow(2,n.transform.tileZoom)/c,u=h*(i.tileID.canonical.x+i.tileID.wrap*c),d=h*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:r.tl,u_pattern_br_b:r.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:r.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/de(i,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,d>>16],u_pixel_coord_lower:[65535&u,65535&d]}}(o,a,i,r),{u_matrix:e,u_opacity:n})},Yn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Jn(e,n,i,o,r,a,s){for(var l=e.context,c=l.gl,h=e.useProgram("collisionBox"),u=[],d=0,p=0,g=0;g<o.length;g++){var m=o[g],f=n.getTile(m),v=f.getBucket(i);if(v){var b=m.posMatrix;0===r[0]&&0===r[1]||(b=e.translatePosMatrix(m.posMatrix,f,r,a));var y=s?v.textCollisionBox:v.iconCollisionBox,_=v.collisionCircleArray;if(_.length>0){var C=t.create(),x=b;t.mul(C,v.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(C,C,v.placementViewportMatrix),u.push({circleArray:_,circleOffset:p,transform:x,invTransform:C}),p=d+=_.length/4}y&&h.draw(l,c.LINES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,En(b,e.transform,f),i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,null,e.transform.zoom,null,null,y.collisionVertexBuffer)}}if(s&&u.length){var w=e.useProgram("collisionCircle"),I=new t.StructArrayLayout2f1f2i16;I.resize(4*d),I._trim();for(var A=0,P=0,O=u;P<O.length;P+=1)for(var M=O[P],k=0;k<M.circleArray.length/4;k++){var S=4*k,E=M.circleArray[S+0],T=M.circleArray[S+1],R=M.circleArray[S+2],L=M.circleArray[S+3];I.emplace(A++,E,T,R,L,0),I.emplace(A++,E,T,R,L,1),I.emplace(A++,E,T,R,L,2),I.emplace(A++,E,T,R,L,3)}(!Gn||Gn.length<2*d)&&(Gn=function(e){var n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(var o=0;o<n;o++){var r=6*o;i.uint16[r+0]=4*o+0,i.uint16[r+1]=4*o+1,i.uint16[r+2]=4*o+2,i.uint16[r+3]=4*o+2,i.uint16[r+4]=4*o+3,i.uint16[r+5]=4*o+0}return i}(d));for(var z=l.createIndexBuffer(Gn,!0),B=l.createVertexBuffer(I,t.collisionCircleLayout.members,!0),j=0,D=u;j<D.length;j+=1){var F=D[j],V=Tn(F.transform,F.invTransform,e.transform);w.draw(l,c.TRIANGLES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,V,i.id,B,z,t.SegmentVector.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,e.transform.zoom,null,null,null)}B.destroy(),z.destroy()}}var qn=t.identity(new Float32Array(16));function Qn(e,n,i,o,r,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*n,c=-(s.verticalAlign-.5)*i,h=t.evaluateVariableOffset(e,o);return new t.Point((l/r+h[0])*a,(c/r+h[1])*a)}function ti(e,n,i,o,r,a,s,l,c,h,u){var d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,g=e.icon.dynamicLayoutVertexArray,m={};p.clear();for(var f=0;f<d.length;f++){var v=d.get(f),b=v.hidden||!v.crossTileID||e.allowVerticalPlacement&&!v.placedOrientation?null:o[v.crossTileID];if(b){var y=new t.Point(v.anchorX,v.anchorY),_=Qt(y,i?l:s),C=te(a.cameraToCenterDistance,_.signedDistanceFromCamera),x=r.evaluateSizeForFeature(e.textSizeData,h,v)*C/t.ONE_EM;i&&(x*=e.tilePixelRatio/c);for(var w=Qn(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale,x),I=i?Qt(y.add(w),s).point:_.point.add(n?w.rotate(-a.angle):w),A=e.allowVerticalPlacement&&v.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,P=0;P<v.numGlyphs;P++)t.addDynamicAttributes(p,I,A);u&&v.associatedIconIndex>=0&&(m[v.associatedIconIndex]={shiftedAnchor:I,angle:A})}else ce(v.numGlyphs,p)}if(u){g.clear();for(var O=e.icon.placedSymbolArray,M=0;M<O.length;M++){var k=O.get(M);if(k.hidden)ce(k.numGlyphs,g);else{var S=m[M];if(S)for(var E=0;E<k.numGlyphs;E++)t.addDynamicAttributes(g,S.shiftedAnchor,S.angle);else ce(k.numGlyphs,g)}}e.icon.dynamicLayoutVertexBuffer.updateData(g)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function ei(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function ni(e,n,i,o,r,a,s,l,c,h,u,d){for(var p=e.context,g=p.gl,m=e.transform,f="map"===l,v="map"===c,b=f&&"point"!==i.layout.get("symbol-placement"),y=f&&!v&&!b,_=void 0!==i.layout.get("symbol-sort-key").constantOr(1),C=e.depthModeForSublayer(0,At.ReadOnly),x=i.layout.get("text-variable-anchor"),w=[],I=0,A=o;I<A.length;I+=1){var P=A[I],O=n.getTile(P),M=O.getBucket(i);if(M){var k=r?M.text:M.icon;if(k&&k.segments.get().length){var S=k.programConfigurations.get(i.id),E=r||M.sdfIcons,T=r?M.textSizeData:M.iconSizeData,R=v||0!==m.pitch,L=e.useProgram(ei(E,r,M),S),z=t.evaluateSizeForZoom(T,m.zoom),B=void 0,j=[0,0],D=void 0,F=void 0,V=null,N=void 0;if(r)D=O.glyphAtlasTexture,F=g.LINEAR,B=O.glyphAtlasTexture.size,M.iconsInText&&(j=O.imageAtlasTexture.size,V=O.imageAtlasTexture,N=R||e.options.rotating||e.options.zooming||"composite"===T.kind||"camera"===T.kind?g.LINEAR:g.NEAREST);else{var $=1!==i.layout.get("icon-size").constantOr(0)||M.iconsNeedLinear;D=O.imageAtlasTexture,F=E||e.options.rotating||e.options.zooming||$||R?g.LINEAR:g.NEAREST,B=O.imageAtlasTexture.size}var Z=de(O,1,e.transform.zoom),G=Jt(P.posMatrix,v,f,e.transform,Z),W=qt(P.posMatrix,v,f,e.transform,Z),H=x&&M.hasTextData(),K="none"!==i.layout.get("icon-text-fit")&&H&&M.hasIconData();b&&ne(M,P.posMatrix,e,r,G,W,v,h);var U=e.translatePosMatrix(P.posMatrix,O,a,s),X=b||r&&x||K?qn:G,Y=e.translatePosMatrix(W,O,a,s,!0),J=E&&0!==i.paint.get(r?"text-halo-width":"icon-halo-width").constantOr(1),q={program:L,buffers:k,uniformValues:E?M.iconsInText?Kn(T.kind,z,y,v,e,U,X,Y,B,j):Hn(T.kind,z,y,v,e,U,X,Y,r,B,!0):Wn(T.kind,z,y,v,e,U,X,Y,r,B),atlasTexture:D,atlasTextureIcon:V,atlasInterpolation:F,atlasInterpolationIcon:N,isSDF:E,hasHalo:J};if(_)for(var Q=0,tt=k.segments.get();Q<tt.length;Q+=1){var et=tt[Q];w.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:q})}else w.push({segments:k.segments,sortKey:0,state:q})}}}_&&w.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,it=w;nt<it.length;nt+=1){var ot=it[nt],rt=ot.state;if(p.activeTexture.set(g.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,g.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(p.activeTexture.set(g.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),rt.isSDF){var at=rt.uniformValues;rt.hasHalo&&(at.u_is_halo=1,ii(rt.buffers,ot.segments,i,e,rt.program,C,u,d,at)),at.u_is_halo=0}ii(rt.buffers,ot.segments,i,e,rt.program,C,u,d,rt.uniformValues)}}function ii(t,e,n,i,o,r,a,s,l){var c=i.context;o.draw(c,c.gl.TRIANGLES,r,a,s,Mt.disabled,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function oi(t,e,n,i,o,r,a){var s,l,c,h,u,d=t.context.gl,p=n.paint.get("fill-pattern"),g=p&&p.constantOr(1),m=n.getCrossfadeParameters();a?(l=g&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=d.LINES):(l=g?"fillPattern":"fill",s=d.TRIANGLES);for(var f=0,v=i;f<v.length;f+=1){var b=v[f],y=e.getTile(b);if(!g||y.patternsLoaded()){var _=y.getBucket(n);if(_){var C=_.programConfigurations.get(n.id),x=t.useProgram(l,C);g&&(t.context.activeTexture.set(d.TEXTURE0),y.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),C.updatePaintBuffers(m));var w=p.constantOr(null);if(w&&y.imageAtlas){var I=y.imageAtlas,A=I.patternPositions[w.to.toString()],P=I.patternPositions[w.from.toString()];A&&P&&C.setConstantPatternPositions(A,P)}var O=t.translatePosMatrix(b.posMatrix,y,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){h=_.indexBuffer2,u=_.segments2;var M=[d.drawingBufferWidth,d.drawingBufferHeight];c="fillOutlinePattern"===l&&g?kn(O,t,m,y,M):Mn(O,M)}else h=_.indexBuffer,u=_.segments,c=g?On(O,t,m,y):Pn(O);x.draw(t.context,s,o,t.stencilModeForClipping(b),r,Mt.disabled,c,n.id,_.layoutVertexBuffer,h,u,n.paint,t.transform.zoom,C)}}}}function ri(t,e,n,i,o,r,a){for(var s=t.context,l=s.gl,c=n.paint.get("fill-extrusion-pattern"),h=c.constantOr(1),u=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=0,g=i;p<g.length;p+=1){var m=g[p],f=e.getTile(m),v=f.getBucket(n);if(v){var b=v.programConfigurations.get(n.id),y=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",b);h&&(t.context.activeTexture.set(l.TEXTURE0),f.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(u));var _=c.constantOr(null);if(_&&f.imageAtlas){var C=f.imageAtlas,x=C.patternPositions[_.to.toString()],w=C.patternPositions[_.from.toString()];x&&w&&b.setConstantPatternPositions(x,w)}var I=t.translatePosMatrix(m.posMatrix,f,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),A=n.paint.get("fill-extrusion-vertical-gradient"),P=h?An(I,t,A,d,m,u,f):In(I,t,A,d);y.draw(s,s.gl.TRIANGLES,o,r,a,Mt.backCCW,P,n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,b)}}}function ai(e,n,i,o,r,a){var s=e.context,l=s.gl,c=n.fbo;if(c){var h=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var u=function(e,n,i){var o=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,c,h,u=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),u),u_image:0,u_latrange:(l=n.tileID,c=Math.pow(2,l.canonical.z),h=l.canonical.y,[new t.MercatorCoordinate(0,h/c).toLngLat().lat,new t.MercatorCoordinate(0,(h+1)/c).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:o,u_highlight:r,u_accent:a}}(e,n,i);h.draw(s,l.TRIANGLES,o,r,a,Mt.disabled,u,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function si(e,n,i,o,r,a){var s=e.context,l=s.gl,c=n.dem;if(c&&c.data){var h=c.dim,u=c.stride,d=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(u),n.demTexture){var p=n.demTexture;p.update(d,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,d,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var g=n.fbo;if(!g){var m=new t.Texture(s,{width:h,height:h,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(g=n.fbo=s.createFramebuffer(h,h,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(g.framebuffer),s.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,o,r,a,Mt.disabled,function(e,n){var i=n.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,c),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function li(e,n,i,o,r){var a=o.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,c=n?(s-n.timeAdded)/a:-1,h=i.getSource(),u=r.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),p=d&&e.refreshedUponExpiration?1:t.clamp(d?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var ci=new t.Color(1,0,0,1),hi=new t.Color(0,1,0,1),ui=new t.Color(0,0,1,1),di=new t.Color(1,0,1,1),pi=new t.Color(0,1,1,1);function gi(t,e,n,i){fi(t,0,e+n/2,t.transform.width,n,i)}function mi(t,e,n,i){fi(t,e-n/2,0,n,t.transform.height,i)}function fi(e,n,i,o,r,a){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function vi(e,n,i){var o=e.context,r=o.gl,a=i.posMatrix,s=e.useProgram("debug"),l=At.disabled,c=Pt.disabled,h=e.colorModeForRenderPass();o.activeTexture.set(r.TEXTURE0),e.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),s.draw(o,r.LINE_STRIP,l,c,h,Mt.disabled,Rn(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var u=n.getTileByID(i.key).latestRawTileData,d=Math.floor((u&&u.byteLength||0)/1024),p=n.getTile(i).tileSize,g=512/Math.min(p,512)*(i.overscaledZ/e.transform.zoom)*.5,m=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(m+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,i=t.context.gl,o=t.debugOverlayCanvas.getContext("2d");o.clearRect(0,0,n.width,n.height),o.shadowColor="white",o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle="white",o.textBaseline="top",o.font="bold 36px Open Sans, sans-serif",o.fillText(e,5,5),o.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,m+" "+d+"kb"),s.draw(o,r.TRIANGLES,l,c,Ot.alphaBlended,Mt.disabled,Rn(a,t.Color.transparent,g),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var bi={symbol:function(e,n,i,o,r){if("translucent"===e.renderPass){var a=Pt.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,o,r,a,s){for(var l=n.transform,c="map"===r,h="map"===a,u=0,d=e;u<d.length;u+=1){var p=d[u],g=o.getTile(p),m=g.getBucket(i);if(m&&m.text&&m.text.segments.get().length){var f=t.evaluateSizeForZoom(m.textSizeData,l.zoom),v=de(g,1,n.transform.zoom),b=Jt(p.posMatrix,h,c,n.transform,v),y="none"!==i.layout.get("icon-text-fit")&&m.hasIconData();if(f){var _=Math.pow(2,l.zoom-g.tileID.overscaledZ);ti(m,c,h,s,t.symbolSize,l,b,p.posMatrix,_,f,y)}}}}(o,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),r),0!==i.paint.get("icon-opacity").constantOr(1)&&ni(e,n,i,o,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&ni(e,n,i,o,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Jn(e,n,i,o,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Jn(e,n,i,o,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,i,o){if("translucent"===e.renderPass){var r=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,h=c.gl,u=e.depthModeForSublayer(0,At.ReadOnly),d=Pt.disabled,p=e.colorModeForRenderPass(),g=[],m=0;m<o.length;m++){var f=o[m],v=n.getTile(f),b=v.getBucket(i);if(b){var y=b.programConfigurations.get(i.id),_={programConfiguration:y,program:e.useProgram("circle",y),layoutVertexBuffer:b.layoutVertexBuffer,indexBuffer:b.indexBuffer,uniformValues:Sn(e,f,v,i)};if(l)for(var C=0,x=b.segments.get();C<x.length;C+=1){var w=x[C];g.push({segments:new t.SegmentVector([w]),sortKey:w.sortKey,state:_})}else g.push({segments:b.segments,sortKey:0,state:_})}}l&&g.sort((function(t,e){return t.sortKey-e.sortKey}));for(var I=0,A=g;I<A.length;I+=1){var P=A[I],O=P.state;O.program.draw(c,h.TRIANGLES,u,d,p,Mt.disabled,O.uniformValues,i.id,O.layoutVertexBuffer,O.indexBuffer,P.segments,i.paint,e.transform.zoom,O.programConfiguration)}}}},heatmap:function(e,n,i,o){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var r=e.context,a=r.gl,s=Pt.disabled,l=new Ot([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var o=n.heatmapFbo;if(o)i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),t.bindFramebuffer.set(o.framebuffer);else{var r=i.createTexture();i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),o=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){var o=t.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e.width/4,e.height/4,0,o.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,e,r,o)}}(r,e,i),r.clear({color:t.Color.transparent});for(var c=0;c<o.length;c++){var h=o[c];if(!n.hasRenderableParent(h)){var u=n.getTile(h),d=u.getBucket(i);if(d){var p=d.programConfigurations.get(i.id);e.useProgram("heatmap",p).draw(r,a.TRIANGLES,At.disabled,s,l,Mt.disabled,zn(h.posMatrix,u,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,p)}}}r.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,o=i.gl,r=n.heatmapFbo;if(r){i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),i.activeTexture.set(o.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,o.RGBA)),a.bind(o.LINEAR,o.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,o.TRIANGLES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,function(e,n,i,o){var r=t.create();t.ortho(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,o){if("translucent"===e.renderPass){var r=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==r.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,At.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),h=i.paint.get("line-pattern"),u=h.constantOr(1),d=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),g=u?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=e.context,f=m.gl,v=!0,b=0,y=o;b<y.length;b+=1){var _=y[b],C=n.getTile(_);if(!u||C.patternsLoaded()){var x=C.getBucket(i);if(x){var w=x.programConfigurations.get(i.id),I=e.context.program.get(),A=e.useProgram(g,w),P=v||A.program!==I,O=h.constantOr(null);if(O&&C.imageAtlas){var M=C.imageAtlas,k=M.patternPositions[O.to.toString()],S=M.patternPositions[O.from.toString()];k&&S&&w.setConstantPatternPositions(k,S)}var E=u?Dn(e,C,i,p):c?Fn(e,C,i,c,p):d?jn(e,C,i,x.lineClipsArray.length):Bn(e,C,i);if(u)m.activeTexture.set(f.TEXTURE0),C.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePaintBuffers(p);else if(c&&(P||e.lineAtlas.dirty))m.activeTexture.set(f.TEXTURE0),e.lineAtlas.bind(m);else if(d){var T=x.gradients[i.id],R=T.texture;if(i.gradientVersion!==T.version){var L=256;if(i.stepInterpolant){var z=n.getSource().maxzoom,B=_.canonical.z===z?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;L=t.clamp(t.nextPowerOfTwo(x.maxLineLength/t.EXTENT*1024*B),256,m.maxTextureSize)}T.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:L,image:T.gradient||void 0,clips:x.lineClipsArray}),T.texture?T.texture.update(T.gradient):T.texture=new t.Texture(m,T.gradient,f.RGBA),T.version=i.gradientVersion,R=T.texture}m.activeTexture.set(f.TEXTURE0),R.bind(i.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}A.draw(m,f.TRIANGLES,s,e.stencilModeForClipping(_),l,Mt.disabled,E,i.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,i.paint,e.transform.zoom,w,x.layoutVertexBuffer2),v=!1}}}}},fill:function(e,n,i,o){var r=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===r.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var h=e.depthModeForSublayer(1,"opaque"===e.renderPass?At.ReadWrite:At.ReadOnly);oi(e,n,i,o,h,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var u=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,At.ReadOnly);oi(e,n,i,o,u,s,!0)}}},"fill-extrusion":function(t,e,n,i){var o=n.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){var r=new At(t.context.gl.LEQUAL,At.ReadWrite,t.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))ri(t,e,n,i,r,Pt.disabled,Ot.disabled),ri(t,e,n,i,r,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();ri(t,e,n,i,r,Pt.disabled,a)}}},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var o=t.context,r=t.depthModeForSublayer(0,At.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i],l=s[0],c=0,h=s[1];c<h.length;c+=1){var u=h[c],d=e.getTile(u);d.needsHillshadePrepare&&"offscreen"===t.renderPass?si(t,d,n,r,Pt.disabled,a):"translucent"===t.renderPass&&ai(t,d,n,r,l[u.overscaledZ],a)}o.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&i.length)for(var o=t.context,r=o.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),c=a instanceof T?[{},i]:t.stencilConfigForOverlap(i),h=c[0],u=c[1],d=u[u.length-1].overscaledZ,p=!t.options.moving,g=0,m=u;g<m.length;g+=1){var f=m[g],v=t.depthModeForSublayer(f.overscaledZ-d,1===n.paint.get("raster-opacity")?At.ReadWrite:At.ReadOnly,r.LESS),b=e.getTile(f),y=t.transform.calculatePosMatrix(f.toUnwrapped(),p);b.registerFadeDuration(n.paint.get("raster-fade-duration"));var _=e.findLoadedParent(f,0),C=li(b,_,e,n,t.transform),x=void 0,w=void 0,I="nearest"===n.paint.get("raster-resampling")?r.NEAREST:r.LINEAR;o.activeTexture.set(r.TEXTURE0),b.texture.bind(I,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(r.TEXTURE1),_?(_.texture.bind(I,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,_.tileID.overscaledZ-b.tileID.overscaledZ),w=[b.tileID.canonical.x*x%1,b.tileID.canonical.y*x%1]):b.texture.bind(I,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST);var A=$n(y,w||[0,0],x||1,C,n);a instanceof T?s.draw(o,r.TRIANGLES,v,Pt.disabled,l,Mt.disabled,A,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(o,r.TRIANGLES,v,h[f.overscaledZ],l,Mt.disabled,A,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0!==o){var r=t.context,a=r.gl,s=t.transform,l=s.tileSize,c=n.paint.get("background-pattern");if(!t.isPatternMissing(c)){var h=!c&&1===i.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===h){var u=Pt.disabled,d=t.depthModeForSublayer(0,"opaque"===h?At.ReadWrite:At.ReadOnly),p=t.colorModeForRenderPass(),g=t.useProgram(c?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});c&&(r.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var f=n.getCrossfadeParameters(),v=0,b=m;v<b.length;v+=1){var y=b[v],_=t.transform.calculatePosMatrix(y.toUnwrapped()),C=c?Xn(_,o,t,c,{tileID:y,tileSize:l},f):Un(_,o,i);g.draw(r,a.TRIANGLES,d,u,p,Mt.disabled,C,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)vi(t,e,n[i])},custom:function(t,e,n){var i=t.context,o=n.implementation;if("offscreen"===t.renderPass){var r=o.prerender;r&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),r.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(Pt.disabled);var a="3d"===o.renderingMode?new At(t.context.gl.LEQUAL,At.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,At.ReadOnly);i.setDepthMode(a),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},yi=function(t,e){this.context=new kt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new De,this.gpuTimers={}};yi.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1)this.style._layers[o[i]].resize()},yi.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ge.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ge.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(o,E.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(r,Ge.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Pt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},yi.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,At.disabled,this.stencilClearMode,Ot.disabled,Mt.disabled,Ln(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yi.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,i=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Ot.disabled),n.setDepthMode(At.disabled);var o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var r=0,a=e;r<a.length;r+=1){var s=a[r],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;o.draw(n,i.TRIANGLES,At.disabled,new Pt({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),Ot.disabled,Mt.disabled,Ln(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Pt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},yi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Pt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},yi.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,i=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),o=i[i.length-1].overscaledZ,r=i[0].overscaledZ-o+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();for(var a={},s=0;s<r;s++)a[s+o]=new Pt({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=r,[a,i]}return[(e={},e[o]=Pt.disabled,e),i]},yi.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ot([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ot.unblended:Ot.alphaBlended},yi.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return At.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new At(n||this.context.gl.LEQUAL,e,[i,i])},yi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yi.prototype.render=function(e,n){var i=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var o=this.style._order,r=this.style.sourceCaches;for(var a in r){var s=r[a];s.used&&s.prepare(this.context)}var l,c,h={},u={},d={};for(var p in r){var g=r[p];h[p]=g.getVisibleCoordinates(),u[p]=h[p].slice().reverse(),d[p]=g.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<o.length;m++)if(this.style._layers[o[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var f=0,v=o;f<v.length;f+=1){var b=this.style._layers[v[f]];if(b.hasOffscreenPass()&&!b.isHidden(this.transform.zoom)){var y=u[b.source];("custom"===b.type||y.length)&&this.renderLayer(this,r[b.source],b,y)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[o[this.currentLayer]],C=r[_.source],x=h[_.source];this._renderTileClippingMasks(_,x),this.renderLayer(this,C,_,x)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){var w=this.style._layers[o[this.currentLayer]],I=r[w.source],A=("symbol"===w.type?d:u)[w.source];this._renderTileClippingMasks(w,h[w.source]),this.renderLayer(this,I,w,A)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(c&&c.id)&&(c=i.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<c.getSource().maxzoom)&&(l=c))})),l&&bi.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;gi(t,t.transform.height-(e.top||0),3,ci),gi(t,e.bottom||0,3,hi),mi(t,e.left||0,3,ui),mi(t,t.transform.width-(e.right||0),3,di);var n=t.transform.centerPoint;!function(t,e,n,i){fi(t,e-1,n-10,2,20,i),fi(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,pi)}(this),this.context.setDefault()},yi.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||i.length)&&(this.id=n.id,this.gpuTimingStart(n),bi[n.type](t,e,n,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},yi.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},yi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},yi.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},yi.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var i=t[n],o=this.context.extTimerQuery,r=o.getQueryObjectEXT(i.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i.query),e[n]=r}return e},yi.prototype.translatePosMatrix=function(e,n,i,o,r){if(!i[0]&&!i[1])return e;var a=r?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var c=[r?i[0]:de(n,i[0],this.transform.zoom),r?i[1]:de(n,i[1],this.transform.zoom),0],h=new Float32Array(16);return t.translate(h,e,c),h},yi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},yi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},yi.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},yi.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xn(this.context,t,yn[t],e,Yn[t],this._showOverdrawInspector)),this.cache[n]},yi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yi.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},yi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _i=function(t,e){this.points=t,this.planes=e};_i.fromInvProjectionMatrix=function(e,n,i){var o=Math.pow(2,i),r=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*o)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],r[e[0]],r[e[1]]),i=t.sub([],r[e[2]],r[e[1]]),o=t.normalize([],t.cross([],n,i)),a=-t.dot(o,r[e[1]]);return o.concat(a)}));return new _i(r,a)};var Ci=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Ci.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],i=t.clone$2(this.min),o=t.clone$2(this.max),r=0;r<n.length;r++)i[r]=n[r]?this.min[r]:this.center[r],o[r]=n[r]?this.center[r]:this.max[r];return o[2]=this.max[2],new Ci(i,o)},Ci.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},Ci.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},Ci.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,o=0;o<e.planes.length;o++){for(var r=e.planes[o],a=0,s=0;s<n.length;s++)a+=t.dot$1(r,n[s])>=0;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,h=-Number.MAX_VALUE,u=0;u<e.points.length;u++){var d=e.points[u][l]-this.min[l];c=Math.min(c,d),h=Math.max(h,d)}if(h<0||c>this.max[l]-this.min[l])return 0}return 1};var xi=function(t,e,n,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i};xi.prototype.interpolate=function(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this},xi.prototype.getCenter=function(e,n){var i=t.clamp((this.left+e-this.right)/2,0,e),o=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(i,o)},xi.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},xi.prototype.clone=function(){return new xi(this.top,this.bottom,this.left,this.right)},xi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wi=function(e,n,i,o,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ii={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wi.prototype.clone=function(){var t=new wi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Ii.minZoom.get=function(){return this._minZoom},Ii.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Ii.maxZoom.get=function(){return this._maxZoom},Ii.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Ii.minPitch.get=function(){return this._minPitch},Ii.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Ii.maxPitch.get=function(){return this._maxPitch},Ii.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Ii.renderWorldCopies.get=function(){return this._renderWorldCopies},Ii.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Ii.worldSize.get=function(){return this.tileSize*this.scale},Ii.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ii.size.get=function(){return new t.Point(this.width,this.height)},Ii.bearing.get=function(){return-this.angle/Math.PI*180},Ii.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ii.pitch.get=function(){return this._pitch/Math.PI*180},Ii.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Ii.fov.get=function(){return this._fov/Math.PI*180},Ii.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Ii.zoom.get=function(){return this._zoom},Ii.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Ii.center.get=function(){return this._center},Ii.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Ii.padding.get=function(){return this._edgeInsets.toJSON()},Ii.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Ii.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wi.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},wi.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},wi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},wi.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),o=this.pointCoordinate(new t.Point(this.width,0)),r=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,o.x,r.x,a.x)),l=Math.floor(Math.max(i.x,o.x,r.x,a.x)),c=s-1;c<=l+1;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n},wi.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var o=t.MercatorCoordinate.fromLngLat(this.center),r=Math.pow(2,n),a=[r*o.x,r*o.y,0],s=_i.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);var c=function(t){return{aabb:new Ci([t*r,0,0],[(t+1)*r,r,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},h=[],u=[],d=n,p=e.reparseOverscaled?i:n;if(this._renderWorldCopies)for(var g=1;g<=3;g++)h.push(c(-g)),h.push(c(g));for(h.push(c(0));h.length>0;){var m=h.pop(),f=m.x,v=m.y,b=m.fullyVisible;if(!b){var y=m.aabb.intersects(s);if(0===y)continue;b=2===y}var _=m.aabb.distanceX(a),C=m.aabb.distanceY(a),x=Math.max(Math.abs(_),Math.abs(C));if(m.zoom===d||x>3+(1<<d-m.zoom)-2&&m.zoom>=l)u.push({tileID:new t.OverscaledTileID(m.zoom===d?p:m.zoom,m.wrap,m.zoom,f,v),distanceSq:t.sqrLen([a[0]-.5-f,a[1]-.5-v])});else for(var w=0;w<4;w++){var I=(f<<1)+w%2,A=(v<<1)+(w>>1);h.push({aabb:m.aabb.quadrant(w),zoom:m.zoom+1,x:I,y:A,wrap:m.wrap,fullyVisible:b})}}return u.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},wi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Ii.unmodified.get=function(){return this._unmodified},wi.prototype.zoomScale=function(t){return Math.pow(2,t)},wi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},wi.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},wi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Ii.point.get=function(){return this.project(this.center)},wi.prototype.setLocationAtPoint=function(e,n){var i=this.pointCoordinate(n),o=this.pointCoordinate(this.centerPoint),r=this.locationCoordinate(e),a=new t.MercatorCoordinate(r.x-(i.x-o.x),r.y-(i.y-o.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},wi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},wi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},wi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},wi.prototype.coordinateLocation=function(t){return t.toLngLat()},wi.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var o=n[3],r=i[3],a=n[1]/o,s=i[1]/r,l=n[2]/o,c=i[2]/r,h=l===c?0:(0-l)/(c-l);return new t.MercatorCoordinate(t.number(n[0]/o,i[0]/r,h)/this.worldSize,t.number(a,s,h)/this.worldSize)},wi.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},wi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},wi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wi.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,o=n?this._alignedPosMatrixCache:this._posMatrixCache;if(o[i])return o[i];var r=e.canonical,a=this.worldSize/this.zoomScale(r.z),s=r.x+Math.pow(2,r.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,r.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),o[i]=new Float32Array(l),o[i]},wi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,o,r=-90,a=90,s=-180,l=180,c=this.size,h=this._unmodified;if(this.latRange){var u=this.latRange;r=t.mercatorYfromLat(u[1])*this.worldSize,e=(a=t.mercatorYfromLat(u[0])*this.worldSize)-r<c.y?c.y/(a-r):0}if(this.lngRange){var d=this.lngRange;s=t.mercatorXfromLng(d[0])*this.worldSize,n=(l=t.mercatorXfromLng(d[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var p=this.point,g=Math.max(n||0,e||0);if(g)return this.center=this.unproject(new t.Point(n?(l+s)/2:p.x,e?(a+r)/2:p.y)),this.zoom+=this.scaleZoom(g),this._unmodified=h,void(this._constraining=!1);if(this.latRange){var m=p.y,f=c.y/2;m-f<r&&(o=r+f),m+f>a&&(o=a-f)}if(this.lngRange){var v=p.x,b=c.x/2;v-b<s&&(i=s+b),v+b>l&&(i=l-b)}void 0===i&&void 0===o||(this.center=this.unproject(new t.Point(void 0!==i?i:p.x,void 0!==o?o:p.y))),this._unmodified=h,this._constraining=!1}},wi.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,i=this._fov*(.5+e.y/this.height),o=Math.sin(i)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-i,.01,Math.PI-.01)),r=this.point,a=r.x,s=r.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),c=this.height/50,h=new Float64Array(16);t.perspective(h,this._fov,this.width/this.height,c,l),h[8]=2*-e.x/this.width,h[9]=2*e.y/this.height,t.scale(h,h,[1,-1,1]),t.translate(h,h,[0,0,-this.cameraToCenterDistance]),t.rotateX(h,h,this._pitch),t.rotateZ(h,h,this.angle),t.translate(h,h,[-a,-s,0]),this.mercatorMatrix=t.scale([],h,[this.worldSize,this.worldSize,this.worldSize]),t.scale(h,h,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=h,this.invProjMatrix=t.invert([],this.projMatrix);var u=this.width%2/2,d=this.height%2/2,p=Math.cos(this.angle),g=Math.sin(this.angle),m=a-Math.round(a)+p*u+g*d,f=s-Math.round(s)+p*d+g*u,v=new Float64Array(h);if(t.translate(v,v,[m>.5?m-1:m,f>.5?f-1:f,0]),this.alignedProjMatrix=v,h=t.create(),t.scale(h,h,[this.width/2,-this.height/2,1]),t.translate(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=t.create(),t.scale(h,h,[1,-1,1]),t.translate(h,h,[-1,-1,0]),t.scale(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(h=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},wi.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},wi.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var i=n.x,o=n.y,r=n.x,a=n.y,s=0,l=e;s<l.length;s+=1){var c=l[s];i=Math.min(i,c.x),o=Math.min(o,c.y),r=Math.max(r,c.x),a=Math.max(a,c.y)}return[new t.Point(i,o),new t.Point(r,o),new t.Point(r,a),new t.Point(i,a),new t.Point(i,o)]},Object.defineProperties(wi.prototype,Ii);var Ai=function(e){var n,i,o,r;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),i=!1,o=null,r=function(){o=null,i&&(n(),o=setTimeout(r,300),i=!1)},function(){return i=!0,o||r(),o})};Ai.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ai.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ai.prototype.getHashString=function(e){var n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,o=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,o),a=Math.round(n.lng*r)/r,s=Math.round(n.lat*r)/r,l=this._map.getBearing(),c=this._map.getPitch(),h="";if(h+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(l||c)&&(h+="/"+Math.round(10*l)/10),c&&(h+="/"+Math.round(c)),this._hashName){var u=this._hashName,d=!1,p=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===u?(d=!0,e+"="+h):t})).filter((function(t){return t}));return d||p.push(u+"="+h),"#"+p.join("&")}return"#"+h},Ai.prototype._getCurrentHash=function(){var e,n=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):i.split("/")},Ai.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Ai.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Pi={linearity:.3,easing:t.bezier(0,0,.3,1)},Oi=t.extend({deceleration:2500,maxSpeed:1400},Pi),Mi=t.extend({deceleration:20,maxSpeed:1400},Pi),ki=t.extend({deceleration:1e3,maxSpeed:360},Pi),Si=t.extend({deceleration:1e3,maxSpeed:90},Pi),Ei=function(t){this._map=t,this.clear()};function Ti(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ri(e,n,i){var o=i.maxSpeed,r=i.linearity,a=i.deceleration,s=t.clamp(e*r/(n/1e3),-o,o),l=Math.abs(s)/(a*r);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}Ei.prototype.clear=function(){this._inertiaBuffer=[]},Ei.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Ei.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Ei.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},i=0,o=this._inertiaBuffer;i<o.length;i+=1){var r=o[i].settings;n.zoom+=r.zoomDelta||0,n.bearing+=r.bearingDelta||0,n.pitch+=r.pitchDelta||0,r.panDelta&&n.pan._add(r.panDelta),r.around&&(n.around=r.around),r.pinchAround&&(n.pinchAround=r.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var l=Ri(n.pan.mag(),a,t.extend({},Oi,e||{}));s.offset=n.pan.mult(l.amount/n.pan.mag()),s.center=this._map.transform.center,Ti(s,l)}if(n.zoom){var c=Ri(n.zoom,a,Mi);s.zoom=this._map.transform.zoom+c.amount,Ti(s,c)}if(n.bearing){var h=Ri(n.bearing,a,ki);s.bearing=this._map.transform.bearing+t.clamp(h.amount,-179,179),Ti(s,h)}if(n.pitch){var u=Ri(n.pitch,a,Si);s.pitch=this._map.transform.pitch+u.amount,Ti(s,u)}if(s.zoom||s.bearing){var d=void 0===n.pinchAround?n.around:n.pinchAround;s.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Li=function(e){function i(i,o,r,a){void 0===a&&(a={});var s=n.mousePos(o.getCanvasContainer(),r),l=o.unproject(s);e.call(this,i,t.extend({point:s,lngLat:l,originalEvent:r},a)),this._defaultPrevented=!1,this.target=o}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var o={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,o),i}(t.Event),zi=function(e){function i(i,o,r){var a="touchend"===i?r.changedTouches:r.touches,s=n.touchPos(o.getCanvasContainer(),a),l=s.map((function(t){return o.unproject(t)})),c=s.reduce((function(t,e,n,i){return t.add(e.div(i.length))}),new t.Point(0,0)),h=o.unproject(c);e.call(this,i,{points:s,point:c,lngLats:l,lngLat:h,originalEvent:r}),this._defaultPrevented=!1}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var o={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,o),i}(t.Event),Bi=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),ji=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};ji.prototype.reset=function(){delete this._mousedownPos},ji.prototype.wheel=function(t){return this._firePreventable(new Bi(t.type,this._map,t))},ji.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Li(t.type,this._map,t))},ji.prototype.mouseup=function(t){this._map.fire(new Li(t.type,this._map,t))},ji.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Li(t.type,this._map,t))},ji.prototype.dblclick=function(t){return this._firePreventable(new Li(t.type,this._map,t))},ji.prototype.mouseover=function(t){this._map.fire(new Li(t.type,this._map,t))},ji.prototype.mouseout=function(t){this._map.fire(new Li(t.type,this._map,t))},ji.prototype.touchstart=function(t){return this._firePreventable(new zi(t.type,this._map,t))},ji.prototype.touchmove=function(t){this._map.fire(new zi(t.type,this._map,t))},ji.prototype.touchend=function(t){this._map.fire(new zi(t.type,this._map,t))},ji.prototype.touchcancel=function(t){this._map.fire(new zi(t.type,this._map,t))},ji.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var Di=function(t){this._map=t};Di.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Di.prototype.mousemove=function(t){this._map.fire(new Li(t.type,this._map,t))},Di.prototype.mousedown=function(){this._delayContextMenu=!0},Di.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Di.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Li(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var Fi=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Vi(t,e){for(var n={},i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}Fi.prototype.isEnabled=function(){return!!this._enabled},Fi.prototype.isActive=function(){return!!this._active},Fi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fi.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Fi.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=i,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(o.x,i.x),a=Math.max(o.x,i.x),s=Math.min(o.y,i.y),l=Math.max(o.y,i.y);n.setTransform(this._box,"translate("+r+"px,"+s+"px)"),this._box.style.width=a-r+"px",this._box.style.height=l-s+"px"}}},Fi.prototype.mouseupWindow=function(e,i){var o=this;if(this._active&&0===e.button){var r=this._startPos,a=i;if(this.reset(),n.suppressClick(),r.x!==a.x||r.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,a,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Fi.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Fi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Fi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Ni=function(t){this.reset(),this.numTouches=t.numTouches};Ni.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ni.prototype.touchstart=function(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),i=0,o=e;i<o.length;i+=1)n._add(o[i]);return n.div(e.length)}(n),this.touches=Vi(i,n)))},Ni.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var i=Vi(n,e);for(var o in this.touches){var r=i[o];(!r||r.dist(this.touches[o])>30)&&(this.aborted=!0)}}},Ni.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}};var $i=function(t){this.singleTap=new Ni(t),this.numTaps=t.numTaps,this.reset()};$i.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},$i.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},$i.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},$i.prototype.touchend=function(t,e,n){var i=this.singleTap.touchend(t,e,n);if(i){var o=t.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(i)<30;if(o&&r||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}};var Zi=function(){this._zoomIn=new $i({numTouches:1,numTaps:2}),this._zoomOut=new $i({numTouches:2,numTaps:1}),this.reset()};Zi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Zi.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},Zi.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},Zi.prototype.touchend=function(t,e,n){var i=this,o=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return o?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(o)},{originalEvent:t})}}):r?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}}):void 0},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var Gi={0:1,2:2},Wi=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Wi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wi.prototype._correctButton=function(t,e){return!1},Wi.prototype._move=function(t,e){return{}},Wi.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=n.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Wi.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=Gi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Wi.prototype.mouseupWindow=function(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Wi.prototype.enable=function(){this._enabled=!0},Wi.prototype.disable=function(){this._enabled=!1,this.reset()},Wi.prototype.isEnabled=function(){return this._enabled},Wi.prototype.isActive=function(){return this._active};var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Wi),Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Wi),Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Wi),Xi=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Xi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Xi.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Xi.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},Xi.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Xi.prototype.touchcancel=function(){this.reset()},Xi.prototype._calculateTransform=function(e,n,i){i.length>0&&(this._active=!0);var o=Vi(i,n),r=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var l in o){var c=o[l],h=this._touches[l];h&&(r._add(c),a._add(c.sub(h)),s++,o[l]=c)}if(this._touches=o,!(s<this._minTouches)&&a.mag()){var u=a.div(s);if(this._sum._add(u),!(this._sum.mag()<this._clickTolerance))return{around:r.div(s),panDelta:u}}},Xi.prototype.enable=function(){this._enabled=!0},Xi.prototype.disable=function(){this._enabled=!1,this.reset()},Xi.prototype.isEnabled=function(){return this._enabled},Xi.prototype.isActive=function(){return this._active};var Yi=function(){this.reset()};function Ji(t,e,n){for(var i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function qi(t,e){return Math.log(t/e)/Math.LN2}Yi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yi.prototype._start=function(t){},Yi.prototype._move=function(t,e,n){return{}},Yi.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Yi.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var i=this._firstTwoTouches,o=i[1],r=Ji(n,e,i[0]),a=Ji(n,e,o);if(r&&a){var s=this._aroundCenter?null:r.add(a).div(2);return this._move([r,a],s,t)}}},Yi.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var o=this._firstTwoTouches,r=o[1],a=Ji(i,e,o[0]),s=Ji(i,e,r);a&&s||(this._active&&n.suppressClick(),this.reset())}},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(qi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qi(this._distance,n),pinchAround:e}},e}(Yi);function to(t,e){return 180*t.angleWith(e)/Math.PI}var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:to(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=to(t,this._startVector);return Math.abs(n)<e},e}(Yi);function no(t){return Math.abs(t.y)>Math.abs(t.x)}var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,no(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var i=t[0].sub(this._lastPoints[0]),o=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,o,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+o.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var i=t.mag()>=2,o=e.mag()>=2;if(i||o){if(!i||!o)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var r=t.y>0==e.y>0;return no(t)&&no(e)&&r}},e}(Yi),oo={panStep:100,bearingStep:15,pitchStep:10},ro=function(){var t=oo;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function ao(t){return t*(2-t)}ro.prototype.reset=function(){this._active=!1},ro.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,i=0,o=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?o=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?o=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ao,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:s.getBearing()+i*e._bearingStep,pitch:s.getPitch()+o*e._pitchStep,offset:[-r*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var so=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};so.prototype.setZoomRate=function(t){this._defaultZoomRate=t},so.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},so.prototype.isEnabled=function(){return!!this._enabled},so.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},so.prototype.isZooming=function(){return!!this._zooming},so.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},so.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},so.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),o=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(o*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},so.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},so.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var i=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},so.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==o&&(o=1/o);var r="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(r*o))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,c=this._easing,h=!1;if("wheel"===this._type&&l&&c){var u=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),d=c(u);a=t.number(l,s,d),u<1?this._frameId||(this._frameId=!0):h=!0}else a=s,h=!0;return this._active=!0,h&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!h,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},so.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,o=(t.browser.now()-i.start)/i.duration,r=i.easing(o+.01)-i.easing(o),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},so.prototype.reset=function(){this._active=!1};var lo=function(t,e){this._clickZoom=t,this._tapZoom=e};lo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var co=function(){this.reset()};co.prototype.reset=function(){this._active=!1},co.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},co.prototype.enable=function(){this._enabled=!0},co.prototype.disable=function(){this._enabled=!1,this.reset()},co.prototype.isEnabled=function(){return this._enabled},co.prototype.isActive=function(){return this._active};var ho=function(){this._tap=new $i({numTouches:1,numTaps:1}),this.reset()};ho.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ho.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},ho.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var i=e[0],o=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:o/128}}}else this._tap.touchmove(t,e,n)},ho.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},ho.prototype.touchcancel=function(){this.reset()},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var uo=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};uo.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},uo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},uo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},uo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var po=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};po.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},po.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},po.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},po.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var go=function(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0};go.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},go.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},go.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},go.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},go.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},go.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var mo=function(t){return t.zoom||t.drag||t.pitch||t.rotate},fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function vo(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var bo=function(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ei(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[t.window,"blur",void 0]];for(var r=0,a=this._listeners;r<a.length;r+=1){var s=a[r],l=s[0];n.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};bo.prototype.destroy=function(){for(var e=0,i=this._listeners;e<i.length;e+=1){var o=i[e],r=o[0];n.removeEventListener(r,o[1],r===t.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},bo.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ji(e,t));var i=e.boxZoom=new Fi(e,t);this._add("boxZoom",i);var o=new Zi,r=new co;e.doubleClickZoom=new lo(r,o),this._add("tapZoom",o),this._add("clickZoom",r);var a=new ho;this._add("tapDragZoom",a);var s=e.touchPitch=new io;this._add("touchPitch",s);var l=new Ki(t),c=new Ui(t);e.dragRotate=new po(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var h=new Hi(t),u=new Xi(t);e.dragPan=new uo(n,h,u),this._add("mousePan",h),this._add("touchPan",u,["touchZoom","touchRotate"]);var d=new eo,p=new Qi;e.touchZoomRotate=new go(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var g=e.scrollZoom=new so(e,this);this._add("scrollZoom",g,["mousePan"]);var m=e.keyboard=new ro;this._add("keyboard",m),this._add("blockableMapEvent",new Di(e));for(var f=0,v=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];f<v.length;f+=1){var b=v[f];t.interactive&&t[b]&&e[b].enable(t[b])}},bo.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},bo.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},bo.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},bo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},bo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},bo.prototype.isMoving=function(){return Boolean(mo(this._eventsInProgress))||this.isZooming()},bo.prototype._blockedByActive=function(t,e,n){for(var i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1},bo.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},bo.prototype._getMapTouches=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var o=i[n];this._el.contains(o.target)&&e.push(o)}return e},bo.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,o={needsRenderFrame:!1},r={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?n.touchPos(this._el,s):n.mousePos(this._el,t),c=0,h=this._handlers;c<h.length;c+=1){var u=h[c],d=u.handlerName,p=u.handler,g=u.allowed;if(p.isEnabled()){var m=void 0;this._blockedByActive(a,g,d)?p.reset():p[e||t.type]&&(m=p[e||t.type](t,l,s),this.mergeHandlerResult(o,r,m,d,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||p.isActive())&&(a[d]=p)}}var f={};for(var v in this._previousActiveHandlers)a[v]||(f[v]=i);this._previousActiveHandlers=a,(Object.keys(f).length||vo(o))&&(this._changes.push([o,r,f]),this._triggerRenderFrame()),(Object.keys(a).length||vo(o))&&this._map._stop(!0),this._updatingCamera=!1;var b=o.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map))}else this.stop(!0)},bo.prototype.mergeHandlerResult=function(e,n,i,o,r){if(i){t.extend(e,i);var a={handlerName:o,originalEvent:i.originalEvent||r};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}},bo.prototype._applyChanges=function(){for(var e={},n={},i={},o=0,r=this._changes;o<r.length;o+=1){var a=r[o],s=a[0],l=a[1],c=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,l),t.extend(i,c)}this._updateMapTransform(e,n,i),this._changes=[]},bo.prototype._updateMapTransform=function(t,e,n){var i=this._map,o=i.transform;if(!vo(t))return this._fireEvents(e,n,!0);var r=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,c=t.around,h=t.pinchAround;void 0!==h&&(c=h),i._stop(!0),c=c||i.transform.centerPoint;var u=o.pointLocation(r?c.sub(r):c);s&&(o.bearing+=s),l&&(o.pitch+=l),a&&(o.zoom+=a),o.setLocationAtPoint(u,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},bo.prototype._fireEvents=function(e,n,i){var o=this,r=mo(this._eventsInProgress),a=mo(e),s={};for(var l in e)this._eventsInProgress[l]||(s[l+"start"]=e[l].originalEvent),this._eventsInProgress[l]=e[l];for(var c in!r&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var h in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(h,e[h].originalEvent);var u,d={};for(var p in this._eventsInProgress){var g=this._eventsInProgress[p],m=g.handlerName,f=g.originalEvent;this._handlersById[m].isActive()||(delete this._eventsInProgress[p],d[p+"end"]=u=n[m]||f)}for(var v in d)this._fireEvent(v,d[v]);var b=mo(this._eventsInProgress);if(i&&(r||a)&&!b){this._updatingCamera=!0;var y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-o._bearingSnap<t&&t<o._bearingSnap};y?(_(y.bearing||this._map.getBearing())&&(y.bearing=0),this._map.easeTo(y,{originalEvent:u})):(this._map.fire(new t.Event("moveend",{originalEvent:u})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},bo.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},bo.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new fo("renderFrame",{timeStamp:e})),t._applyChanges()}))},bo.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yo=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,i,o){var r={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=t.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){var a=o.padding;o.padding={top:a,bottom:a,right:a,left:a}}o.padding=t.extend(r,o.padding);var s=this.transform,l=s.padding,c=s.project(t.LngLat.convert(e)),h=s.project(t.LngLat.convert(n)),u=c.rotate(-i*Math.PI/180),d=h.rotate(-i*Math.PI/180),p=new t.Point(Math.max(u.x,d.x),Math.max(u.y,d.y)),g=new t.Point(Math.min(u.x,d.x),Math.min(u.y,d.y)),m=p.sub(g),f=(s.width-(l.left+l.right+o.padding.left+o.padding.right))/m.x,v=(s.height-(l.top+l.bottom+o.padding.top+o.padding.bottom))/m.y;if(!(v<0||f<0)){var b=Math.min(s.scaleZoom(s.scale*Math.min(f,v)),o.maxZoom),y=t.Point.convert(o.offset),_=new t.Point(y.x+(o.padding.left-o.padding.right)/2,y.y+(o.padding.top-o.padding.bottom)/2).mult(s.scale/s.zoomScale(b));return{center:s.unproject(c.add(h).div(2).sub(_)),zoom:b,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,o,r){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,o),o,r)},n.prototype._fitInternal=function(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,o=!1,r=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(o=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(r=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),o&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),r&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var o=this.transform,r=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in e?+e.zoom:r,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:s,d="padding"in e?e.padding:o.padding,p=t.Point.convert(e.offset),g=o.centerPoint.add(p),m=o.pointLocation(g),f=t.LngLat.convert(e.center||m);this._normalizeCenter(f);var v,b,y=o.project(m),_=o.project(f).sub(y),C=o.zoomScale(c-r);e.around&&(v=t.LngLat.convert(e.around),b=o.locationPoint(v));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==r,this._rotating=this._rotating||a!==h,this._pitching=this._pitching||u!==s,this._padding=!o.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((function(e){if(i._zooming&&(o.zoom=t.number(r,c,e)),i._rotating&&(o.bearing=t.number(a,h,e)),i._pitching&&(o.pitch=t.number(s,u,e)),i._padding&&(o.interpolatePadding(l,d,e),g=o.centerPoint.add(p)),v)o.setLocationAtPoint(v,b);else{var m=o.zoomScale(o.zoom-r),f=c>r?Math.min(2,C):Math.max(.5,C),x=Math.pow(f,1-e),w=o.unproject(y.add(_.mult(e*x)).mult(m));o.setLocationAtPoint(o.renderWorldCopies?w.wrap():w,g)}i._fireMoveEvents(n)}),(function(t){i._afterEase(n,t)}),e),this},n.prototype._prepareEase=function(e,n,i){void 0===i&&(i={}),this._moving=!0,n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var i=this._zooming,o=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),o&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var o=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var r=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),h="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):a,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,d="pitch"in e?+e.pitch:l,p="padding"in e?e.padding:r.padding,g=r.zoomScale(h-a),m=t.Point.convert(e.offset),f=r.centerPoint.add(m),v=r.pointLocation(f),b=t.LngLat.convert(e.center||v);this._normalizeCenter(b);var y=r.project(v),_=r.project(b).sub(y),C=e.curve,x=Math.max(r.width,r.height),w=x/g,I=_.mag();if("minZoom"in e){var A=t.clamp(Math.min(e.minZoom,a,h),r.minZoom,r.maxZoom),P=x/r.zoomScale(A-a);C=Math.sqrt(P/I*2)}var O=C*C;function M(t){var e=(w*w-x*x+(t?-1:1)*O*O*I*I)/(2*(t?w:x)*O*I);return Math.log(Math.sqrt(e*e+1)-e)}function k(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}var E=M(0),T=function(t){return S(E)/S(E+C*t)},R=function(t){return x*((S(E)*(k(e=E+C*t)/S(e))-k(E))/O)/I;var e},L=(M(1)-E)/C;if(Math.abs(I)<1e-6||!isFinite(L)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var z=w<x?-1:1;L=Math.abs(Math.log(w/x))/C,R=function(){return 0},T=function(t){return Math.exp(z*C*t)}}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/C:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=d!==l,this._padding=!r.isPaddingEqual(p),this._prepareEase(n,!1),this._ease((function(e){var o=e*L,g=1/T(o);r.zoom=1===e?h:a+r.scaleZoom(g),i._rotating&&(r.bearing=t.number(s,u,e)),i._pitching&&(r.pitch=t.number(l,d,e)),i._padding&&(r.interpolatePadding(c,p,e),f=r.centerPoint.add(m));var v=1===e?b:r.unproject(y.add(_.mult(R(o))).mult(g));r.setLocationAtPoint(r.renderWorldCopies?v.wrap():v,f),i._fireMoveEvents(n)}),(function(){return i._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var i=this.handlers;i&&i.stop(!1)}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),_o=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};_o.prototype.getDefaultPosition=function(){return"bottom-right"},_o.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},_o.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},_o.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=n.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},_o.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},_o.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var o=n[i];if(o.used){var r=o.getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},_o.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Co=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Co.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Co.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Co.prototype.getDefaultPosition=function(){return"bottom-left"},Co.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Co.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Co.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xo.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xo.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var o=i[n];if(o.id===t)return void(o.cancelled=!0)}},xo.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,i=e;n<i.length;n+=1){var o=i[n];if(!o.cancelled&&(o.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wo={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Io=t.window.HTMLImageElement,Ao=t.window.HTMLElement,Po=t.window.ImageBitmap,Oo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Mo=function(i){function o(e){var n=this;if(null!=(e=t.extend({},Oo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var o=new wi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(i.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xo,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wo,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ao))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new bo(this,e),this._hash=e.hash&&new Ai("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new _o({customAttribution:e.customAttribution})),this.addControl(new Co,e.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){n.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(o.__proto__=i),(o.prototype=Object.create(i&&i.prototype)).constructor=o;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var o=this._controlPositions[n];return-1!==n.indexOf("bottom")?o.insertBefore(i,o.firstChild):o.appendChild(i),this},o.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},o.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],o=n[1];this._resizeCanvas(i,o),this.transform.resize(i,o),this.painter.resize(i,o);var r=!this._moving;return r&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),r&&this.fire(new t.Event("moveend",e)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},o.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},o.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},o.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},o.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},o.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},o.prototype._createDelegatedListener=function(t,e,n){var i,o=this;if("mouseenter"===t||"mouseover"===t){var r=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){var a=o.getLayer(e)?o.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?r||(r=!0,n.call(o,new Li(t,o,i.originalEvent,{features:a}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){(o.getLayer(e)?o.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(o,new Li(t,o,i.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(o,new Li(t,o,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(i={},i[t]=function(t){var i=o.getLayer(e)?o.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(o,t),delete t.features)},i)}},o.prototype.on=function(t,e,n){if(void 0===n)return i.prototype.on.call(this,t,e);var o=this._createDelegatedListener(t,e,n);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(r,o.delegates[r]);return this},o.prototype.once=function(t,e,n){if(void 0===n)return i.prototype.once.call(this,t,e);var o=this._createDelegatedListener(t,e,n);for(var r in o.delegates)this.once(r,o.delegates[r]);return this},o.prototype.off=function(t,e,n){var o=this;return void 0===n?i.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var r=i[t],a=0;a<r.length;a++){var s=r[a];if(s.layer===e&&s.listener===n){for(var l in s.delegates)o.off(l,s.delegates[l]);return r.splice(a,1),o}}}(this._delegatedListeners),this)},o.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var o=t.Point.convert(e[0]),r=t.Point.convert(e[1]);i=[o,new t.Point(r.x,o.y),r,new t.Point(o.x,r.y),o]}return this.style.queryRenderedFeatures(i,n,this.transform)},o.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},o.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},o.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},o.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ze(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ze(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},o.prototype._diffStyle=function(e,n){var i=this;if("string"==typeof e){var o=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(o,t.ResourceType.Style);t.getJSON(r,(function(e,o){e?i.fire(new t.ErrorEvent(e)):o&&i._updateDiff(o,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},o.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},o.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},o.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var o=n[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},o.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},o.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},o.prototype.getSource=function(t){return this.style.getSource(t)},o.prototype.addImage=function(e,n,i){void 0===i&&(i={});var o=i.pixelRatio;void 0===o&&(o=1);var r=i.sdf;void 0===r&&(r=!1);var a=i.stretchX,s=i.stretchY,l=i.content;if(this._lazyInitEmptyStyle(),n instanceof Io||Po&&n instanceof Po){var c=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:o,stretchX:a,stretchY:s,content:l,sdf:r,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var h=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:o,stretchX:a,stretchY:s,content:l,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}},o.prototype.updateImage=function(e,n){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var o=n instanceof Io||Po&&n instanceof Po?t.browser.getImageData(n):n,r=o.width,a=o.height,s=o.data;return void 0===r||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):r!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(n instanceof Io||Po&&n instanceof Po)),void this.style.updateImage(e,i))},o.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},o.prototype.removeImage=function(t){this.style.removeImage(t)},o.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},o.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},o.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},o.prototype.getLayer=function(t){return this.style.getLayer(t)},o.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},o.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},o.prototype.getFilter=function(t){return this.style.getFilter(t)},o.prototype.setPaintProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,n,i),this._update(!0)},o.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},o.prototype.setLayoutProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,n,i),this._update(!0)},o.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},o.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},o.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},o.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var o=this._controlContainer=n.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){r[t]=n.create("div","mapboxgl-ctrl-"+t,o)}))},o.prototype._resizeCanvas=function(e,n){var i=t.browser.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},o.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(this.painter=new yi(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},o.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},o.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},o.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},o.prototype._render=function(e){var n,i=this,o=0,r=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n),o=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var c=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),h=c.crossFadingFactor();1===h&&h===this._crossFadingFactor||(a=!0,this._crossFadingFactor=h),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var u=t.browser.now()-o;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),i.fire(new t.Event("gpu-timing-frame",{cpuTime:u,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var e=i.painter.queryGpuTimers(d);i.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},o.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},o.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},r.version.get=function(){return t.version},Object.defineProperties(o.prototype,r),o}(yo);function ko(t){t.parentNode&&t.parentNode.removeChild(t)}var So={showCompass:!0,showZoom:!0,visualizePitch:!1},Eo=function(e){var i=this;this.options=t.extend({},So,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Eo.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Eo.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Eo.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new To(this._map,this._compass,this.options.visualizePitch)),this._container},Eo.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Eo.prototype._createButton=function(t,e){var i=n.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Eo.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var To=function(e,i,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=i,this.mouseRotate=new Ki({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,o&&(this.mousePitch=new Ui({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchmove",this.touchmove),n.addEventListener(i,"touchend",this.touchend),n.addEventListener(i,"touchcancel",this.reset)};function Ro(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){var o=new t.LngLat(e.lng-360,e.lat),r=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(n);i.locationPoint(o).distSqr(n)<a?e=o:i.locationPoint(r).distSqr(n)<a&&(e=r)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}To.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()},To.prototype.move=function(t,e){var n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){var o=this.mousePitch.mousemoveWindow(t,e);o&&o.pitchDelta&&n.setPitch(n.getPitch()+o.pitchDelta)}},To.prototype.off=function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},To.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},To.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},To.prototype.mousemove=function(t){this.move(t,n.mousePos(this.element,t))},To.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},To.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},To.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},To.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},To.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Lo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zo(t,e,n){var i=t.classList;for(var o in Lo)i.remove("mapboxgl-"+n+"-anchor-"+o);i.add("mapboxgl-"+n+"-anchor-"+e)}var Bo,jo=function(e){function i(i,o){var r=this;if(e.call(this),(i instanceof t.window.HTMLElement||o)&&(i=t.extend({element:i},o)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var c=n.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"transform","translate(3.0, 29.0)"),c.setAttributeNS(null,"fill","#000000");for(var h=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];h<u.length;h+=1){var d=u[h],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",d.rx),p.setAttributeNS(null,"ry",d.ry),c.appendChild(p)}var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill",this._color);var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),g.appendChild(m);var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var v=n.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(v);var b=n.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(6.0, 7.0)"),b.setAttributeNS(null,"fill","#FFFFFF");var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var C=n.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),y.appendChild(_),y.appendChild(C),l.appendChild(c),l.appendChild(g),l.appendChild(f),l.appendChild(b),l.appendChild(y),a.appendChild(l),a.setAttributeNS(null,"height",41*this._scale+"px"),a.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=r._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),zo(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},i.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ro(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Lo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},i.prototype.getRotation=function(){return this._rotation},i.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},i.prototype.getRotationAlignment=function(){return this._rotationAlignment},i.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},i.prototype.getPitchAlignment=function(){return this._pitchAlignment},i}(t.Evented),Do={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fo=0,Vo=!1,No=function(e){function i(n){e.call(this),this.options=t.extend({},Do,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Bo?i(Bo):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){i(Bo="denied"!==t.state)})):i(Bo=!!t.window.navigator.geolocation),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fo=0,Vo=!1},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},i.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,o=this._map.getBearing(),r=t.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),r,{geolocateSource:!0})},i.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},i.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),i=e.distanceTo(n),o=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=o+"px",this._circleElement.style.height=o+"px"},i.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},i.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Vo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new jo(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fo--,Vo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fo>1?(e={maximumAge:6e5,timeout:0},Vo=!0):(e=this.options.positionOptions,Vo=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),$o={maxWidth:100,unit:"metric"},Zo=function(e){this.options=t.extend({},$o,e),t.bindAll(["_onMove","setUnit"],this)};function Go(t,e,n){var i=n&&n.maxWidth||100,o=t._container.clientHeight/2,r=t.unproject([0,o]),a=t.unproject([i,o]),s=r.distanceTo(a);if(n&&"imperial"===n.unit){var l=3.2808*s;l>5280?Wo(e,i,l/5280,t._getUIString("ScaleControl.Miles")):Wo(e,i,l,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Wo(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Wo(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers")):Wo(e,i,s,t._getUIString("ScaleControl.Meters"))}function Wo(t,e,n,i){var o,r,a,s=(o=n,(r=Math.pow(10,(""+Math.floor(o)).length-1))*(a=(a=o/r)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+i}Zo.prototype.getDefaultPosition=function(){return"bottom-left"},Zo.prototype._onMove=function(){Go(this._map,this._container,this.options)},Zo.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Zo.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Zo.prototype.setUnit=function(t){this.options.unit=t,Go(this._map,this._container,this.options)};var Ho=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ho.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ho.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ho.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Ho.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ho.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Ho.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ho.prototype._isFullscreen=function(){return this._fullscreen},Ho.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ho.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ko={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Uo=function(e){function i(n){e.call(this),this.options=t.extend(Object.create(Ko),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),o=t.window.document.createElement("body");for(o.innerHTML=e;n=o.firstChild;)i.appendChild(n);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},i.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},i.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},i.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},i.prototype._onMouseUp=function(t){this._update(t.point)},i.prototype._onMouseMove=function(t){this._update(t.point)},i.prototype._onDrag=function(t){this._update(t.point)},i.prototype._update=function(e){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ro(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var o=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),r=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var o=t.Point.convert(n);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){var s,l=this._container.offsetWidth,c=this._container.offsetHeight;s=o.y+a.bottom.y<c?["top"]:o.y>this._map.transform.height-c?["bottom"]:[],o.x<l/2?s.push("left"):o.x>this._map.transform.width-l/2&&s.push("right"),r=0===s.length?"bottom":s.join("-")}var h=o.add(a[r]).round();n.setTransform(this._container,Lo[r]+" translate("+h.x+"px,"+h.y+"px)"),zo(this._container,r,"popup")}},i.prototype._onClose=function(){this.remove()},i}(t.Evented),Xo={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Mo,NavigationControl:Eo,GeolocateControl:No,AttributionControl:_o,ScaleControl:Zo,FullscreenControl:Ho,Popup:Uo,Marker:jo,Style:Ze,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Dt().acquire(Lt)},clearPrewarmedResources:function(){var t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Lt),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return zt.workerCount},set workerCount(t){zt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Xo})),n}()},"5+WD":function(t,e,n){"use strict";n.d(e,"a",(function(){return ft})),n.d(e,"b",(function(){return pt})),n.d(e,"c",(function(){return ht})),n.d(e,"d",(function(){return bt})),n.d(e,"e",(function(){return K})),n.d(e,"f",(function(){return U}));var i=n("MjGE"),o=n("tpaX"),r=n("PbCK"),a=n("u6We"),s=n("fXoL"),l=n("ofXK"),c=n("vxfF"),h=n("nLfN"),u=n("8LU1"),d=n("XNiG"),p=n("quSY"),g=n("l5mm"),m=n("eNwd"),f=n("HDdC"),v=n("VRyK"),b=n("1G5W"),y=n("JX91"),_=n("lJxs"),C=n("IzEk"),x=n("vkgz"),w=n("eIep"),I=n("cH1L");function A(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function P(t,e){var n=e?"":"none";A(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function O(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function M(t,e){return t.getPropertyValue(e).split(",").map((function(t){return t.trim()}))}function k(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function S(t,e,n){return n>=t.top&&n<=t.bottom&&e>=t.left&&e<=t.right}function E(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function T(t,e,n,i){var o=t.width*e,r=t.height*e;return i>t.top-r&&i<t.bottom+r&&n>t.left-o&&n<t.right+o}var R=function(){function t(e,n){Object(r.a)(this,t),this._document=e,this._viewportRuler=n,this.positions=new Map}return Object(a.a)(t,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(t){var e=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach((function(t){e.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:k(t)})}))}},{key:"handleScroll",value:function(t){var e=t.target,n=this.positions.get(e);if(!n)return null;var i,o,r=e===this._document?e.documentElement:e,a=n.scrollPosition;if(e===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,o=s.left}else i=e.scrollTop,o=e.scrollLeft;var l=a.top-i,c=a.left-o;return this.positions.forEach((function(t,n){t.clientRect&&e!==n&&r.contains(n)&&E(t.clientRect,l,c)})),a.top=i,a.left=o,{top:l,left:c}}}]),t}();function L(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===i?j(t,e):"input"!==i&&"select"!==i&&"textarea"!==i||B(t,e),z("canvas",t,e,j),z("input, textarea, select",t,e,B),e}function z(t,e,n,i){var o=e.querySelectorAll(t);if(o.length)for(var r=n.querySelectorAll(t),a=0;a<o.length;a++)i(o[a],r[a])}function B(t,e){e.value=t.value}function j(t,e){var n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(i){}}var D=Object(h.e)({passive:!0}),F=Object(h.e)({passive:!1}),V=function(){function t(e,n,i,o,a,s){var l=this;Object(r.a)(this,t),this._config=n,this._document=i,this._ngZone=o,this._viewportRuler=a,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new d.a,this._pointerMoveSubscription=p.a.EMPTY,this._pointerUpSubscription=p.a.EMPTY,this._scrollSubscription=p.a.EMPTY,this._resizeSubscription=p.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new d.a,this.started=new d.a,this.released=new d.a,this.ended=new d.a,this.entered=new d.a,this.exited=new d.a,this.dropped=new d.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=function(t){if(l.beforeStarted.next(),l._handles.length){var e=l._handles.find((function(e){var n=t.target;return!!n&&(n===e||e.contains(n))}));!e||l._disabledHandles.has(e)||l.disabled||l._initializeDragSequence(e,t)}else l.disabled||l._initializeDragSequence(l._rootElement,t)},this._pointerMove=function(t){t.preventDefault();var e=l._getPointerPositionOnPage(t);if(l._hasStartedDragging){l._boundaryElement&&(l._previewRect&&(l._previewRect.width||l._previewRect.height)||(l._previewRect=(l._preview||l._rootElement).getBoundingClientRect()));var n=l._getConstrainedPointerPosition(e);if(l._hasMoved=!0,l._lastKnownPointerPosition=e,l._updatePointerDirectionDelta(n),l._dropContainer)l._updateActiveDropContainer(n,e);else{var i=l._activeTransform;if(i.x=n.x-l._pickupPositionOnPage.x+l._passiveTransform.x,i.y=n.y-l._pickupPositionOnPage.y+l._passiveTransform.y,l._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&l._rootElement instanceof SVGElement){var o="translate(".concat(i.x," ").concat(i.y,")");l._rootElement.setAttribute("transform",o)}}l._moveEvents.observers.length&&l._ngZone.run((function(){l._moveEvents.next({source:l,pointerPosition:n,event:t,distance:l._getDragDistance(n),delta:l._pointerDirectionDelta})}))}else if(Math.abs(e.x-l._pickupPositionOnPage.x)+Math.abs(e.y-l._pickupPositionOnPage.y)>=l._config.dragStartThreshold){if(!(Date.now()>=l._dragStartTime+l._getDragStartDelay(t)))return void l._endDragSequence(t);l._dropContainer&&l._dropContainer.isDragging()||(l._hasStartedDragging=!0,l._ngZone.run((function(){return l._startDragSequence(t)})))}},this._pointerUp=function(t){l._endDragSequence(t)},this.withRootElement(e),this._parentPositions=new R(i,a),s.registerDragItem(this)}return Object(a.a)(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(t){return this._handles=t.map((function(t){return Object(u.d)(t)})),this._handles.forEach((function(t){return P(t,!1)})),this._toggleNativeDragInteractions(),this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=this,n=Object(u.d)(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular((function(){n.addEventListener("mousedown",e._pointerDown,F),n.addEventListener("touchstart",e._pointerDown,D)})),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(u.d)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe((function(){return e._containInsideBoundaryOnResize()}))),this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Z(this._rootElement),Z(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}},{key:"enableHandle",value:function(t){this._disabledHandles.delete(t)}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&Z(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&Z(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then((function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)}))):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run((function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})})),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){G(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var e,n=this._dropContainer;if(n){var i=this._rootElement,o=i.parentNode,r=this._preview=this._createPreviewElement(),a=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(s,i),i.style.display="none",this._document.body.appendChild(o.replaceChild(a,i)),(e=this._document,e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body).appendChild(r),this.started.next({source:this}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(t,e){var n=this;e.stopPropagation();var i=this.isDragging(),o=G(e),r=!o&&0!==e.button,a=this._rootElement,s=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(i||r||s)){this._handles.length&&(this._rootElementTapHighlight=a.style.webkitTapHighlightColor||"",a.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe((function(t){n._updateOnScroll(t)})),this._boundaryElement&&(this._boundaryRect=k(this._boundaryElement));var l=this._previewTemplate;this._pickupPositionInElement=l&&l.template&&!l.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);var c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run((function(){var n=e._dropContainer,i=n.getItemIndex(e),o=e._getPointerPositionOnPage(t),r=e._getDragDistance(e._getPointerPositionOnPage(t)),a=n._isOverContainer(o.x,o.y);e.ended.next({source:e,distance:r}),e.dropped.next({item:e,currentIndex:i,previousIndex:e._initialIndex,container:n,previousContainer:e._initialContainer,isPointerOverContainer:a,distance:r}),n.drop(e,i,e._initialContainer,a,r,e._initialIndex),e._dropContainer=e._initialContainer}))}},{key:"_updateActiveDropContainer",value:function(t,e){var n=this,i=t.x,o=t.y,r=e.x,a=e.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,o);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,o)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run((function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,o,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})})),this._dropContainer._startScrollingIfNecessary(r,a),this._dropContainer._sortItem(this,i,o,this._pointerDirectionDelta),this._preview.style.transform=N(i-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,i=e?e.template:null;if(i&&e){var o=e.matchSize?this._rootElement.getBoundingClientRect():null,r=e.viewContainer.createEmbeddedView(i,e.context);r.detectChanges(),t=W(r,this._document),this._previewRef=r,e.matchSize?H(t,o):t.style.transform=N(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement;H(t=L(a),a.getBoundingClientRect())}return A(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),P(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach((function(e){return t.classList.add(e)})):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=N(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=M(e,"transition-property"),i=n.find((function(t){return"transform"===t||"all"===t}));if(!i)return 0;var o=n.indexOf(i),r=M(e,"transition-duration"),a=M(e,"transition-delay");return O(r[o])+O(a[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular((function(){return new Promise((function(e){var i=function n(i){(!i||i.target===t._preview&&"transform"===i.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(i,1.5*n);t._preview.addEventListener("transitionend",i)}))}))}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=W(this._placeholderRef,this._document)):t=L(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():n,r=G(e)?e.targetTouches[0]:e,a=this._getViewportScrollPosition();return{x:o.left-n.left+(r.pageX-o.left-a.left),y:o.top-n.top+(r.pageY-o.top-a.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=this._getViewportScrollPosition(),n=G(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,i=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){var r=this._ownerSVGElement.getScreenCTM();if(r){var a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(r.inverse())}}return{x:i,y:o}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(t,this):t,i=n.x,o=n.y;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(i=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,a=r.x,s=r.y,l=this._boundaryRect,c=this._previewRect,h=l.top+s,u=l.bottom-(c.height-s);i=$(i,l.left+a,l.right-(c.width-a)),o=$(o,h,u)}return{x:i,y:o}}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,r=Math.abs(e-o.x),a=Math.abs(n-o.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>o.y?1:-1,o.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,P(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,F),t.removeEventListener("touchstart",this._pointerDown,D)}},{key:"_applyRootElementTransform",value:function(t,e){var n=N(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===o.width&&0===o.height)){var r=i.left-o.left,a=o.right-i.right,s=i.top-o.top,l=o.bottom-i.bottom;i.width>o.width?(r>0&&(e+=r),a>0&&(e-=a)):e=0,i.height>o.height?(s>0&&(n+=s),l>0&&(n-=l)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:G(t)?e.touch:e?e.mouse:0}},{key:"_updateOnScroll",value:function(t){var e=this._parentPositions.handleScroll(t);if(e){var n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&E(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(u.b)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}}]),t}();function N(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function $(t,e,n){return Math.max(e,Math.min(n,t))}function Z(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function G(t){return"t"===t.type[0]}function W(t,e){var n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];var i=e.createElement("div");return n.forEach((function(t){return i.appendChild(t)})),i}function H(t,e){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.transform=N(e.left,e.top)}function K(t,e,n){var i=X(e,t.length-1),o=X(n,t.length-1);if(i!==o){for(var r=t[i],a=o<i?-1:1,s=i;s!==o;s+=a)t[s]=t[s+a];t[o]=r}}function U(t,e,n,i){var o=X(n,t.length-1),r=X(i,e.length);t.length&&e.splice(r,0,t.splice(o,1)[0])}function X(t,e){return Math.max(0,Math.min(e,t))}var Y=function(){function t(e,n,i,o,a){var s=this;Object(r.a)(this,t),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new d.a,this.entered=new d.a,this.exited=new d.a,this.dropped=new d.a,this.sorted=new d.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=p.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new d.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){s._stopScrolling(),Object(g.a)(0,m.b).pipe(Object(b.a)(s._stopScrollTimers)).subscribe((function(){var t=s._scrollNode;1===s._verticalScrollDirection?q(t,-2):2===s._verticalScrollDirection&&q(t,2),1===s._horizontalScrollDirection?Q(t,-2):2===s._horizontalScrollDirection&&Q(t,2)}))},this.element=Object(u.d)(e),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new R(i,a)}return Object(a.a)(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){var t=this,e=Object(u.d)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach((function(e){return e._startReceiving(t)})),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"enter",value:function(t,e,n,i){var o;this.start(),null==i?-1===(o=this.sortingDisabled?this._draggables.indexOf(t):-1)&&(o=this._getItemIndexFromPointerPosition(t,e,n)):o=i;var r=this._activeDraggables,a=r.indexOf(t),s=t.getPlaceholderElement(),l=r[o];if(l===t&&(l=r[o+1]),a>-1&&r.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){var c=l.getRootElement();c.parentElement.insertBefore(s,c),r.splice(o,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){var h=r[0].getRootElement();h.parentNode.insertBefore(s,h),r.unshift(t)}else Object(u.d)(this.element).appendChild(s),r.push(t);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,i,o,r){this._reset(),null==r&&(r=n.getItemIndex(t)),this.dropped.next({item:t,currentIndex:e,previousIndex:r,container:this,previousContainer:n,isPointerOverContainer:i,distance:o})}},{key:"withItems",value:function(t){var e=this,n=this._draggables;return this._draggables=t,t.forEach((function(t){return t._withDropContainer(e)})),this.isDragging()&&(n.filter((function(t){return t.isDragging()})).every((function(e){return-1===t.indexOf(e)}))?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"withScrollableParents",value:function(t){var e=Object(u.d)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e].concat(Object(o.a)(t)):t.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(t){return this._isDragging?J("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,(function(e){return e.drag===t})):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,i){if(!this.sortingDisabled&&T(this._clientRect,.05,e,n)){var o=this._itemPositions,r=this._getItemIndexFromPointerPosition(t,e,n,i);if(!(-1===r&&o.length>0)){var a="horizontal"===this._orientation,s=J(o,(function(e){return e.drag===t})),l=o[r],c=l.clientRect,h=s>r?1:-1,u=this._getItemOffsetPx(o[s].clientRect,c,h),d=this._getSiblingOffsetPx(s,o,h),p=o.slice();K(o,s,r),this.sorted.next({previousIndex:s,currentIndex:r,container:this,item:t}),o.forEach((function(e,n){if(p[n]!==e){var i=e.drag===t,o=i?u:d,r=i?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=o,a?(r.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),E(e.clientRect,0,o)):(r.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),E(e.clientRect,o,0))}})),this._previousSwap.overlaps=S(c,e,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(t,e){var n=this;if(!this.autoScrollDisabled){var o,r=0,a=0;if(this._parentPositions.positions.forEach((function(s,l){if(l!==n._document&&s.clientRect&&!o&&T(s.clientRect,.05,t,e)){var c=function(t,e,n,i){var o=tt(e,i),r=et(e,n),a=0,s=0;if(o){var l=t.scrollTop;1===o?l>0&&(a=1):t.scrollHeight-l>t.clientHeight&&(a=2)}if(r){var c=t.scrollLeft;1===r?c>0&&(s=1):t.scrollWidth-c>t.clientWidth&&(s=2)}return[a,s]}(l,s.clientRect,t,e),h=Object(i.a)(c,2);a=h[1],((r=h[0])||a)&&(o=l)}})),!r&&!a){var s=this._viewportRuler.getViewportSize(),l=s.width,c=s.height,h={width:l,height:c,top:0,right:l,bottom:c,left:0};r=tt(h,e),a=et(h,t),o=window}!o||r===this._verticalScrollDirection&&a===this._horizontalScrollDirection&&o===this._scrollNode||(this._verticalScrollDirection=r,this._horizontalScrollDirection=a,this._scrollNode=o,(r||a)&&o?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_cacheParentPositions",value:function(){var t=Object(u.d)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}},{key:"_cacheItemPositions",value:function(){var t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map((function(t){var e=t.getVisibleElement();return{drag:t,offset:0,clientRect:k(e)}})).sort((function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top}))}},{key:"_reset",value:function(){var t=this;this._isDragging=!1;var e=Object(u.d)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach((function(t){var e=t.getRootElement();e&&(e.style.transform="")})),this._siblings.forEach((function(e){return e._stopReceiving(t)})),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,o=e[t].clientRect,r=e[t+-1*n],a=o[i?"width":"height"]*n;if(r){var s=i?"left":"top",l=i?"right":"bottom";-1===n?a-=r.clientRect[s]-o[l]:a+=o[s]-r.clientRect[l]}return a}},{key:"_getItemOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,o=i?e.left-t.left:e.top-t.top;return-1===n&&(o+=i?e.width-t.width:e.height-t.height),o}},{key:"_shouldEnterAsFirstChild",value:function(t,e){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return i?t>=o.right:e>=o.bottom}var r=n[0].clientRect;return i?t<=r.left:e<=r.top}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,i){var o=this,r="horizontal"===this._orientation;return J(this._itemPositions,(function(a,s,l){var c=a.drag,h=a.clientRect;return c===t?l.length<2:(!i||c!==o._previousSwap.drag||!o._previousSwap.overlaps||(r?i.x:i.y)!==o._previousSwap.delta)&&(r?e>=Math.floor(h.left)&&e<Math.floor(h.right):n>=Math.floor(h.top)&&n<Math.floor(h.bottom))}))}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(t,e){return S(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find((function(i){return i._canReceive(t,e,n)}))}},{key:"_canReceive",value:function(t,e,n){if(!S(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var i=this._getShadowRoot().elementFromPoint(e,n);if(!i)return!1;var o=Object(u.d)(this.element);return i===o||o.contains(i)}},{key:"_startReceiving",value:function(t){var e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe((function(e){if(t.isDragging()){var n=t._parentPositions.handleScroll(e);n&&(t._itemPositions.forEach((function(t){E(t.clientRect,n.top,n.left)})),t._itemPositions.forEach((function(e){var n=e.drag;t._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})))}else t.isReceiving()&&t._cacheParentPositions()}))}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var t=Object(h.c)(Object(u.d)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}}]),t}();function J(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function q(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function Q(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function tt(t,e){var n=t.top,i=t.bottom,o=.05*t.height;return e>=n-o&&e<=n+o?1:e>=i-o&&e<=i+o?2:0}function et(t,e){var n=t.left,i=t.right,o=.05*t.width;return e>=n-o&&e<=n+o?1:e>=i-o&&e<=i+o?2:0}var nt=Object(h.e)({passive:!1,capture:!0}),it=function(){var t=function(){function t(e,n){var i=this;Object(r.a)(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new d.a,this.pointerUp=new d.a,this.scroll=new d.a,this._preventDefaultWhileDragging=function(t){i._activeDragInstances.size&&t.preventDefault()},this._document=n}return Object(a.a)(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular((function(){e._document.addEventListener("touchmove",e._preventDefaultWhileDragging,nt)}))}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,nt)}},{key:"startDragging",value:function(t,e){var n=this;if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){var i=e.type.startsWith("touch"),o=i?"touchend":"mouseup";this._globalListeners.set(i?"touchmove":"mousemove",{handler:function(t){return n.pointerMove.next(t)},options:nt}).set(o,{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nt}),this._ngZone.runOutsideAngular((function(){n._globalListeners.forEach((function(t,e){n._document.addEventListener(e,t.handler,t.options)}))}))}}},{key:"stopDragging",value:function(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(t){return this._activeDragInstances.has(t)}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach((function(e){return t.removeDragItem(e)})),this._dropInstances.forEach((function(e){return t.removeDropContainer(e)})),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach((function(e,n){t._document.removeEventListener(n,e.handler,e.options)})),this._globalListeners.clear()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](l.d))},t.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(l.d))},token:t,providedIn:"root"}),t}(),ot={dragStartThreshold:5,pointerDirectionChangeThreshold:5},rt=function(){var t=function(){function t(e,n,i,o){Object(r.a)(this,t),this._document=e,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=o}return Object(a.a)(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;return new V(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new Y(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](l.d),s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](c.e),s["\u0275\u0275inject"](it))},t.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(s["\u0275\u0275inject"])(l.d),Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(c.e),Object(s["\u0275\u0275inject"])(it))},token:t,providedIn:"root"}),t}(),at=new s.InjectionToken("CdkDropListGroup"),st=new s.InjectionToken("CDK_DRAG_CONFIG"),lt=0,ct=new s.InjectionToken("CdkDropList"),ht=function(){var t=function(){function t(e,n,i,o,a,l,c){var h=this;Object(r.a)(this,t),this.element=e,this._changeDetectorRef=i,this._dir=o,this._group=a,this._scrollDispatcher=l,this._destroyed=new d.a,this.connectedTo=[],this.id="cdk-drop-list-".concat(lt++),this.enterPredicate=function(){return!0},this.dropped=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.sorted=new s.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=function(t,e){return h.enterPredicate(t.data,e.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),a&&a._items.add(this)}return Object(a.a)(t,[{key:"addItem",value:function(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort((function(t,e){return t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}))}},{key:"ngOnDestroy",value:function(){var e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(e){var n=this;this._dir&&this._dir.change.pipe(Object(y.a)(this._dir.value),Object(b.a)(this._destroyed)).subscribe((function(t){return e.withDirection(t)})),e.beforeStarted.subscribe((function(){var i=Object(u.a)(n.connectedTo).map((function(e){if("string"==typeof e){var n=t._dropLists.find((function(t){return t.id===e}));return!n&&Object(s.isDevMode)()&&console.warn('CdkDropList could not find connected drop list with id "'.concat(e,'"')),n}return e}));if(n._group&&n._group._items.forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),!n._scrollableParentsResolved&&n._scrollDispatcher){var o=n._scrollDispatcher.getAncestorScrollContainers(n.element).map((function(t){return t.getElementRef().nativeElement}));n._dropListRef.withScrollableParents(o),n._scrollableParentsResolved=!0}e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.sortingDisabled=Object(u.b)(n.sortingDisabled),e.autoScrollDisabled=Object(u.b)(n.autoScrollDisabled),e.connectedTo(i.filter((function(t){return t&&t!==n})).map((function(t){return t._dropListRef}))).withOrientation(n.orientation)}))}},{key:"_handleEvents",value:function(t){var e=this;t.beforeStarted.subscribe((function(){e._syncItemsWithRef(),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:e,item:t.item.data,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:e,item:t.item.data}),e._changeDetectorRef.markForCheck()})),t.sorted.subscribe((function(t){e.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:e,item:t.item.data})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance}),e._changeDetectorRef.markForCheck()}))}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.draggingDisabled,i=t.sortingDisabled,o=t.listAutoScrollDisabled,r=t.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=o&&o,this.orientation=r||"vertical",e&&(this.lockAxis=e)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map((function(t){return t._dragRef})))}},{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(t){this._dropListRef.disabled=this._disabled=Object(u.b)(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](rt),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](I.b,8),s["\u0275\u0275directiveInject"](at,12),s["\u0275\u0275directiveInject"](c.c),s["\u0275\u0275directiveInject"](st,8))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,e){2&t&&(s["\u0275\u0275hostProperty"]("id",e.id),s["\u0275\u0275classProp"]("cdk-drop-list-disabled",e.disabled)("cdk-drop-list-dragging",e._dropListRef.isDragging())("cdk-drop-list-receiving",e._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:at,useValue:void 0},{provide:ct,useExisting:t}])]}),t._dropLists=[],t}(),ut=new s.InjectionToken("CDK_DRAG_PARENT"),dt=new s.InjectionToken("CdkDragHandle"),pt=function(){var t=function(){function t(e,n){Object(r.a)(this,t),this.element=e,this._stateChanges=new d.a,this._disabled=!1,this._parentDrag=n,P(e.nativeElement,!1)}return Object(a.a)(t,[{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(u.b)(t),this._stateChanges.next(this)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](ut,12))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[s["\u0275\u0275ProvidersFeature"]([{provide:dt,useExisting:t}])]}),t}(),gt=new s.InjectionToken("CdkDragPlaceholder"),mt=new s.InjectionToken("CdkDragPreview"),ft=function(){var t=function(){function t(e,n,i,o,a,l,c,h,u,p){var g=this;Object(r.a)(this,t),this.element=e,this.dropContainer=n,this._document=i,this._ngZone=o,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=u,this._selfHandle=p,this._destroyed=new d.a,this.started=new s.EventEmitter,this.released=new s.EventEmitter,this.ended=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.dropped=new s.EventEmitter,this.moved=new f.a((function(t){var e=g._dragRef.moved.pipe(Object(_.a)((function(t){return{source:g,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}}))).subscribe(t);return function(){e.unsubscribe()}})),this._dragRef=h.createDrag(e,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:null==l?void 0:l.zIndex}),this._dragRef.data=this,l&&this._assignDefaults(l),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object(a.a)(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(Object(C.a)(1),Object(b.a)(this._destroyed)).subscribe((function(){t._updateRootElement(),t._handles.changes.pipe(Object(y.a)(t._handles),Object(x.a)((function(e){var n=e.filter((function(e){return e._parentDrag===t})).map((function(t){return t.element}));t._selfHandle&&t.rootElementSelector&&n.push(t.element),t._dragRef.withHandles(n)})),Object(w.a)((function(t){return v.a.apply(void 0,Object(o.a)(t.map((function(t){return t._stateChanges.pipe(Object(y.a)(t))}))))})),Object(b.a)(t._destroyed)).subscribe((function(e){var n=t._dragRef,i=e.element.nativeElement;e.disabled?n.disableHandle(i):n.enableHandle(i)})),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)}))}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?vt(t,this.rootElementSelector):t;if(e&&e.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+'Currently attached to "'.concat(e.nodeName,'".'));this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;if(!t)return null;if("string"==typeof t)return vt(this.element.nativeElement,t);var e=Object(u.d)(t);if(Object(s.isDevMode)()&&!e.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return e}},{key:"_syncInputs",value:function(t){var e=this;t.beforeStarted.subscribe((function(){if(!t.isDragging()){var n=e._dir,i=e.dragStartDelay,o=e._placeholderTemplate?{template:e._placeholderTemplate.templateRef,context:e._placeholderTemplate.data,viewContainer:e._viewContainerRef}:null,r=e._previewTemplate?{template:e._previewTemplate.templateRef,context:e._previewTemplate.data,matchSize:e._previewTemplate.matchSize,viewContainer:e._viewContainerRef}:null;t.disabled=e.disabled,t.lockAxis=e.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(u.e)(i),t.constrainPosition=e.constrainPosition,t.previewClass=e.previewClass,t.withBoundaryElement(e._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(r),n&&t.withDirection(n.value)}}))}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe((function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()})),t.released.subscribe((function(){e.released.emit({source:e})})),t.ended.subscribe((function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:t.container.data,item:e})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})}))}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.dragStartDelay,i=t.constrainPosition,o=t.previewClass,r=t.boundaryElement,a=t.draggingDisabled,s=t.rootElementSelector;this.disabled=null!=a&&a,this.dragStartDelay=n||0,e&&(this.lockAxis=e),i&&(this.constrainPosition=i),o&&(this.previewClass=o),r&&(this.boundaryElement=r),s&&(this.rootElementSelector=s)}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(u.b)(t),this._dragRef.disabled=this._disabled}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](ct,12),s["\u0275\u0275directiveInject"](l.d),s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](s.ViewContainerRef),s["\u0275\u0275directiveInject"](st,8),s["\u0275\u0275directiveInject"](I.b,8),s["\u0275\u0275directiveInject"](rt),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](dt,10))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var i;1&t&&(s["\u0275\u0275contentQuery"](n,mt,!0),s["\u0275\u0275contentQuery"](n,gt,!0),s["\u0275\u0275contentQuery"](n,dt,!0)),2&t&&(s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._previewTemplate=i.first),s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._placeholderTemplate=i.first),s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&s["\u0275\u0275classProp"]("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:ut,useExisting:t}]),s["\u0275\u0275NgOnChangesFeature"]]}),t}();function vt(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var bt=function(){var t=function t(){Object(r.a)(this,t)};return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[rt],imports:[c.b]}),t}()},"73jG":function(t,e,n){"use strict";var i=n("jLWS");t.exports=function(t){var e,n=t.type||i.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(r){e=t.body}else e=null;var o=t.message||null;o||("string"==typeof e?o=e:e&&"string"==typeof e.message?o=e.message:n===i.ERROR_REQUEST_ABORTED&&(o="Request aborted")),this.message=o,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},"8uiX":function(t,e,n){"use strict";n.r(e),n.d(e,"ObsModule",(function(){return ii}));var i=n("mrSG"),o=n("ofXK"),r=n("tyNb"),a=n("4ZJM"),s=n("jtHE"),l=n("fXoL"),c=function(){function t(){this._map=new s.a(1),this.glMap=this._map.asObservable()}return t.prototype.destroyMap=function(){var t=this;this.getMap().subscribe({next:function(e){e.remove(),t._map.unsubscribe()}})},t.prototype.setMap=function(t){this._map.next(t)},t.prototype.getMap=function(){return this.glMap},t.prototype.setHandlers=function(t,e,n){this.onStyleChange(t,e),this.onClick(n)},t.prototype.onStyleChange=function(t,e){this.getMap().subscribe({next:function(n){n.on("style.load",(function(o){e.map((function(t){var e=Object(i.a)({},t);delete e.id,delete e.convention,delete e.state,n.addSource(t.id,e),t.data&&t.data.features&&t.data.features.map((function(t){t.properties.icon&&n.loadImage(t.properties.icon,(function(e,i){if(e)throw e;n.addImage(t.properties.icon,i)}))}))})),t.map((function(t){n.addLayer(t)}))}))}})},t.prototype.onClick=function(t){this.getMap().subscribe({next:function(e){var n=e;n.on("click",(function(e){var i=n.queryRenderedFeatures([[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]],{layers:t});if(i.length&&"stations"!==i[0].properties.type){var o='<div layout="column" layout-align="center"> <span class="icon-info"></span> <h6>Informaci\xf3n: </h6> <br>',r=["Shape_Leng","Shape_Area","OBJECTID","featureId"],s=i[0].properties;Object.keys(s).map((function(t){return{id:t,name:s[t]}})).map((function(t){-1===r.indexOf(t.id)&&(o=o+"<p>"+t.id+": "+t.name+"</p>")})),o+="</div>",(new a.Popup).setLngLat(e.lngLat).setHTML(o).addTo(n)}}))}})},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),h=n("EUYk"),u=n("mvqV"),d=n("6vL+"),p=n("9OXO"),g=n("aceb"),m=n("/Hes"),f=n("hOK0"),v=n("3aX9"),b=n("P6Yz"),y=n("u6We"),_=n("PbCK"),C=n("LRne"),x=n("HDdC"),w=n("XNiG"),I=n("nYR2"),A=["stepHolder"],P=["stepContainer"];function O(t,e){if(1&t&&l["\u0275\u0275element"](0,"joyride-arrow",17),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275styleProp"]("top",n.arrowTopPosition,"px")("left",n.arrowLeftPosition,"px"),l["\u0275\u0275property"]("position",n.arrowPosition)}}function M(t,e){1&t&&l["\u0275\u0275elementContainer"](0)}function k(t,e){if(1&t&&(l["\u0275\u0275text"](0),l["\u0275\u0275pipe"](1,"async")),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](1,1,n.text)," ")}}function S(t,e){1&t&&l["\u0275\u0275elementContainer"](0)}function E(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",20),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.counter)}}function T(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",18),l["\u0275\u0275template"](1,S,1,0,"ng-container",9),l["\u0275\u0275template"](2,E,2,1,"ng-template",null,19,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275reference"](3),i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",i.customCounter?i.customCounter:n)("ngTemplateOutletContext",i.counterData)}}function R(t,e){1&t&&l["\u0275\u0275elementContainer"](0)}function L(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"joyride-button",24),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("color",n.themeColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,2,n.prevText))}}function z(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",21),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().prev()})),l["\u0275\u0275template"](1,R,1,0,"ng-container",22),l["\u0275\u0275template"](2,L,3,4,"ng-template",null,23,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275reference"](3),o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",o.customPrevButton?o.customPrevButton:i)}}function B(t,e){1&t&&l["\u0275\u0275elementContainer"](0)}function j(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"joyride-button",27),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("color",n.themeColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,2,n.nextText))}}function D(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",25),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().next()})),l["\u0275\u0275template"](1,B,1,0,"ng-container",22),l["\u0275\u0275template"](2,j,3,4,"ng-template",null,26,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275reference"](3),o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",o.customNextButton?o.customNextButton:i)}}function F(t,e){1&t&&l["\u0275\u0275elementContainer"](0)}function V(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"joyride-button",30),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("color",n.themeColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,2,n.doneText))}}function N(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",28),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().close()})),l["\u0275\u0275template"](1,F,1,0,"ng-container",22),l["\u0275\u0275template"](2,V,3,4,"ng-template",null,29,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275reference"](3),o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",o.customDoneButton?o.customDoneButton:i)}}var $,Z=function(t,e,n){return{"background-color":t,color:e,"border-color":n}},G=["*"],W=function t(){Object(_.a)(this,t),this.title=new s.a,this.text=new s.a},H={prev:Object(C.a)("prev"),next:Object(C.a)("next"),done:Object(C.a)("done"),close:Object(C.a)(null)},K=function(){var t=function(){function t(){Object(_.a)(this,t),this.themeColor="#3b5560",this.stepDefaultPosition="bottom",this.logsEnabled=!1,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}return Object(y.a)(t,[{key:"setOptions",value:function(t){this.stepsOrder=t.steps,this.stepDefaultPosition=t.stepDefaultPosition?t.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=void 0!==t.logsEnabled?t.logsEnabled:this.logsEnabled,this.showCounter=void 0!==t.showCounter?t.showCounter:this.showCounter,this.showPrevButton=void 0!==t.showPrevButton?t.showPrevButton:this.showPrevButton,this.themeColor=t.themeColor?t.themeColor:this.themeColor,this.firstStep=t.startWith,this.waitingTime=void 0!==t.waitingTime?t.waitingTime:1,this.setCustomText(void 0!==t.customTexts?t.customTexts:H)}},{key:"getBackdropColor",value:function(){return this.hexToRgb(this.themeColor)}},{key:"getThemeColor",value:function(){return this.themeColor}},{key:"getStepDefaultPosition",value:function(){return this.stepDefaultPosition}},{key:"getStepsOrder",value:function(){return this.stepsOrder}},{key:"getFirstStep",value:function(){return this.firstStep}},{key:"getWaitingTime",value:function(){return this.waitingTime}},{key:"areLogsEnabled",value:function(){return this.logsEnabled}},{key:"isCounterVisible",value:function(){return this.showCounter}},{key:"isPrevButtonVisible",value:function(){return this.showPrevButton}},{key:"getCustomTexts",value:function(){return this.customTexts}},{key:"setCustomText",value:function(t){var e,n,i;e=t.next?t.next:H.next,n=t.done?t.done:H.done,i=t.close?t.close:H.close,this.customTexts={prev:this.toObservable(t.prev?t.prev:H.prev),next:this.toObservable(e),done:this.toObservable(n),close:this.toObservable(i)}}},{key:"toObservable",value:function(t){return t instanceof x.a?t:Object(C.a)(t)}},{key:"hexToRgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?"".concat(parseInt(e[1],16),", ").concat(parseInt(e[2],16),", ").concat(parseInt(e[3],16)):null}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),U="ngx-joyride:::",X=function(){var t=function(){function t(e){Object(_.a)(this,t),this.optionService=e}return Object(y.a)(t,[{key:"debug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.debug(U+t,e)}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.info(U+t,e)}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.warn(U+t,e)}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.error(U+t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](K))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),Y=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var i;return Object(_.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(m.a)(i),n.prototype),i}return n}(Object(b.a)(Error)),J=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var i;return Object(_.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(m.a)(i),n.prototype),i}return n}(Object(b.a)(Error)),q=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var i;return Object(_.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(m.a)(i),n.prototype),i}return n}(Object(b.a)(Error)),Q=function(t){return t.NEXT="NEXT",t.PREV="PREV",t}({}),tt=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.stepOptions=e,this.logger=n,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new w.a}return Object(y.a)(t,[{key:"getFirstStepIndex",value:function(){var t=this.stepOptions.getFirstStep(),e=this.stepOptions.getStepsOrder().indexOf(t);return e<0&&(e=0,void 0!==t&&this.logger.warn("The step ".concat(t," does not exist. Check in your step list if it's present."))),e}},{key:"init",value:function(){var t=this;this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach((function(e){return t.steps.push({id:e,step:null})}))}},{key:"addStep",value:function(t){if(this.tempSteps.filter((function(e){return e.name===t.name})).length>0){var e=this.tempSteps.findIndex((function(e){return e.name===t.name}));this.tempSteps[e]=t}else this.logger.info("Adding step ".concat(t.name," to the steps list.")),this.tempSteps.push(t)}},{key:"get",value:function(t){if(t===Q.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new q("The first or last step of the tour cannot be found!");var e=this.getStepName(this.steps[this.currentStepIndex].id),n=this.tempSteps.findIndex((function(t){return t.name===e})),i=this.tempSteps[n];return this.steps[this.currentStepIndex].step=i,null==i&&this.logger.warn("Step ".concat(this.steps[this.currentStepIndex].id," not found in the DOM. Check if it's hidden by *ngIf directive.")),i}},{key:"getStepRoute",value:function(t){var e;return(e=t===Q.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null)&&e.includes("@")?e.split("@")[1]:""}},{key:"updatePosition",value:function(t,e){var n=this.getStepIndex(t);this.steps[n].step?(this.steps[n].step.position=e,this.stepHasBeenModified.next(this.steps[n].step)):this.logger.warn("Trying to modify the position of ".concat(t," to ").concat(e,". Step not found!Is this step located in a different route?"))}},{key:"getStepNumber",value:function(t){return this.getStepIndex(t)+1}},{key:"getStepsCount",value:function(){return this.stepOptions.getStepsOrder().length}},{key:"getStepIndex",value:function(t){var e=this.steps.map((function(t){return t.id.includes("@")?t.id.split("@")[0]:t.id})).findIndex((function(e){return t===e}));if(-1===e)throw new Y("The step with name: ".concat(t," does not exist in the step list."));return e}},{key:"getStepName",value:function(t){return t&&t.includes("@")?t.split("@")[0]:t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](K),l["\u0275\u0275inject"](X))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),et=function(){var t=function(){function t(e){Object(_.a)(this,t),this.platformId=e,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}return Object(y.a)(t,[{key:"getNativeWindow",value:function(){return Object(o.z)(this.platformId)?window:this.fakeWindow}},{key:"getNativeDocument",value:function(){return Object(o.z)(this.platformId)?document:this.fakeDocument}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.PLATFORM_ID))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),nt=function(){var t=function(){function t(){Object(_.a)(this,t)}return Object(y.a)(t,[{key:"setPrevButton",value:function(t){this._prevButton=t}},{key:"getPrevButton",value:function(){return this._prevButton}},{key:"setNextButton",value:function(t){this._nextButton=t}},{key:"getNextButton",value:function(){return this._nextButton}},{key:"setDoneButton",value:function(t){this._doneButton=t}},{key:"getDoneButton",value:function(){return this._doneButton}},{key:"setCounter",value:function(t){this._counter=t}},{key:"getCounter",value:function(){return this._counter}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),it=function(){var t=function(){function t(e,n,i,o,r,a){Object(_.a)(this,t),this.joyrideStepsContainer=e,this.viewContainerRef=n,this.domService=i,this.router=o,this.templateService=r,this.platformId=a,this.stepPosition="NO_POSITION",this.prev=new l.EventEmitter,this.next=new l.EventEmitter,this.done=new l.EventEmitter,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new W}return Object(y.a)(t,[{key:"ngAfterViewInit",value:function(){if(Object(o.z)(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new Y("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.joyrideStepsContainer.addStep(this.step)}}},{key:"ngOnChanges",value:function(t){(t.title||t.text)&&this.setAsyncFields(this.step)}},{key:"isElementFixed",value:function(t){return"fixed"===this.windowRef.getComputedStyle(t.nativeElement).position}},{key:"setAsyncFields",value:function(t){this.title instanceof x.a?this.subscriptions.push(this.title.subscribe((function(e){t.title.next(e)}))):t.title.next(this.title),this.text instanceof x.a?this.subscriptions.push(this.text.subscribe((function(e){t.text.next(e)}))):t.text.next(this.text)}},{key:"isAncestorsFixed",value:function(t){if(!t||!t.parentElement)return!1;var e="fixed"===this.windowRef.getComputedStyle(t.parentElement).position;return"BODY"===t.nodeName?e:!!e||this.isAncestorsFixed(t.parentElement)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](tt),l["\u0275\u0275directiveInject"](l.ViewContainerRef),l["\u0275\u0275directiveInject"](et),l["\u0275\u0275directiveInject"](r.c),l["\u0275\u0275directiveInject"](nt),l["\u0275\u0275directiveInject"](l.PLATFORM_ID))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["joyrideStep"],["","joyrideStep",""]],inputs:{stepPosition:"stepPosition",name:["joyrideStep","name"],nextStep:"nextStep",title:"title",text:"text",stepContent:"stepContent",stepContentParams:"stepContentParams",prevTemplate:"prevTemplate",nextTemplate:"nextTemplate",doneTemplate:"doneTemplate",counterTemplate:"counterTemplate"},outputs:{prev:"prev",next:"next",done:"done"},features:[l["\u0275\u0275NgOnChangesFeature"]]}),t}(),ot=function(){var t=function(){function t(e){Object(_.a)(this,t),this.DOMService=e,this.setDocumentHeight(),document.elementsFromPoint||(document.elementsFromPoint=this.elementsFromPoint.bind(this))}return Object(y.a)(t,[{key:"getElementFixedTop",value:function(t){return t.nativeElement.getBoundingClientRect().top}},{key:"getElementFixedLeft",value:function(t){return t.nativeElement.getBoundingClientRect().left}},{key:"getElementAbsoluteTop",value:function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().top+e.y}},{key:"getElementAbsoluteLeft",value:function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().left+e.x}},{key:"setDocumentHeight",value:function(){this.documentHeight=this.calculateDocumentHeight()}},{key:"getDocumentHeight",value:function(){return this.documentHeight}},{key:"isParentScrollable",value:function(t){return this.getFirstScrollableParent(t.nativeElement)!==this.DOMService.getNativeDocument().body}},{key:"isElementBeyondOthers",value:function(t,e,n){var i=e?this.getElementFixedLeft(t):this.getElementAbsoluteLeft(t),o=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t),r=i+t.nativeElement.getBoundingClientRect().width-1,a=o+t.nativeElement.getBoundingClientRect().height-1,s=this.DOMService.getNativeDocument().elementsFromPoint(i,o),l=this.DOMService.getNativeDocument().elementsFromPoint(r,a);return 0===s.length&&0===l.length?1:this.getFirstElementWithoutKeyword(s,n)!==t.nativeElement||this.getFirstElementWithoutKeyword(l,n)!==t.nativeElement?2:3}},{key:"scrollIntoView",value:function(t,e){var n=this.getFirstScrollableParent(t.nativeElement),i=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t);n!==this.DOMService.getNativeDocument().body?n.scrollTo?n.scrollTo(0,i-150):n.scrollTop=i-150:this.DOMService.getNativeWindow().scrollTo(0,i-150)}},{key:"scrollToTheTop",value:function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)}},{key:"scrollToTheBottom",value:function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)}},{key:"getFirstScrollableParent",value:function(t){var e=this,n=/(auto|scroll|overlay)/,i=function(t,n){return e.DOMService.getNativeWindow().getComputedStyle(t,null).getPropertyValue(n)};return function t(o){return o&&o!==e.DOMService.getNativeDocument().body?function(t){return n.test(i(t,"overflow")+i(t,"overflow-y")+i(t,"overflow-x"))}(o)?o:t(o.parentNode):e.DOMService.getNativeDocument().body}(t)}},{key:"calculateDocumentHeight",value:function(){var t=this.DOMService.getNativeDocument();return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)}},{key:"getScrollOffsets",value:function(){var t=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=t.pageXOffset?{x:t.pageXOffset,y:t.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}}},{key:"elementsFromPoint",value:function(t,e){var n=[],i=void 0;do{var o=this.DOMService.getNativeDocument().elementFromPoint(t,e);o&&i!==o?(n.push(i=o),i.style.pointerEvents="none"):i=!1}while(i);return n.forEach((function(t){return t.style.pointerEvents="all"})),n}},{key:"getFirstElementWithoutKeyword",value:function(t,e){for(;t[0]&&t[0].classList.toString().includes(e);)t.shift();return t[0]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](et))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),rt=function(){var t=function(){function t(e,n,i){Object(_.a)(this,t),this.documentService=e,this.optionsService=n,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}return Object(y.a)(t,[{key:"setRenderer",value:function(){this.renderer=this.rendererFactory.createRenderer(null,null)}},{key:"draw",value:function(t){this.elementRef=t.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(t),this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+t.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer}},{key:"remove",value:function(){this.removeLastBackdrop()}},{key:"redrawTarget",value:function(t){this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.targetAbsoluteTop=this.getTargetTotalTop(t),this.handleVerticalScroll(t),this.handleHorizontalScroll(t)}},{key:"getTargetTotalTop",value:function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)}},{key:"getTargetTotalLeft",value:function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)}},{key:"redraw",value:function(t,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(t)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(t))}},{key:"handleHorizontalScroll",value:function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)}},{key:"handleTargetPartialWidth",value:function(t){this.renderer.setStyle(this.leftBackdrop,"width","0px");var e=this.elementRef.element.nativeElement.offsetWidth+t;this.renderer.setStyle(this.targetBackdrop,"width",e>=0?e+"px":"0px")}},{key:"handleVerticalScroll",value:function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)}},{key:"handleTargetPartialHeight",value:function(t){this.renderer.setStyle(this.backdropTop,"height","0px");var e=this.elementRef.element.nativeElement.offsetHeight+t;this.renderer.setStyle(this.backdropMiddleContainer,"height",e>=0?e+"px":"0px")}},{key:"removeLastBackdrop",value:function(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)}},{key:"drawCurrentBackdrop",value:function(){this.renderer.appendChild(document.body,this.currentBackdropContainer)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](ot),l["\u0275\u0275inject"](K),l["\u0275\u0275inject"](l.RendererFactory2))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),at=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.rendererFactory=e,this.DOMService=n,this.scrollEvent=new w.a,this.resizeEvent=new w.a,this.renderer=e.createRenderer(null,null)}return Object(y.a)(t,[{key:"startListeningScrollEvents",value:function(){var t=this;this.scrollUnlisten=this.renderer.listen("document","scroll",(function(e){t.scrollEvent.next({scrollX:t.DOMService.getNativeWindow().pageXOffset,scrollY:t.DOMService.getNativeWindow().pageYOffset})}))}},{key:"startListeningResizeEvents",value:function(){var t=this;this.resizeUnlisten=this.renderer.listen("window","resize",(function(e){t.resizeEvent.next(e)}))}},{key:"stopListeningScrollEvents",value:function(){this.scrollUnlisten()}},{key:"stopListeningResizeEvents",value:function(){this.resizeUnlisten()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.RendererFactory2),l["\u0275\u0275inject"](et))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),st=function(){var t=function(){function t(e,n,i,o,r,a,s,l){Object(_.a)(this,t),this.injector=e,this.stepsContainerService=n,this.eventListenerService=i,this.documentService=o,this.renderer=r,this.logger=a,this.optionsService=s,this.templateService=l,this.stepWidth=200,this.stepHeight=200,this.showArrow=!0,this.arrowSize=pt,this.subscriptions=[]}return Object(y.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.joyrideStepService=this.injector.get(gt),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe((function(e){return t.checkRedraw(e)})),this.title&&this.title.subscribe((function(e){return t.checkRedraw(e)}))}},{key:"ngAfterViewInit",value:function(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");var t=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);t=this.adjustDimensions(t.width,t.height),this.stepWidth=t.width,this.stepHeight=t.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()}},{key:"checkRedraw",value:function(t){var e=this;null!=t&&setTimeout((function(){e.redrawStep()}),2)}},{key:"isCustomized",value:function(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()}},{key:"setCustomTexts",value:function(){var t=this.optionsService.getCustomTexts();this.prevText=t.prev,this.nextText=t.next,this.doneText=t.done}},{key:"drawStep",value:function(){var t=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",t),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===t?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===t?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()}},{key:"getCounter",value:function(){var t=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:t,total:e},t+"/"+e}},{key:"setCustomTemplates",value:function(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()}},{key:"prev",value:function(){this.joyrideStepService.prev()}},{key:"next",value:function(){this.joyrideStepService.next()}},{key:"close",value:function(){this.joyrideStepService.close()}},{key:"isFirstStep",value:function(){return 1===this.stepsContainerService.getStepNumber(this.step.name)}},{key:"isLastStep",value:function(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()}},{key:"setStepStyle",value:function(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter();break;default:this.setStyleBottom()}}},{key:"setStyleTop",value:function(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-dt-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-dt-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()}},{key:"setStyleRight",value:function(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+dt,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+dt,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()}},{key:"setStyleBottom",value:function(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+dt,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+dt,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()}},{key:"setStyleLeft",value:function(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-dt,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-dt,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()}},{key:"setStyleCenter",value:function(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform","translate(-".concat(this.stepWidth/2,"px, -").concat(this.stepHeight/2,"px)")),this.showArrow=!1}},{key:"adjustLeftPosition",value:function(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)}},{key:"adjustRightPosition",value:function(){var t=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>t){var e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-t),n=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-n}}},{key:"adjustTopPosition",value:function(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)}},{key:"adjustBottomPosition",value:function(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){var t=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=t-this.topPosition;this.topPosition=t,this.arrowTopPosition=this.arrowTopPosition-e}}},{key:"autofixTopPosition",value:function(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())}},{key:"autofixRightPosition",value:function(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()}},{key:"autofixBottomPosition",value:function(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()}},{key:"autofixLeftPosition",value:function(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()}},{key:"subscribeToResizeEvents",value:function(){var t=this;return this.eventListenerService.resizeEvent.subscribe((function(){t.redrawStep()}))}},{key:"redrawStep",value:function(){this.updateStepDimensions(),this.drawStep()}},{key:"getDimensionsByAspectRatio",value:function(t,e,n){var i=(t+e)/(1+n);return{width:i*n,height:i}}},{key:"adjustDimensions",value:function(t,e){var n=t,i=e;return t>400?i=t*e/(n=400):t<200&&(n=200,i=200/1.212),{width:n,height:i}}},{key:"updateStepDimensions",value:function(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](tt),l["\u0275\u0275directiveInject"](at),l["\u0275\u0275directiveInject"](ot),l["\u0275\u0275directiveInject"](l.Renderer2),l["\u0275\u0275directiveInject"](X),l["\u0275\u0275directiveInject"](K),l["\u0275\u0275directiveInject"](nt))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-step"]],viewQuery:function(t,e){var n;1&t&&(l["\u0275\u0275staticViewQuery"](A,!0),l["\u0275\u0275staticViewQuery"](P,!0)),2&t&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.stepHolder=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.stepContainer=n.first))},inputs:{step:"step"},decls:21,vars:17,consts:[[1,"joyride-step__holder",3,"id"],["stepHolder",""],["class","joyride-step__arrow",3,"position","top","left",4,"ngIf"],[1,"joyride-step__container"],["stepContainer",""],[1,"joyride-step__close",3,"click"],[1,"joyride-step__header"],[1,"joyride-step__title"],[1,"joyride-step__body"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultContent",""],[1,"joyride-step__footer"],["class","joyride-step__counter-container",4,"ngIf"],[1,"joyride-step__buttons-container"],["class","joyride-step__prev-container joyride-step__button",3,"click",4,"ngIf"],["class","joyride-step__next-container joyride-step__button",3,"click",4,"ngIf","ngIfElse"],["doneButton",""],[1,"joyride-step__arrow",3,"position"],[1,"joyride-step__counter-container"],["defaultCounter",""],[1,"joyride-step__counter"],[1,"joyride-step__prev-container","joyride-step__button",3,"click"],[4,"ngTemplateOutlet"],["defaultPrevButton",""],[1,"joyride-step__prev-button",3,"color"],[1,"joyride-step__next-container","joyride-step__button",3,"click"],["defaulNextButton",""],[3,"color"],[1,"joyride-step__done-container","joyride-step__button",3,"click"],["defaultDoneButton",""],[1,"joyride-step__done-button",3,"color"]],template:function(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",0,1),l["\u0275\u0275template"](2,O,1,5,"joyride-arrow",2),l["\u0275\u0275elementStart"](3,"div",3,4),l["\u0275\u0275elementStart"](5,"joy-close-button",5),l["\u0275\u0275listener"]("click",(function(){return e.close()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",6),l["\u0275\u0275elementStart"](7,"div",7),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",8),l["\u0275\u0275template"](11,M,1,0,"ng-container",9),l["\u0275\u0275template"](12,k,2,3,"ng-template",null,10,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",11),l["\u0275\u0275template"](15,T,4,2,"div",12),l["\u0275\u0275elementStart"](16,"div",13),l["\u0275\u0275template"](17,z,4,1,"div",14),l["\u0275\u0275template"](18,D,4,1,"div",15),l["\u0275\u0275template"](19,N,4,1,"ng-template",null,16,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275reference"](13),i=l["\u0275\u0275reference"](20);l["\u0275\u0275styleProp"]("top",e.topPosition,"px")("left",e.leftPosition,"px"),l["\u0275\u0275property"]("id","joyride-step-"+e.step.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.showArrow),l["\u0275\u0275advance"](5),l["\u0275\u0275styleProp"]("color",e.themeColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](9,15,e.title)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngTemplateOutlet",e.customContent?e.customContent:n)("ngTemplateOutletContext",e.ctx),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",e.isCounterVisible),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.isPrevButtonVisible&&!e.isFirstStep()),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.isLastStep())("ngIfElse",i)}},directives:function(){return[o.m,ht,o.r,lt,ct]},pipes:function(){return[o.b]},styles:[".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}"],encapsulation:2}),t}(),lt=function(){var t=function t(){Object(_.a)(this,t),this.position="top"};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-arrow"]],inputs:{position:"position"},decls:1,vars:8,template:function(t,e){1&t&&l["\u0275\u0275element"](0,"div"),2&t&&l["\u0275\u0275classProp"]("joyride-arrow__top","top"==e.position)("joyride-arrow__bottom","bottom"==e.position)("joyride-arrow__left","left"==e.position)("joyride-arrow__right","right"==e.position)},styles:[".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #fff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #fff}.joyride-arrow__right{border-left:11px solid #fff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #fff;border-top:11px solid transparent;border-bottom:11px solid transparent}"],encapsulation:2}),t}(),ct=function(){var t=function(){function t(){Object(_.a)(this,t),this.clicked=new l.EventEmitter}return Object(y.a)(t,[{key:"onClick",value:function(){this.clicked.emit()}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-button"]],inputs:{color:"color"},outputs:{clicked:"clicked"},ngContentSelectors:G,decls:2,vars:5,consts:[[1,"joyride-button",3,"ngStyle","mouseleave","mouseover","click"]],template:function(t,e){1&t&&(l["\u0275\u0275projectionDef"](),l["\u0275\u0275elementStart"](0,"button",0),l["\u0275\u0275listener"]("mouseleave",(function(){return e.hover=!1}))("mouseover",(function(){return e.hover=!0}))("click",(function(){return e.onClick()})),l["\u0275\u0275projection"](1),l["\u0275\u0275elementEnd"]()),2&t&&l["\u0275\u0275property"]("ngStyle",l["\u0275\u0275pureFunction3"](1,Z,e.hover?"#fff":e.color,e.hover?e.color:"#fff",e.hover?e.color:"transparent"))},directives:[o.n],styles:[".joyride-button[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid transparent;outline:0;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button[_ngcontent-%COMP%]:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}"]}),t}(),ht=function(){var t=function t(){Object(_.a)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["joy-close-button"]],decls:3,vars:0,consts:[["viewBox","0 0 25 25","xmlns","http://www.w3.org/2000/svg"],["x1","1","y1","24","x2","24","y2","1","stroke","black","stroke-width","3"],["x1","1","y1","1","x2","24","y2","24","stroke","black","stroke-width","3"]],template:function(t,e){1&t&&(l["\u0275\u0275namespaceSVG"](),l["\u0275\u0275elementStart"](0,"svg",0),l["\u0275\u0275element"](1,"line",1),l["\u0275\u0275element"](2,"line",2),l["\u0275\u0275elementEnd"]())},encapsulation:2}),t}(),ut=function(){var t=function(){function t(e,n,i){Object(_.a)(this,t),this.componentFactoryResolver=e,this.appRef=n,this.injector=i,this.refMap={}}return Object(y.a)(t,[{key:"draw",value:function(t){var e=this.componentFactoryResolver.resolveComponentFactory(st).create(this.injector);this.appRef.attachView(e.hostView),document.body.appendChild(e.hostView.rootNodes[0]);var n=e.instance;n.step=t,e.changeDetectorRef.detectChanges(),t.stepInstance=n,this.refMap[t.name]=e}},{key:"remove",value:function(t){this.appRef.detachView(this.refMap[t.name].hostView),this.refMap[t.name].destroy()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.ComponentFactoryResolver),l["\u0275\u0275inject"](l.ApplicationRef),l["\u0275\u0275inject"](l.Injector))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),dt=15,pt=10,gt=function(){var t=function(){function t(e,n,i,o,r,a,l,c,h){Object(_.a)(this,t),this.backDropService=e,this.eventListener=n,this.stepsContainerService=i,this.documentService=o,this.DOMService=r,this.stepDrawerService=a,this.optionsService=l,this.router=c,this.logger=h,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new s.a,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}return Object(y.a)(t,[{key:"initViewportPositions",value:function(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20}},{key:"subscribeToScrollEvents",value:function(){var t=this;this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe((function(e){t.winTopPosition=e.scrollY,t.winBottomPosition=t.winTopPosition+t.DOMService.getNativeWindow().innerHeight-20,t.currentStep&&t.backDropService.redraw(t.currentStep,e)}))}},{key:"subscribeToResizeEvents",value:function(){var t=this;this.eventListener.resizeEvent.subscribe((function(){t.currentStep&&t.backDropService.redrawTarget(t.currentStep)}))}},{key:"drawStep",value:function(t){t.position="NO_POSITION"===t.position?this.optionsService.getStepDefaultPosition():t.position,this.stepDrawerService.draw(t)}},{key:"startTour",value:function(){return this.stepsObserver=new s.a,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(Q.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()}},{key:"close",value:function(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()}},{key:"prev",value:function(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(Q.PREV)}},{key:"next",value:function(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(Q.NEXT)}},{key:"navigateToStepPage",value:function(t){var e=this.stepsContainerService.getStepRoute(t);e&&this.router.navigate([e])}},{key:"subscribeToStepsUpdates",value:function(){var t=this;this.stepsContainerService.stepHasBeenModified.subscribe((function(e){t.currentStep&&t.currentStep.name===e.name&&(t.currentStep=e)}))}},{key:"tryShowStep",value:function(t){var e=this;this.navigateToStepPage(t);var n=this.optionsService.getWaitingTime();n>100&&this.backDropService.remove(),setTimeout((function(){try{e.showStep(t)}catch(n){if(n instanceof J)e.tryShowStep(t);else{if(!(n instanceof q))throw new Error(n);e.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),e.close()}}}),n)}},{key:"showStep",value:function(t){if(this.currentStep=this.stepsContainerService.get(t),null==this.currentStep)throw new J("");this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible(),this.notifyStepClicked(t)}},{key:"notifyStepClicked",value:function(t){var e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:t};this.stepsObserver.next(e)}},{key:"notifyTourIsFinished",value:function(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()}},{key:"removeCurrentStep",value:function(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)}},{key:"scrollIfStepAndTargetAreNotVisible",value:function(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()}},{key:"scrollWhenTargetOrStepAreHiddenBottom",value:function(){var t=this.getMaxTargetAndStepBottomPosition();t>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winBottomPosition)}},{key:"scrollWhenTargetOrStepAreHiddenTop",value:function(){var t=this.getMaxTargetAndStepTopPosition();t<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winTopPosition)}},{key:"getMaxTargetAndStepBottomPosition",value:function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+pt+dt:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(t+this.currentStep.stepInstance.targetHeight,t+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0}},{key:"getMaxTargetAndStepTopPosition",value:function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t-(this.currentStep.stepInstance.stepHeight+pt+dt):"bottom"===this.currentStep.position?t:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(t,t+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0}},{key:"scrollIfElementBeyondOtherElements",value:function(){2===this.isElementBeyondOthers()&&this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element),2===this.isElementBeyondOthers()&&this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView()}},{key:"isElementBeyondOthers",value:function(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](rt),l["\u0275\u0275inject"](at),l["\u0275\u0275inject"](tt),l["\u0275\u0275inject"](ot),l["\u0275\u0275inject"](et),l["\u0275\u0275inject"](ut),l["\u0275\u0275inject"](K),l["\u0275\u0275inject"](r.c),l["\u0275\u0275inject"](X))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),mt=function t(){Object(_.a)(this,t)},ft=function(){var t=function(){function t(e,n,i){Object(_.a)(this,t),this.platformId=e,this.stepService=n,this.optionsService=i,this.tourInProgress=!1}return Object(y.a)(t,[{key:"startTour",value:function(t){var e=this;return Object(o.z)(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,t&&this.optionsService.setOptions(t),this.tour$=this.stepService.startTour().pipe(Object(I.a)((function(){return e.tourInProgress=!1}))),this.tour$.subscribe()),this.tour$):Object(C.a)(new mt)}},{key:"closeTour",value:function(){this.isTourInProgress()&&this.stepService.close()}},{key:"isTourInProgress",value:function(){return this.tourInProgress}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.PLATFORM_ID),l["\u0275\u0275inject"](gt),l["\u0275\u0275inject"](K))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),vt=r.g.forChild([]),bt=function(){var t=$=function(){function t(){Object(_.a)(this,t)}return Object(y.a)(t,null,[{key:"forRoot",value:function(){return{ngModule:$,providers:[ft,gt,tt,rt,at,ot,K,ut,et,X,nt]}}},{key:"forChild",value:function(){return{ngModule:$,providers:[]}}}]),t}();return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.c,vt]]}),t}(),yt=n("bD9T"),_t=n("lHyx"),Ct=n.n(_t),xt=n("NHP+"),wt=n("quSY"),It=(n("xgIS"),n("VRyK"),n("SxV6"));n("eIep"),n("7o/Q"),n("pLZG"),n("JX91"),n("Kj3r");var At=n("1G5W"),Pt=n("vkgz"),Ot=(n("IzEk"),n("iFvi")),Mt=["content"],kt=["*"],St=["container"],Et=new l.InjectionToken("MapboxApiKey"),Tt=function t(){Object(_.a)(this,t)},Rt=function(){var t=function(){function t(e,n,i){Object(_.a)(this,t),this.zone=e,this.MAPBOX_API_KEY=n,this.MglResizeEventEmitter=i,this.mapCreated=new xt.a,this.mapLoaded=new xt.a,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new wt.a,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}return Object(y.a)(t,[{key:"setup",value:function(t){var e=this;this.zone.onStable.pipe(Object(It.a)()).subscribe((function(){e.assign(a,"accessToken",t.accessToken||e.MAPBOX_API_KEY),t.customMapboxApiUrl&&e.assign(a,"config.API_URL",t.customMapboxApiUrl),e.createMap(t.mapOptions),e.hookEvents(t.mapEvents),e.mapEvents=t.mapEvents,e.mapCreated.next(void 0),e.mapCreated.complete()}))}},{key:"destroyMap",value:function(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}},{key:"updateMinZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMinZoom(t)}))}},{key:"updateMaxZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMaxZoom(t)}))}},{key:"updateScrollZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.scrollZoom.enable():e.mapInstance.scrollZoom.disable()}))}},{key:"updateDragRotate",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.dragRotate.enable():e.mapInstance.dragRotate.disable()}))}},{key:"updateTouchZoomRotate",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.touchZoomRotate.enable():e.mapInstance.touchZoomRotate.disable()}))}},{key:"updateDoubleClickZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.doubleClickZoom.enable():e.mapInstance.doubleClickZoom.disable()}))}},{key:"updateKeyboard",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.keyboard.enable():e.mapInstance.keyboard.disable()}))}},{key:"updateDragPan",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.dragPan.enable():e.mapInstance.dragPan.disable()}))}},{key:"updateBoxZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.boxZoom.enable():e.mapInstance.boxZoom.disable()}))}},{key:"updateStyle",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setStyle(t)}))}},{key:"updateMaxBounds",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMaxBounds(t)}))}},{key:"changeCanvasCursor",value:function(t){this.mapInstance.getCanvasContainer().style.cursor=t}},{key:"queryRenderedFeatures",value:function(t,e){return this.mapInstance.queryRenderedFeatures(t,e)}},{key:"panTo",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.panTo(t,e)}))}},{key:"move",value:function(t,e,n,i,o,r){var a=this;return this.zone.runOutsideAngular((function(){a.mapInstance[t](Object.assign(Object.assign({},e),{zoom:n||a.mapInstance.getZoom(),center:i||a.mapInstance.getCenter(),bearing:o||a.mapInstance.getBearing(),pitch:r||a.mapInstance.getPitch()}))}))}},{key:"addLayer",value:function(t,e,n){var i=this;this.zone.runOutsideAngular((function(){Object.keys(t.layerOptions).forEach((function(e){void 0===t.layerOptions[e]&&delete t.layerOptions[e]})),i.mapInstance.addLayer(t.layerOptions,n),e&&(t.layerEvents.click.observers.length&&i.mapInstance.on("click",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.click.emit(e)}))})),t.layerEvents.mouseEnter.observers.length&&i.mapInstance.on("mouseenter",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseEnter.emit(e)}))})),t.layerEvents.mouseLeave.observers.length&&i.mapInstance.on("mouseleave",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseLeave.emit(e)}))})),t.layerEvents.mouseMove.observers.length&&i.mapInstance.on("mousemove",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseMove.emit(e)}))})))}))}},{key:"removeLayer",value:function(t){var e=this;this.zone.runOutsideAngular((function(){null!=e.mapInstance.getLayer(t)&&e.mapInstance.removeLayer(t)}))}},{key:"addMarker",value:function(t){var e=this,n={offset:t.markersOptions.offset,anchor:t.markersOptions.anchor,draggable:!!t.markersOptions.draggable,rotationAlignment:t.markersOptions.rotationAlignment,pitchAlignment:t.markersOptions.pitchAlignment};t.markersOptions.element.childNodes.length>0&&(n.element=t.markersOptions.element);var i=new a.Marker(n);return t.markersEvents.dragStart.observers.length&&i.on("dragstart",(function(n){return e.zone.run((function(){return t.markersEvents.dragStart.emit(n.target)}))})),t.markersEvents.drag.observers.length&&i.on("drag",(function(n){return e.zone.run((function(){return t.markersEvents.drag.emit(n.target)}))})),t.markersEvents.dragEnd.observers.length&&i.on("dragend",(function(n){return e.zone.run((function(){return t.markersEvents.dragEnd.emit(n.target)}))})),i.setLngLat(t.markersOptions.feature?t.markersOptions.feature.geometry.coordinates:t.markersOptions.lngLat),this.zone.runOutsideAngular((function(){return i.addTo(e.mapInstance),i}))}},{key:"removeMarker",value:function(t){this.markersToRemove.push(t)}},{key:"createPopup",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(t.popupOptions).forEach((function(e){return void 0===t.popupOptions[e]&&delete t.popupOptions[e]}));var i=new a.Popup(t.popupOptions);return i.setDOMContent(e),t.popupEvents.close.observers.length&&i.on("close",(function(){n.zone.run((function(){t.popupEvents.close.emit()}))})),t.popupEvents.open.observers.length&&i.on("open",(function(){n.zone.run((function(){t.popupEvents.open.emit()}))})),i}))}},{key:"addPopupToMap",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.zone.runOutsideAngular((function(){i&&t._listeners&&delete t._listeners.open,t.setLngLat(e),t.addTo(n.mapInstance)}))}},{key:"addPopupToMarker",value:function(t,e){return this.zone.runOutsideAngular((function(){t.setPopup(e)}))}},{key:"removePopupFromMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&t._listeners&&delete t._listeners.close,this.popupsToRemove.push(t)}},{key:"removePopupFromMarker",value:function(t){return this.zone.runOutsideAngular((function(){t.setPopup(void 0)}))}},{key:"addControl",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.addControl(t,e)}))}},{key:"removeControl",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.removeControl(t)}))}},{key:"loadAndAddImage",value:function(t,e,n){return Object(i.b)(this,void 0,void 0,Ct.a.mark((function i(){var o=this;return Ct.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.zone.runOutsideAngular((function(){return new Promise((function(i,r){o.mapInstance.loadImage(e,(function(e,a){e?r(e):(o.addImage(t,a,n),i())}))}))})));case 1:case"end":return i.stop()}}),i,this)})))}},{key:"addImage",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.addImage(t,e,n)}))}},{key:"removeImage",value:function(t){this.imageIdsToRemove.push(t)}},{key:"addSource",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]})),n.mapInstance.addSource(t,e)}))}},{key:"getSource",value:function(t){return this.mapInstance.getSource(t)}},{key:"removeSource",value:function(t){var e=this;this.zone.runOutsideAngular((function(){e.findLayersBySourceId(t).forEach((function(t){return e.mapInstance.removeLayer(t.id)})),e.mapInstance.removeSource(t)}))}},{key:"setAllLayerPaintProperty",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(i){n.mapInstance.setPaintProperty(t,i,e[i])}))}))}},{key:"setAllLayerLayoutProperty",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(i){n.mapInstance.setLayoutProperty(t,i,e[i])}))}))}},{key:"setLayerFilter",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.setFilter(t,e)}))}},{key:"setLayerBefore",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.moveLayer(t,e)}))}},{key:"setLayerZoomRange",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.setLayerZoomRange(t,e||0,n||20)}))}},{key:"fitBounds",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.fitBounds(t,e)}))}},{key:"fitScreenCoordinates",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.fitScreenCoordinates(t[0],t[1],e,n)}))}},{key:"applyChanges",value:function(){var t=this;this.zone.runOutsideAngular((function(){t.removeMarkers(),t.removePopups(),t.removeImages()}))}},{key:"createMap",value:function(t){var e=this;l.NgZone.assertNotInAngularZone(),Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),this.mapInstance=new a.Map(t),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(t.style);var n=this.zone.onMicrotaskEmpty.subscribe((function(){return e.applyChanges()}));if(this.MglResizeEventEmitter){var i=this.MglResizeEventEmitter.resizeEvent.subscribe((function(){e.mapInstance.resize()}));this.subscription.add(i)}this.subscription.add(n)}},{key:"removeMarkers",value:function(){var t,e=Object(yt.a)(this.markersToRemove);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(n){e.e(n)}finally{e.f()}this.markersToRemove=[]}},{key:"removePopups",value:function(){var t,e=Object(yt.a)(this.popupsToRemove);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(n){e.e(n)}finally{e.f()}this.popupsToRemove=[]}},{key:"removeImages",value:function(){var t,e=Object(yt.a)(this.imageIdsToRemove);try{for(e.s();!(t=e.n()).done;)this.mapInstance.removeImage(t.value)}catch(n){e.e(n)}finally{e.f()}this.imageIdsToRemove=[]}},{key:"findLayersBySourceId",value:function(t){var e=this.mapInstance.getStyle().layers;return null==e?[]:e.filter((function(e){return e.source===t}))}},{key:"hookEvents",value:function(t){var e=this;this.mapInstance.on("load",(function(){e.mapLoaded.next(void 0),e.mapLoaded.complete(),e.zone.run((function(){return t.load.emit(e.mapInstance)}))})),t.resize.observers.length&&this.mapInstance.on("resize",(function(){return e.zone.run((function(){return t.resize.emit()}))})),t.remove.observers.length&&this.mapInstance.on("remove",(function(){return e.zone.run((function(){return t.remove.emit()}))})),t.mouseDown.observers.length&&this.mapInstance.on("mousedown",(function(n){return e.zone.run((function(){return t.mouseDown.emit(n)}))})),t.mouseUp.observers.length&&this.mapInstance.on("mouseup",(function(n){return e.zone.run((function(){return t.mouseUp.emit(n)}))})),t.mouseMove.observers.length&&this.mapInstance.on("mousemove",(function(n){return e.zone.run((function(){return t.mouseMove.emit(n)}))})),t.click.observers.length&&this.mapInstance.on("click",(function(n){return e.zone.run((function(){return t.click.emit(n)}))})),t.dblClick.observers.length&&this.mapInstance.on("dblclick",(function(n){return e.zone.run((function(){return t.dblClick.emit(n)}))})),t.mouseEnter.observers.length&&this.mapInstance.on("mouseenter",(function(n){return e.zone.run((function(){return t.mouseEnter.emit(n)}))})),t.mouseLeave.observers.length&&this.mapInstance.on("mouseleave",(function(n){return e.zone.run((function(){return t.mouseLeave.emit(n)}))})),t.mouseOver.observers.length&&this.mapInstance.on("mouseover",(function(n){return e.zone.run((function(){return t.mouseOver.emit(n)}))})),t.mouseOut.observers.length&&this.mapInstance.on("mouseout",(function(n){return e.zone.run((function(){return t.mouseOut.emit(n)}))})),t.contextMenu.observers.length&&this.mapInstance.on("contextmenu",(function(n){return e.zone.run((function(){return t.contextMenu.emit(n)}))})),t.touchStart.observers.length&&this.mapInstance.on("touchstart",(function(n){return e.zone.run((function(){return t.touchStart.emit(n)}))})),t.touchEnd.observers.length&&this.mapInstance.on("touchend",(function(n){return e.zone.run((function(){return t.touchEnd.emit(n)}))})),t.touchMove.observers.length&&this.mapInstance.on("touchmove",(function(n){return e.zone.run((function(){return t.touchMove.emit(n)}))})),t.touchCancel.observers.length&&this.mapInstance.on("touchcancel",(function(n){return e.zone.run((function(){return t.touchCancel.emit(n)}))})),t.wheel.observers.length&&this.mapInstance.on("wheel",(function(n){return e.zone.run((function(){return t.wheel.emit(n)}))})),t.moveStart.observers.length&&this.mapInstance.on("movestart",(function(n){return e.zone.run((function(){return t.moveStart.emit(n)}))})),t.move.observers.length&&this.mapInstance.on("move",(function(n){return e.zone.run((function(){return t.move.emit(n)}))})),t.moveEnd.observers.length&&this.mapInstance.on("moveend",(function(n){return e.zone.run((function(){return t.moveEnd.emit(n)}))})),t.dragStart.observers.length&&this.mapInstance.on("dragstart",(function(n){return e.zone.run((function(){return t.dragStart.emit(n)}))})),t.drag.observers.length&&this.mapInstance.on("drag",(function(n){return e.zone.run((function(){return t.drag.emit(n)}))})),t.dragEnd.observers.length&&this.mapInstance.on("dragend",(function(n){return e.zone.run((function(){return t.dragEnd.emit(n)}))})),t.zoomStart.observers.length&&this.mapInstance.on("zoomstart",(function(n){return e.zone.run((function(){return t.zoomStart.emit(n)}))})),t.zoomEvt.observers.length&&this.mapInstance.on("zoom",(function(n){return e.zone.run((function(){return t.zoomEvt.emit(n)}))})),t.zoomEnd.observers.length&&this.mapInstance.on("zoomend",(function(n){return e.zone.run((function(){return t.zoomEnd.emit(n)}))})),t.rotateStart.observers.length&&this.mapInstance.on("rotatestart",(function(n){return e.zone.run((function(){return t.rotateStart.emit(n)}))})),t.rotate.observers.length&&this.mapInstance.on("rotate",(function(n){return e.zone.run((function(){return t.rotate.emit(n)}))})),t.rotateEnd.observers.length&&this.mapInstance.on("rotateend",(function(n){return e.zone.run((function(){return t.rotateEnd.emit(n)}))})),t.pitchStart.observers.length&&this.mapInstance.on("pitchstart",(function(n){return e.zone.run((function(){return t.pitchStart.emit(n)}))})),t.pitchEvt.observers.length&&this.mapInstance.on("pitch",(function(n){return e.zone.run((function(){return t.pitchEvt.emit(n)}))})),t.pitchEnd.observers.length&&this.mapInstance.on("pitchend",(function(n){return e.zone.run((function(){return t.pitchEnd.emit(n)}))})),t.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",(function(n){return e.zone.run((function(){return t.boxZoomStart.emit(n)}))})),t.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",(function(n){return e.zone.run((function(){return t.boxZoomEnd.emit(n)}))})),t.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",(function(n){return e.zone.run((function(){return t.boxZoomCancel.emit(n)}))})),t.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",(function(){return e.zone.run((function(){return t.webGlContextLost.emit()}))})),t.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",(function(){return e.zone.run((function(){return t.webGlContextRestored.emit()}))})),t.render.observers.length&&this.mapInstance.on("render",(function(){return e.zone.run((function(){return t.render.emit()}))})),t.error.observers.length&&this.mapInstance.on("error",(function(n){return e.zone.run((function(){return t.error.emit(n)}))})),t.data.observers.length&&this.mapInstance.on("data",(function(n){return e.zone.run((function(){return t.data.emit(n)}))})),t.styleData.observers.length&&this.mapInstance.on("styledata",(function(n){return e.zone.run((function(){return t.styleData.emit(n)}))})),t.sourceData.observers.length&&this.mapInstance.on("sourcedata",(function(n){return e.zone.run((function(){return t.sourceData.emit(n)}))})),t.dataLoading.observers.length&&this.mapInstance.on("dataloading",(function(n){return e.zone.run((function(){return t.dataLoading.emit(n)}))})),t.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",(function(n){return e.zone.run((function(){return t.styleDataLoading.emit(n)}))})),t.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",(function(n){return e.zone.run((function(){return t.sourceDataLoading.emit(n)}))})),t.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",(function(n){return e.zone.run((function(){return t.styleImageMissing.emit(n)}))})),t.idle.observers.length&&this.mapInstance.on("idle",(function(){return e.zone.run((function(){return t.idle.emit()}))}))}},{key:"assign",value:function(t,e,n){if("string"==typeof e&&(e=e.split(".")),e.length>1){var i=e.shift();this.assign(t[i]="[object Object]"===Object.prototype.toString.call(t[i])?t[i]:{},e,n)}else t[e[0]]=n}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.NgZone),l["\u0275\u0275inject"](Et,8),l["\u0275\u0275inject"](Tt,8))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),Lt=function(){function t(e){Object(_.a)(this,t),this.container=e}return Object(y.a)(t,[{key:"onAdd",value:function(){return this.container}},{key:"onRemove",value:function(){return this.container.parentNode.removeChild(this.container)}},{key:"getDefaultPosition",value:function(){return"top-right"}}]),t}(),zt=function(){var t=function(){function t(e){Object(_.a)(this,t),this.MapService=e,this.controlAdded=!1}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.content.nativeElement.childNodes.length&&(this.control=new Lt(this.content.nativeElement),this.MapService.mapCreated$.subscribe((function(){t.MapService.addControl(t.control,t.position),t.controlAdded=!0})))}},{key:"ngOnDestroy",value:function(){this.controlAdded&&this.MapService.removeControl(this.control)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-control"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275staticViewQuery"](Mt,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.content=n.first)},inputs:{position:"position"},ngContentSelectors:kt,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(t,e){1&t&&(l["\u0275\u0275projectionDef"](),l["\u0275\u0275elementStart"](0,"div",0,1),l["\u0275\u0275projection"](2),l["\u0275\u0275elementEnd"]())},encapsulation:2,changeDetection:0}),t}(),Bt=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.compact&&(e.compact=t.compact),void 0!==t.customAttribution&&(e.customAttribution=t.customAttribution),t.ControlComponent.control=new a.AttributionControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](zt,1))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),t}(),jt=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");t.ControlComponent.control=new a.FullscreenControl({container:t.container}),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](zt,1))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglFullscreen",""]],inputs:{container:"container"}}),t}(),Dt=new l.InjectionToken("MapboxApiKey"),Ft=function(){var t=function(){function t(e,n,i,o){Object(_.a)(this,t),this.MapService=e,this.zone=n,this.ControlComponent=i,this.MAPBOX_GEOCODER_API_KEY=o,this.clear=new l.EventEmitter,this.loading=new l.EventEmitter,this.results=new l.EventEmitter,this.result=new l.EventEmitter,this.error=new l.EventEmitter}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={proximity:t.proximity,countries:t.countries,placeholder:t.placeholder,zoom:t.zoom,bbox:t.bbox,types:t.types,flyTo:t.flyTo,minLength:t.minLength,limit:t.limit,language:t.language,filter:t.filter,localGeocoder:t.localGeocoder,accessToken:t.accessToken||t.MAPBOX_GEOCODER_API_KEY};Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),t.geocoder=new Ot(e),t.hookEvents(t),t.addControl()})),this.searchInput&&this.MapService.mapLoaded$.subscribe((function(){t.geocoder.query(t.searchInput)}))}},{key:"ngOnChanges",value:function(t){this.geocoder&&(t.proximity&&!t.proximity.isFirstChange()&&this.geocoder.setProximity(t.proximity.currentValue),t.searchInput&&this.geocoder.query(this.searchInput))}},{key:"addControl",value:function(){this.ControlComponent.control=this.geocoder,this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)}},{key:"hookEvents",value:function(t){var e=this;t.results.observers.length&&this.geocoder.on("results",(function(n){return e.zone.run((function(){return t.results.emit(n)}))})),t.result.observers.length&&this.geocoder.on("result",(function(n){e.lastResultId!==n.result.id&&(e.lastResultId=n.result.id,e.zone.run((function(){return t.result.emit(n)})))})),t.error.observers.length&&this.geocoder.on("error",(function(n){return e.zone.run((function(){return t.error.emit(n)}))})),t.loading.observers.length&&this.geocoder.on("loading",(function(n){return e.zone.run((function(){return t.loading.emit(n)}))})),t.clear.observers.length&&this.geocoder.on("clear",(function(){return e.zone.run((function(){return t.clear.emit()}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](l.NgZone),l["\u0275\u0275directiveInject"](zt,1),l["\u0275\u0275directiveInject"](Dt,8))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglGeocoder",""]],inputs:{countries:"countries",placeholder:"placeholder",zoom:"zoom",bbox:"bbox",types:"types",flyTo:"flyTo",minLength:"minLength",limit:"limit",language:"language",accessToken:"accessToken",filter:"filter",localGeocoder:"localGeocoder",proximity:"proximity",searchInput:"searchInput"},outputs:{clear:"clear",loading:"loading",results:"results",result:"result",error:"error"},features:[l["\u0275\u0275NgOnChangesFeature"]]}),t}(),Vt=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.MapService=e,this.ControlComponent=n,this.geolocate=new l.EventEmitter}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={positionOptions:t.positionOptions,fitBoundsOptions:t.fitBoundsOptions,trackUserLocation:t.trackUserLocation,showUserLocation:t.showUserLocation};Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),t.ControlComponent.control=new a.GeolocateControl(e),t.ControlComponent.control.on("geolocate",(function(e){return t.geolocate.emit(e)})),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](zt,1))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),t}(),Nt=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(y.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.showCompass&&(e.showCompass=t.showCompass),void 0!==t.showZoom&&(e.showZoom=t.showZoom),t.ControlComponent.control=new a.NavigationControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](zt,1))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),t}(),$t=function(){var t=function(){function t(e,n){Object(_.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(y.a)(t,[{key:"ngOnChanges",value:function(t){t.unit&&!t.unit.isFirstChange()&&this.ControlComponent.control.setUnit(t.unit.currentValue)}},{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.maxWidth&&(e.maxWidth=t.maxWidth),void 0!==t.unit&&(e.unit=t.unit),t.ControlComponent.control=new a.ScaleControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt),l["\u0275\u0275directiveInject"](zt,1))},t.\u0275dir=l["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l["\u0275\u0275NgOnChangesFeature"]]}),t}(),Zt=function(){var t=function(){function t(e){Object(_.a)(this,t),this.MapService=e,this.dragStart=new l.EventEmitter,this.drag=new l.EventEmitter,this.dragEnd=new l.EventEmitter}return Object(y.a)(t,[{key:"ngOnInit",value:function(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}},{key:"ngOnChanges",value:function(t){t.lngLat&&!t.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),t.feature&&!t.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),t.draggable&&!t.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),t.popupShown&&!t.popupShown.isFirstChange()&&(t.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.MapService.mapInstance):this.markerInstance.getPopup().remove()),t.pitchAlignment&&!t.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(t.pitchAlignment.currentValue),t.rotationAlignment&&!t.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(t.rotationAlignment.currentValue)}},{key:"ngAfterViewInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){t.markerInstance=t.MapService.addMarker({markersOptions:{offset:t.offset,anchor:t.anchor,pitchAlignment:t.pitchAlignment,rotationAlignment:t.rotationAlignment,draggable:!!t.draggable,element:t.content.nativeElement,feature:t.feature,lngLat:t.lngLat},markersEvents:{dragStart:t.dragStart,drag:t.drag,dragEnd:t.dragEnd}})}))}},{key:"ngOnDestroy",value:function(){this.MapService.removeMarker(this.markerInstance),this.markerInstance=void 0}},{key:"togglePopup",value:function(){this.markerInstance.togglePopup()}},{key:"updateCoordinates",value:function(t){this.markerInstance.setLngLat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-marker"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275staticViewQuery"](Mt,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.content=n.first)},inputs:{offset:"offset",anchor:"anchor",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd"},features:[l["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:kt,decls:3,vars:2,consts:[["content",""]],template:function(t,e){1&t&&(l["\u0275\u0275projectionDef"](),l["\u0275\u0275elementStart"](0,"div",null,0),l["\u0275\u0275projection"](2),l["\u0275\u0275elementEnd"]()),2&t&&l["\u0275\u0275classMap"](e.className)},encapsulation:2,changeDetection:0}),t}(),Gt=function(){var t=function(){function t(e){Object(_.a)(this,t),this.MapService=e,this.movingMethod="flyTo",this.resize=new l.EventEmitter,this.remove=new l.EventEmitter,this.mouseDown=new l.EventEmitter,this.mouseUp=new l.EventEmitter,this.mouseMove=new l.EventEmitter,this.click=new l.EventEmitter,this.dblClick=new l.EventEmitter,this.mouseEnter=new l.EventEmitter,this.mouseLeave=new l.EventEmitter,this.mouseOver=new l.EventEmitter,this.mouseOut=new l.EventEmitter,this.contextMenu=new l.EventEmitter,this.touchStart=new l.EventEmitter,this.touchEnd=new l.EventEmitter,this.touchMove=new l.EventEmitter,this.touchCancel=new l.EventEmitter,this.wheel=new l.EventEmitter,this.moveStart=new l.EventEmitter,this.move=new l.EventEmitter,this.moveEnd=new l.EventEmitter,this.dragStart=new l.EventEmitter,this.drag=new l.EventEmitter,this.dragEnd=new l.EventEmitter,this.zoomStart=new l.EventEmitter,this.zoomEvt=new l.EventEmitter,this.zoomEnd=new l.EventEmitter,this.rotateStart=new l.EventEmitter,this.rotate=new l.EventEmitter,this.rotateEnd=new l.EventEmitter,this.pitchStart=new l.EventEmitter,this.pitchEvt=new l.EventEmitter,this.pitchEnd=new l.EventEmitter,this.boxZoomStart=new l.EventEmitter,this.boxZoomEnd=new l.EventEmitter,this.boxZoomCancel=new l.EventEmitter,this.webGlContextLost=new l.EventEmitter,this.webGlContextRestored=new l.EventEmitter,this.load=new l.EventEmitter,this.idle=new l.EventEmitter,this.render=new l.EventEmitter,this.error=new l.EventEmitter,this.data=new l.EventEmitter,this.styleData=new l.EventEmitter,this.sourceData=new l.EventEmitter,this.dataLoading=new l.EventEmitter,this.styleDataLoading=new l.EventEmitter,this.sourceDataLoading=new l.EventEmitter,this.styleImageMissing=new l.EventEmitter}return Object(y.a)(t,[{key:"ngAfterViewInit",value:function(){this.MapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{container:this.mapContainer.nativeElement,minZoom:this.minZoom,maxZoom:this.maxZoom,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,classes:this.classes,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.MapService.changeCanvasCursor(this.cursorStyle)}},{key:"ngOnDestroy",value:function(){this.MapService.destroyMap()}},{key:"ngOnChanges",value:function(t){return Object(i.b)(this,void 0,void 0,Ct.a.mark((function e(){return Ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.MapService.mapCreated$.toPromise();case 2:t.cursorStyle&&!t.cursorStyle.isFirstChange()&&this.MapService.changeCanvasCursor(t.cursorStyle.currentValue),t.minZoom&&!t.minZoom.isFirstChange()&&this.MapService.updateMinZoom(t.minZoom.currentValue),t.maxZoom&&!t.maxZoom.isFirstChange()&&this.MapService.updateMaxZoom(t.maxZoom.currentValue),t.scrollZoom&&!t.scrollZoom.isFirstChange()&&this.MapService.updateScrollZoom(t.scrollZoom.currentValue),t.dragRotate&&!t.dragRotate.isFirstChange()&&this.MapService.updateDragRotate(t.dragRotate.currentValue),t.touchZoomRotate&&!t.touchZoomRotate.isFirstChange()&&this.MapService.updateTouchZoomRotate(t.touchZoomRotate.currentValue),t.doubleClickZoom&&!t.doubleClickZoom.isFirstChange()&&this.MapService.updateDoubleClickZoom(t.doubleClickZoom.currentValue),t.keyboard&&!t.keyboard.isFirstChange()&&this.MapService.updateKeyboard(t.keyboard.currentValue),t.dragPan&&!t.dragPan.isFirstChange()&&this.MapService.updateDragPan(t.dragPan.currentValue),t.boxZoom&&!t.boxZoom.isFirstChange()&&this.MapService.updateBoxZoom(t.boxZoom.currentValue),t.style&&!t.style.isFirstChange()&&this.MapService.updateStyle(t.style.currentValue),t.maxBounds&&!t.maxBounds.isFirstChange()&&this.MapService.updateMaxBounds(t.maxBounds.currentValue),t.fitBounds&&t.fitBounds.currentValue&&!t.fitBounds.isFirstChange()&&this.MapService.fitBounds(t.fitBounds.currentValue,this.fitBoundsOptions),t.fitScreenCoordinates&&t.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&t.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.MapService.fitScreenCoordinates(t.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!t.center||t.center.isFirstChange()||t.zoom||t.bearing||t.pitch?(t.center&&!t.center.isFirstChange()||t.zoom&&!t.zoom.isFirstChange()||t.bearing&&!t.bearing.isFirstChange()&&!t.fitScreenCoordinates||t.pitch&&!t.pitch.isFirstChange())&&this.MapService.move(this.movingMethod,this.movingOptions,t.zoom&&this.zoom?this.zoom[0]:void 0,t.center?this.center:void 0,t.bearing&&this.bearing?this.bearing[0]:void 0,t.pitch&&this.pitch?this.pitch[0]:void 0):this.MapService.panTo(this.center,this.panToOptions);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"mapInstance",get:function(){return this.MapService.mapInstance}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Rt))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-map"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275staticViewQuery"](St,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.mapContainer=n.first)},inputs:{movingMethod:"movingMethod",accessToken:"accessToken",customMapboxApiUrl:"customMapboxApiUrl",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",classes:"classes",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",renderWorldCopies:"renderWorldCopies",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",load:"load",idle:"idle",render:"render",error:"error",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l["\u0275\u0275ProvidersFeature"]([Rt]),l["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&l["\u0275\u0275element"](0,"div",null,0)},styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      div[_ngcontent-%COMP%] {\n        height: 100%;\n        width: 100%;\n      }"],changeDetection:0}),t}(),Wt=function(){var t=function(){function t(){Object(_.a)(this,t)}return Object(y.a)(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Et,useValue:e.accessToken},{provide:Dt,useValue:e.geocoderAccessToken||e.accessToken}]}}}]),t}();return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.c]]}),t}();function Ht(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-icon",50),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().rotateMap()})),l["\u0275\u0275elementEnd"]()}}function Kt(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-icon",51),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().rotateMap()})),l["\u0275\u0275elementEnd"]()}}function Ut(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",52),l["\u0275\u0275elementStart"](1,"nb-radio-group",53),l["\u0275\u0275elementStart"](2,"nb-radio",54),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeStyle("basic-v8")})),l["\u0275\u0275text"](3,"streets"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"nb-radio",55),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeStyle("light-v10")})),l["\u0275\u0275text"](5,"light"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-radio",56),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeStyle("dark-v10")})),l["\u0275\u0275text"](7,"dark"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"nb-radio",57),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeStyle("satellite-v9")})),l["\u0275\u0275text"](9,"satellite"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"nb-radio",58),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeStyle("outdoors-v11")})),l["\u0275\u0275text"](11,"outdoors"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function Xt(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"p",66),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("Esta ventana cerrar\xe1 en ",n.timeLeft," seg.")}}function Yt(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card",59),l["\u0275\u0275elementStart"](1,"nb-card-header",60),l["\u0275\u0275elementStart"](2,"span"),l["\u0275\u0275element"](3,"img",61),l["\u0275\u0275text"](4," Bienvenido"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"nb-icon",62),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().openPopover(!1)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body"),l["\u0275\u0275text"](7,' Bienvenido al observatorio del R\xedo Magdalena. Si desea iniciar una vista guiada, por favor de clic en "iniciar" '),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"nb-card-footer",63),l["\u0275\u0275template"](9,Xt,3,1,"p",64),l["\u0275\u0275elementStart"](10,"a",65),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().startJoyRade()})),l["\u0275\u0275text"](11,"Iniciar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngIf",i.timeLeft>0)}}function Jt(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",67),l["\u0275\u0275elementStart"](1,"p",68),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",69),l["\u0275\u0275elementStart"](4,"div",70),l["\u0275\u0275element"](5,"div",71),l["\u0275\u0275elementStart"](6,"div",72),l["\u0275\u0275elementStart"](7,"div"),l["\u0275\u0275elementStart"](8,"video",73),l["\u0275\u0275elementStart"](9,"p"),l["\u0275\u0275text"](10,"Your browser doesn't support HTML5 video. Here is a"),l["\u0275\u0275elementStart"](11,"a",74),l["\u0275\u0275text"](12,"link to the video"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](13," instead."),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=e.text,i=e.video;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n),l["\u0275\u0275advance"](6),l["\u0275\u0275propertyInterpolate1"]("src","assets/video/",i,"",l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate1"]("href","assets/video/",i,"",l["\u0275\u0275sanitizeUrl"])}}var qt=function(){return[6]},Qt=function(t){return[t,9.5]},te=function(){return[0]},ee=function(t){return[t,9]},ne=function(){return{text:"Finalmente En esta secci\xf3n puedes seguirnos en redes sociales."}},ie=function(t){return{"placeholder-joyride":t}},oe=function(){return{text:"Adicionalmente, arriba puedes encontrar informaci\xf3n legal, patrocinadores, Colaboradores, Desarrolladores entre otros.",video:"test.mp4"}},re=function(){return{text:"En esta Secci\xf3n puede activar, desactivar u organizar capas una vez se ha registrado",video:"test.mp4"}},ae=function(){return{text:"Aqu\xed puedes encontrar marcadores y capas activas, da clic sobre ellos para acceder a m\xe1s informaci\xf3n",video:"test.mp4"}},se=function(){return{text:"En esta secci\xf3n puedes encontrar las convenciones de las capas y controles del mapa.",video:"test.mp4"}},le=function(){function t(t,e,n,i,o,r,a){var s=this;this._auth=t,this._glMapService=e,this._stationService=n,this._toastrService=i,this._dialogService=o,this._layoutService=r,this.joyrideService=a,this.showStyles=!1,this.isLogged=!1,this.isRotated=!0,this.styleUrl="mapbox://styles/mapbox/basic-v8",this.lastPitch=0,this.lastBearing=0,this.onJoy=!1,this.timeLeft=9,this.isPopOpen=!1,this.index=0,r.changeLayouType("no-header"),this.gl_map=Map,t.getCurrentUser().subscribe({next:function(t){s.user=t,s.isLogged=!0}})}return t.prototype.ngOnDestroy=function(){this._layoutService.changeLayouType("normal")},t.prototype.changeStyle=function(t){this.styleUrl="mapbox://styles/mapbox/"+t},t.prototype.onLoad=function(t){var e=this;this.gl_map=t,this._glMapService.setMap(this.gl_map),this.gl_map.resize(),setTimeout((function(){e.startTimer(),e.openPopover(!0),setTimeout((function(){e.openPopover(!1),e.pauseTimer()}),9e3)}),8e3),setTimeout((function(){e.gl_map.flyTo({center:[-74.7,10],zoom:8,bearing:50,pitch:60,essential:!0,speed:.5,curve:1,easing:function(t){return t}})}),3e3)},t.prototype.startTimer=function(){var t=this;this.interval=setInterval((function(){t.timeLeft>0&&t.timeLeft--}),1e3)},t.prototype.pauseTimer=function(){clearInterval(this.interval)},t.prototype.rotateMap=function(){var t=0,e=0;return 0===this.gl_map.getPitch()&&0===this.gl_map.getBearing()?(t=this.lastPitch,e=this.lastBearing,this.isRotated=!0):(this.lastPitch=this.gl_map.getPitch(),this.lastBearing=this.gl_map.getBearing(),t=0,e=0,this.isRotated=!1),this.gl_map.flyTo({bearing:e,pitch:t,essential:!0,speed:.2,curve:1,easing:function(t){return t}}),this.isRotated},t.prototype.getArrayLonLat=function(t,e){return[t,e]},t.prototype.openWindow=function(t){this._dialogService.open(p.a,{context:{_marker:t}})},t.prototype.startJoyRade=function(){var t=this;this.onJoy=!0,this.openPopover(!1),this.joyrideService.startTour({steps:["firstStep","secondStep","thirdStep","fourthStep","fifthStep","sixthStep"]}).subscribe((function(t){}),(function(e){t.onJoy=!1}),(function(){t.onJoy=!1}))},t.prototype.openPopover=function(t){t?this.popover.show():this.popover.hide()},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](h.a),l["\u0275\u0275directiveInject"](c),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](g.Ib),l["\u0275\u0275directiveInject"](g.G),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](ft))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-mapbox"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275viewQuery"](g.eb,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.popover=n.first)},decls:59,vars:39,consts:[[1,"mbxmap"],[1,"layout-fill",3,"attributionControl","zoom","center","pitch","bearing","load"],["mglGeocoder","","position","top-right",3,"searchInput"],["mglFullscreen","","position","top-right","showUserLocation","true"],["mglNavigation","","position","top-right"],["mglScale","","position","bottom-left","unit","metric"],["mglAttribution","","position","bottom-right","customAttribution","OBSRIOMAGDALENA - Plataforma de Monitoreo del R\xedo Magdalena"],["mglGeolocate","","position","top-right","showUserLocation","true"],["position","top-right",1,"mapboxgl-ctrl-group"],[1,"mapboxgl-ctrl-group"],["type","button","title","Layers","aria-label","Layers",3,"click"],["icon","map-outline",1,"mapboxgl-ctrl-icon"],["type","button","title","Layers","aria-label","Layers"],["class"," mapboxgl-ctrl-icon","icon","2d","pack","obs-icons",3,"click",4,"ngIf"],["class","   mapboxgl-ctrl-icon","icon","3d","pack","obs-icons",3,"click",4,"ngIf"],["anchor","center",3,"anchor","lngLat"],[1,"marker"],[1,"marker-name","label"],["id","menu",4,"ngIf"],["id","redes",1,"d-flex","justify-content-md-end","align-items-end","flex-column"],["id","logos-sm"],["href","#"],["src","assets/img/favicon.png","alt","OBS",1,"logo-obs-sm",2,"border-radius","3px"],["href","https://www.uninorte.edu.co/","target","_blank"],["src","assets/img/LogoUninorte.png","alt","uninorte",1,"logo-uninorte-sm"],["stepPosition","top","title","Redes sociales","joyrideStep","sixthStep",1,"socialnetwork",3,"stepContent","stepContentParams"],[3,"click"],["class","fade-in"],["templateRef",""],["nbPopoverPlacement","left","nbPopoverTrigger","noop",3,"nbPopover"],["src","assets/img/tutorial.png"],["href","https://www.instagram.com/obsriomagdalena/","target","_blank"],["src","assets/img/instagram.png"],["flex",""],["href","https://www.youtube.com/channel/UCYIPAkNxbPptJPtAmG_WO7Q?view_as=subscriber","target","_blank"],["src","assets/img/youtube.png"],["href","https://twitter.com/obsriomagdalena","target","_blank"],["src","assets/img/twitter.png"],["href","https://www.uninorte.edu.co/obsriomagdalena","target","_blank"],["src","assets/img/web.png"],["href","mailto:obsriomagdalena@uninorte.edu.co"],["src","assets/img/contact.png"],["href","https://www.uninorte.edu.co/web/ideha","target","_blank",1,"info-sm"],["title","Plataforma OBS R\xedo Magdalena","text","La plataforma esta organizada en 3 secciones principales","joyrideStep","firstStep","stepPosition","center",1,"d-flex","flex-column",3,"ngClass"],["id","top","stepPosition","right","title","Informaci\xf3n","joyrideStep","fifthStep",1,"col-sm-6",3,"stepContent","stepContentParams"],["id","center",1,"row"],["stepPosition","right","title","1. Secci\xf3n Izquierda","joyrideStep","secondStep",1,"col-sm-3",3,"stepContent","stepContentParams"],["stepPosition","center","title","2. Secci\xf3n Central","joyrideStep","thirdStep",1,"col-sm-6",3,"stepContent","stepContentParams"],["stepPosition","left","title","3. Secci\xf3n Derecha","joyrideStep","fourthStep",1,"col-sm-3",3,"stepContent","stepContentParams"],["customContent",""],["icon","2d","pack","obs-icons",1,"mapboxgl-ctrl-icon",3,"click"],["icon","3d","pack","obs-icons",1,"mapboxgl-ctrl-icon",3,"click"],["id","menu"],[1,"d-flex","flex-wrap"],["id","streets-v11","value","mapbox://styles/mapbox/basic-v8",1,"d-flex",3,"click"],["id","light-v10","value","mapbox://styles/mapbox/light-v10",1,"d-flex",3,"click"],["id","dark-v10","value","mapbox://styles/mapbox/dark-v10",1,"d-flex",3,"click"],["id","outdoors-v11","value","mapbox://styles/mapbox/satellite-v9",1,"d-flex",3,"click"],["id","satellite-v9","value","mapbox://styles/mapbox/outdoors-v11",1,"d-flex",3,"click"],[1,"mb-0","welcome-popover","fade-in",2,"max-width","300px","max-height","300px"],["status","info",1,"d-flex","justify-content-between"],["width","20","src","assets/img/favicon.png"],["icon","close",3,"click"],[1,"d-flex","justify-content-between"],["style","font-size: 10px;",4,"ngIf"],["nbButton","","status","info",3,"click"],[2,"font-size","10px"],[1,"d-flex","flex-column"],[2,"max-width","350px"],[1,"mt-3","d-flex","justify-content-center","wmax600"],[1,"",2,"overflow","hidden","height","100%","width","calc(100% - 36px)"],[1,"loading","absolute","z0"],[1,"relative","d-flex","justify-content-center"],["autoplay","","loop","","muted","","width","100%","type","video/mp4","title","Show an animated image (GIF) anywhere on the map.",1,"block","mx-auto",3,"src"],[3,"href"]],template:function(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"mgl-map",1),l["\u0275\u0275listener"]("load",(function(t){return e.onLoad(t)})),l["\u0275\u0275element"](2,"mgl-control",2),l["\u0275\u0275element"](3,"mgl-control",3),l["\u0275\u0275element"](4,"mgl-control",4),l["\u0275\u0275element"](5,"mgl-control",5),l["\u0275\u0275element"](6,"mgl-control",6),l["\u0275\u0275element"](7,"mgl-control",7),l["\u0275\u0275elementStart"](8,"mgl-control",8),l["\u0275\u0275elementStart"](9,"div",9),l["\u0275\u0275elementStart"](10,"button",10),l["\u0275\u0275listener"]("click",(function(){return e.showStyles=!e.showStyles})),l["\u0275\u0275element"](11,"nb-icon",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"mgl-control",8),l["\u0275\u0275elementStart"](13,"div",9),l["\u0275\u0275elementStart"](14,"button",12),l["\u0275\u0275template"](15,Ht,1,0,"nb-icon",13),l["\u0275\u0275template"](16,Kt,1,0,"nb-icon",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"mgl-marker",15),l["\u0275\u0275elementStart"](18,"div",16),l["\u0275\u0275element"](19,"label",17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](20,Ut,12,0,"div",18),l["\u0275\u0275elementStart"](21,"div",19),l["\u0275\u0275elementStart"](22,"div",20),l["\u0275\u0275elementStart"](23,"a",21),l["\u0275\u0275element"](24,"img",22),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"a",23),l["\u0275\u0275element"](26,"img",24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"ul",25),l["\u0275\u0275elementStart"](28,"li",26),l["\u0275\u0275listener"]("click",(function(){return e.isPopOpen=!e.isPopOpen,e.openPopover(e.isPopOpen)})),l["\u0275\u0275template"](29,Yt,12,1,"ng-template",27,28,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementStart"](31,"a",29),l["\u0275\u0275element"](32,"img",30),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"li"),l["\u0275\u0275elementStart"](34,"a",31),l["\u0275\u0275element"](35,"img",32),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](36,"li",33),l["\u0275\u0275elementStart"](37,"a",34),l["\u0275\u0275element"](38,"img",35),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"li",33),l["\u0275\u0275elementStart"](40,"a",36),l["\u0275\u0275element"](41,"img",37),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](42,"li",33),l["\u0275\u0275elementStart"](43,"a",38),l["\u0275\u0275element"](44,"img",39),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"li",33),l["\u0275\u0275elementStart"](46,"a",40),l["\u0275\u0275element"](47,"img",41),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](48,"a",42),l["\u0275\u0275elementStart"](49,"p"),l["\u0275\u0275text"](50,"Instituto de Estudios Hidr\xe1ulicos y Ambientales - IDEHA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](51,"div",43),l["\u0275\u0275element"](52,"div",44),l["\u0275\u0275elementStart"](53,"div",45),l["\u0275\u0275element"](54,"div",46),l["\u0275\u0275element"](55,"div",47),l["\u0275\u0275element"](56,"div",48),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](57,Jt,14,3,"ng-template",null,49,l["\u0275\u0275templateRefExtractor"])),2&t){var n=l["\u0275\u0275reference"](30),i=l["\u0275\u0275reference"](58);l["\u0275\u0275advance"](1),l["\u0275\u0275styleMap"](e.styleUrl),l["\u0275\u0275property"]("attributionControl",!1)("zoom",l["\u0275\u0275pureFunction0"](25,qt))("center",l["\u0275\u0275pureFunction1"](26,Qt,-74.8))("pitch",l["\u0275\u0275pureFunction0"](28,te))("bearing",l["\u0275\u0275pureFunction0"](29,te)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("searchInput",""),l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("ngIf",e.isRotated),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.isRotated),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("anchor","bottom")("lngLat",l["\u0275\u0275pureFunction1"](30,ee,-74)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.showStyles),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("stepContent",i)("stepContentParams",l["\u0275\u0275pureFunction0"](32,ne)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("nbPopover",n),l["\u0275\u0275advance"](20),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](33,ie,!0===e.onJoy)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("stepContent",i)("stepContentParams",l["\u0275\u0275pureFunction0"](35,oe)),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("stepContent",i)("stepContentParams",l["\u0275\u0275pureFunction0"](36,re)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("stepContent",i)("stepContentParams",l["\u0275\u0275pureFunction0"](37,ae)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("stepContent",i)("stepContentParams",l["\u0275\u0275pureFunction0"](38,se))}},directives:[Gt,zt,Ft,jt,Nt,$t,Bt,Vt,g.K,o.m,Zt,it,g.eb,o.k,g.kb,g.jb,g.u,g.x,g.t,g.v,g.q],styles:[".mapboxgl-map[_ngcontent-%COMP%]{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.mapboxgl-map[_ngcontent-%COMP%]:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary[_ngcontent-%COMP%]{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive[_ngcontent-%COMP%], .mapboxgl-ctrl-group[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer[_ngcontent-%COMP%]{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive[_ngcontent-%COMP%]:active, .mapboxgl-ctrl-group[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-drag-pan[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:none}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%], .mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%], .mapboxgl-ctrl-top-left[_ngcontent-%COMP%], .mapboxgl-ctrl-top-right[_ngcontent-%COMP%]{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%]{top:0;left:0}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%]{top:0;right:0}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%]{right:0;bottom:0}.mapboxgl-ctrl[_ngcontent-%COMP%]{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group[_ngcontent-%COMP%]{border-radius:4px;background:#fff}.mapboxgl-ctrl-group[_ngcontent-%COMP%]:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group[_ngcontent-%COMP%]:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-top:1px solid #ddd}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-color:transparent}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-top:1px solid ButtonText}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{opacity:.25}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:only-child{border-radius:inherit}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact[_ngcontent-%COMP%]{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]{min-height:20px;padding:0;margin:10px;position:relative;background-color:#fff;border-radius:3px 12px 12px 3px}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover{padding:2px 24px 2px 4px;visibility:visible;margin-top:6px}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover, .mapboxgl-ctrl-top-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover{padding:2px 4px 2px 24px;border-radius:12px 3px 3px 12px}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]   .mapboxgl-ctrl-attrib-inner[_ngcontent-%COMP%]{display:none}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover   .mapboxgl-ctrl-attrib-inner[_ngcontent-%COMP%]{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{content:\"\";cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{bottom:0;right:0}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{top:0;right:0}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{top:0;left:0}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   .mapbox-improve-map[_ngcontent-%COMP%]{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty[_ngcontent-%COMP%]{display:none}.mapboxgl-ctrl-scale[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top[_ngcontent-%COMP%], .mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%], .mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]{flex-direction:column}.mapboxgl-popup-anchor-bottom[_ngcontent-%COMP%], .mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%], .mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]{flex-direction:column-reverse}.mapboxgl-popup-anchor-left[_ngcontent-%COMP%]{flex-direction:row}.mapboxgl-popup-anchor-right[_ngcontent-%COMP%]{flex-direction:row-reverse}.mapboxgl-popup-tip[_ngcontent-%COMP%]{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:none}.mapboxgl-popup-track-pointer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map[_ngcontent-%COMP%]:hover   .mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:flex}.mapboxgl-map[_ngcontent-%COMP%]:active   .mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:none}.mapboxgl-marker[_ngcontent-%COMP%]{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot[_ngcontent-%COMP%], .mapboxgl-user-location-dot[_ngcontent-%COMP%]:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot[_ngcontent-%COMP%]:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot[_ngcontent-%COMP%]:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale[_ngcontent-%COMP%]{background-color:#aaa}.mapboxgl-user-location-dot-stale[_ngcontent-%COMP%]:after{display:none}.mapboxgl-user-location-accuracy-circle[_ngcontent-%COMP%]{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair[_ngcontent-%COMP%], .mapboxgl-crosshair[_ngcontent-%COMP%]   .mapboxgl-interactive[_ngcontent-%COMP%], .mapboxgl-crosshair[_ngcontent-%COMP%]   .mapboxgl-interactive[_ngcontent-%COMP%]:active{cursor:crosshair}.mapboxgl-boxzoom[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map[_ngcontent-%COMP%]{display:none}}.mat-badge-content[_ngcontent-%COMP%]{font-weight:600;font-size:12px;font-family:Roboto,Helvetica Neue,sans-serif}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:9px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:24px}.mat-h1[_ngcontent-%COMP%], .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 15px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 calc(14px * .83)/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 calc(14px * .67)/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-body-2[_ngcontent-%COMP%], .mat-body-strong[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-caption[_ngcontent-%COMP%], .mat-small[_ngcontent-%COMP%]{font:400 12px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-display-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-4[_ngcontent-%COMP%]{font:300 112px/112px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-3[_ngcontent-%COMP%]{font:400 56px/56px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-2[_ngcontent-%COMP%]{font:400 45px/48px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font:400 34px/40px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-button[_ngcontent-%COMP%], .mat-fab[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-button-toggle[_ngcontent-%COMP%], .mat-card[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}.mat-card-content[_ngcontent-%COMP%], .mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px}.mat-checkbox[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:24px}.mat-chip[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%], .mat-chip[_ngcontent-%COMP%]   .mat-chip-trailing-icon.mat-icon[_ngcontent-%COMP%]{font-size:18px}.mat-table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-header-cell[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.mat-calendar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-calendar-body[_ngcontent-%COMP%]{font-size:13px}.mat-calendar-body-label[_ngcontent-%COMP%], .mat-calendar-period-button[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-calendar-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.mat-dialog-title[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-expansion-panel-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field[_ngcontent-%COMP%]{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.34375em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:150%;line-height:1.125}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:1.5em;width:1.5em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:1.125em;line-height:1.125}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-label[_ngcontent-%COMP%]{top:1.34375em}.mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.34375em}.mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);-ms-transform:translateY(-1.28125em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);-ms-transform:translateY(-1.28124em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);-ms-transform:translateY(-1.28123em) scale(.75);width:133.3333533333%}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.28125em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.25em 0 .75em}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:1em 0}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-footer[_ngcontent-%COMP%], .mat-grid-tile-header[_ngcontent-%COMP%]{font-size:14px}.mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%], .mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}input.mat-input-element[_ngcontent-%COMP%]{margin-top:-.0625em}.mat-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:400}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px}.mat-radio-button[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-select-trigger[_ngcontent-%COMP%]{height:1.125em}.mat-slide-toggle-content[_ngcontent-%COMP%], .mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-step-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.mat-step-sub-label-error[_ngcontent-%COMP%]{font-weight:400}.mat-step-label-error[_ngcontent-%COMP%]{font-size:14px}.mat-step-label-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-tab-group[_ngcontent-%COMP%], .mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-toolbar[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0}.mat-tooltip[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset[_ngcontent-%COMP%]{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%], .mat-list-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:16px}.mat-optgroup-label[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-simple-snackbar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px}.mat-simple-snackbar-action[_ngcontent-%COMP%]{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-nested-tree-node[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale(0)}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}@media screen and (-ms-high-contrast:active){.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}@-webkit-keyframes cdk-text-field-autofill-start{}@keyframes cdk-text-field-autofill-start{}@-webkit-keyframes cdk-text-field-autofill-end{}@keyframes cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{-webkit-animation:cdk-text-field-autofill-start 0s 1ms;animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){-webkit-animation:cdk-text-field-autofill-end 0s 1ms;animation:cdk-text-field-autofill-end 0s 1ms}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}.mat-focus-indicator[_ngcontent-%COMP%], .mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-ripple-element[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.mat-option[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-option.mat-active[_ngcontent-%COMP%], .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-multiple):not(.mat-option-disabled), .mat-option[_ngcontent-%COMP%]:focus:not(.mat-option-disabled), .mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04)}.mat-option.mat-active[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-primary[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#3f51b5}.mat-accent[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#ff4081}.mat-warn[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#f44336}.mat-optgroup-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-optgroup-disabled[_ngcontent-%COMP%]   .mat-optgroup-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-pseudo-checkbox[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-pseudo-checkbox[_ngcontent-%COMP%]:after{color:#fafafa}.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%]{color:#b0b0b0}.mat-primary[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#3f51b5}.mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%], .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#ff4081}.mat-warn[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%]{background:#b0b0b0}.mat-app-background[_ngcontent-%COMP%]{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-elevation-z0[_ngcontent-%COMP%]{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-elevation-z1[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-elevation-z2[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-elevation-z3[_ngcontent-%COMP%]{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-elevation-z4[_ngcontent-%COMP%]{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-elevation-z5[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.mat-elevation-z6[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-elevation-z7[_ngcontent-%COMP%]{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-elevation-z9[_ngcontent-%COMP%]{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.mat-elevation-z10[_ngcontent-%COMP%]{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.mat-elevation-z11[_ngcontent-%COMP%]{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.mat-elevation-z12[_ngcontent-%COMP%]{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-elevation-z13[_ngcontent-%COMP%]{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.mat-elevation-z14[_ngcontent-%COMP%]{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.mat-elevation-z15[_ngcontent-%COMP%]{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.mat-elevation-z16[_ngcontent-%COMP%]{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-elevation-z17[_ngcontent-%COMP%]{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.mat-elevation-z18[_ngcontent-%COMP%]{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.mat-elevation-z19[_ngcontent-%COMP%]{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.mat-elevation-z20[_ngcontent-%COMP%]{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.mat-elevation-z21[_ngcontent-%COMP%]{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.mat-elevation-z22[_ngcontent-%COMP%]{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.mat-elevation-z23[_ngcontent-%COMP%]{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.mat-elevation-z24[_ngcontent-%COMP%]{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mat-theme-loaded-marker[_ngcontent-%COMP%]{display:none}.mat-autocomplete-panel[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-autocomplete-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-active):not(:hover){background:#fff}.mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-active):not(:hover):not(.mat-option-disabled){color:rgba(0,0,0,.87)}.mat-badge-content[_ngcontent-%COMP%]{color:#fff;background:#3f51b5}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{outline:1px solid;border-radius:0}.mat-badge-accent[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{background:#ff4081;color:#fff}.mat-badge-warn[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{color:#fff;background:#f44336}.mat-badge[_ngcontent-%COMP%]{position:relative}.mat-badge-hidden[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{display:none}.mat-badge-disabled[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{background:#b9b9b9;color:rgba(0,0,0,.38)}.mat-badge-content[_ngcontent-%COMP%]{position:absolute;text-align:center;display:inline-block;border-radius:50%;transition:transform .2s ease-in-out;transform:scale(.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;pointer-events:none}.mat-badge-content._mat-animation-noopable[_ngcontent-%COMP%], .ng-animate-disabled[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{transition:none}.mat-badge-content.mat-badge-active[_ngcontent-%COMP%]{transform:none}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:16px;height:16px;line-height:16px}.mat-badge-small.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-8px}.mat-badge-small.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-8px}.mat-badge-small.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-16px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-16px}.mat-badge-small.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-16px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-16px}.mat-badge-small.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-8px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-8px}.mat-badge-small.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-8px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-8px}.mat-badge-medium[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:22px;height:22px;line-height:22px}.mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-11px}.mat-badge-medium.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-11px}.mat-badge-medium.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-22px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-22px}.mat-badge-medium.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-22px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-22px}.mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-11px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-11px}.mat-badge-medium.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-11px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-11px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}.mat-badge-large.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-14px}.mat-badge-large.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-14px}.mat-badge-large.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-28px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-28px}.mat-badge-large.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-28px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-28px}.mat-badge-large.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-14px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-14px}.mat-badge-large.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-14px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-14px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12);background:#fff;color:rgba(0,0,0,.87)}.mat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit;background:transparent}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]{color:#3f51b5}.mat-button.mat-accent[_ngcontent-%COMP%], .mat-icon-button.mat-accent[_ngcontent-%COMP%], .mat-stroked-button.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-button.mat-warn[_ngcontent-%COMP%], .mat-icon-button.mat-warn[_ngcontent-%COMP%], .mat-stroked-button.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#ff4081}.mat-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#f44336}.mat-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:transparent}.mat-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{opacity:.1;background-color:currentColor}.mat-button-focus-overlay[_ngcontent-%COMP%]{background:#000}.mat-stroked-button[_ngcontent-%COMP%]:not(.mat-button-disabled){border-color:rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);background-color:#fff}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-fab.mat-primary[_ngcontent-%COMP%], .mat-fab.mat-warn[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]{color:#fff}.mat-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081}.mat-fab.mat-warn[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]{background-color:#f44336}.mat-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-fab.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-fab.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-fab.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-flat-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-stroked-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-raised-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-raised-button[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-mini-fab[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]), .mat-mini-fab[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-mini-fab.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-button-toggle-group[_ngcontent-%COMP%], .mat-button-toggle-standalone[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%], .mat-button-toggle-standalone.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{box-shadow:none}.mat-button-toggle[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-button-toggle[_ngcontent-%COMP%]   .mat-button-toggle-focus-overlay[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);background:#fff}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle-focus-overlay[_ngcontent-%COMP%]{background-color:#000}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.12)}[dir=rtl][_ngcontent-%COMP%]   .mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:none;border-right:1px solid rgba(0,0,0,.12)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:1px solid rgba(0,0,0,.12)}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#e0e0e0;color:rgba(0,0,0,.54)}.mat-button-toggle-checked.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-button-toggle-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);background-color:#eee}.mat-button-toggle-disabled.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{background:#fff}.mat-button-toggle-disabled.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#bdbdbd}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%], .mat-button-toggle-standalone.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12)}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle-label-content[_ngcontent-%COMP%]{line-height:48px}.mat-card[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-card.mat-card-flat[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-card-subtitle[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-checkbox-frame[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.54)}.mat-checkbox-checkmark[_ngcontent-%COMP%]{fill:#fafafa}.mat-checkbox-checkmark-path[_ngcontent-%COMP%]{stroke:#fafafa!important}.mat-checkbox-mixedmark[_ngcontent-%COMP%]{background-color:#fafafa}.mat-checkbox-checked.mat-primary[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-primary[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#ff4081}.mat-checkbox-checked.mat-warn[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-warn[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-disabled.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#b0b0b0}.mat-checkbox-disabled[_ngcontent-%COMP%]:not(.mat-checkbox-checked)   .mat-checkbox-frame[_ngcontent-%COMP%]{border-color:#b0b0b0}.mat-checkbox-disabled[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-checkbox[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-primary   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-primary   .mat-ripple-element[_ngcontent-%COMP%]{background:#3f51b5}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-accent   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-accent   .mat-ripple-element[_ngcontent-%COMP%]{background:#ff4081}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-warn   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-warn   .mat-ripple-element[_ngcontent-%COMP%]{background:#f44336}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]{background-color:#e0e0e0;color:rgba(0,0,0,.87)}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);opacity:.4}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:not(.mat-chip-disabled):active{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:not(.mat-chip-disabled)   .mat-chip-remove[_ngcontent-%COMP%]:hover{opacity:.54}.mat-chip.mat-standard-chip.mat-chip-disabled[_ngcontent-%COMP%]{opacity:.4}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:after{background:#000}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-table[_ngcontent-%COMP%]{background:#fff}.mat-table-sticky[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], [mat-footer-row][_ngcontent-%COMP%], [mat-header-row][_ngcontent-%COMP%], [mat-row][_ngcontent-%COMP%], mat-footer-row[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{background:inherit}mat-footer-row[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-color:rgba(0,0,0,.12)}.mat-header-cell[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-calendar-arrow[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.54)}.mat-datepicker-content[_ngcontent-%COMP%]   .mat-calendar-next-button[_ngcontent-%COMP%], .mat-datepicker-content[_ngcontent-%COMP%]   .mat-calendar-previous-button[_ngcontent-%COMP%], .mat-datepicker-toggle[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-calendar-table-header[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-calendar-table-header-divider[_ngcontent-%COMP%]:after{background:rgba(0,0,0,.12)}.mat-calendar-body-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-calendar-body-cell-content[_ngcontent-%COMP%], .mat-date-range-input-separator[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);border-color:transparent}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected), .mat-form-field-disabled[_ngcontent-%COMP%]   .mat-date-range-input-separator[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.cdk-keyboard-focused[_ngcontent-%COMP%]   .mat-calendar-body-active[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected), .cdk-program-focused[_ngcontent-%COMP%]   .mat-calendar-body-active[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected), .mat-calendar-body-cell[_ngcontent-%COMP%]:not(.mat-calendar-body-disabled):hover > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected){background-color:rgba(0,0,0,.04)}.mat-calendar-body-in-preview[_ngcontent-%COMP%]{color:rgba(0,0,0,.24)}.mat-calendar-body-today[_ngcontent-%COMP%]:not(.mat-calendar-body-selected){border-color:rgba(0,0,0,.38)}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-today[_ngcontent-%COMP%]:not(.mat-calendar-body-selected){border-color:rgba(0,0,0,.18)}.mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(63,81,181,.2)}.mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(63,81,181,.2) 50%,rgba(249,171,0,.2) 0)}.mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(63,81,181,.2) 50%,rgba(249,171,0,.2) 0)}.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after{background:#a8dab5}.mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.4)}.mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content[_ngcontent-%COMP%]{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);background-color:#fff;color:rgba(0,0,0,.87)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(255,64,129,.2)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(255,64,129,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(255,64,129,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after{background:#a8dab5}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.4)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(244,67,54,.2)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(244,67,54,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(244,67,54,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after{background:#a8dab5}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.4)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content-touch[_ngcontent-%COMP%]{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-datepicker-toggle-active[_ngcontent-%COMP%]{color:#3f51b5}.mat-datepicker-toggle-active.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-datepicker-toggle-active.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-date-range-input-inner[disabled][_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-dialog-container[_ngcontent-%COMP%]{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background:#fff;color:rgba(0,0,0,.87)}.mat-divider[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-divider-vertical[_ngcontent-%COMP%]{border-right-color:rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-action-row[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:rgba(0,0,0,.04)}@media(hover:none){.mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded):not([aria-disabled=true])   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background:#fff}}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-expansion-indicator[_ngcontent-%COMP%]:after, .mat-expansion-panel-header-description[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{color:inherit}.mat-expansion-panel-header[_ngcontent-%COMP%]{height:48px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:64px}.mat-form-field-label[_ngcontent-%COMP%], .mat-hint[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-focused[_ngcontent-%COMP%]   .mat-form-field-required-marker[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field-ripple[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.87)}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-warn[_ngcontent-%COMP%]{background-color:#f44336}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid)   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#3f51b5}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid).mat-accent   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#ff4081}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid).mat-warn   .mat-form-field-infix[_ngcontent-%COMP%]:after, .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label.mat-accent[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]   .mat-form-field-required-marker[_ngcontent-%COMP%]{color:#f44336}.mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-accent[_ngcontent-%COMP%]{background-color:#f44336}.mat-error[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-legacy.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-standard[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-standard.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.04)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.02)}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:transparent}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:rgba(0,0,0,.12)}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field-appearance-outline.mat-focused.mat-accent[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field-appearance-outline.mat-focused.mat-warn[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-form-field-appearance-outline.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:rgba(0,0,0,.06)}.mat-icon.mat-primary[_ngcontent-%COMP%]{color:#3f51b5}.mat-icon.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-icon.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-type-mat-native-select[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:rgba(0,0,0,.54)}.mat-form-field-type-mat-native-select.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after, .mat-input-element[_ngcontent-%COMP%]:disabled{color:rgba(0,0,0,.38)}.mat-input-element[_ngcontent-%COMP%]{caret-color:#3f51b5}.mat-input-element[_ngcontent-%COMP%]::-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::-webkit-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-form-field.mat-accent[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#ff4081}.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .mat-form-field.mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#f44336}.mat-form-field-type-mat-native-select.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#f44336}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-list-item-disabled[_ngcontent-%COMP%]{background-color:#eee}.mat-action-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:focus, .mat-action-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover, .mat-list-option[_ngcontent-%COMP%]:focus, .mat-list-option[_ngcontent-%COMP%]:hover, .mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:focus, .mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.mat-list-single-selected-option[_ngcontent-%COMP%], .mat-list-single-selected-option[_ngcontent-%COMP%]:focus, .mat-list-single-selected-option[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.12)}.mat-menu-panel[_ngcontent-%COMP%]{background:#fff}.mat-menu-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-menu-item[_ngcontent-%COMP%]{background:transparent;color:rgba(0,0,0,.87)}.mat-menu-item[disabled][_ngcontent-%COMP%], .mat-menu-item[disabled][_ngcontent-%COMP%]:after{color:rgba(0,0,0,.38)}.mat-menu-item-submenu-trigger[_ngcontent-%COMP%]:after, .mat-menu-item[_ngcontent-%COMP%]   .mat-icon-no-color[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-menu-item-highlighted[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item.cdk-keyboard-focused[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item.cdk-program-focused[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item[_ngcontent-%COMP%]:hover:not([disabled]){background:rgba(0,0,0,.04)}.mat-paginator[_ngcontent-%COMP%]{background:#fff}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-paginator-decrement[_ngcontent-%COMP%], .mat-paginator-increment[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.54);border-right:2px solid rgba(0,0,0,.54)}.mat-paginator-first[_ngcontent-%COMP%], .mat-paginator-last[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.54)}.mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-decrement[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-first[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-increment[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-last[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-paginator-container[_ngcontent-%COMP%]{min-height:56px}.mat-progress-bar-background[_ngcontent-%COMP%]{fill:#c5cae9}.mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#c5cae9}.mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#3f51b5}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-background[_ngcontent-%COMP%]{fill:#ff80ab}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#ff80ab}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#ff4081}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-background[_ngcontent-%COMP%]{fill:#ffcdd2}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#ffcdd2}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#f44336}.mat-progress-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#3f51b5}.mat-progress-spinner.mat-accent[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-accent[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#ff4081}.mat-progress-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#f44336}.mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.54)}.mat-radio-button.mat-primary.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#3f51b5}.mat-radio-button.mat-primary.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-primary[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-primary[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-primary[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#ff4081}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#ff4081}.mat-radio-button.mat-warn.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#f44336}.mat-radio-button.mat-warn.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-warn[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-warn[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-warn[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#f44336}.mat-radio-button.mat-radio-disabled.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%], .mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-radio-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-select-value[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-select-placeholder[_ngcontent-%COMP%]{color:rgba(0,0,0,.42)}.mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-select-arrow[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-select-panel[_ngcontent-%COMP%]{background:#fff}.mat-select-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-select-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-multiple){background:rgba(0,0,0,.12)}.mat-form-field.mat-focused.mat-primary[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field.mat-focused.mat-accent[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field.mat-focused.mat-warn[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]   .mat-select.mat-select-invalid[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#f44336}.mat-form-field[_ngcontent-%COMP%]   .mat-select.mat-select-disabled[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-drawer-container[_ngcontent-%COMP%]{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-drawer[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-drawer[_ngcontent-%COMP%], .mat-drawer.mat-drawer-push[_ngcontent-%COMP%]{background-color:#fff}.mat-drawer[_ngcontent-%COMP%]:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-drawer-side[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.12)}.mat-drawer-side.mat-drawer-end[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .mat-drawer-side[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.12);border-right:none}[dir=rtl][_ngcontent-%COMP%]   .mat-drawer-side.mat-drawer-end[_ngcontent-%COMP%]{border-left:none;border-right:1px solid rgba(0,0,0,.12)}.mat-drawer-backdrop.mat-drawer-shown[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6)}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#ff4081}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.54)}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ff4081}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.54)}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#f44336}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.54)}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#f44336}.mat-slide-toggle[_ngcontent-%COMP%]:not(.mat-checked)   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-slide-toggle-thumb[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);background-color:#fafafa}.mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-primary[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.2)}.mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#ff4081}.mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-accent[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.2)}.mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#f44336}.mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-warn[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.2)}.cdk-focused[_ngcontent-%COMP%]   .mat-slider-track-background[_ngcontent-%COMP%], .mat-slider[_ngcontent-%COMP%]:hover   .mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-track-background[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]:hover   .mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-slider-min-value[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-slider-min-value.mat-slider-thumb-label-showing[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value.mat-slider-thumb-label-showing[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.87)}.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing)   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.26);background-color:transparent}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing).cdk-focused   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing):hover   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing).cdk-focused.mat-slider-disabled   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing):hover.mat-slider-disabled   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.26)}.mat-slider-has-ticks[_ngcontent-%COMP%]   .mat-slider-wrapper[_ngcontent-%COMP%]:after{border-color:rgba(0,0,0,.7)}.mat-slider-horizontal[_ngcontent-%COMP%]   .mat-slider-ticks[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(90deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent);background-image:-moz-repeating-linear-gradient(.0001deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent)}.mat-slider-vertical[_ngcontent-%COMP%]   .mat-slider-ticks[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(180deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent)}.mat-step-header.cdk-keyboard-focused[_ngcontent-%COMP%], .mat-step-header.cdk-program-focused[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.04)}@media(hover:none){.mat-step-header[_ngcontent-%COMP%]:hover{background:none}}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-optional[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.54);color:#fff}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-selected[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-done[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-edit[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-error[_ngcontent-%COMP%]{background-color:transparent;color:#f44336}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label.mat-step-label-active[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label.mat-step-label-error[_ngcontent-%COMP%]{color:#f44336}.mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{background-color:#fff}.mat-stepper-vertical-line[_ngcontent-%COMP%]:before{border-left-color:rgba(0,0,0,.12)}.mat-horizontal-stepper-header[_ngcontent-%COMP%]:after, .mat-horizontal-stepper-header[_ngcontent-%COMP%]:before, .mat-stepper-horizontal-line[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-horizontal-stepper-header[_ngcontent-%COMP%]{height:72px}.mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%], .mat-vertical-stepper-header[_ngcontent-%COMP%]{padding:24px}.mat-stepper-vertical-line[_ngcontent-%COMP%]:before{top:-16px;bottom:-16px}.mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%]:after, .mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%]:before, .mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-stepper-horizontal-line[_ngcontent-%COMP%]{top:36px}.mat-sort-header-arrow[_ngcontent-%COMP%]{color:#757575}.mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-nav-bar[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12);border-bottom:none}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.87)}.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-tab-group[class*=mat-background-][_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[class*=mat-background-][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(197,202,233,.3)}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,128,171,.3)}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#ff4081}.mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#f44336}.mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(197,202,233,.3)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,128,171,.3)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#ff4081}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#f44336}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-toolbar[_ngcontent-%COMP%]{background:#f5f5f5;color:rgba(0,0,0,.87)}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background:#3f51b5;color:#fff}.mat-toolbar.mat-accent[_ngcontent-%COMP%]{background:#ff4081;color:#fff}.mat-toolbar.mat-warn[_ngcontent-%COMP%]{background:#f44336;color:#fff}.mat-toolbar[_ngcontent-%COMP%]   .mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:currentColor}.mat-toolbar[_ngcontent-%COMP%]   .mat-focused[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:inherit}.mat-toolbar[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:currentColor}.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:64px}.mat-toolbar-row[_ngcontent-%COMP%], .mat-toolbar-single-row[_ngcontent-%COMP%]{height:64px}@media(max-width:599px){.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:56px}.mat-toolbar-row[_ngcontent-%COMP%], .mat-toolbar-single-row[_ngcontent-%COMP%]{height:56px}}.mat-tooltip[_ngcontent-%COMP%]{background:rgba(97,97,97,.9)}.mat-tree[_ngcontent-%COMP%]{background:#fff}.mat-nested-tree-node[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-tree-node[_ngcontent-%COMP%]{min-height:48px}.mat-snack-bar-container[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.7);background:#323232;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-simple-snackbar-action[_ngcontent-%COMP%]{color:#ff4081}.nb-theme-default   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-default   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-dark   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-cosmic   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-corporate   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-corporate   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-material-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-material-dark   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-material-light   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-material-light   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-obsrio   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-obsrio   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.marker[_ngcontent-%COMP%]{height:35px;width:35px;background-size:contain;cursor:pointer;background-repeat:no-repeat}.marker-name[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#424242;position:absolute;left:100%;text-shadow:-2px 1px 3px #fff;cursor:pointer;width:150px}#menu[_ngcontent-%COMP%]{-webkit-animation:fade .5s;animation:fade .5s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes fade{0%{opacity:0}to{opacity:1}}.mbxmap[_nghost-%COMP%], .mbxmap   [_nghost-%COMP%]{position:relative;height:100%;width:100%}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}#menu[_ngcontent-%COMP%], mgl-map[_ngcontent-%COMP%]{position:absolute}#menu[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.94);padding:5px;font-family:Open Sans,sans-serif;bottom:7em;border-radius:9px;right:7px}#redes[_ngcontent-%COMP%]{position:absolute;right:1%;bottom:1%!important}#redes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;margin-left:5px}.socialnetwork[_ngcontent-%COMP%]{opacity:.8;overflow:hidden;margin:0}.socialnetwork[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;margin-left:10px}.socialnetwork[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:.9}@media (min-width:576px){#logos-sm[_ngcontent-%COMP%]{display:none}}@media (max-width:767.98px){#logos[_ngcontent-%COMP%]{display:none}.logo[_ngcontent-%COMP%]{display:none!important}#redes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;margin-left:5px}#redes[_ngcontent-%COMP%]{width:100%;bottom:10px;z-index:2}.info-sm[_ngcontent-%COMP%]{display:none}.socialnetwork[_ngcontent-%COMP%]{opacity:.8;overflow:auto hidden;margin:0;justify-content:center;padding:0;bottom:10px;width:50px;position:absolute;right:0;transform:scale(.8)}#logos-sm[_ngcontent-%COMP%]{display:flex;bottom:4.5em;z-index:4;position:absolute;place-items:center;margin-left:.3em;left:0}#logos-sm[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:.4em}img.logo-obs-sm[_ngcontent-%COMP%]{width:1em}img.logo-uninorte-sm[_ngcontent-%COMP%]{width:5em!important}}.example-container[_ngcontent-%COMP%]{align-items:stretch;align-self:stretch;justify-content:stretch;height:90vh}.example-container[_ngcontent-%COMP%], mat-drawer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.placeholder-joyride[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;left:0;width:100%;height:100%}.placeholder-joyride[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{height:9vh;right:0;position:absolute}.placeholder-joyride[_ngcontent-%COMP%]   #center[_ngcontent-%COMP%]{height:100vh}.wmax600[_ngcontent-%COMP%]{max-width:500px!important;margin:0 auto}.welcome-popover[_ngcontent-%COMP%]{bottom:0}.fade-in[_ngcontent-%COMP%]{opacity:1;-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.7s;animation-duration:.7s;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0,1,.5,1)}  .joyride-step__holder{opacity:1;-webkit-animation-name:fadeInOpacity;animation-name:fadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.4s;animation-duration:.4s}  .backdrop-left,   .backdrop-right{opacity:1;-webkit-animation-name:fadeInOpacity;animation-name:fadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.2s;animation-duration:.2s}@-webkit-keyframes slideUp{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}"]}),t}(),ce=n("Vxv7"),he=n("FuD7"),ue=n("lJxs"),de=n("vC38"),pe=n("lWTH"),ge=n("kJCe"),me=n("mgFL");function fe(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"ngx-one-column-no-header-layout"),l["\u0275\u0275element"](1,"nb-menu",2),l["\u0275\u0275element"](2,"router-outlet"),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("items",n.menu)}}function ve(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"ngx-one-column-layout"),l["\u0275\u0275element"](1,"nb-menu",2),l["\u0275\u0275element"](2,"router-outlet"),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("items",n.menu)}}var be=function(){function t(t,e,n,i){this.accessChecker=t,this.menuService=e,this.route=n,this.ls=i,this.showHeader=!1,this.menu=he.a,this.destroy$=new w.a,e.setMenuItemVisibility(this.menu)}return t.prototype.ngOnInit=function(){var t=this;this.ls.onChangeLayoutType().pipe(Object(ue.a)((function(t){return t})),Object(At.a)(this.destroy$)).subscribe((function(e){t.showHeader="no-header"!==e.type}))},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.toggle=function(){this.showHeader=!this.showHeader},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](pe.a),l["\u0275\u0275directiveInject"](ce.a),l["\u0275\u0275directiveInject"](r.a),l["\u0275\u0275directiveInject"](de.b))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-obs"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noHeader",""],[3,"items"]],template:function(t,e){if(1&t&&(l["\u0275\u0275template"](0,fe,3,1,"ngx-one-column-no-header-layout",0),l["\u0275\u0275template"](1,ve,3,1,"ng-template",null,1,l["\u0275\u0275templateRefExtractor"])),2&t){var n=l["\u0275\u0275reference"](2);l["\u0275\u0275property"]("ngIf",!e.showHeader)("ngIfElse",n)}},directives:[o.m,ge.a,g.ab,r.h,me.a],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-default   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-dark   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-cosmic   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-corporate   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-material-dark   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-material-dark   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-material-light   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-material-light   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-obsrio   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-obsrio   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}"]}),t}(),ye=function(){function t(){}return t.prototype.deserialize=function(t){return t.state=1===Number(t.state),t.isPinned=t.state,t.exclusions=t.exclusions?JSON.parse(t.exclusions):[],Object.assign(this,t),this},t}(),_e=function(){function t(){}return t.prototype.deserialize=function(t){return Object.assign(this,t),!this.layers||t.layers.map((function(t){return(new ye).deserialize(t)})),this},t}(),Ce=n("w8jS"),xe=n("JIr8"),we=n("g+oh"),Ie=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i}return Object(i.c)(e,t),e.prototype.getAll=function(){var t=this;return this._http.get("categories").pipe(Object(Pt.a)((function(e){return t.log("Fetched Categories")})),Object(xe.a)(this.handleError("getAll",[])),Object(ue.a)((function(t){return t.map((function(t){return(new _e).deserialize(t)}))})))},e.prototype.addCategory=function(t){var e=this;return this._http.post("categories",t).pipe(Object(Pt.a)((function(n){return e.log("create category id="+t.id)})),Object(xe.a)(this.handleError("addCategory")))},e.prototype.deleteCategory=function(t){var e=this,n="number"==typeof t?t:t.id,i=function(t){return"categories/"+t}(n);return this._http.delete(i).pipe(Object(Pt.a)((function(t){return e.log("deleted cat id="+n)})),Object(xe.a)(this.handleError("deleteCategory")))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](Ce.a),l["\u0275\u0275inject"](g.Ib))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(we.a),Ae=n("3Pt+"),Pe=function(){function t(t,e,n,i){this._fb=t,this._toastrService=e,this._catService=n,this._dialog=i,this.loading=!1,this.index=0}return t.prototype.ngOnInit=function(){var t,e,n,i;this.form=this._fb.group({id:[(null===(t=this._cat)||void 0===t?void 0:t.id)||""],name:[(null===(e=this._cat)||void 0===e?void 0:e.name)||"",Ae.z.required],public_desc:[(null===(n=this._cat)||void 0===n?void 0:n.public_desc)||"",Ae.z.required],state:[!0,Ae.z.required],type:[(null===(i=this._cat)||void 0===i?void 0:i.type)||"radio",Ae.z.required]})},t.prototype.onSubmit=function(){var t=this;this.loading=!0,this._catService.addCategory(this.form.value).subscribe({next:function(e){t.loading=!1,e&&(t._cat=e,t.showToast("top rigth","success","Agregado correctamente"),t._dialog.close(e))},error:function(e){t.showToast("top rigth","danger",e)}})},t.prototype.close=function(){this._dialog.close()},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Ae.e),l["\u0275\u0275directiveInject"](g.Ib),l["\u0275\u0275directiveInject"](Ie),l["\u0275\u0275directiveInject"](g.F))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-category-edit"]],inputs:{_cat:"_cat"},decls:30,vars:2,consts:[["id","category_form",3,"formGroup"],["status","control"],[1,"d-flex","justify-content-between"],["formControlName","state","labelPosition","start"],["formControlName","name","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre"],["formControlName","public_desc","nbInput","","fullWidth","","placeholder","Descripci\xf3n","shape","semi-round"],["formControlName","type","name","type","status","info",1,"radio-icon"],["value","radio"],[1,"radio-image-container"],["src","assets/img/radio.gif",1,"radio-image"],["value","checkbox"],["src","assets/img/checkbox.gif",1,"radio-image"],["size","small","fullWidth",""],["icon","close-square-outline",3,"click"],["type","submit","icon","save-outline",1,"success",3,"disabled","click"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"form",0),l["\u0275\u0275elementStart"](1,"nb-card",1),l["\u0275\u0275elementStart"](2,"nb-card-header",2),l["\u0275\u0275elementStart"](3,"span"),l["\u0275\u0275text"](4,"Categoria"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"nb-toggle",3),l["\u0275\u0275text"](6,"Visible?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"nb-card-body"),l["\u0275\u0275element"](8,"input",4),l["\u0275\u0275element"](9,"textarea",5),l["\u0275\u0275elementStart"](10,"nb-radio-group",6),l["\u0275\u0275elementStart"](11,"nb-radio",7),l["\u0275\u0275elementStart"](12,"div",2),l["\u0275\u0275elementStart"](13,"span"),l["\u0275\u0275text"](14,"\xdanico"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"span",8),l["\u0275\u0275element"](16,"img",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"nb-radio",10),l["\u0275\u0275elementStart"](18,"div",2),l["\u0275\u0275elementStart"](19,"span"),l["\u0275\u0275text"](20,"Multiple"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"span",8),l["\u0275\u0275element"](22,"img",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](23,"div"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"nb-card-footer"),l["\u0275\u0275elementStart"](25,"nb-actions",12),l["\u0275\u0275elementStart"](26,"nb-action",13),l["\u0275\u0275listener"]("click",(function(){return e.close()})),l["\u0275\u0275text"](27,"Cancelar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"nb-action",14),l["\u0275\u0275listener"]("click",(function(){return e.onSubmit()})),l["\u0275\u0275text"](29,"Guardar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275property"]("formGroup",e.form),l["\u0275\u0275advance"](28),l["\u0275\u0275property"]("disabled",!e.form.valid))},directives:[Ae.B,Ae.r,Ae.i,g.u,g.x,g.Jb,Ae.q,Ae.h,g.t,Ae.b,g.N,g.kb,g.jb,g.v,g.l,g.k],styles:["#category_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-default   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-cosmic   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-corporate   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-light   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-obsrio   [_nghost-%COMP%]     nb-action.success nb-icon{color:#418e11!important}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}"]}),t}(),Oe=function(t){return"layers/"+t},Me=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i}return Object(i.c)(e,t),e.prototype.updateStyleLayer=function(t){var e=this;return this._http.put(Oe(t.id),t).pipe(Object(Pt.a)((function(t){return e.log("updated Layer ")})))},e.prototype.updateLayerExclusions=function(t){var e,n=this;return this._http.put((e=t.id,"layers/exclusions/"+e),t).pipe(Object(Pt.a)((function(t){return n.log("updated Layer ")})))},e.prototype.addLayer=function(t){var e=this;return this._http.postFormData("layers",t,{reportProgress:!0,observe:"events"}).pipe(Object(Pt.a)((function(t){return e.log("create Layer ")})),Object(xe.a)(this.handleError("addLayer")))},e.prototype.updateState=function(t){var e,n=this;return this._http.put((e=t.id,"layers/state/"+e),t).pipe(Object(Pt.a)((function(t){return n.log("create Layer ")})))},e.prototype.deleteLayer=function(t){var e=this,n="number"==typeof t?t:t.id,i=Oe(n);return this._http.delete(i).pipe(Object(Pt.a)((function(t){return e.log("deleted layer id="+n)})),Object(xe.a)(this.handleError("deleteLayer")))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](Ce.a),l["\u0275\u0275inject"](g.Ib))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(we.a),ke=n("tk/3"),Se=n("YfBG"),Ee=["jsonEditorContainer"],Te=function t(){Object(_.a)(this,t),this.enableSort=!0,this.enableTransform=!0,this.escapeUnicode=!1,this.expandAll=!1,this.sortObjectKeys=!1,this.history=!0,this.mode="tree",this.search=!0,this.indentation=2},Re=function(){var t=function(){function t(){Object(_.a)(this,t),this.id="angjsoneditor"+Math.floor(1e6*Math.random()),this.disabled=!1,this.isFocused=!1,this.optionsChanged=!1,this._data={},this.options=new Te,this.debug=!1,this.change=new l.EventEmitter,this.jsonChange=new l.EventEmitter,this.onTouched=function(){},this.onChangeModel=function(t){}}return Object(y.a)(t,[{key:"ngOnInit",value:function(){var t=this.options;!this.optionsChanged&&this.editor&&(t=this.editor.options),!this.options.onChangeJSON&&this.jsonChange&&(this.options.onChangeJSON=this.onChangeJSON.bind(this)),!this.options.onChange&&this.change&&(this.options.onChange=this.onChange.bind(this));var e=Object.assign({},t);delete e.expandAll,this.debug&&console.log(e,this._data),this.jsonEditorContainer.nativeElement||console.error("Can't find the ElementRef reference for jsoneditor)"),"text"!==e.mode&&"code"!==e.mode||(e.onChangeJSON=null),this.editor=new Se(this.jsonEditorContainer.nativeElement,e,this._data),this.options.expandAll&&this.editor.expandAll()}},{key:"writeValue",value:function(t){this.data=t}},{key:"registerOnChange",value:function(t){this.onChangeModel=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"onChange",value:function(t){this.editor&&(this.onChangeModel(this.editor.get()),this.change.emit(this.editor.get()))}},{key:"onChangeJSON",value:function(t){this.editor&&this.jsonChange.emit(this.editor.get())}},{key:"collapseAll",value:function(){this.editor.collapseAll()}},{key:"expandAll",value:function(){this.editor.expandAll()}},{key:"focus",value:function(){this.editor.focus()}},{key:"get",value:function(){return this.editor.get()}},{key:"getMode",value:function(){return this.editor.getMode()}},{key:"getName",value:function(){return this.editor.getName()}},{key:"getText",value:function(){return this.editor.getText()}},{key:"set",value:function(t){this.editor.set(t)}},{key:"setMode",value:function(t){this.editor.setMode(t)}},{key:"setName",value:function(t){this.editor.setName(t)}},{key:"setSelection",value:function(t,e){this.editor.setSelection(t,e)}},{key:"getSelection",value:function(){return this.editor.getSelection()}},{key:"getValidateSchema",value:function(){return this.editor.validateSchema}},{key:"setSchema",value:function(t){this.editor.setSchema(t)}},{key:"search",value:function(t){this.editor.search(t)}},{key:"setOptions",value:function(t){this.editor&&this.editor.destroy(),this.optionsChanged=!0,this.options=t,this.ngOnInit()}},{key:"update",value:function(t){this.editor.update(t)}},{key:"destroy",value:function(){this.editor.destroy()}},{key:"isValidJson",value:function(){try{return JSON.parse(this.getText()),!0}catch(t){return!1}}},{key:"data",set:function(t){this._data=t,this.editor&&(this.editor.destroy(),this.ngOnInit())}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["json-editor"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275staticViewQuery"](Ee,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.jsonEditorContainer=n.first)},inputs:{options:"options",debug:"debug",data:"data"},outputs:{change:"change",jsonChange:"jsonChange"},features:[l["\u0275\u0275ProvidersFeature"]([{provide:Ae.o,useExisting:Object(l.forwardRef)((function(){return t})),multi:!0}])],decls:2,vars:1,consts:[[3,"id"],["jsonEditorContainer",""]],template:function(t,e){1&t&&l["\u0275\u0275element"](0,"div",0,1),2&t&&l["\u0275\u0275property"]("id",e.id)},encapsulation:2,changeDetection:0}),t}(),Le=function(){var t=function(){function t(){Object(_.a)(this,t)}return Object(y.a)(t,null,[{key:"forRoot",value:function(){return{ngModule:t,providers:[]}}}]),t}();return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.c,Ae.k]]}),t}();function ze(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-checkbox",4),l["\u0275\u0275listener"]("checkedChange",(function(t){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).onChange(t,e)})),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit,o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("checked",o.isChecked(i)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"]("",i.id,". ",i.name,"")}}function Be(t,e){if(1&t&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,ze,2,3,"nb-checkbox",3),l["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.id!==i._layer.id)}}function je(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"h6"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275template"](4,Be,2,1,"ng-container",1),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",n.layers)}}var De=function(){function t(t,e){this._catService=t,this._layerService=e}return t.prototype.ngOnDestroy=function(){this.cat$.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;this.cat$=this._catService.getAll().subscribe({next:function(e){t.categories=e}})},t.prototype.onChange=function(t,e){var n=this;if(t)this._layer.exclusions.push(e.id);else{var i=0;this._layer.exclusions.forEach((function(t){t!==e.id?i++:n._layer.exclusions.splice(i,1)}))}},t.prototype.updateLayerExclusions=function(){var t=this;try{this._layer.exclusions?this._layerService.updateLayerExclusions(this._layer).subscribe({next:function(e){e?t._layerService.showToast("top rigth","success","Agregado correctamente"):t._layerService.showToast("top rigth","danger","presenta errores")},error:function(e){t._layerService.showToast("top rigth","danger",e.message)}}):this._layerService.showToast("top rigth","danger","La estructura presenta errores")}catch(e){this._layerService.showToast("top rigth","danger",e)}},t.prototype.isChecked=function(t){return this._layer.exclusions.indexOf(t.id)>=0},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Ie),l["\u0275\u0275directiveInject"](Me))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layer-exclusions"]],inputs:{_layer:"_layer"},decls:5,vars:2,consts:[[1,"exclude"],[4,"ngFor","ngForOf"],[1,"cat-layers"],["class","ml-2",3,"checked","checkedChange",4,"ngIf"],[1,"ml-2",3,"checked","checkedChange"]],template:function(t,e){1&t&&(l["\u0275\u0275text"](0,"Selecciones las capas que no deben activarse al mismo tiempo que la capa: "),l["\u0275\u0275elementStart"](1,"b"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",0),l["\u0275\u0275template"](4,je,5,2,"div",1),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e._layer.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",e.categories))},directives:[o.l,o.m,g.z],styles:[""]}),t}(),Fe=n("5+WD"),Ve=n("kvL/"),Ne=n("QJFE"),$e=["swalComp"],Ze=["exclusionsComp"];function Ge(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"nb-radio",47),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275property"]("value",n.value),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function We(t,e){if(1&t&&l["\u0275\u0275element"](0,"nb-progress-bar",47),2&t){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("value",n.progress)}}function He(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ngx-dropzone-preview",50),l["\u0275\u0275listener"]("removed",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"](2).onRemoveFile(t)})),l["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),l["\u0275\u0275element"](2,"nb-icon",51),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;l["\u0275\u0275property"]("removable",!0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",i.name," ")}}function Ke(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275template"](1,We,1,1,"nb-progress-bar",31),l["\u0275\u0275elementStart"](2,"ngx-dropzone",48),l["\u0275\u0275listener"]("change",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onSelectFile(t)})),l["\u0275\u0275elementStart"](3,"ngx-dropzone-label"),l["\u0275\u0275element"](4,"nb-icon",34),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](6,He,4,2,"ngx-dropzone-preview",49),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.progress>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("multiple",!1)("accept",i.acceptedFiles),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" Agrega el Archivo de tipo: ",i.acceptedFiles," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",i.files)}}function Ue(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Ingresa la url que contiene el Archivo "),l["\u0275\u0275element"](2,"input",52),l["\u0275\u0275elementEnd"]())}function Xe(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Ingresa la url de la API REST "),l["\u0275\u0275element"](2,"input",52),l["\u0275\u0275elementEnd"]())}function Ye(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",53),l["\u0275\u0275elementStart"](1,"h2"),l["\u0275\u0275text"](2,"Selecciona una Opci\xf3n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function Je(t,e){if(1&t&&l["\u0275\u0275element"](0,"nb-progress-bar",47),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("value",n.progress)}}function qe(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275text"](1," Actual: "),l["\u0275\u0275element"](2,"img",54),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("src",n._layer.convention,l["\u0275\u0275sanitizeUrl"])}}function Qe(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",55),l["\u0275\u0275listener"]("removed",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit;return l["\u0275\u0275nextContext"]().onRemoveFileConvention(t)})),l["\u0275\u0275element"](1,"ngx-dropzone-label"),l["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;l["\u0275\u0275property"]("removable",!0)("file",i)}}function tn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-tab",56),l["\u0275\u0275elementStart"](1,"div",57),l["\u0275\u0275elementStart"](2,"p"),l["\u0275\u0275text"](3," MapBox Styles Guide: "),l["\u0275\u0275elementStart"](4,"strong"),l["\u0275\u0275elementStart"](5,"a",58),l["\u0275\u0275text"](6," MBStyle "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](7,". "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"json-editor",59),l["\u0275\u0275listener"]("change",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().updateMap(t)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("options",i.editorOptions)}}function en(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"nb-tab",60),l["\u0275\u0275element"](1,"ngx-layer-exclusions",61,62),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("_layer",n._layer)}}function nn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-action",63),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().checkSubmit()})),l["\u0275\u0275text"](1,"Guardar"),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("disabled",!i.form.valid)}}function on(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-action"),l["\u0275\u0275elementStart"](1,"button",64),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().updateLayerStyle()})),l["\u0275\u0275element"](2,"nb-icon",65),l["\u0275\u0275text"](3," Guardar Estilos "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function rn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-action"),l["\u0275\u0275elementStart"](1,"button",66),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().updateLayerExclusions()})),l["\u0275\u0275element"](2,"nb-icon",65),l["\u0275\u0275text"](3," Guardar Exclusiones "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function an(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",67),l["\u0275\u0275text"](1," Ejemplos en: "),l["\u0275\u0275elementStart"](2,"a",68),l["\u0275\u0275text"](3,"http://geojson.xyz/"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function sn(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",67),l["\u0275\u0275text"](1,"Plugin: "),l["\u0275\u0275elementStart"](2,"a",69),l["\u0275\u0275text"](3,"qgis2web"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function ln(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",67),l["\u0275\u0275elementStart"](1,"span"),l["\u0275\u0275text"](2,"Ejemplos en: "),l["\u0275\u0275elementStart"](3,"a",68),l["\u0275\u0275text"](4,"http://geojson.xyz/"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function cn(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",67),l["\u0275\u0275elementStart"](1,"span"),l["\u0275\u0275text"](2,"API libre con Minimo: Lat y Lon"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}var hn=function(){return{confirmButtonText:"Continuar, Agregar Capa"}},un=function(){function t(t,e,n,i,o){var r=this;this._fb=t,this._toastrService=e,this._layerService=n,this._dialog=i,this._glMapService=o,this.options=[{value:"points",label:"Puntos"},{value:"lines",label:"Lineas"},{value:"polygons",label:"Polygonos"},{value:"raster",label:"Raster"}],this.loading=!1,this.tab="layers",this.files=[],this.filesConv=[],this.acceptedFiles="*",this.index=0,o.getMap().subscribe({next:function(t){r.gl_map=t}})}return t.prototype.ngOnInit=function(){var t,e,n,i,o,r,a,s,l,c,h,u=this._layer?JSON.parse(null===(t=this._layer)||void 0===t?void 0:t.glLayers):{};this.form=this._fb.group({id:[(null===(e=this._layer)||void 0===e?void 0:e.id)||""],category_id:[(null===(n=this._cat)||void 0===n?void 0:n.id)||"",Ae.z.required],state:[(null===(i=this._layer)||void 0===i?void 0:i.state)||!0,Ae.z.required],name:[(null===(o=this._layer)||void 0===o?void 0:o.name)||"",Ae.z.required],desc:[(null===(r=this._layer)||void 0===r?void 0:r.desc)||"",Ae.z.required],type:[(null===(a=this._layer)||void 0===a?void 0:a.type)||"points",Ae.z.required],sourceType:[(null===(s=this._layer)||void 0===s?void 0:s.sourceType)||"",Ae.z.required],source:[(null===(l=this._layer)||void 0===l?void 0:l.source)||""],glSource:[(null===(c=this._layer)||void 0===c?void 0:c.glSource)||""],glLayer:[u||null],file:[(null===(h=this._layer)||void 0===h?void 0:h.file)||""]}),this.editorOptions=new Te,this.editorOptions.modes=["code"],this.editorOptions.mode="code"},t.prototype.isValidSubmit=function(){try{if(this.form.valid)return!0}catch(t){return!1}return!1},t.prototype.checkSubmit=function(){0===this.filesConv.length?this.swalComp.fire():this.onSubmit()},t.prototype.updateLayerExclusions=function(){this.exclusionsComp.updateLayerExclusions()},t.prototype.changeTab=function(t){this.tab=t.tabTitle},t.prototype.updateLayerStyle=function(){var t=this;try{this.editor.isValidJson()?(this._layer.glLayers=JSON.stringify(this.form.get("glLayer").value),this._layerService.updateStyleLayer(this._layer).subscribe({next:function(e){e?(t.showToast("top rigth","success","Agregado correctamente"),JSON.parse(e.glLayers).map((function(e){t.gl_map.removeLayer(e.id),t.gl_map.addLayer(e)}))):t.showToast("top rigth","danger","presenta errores")},error:function(e){t.showToast("top rigth","danger",e.message)}})):this.showToast("top rigth","danger","La estructura presenta errores")}catch(e){this.showToast("top rigth","danger",e)}},t.prototype.updateMap=function(t){var e=this;this.form.get("glLayer").value.map((function(t){e.gl_map.removeLayer(t.id),e.gl_map.addLayer(t)}))},t.prototype.resetStyleEdit=function(){var t=this;JSON.parse(this._layer.glLayers).map((function(e){t.gl_map.removeLayer(e.id),t.gl_map.addLayer(e)}))},t.prototype.onSubmit=function(){var t=this;if(this.isValidSubmit()){var e=this.toFormData(this.form);this.files.length>0&&e.append("file",this.files[0]),this.filesConv.length>0&&e.append("fileConv",this.filesConv[0]),this.loading=!0,this._layerService.addLayer(e).subscribe({next:function(e){e.type===ke.e.UploadProgress&&(t.progress=Math.round(100*e.loaded/e.total)),e.type===ke.e.Response&&(t.form.reset(),t.showToast("top rigth","success","Agregado correctamente"),t._dialog.close(e.body.layer),t.loading=!1,t.progress=0)},error:function(e){t.showToast("top rigth","danger",e),t.loading=!1,t.progress=0}})}else alert("Debe llenar los campos obligatorios.")},t.prototype.toFormData=function(t){for(var e=new FormData,n=t.value,i=0,o=Object.keys(n);i<o.length;i++){var r=o[i];e.append(r,n[r])}return e},t.prototype.setSourceType=function(t){this.form.get("sourceType").setValue(t),"geojson"===t&&(this.acceptedFiles=".geojson"),"qgis2web"===t&&(this.acceptedFiles=".zip")},t.prototype.isSelected=function(t){return t===this.form.get("sourceType").value?"success":"info"},t.prototype.close=function(){this._dialog.close()},t.prototype.onSelectFile=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.prototype.onRemoveFile=function(t){this.files.splice(this.files.indexOf(t),1),this.form.patchValue({source:""})},t.prototype.onSelectConvention=function(t){var e;(e=this.filesConv).push.apply(e,t.addedFiles)},t.prototype.onRemoveFileConvention=function(t){this.filesConv.splice(this.filesConv.indexOf(t),1),this.form.patchValue({sourceConv:""})},t.prototype.readFile=function(t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return[2,new Promise((function(e,n){var i=new FileReader;if(i.onload=function(t){return e(t.target.result)},i.onerror=function(e){return console.error("FileReader failed on file "+t.name+"."),n(null)},!t)return console.error("No file to read."),n(null);i.readAsDataURL(t)}))]}))}))},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](Ae.e),l["\u0275\u0275directiveInject"](g.Ib),l["\u0275\u0275directiveInject"](Me),l["\u0275\u0275directiveInject"](g.F),l["\u0275\u0275directiveInject"](c))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layer-edit"]],viewQuery:function(t,e){var n;1&t&&(l["\u0275\u0275viewQuery"]($e,!0),l["\u0275\u0275viewQuery"](Ze,!0),l["\u0275\u0275viewQuery"](Re,!0)),2&t&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.swalComp=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.exclusionsComp=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.editor=n.first))},inputs:{_layer:"_layer",_cat:"_cat"},decls:83,vars:30,consts:[["id","layers_form","cdkDrag","",3,"formGroup"],["id","edit-layer-card","size","giant","accent","info","status","info"],[1,"d-flex","justify-content-between","info"],["formControlName","state","labelPosition","start"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["icon","close-square-outline",3,"click"],["fullWidth","",3,"changeTab"],["tabTitle","Layer","tabIcon","options-outline","responsive",""],[1,"col-sm-12"],["formControlName","name","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre",1,"mt-2"],["formControlName","desc","nbInput","","fullWidth","","placeholder","Descripci\xf3n","shape","semi-round",1,"mt-2"],[1,"d-flex","flex-wrap","mt-2"],["formControlName","type",1,"row","mx-0","justify-content-between"],[3,"value",4,"ngFor","ngForOf"],["name","type","status","info",1,"layer-options","mt-2","mb-2"],[1,"row"],[1,"col-xs-6","col-sm-3"],["nbPopoverPlacement","bottom","nbPopoverTrigger","hover","outline","","nbButton","",1,"layer-option","d-flex","flex-column","col-12",3,"nbPopover","status","click"],["src","assets/img/geojson.png",1,"radio-image"],["src","assets/img/qgis.png",1,"radio-image"],["src","assets/img/url.png",1,"radio-image"],["src","assets/img/api.png",1,"radio-image"],["nbSpinnerStatus","danger",1,"selected-option",3,"nbSpinner","ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["class","d-flex justify-content-center",4,"ngSwitchCase"],["tabTitle","Convenci\xf3nes","tabIcon","color-palette-outline","responsive",""],["nbSpinnerStatus","danger",1,"selected-option",3,"nbSpinner"],[3,"value",4,"ngIf"],["class","col-sm-12",4,"ngIf"],["accept","image/*",3,"multiple","change"],["icon","cloud-upload"],["class","mt-2","ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["tabTitle","Estilos","tabIcon","color-palette-outline","responsive","",4,"ngIf"],["tabTitle","Exclusi\xf3nes","tabIcon","color-palette-outline","responsive","",4,"ngIf"],["size","small","fullWidth",""],["type","submit","class","success","icon","save-outline",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["title","Desea agregar esta capa sin conveci\xf3nes?","text","Las podr\xe1 agregar posteriormente.","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],["templateRef1",""],["templateRef2",""],["templateRef3",""],["templateRef4",""],[3,"value"],[3,"multiple","accept","change"],["class","mt-2",3,"removable","removed",4,"ngFor","ngForOf"],[1,"mt-2",3,"removable","removed"],["icon","file-text"],["formControlName","source","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre"],[1,"d-flex","justify-content-center"],["width","150","alt","convecion",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],1,"mt-2",3,"removable","file","removed"],["tabTitle","Estilos","tabIcon","color-palette-outline","responsive",""],[1,"d-flex","justify-content-between"],["href","https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/","target","_blank"],["formControlName","glLayer",1,"col-md-12",2,"width","600px","height","600px",3,"options","change"],["tabTitle","Exclusi\xf3nes","tabIcon","color-palette-outline","responsive",""],[3,"_layer"],["exclusionsComp",""],["type","submit","icon","save-outline",1,"success",3,"disabled","click"],["hero","","fullWidth","","nbButton","","type","submit","status","info",3,"click"],["icon","sync-outline"],["hero","","fullWidth","","nbButton","","type","submit","status","success",3,"click"],[1,"opt-popover"],["href","http://geojson.xyz/","target","_blanck"],["href","https://github.com/tomchadwin/qgis2web","target","_blanck"]],template:function(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"form",0),l["\u0275\u0275elementStart"](1,"nb-card",1),l["\u0275\u0275elementStart"](2,"nb-card-header",2),l["\u0275\u0275elementStart"](3,"span"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"nb-actions"),l["\u0275\u0275elementStart"](6,"nb-action"),l["\u0275\u0275elementStart"](7,"nb-toggle",3),l["\u0275\u0275text"](8,"Visible?"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"nb-action"),l["\u0275\u0275elementStart"](10,"div",4),l["\u0275\u0275namespaceSVG"](),l["\u0275\u0275elementStart"](11,"svg",5),l["\u0275\u0275element"](12,"path",6),l["\u0275\u0275element"](13,"path",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275namespaceHTML"](),l["\u0275\u0275elementStart"](14,"nb-action",8),l["\u0275\u0275listener"]("click",(function(){return e.close()})),l["\u0275\u0275text"](15,"Cancelar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"nb-card-body"),l["\u0275\u0275elementStart"](17,"nb-tabset",9),l["\u0275\u0275listener"]("changeTab",(function(t){return e.changeTab(t)})),l["\u0275\u0275elementStart"](18,"nb-tab",10),l["\u0275\u0275elementStart"](19,"div",11),l["\u0275\u0275element"](20,"input",12),l["\u0275\u0275element"](21,"textarea",13),l["\u0275\u0275elementStart"](22,"p"),l["\u0275\u0275text"](23,"Tipo:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"div",14),l["\u0275\u0275elementStart"](25,"nb-radio-group",15),l["\u0275\u0275template"](26,Ge,2,2,"nb-radio",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",17),l["\u0275\u0275elementStart"](28,"div",18),l["\u0275\u0275elementStart"](29,"div",19),l["\u0275\u0275elementStart"](30,"button",20),l["\u0275\u0275listener"]("click",(function(){return e.setSourceType("geojson")})),l["\u0275\u0275element"](31,"img",21),l["\u0275\u0275elementStart"](32,"span"),l["\u0275\u0275text"](33,"GeoJson"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"div",19),l["\u0275\u0275elementStart"](35,"button",20),l["\u0275\u0275listener"]("click",(function(){return e.setSourceType("qgis2web")})),l["\u0275\u0275element"](36,"img",22),l["\u0275\u0275elementStart"](37,"span"),l["\u0275\u0275text"](38,"Qgis2Web"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",19),l["\u0275\u0275elementStart"](40,"button",20),l["\u0275\u0275listener"]("click",(function(){return e.setSourceType("url")})),l["\u0275\u0275element"](41,"img",23),l["\u0275\u0275elementStart"](42,"span"),l["\u0275\u0275text"](43,"Url"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"div",19),l["\u0275\u0275elementStart"](45,"button",20),l["\u0275\u0275listener"]("click",(function(){return e.setSourceType("api")})),l["\u0275\u0275element"](46,"img",24),l["\u0275\u0275elementStart"](47,"span"),l["\u0275\u0275text"](48,"API"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](49,"div",25),l["\u0275\u0275template"](50,Ke,7,5,"div",26),l["\u0275\u0275template"](51,Ue,3,0,"div",27),l["\u0275\u0275template"](52,Xe,3,0,"div",27),l["\u0275\u0275template"](53,Ye,3,0,"div",28),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](54,"nb-tab",29),l["\u0275\u0275elementStart"](55,"p"),l["\u0275\u0275text"](56,"Convenci\xf3nes de la capa"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](57,"div",30),l["\u0275\u0275elementStart"](58,"div"),l["\u0275\u0275template"](59,Je,1,1,"nb-progress-bar",31),l["\u0275\u0275template"](60,qe,3,1,"div",32),l["\u0275\u0275elementStart"](61,"ngx-dropzone",33),l["\u0275\u0275listener"]("change",(function(t){return e.onSelectConvention(t)})),l["\u0275\u0275elementStart"](62,"ngx-dropzone-label"),l["\u0275\u0275element"](63,"nb-icon",34),l["\u0275\u0275text"](64," Agrega una Imagen que contenga las convenciones de la capa "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](65,Qe,2,2,"ngx-dropzone-image-preview",35),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](66,tn,9,1,"nb-tab",36),l["\u0275\u0275template"](67,en,3,1,"nb-tab",37),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](68,"nb-card-footer"),l["\u0275\u0275elementStart"](69,"nb-actions",38),l["\u0275\u0275template"](70,nn,2,1,"nb-action",39),l["\u0275\u0275template"](71,on,4,0,"nb-action",40),l["\u0275\u0275template"](72,rn,4,0,"nb-action",40),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](73,"swal",41,42),l["\u0275\u0275listener"]("confirm",(function(){return e.onSubmit()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](75,an,4,0,"ng-template",null,43,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](77,sn,4,0,"ng-template",null,44,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](79,ln,5,0,"ng-template",null,45,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](81,cn,3,0,"ng-template",null,46,l["\u0275\u0275templateRefExtractor"])),2&t){var n=l["\u0275\u0275reference"](76),i=l["\u0275\u0275reference"](78),o=l["\u0275\u0275reference"](80),r=l["\u0275\u0275reference"](82);l["\u0275\u0275property"]("formGroup",e.form),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("Agregar Capa a : ",e._cat.name," "),l["\u0275\u0275advance"](22),l["\u0275\u0275property"]("ngForOf",e.options),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("nbPopover",n)("status",e.isSelected("geojson")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("nbPopover",i)("status",e.isSelected("qgis2web")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("nbPopover",o)("status",e.isSelected("url")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("nbPopover",r)("status",e.isSelected("api")),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("nbSpinner",e.loading)("ngSwitch",e.form.get("sourceType").value),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngSwitchCase","url"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","api"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase",""),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("nbSpinner",e.loading),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.progress>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",null==e._layer?null:e._layer.convention),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("multiple",!1),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngForOf",e.filesConv),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e._layer),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e._layer),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","Layer"==e.tab||"Convenci\xf3nes"==e.tab),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","Estilos"==e.tab),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","Exclusi\xf3nes"==e.tab),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",l["\u0275\u0275pureFunction0"](29,hn))}},directives:[Ae.B,Ae.r,Fe.a,Ae.i,g.u,g.x,g.l,g.k,g.Jb,Ae.q,Ae.h,Fe.b,g.t,g.Db,g.Cb,Ae.b,g.N,g.kb,o.l,g.q,g.eb,g.tb,o.o,o.q,o.p,o.m,Ve.a,Ve.e,g.K,g.v,Ne.a,g.jb,g.hb,Ve.d,Ve.b,Re,De],styles:['.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type]), .jsoneditor-modal[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type]), .jsoneditor[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{height:auto;border:inherit;box-shadow:none;font-size:inherit;box-sizing:inherit;padding:inherit;font-family:inherit;transition:none;line-height:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type]):focus, .jsoneditor-modal[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]:focus, .jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .jsoneditor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .jsoneditor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type]):focus, .jsoneditor[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]:focus, .jsoneditor[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border:inherit;box-shadow:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:inherit;height:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:inherit;font-weight:inherit;color:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:auto}.jsoneditor-modal[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0;display:table-cell;text-align:left;vertical-align:inherit;border-radius:inherit}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);border:1px solid #d3d3d3;overflow-x:hidden;overflow-y:auto;cursor:default;margin:0;padding:5px;text-align:left;outline:0;font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#333}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]   .item.hover[_ngcontent-%COMP%]{background-color:#ddd}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.hint[_ngcontent-%COMP%]{color:#aaa;top:4px;left:4px}.jsoneditor-contextmenu-root[_ngcontent-%COMP%]{position:relative;width:0;height:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]{position:absolute;box-sizing:content-box;z-index:2}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]{position:relative;left:0;top:0;width:128px;height:auto;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);list-style:none;margin:0;padding:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:0 4px 0 0;margin:0;width:128px;height:auto;border:none;cursor:pointer;color:#4d4d4d;background:0 0;font-size:10pt;font-family:arial,sans-serif;box-sizing:border-box;text-align:left}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{padding:0;border:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button.jsoneditor-default[_ngcontent-%COMP%]{width:96px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button.jsoneditor-expand[_ngcontent-%COMP%]{float:right;width:32px;height:24px;border-left:1px solid #e5e5e5}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{overflow:hidden}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;position:relative;left:-10px;top:0;border:none;box-shadow:inset 0 0 10px hsla(0,0%,50.2%,.5);padding:0 10px;transition:all .3s ease-out}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{margin-left:24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-left:24px;-webkit-animation:all 1s ease-in-out;animation:all 1s ease-in-out}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .jsoneditor-expand[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:24px;height:24px;padding:0;margin:0 4px 0 0;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) 0 -72px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:24px;height:24px;border:none;padding:0;margin:0;background-image:url(jsoneditor-icons.15f2789dd231f36d43a4.svg)}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-text[_ngcontent-%COMP%]{padding:4px 0 4px 24px;word-wrap:break-word}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-text.jsoneditor-right-margin[_ngcontent-%COMP%]{padding-right:24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-separator[_ngcontent-%COMP%]{height:0;border-top:1px solid #e5e5e5;padding-top:5px;margin-top:5px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-remove[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-24px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-append[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-insert[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:0 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-duplicate[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-48px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-sort-asc[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-168px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-sort-desc[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-192px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-transform[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-216px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-extract[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:0 -24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-string[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-144px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-auto[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-120px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-object[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-72px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-array[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-96px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-modes[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-image:none;width:6px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{box-sizing:content-box;position:relative}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1a1a1a;background-color:#f5f5f5;outline:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ee422e}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.jsoneditor-modal[_ngcontent-%COMP%]{max-width:95%;border-radius:2px!important;padding:45px 15px 15px!important;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);color:#4d4d4d;line-height:1.3em}.jsoneditor-modal.jsoneditor-modal-transform[_ngcontent-%COMP%]{width:600px!important}.jsoneditor-modal[_ngcontent-%COMP%]   .pico-modal-header[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;padding:0 10px;height:30px;line-height:30px;font-family:arial,sans-serif;font-size:11pt;background:#3883fa;color:#fff}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 0}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.jsoneditor-modal-input[_ngcontent-%COMP%]{text-align:right;padding-right:0;white-space:nowrap}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.jsoneditor-modal-actions[_ngcontent-%COMP%]{padding-top:15px}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.jsoneditor-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:0}.jsoneditor-modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3883fa}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-block[_ngcontent-%COMP%]{margin-bottom:10px}.jsoneditor-modal[_ngcontent-%COMP%]   .pico-close[_ngcontent-%COMP%]{background:0 0!important;font-size:24px!important;top:7px!important;right:7px!important;color:#fff}.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px}.jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{cursor:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background:#d3d3d3;color:grey}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-select-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-select-wrapper[_ngcontent-%COMP%]:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #666;position:absolute;right:8px;top:14px;pointer-events:none}.jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:3px 24px 3px 10px;min-width:180px;max-width:350px;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:0;text-overflow:"";font-size:10pt;line-height:1.5em}.jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 10px;margin:0;border-radius:0;border-left-style:none}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input.jsoneditor-button-first[_ngcontent-%COMP%]{border-top-left-radius:3px;border-bottom-left-radius:3px;border-left-style:solid}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input.jsoneditor-button-last[_ngcontent-%COMP%]{border-top-right-radius:3px;border-bottom-right-radius:3px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview[_ngcontent-%COMP%]{background:#f5f5f5;height:200px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview.jsoneditor-error[_ngcontent-%COMP%]{color:#ee422e}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard[_ngcontent-%COMP%]{line-height:1.2em;width:100%;padding:0;border-radius:3px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-label[_ngcontent-%COMP%]{font-weight:700;color:#1e90ff;margin-top:20px;margin-bottom:5px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard-label[_ngcontent-%COMP%]{font-style:italic;margin:4px 0 2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-inline[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding-top:2px;padding-bottom:2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-inline[_ngcontent-%COMP%]:not(:last-child){padding-right:2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-field[_ngcontent-%COMP%]{width:180px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-relation[_ngcontent-%COMP%]{width:100px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-value[_ngcontent-%COMP%]{min-width:180px;flex:1}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-sort-field[_ngcontent-%COMP%]{width:170px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-sort-order[_ngcontent-%COMP%]{width:150px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-select-fields[_ngcontent-%COMP%]{width:100%}.jsoneditor-modal[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:#d3d3d3;padding:4px 28px 4px 8px}.jsoneditor-modal[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]   .selectr-tag[_ngcontent-%COMP%]{background-color:#3883fa;border-radius:5px}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;vertical-align:middle;font-weight:400;color:#4d4d4d;border-spacing:0;border-collapse:collapse}.jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#fff;border:1px solid #d3d3d3;color:#4d4d4d;border-radius:3px;padding:4px}.jsoneditor-modal[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:10.5pt;font-family:arial,sans-serif}.jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt;width:100%;box-sizing:border-box}.jsoneditor-modal[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f5f5f5;padding:4px 20px}.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group.jsoneditor-button-group-value-asc[_ngcontent-%COMP%]   input.jsoneditor-button-asc[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group.jsoneditor-button-group-value-desc[_ngcontent-%COMP%]   input.jsoneditor-button-desc[_ngcontent-%COMP%]{background:#3883fa;border-color:#3883fa;color:#fff}.jsoneditor[_ngcontent-%COMP%]{color:#1a1a1a;border:thin solid #3883fa;box-sizing:border-box;width:100%;height:100%;position:relative;padding:0;line-height:100%}div.jsoneditor-default[_ngcontent-%COMP%], div.jsoneditor-field[_ngcontent-%COMP%], div.jsoneditor-readonly[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%]{border:1px solid transparent;min-height:16px;min-width:32px;padding:2px;margin:1px;word-wrap:break-word;float:left}div.jsoneditor-field[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}div.jsoneditor-value[_ngcontent-%COMP%]{word-break:break-word}div.jsoneditor-value.jsoneditor-empty[_ngcontent-%COMP%]:after{content:"value"}div.jsoneditor-value.jsoneditor-string[_ngcontent-%COMP%]{color:#006000}div.jsoneditor-value.jsoneditor-number[_ngcontent-%COMP%]{color:#ee422e}div.jsoneditor-value.jsoneditor-boolean[_ngcontent-%COMP%]{color:#ff8c00}div.jsoneditor-value.jsoneditor-null[_ngcontent-%COMP%]{color:#004ed0}div.jsoneditor-value.jsoneditor-color-value[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-invalid[_ngcontent-%COMP%]{color:#1a1a1a}div.jsoneditor-readonly[_ngcontent-%COMP%]{min-width:16px;color:grey}div.jsoneditor-empty[_ngcontent-%COMP%]{border-color:#d3d3d3;border-style:dashed;border-radius:2px}div.jsoneditor-field.jsoneditor-empty[_ngcontent-%COMP%]:after{content:"field"}div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}div.jsoneditor[_ngcontent-%COMP%]   td.jsoneditor-separator[_ngcontent-%COMP%]{padding:3px 0;vertical-align:top;color:grey}div.jsoneditor[_ngcontent-%COMP%]   td.jsoneditor-tree[_ngcontent-%COMP%]{vertical-align:top}div.jsoneditor.busy[_ngcontent-%COMP%]   pre.jsoneditor-preview[_ngcontent-%COMP%]{background:#f5f5f5;color:grey}div.jsoneditor.busy[_ngcontent-%COMP%]   div.jsoneditor-busy[_ngcontent-%COMP%]{display:inherit}div.jsoneditor[_ngcontent-%COMP%]   code.jsoneditor-preview[_ngcontent-%COMP%]{background:0 0}div.jsoneditor.jsoneditor-mode-preview[_ngcontent-%COMP%]   pre.jsoneditor-preview[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;overflow:auto;padding:2px;margin:0;white-space:pre-wrap;word-break:break-all}div.jsoneditor-default[_ngcontent-%COMP%]{color:grey;padding-left:10px}div.jsoneditor-tree[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-button[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;margin:0;border:none;cursor:pointer;background:transparent url(jsoneditor-icons.15f2789dd231f36d43a4.svg)}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-button[_ngcontent-%COMP%]:focus{background-color:#f5f5f5;outline:1px solid #e5e5e5}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-collapsed[_ngcontent-%COMP%]{background-position:0 -48px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-expanded[_ngcontent-%COMP%]{background-position:0 -72px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]{background-position:-48px -72px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-invisible[_ngcontent-%COMP%]{visibility:hidden;background:0 0}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -72px -72px;cursor:move}div.jsoneditor-tree[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:0}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]{display:inline-block;padding:3px 4px;margin:2px 0;background-color:#e5e5e5;border-radius:3px;color:grey;font-family:arial,sans-serif;font-size:10pt}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:grey}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-color[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;margin:4px;border:1px solid grey;cursor:pointer}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-date[_ngcontent-%COMP%]{background:#a1a1a1;color:#fff;font-family:arial,sans-serif;border-radius:3px;display:inline-block;padding:3px;margin:0 3px}div.jsoneditor-tree[_ngcontent-%COMP%]   table.jsoneditor-tree[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0;width:100%}div.jsoneditor-tree[_ngcontent-%COMP%]   .jsoneditor-button.jsoneditor-schema-error[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;margin:0 4px 0 0;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px}div.jsoneditor-outer[_ngcontent-%COMP%]{position:static;width:100%;height:100%;margin:0;padding:0;box-sizing:border-box}div.jsoneditor-outer.has-nav-bar[_ngcontent-%COMP%]{margin-top:-26px;padding-top:26px}div.jsoneditor-outer.has-nav-bar.has-main-menu-bar[_ngcontent-%COMP%]{margin-top:-61px;padding-top:61px}div.jsoneditor-outer.has-status-bar[_ngcontent-%COMP%]{margin-bottom:-26px;padding-bottom:26px}div.jsoneditor-outer.has-main-menu-bar[_ngcontent-%COMP%]{margin-top:-35px;padding-top:35px}div.jsoneditor-busy[_ngcontent-%COMP%]{position:absolute;top:15%;left:0;box-sizing:border-box;width:100%;text-align:center;display:none}div.jsoneditor-busy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#ffffab;border:1px solid #fe0;border-radius:3px;padding:5px 15px;box-shadow:0 0 5px rgba(0,0,0,.4)}div.jsoneditor-field.jsoneditor-empty[_ngcontent-%COMP%]:after, div.jsoneditor-value.jsoneditor-empty[_ngcontent-%COMP%]:after{pointer-events:none;color:#d3d3d3;font-size:8pt}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]{color:#006000;text-decoration:underline}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]{display:inline-block;padding:2px;margin:2px}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]:focus, a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]:hover{color:#ee422e}div.jsoneditor-field.jsoneditor-highlight[_ngcontent-%COMP%], div.jsoneditor-field[contenteditable=true][_ngcontent-%COMP%]:focus, div.jsoneditor-field[contenteditable=true][_ngcontent-%COMP%]:hover, div.jsoneditor-value.jsoneditor-highlight[_ngcontent-%COMP%], div.jsoneditor-value[contenteditable=true][_ngcontent-%COMP%]:focus, div.jsoneditor-value[contenteditable=true][_ngcontent-%COMP%]:hover{background-color:#ffffab;border:1px solid #fe0;border-radius:2px}div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%], div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%]:focus, div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%]:hover, div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%]:focus, div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%]:hover{background-color:#fe0;border:1px solid #ffc700;border-radius:2px}div.jsoneditor-value.jsoneditor-array[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-object[_ngcontent-%COMP%]{min-width:16px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button.jsoneditor-selected[_ngcontent-%COMP%], div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]:hover, tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]{background-position:-48px -48px}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ee422e}.ace-jsoneditor[_ngcontent-%COMP%], textarea.jsoneditor-text[_ngcontent-%COMP%]{min-height:150px}.ace-jsoneditor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], textarea.jsoneditor-text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif}textarea.jsoneditor-text[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;box-sizing:border-box;outline-width:0;border:none;background-color:#fff;resize:none}tr.jsoneditor-highlight[_ngcontent-%COMP%], tr.jsoneditor-selected[_ngcontent-%COMP%]{background-color:#d3d3d3}tr.jsoneditor-selected[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%], tr.jsoneditor-selected[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{visibility:hidden}tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%], tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{visibility:visible}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]:hover, tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{background-position:-72px -48px}div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;margin:0}.jsoneditor-popover[_ngcontent-%COMP%], .jsoneditor-schema-error[_ngcontent-%COMP%], div.jsoneditor-field[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], pre.jsoneditor-preview[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt;color:#1a1a1a}.jsoneditor-schema-error[_ngcontent-%COMP%]{cursor:default;display:inline-block;height:24px;line-height:24px;position:relative;text-align:center;width:24px}.jsoneditor-popover[_ngcontent-%COMP%]{background-color:#4c4c4c;border-radius:3px;box-shadow:0 0 5px rgba(0,0,0,.4);color:#fff;padding:7px 10px;position:absolute;cursor:auto;width:200px}.jsoneditor-popover.jsoneditor-above[_ngcontent-%COMP%]{bottom:32px;left:-98px}.jsoneditor-popover.jsoneditor-above[_ngcontent-%COMP%]:before{border-top:7px solid #4c4c4c;bottom:-7px}.jsoneditor-popover.jsoneditor-below[_ngcontent-%COMP%]{top:32px;left:-98px}.jsoneditor-popover.jsoneditor-below[_ngcontent-%COMP%]:before{border-bottom:7px solid #4c4c4c;top:-7px}.jsoneditor-popover.jsoneditor-left[_ngcontent-%COMP%]{top:-7px;right:32px}.jsoneditor-popover.jsoneditor-left[_ngcontent-%COMP%]:before{border-left:7px solid #4c4c4c;border-top:7px solid transparent;border-bottom:7px solid transparent;content:"";top:19px;right:-14px;left:inherit;margin-left:inherit;margin-top:-7px;position:absolute}.jsoneditor-popover.jsoneditor-right[_ngcontent-%COMP%]{top:-7px;left:32px}.jsoneditor-popover.jsoneditor-right[_ngcontent-%COMP%]:before{border-right:7px solid #4c4c4c;border-top:7px solid transparent;border-bottom:7px solid transparent;content:"";top:19px;left:-14px;margin-left:inherit;margin-top:-7px;position:absolute}.jsoneditor-popover[_ngcontent-%COMP%]:before{border-right:7px solid transparent;border-left:7px solid transparent;content:"";display:block;left:50%;margin-left:-7px;position:absolute}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr.jump-to-line[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.jsoneditor-schema-error[_ngcontent-%COMP%]:focus   .jsoneditor-popover[_ngcontent-%COMP%], .jsoneditor-schema-error[_ngcontent-%COMP%]:hover   .jsoneditor-popover[_ngcontent-%COMP%]{display:block;-webkit-animation:fade-in .3s linear 1,move-up .3s linear 1;animation:fade-in .3s linear 1,move-up .3s linear 1}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-validation-errors-container[_ngcontent-%COMP%]{max-height:130px;overflow-y:auto}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-validation-errors[_ngcontent-%COMP%]{width:100%;overflow:hidden}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors[_ngcontent-%COMP%]{position:absolute;margin:auto;bottom:31px;left:calc(50% - 92px);color:grey;background-color:#ebebeb;padding:7px 15px;border-radius:8px}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:opacity 2s linear}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s 2s,opacity 2s linear}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-top:1px solid #ffc700}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 6px;vertical-align:middle}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;white-space:normal}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#ffffab}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   tr.parse-error[_ngcontent-%COMP%]{background-color:rgba(238,46,46,.44)}.jsoneditor-text-errors[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{border:none;width:24px;height:24px;padding:0;margin:0 4px 0 0;cursor:pointer}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr.parse-error[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -25px 0}.jsoneditor-anchor[_ngcontent-%COMP%]{cursor:pointer}.jsoneditor-anchor[_ngcontent-%COMP%]   .picker_wrapper.popup.popup_bottom[_ngcontent-%COMP%]{top:28px;left:-10px}.fadein[_ngcontent-%COMP%]{-webkit-animation:fadein .3s;animation:fadein .3s;-moz-animation:fadein .3s;-o-animation:fadein .3s}@-webkit-keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes fadein{0%{opacity:0}to{opacity:1}}.jsoneditor-modal[_ngcontent-%COMP%]   input[type=search].selectr-input[_ngcontent-%COMP%]{border:1px solid #d3d3d3;width:calc(100% - 4px);margin:2px;padding:4px;box-sizing:border-box}.jsoneditor-modal[_ngcontent-%COMP%]   button.selectr-input-clear[_ngcontent-%COMP%]{right:8px}.jsoneditor-menu[_ngcontent-%COMP%]{width:100%;height:35px;padding:2px;margin:0;box-sizing:border-box;color:#fff;background-color:#3883fa;border-bottom:1px solid #3883fa}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:26px;height:26px;margin:2px;padding:0;border-radius:2px;border:1px solid transparent;background:transparent url(jsoneditor-icons.15f2789dd231f36d43a4.svg);color:#fff;opacity:.8;font-family:arial,sans-serif;font-size:10pt;float:left}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,100%,.2);border:1px solid hsla(0,0%,100%,.4)}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active, .jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus{background-color:hsla(0,0%,100%,.3)}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{opacity:.5;background-color:transparent;border:none}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-collapse-all[_ngcontent-%COMP%]{background-position:0 -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-expand-all[_ngcontent-%COMP%]{background-position:0 -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%]{background-position:-120px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%]{background-position:-144px -96px}.jsoneditor.jsoneditor-mode-form[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-form[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-view[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-view[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%]{display:none}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-undo[_ngcontent-%COMP%]{background-position:-24px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-undo[_ngcontent-%COMP%]:disabled{background-position:-24px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-redo[_ngcontent-%COMP%]{background-position:-48px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-redo[_ngcontent-%COMP%]:disabled{background-position:-48px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-compact[_ngcontent-%COMP%]{background-position:-72px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-format[_ngcontent-%COMP%]{background-position:-72px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-repair[_ngcontent-%COMP%]{background-position:-96px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%]{display:inline-block;float:left}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-image:none;width:auto;padding-left:6px;padding-right:6px}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button.jsoneditor-separator[_ngcontent-%COMP%], .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-separator[_ngcontent-%COMP%]{margin-left:10px}.jsoneditor-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:arial,sans-serif;font-size:10pt;color:#fff;opacity:.8;vertical-align:middle}.jsoneditor-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.jsoneditor-menu[_ngcontent-%COMP%]   a.jsoneditor-poweredBy[_ngcontent-%COMP%]{font-size:8pt;position:absolute;right:0;top:0;padding:10px}.jsoneditor-navigation-bar[_ngcontent-%COMP%]{width:100%;height:26px;line-height:26px;padding:0;margin:0;border-bottom:1px solid #d3d3d3;box-sizing:border-box;color:grey;background-color:#ebebeb;overflow:hidden;font-family:arial,sans-serif;font-size:10pt}.jsoneditor-search[_ngcontent-%COMP%]{font-family:arial,sans-serif;position:absolute;right:4px;top:4px;border-collapse:collapse;border-spacing:0;display:flex}.jsoneditor-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#1a1a1a;width:120px;border:none;outline:0;margin:1px;line-height:20px;font-family:arial,sans-serif}.jsoneditor-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:16px;height:24px;padding:0;margin:0;border:none;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg);vertical-align:top}.jsoneditor-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-refresh[_ngcontent-%COMP%]{width:18px;background-position:-99px -73px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-next[_ngcontent-%COMP%]{cursor:pointer;background-position:-124px -73px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-next[_ngcontent-%COMP%]:hover{background-position:-124px -49px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-previous[_ngcontent-%COMP%]{cursor:pointer;background-position:-148px -73px;margin-right:2px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-previous[_ngcontent-%COMP%]:hover{background-position:-148px -49px}.jsoneditor-results[_ngcontent-%COMP%]{font-family:arial,sans-serif;color:#fff;padding-right:5px;line-height:26px}.jsoneditor-frame[_ngcontent-%COMP%]{border:1px solid transparent;background-color:#fff;padding:0 2px;margin:0}.jsoneditor-statusbar[_ngcontent-%COMP%]{line-height:26px;height:26px;color:grey;background-color:#ebebeb;border-top:1px solid #d3d3d3;box-sizing:border-box;font-size:10pt}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-val[_ngcontent-%COMP%]{margin-right:12px}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-count[_ngcontent-%COMP%]{margin-left:4px}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-validation-error-icon[_ngcontent-%COMP%]{float:right;width:24px;height:24px;padding:0;margin-top:1px;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px;cursor:pointer}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-validation-error-count[_ngcontent-%COMP%]{float:right;margin:0 4px 0 0;cursor:pointer}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-parse-error-icon[_ngcontent-%COMP%]{float:right;width:24px;height:24px;padding:0;margin:1px;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -25px 0}.jsoneditor-statusbar[_ngcontent-%COMP%]   .jsoneditor-array-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}div.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-label[_ngcontent-%COMP%], div.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-size-info[_ngcontent-%COMP%]{margin:0 4px}.jsoneditor-treepath[_ngcontent-%COMP%]{padding:0 5px;overflow:hidden;white-space:nowrap;outline:0}.jsoneditor-treepath.show-all[_ngcontent-%COMP%]{word-wrap:break-word;white-space:normal;position:absolute;background-color:#ebebeb;z-index:1;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3)}.jsoneditor-treepath.show-all[_ngcontent-%COMP%]   span.jsoneditor-treepath-show-all-btn[_ngcontent-%COMP%]{display:none}.jsoneditor-treepath[_ngcontent-%COMP%]   div.jsoneditor-contextmenu-root[_ngcontent-%COMP%]{position:absolute;left:0}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-show-all-btn[_ngcontent-%COMP%]{position:absolute;background-color:#ebebeb;left:0;height:20px;padding:0 3px;cursor:pointer}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-element[_ngcontent-%COMP%]{margin:1px;font-family:arial,sans-serif;font-size:10pt}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-seperator[_ngcontent-%COMP%]{margin:2px;font-size:9pt;font-family:arial,sans-serif}.jsoneditor-treepath[_ngcontent-%COMP%]   span.jsoneditor-treepath-element[_ngcontent-%COMP%]:hover, .jsoneditor-treepath[_ngcontent-%COMP%]   span.jsoneditor-treepath-seperator[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}\n.selectr-container[_ngcontent-%COMP%]{position:relative}.selectr-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.selectr-hidden[_ngcontent-%COMP%]{position:absolute;overflow:hidden;clip:rect(0,0,0,0);width:1px;height:1px;margin:-1px;padding:0;border:0}.selectr-visible[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;z-index:11}.selectr-desktop.multiple[_ngcontent-%COMP%]   .selectr-visible[_ngcontent-%COMP%]{display:none}.selectr-desktop.multiple.native-open[_ngcontent-%COMP%]   .selectr-visible[_ngcontent-%COMP%]{top:100%;min-height:200px!important;height:auto;opacity:1;display:block}.selectr-container.multiple.selectr-mobile[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{z-index:0}.selectr-selected[_ngcontent-%COMP%]{position:relative;z-index:1;box-sizing:border-box;width:100%;padding:7px 28px 7px 14px;cursor:pointer;border:1px solid #999;border-radius:3px;background-color:#fff}.selectr-selected[_ngcontent-%COMP%]:before{position:absolute;top:50%;right:10px;width:0;height:0;content:"";transform:rotate(0) translate3d(0,-50%,0);border-color:#6c7a86 transparent transparent;border-style:solid;border-width:4px 4px 0}.selectr-container.native-open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:before, .selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:before{border-color:transparent transparent #6c7a86;border-style:solid;border-width:0 4px 4px}.selectr-label[_ngcontent-%COMP%]{display:none;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis}.selectr-placeholder[_ngcontent-%COMP%]{color:#6c7a86}.selectr-tags[_ngcontent-%COMP%]{margin:0;padding:0;white-space:normal}.has-selected[_ngcontent-%COMP%]   .selectr-tags[_ngcontent-%COMP%]{margin:0 0 -2px}.selectr-tag[_ngcontent-%COMP%]{list-style:none;position:relative;float:left;padding:2px 25px 2px 8px;margin:0 2px 2px 0;cursor:default;color:#fff;border:none;border-radius:10px;background:#acb7bf none repeat scroll 0 0}.selectr-container.multiple.has-selected[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{padding:5px 28px 5px 5px}.selectr-options-container[_ngcontent-%COMP%]{position:absolute;z-index:10000;top:calc(100% - 1px);left:0;display:none;box-sizing:border-box;width:100%;border:1px solid #999;border-top:0 solid transparent;border-radius:0 0 3px 3px;background-color:#fff}.selectr-container.open[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%]{display:block}.selectr-input-container[_ngcontent-%COMP%]{position:relative;display:none}.selectr-clear[_ngcontent-%COMP%], .selectr-input-clear[_ngcontent-%COMP%], .selectr-tag-remove[_ngcontent-%COMP%]{position:absolute;top:50%;right:22px;width:20px;height:20px;padding:0;cursor:pointer;transform:translate3d(0,-50%,0);border:none;background-color:transparent;z-index:11}.selectr-clear[_ngcontent-%COMP%], .selectr-input-clear[_ngcontent-%COMP%]{display:none}.selectr-container.has-selected[_ngcontent-%COMP%]   .selectr-clear[_ngcontent-%COMP%], .selectr-input-container.active[_ngcontent-%COMP%]   .selectr-input-clear[_ngcontent-%COMP%]{display:block}.selectr-selected[_ngcontent-%COMP%]   .selectr-tag-remove[_ngcontent-%COMP%]{right:2px}.selectr-clear[_ngcontent-%COMP%]:after, .selectr-clear[_ngcontent-%COMP%]:before, .selectr-input-clear[_ngcontent-%COMP%]:after, .selectr-input-clear[_ngcontent-%COMP%]:before, .selectr-tag-remove[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:before{position:absolute;top:5px;left:9px;width:2px;height:10px;content:" ";background-color:#6c7a86}.selectr-tag-remove[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:before{top:4px;width:3px;height:12px;background-color:#fff}.selectr-clear[_ngcontent-%COMP%]:before, .selectr-input-clear[_ngcontent-%COMP%]:before, .selectr-tag-remove[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.selectr-clear[_ngcontent-%COMP%]:after, .selectr-input-clear[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.selectr-input-container.active[_ngcontent-%COMP%], .selectr-input-container.active[_ngcontent-%COMP%]   .selectr-clear[_ngcontent-%COMP%]{display:block}.selectr-input[_ngcontent-%COMP%]{top:5px;left:5px;box-sizing:border-box;width:calc(100% - 30px);margin:10px 15px;padding:7px 30px 7px 9px;border:1px solid #999;border-radius:3px}.selectr-notice[_ngcontent-%COMP%]{display:none;box-sizing:border-box;width:100%;padding:8px 16px;border-top:1px solid #999;border-radius:0 0 3px 3px;background-color:#fff}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-notice[_ngcontent-%COMP%]{display:block}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}.selectr-options[_ngcontent-%COMP%]{position:relative;top:calc(100% + 2px);display:none;overflow-x:auto;overflow-y:scroll;max-height:200px;margin:0;padding:0}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%], .selectr-container.open[_ngcontent-%COMP%]   .selectr-input-container[_ngcontent-%COMP%], .selectr-container.open[_ngcontent-%COMP%]   .selectr-options[_ngcontent-%COMP%]{display:block}.selectr-option[_ngcontent-%COMP%]{position:relative;display:block;padding:5px 20px;list-style:outside none none;cursor:pointer;font-weight:400}.selectr-options.optgroups[_ngcontent-%COMP%] > .selectr-option[_ngcontent-%COMP%]{padding-left:25px}.selectr-optgroup[_ngcontent-%COMP%]{font-weight:700;padding:0}.selectr-optgroup--label[_ngcontent-%COMP%]{font-weight:700;margin-top:10px;padding:5px 15px}.selectr-match[_ngcontent-%COMP%]{text-decoration:underline}.selectr-option.selected[_ngcontent-%COMP%]{background-color:#ddd}.selectr-option.active[_ngcontent-%COMP%]{color:#fff;background-color:#5897fb}.selectr-option.disabled[_ngcontent-%COMP%]{opacity:.4}.selectr-option.excluded[_ngcontent-%COMP%]{display:none}.selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:#999 #999 transparent;border-radius:3px 3px 0 0}.selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:after{transform:rotate(180deg) translate3d(0,50%,0)}.selectr-disabled[_ngcontent-%COMP%]{opacity:.6}.has-selected[_ngcontent-%COMP%]   .selectr-placeholder[_ngcontent-%COMP%], .selectr-empty[_ngcontent-%COMP%]{display:none}.has-selected[_ngcontent-%COMP%]   .selectr-label[_ngcontent-%COMP%]{display:block}.taggable[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{padding:4px 28px 4px 4px}.taggable[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:after{display:table;content:" ";clear:both}.taggable[_ngcontent-%COMP%]   .selectr-label[_ngcontent-%COMP%]{width:auto}.taggable[_ngcontent-%COMP%]   .selectr-tags[_ngcontent-%COMP%]{float:left;display:block}.taggable[_ngcontent-%COMP%]   .selectr-placeholder[_ngcontent-%COMP%]{display:none}.input-tag[_ngcontent-%COMP%]{float:left;min-width:90px;width:auto}.selectr-tag-input[_ngcontent-%COMP%]{border:none;padding:3px 10px;width:100%;font-family:inherit;font-weight:inherit;font-size:inherit}.selectr-input-container.loading[_ngcontent-%COMP%]:after{position:absolute;top:50%;right:20px;width:20px;height:20px;content:"";transform:translate3d(0,-50%,0);transform-origin:50% 0 0;-webkit-animation:spin .5s linear 0s infinite normal forwards running;animation:spin .5s linear 0s infinite normal forwards running;border:3px solid #ddd;border-top-color:#aaa;border-radius:50%}@-webkit-keyframes spin{0%{transform:rotate(0) translate3d(0,-50%,0)}to{transform:rotate(1turn) translate3d(0,-50%,0)}}@keyframes spin{0%{transform:rotate(0) translate3d(0,-50%,0)}to{transform:rotate(1turn) translate3d(0,-50%,0)}}.selectr-container.open.inverted[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:transparent #999 #999;border-radius:0 0 3px 3px}.selectr-container.inverted[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%]{border-width:1px 1px 0;border-color:#999 #999 transparent;border-radius:3px 3px 0 0;background-color:#fff;top:auto;bottom:calc(100% - 1px)}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#6c7a86;opacity:1}\n.nb-theme-default   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-default   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-default   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-default   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-default   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-default   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-default   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-default   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-dark   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-dark   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-dark   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-dark   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-cosmic   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-cosmic   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-cosmic   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-cosmic   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-cosmic   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-cosmic   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-cosmic   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-corporate   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-corporate   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-corporate   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-corporate   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-corporate   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-corporate   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-corporate   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-corporate   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-material-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-dark   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-material-dark   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-material-dark   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-material-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-material-dark   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-material-light   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-light   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-material-light   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-material-light   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-light   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-material-light   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-material-light   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-material-light   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}.nb-theme-obsrio   [_nghost-%COMP%]     nb-action.success nb-icon{color:#418e11!important}.nb-theme-obsrio   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-obsrio   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-obsrio   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-obsrio   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0}.nb-theme-obsrio   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-obsrio   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:auto}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:auto}}']}),t}(),dn=n("R0Ic"),pn=["layersLimitSwal"];function gn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",34)}function mn(t,e){if(1&t&&l["\u0275\u0275element"](0,"nb-icon",35),2&t){var n=l["\u0275\u0275nextContext"](2).$implicit;l["\u0275\u0275property"]("icon",n.type)}}function fn(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",29),l["\u0275\u0275elementStart"](1,"p",30),l["\u0275\u0275template"](2,gn,1,0,"nb-icon",31),l["\u0275\u0275template"](3,mn,1,1,"ng-template",null,32,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementStart"](5,"b"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](7,"img",33),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275reference"](4),i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf","points"==i.type)("ngIfElse",n),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](i.name),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("src",i.convention,l["\u0275\u0275sanitizeUrl"])}}function vn(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",27),l["\u0275\u0275template"](1,fn,8,4,"div",28),l["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.state&&null!==n.convention)}}function bn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card",7),l["\u0275\u0275elementStart"](1,"nb-card-header",8),l["\u0275\u0275elementStart"](2,"p"),l["\u0275\u0275text"](3,"CONVENCIONES"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",9),l["\u0275\u0275elementStart"](5,"div",10),l["\u0275\u0275namespaceSVG"](),l["\u0275\u0275elementStart"](6,"svg",11),l["\u0275\u0275element"](7,"path",12),l["\u0275\u0275element"](8,"path",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275namespaceHTML"](),l["\u0275\u0275elementStart"](9,"nb-icon",14),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().toggleConventions()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"nb-card-body"),l["\u0275\u0275elementStart"](11,"nb-actions",15),l["\u0275\u0275elementStart"](12,"nb-action",16),l["\u0275\u0275element"](13,"nb-icon",17),l["\u0275\u0275elementStart"](14,"div",9),l["\u0275\u0275elementStart"](15,"span"),l["\u0275\u0275text"](16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"span",18),l["\u0275\u0275text"](18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"nb-action",19),l["\u0275\u0275element"](20,"nb-icon",20),l["\u0275\u0275elementStart"](21,"div",9),l["\u0275\u0275elementStart"](22,"span"),l["\u0275\u0275text"](23),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"span",18),l["\u0275\u0275text"](25),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"nb-action",21),l["\u0275\u0275element"](27,"nb-icon",22),l["\u0275\u0275elementStart"](28,"div",9),l["\u0275\u0275elementStart"](29,"span"),l["\u0275\u0275text"](30),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"span",18),l["\u0275\u0275text"](32),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"nb-action",23),l["\u0275\u0275element"](34,"nb-icon",24),l["\u0275\u0275elementStart"](35,"div",9),l["\u0275\u0275elementStart"](36,"span"),l["\u0275\u0275text"](37),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"span",18),l["\u0275\u0275text"](39),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"div",25),l["\u0275\u0275listener"]("cdkDropListDropped",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().drop(t)})),l["\u0275\u0275template"](41,vn,2,1,"div",26),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](16),l["\u0275\u0275textInterpolate"](i.layerCounts.points.count),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("/",i.layerCounts.points.limit,""),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](i.layerCounts.lines.count),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("/",i.layerCounts.lines.limit,""),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](i.layerCounts.polygons.count),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("/",i.layerCounts.polygons.limit,""),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](i.layerCounts.raster.count),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("/",i.layerCounts.raster.limit,""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",i.activeLayers)("ngForTrackBy",i.trackByFn)}}var yn=function(){function t(t){this._toastrService=t,this.swalText="",this.closeConv=!1,this.state="rotated",this.isLogged=[],this.activeLayers=[],this.layerCounts={points:{count:0,limit:20},lines:{count:0,limit:15},polygons:{count:0,limit:10},raster:{count:0,limit:2}},this.index=0}return t.prototype.ngOnInit=function(){},t.prototype.toggleConventions=function(){this.closeConv=!this.closeConv,this.rotate()},t.prototype.rotate=function(){this.state="default"===this.state?"rotated":"default"},t.prototype.showConvention=function(t,e){var n=this;return e?this.layerCounts[t.type].count+1<=this.layerCounts[t.type].limit?(this.activeLayers.unshift(t),this.layerCounts[t.type].count=this.layerCounts[t.type].count+1,t.state=!0,!0):(this.swalText="Se ha llegado al limite de capas tipo "+t.type+" simultaneas: M\xe1x. "+this.layerCounts[t.type].limit+". Si desea ver m\xe1s capas, por favor desactive alguna de las capas activas.",setTimeout((function(){n.layersLimitSwal.fire()})),t.state=!1,!1):(this.activeLayers.map((function(e,i){e.id===t.id&&(n.activeLayers.splice(i,1),n.layerCounts[t.type].count=n.layerCounts[t.type].count-1)})),t.state=!1,!0)},t.prototype.drop=function(t){Object(Fe.e)(this.activeLayers,t.previousIndex,t.currentIndex)},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](g.Ib))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-conventions"]],viewQuery:function(t,e){var n;1&t&&l["\u0275\u0275viewQuery"](pn,!0),2&t&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.layersLimitSwal=n.first)},inputs:{isLogged:"isLogged"},decls:7,vars:4,consts:[["id","conventions","cdkDrag",""],["id","fab-conventions","nbTooltip","Ver Convenciones","nbTooltipStatus","primary",3,"click"],["shape","semi-round","status","control","nbButton",""],["icon","arrow-ios-back-outline"],["style","opacity: 0.95; overflow:auto;    max-height: 70vh; max-width: 17em;","class","p-1",4,"ngIf"],["title","Limite alcanzado","icon","info",3,"text","showCancelButton"],["layersLimitSwal",""],[1,"p-1",2,"opacity","0.95","overflow","auto","max-height","70vh","max-width","17em"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["icon","close",3,"click"],["id","stats",1,"d-flex","justify-content-center"],["nbTooltip","points","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["status","info","icon","pin-outline"],[1,"stat-limit"],["nbTooltip","line","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","lines","pack","obs-icons",1,"obs-icons"],["nbTooltip","Polygon","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","polygons","pack","obs-icons",1,"obs-icons"],["nbTooltip","Raster","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","raster","pack","obs-icons",1,"obs-icons"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","conv-item d-flex flex-column example-box","cdkDrag","",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"conv-item","d-flex","flex-column","example-box"],["class","mb-1",4,"ngIf"],[1,"mb-1"],[1,"layer-name","mb-0"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline",4,"ngIf","ngIfElse"],["iconTypes",""],["width","100%","alt","Source convention",3,"src"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline"],["pack","obs-icons",1,"obs-icons",3,"icon"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275listener"]("click",(function(){return e.toggleConventions()})),l["\u0275\u0275elementStart"](2,"a",2),l["\u0275\u0275element"](3,"nb-icon",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](4,bn,42,10,"nb-card",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](5,"swal",5,6)),2&t&&(l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("@rotatedState",e.state),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.closeConv),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("text",e.swalText)("showCancelButton",!1))},directives:[Fe.a,g.Lb,g.q,g.K,o.m,Ne.a,g.u,g.x,Fe.b,g.t,g.l,g.k,Fe.c,o.l],styles:[".nb-theme-default   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-default   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-default   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-default   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}@-webkit-keyframes fade{0%{opacity:0;right:0}to{opacity:1;right:45px}}.nb-theme-default   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-default   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-default   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-default   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-default   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-default   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-default   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-default   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-default   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-dark   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-dark   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-dark   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-dark   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-dark   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-dark   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-cosmic   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-cosmic   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-cosmic   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#b18aff}.nb-theme-cosmic   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-cosmic   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-cosmic   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-cosmic   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-cosmic   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-corporate   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-corporate   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-corporate   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-corporate   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-corporate   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-corporate   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-corporate   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-corporate   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-corporate   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-corporate   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-corporate   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-material-dark   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-material-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-material-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#f24681}.nb-theme-material-dark   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #ccf7fe!important}.nb-theme-material-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-material-dark   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-dark   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-material-dark   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-material-light   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-material-light   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-material-light   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-material-light   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-light   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-light   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#903df4}.nb-theme-material-light   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #ccf7fe!important}.nb-theme-material-light   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-material-light   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-light   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-material-light   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px;top:114px;justify-content:center}.nb-theme-obsrio   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:10px}.nb-theme-obsrio   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}@keyframes fade{0%{opacity:0;right:0}to{opacity:1;right:45px}}.nb-theme-obsrio   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#669493}.nb-theme-obsrio   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #e4fcfb!important}.nb-theme-obsrio   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-obsrio   [_nghost-%COMP%]     #surface1 path{fill:#6db9d0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-obsrio   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],data:{animation:[Object(dn.k)("rotatedState",[Object(dn.h)("default",Object(dn.i)({transform:"rotate(0)"})),Object(dn.h)("rotated",Object(dn.i)({transform:"rotate(-180deg)"})),Object(dn.j)("rotated => default",Object(dn.e)("300ms ease-out")),Object(dn.j)("default => rotated",Object(dn.e)("300ms ease-in"))])]}}),t}(),_n=n("XhcP"),Cn=n("FKr1"),xn=["infoSwal"],wn=["conventions"],In=["canShowSwal"];function An(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",21),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).addCategory()})),l["\u0275\u0275element"](1,"nb-icon",22),l["\u0275\u0275text"](2," Categoria "),l["\u0275\u0275elementEnd"]()}}function Pn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",35),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](),l["\u0275\u0275reference"](5).fire()})),l["\u0275\u0275element"](1,"nb-icon",36),l["\u0275\u0275elementEnd"]()}}var On=function(){return{confirmButtonText:"Borrar"}};function Mn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",29),l["\u0275\u0275listener"]("mouseover",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](3).changeText=!0}))("mouseout",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](3).changeText=!1})),l["\u0275\u0275elementStart"](1,"button",30),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return l["\u0275\u0275nextContext"](2).editCategory(e,i)})),l["\u0275\u0275element"](2,"nb-icon",31),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](3,Pn,2,0,"button",32),l["\u0275\u0275elementStart"](4,"swal",33,34),l["\u0275\u0275listener"]("confirm",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return l["\u0275\u0275nextContext"](2).deleteCategory(e,i)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==i.layers?null:i.layers.length)<=0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",l["\u0275\u0275pureFunction0"](4,On))}}function kn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",37),l["\u0275\u0275listener"]("mouseover",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](3).changeText=!0}))("mouseout",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](3).changeText=!1})),l["\u0275\u0275elementStart"](1,"a",38),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return l["\u0275\u0275nextContext"](2).addLayer(e,i)})),l["\u0275\u0275element"](2,"nb-icon",22),l["\u0275\u0275text"](3," Capa "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function Sn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",63)}function En(t,e){if(1&t&&l["\u0275\u0275element"](0,"nb-icon",64),2&t){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("nbTooltip",n.type)("icon",n.type)}}function Tn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",68)}function Rn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",69)}function Ln(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",65),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().index,e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).sendToTop(e.layers,t)})),l["\u0275\u0275template"](1,Tn,1,0,"nb-icon",66),l["\u0275\u0275template"](2,Rn,1,0,"nb-icon",67),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.inTop&&i.state),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.inTop&&i.state)}}function zn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-checkbox",70),l["\u0275\u0275listener"]("click",(function(t){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).toggleLayer(i,e,t)})),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("checked",i.state)}}function Bn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-radio",71),l["\u0275\u0275listener"]("click",(function(t){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).toggleLayer(i,e,t)})),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("value",i.state)}}function jn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",72),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().$implicit;return t.flipped=!t.flipped})),l["\u0275\u0275element"](1,"nb-icon",73),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("status",i.isPinned?"success":"control")}}function Dn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-action",74),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index,o=l["\u0275\u0275nextContext"](),r=o.$implicit,a=o.index;return l["\u0275\u0275nextContext"](2).togglePinLayer(r,e,a,i,!0)})),l["\u0275\u0275elementEnd"]()}}function Fn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-action",75),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index,o=l["\u0275\u0275nextContext"](),r=o.$implicit,a=o.index;return l["\u0275\u0275nextContext"](2).togglePinLayer(r,e,a,i,!1)})),l["\u0275\u0275elementEnd"]()}}var Vn=function(){return["Manage Categories","all"]};function Nn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-list-item",39),l["\u0275\u0275elementStart"](1,"nb-flip-card",40),l["\u0275\u0275elementStart"](2,"nb-card-front",41),l["\u0275\u0275elementStart"](3,"nb-card",42),l["\u0275\u0275elementStart"](4,"nb-card-body",15),l["\u0275\u0275elementStart"](5,"div",43),l["\u0275\u0275elementStart"](6,"span",44),l["\u0275\u0275template"](7,Sn,1,0,"nb-icon",45),l["\u0275\u0275template"](8,En,1,2,"ng-template",null,46,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",47),l["\u0275\u0275elementStart"](11,"span"),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",48),l["\u0275\u0275template"](14,Ln,3,2,"button",49),l["\u0275\u0275template"](15,zn,1,1,"nb-checkbox",50),l["\u0275\u0275template"](16,Bn,1,1,"ng-template",null,51,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](18,jn,2,1,"button",52),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"nb-card-back"),l["\u0275\u0275elementStart"](20,"nb-card",53),l["\u0275\u0275elementStart"](21,"nb-card-body",43),l["\u0275\u0275elementStart"](22,"nb-actions",54),l["\u0275\u0275template"](23,Dn,1,0,"nb-action",55),l["\u0275\u0275template"](24,Fn,1,0,"nb-action",56),l["\u0275\u0275elementStart"](25,"nb-action",57),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,o=l["\u0275\u0275nextContext"](),r=o.$implicit,a=o.index;return l["\u0275\u0275nextContext"](2).editLayer(r,t,a,i)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"nb-action",58),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275reference"](28).fire()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"swal",59,34),l["\u0275\u0275listener"]("confirm",(function(){l["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,o=l["\u0275\u0275nextContext"]().index;return l["\u0275\u0275nextContext"](2).deleteLayer(t,o,i)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](29,"div",60),l["\u0275\u0275elementStart"](30,"button",61),l["\u0275\u0275listener"]("click",(function(){var t=e.$implicit;return t.flipped=!t.flipped})),l["\u0275\u0275element"](31,"nb-icon",62),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,o=l["\u0275\u0275reference"](9),r=l["\u0275\u0275reference"](17),a=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("showToggleButton",!1)("flipped",i.flipped),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf","points"==i.type)("ngIfElse",o),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](i.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",i.state),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","checkbox"==a.type)("ngIfElse",r),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("nbIsGranted",l["\u0275\u0275pureFunction0"](14,Vn)),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",!i.isPinned),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.isPinned),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",l["\u0275\u0275pureFunction0"](15,On))}}function $n(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-accordion-item"),l["\u0275\u0275elementStart"](1,"nb-accordion-item-header",15),l["\u0275\u0275elementStart"](2,"div",23),l["\u0275\u0275template"](3,Mn,6,5,"div",24),l["\u0275\u0275elementStart"](4,"nb-user",25),l["\u0275\u0275text"](5," > "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-accordion-item-body"),l["\u0275\u0275template"](7,kn,4,0,"div",26),l["\u0275\u0275elementStart"](8,"nb-list",27),l["\u0275\u0275listener"]("cdkDropListDropped",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).drop(t)})),l["\u0275\u0275template"](9,Nn,32,16,"nb-list-item",28),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,o=e.index,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("nbIsGranted",l["\u0275\u0275pureFunction0"](9,Vn)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("name",i.name)("title",i.public_desc)("picture",i.icon),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("nbIsGranted",l["\u0275\u0275pureFunction0"](10,Vn)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("id",o)("cdkDropListData",i.layers),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",i.layers)("ngForTrackBy",r.trackByFn)}}function Zn(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"nb-card",14),l["\u0275\u0275elementStart"](1,"nb-card-header",15),l["\u0275\u0275text"](2,"CAPAS "),l["\u0275\u0275template"](3,An,3,0,"a",16),l["\u0275\u0275elementStart"](4,"button",17),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"](),e=l["\u0275\u0275reference"](2);return t.toggleSideNav(e)})),l["\u0275\u0275element"](5,"nb-icon",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"nb-card-body"),l["\u0275\u0275elementStart"](7,"nb-accordion",19),l["\u0275\u0275template"](8,$n,10,11,"nb-accordion-item",20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("nbSpinner",i.loading),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("nbIsGranted",l["\u0275\u0275pureFunction0"](4,Vn)),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngForOf",i.categories)("ngForTrackBy",i.trackByFn)}}function Gn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",76)}function Wn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",77)}function Hn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",76)}function Kn(t,e){1&t&&l["\u0275\u0275element"](0,"nb-icon",77)}function Un(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",78),l["\u0275\u0275elementStart"](1,"swal",79,80),l["\u0275\u0275listener"]("confirm",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().router.navigateByUrl("/auth/login")}))("cancel",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().router.navigateByUrl("/auth/login")})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"button",81),l["\u0275\u0275template"](4,Hn,1,0,"nb-icon",8),l["\u0275\u0275template"](5,Kn,1,0,"nb-icon",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275reference"](2),o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("swal",i),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.isSideNavOpen),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!o.isSideNavOpen)}}function Xn(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"nb-card",82),l["\u0275\u0275elementStart"](1,"nb-card-header"),l["\u0275\u0275text"](2,"Template Shopping list"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}var Yn=[{path:"",component:be,children:[{path:"",component:function(){function t(t,e,n,i,o,r,a,s,l,c,h){var u=this;this._accessChecker=t,this._categoryService=e,this._toastrService=n,this._glMapService=i,this._auth=o,this._dialogService=r,this._layerService=a,this.router=s,this.renderer=l,this.joyrideService=c,this._stationService=h,this.flipped=!1,this.isLogged=!1,this.isSideNavOpen=!1,this.categories=[],this.closeConv=!1,this.loading=!1,this.state="rotated",this.index=0,o.getCurrentUser().subscribe({next:function(t){null!==t&&(u.user=t,u.isLogged=!0,t.id&&(u.isSideNavOpen=!0))}}),this.gl_map=Map,this.glSources=[],this.glLayers=[],this.glLayersNames=[],this.glMarkers=[],this.glApiLayers=[],i.getMap().subscribe({next:function(t){u.gl_map=t,u._glMapService.setHandlers(u.glLayers,u.glSources,u.glLayersNames),u._categoryService.getAll().subscribe({next:function(t){u.loadCategories(t),u.categories=t},error:function(t){u.showToast("top-right","danger",t)}})}})}return t.prototype.rotate=function(){this.state="default"===this.state?"rotated":"default"},t.prototype.loadCategories=function(t){var e=this;t.reverse().map((function(t){t.hide=!0,t.layers.reverse().map((function(t){t.state&&e.conventions.showConvention(t,!0);var n=JSON.parse(t.glSource);e.glSources.push(n);var o=Object(i.a)({},n);delete o.id,n.convention=t.convention,n.state=t.state,e.gl_map.addSource(n.id,o),null!=t.glSource&&null!=t.glLayers&&JSON.parse(t.glLayers).map((function(n){t.state||(void 0===n.layout?n.layout={visibility:"none"}:n.layout.visibility="none"),e.glLayers.push(n),e.glLayersNames.push(n.id),e.gl_map.addLayer(n)}))})),t.layers.reverse()})),t.reverse(),this._stationService.getAll().subscribe({next:function(t){t.map((function(t){return e.addStation(t)}))},error:function(t){e.showToast("top-right","danger",t)}})},t.prototype.addStation=function(t){var e=this.gl_map;t.data.map((function(t){"1"===t.state&&e.loadImage(t.icon,(function(n,i){if(n)throw n;e.addImage(t.icon,i)}))})),this.clickEvents(this.gl_map,t.data,t.source_name)},t.prototype.clickEvents=function(t,e,n){var i=this._dialogService;t.on("click",n,(function(t){var n=t.features[0].properties.id,o=e.find((function(t){return t.id===n}));i.open(p.a,{context:{_marker:o}})})),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))},t.prototype.toggleLayer=function(t,e,n){var i=this;"checkbox"===t.type?this.showLayer(e,!e.state):t.layers.map((function(t){i.showLayer(t,t.id===e.id)})),this._accessChecker.isGranted("Manage Layers","all"),n.preventDefault()},t.prototype.toggleSideNav=function(t){this.isSideNavOpen=!this.isSideNavOpen,t.toggle()},t.prototype.addCategory=function(){var t=this;this._dialogService.open(Pe).onClose.subscribe((function(e){e.layers=[],e&&t.categories.push(e)}))},t.prototype.editCategory=function(t,e){var n=this;t&&this._dialogService.open(Pe,{context:{_cat:t}}).onClose.subscribe((function(t){t&&(n.categories[e]=Object.assign({},n.categories[e],t))}))},t.prototype.deleteCategory=function(t,e){var n=this;this.loading=!0,this._categoryService.deleteCategory(t.id).subscribe((function(i){i?(n.categories.splice(e,1),n.loading=!1,n.showToast("top right","success","Borrado "+t.name)):n.showToast("top right","warning","No se pudo borrar "+i)}))},t.prototype.canShowCategory=function(t){return!!(null==t?void 0:t.state)||!!this._accessChecker.isGranted("Manage Categories","all")},t.prototype.addLayer=function(t,e){var n=this;this._dialogService.open(un,{context:{_cat:t}}).onClose.subscribe((function(t){if(t){t=(new ye).deserialize(t),n.categories[e].layers.push(t);var o=JSON.parse(t.glSource),r=Object(i.a)({},o);delete r.id,o.convention=t.convention,o.state=t.state,n.glSources.push(o),n.gl_map.addSource(o.id,r),JSON.parse(t.glLayers).map((function(t){n.gl_map.addLayer(t),n.glLayers.push(t)}))}}))},t.prototype.deleteLayer=function(t,e,n){var i=this;this.loading=!0,this._layerService.deleteLayer(t).subscribe((function(o){i.categories[e].layers.splice(n,1),i.conventions.showConvention(t,!1);var r=JSON.parse(t.glSource);i.gl_map.removeSource(r.id),i.showToast("top right","success","Borrado "+t.name),i.loading=!1}))},t.prototype.togglePinLayer=function(t,e,n,i,o){var r=this;e.state=o,this._layerService.updateState(e).subscribe({next:function(t){t&&(e.isPinned=o,r.showLayer(e,e.state),r.showToast("top rigth","success","Actualizado correctamente"))},error:function(t){r.showToast("top rigth","danger","Error al fijar")}})},t.prototype.editLayer=function(t,e,n,o){var r=this;t&&this._dialogService.open(un,{hasBackdrop:!1,closeOnBackdropClick:!1,context:{_layer:e,_cat:t}}).onClose.subscribe((function(t){if(t){t=(new ye).deserialize(t),Object.assign(r.categories[n].layers[o],t),r.conventions.showConvention(t,!1);var a=JSON.parse(e.glSource);r.gl_map.removeSource(a.id);var s=JSON.parse(t.glSource),l=Object(i.a)({},s);delete l.id,r.gl_map.addSource(s.id,l),s.convention=t.convention,s.state=t.state,t.glSource=JSON.stringify(s),r.glSources.push(s),JSON.parse(t.glLayers).map((function(t){t.source=s.id,r.gl_map.addLayer(t),r.glLayers.push(t)})),r.conventions.showConvention(t,!0),r.showToast("top right","success","Editado Correctamente")}}))},t.prototype.canShowLayer=function(t,e){var n=this;return!e||!t.exclusions.some((function(t){return n.conventions.activeLayers.map((function(t){return t.id})).indexOf(t)>=0}))},t.prototype.uncheckLayers=function(t){var e=this;t.exclusions.map((function(t){e.conventions.activeLayers.some((function(n){if(n.id===t)return e.showLayer(n,!1),!0}))})),this.showLayer(t,!0)},t.prototype.showLayer=function(t,e){var n=this;this.canShowLayer(t,e)?this.conventions.showConvention(t,e)&&(JSON.parse(t.glLayers),this.glLayers.forEach((function(i,o){i.layer_id===t.id&&(e?(n.glLayers[o].layout.visibility="visible",n.gl_map.setLayoutProperty(n.glLayers[o].id,"visibility","visible")):(n.glLayers[o].layout.visibility="none",n.gl_map.setLayoutProperty(n.glLayers[o].id,"visibility","none")))}))):(this.clickedLayer=t,this.canShowSwal.fire())},t.prototype.saveEmail=function(t){},t.prototype.handleRefusalToSetEmail=function(t){},t.prototype.createElement=function(t,e){var n=document.createElement("div");return void 0!==e?(n.className+=" layer_"+e.id,e.state||(n.className+=" hide"),-1!==e.sourceType.indexOf("realtime_icons")&&(n.className+=" "+t.icon,n.setAttribute("(click)","show_icon($event,"+JSON.stringify(t)+");"))):(n.style.backgroundImage="url("+t.icon+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundSize="cover",n.style.cursor="pointer",n.style.width="35px",n.style.height="35px",n.setAttribute("(click)","show_station($event,"+JSON.stringify(t)+");")),n.innerHTML="<span class='marker-title'>"+t.name+"</span>",n[0]},t.prototype.toggleConventions=function(){this.closeConv=!this.closeConv,this.rotate()},t.prototype.ngOnInit=function(){this.renderer.addClass(document.body,"visor")},t.prototype.ngOnDestroy=function(){this.renderer.removeClass(document.body,"visor")},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.prototype.changeLayerPos=function(t,e,n,i){var o=this;if(e!==t)if(i<=n){var r=JSON.parse(e.glLayers),a=r[r.length-1].id;(l=JSON.parse(t.glLayers)).map((function(t){return o.gl_map.moveLayer(t.id,a)}));var s=l[0].id;r.map((function(t){return o.gl_map.moveLayer(t.id,s)}))}else{var l,c=JSON.parse(e.glLayers)[0].id;(l=JSON.parse(t.glLayers)).map((function(t){return o.gl_map.moveLayer(t.id,c)}))}},t.prototype.sendToTop=function(t,e){var n=this,i=t[e],o=JSON.parse(i.glLayers),r=o[0].id+"ref";i.inTop?(o.map((function(t){return n.gl_map.moveLayer(t.id,o[0].id+"ref")})),this.gl_map.removeLayer(r),i.inTop=!1):(this.gl_map.addLayer({id:r,type:"symbol",source:o[0].source,layout:{visibility:"none"}},o[0].id),o.map((function(t){return n.gl_map.moveLayer(t.id)})),i.inTop=!0)},t.prototype.drop=function(t){t.previousContainer===t.container?(this.changeLayerPos(t.container.data[t.previousIndex],t.container.data[t.currentIndex],t.previousIndex,t.currentIndex),Object(Fe.e)(t.container.data,t.previousIndex,t.currentIndex)):t.container.data.length>0?(this.changeLayerPos(t.previousContainer.data[t.previousIndex],t.container.data[t.currentIndex],t.previousIndex,t.currentIndex),Object(Fe.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)):Object(Fe.f)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)},t.prototype.startJoyRade=function(){this.joyrideService.startTour({steps:["firstStep","secondStep"]})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](pe.a),l["\u0275\u0275directiveInject"](Ie),l["\u0275\u0275directiveInject"](g.Ib),l["\u0275\u0275directiveInject"](c),l["\u0275\u0275directiveInject"](h.a),l["\u0275\u0275directiveInject"](g.G),l["\u0275\u0275directiveInject"](Me),l["\u0275\u0275directiveInject"](r.c),l["\u0275\u0275directiveInject"](l.Renderer2),l["\u0275\u0275directiveInject"](ft),l["\u0275\u0275directiveInject"](u.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layers-sidenav"]],viewQuery:function(t,e){var n;1&t&&(l["\u0275\u0275viewQuery"](xn,!0),l["\u0275\u0275viewQuery"](wn,!0),l["\u0275\u0275viewQuery"](In,!0)),2&t&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.infoSwal=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.conventions=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.canShowSwal=n.first))},decls:18,vars:8,consts:[[1,"sidenav-container",3,"hasBackdrop"],["mode","over","id","sidenav",3,"opened"],["drawer",""],["id","layer-sidenav","status","primary","nbSpinnerStatus","danger","nbSpinnerSize","large",3,"nbSpinner",4,"ngIf"],["conventions",""],[1,"row","justify-content-center"],["id","md-fab-layers",1,"stick-fab-center-bottom",3,"click"],["nbButton","","ghost","","id","menu_fab","aria-label","menu","nbTooltip","Ver Capas","nbTooltipStatus","primary","nbButton","","status","primary",1,"md-fab","md-secondary"],["icon","layers-outline",4,"ngIf"],["icon","layers",4,"ngIf"],["id","md-fab-layers","class","stick-fab-center-bottom",4,"ngIf"],["title","Desactivar?","text","Una o m\xe1s capas deben ser desactivadas para Activar esta capa.","icon","question",3,"showCancelButton","focusCancel","confirm"],["canShowSwal",""],["tabs",""],["id","layer-sidenav","status","primary","nbSpinnerStatus","danger","nbSpinnerSize","large",3,"nbSpinner"],[1,"d-flex","justify-content-between"],["class","d-flex","nbButton","","shape","round","size","small","status","success","status","primary",3,"click",4,"nbIsGranted"],["status","info","id","close_sidenav","nbButton","",3,"click"],["icon","close-outline","pack","eva",1,"d-flex"],["id","sidenav-acordeon","multi",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nbButton","","shape","round","size","small","status","success","status","primary",1,"d-flex",3,"click"],["icon","plus-outline"],[1,"row","d-flex","justify-content-start"],["class","layer-options",3,"mouseover","mouseout",4,"nbIsGranted"],["ngClass","canShowCategory(category): text-disabled",1,"category-user",3,"name","title","picture"],["class","d-flex justify-content-end py-2 px-2",3,"mouseover","mouseout",4,"nbIsGranted"],["cdkDropList","",1,"list-ctn",3,"id","cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","contact","matRipple","",4,"ngFor","ngForOf","ngForTrackBy"],[1,"layer-options",3,"mouseover","mouseout"],["outline","","status","info","nbButton","",3,"click"],["icon","edit-2-outline","pack","eva",1,"d-flex"],["outline","","ghost","","nbButton","",3,"click",4,"ngIf"],["title","Desea Borrar esta Categor\xeda?","text","Esta acci\xf3n no se  podr\xe1 deshacer","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],["outline","","ghost","","nbButton","",3,"click"],["icon","trash-2-outline","pack","eva",1,"d-flex"],[1,"d-flex","justify-content-end","py-2","px-2",3,"mouseover","mouseout"],["nbButton","","fullWidth","","shape","round","size","tiny","status","success","status","info",3,"click"],["cdkDrag","","matRipple","",1,"contact"],[3,"showToggleButton","flipped"],[1,"layer-front-card"],["status","warning"],[1,"d-flex"],[1,"type","py-1","px-1"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline",4,"ngIf","ngIfElse"],["iconTypes",""],[1,"layer-user","py-1","px-1","d-flex","flex-wrap","flex-column","justify-content-center"],[1,"d-flex","icon-containerd-flex"],["status","info","ghost","","class","ml-2","size","small","nbButton","",3,"click",4,"ngIf"],["class","d-flex","status","info",3,"checked","click",4,"ngIf","ngIfElse"],["radioTmp",""],["class","ml-2","layer.flipped","","size","small","nbButton","",3,"status","click",4,"nbIsGranted"],["status","danger"],["size","small","fullWidth",""],["nbTooltip","Fijar al P\xfablico","nbTooltipStatus","primary","status","warning","icon","eye-outline",3,"click",4,"ngIf"],["nbTooltip","Desfijar al P\xfablico","nbTooltipStatus","primary","status","success","icon","eye-off",3,"click",4,"ngIf"],["icon","edit-2-outline",3,"click"],["icon","trash-outline",3,"click"],["title","Desea Borrar esta Capa?","text","Esta acci\xf3n no se  podr\xe1 deshacer","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],[1,"icon-container","d-flex","justify-content-end","align-items-stretch","flex-fill"],["size","small","ghost","","nbButton","",3,"click"],["status","basic","icon","flip-2-outline","pack","eva",1,"icon"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline"],["nbTooltipStatus","info","pack","obs-icons",1,"obs-icons",3,"nbTooltip","icon"],["status","info","ghost","","size","small","nbButton","",1,"ml-2",3,"click"],["nbTooltip","Traer Adelante","nbTooltipStatus","primary","class","icon","icon","arrow-upward-outline","pack","eva",4,"ngIf"],["nbTooltip","Volver","nbTooltipStatus","primary","class","icon","icon","arrow-back-outline","pack","eva",4,"ngIf"],["nbTooltip","Traer Adelante","nbTooltipStatus","primary","icon","arrow-upward-outline","pack","eva",1,"icon"],["nbTooltip","Volver","nbTooltipStatus","primary","icon","arrow-back-outline","pack","eva",1,"icon"],["status","info",1,"d-flex",3,"checked","click"],["status","info",1,"d-flex",3,"value","click"],["layer.flipped","","size","small","nbButton","",1,"ml-2",3,"status","click"],["icon","flip-2-outline","pack","eva",1,"icon"],["nbTooltip","Fijar al P\xfablico","nbTooltipStatus","primary","status","warning","icon","eye-outline",3,"click"],["nbTooltip","Desfijar al P\xfablico","nbTooltipStatus","primary","status","success","icon","eye-off",3,"click"],["icon","layers-outline"],["icon","layers"],["id","md-fab-layers",1,"stick-fab-center-bottom"],["title","A\xfan no te has registrado?","text","Si deseas ver m\xe1s capas, por favor registrate o ingresa a la plataforma con tu usuario.","icon","info","cancelButtonText","<i class='fa fa-sign-in'>\n                </i> Ingresar","confirmButtonText","\n                <i class='fa fa-plus' aria-hidden='true'></i> Quiero Registrarme.",3,"showCancelButton","focusCancel","confirm","cancel"],["loginSwal",""],["nbButton","","ghost","","id","menu_fab","aria-label","menu","nbTooltip","Ver Capas","nbTooltipStatus","primary","nbButton","","status","primary",1,"md-fab","md-secondary",3,"swal"],[1,"margin-bottom-0"]],template:function(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"mat-drawer-container",0),l["\u0275\u0275elementStart"](1,"mat-drawer",1,2),l["\u0275\u0275template"](3,Zn,9,5,"nb-card",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"mat-drawer-content"),l["\u0275\u0275element"](5,"ngx-mapbox"),l["\u0275\u0275element"](6,"ngx-conventions",null,4),l["\u0275\u0275elementStart"](8,"div",5),l["\u0275\u0275elementStart"](9,"div",6),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275reference"](2);return e.toggleSideNav(t)})),l["\u0275\u0275elementStart"](10,"button",7),l["\u0275\u0275template"](11,Gn,1,0,"nb-icon",8),l["\u0275\u0275template"](12,Wn,1,0,"nb-icon",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](13,Un,6,5,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"swal",11,12),l["\u0275\u0275listener"]("confirm",(function(){return e.uncheckLayers(e.clickedLayer)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](16,Xn,3,0,"ng-template",null,13,l["\u0275\u0275templateRefExtractor"])}2&t&&(l["\u0275\u0275property"]("hasBackdrop",!1),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("opened",e.isSideNavOpen),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.categories.length>0),l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",e.isSideNavOpen),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.isSideNavOpen),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.isLogged),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0))},directives:[_n.b,_n.a,o.m,_n.c,le,yn,g.q,g.Lb,Ne.a,g.u,g.tb,g.x,pe.c,g.K,g.t,g.f,o.l,g.h,g.i,g.Ob,o.k,g.g,g.W,Fe.c,g.X,Fe.a,Cn.b,g.H,g.w,g.s,g.l,g.k,g.z,g.jb,Ne.b],styles:[".nb-theme-default   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-default   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-default   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-default   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-default   [_nghost-%COMP%]    {height:100%!important}.nb-theme-default   [_nghost-%COMP%]     .info-container, .nb-theme-default   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-default   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-default   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-default   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-default   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}@-webkit-keyframes fade{0%{opacity:0;left:-10%}to{opacity:1;left:0}}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-default   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-default   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-default   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-default   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-default   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-default   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-default   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-default   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-default   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-default   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-default   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-default   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-default   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-default   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-default   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-default   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-default   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-dark   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-dark   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-dark   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-dark   [_nghost-%COMP%]    {height:100%!important}.nb-theme-dark   [_nghost-%COMP%]     .info-container, .nb-theme-dark   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-dark   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-dark   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-dark   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-dark   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-dark   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-dark   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-dark   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-dark   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-dark   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-dark   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-dark   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-dark   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-dark   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-dark   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-cosmic   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-cosmic   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-cosmic   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-cosmic   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-cosmic   [_nghost-%COMP%]    {height:100%!important}.nb-theme-cosmic   [_nghost-%COMP%]     .info-container, .nb-theme-cosmic   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-cosmic   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-cosmic   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-cosmic   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-cosmic   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-cosmic   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-cosmic   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-cosmic   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-cosmic   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-cosmic   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-cosmic   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-cosmic   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-cosmic   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-cosmic   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-cosmic   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#b18aff;text-transform:uppercase}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#a16eff}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-cosmic   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-cosmic   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-cosmic   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-cosmic   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-cosmic   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-corporate   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-corporate   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-corporate   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-corporate   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-corporate   [_nghost-%COMP%]    {height:100%!important}.nb-theme-corporate   [_nghost-%COMP%]     .info-container, .nb-theme-corporate   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-corporate   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-corporate   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-corporate   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-corporate   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-corporate   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-corporate   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-corporate   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-corporate   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-corporate   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-corporate   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-corporate   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-corporate   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-corporate   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-corporate   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-corporate   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-corporate   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-corporate   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-corporate   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-corporate   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-material-dark   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-material-dark   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(4,149,238,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0495ee}.nb-theme-material-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-material-dark   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-dark   [_nghost-%COMP%]    {height:100%!important}.nb-theme-material-dark   [_nghost-%COMP%]     .info-container, .nb-theme-material-dark   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-material-dark   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-material-dark   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-material-dark   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-material-dark   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#99e9fd;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-material-dark   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-material-dark   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-material-dark   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-material-dark   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#66d3f9;border:0 #fff;border-radius:16px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#40bbf4}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#0273cc}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#ccf7fe;border:0 #fff;border-radius:58px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#99e9fd}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#66d3f9}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-material-dark   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-material-dark   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-material-dark   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-material-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-material-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-material-dark   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#f24681;text-transform:uppercase}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize;font-size:.85em;color:#e91d63}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#ccf7fe}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-material-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-material-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-material-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-material-dark   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-material-dark   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-material-light   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-material-light   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(4,149,238,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0495ee}.nb-theme-material-light   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-material-light   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-light   [_nghost-%COMP%]    {height:100%!important}.nb-theme-material-light   [_nghost-%COMP%]     .info-container, .nb-theme-material-light   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-material-light   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-material-light   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-material-light   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-material-light   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#99e9fd;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-material-light   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-material-light   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-material-light   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-material-light   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#66d3f9;border:0 #fff;border-radius:16px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#40bbf4}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#0273cc}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#ccf7fe;border:0 #fff;border-radius:58px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#99e9fd}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#66d3f9}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-material-light   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-material-light   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-material-light   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-material-light   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-material-light   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-material-light   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#903df4;text-transform:uppercase}.nb-theme-material-light   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize;font-size:.85em;color:#6200ee}.nb-theme-material-light   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#ccf7fe}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-material-light   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-material-light   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-material-light   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-material-light   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-material-light   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}.nb-theme-obsrio   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-obsrio   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(109,185,208,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#6db9d0}.nb-theme-obsrio   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-obsrio   [_nghost-%COMP%]     #surface1 path{fill:#6db9d0!important}.nb-theme-obsrio   [_nghost-%COMP%]    {height:100%!important}.nb-theme-obsrio   [_nghost-%COMP%]     .info-container, .nb-theme-obsrio   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-obsrio   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-obsrio   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;max-height:94vh;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-obsrio   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-obsrio   [_nghost-%COMP%]     #layer-sidenav{opacity:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:3s;animation-delay:3s}@keyframes fade{0%{opacity:0;left:-10%}to{opacity:1;left:0}}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#caf9fa;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px}.nb-theme-obsrio   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-obsrio   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-obsrio   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-obsrio   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#aceaf0;border:0 #fff;border-radius:16px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#91d5e2}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#4f94b2}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#e4fcfb;border:0 #fff;border-radius:58px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#caf9fa}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#aceaf0}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-obsrio   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-obsrio   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:10px;margin:0;box-shadow:none}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;max-height:80vh}.nb-theme-obsrio   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{width:400px}.nb-theme-obsrio   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:absolute;top:10px;left:405px}.nb-theme-obsrio   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-obsrio   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#669493;text-transform:uppercase}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#2d4b4d}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#e4fcfb}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-obsrio   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em}.nb-theme-obsrio   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-obsrio   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{position:fixed;margin:0}.nb-theme-obsrio   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{max-height:85vh;-webkit-overflow-scrolling:touch}.nb-theme-obsrio   [_nghost-%COMP%]     .mat-drawer{max-width:100%}}"],data:{animation:[Object(dn.k)("rotatedState",[Object(dn.h)("default",Object(dn.i)({transform:"rotate(0)"})),Object(dn.h)("rotated",Object(dn.i)({transform:"rotate(-180deg)"})),Object(dn.j)("rotated => default",Object(dn.e)("400ms ease-out")),Object(dn.j)("default => rotated",Object(dn.e)("400ms ease-in"))])]}}),t}(),pathMatch:"full"},{path:"estaciones",loadChildren:function(){return n.e(11).then(n.bind(null,"7ckB")).then((function(t){return t.StationModule}))},data:{preload:!1,delay:1e4}},{path:"error",loadChildren:function(){return n.e(10).then(n.bind(null,"yd2K")).then((function(t){return t.MiscModule}))},data:{preload:!1,delay:15e3}}]}],Jn=function(){function t(){}return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.g.forChild(Yn)],r.g]}),t}(),qn=n("vTDv"),Qn=n("AytR"),ti=n("m3o8"),ei=n("RS3s"),ni=[_n.d],ii=function(){function t(t){this.iconLibraries=t,this.iconLibraries.registerSvgPack("obs-icons",{"2d":'<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="225.000000pt" height="225.000000pt" viewBox="0 0 225.000000 225.000000"\n      preserveAspectRatio="xMidYMid meet">\n     <metadata>\n     Created by potrace 1.16, written by Peter Selinger 2001-2019\n     </metadata>\n     <g transform="translate(0.000000,225.000000) scale(0.100000,-0.100000)"\n     fill="#000000" stroke="none">\n     <path d="M382 1805 c-35 -8 -83 -23 -105 -35 -58 -28 -152 -113 -183 -165 -23\n     -40 -56 -161 -48 -176 2 -4 50 -10 106 -13 57 -4 115 -9 131 -12 23 -5 27 -2\n     27 18 0 70 44 144 103 175 41 21 124 20 165 -1 50 -26 92 -99 92 -160 0 -88\n     -32 -138 -171 -266 -225 -210 -310 -294 -372 -370 -60 -75 -109 -166 -120\n     -227 l-7 -33 470 0 470 0 0 105 0 105 -266 2 -267 3 34 34 c19 18 98 87 175\n     152 170 142 234 211 280 304 84 171 67 333 -47 447 -106 106 -291 151 -467\n     113z"/>\n     <path d="M1080 1175 l0 -637 313 5 c259 3 323 7 377 22 107 29 164 61 223 125\n     105 114 147 245 147 464 0 86 -6 168 -15 211 -46 215 -212 390 -405 426 -30 5\n     -187 12 -347 16 l-293 6 0 -638z m565 416 c63 -29 150 -122 175 -187 73 -196\n     34 -517 -73 -598 -60 -46 -135 -66 -247 -66 l-100 0 0 441 0 442 102 -7 c65\n     -5 118 -14 143 -25z"/>\n     </g>\n     </svg>',"3d":'<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="225.000000pt" height="225.000000pt" viewBox="0 0 225.000000 225.000000"\n      preserveAspectRatio="xMidYMid meet">\n     <metadata>\n     Created by potrace 1.16, written by Peter Selinger 2001-2019\n     </metadata>\n     <g transform="translate(0.000000,225.000000) scale(0.100000,-0.100000)"\n     fill="#000000" stroke="none" class="obs-icon">\n     <path d="M1242 2073 l178 -178 58 58 c32 31 64 57 73 57 29 0 200 -120 269\n     -189 80 -81 167 -208 210 -310 32 -74 70 -218 70 -263 0 -28 0 -28 71 -28 l72\n     0 -7 57 c-50 426 -376 805 -797 927 -90 26 -230 46 -319 46 l-55 0 177 -177z"/>\n     <path d="M702 1486 c-82 -27 -142 -94 -142 -160 0 -25 2 -26 60 -26 57 0 60 1\n     60 24 0 40 52 76 110 76 63 0 99 -29 106 -85 12 -86 -39 -135 -138 -135 l-58\n     0 0 -44 0 -43 65 -6 c108 -10 145 -43 145 -128 0 -33 -7 -48 -34 -75 -29 -29\n     -41 -34 -80 -34 -25 0 -57 5 -71 12 -27 12 -55 54 -55 83 0 12 -13 15 -61 15\n     l-62 0 6 -41 c26 -194 375 -228 458 -44 40 86 11 196 -61 237 l-38 22 33 23\n     c48 33 79 103 71 160 -9 70 -47 127 -102 153 -57 28 -153 35 -212 16z"/>\n     <path d="M1130 1125 l0 -377 154 3 c152 4 153 4 222 39 130 66 179 168 172\n     356 -3 91 -8 118 -30 165 -32 71 -86 124 -157 158 -51 24 -69 26 -208 29\n     l-153 4 0 -377z m318 247 c22 -11 49 -38 67 -67 29 -47 30 -51 30 -179 0 -121\n     -2 -134 -25 -174 -38 -66 -93 -94 -188 -96 l-77 -1 -3 260 c-1 143 0 266 3\n     274 8 20 144 9 193 -17z"/>\n     <path d="M10 1001 c0 -41 25 -158 51 -233 114 -342 404 -621 749 -721 91 -27\n     230 -47 320 -47 l55 0 -175 175 c-96 96 -177 175 -180 175 -3 0 -23 -17 -45\n     -38 -87 -80 -77 -76 -132 -49 -176 90 -351 282 -434 477 -35 84 -69 209 -69\n     257 l0 33 -70 0 -70 0 0 -29z"/>\n     </g>\n     </svg>',lines:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n      <g id="surface1" class="obs-icon">\n      <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 21.480469 0.320312 C 20.980469 0.628906 20.710938 1.132812 20.710938 1.773438 L 20.710938 2.316406 L 19.441406 3.554688 C 18.179688 4.792969 18.160156 4.804688 17.667969 4.804688 C 17.359375 4.804688 17.007812 4.890625 16.773438 5.019531 L 16.386719 5.230469 L 13.71875 4.335938 C 11.144531 3.46875 11.039062 3.425781 10.867188 3.085938 C 10.261719 1.898438 9.054688 1.578125 8.167969 2.359375 C 7.238281 3.171875 7.453125 4.570312 8.582031 5.113281 C 8.957031 5.304688 9.074219 5.421875 9.160156 5.742188 C 9.214844 5.957031 9.511719 6.949219 9.820312 7.953125 C 10.132812 8.945312 10.515625 10.226562 10.6875 10.78125 C 10.859375 11.339844 11.1875 12.417969 11.414062 13.183594 C 11.765625 14.328125 11.820312 14.59375 11.699219 14.710938 C 11.582031 14.828125 11.1875 14.808594 9.4375 14.617188 L 7.3125 14.378906 L 6.832031 13.878906 C 6.054688 13.066406 5.21875 12.960938 4.429688 13.578125 C 3.886719 14.007812 3.671875 14.957031 4.003906 15.578125 C 4.152344 15.875 4.121094 15.949219 2.957031 18.265625 C 2.058594 20.070312 1.707031 20.667969 1.546875 20.691406 C 0.703125 20.820312 0.105469 21.5 0.105469 22.3125 C 0.105469 23.253906 0.820312 23.96875 1.761719 23.96875 C 2.980469 23.96875 3.746094 22.78125 3.265625 21.628906 C 3.128906 21.289062 3.140625 21.246094 4.292969 18.929688 C 5.414062 16.644531 5.464844 16.570312 5.808594 16.503906 C 6.011719 16.460938 6.351562 16.292969 6.566406 16.121094 C 6.789062 15.941406 7.003906 15.800781 7.035156 15.800781 C 7.066406 15.800781 8.039062 15.917969 9.179688 16.066406 C 10.324219 16.21875 11.285156 16.335938 11.316406 16.335938 C 11.347656 16.335938 11.457031 16.472656 11.5625 16.644531 C 11.660156 16.816406 11.914062 17.058594 12.128906 17.1875 C 12.652344 17.519531 13.644531 17.457031 14.050781 17.070312 C 14.445312 16.699219 14.625 16.300781 14.625 15.78125 C 14.625 15.128906 14.316406 14.625 13.75 14.328125 C 13.21875 14.050781 13.367188 14.445312 11.902344 9.660156 C 11.457031 8.1875 10.941406 6.542969 10.773438 5.988281 C 10.589844 5.445312 10.484375 4.964844 10.515625 4.933594 C 10.546875 4.890625 11.796875 5.273438 13.292969 5.765625 C 15.652344 6.542969 16.015625 6.695312 16.066406 6.90625 C 16.164062 7.324219 16.75 7.890625 17.199219 8.007812 C 18.332031 8.316406 19.324219 7.527344 19.324219 6.332031 C 19.324219 5.820312 19.324219 5.820312 20.539062 4.601562 L 21.769531 3.382812 L 22.355469 3.375 C 24 3.351562 24.640625 1.292969 23.285156 0.363281 C 22.792969 0.03125 21.992188 0.0117188 21.480469 0.320312 Z M 21.480469 0.320312 "/>\n      </g>\n      </svg>',polygons:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n     <g id="surface1">\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 8.742188 0.0273438 C 8.203125 0.15625 8.042969 0.226562 7.707031 0.5 C 7.011719 1.050781 6.8125 2.199219 7.269531 2.976562 L 7.355469 3.121094 L 5.390625 6.070312 L 3.421875 9.023438 L 3.039062 9.027344 C 2.820312 9.027344 2.5625 9.054688 2.460938 9.089844 C 1.578125 9.367188 1.027344 10.09375 1.027344 10.976562 C 1.027344 11.675781 1.328125 12.257812 1.898438 12.65625 L 2.089844 12.789062 L 1.757812 16.429688 L 1.429688 20.066406 L 1.128906 20.222656 C -0.109375 20.855469 -0.359375 22.492188 0.632812 23.433594 C 1.570312 24.320312 3.121094 24.085938 3.730469 22.964844 L 3.859375 22.734375 L 8.503906 22.742188 L 13.148438 22.757812 L 13.261719 22.96875 C 13.597656 23.578125 14.28125 23.976562 15 23.976562 C 15.859375 23.976562 16.570312 23.476562 16.875 22.648438 C 17.042969 22.203125 16.996094 21.542969 16.773438 21.109375 C 16.738281 21.039062 16.734375 20.984375 16.765625 20.945312 C 16.796875 20.910156 17.820312 19.585938 19.054688 18 C 20.289062 16.414062 21.332031 15.074219 21.382812 15.019531 C 21.464844 14.929688 21.496094 14.925781 21.734375 14.960938 C 23.015625 15.164062 24.164062 13.992188 23.957031 12.707031 C 23.792969 11.703125 22.976562 11.015625 21.9375 11.015625 L 21.632812 11.015625 L 20.125 8.59375 L 18.613281 6.171875 L 18.726562 5.980469 C 19.289062 5.007812 18.886719 3.703125 17.875 3.226562 C 17.148438 2.882812 16.269531 2.984375 15.71875 3.488281 L 15.53125 3.65625 L 13.332031 2.832031 C 12.125 2.375 11.101562 1.988281 11.058594 1.96875 C 11.007812 1.941406 10.972656 1.84375 10.960938 1.695312 C 10.894531 1.023438 10.296875 0.332031 9.585938 0.109375 C 9.375 0.0429688 8.882812 -0.00390625 8.742188 0.0273438 Z M 12.757812 4.203125 C 13.976562 4.660156 14.980469 5.035156 14.992188 5.039062 C 14.996094 5.042969 15.023438 5.171875 15.046875 5.320312 C 15.207031 6.296875 16.035156 6.984375 17.0625 6.984375 L 17.367188 6.984375 L 18.875 9.40625 L 20.386719 11.828125 L 20.273438 12.019531 C 20.117188 12.289062 20.015625 12.675781 20.015625 12.984375 C 20.015625 13.257812 20.128906 13.773438 20.207031 13.847656 C 20.230469 13.875 20.25 13.925781 20.25 13.96875 C 20.25 14.007812 19.199219 15.390625 17.914062 17.039062 L 15.578125 20.039062 L 15.179688 20.019531 C 14.359375 19.988281 13.691406 20.328125 13.296875 20.984375 L 13.148438 21.234375 L 3.863281 21.234375 L 3.660156 20.929688 C 3.539062 20.742188 3.355469 20.546875 3.195312 20.429688 C 3.050781 20.320312 2.925781 20.226562 2.921875 20.226562 C 2.914062 20.226562 3.054688 18.601562 3.238281 16.617188 C 3.417969 14.628906 3.5625 12.984375 3.5625 12.957031 C 3.5625 12.929688 3.675781 12.863281 3.816406 12.800781 C 4.84375 12.375 5.273438 11.101562 4.742188 10.050781 L 4.65625 9.867188 L 6.628906 6.914062 L 8.601562 3.964844 L 8.929688 3.976562 C 9.421875 3.992188 10.070312 3.765625 10.332031 3.472656 C 10.382812 3.417969 10.449219 3.375 10.480469 3.375 C 10.519531 3.375 11.546875 3.75 12.757812 4.203125 Z M 12.757812 4.203125 "/>\n     </g>\n     </svg>',raster:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n     <g id="surface1" class="obs-icon">\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.304688 1.679688 C 10.714844 2.230469 11.113281 3.238281 11.914062 3.238281 C 12.707031 3.238281 13.09375 2.398438 12.589844 1.753906 C 12.277344 1.355469 11.6875 1.332031 11.304688 1.679688 Z M 11.304688 1.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.515625 3.480469 C 8.929688 3.71875 8.808594 4.632812 9.3125 5.027344 C 9.730469 5.363281 10.140625 5.339844 10.5 4.980469 C 11.230469 4.261719 10.453125 3.097656 9.515625 3.480469 Z M 9.515625 3.480469 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.640625 3.445312 C 10.96875 3.695312 10.800781 4.597656 11.351562 5.027344 C 11.773438 5.363281 12.179688 5.339844 12.539062 4.980469 C 13.019531 4.511719 12.925781 3.828125 12.347656 3.539062 C 11.988281 3.347656 11.929688 3.335938 11.640625 3.445312 Z M 11.640625 3.445312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.308594 3.707031 C 12.925781 4.09375 12.886719 4.273438 13.09375 4.726562 C 13.285156 5.148438 13.824219 5.351562 14.269531 5.171875 C 14.605469 5.027344 14.878906 4.609375 14.878906 4.246094 C 14.878906 3.972656 14.21875 3.359375 13.921875 3.359375 C 13.777344 3.359375 13.5 3.515625 13.308594 3.707031 Z M 13.308594 3.707031 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.210938 5.710938 C 6.886719 6.121094 6.886719 6.480469 7.210938 6.886719 C 7.453125 7.199219 7.894531 7.296875 8.339844 7.128906 C 8.664062 6.996094 8.878906 6.382812 8.734375 5.976562 C 8.507812 5.328125 7.632812 5.171875 7.210938 5.710938 Z M 7.210938 5.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.238281 5.640625 C 8.902344 5.976562 8.929688 6.613281 9.277344 6.9375 C 9.863281 7.488281 10.800781 7.078125 10.800781 6.289062 C 10.800781 5.53125 9.769531 5.113281 9.238281 5.640625 Z M 9.238281 5.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.28125 5.640625 C 11.136719 5.785156 11.039062 6.035156 11.039062 6.300781 C 11.039062 6.851562 11.386719 7.199219 11.929688 7.199219 C 12.71875 7.199219 13.128906 6.191406 12.5625 5.664062 C 12.203125 5.328125 11.605469 5.316406 11.28125 5.640625 Z M 11.28125 5.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.210938 5.710938 C 13.066406 5.890625 12.960938 6.167969 12.960938 6.324219 C 12.960938 6.730469 13.464844 7.199219 13.921875 7.199219 C 14.375 7.199219 14.878906 6.730469 14.878906 6.324219 C 14.878906 5.820312 14.449219 5.398438 13.921875 5.398438 C 13.558594 5.398438 13.402344 5.472656 13.210938 5.710938 Z M 13.210938 5.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.265625 5.675781 C 14.722656 6.253906 15.132812 7.199219 15.910156 7.199219 C 16.453125 7.199219 16.800781 6.851562 16.800781 6.300781 C 16.800781 5.472656 15.828125 5.074219 15.265625 5.675781 Z M 15.265625 5.675781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.292969 7.753906 C 5.003906 8.125 4.992188 8.171875 5.171875 8.554688 C 5.542969 9.359375 6.71875 9.109375 6.71875 8.21875 C 6.71875 7.453125 5.773438 7.140625 5.292969 7.753906 Z M 5.292969 7.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.273438 7.703125 C 6.742188 8.460938 7.464844 9.359375 8.269531 8.941406 C 9.023438 8.554688 8.761719 7.535156 7.882812 7.464844 C 7.558594 7.441406 7.414062 7.488281 7.273438 7.703125 Z M 7.273438 7.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.324219 7.644531 C 8.929688 8.101562 9.058594 8.773438 9.613281 9 C 9.9375 9.132812 10.007812 9.132812 10.296875 8.914062 C 10.691406 8.617188 10.789062 8.003906 10.488281 7.667969 C 10.222656 7.378906 9.574219 7.367188 9.324219 7.644531 Z M 9.324219 7.644531 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.292969 7.753906 C 11.003906 8.125 10.992188 8.171875 11.171875 8.554688 C 11.542969 9.359375 12.71875 9.109375 12.71875 8.21875 C 12.71875 7.453125 11.773438 7.140625 11.292969 7.753906 Z M 11.292969 7.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.320312 7.679688 C 12.816406 8.183594 13.1875 9.035156 13.921875 9.035156 C 14.652344 9.035156 15.023438 8.183594 14.519531 7.679688 C 14.386719 7.546875 14.125 7.441406 13.921875 7.441406 C 13.714844 7.441406 13.453125 7.546875 13.320312 7.679688 Z M 13.320312 7.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.359375 7.679688 C 15.011719 8.027344 15.046875 8.566406 15.433594 8.867188 C 15.828125 9.179688 16.09375 9.179688 16.414062 8.902344 C 16.800781 8.59375 16.859375 8.148438 16.558594 7.765625 C 16.246094 7.367188 15.707031 7.332031 15.359375 7.679688 Z M 15.359375 7.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.363281 7.644531 C 16.96875 8.101562 17.101562 8.773438 17.652344 9 C 17.976562 9.132812 18.046875 9.132812 18.335938 8.914062 C 18.730469 8.617188 18.828125 8.003906 18.527344 7.667969 C 18.265625 7.378906 17.617188 7.367188 17.363281 7.644531 Z M 17.363281 7.644531 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.433594 9.589844 C 3.132812 9.925781 3.226562 10.535156 3.625 10.835938 C 3.898438 11.039062 3.996094 11.050781 4.296875 10.933594 C 4.90625 10.679688 5.027344 10.09375 4.585938 9.5625 C 4.34375 9.289062 3.695312 9.300781 3.433594 9.589844 Z M 3.433594 9.589844 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.28125 9.683594 C 4.679688 10.453125 5.628906 11.398438 6.394531 10.800781 C 6.636719 10.609375 6.71875 10.429688 6.71875 10.152344 C 6.71875 9.359375 5.773438 9.058594 5.28125 9.683594 Z M 5.28125 9.683594 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.273438 9.625 C 6.972656 10.042969 7.03125 10.5 7.402344 10.800781 C 8.171875 11.398438 9.121094 10.453125 8.519531 9.683594 C 8.183594 9.265625 7.546875 9.226562 7.273438 9.625 Z M 7.273438 9.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.324219 9.5625 C 8.929688 10.019531 9.058594 10.691406 9.613281 10.921875 C 9.9375 11.050781 10.007812 11.050781 10.296875 10.835938 C 10.691406 10.535156 10.789062 9.925781 10.488281 9.589844 C 10.222656 9.300781 9.574219 9.289062 9.324219 9.5625 Z M 9.324219 9.5625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.292969 9.671875 C 11.148438 9.851562 11.039062 10.03125 11.039062 10.09375 C 11.039062 10.378906 11.351562 10.800781 11.664062 10.933594 C 11.964844 11.050781 12.058594 11.039062 12.335938 10.835938 C 12.730469 10.535156 12.828125 9.925781 12.527344 9.589844 C 12.214844 9.238281 11.59375 9.289062 11.292969 9.671875 Z M 11.292969 9.671875 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.320312 9.601562 C 12.816406 10.105469 13.1875 10.957031 13.921875 10.957031 C 14.652344 10.957031 15.023438 10.105469 14.519531 9.601562 C 14.386719 9.46875 14.125 9.359375 13.921875 9.359375 C 13.714844 9.359375 13.453125 9.46875 13.320312 9.601562 Z M 13.320312 9.601562 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.359375 9.601562 C 14.640625 10.320312 15.648438 11.484375 16.414062 10.824219 C 16.835938 10.476562 16.871094 10.019531 16.511719 9.671875 C 16.152344 9.300781 15.683594 9.277344 15.359375 9.601562 Z M 15.359375 9.601562 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.363281 9.5625 C 16.96875 10.019531 17.101562 10.691406 17.652344 10.921875 C 17.976562 11.050781 18.046875 11.050781 18.335938 10.835938 C 18.730469 10.535156 18.828125 9.925781 18.527344 9.589844 C 18.265625 9.300781 17.617188 9.289062 17.363281 9.5625 Z M 17.363281 9.5625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.273438 9.625 C 18.972656 10.042969 19.03125 10.5 19.402344 10.800781 C 20.171875 11.398438 21.121094 10.453125 20.519531 9.683594 C 20.183594 9.265625 19.546875 9.226562 19.273438 9.625 Z M 19.273438 9.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 1.703125 11.59375 C 1.378906 11.820312 1.355469 12.359375 1.65625 12.636719 C 2.351562 13.273438 3.300781 12.300781 2.640625 11.640625 C 2.351562 11.351562 2.0625 11.339844 1.703125 11.59375 Z M 1.703125 11.59375 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.5625 11.617188 C 3.277344 11.929688 3.300781 12.5625 3.589844 12.71875 C 3.996094 12.9375 4.414062 12.863281 4.632812 12.539062 C 5.089844 11.832031 4.128906 10.992188 3.5625 11.617188 Z M 3.5625 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.398438 11.640625 C 5.113281 11.929688 5.101562 12.214844 5.351562 12.574219 C 5.722656 13.117188 6.601562 12.804688 6.601562 12.132812 C 6.601562 11.472656 5.867188 11.171875 5.398438 11.640625 Z M 5.398438 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.402344 11.617188 C 7.152344 11.890625 7.140625 12.40625 7.390625 12.648438 C 7.667969 12.9375 8.230469 12.886719 8.449219 12.574219 C 8.699219 12.214844 8.6875 11.929688 8.398438 11.640625 C 8.101562 11.339844 7.65625 11.328125 7.402344 11.617188 Z M 7.402344 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.371094 11.710938 C 9.070312 12.097656 9.058594 12.226562 9.3125 12.574219 C 9.636719 13.042969 10.441406 12.875 10.609375 12.289062 C 10.703125 11.953125 10.273438 11.398438 9.898438 11.398438 C 9.730469 11.398438 9.515625 11.53125 9.371094 11.710938 Z M 9.371094 11.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.398438 11.640625 C 11.113281 11.929688 11.101562 12.214844 11.351562 12.574219 C 11.722656 13.117188 12.601562 12.804688 12.601562 12.132812 C 12.601562 11.472656 11.867188 11.171875 11.398438 11.640625 Z M 11.398438 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.441406 11.640625 C 13.140625 11.941406 13.128906 12.382812 13.414062 12.636719 C 13.882812 13.054688 14.640625 12.742188 14.640625 12.144531 C 14.640625 11.808594 14.230469 11.398438 13.921875 11.398438 C 13.789062 11.398438 13.570312 11.507812 13.441406 11.640625 Z M 13.441406 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.445312 11.617188 C 15.191406 11.890625 15.179688 12.40625 15.433594 12.648438 C 15.707031 12.9375 16.273438 12.886719 16.488281 12.574219 C 16.738281 12.214844 16.726562 11.929688 16.441406 11.640625 C 16.140625 11.339844 15.695312 11.328125 15.445312 11.617188 Z M 15.445312 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.410156 11.710938 C 17.113281 12.097656 17.101562 12.226562 17.351562 12.574219 C 17.675781 13.042969 18.480469 12.875 18.648438 12.289062 C 18.742188 11.953125 18.3125 11.398438 17.941406 11.398438 C 17.773438 11.398438 17.554688 11.53125 17.410156 11.710938 Z M 17.410156 11.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.402344 11.617188 C 19.152344 11.890625 19.140625 12.40625 19.390625 12.648438 C 19.667969 12.9375 20.230469 12.886719 20.449219 12.574219 C 20.699219 12.214844 20.6875 11.929688 20.398438 11.640625 C 20.101562 11.339844 19.65625 11.328125 19.402344 11.617188 Z M 19.402344 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 21.359375 11.640625 C 20.890625 12.109375 21.191406 12.839844 21.863281 12.839844 C 22.5 12.839844 22.8125 11.953125 22.296875 11.59375 C 21.9375 11.339844 21.648438 11.351562 21.359375 11.640625 Z M 21.359375 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.550781 13.753906 C 3.289062 14.003906 3.3125 14.351562 3.601562 14.640625 C 3.886719 14.929688 4.054688 14.941406 4.414062 14.6875 C 4.703125 14.496094 4.753906 14.160156 4.558594 13.789062 C 4.402344 13.511719 3.816406 13.476562 3.550781 13.753906 Z M 3.550781 13.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.425781 13.703125 C 5.171875 13.957031 5.257812 14.496094 5.566406 14.699219 C 6.203125 15.121094 6.949219 14.292969 6.40625 13.753906 C 6.191406 13.523438 5.628906 13.5 5.425781 13.703125 Z M 5.425781 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.378906 13.800781 C 6.898438 14.339844 7.621094 15.109375 8.230469 14.699219 C 8.542969 14.496094 8.628906 13.957031 8.375 13.703125 C 8.160156 13.488281 7.621094 13.535156 7.378906 13.800781 Z M 7.378906 13.800781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.359375 13.789062 C 9.15625 14.171875 9.226562 14.507812 9.539062 14.710938 C 10.128906 15.097656 10.789062 14.4375 10.441406 13.8125 C 10.261719 13.476562 9.539062 13.464844 9.359375 13.789062 Z M 9.359375 13.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.425781 13.703125 C 11.171875 13.957031 11.257812 14.496094 11.566406 14.699219 C 12.203125 15.121094 12.949219 14.292969 12.40625 13.753906 C 12.191406 13.523438 11.628906 13.5 11.425781 13.703125 Z M 11.425781 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.464844 13.703125 C 13.34375 13.859375 13.285156 14.113281 13.308594 14.363281 C 13.308594 14.449219 13.453125 14.605469 13.609375 14.699219 C 13.945312 14.929688 14.304688 14.808594 14.519531 14.386719 C 14.820312 13.847656 13.859375 13.234375 13.464844 13.703125 Z M 13.464844 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.433594 13.753906 C 14.890625 14.292969 15.636719 15.121094 16.273438 14.699219 C 16.585938 14.496094 16.667969 13.957031 16.414062 13.703125 C 16.210938 13.5 15.648438 13.523438 15.433594 13.753906 Z M 15.433594 13.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.398438 13.789062 C 17.195312 14.171875 17.269531 14.507812 17.578125 14.710938 C 18.167969 15.097656 18.828125 14.4375 18.480469 13.8125 C 18.300781 13.476562 17.578125 13.464844 17.398438 13.789062 Z M 17.398438 13.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.378906 13.800781 C 18.898438 14.339844 19.621094 15.109375 20.230469 14.699219 C 20.542969 14.496094 20.628906 13.957031 20.375 13.703125 C 20.160156 13.488281 19.621094 13.535156 19.378906 13.800781 Z M 19.378906 13.800781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.449219 15.78125 C 5.269531 16.054688 5.269531 16.105469 5.449219 16.378906 C 5.773438 16.882812 6.480469 16.691406 6.480469 16.105469 C 6.480469 15.445312 5.808594 15.238281 5.449219 15.78125 Z M 5.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.464844 15.625 C 7.199219 15.886719 7.285156 16.429688 7.609375 16.585938 C 7.980469 16.753906 8.242188 16.644531 8.425781 16.261719 C 8.53125 16.007812 8.519531 15.925781 8.339844 15.71875 C 8.101562 15.457031 7.679688 15.40625 7.464844 15.625 Z M 7.464844 15.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.40625 15.78125 C 9.226562 16.054688 9.226562 16.105469 9.40625 16.378906 C 9.757812 16.90625 10.441406 16.714844 10.441406 16.078125 C 10.441406 15.445312 9.757812 15.253906 9.40625 15.78125 Z M 9.40625 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.449219 15.78125 C 11.269531 16.054688 11.269531 16.105469 11.449219 16.378906 C 11.773438 16.882812 12.480469 16.691406 12.480469 16.105469 C 12.480469 15.445312 11.808594 15.238281 11.449219 15.78125 Z M 11.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.511719 15.671875 C 13.402344 15.769531 13.320312 15.960938 13.320312 16.078125 C 13.320312 16.597656 13.96875 16.859375 14.328125 16.488281 C 14.4375 16.390625 14.519531 16.199219 14.519531 16.078125 C 14.519531 15.960938 14.4375 15.769531 14.328125 15.671875 C 14.230469 15.5625 14.039062 15.480469 13.921875 15.480469 C 13.800781 15.480469 13.609375 15.5625 13.511719 15.671875 Z M 13.511719 15.671875 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.503906 15.625 C 15.277344 15.851562 15.324219 16.414062 15.589844 16.558594 C 15.960938 16.753906 16.175781 16.703125 16.390625 16.378906 C 16.570312 16.105469 16.570312 16.054688 16.390625 15.78125 C 16.175781 15.457031 15.742188 15.382812 15.503906 15.625 Z M 15.503906 15.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.449219 15.78125 C 17.269531 16.054688 17.269531 16.105469 17.449219 16.378906 C 17.796875 16.90625 18.480469 16.714844 18.480469 16.078125 C 18.480469 15.445312 17.796875 15.253906 17.449219 15.78125 Z M 17.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.414062 17.820312 C 7.296875 18.085938 7.308594 18.167969 7.535156 18.382812 C 7.753906 18.613281 7.835938 18.625 8.101562 18.503906 C 8.292969 18.40625 8.398438 18.265625 8.398438 18.085938 C 8.398438 17.484375 7.65625 17.292969 7.414062 17.820312 Z M 7.414062 17.820312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.480469 17.699219 C 9.394531 17.796875 9.359375 18 9.40625 18.167969 C 9.539062 18.707031 10.261719 18.707031 10.390625 18.167969 C 10.488281 17.808594 10.261719 17.519531 9.898438 17.519531 C 9.757812 17.519531 9.5625 17.605469 9.480469 17.699219 Z M 9.480469 17.699219 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.542969 17.664062 C 11.292969 17.914062 11.375 18.347656 11.699219 18.503906 C 12.15625 18.707031 12.589844 18.277344 12.382812 17.820312 C 12.226562 17.496094 11.796875 17.410156 11.542969 17.664062 Z M 11.542969 17.664062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.597656 17.605469 C 13.402344 17.675781 13.390625 18.265625 13.585938 18.457031 C 13.800781 18.671875 14.125 18.625 14.328125 18.347656 C 14.675781 17.84375 14.195312 17.351562 13.597656 17.605469 Z M 13.597656 17.605469 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.457031 17.820312 C 15.335938 18.085938 15.347656 18.167969 15.574219 18.382812 C 15.792969 18.613281 15.875 18.625 16.140625 18.503906 C 16.332031 18.40625 16.441406 18.265625 16.441406 18.085938 C 16.441406 17.484375 15.695312 17.292969 15.457031 17.820312 Z M 15.457031 17.820312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.550781 19.789062 C 9.277344 20.089844 9.480469 20.519531 9.898438 20.519531 C 10.296875 20.519531 10.488281 20.160156 10.246094 19.824219 C 10.019531 19.5 9.816406 19.488281 9.550781 19.789062 Z M 9.550781 19.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.59375 19.753906 C 11.21875 20.113281 11.496094 20.578125 12.023438 20.496094 C 12.335938 20.460938 12.46875 20.003906 12.238281 19.726562 C 12.046875 19.511719 11.820312 19.511719 11.59375 19.753906 Z M 11.59375 19.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.632812 19.714844 C 13.199219 20.027344 13.679688 20.722656 14.136719 20.449219 C 14.425781 20.257812 14.460938 19.90625 14.207031 19.714844 C 14.089844 19.632812 13.957031 19.558594 13.921875 19.558594 C 13.882812 19.558594 13.753906 19.632812 13.632812 19.714844 Z M 13.632812 19.714844 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.566406 22.019531 C 11.460938 22.296875 11.605469 22.558594 11.855469 22.558594 C 12.15625 22.558594 12.382812 22.285156 12.289062 22.03125 C 12.191406 21.792969 11.652344 21.78125 11.566406 22.019531 Z M 11.566406 22.019531 "/>'})}return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)(l["\u0275\u0275inject"](g.L))},imports:[Object(i.e)(ni,[o.c,Jn,qn.a,g.y,g.M,g.O,g.r,g.m,g.Pb,g.A,g.lb,g.Kb,g.j,Ae.w,g.Y,pe.e,g.lb,g.J,g.O,g.bb,Ve.c,g.Eb,Le,Ne.c,g.Mb,ti.LightboxModule,ei.d,g.ub,g.ib,g.p,Fe.d,g.fb,bt.forRoot(),g.E.forChild(),g.Qb.forChild(),Wt.withConfig({accessToken:Qn.a.mapBoxToken,geocoderAccessToken:""})])]}),t}()},"9/5/":function(t,e){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),h=Object.prototype.toString,u=Math.max,d=Math.min,p=function(){return c.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==h.call(t)}(t))return NaN;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=o.test(t);return s||r.test(t)?a(t.slice(2),s?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var i,o,r,a,s,l,c=0,h=!1,f=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function y(t){return c=t,s=setTimeout(C,e),h?b(t):a}function _(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=r}function C(){var t=p();if(_(t))return x(t);s=setTimeout(C,function(t){var n=e-(t-l);return f?d(n,r-(t-c)):n}(t))}function x(t){return s=void 0,v&&i?b(t):(i=o=void 0,a)}function w(){var t=p(),n=_(t);if(i=arguments,o=this,l=t,n){if(void 0===s)return y(l);if(f)return s=setTimeout(C,e),b(l)}return void 0===s&&(s=setTimeout(C,e)),a}return e=m(e)||0,g(n)&&(h=!!n.leading,r=(f="maxWait"in n)?u(m(n.maxWait)||0,e):r,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=o=s=void 0},w.flush=function(){return void 0===s?a:x(p())},w}},"9OXO":function(t,e,n){"use strict";n.d(e,"a",(function(){return ut}));var i=n("m3o8"),o=(n("ZgVZ"),n("tk/3")),r=n("UsXk"),a=n("mrSG"),s=n("g+oh"),l=n("vkgz"),c=n("JIr8"),h=n("lJxs"),u=n("w8jS"),d=n("fXoL"),p=n("aceb"),g=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i}return Object(a.c)(e,t),e.prototype.addColumn=function(t){var e=this;return this._http.post("columns",t).pipe(Object(l.a)((function(n){return e.log("create Column id="+t.id)})),Object(c.a)(this.handleError("addCategory")))},e.prototype.deleteColumn=function(t){var e=this,n="number"==typeof t?t:t.id,i=function(t){return"columns/"+t}(n);return this._http.delete(i).pipe(Object(l.a)((function(t){return e.log("deleted col id="+n)})),Object(c.a)(this.handleError("deleteCol")))},e.prototype.deleteFile=function(t){var e=this,n="number"==typeof t?t:t.id,i=function(t){return"columns/file/"+t}(n);return this._http.delete(i).pipe(Object(l.a)((function(t){return e.log("deleted file id="+n)})))},e.prototype.uploadFiles=function(t){var e=this;return this._http.postFormData("columns/files",t,{reportProgress:!0,observe:"events"}).pipe(Object(l.a)((function(t){return e.log("files uploaded files ")})))},e.prototype.getAll=function(){var t=this;return this._http.get("columns").pipe(Object(l.a)((function(e){return t.log("Fetched Column")})),Object(c.a)(this.handleError("getAll",[])),Object(h.a)((function(t){return t.map((function(t){return(new r.a).deserialize(t)}))})))},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](u.a),d["\u0275\u0275inject"](p.Ib))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(s.a),m=n("mvqV"),f=n("ofXK"),v=n("kvL/");function b(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",25),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2),e=t.$implicit,i=t.index;return d["\u0275\u0275nextContext"]().editColumn(e,i)})),d["\u0275\u0275element"](1,"nb-icon",26),d["\u0275\u0275elementEnd"]()}}function y(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",22),d["\u0275\u0275elementStart"](1,"nb-form-field"),d["\u0275\u0275elementStart"](2,"input",23),d["\u0275\u0275listener"]("keyup",(function(t){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"]().onKeyUpdate(t,e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,b,2,0,"a",24),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",i.name),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}function _(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"div",22),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("",n.id," ",n.name,"")}}function C(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",27),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().$implicit;return t.editing=!t.editing})),d["\u0275\u0275element"](1,"nb-icon",28),d["\u0275\u0275elementEnd"]()}}function x(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",29),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return d["\u0275\u0275nextContext"]().deleteColumn(e,i)})),d["\u0275\u0275element"](1,"nb-icon",30),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275property"]("disabled",i.files_count>0)}}function w(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-radio",17),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit;return d["\u0275\u0275nextContext"]().setOption(t)})),d["\u0275\u0275template"](1,y,4,2,"div",18),d["\u0275\u0275template"](2,_,2,2,"div",18),d["\u0275\u0275elementStart"](3,"div",19),d["\u0275\u0275template"](4,C,2,0,"a",20),d["\u0275\u0275template"](5,x,2,1,"a",21),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275property"]("value",i.id),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.editing)}}function I(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"nb-progress-bar",31),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("value",n.progress),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](n.progress)}}function A(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"p"),d["\u0275\u0275text"](1,"Los Archivos se guardar\xe1n en: "),d["\u0275\u0275elementStart"](2,"b"),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](n.selectedOption.name)}}function P(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ngx-dropzone-preview",32),d["\u0275\u0275listener"]("removed",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit;return d["\u0275\u0275nextContext"]().onRemove(t)})),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275element"](2,"nb-icon",33),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275property"]("removable",!0),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](i.name)}}var O=function(){function t(t,e){var n=this;this._colService=t,this._stationsService=e,this.columns=[],this.column=new r.a,this.editing=!1,this.selectedOption=null,this.searchText="",this.showPassword=!0,this.files=[],this._colService.getAll().subscribe((function(t){n.columns=t}))}return t.prototype.ngOnInit=function(){},t.prototype.getInputType=function(){return this.showPassword?"text":"password"},t.prototype.onKey=function(t){this.searchText=t.target.value},t.prototype.onKeyUpdate=function(t,e){e.name=t.target.value},t.prototype.addColumn=function(){var t=this;this.column.name=this.searchText,this._colService.addColumn(this.column).subscribe({next:function(e){e&&(t.columns.push(e),t._colService.showToast("top right","success","Categoria Agregada"))}})},t.prototype.editColumn=function(t,e){var n=this;this._colService.addColumn(t).subscribe({next:function(i){i&&(Object.assign(n.columns[e],i),t.editing=!1,n._colService.showToast("top right","success","Editado correctamente"))}})},t.prototype.deleteColumn=function(t,e){var n=this;this._colService.deleteColumn(t).subscribe({next:function(t){t&&(n.columns.splice(e,1),n._colService.showToast("top right","success","Eliminado Correctamente"))}})},t.prototype.setOption=function(t){this.selectedOption=t},t.prototype.onSelect=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.prototype.uploadFiles=function(){var t=this;if(this.selectedOption){var e=this._stationsService.toFormData(this._station);this.files.map((function(t){return e.append("files[]",t)})),e.append("columns[id]",""+this.selectedOption.id),e.append("columns[name]",""+this.selectedOption.name),this.loading=!0,this._stationsService.uploadFiles(e).subscribe({next:function(e){var n,i;if(e.type===o.e.UploadProgress&&(t.progress=Math.round(100*e.loaded/e.total)),e.type===o.e.Response){if(t.progress=0,e.error)t._stationsService.showToast("top left","danger",e.error);else{t._stationsService.showToast("top left","success","Actualizado correctamente"),t.files=[],t._station.columns=[];var a=e.body.imgFiles.map((function(t){return(new r.a).deserialize(t)})),s=e.body.otherFiles.map((function(t){return(new r.a).deserialize(t)}));(n=t._station.otherFiles).push.apply(n,s),(i=t._station.imgFiles).push.apply(i,a)}t.progress=0,t.loading=!1}},error:function(e){t.loading=!1,t.progress=0,t._station.columns=[],t._stationsService.showToast("top left","danger",e)}})}else this._stationsService.showToast("top left","danger","debe seleccionar una opcion")},t.prototype.onRemove=function(t){this.files.splice(this.files.indexOf(t),1)},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](g),d["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-add-files"]],inputs:{_station:"_station"},decls:32,vars:9,consts:[["size","large","nbSpinnerSize","tiny","nbSpinnerStatus","primary",3,"nbSpinner"],[1,"row"],[1,"col-sm-4"],[1,"row","mx-auto"],["fieldSize","small","fullWidth","","shape","round","type","text","nbInput","",3,"keyup"],["size","small","nbSuffix","","nbButton","",3,"click"],["icon","plus","pack","eva"],["name","columns","status","info",1,"mt-4"],["class","d-flex justify-content-between",3,"value","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-sm-8","d-flex","flex-column","justify-content-between"],["outline","","nbButton","","fullWidth","","status","info ",1,"shadow-sm",3,"disabled","click"],["icon","save-outline "],["status","success",3,"value",4,"ngIf"],[4,"ngIf"],[1,"mt-4",3,"expandable","disabled","change"],["icon","cloud-upload-outline"],[3,"removable","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between",3,"value","click"],["class","d-flex",4,"ngIf"],["status","success",1,"d-flex","justify-content-between"],["status","info","ghost","","nbButton","",3,"click",4,"ngIf"],["ghost","","nbButton","",3,"disabled","click",4,"ngIf"],[1,"d-flex"],["fieldSize","small","shape","round","type","text","nbInput","",3,"value","keyup"],["ghost","","nbButton","",3,"click",4,"ngIf"],["ghost","","nbButton","",3,"click"],["icon","save-outline"],["status","info","ghost","","nbButton","",3,"click"],["icon","edit-2-outline"],["ghost","","nbButton","",3,"disabled","click"],["icon","trash-2-outline"],["status","success",3,"value"],[3,"removable","removed"],["icon","file-outline"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-body",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"nb-card"),d["\u0275\u0275elementStart"](4,"nb-card-header"),d["\u0275\u0275elementStart"](5,"h6",3),d["\u0275\u0275text"](6,"Agregar Archivos: "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-form-field"),d["\u0275\u0275elementStart"](8,"input",4),d["\u0275\u0275listener"]("keyup",(function(t){return e.onKey(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"button",5),d["\u0275\u0275listener"]("click",(function(){return e.addColumn()})),d["\u0275\u0275element"](10,"nb-icon",6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"p"),d["\u0275\u0275elementStart"](12,"b"),d["\u0275\u0275text"](13,"1. Selecciona una Opci\xf3n:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"nb-card-body"),d["\u0275\u0275elementStart"](15,"nb-radio-group",7),d["\u0275\u0275template"](16,w,6,5,"nb-radio",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"div",9),d["\u0275\u0275elementStart"](18,"nb-card"),d["\u0275\u0275elementStart"](19,"nb-card-header"),d["\u0275\u0275elementStart"](20,"button",10),d["\u0275\u0275listener"]("click",(function(){return e.uploadFiles()})),d["\u0275\u0275element"](21,"nb-icon",11),d["\u0275\u0275text"](22,"Guardar"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"nb-card-body"),d["\u0275\u0275template"](24,I,2,2,"nb-progress-bar",12),d["\u0275\u0275template"](25,A,4,1,"p",13),d["\u0275\u0275elementStart"](26,"ngx-dropzone",14),d["\u0275\u0275listener"]("change",(function(t){return e.onSelect(t)})),d["\u0275\u0275elementStart"](27,"ngx-dropzone-label"),d["\u0275\u0275element"](28,"nb-icon",15),d["\u0275\u0275elementStart"](29,"b"),d["\u0275\u0275text"](30," 2. Arrastre sus archivos"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](31,P,4,2,"ngx-dropzone-preview",16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275property"]("nbSpinner",e.loading),d["\u0275\u0275advance"](16),d["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByFn),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("disabled",null===e.selectedOption),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",e.progress>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.selectedOption),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("expandable",!0)("disabled",!e.selectedOption),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngForOf",e.files))},directives:[p.u,p.tb,p.t,p.x,p.I,p.N,p.q,p.Ab,p.K,p.kb,f.l,f.m,v.a,v.e,p.jb,p.hb,v.d],styles:[".nb-theme-default   [_nghost-%COMP%]     label, .nb-theme-default   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-default   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-dark   [_nghost-%COMP%]     label, .nb-theme-dark   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-dark   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-cosmic   [_nghost-%COMP%]     label, .nb-theme-cosmic   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-corporate   [_nghost-%COMP%]     label, .nb-theme-corporate   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-corporate   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-material-dark   [_nghost-%COMP%]     label, .nb-theme-material-dark   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-material-light   [_nghost-%COMP%]     label, .nb-theme-material-light   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-material-light   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-obsrio   [_nghost-%COMP%]     label, .nb-theme-obsrio   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}"]}),t}(),M=n("EnSh"),k=n("5+WD"),S=n("lWTH"),E=n("QJFE");function T(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](3).$implicit;return d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](4).showFileSelector(),t.editing=!0})),d["\u0275\u0275element"](1,"nb-icon",38),d["\u0275\u0275elementEnd"]()}}function R(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](3),e=t.$implicit,i=t.index,o=d["\u0275\u0275nextContext"](2);return o.editFile(e,i,o._marker.imgFiles)})),d["\u0275\u0275element"](1,"nb-icon",39),d["\u0275\u0275elementEnd"]()}}function L(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](3).$implicit.editing=!1})),d["\u0275\u0275text"](1," cancelar "),d["\u0275\u0275elementEnd"]()}}function z(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card-footer"),d["\u0275\u0275elementStart"](1,"nb-actions",35),d["\u0275\u0275elementStart"](2,"nb-action",36),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2),d["\u0275\u0275reference"](3).fire()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,T,2,0,"nb-action",17),d["\u0275\u0275template"](4,R,2,0,"nb-action",17),d["\u0275\u0275template"](5,L,2,0,"nb-action",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2).$implicit;d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}var B=function(){return["Manage Stations","all"]};function j(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card",29),d["\u0275\u0275elementStart"](1,"nb-card-header",1),d["\u0275\u0275element"](2,"img",30),d["\u0275\u0275elementStart"](3,"span",31),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"nb-action",32),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](2).open(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"nb-card-body",33),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](2).open(t)})),d["\u0275\u0275element"](7,"img",34),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](8,z,6,3,"nb-card-footer",14),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](i.name),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("src",i.file_path,d["\u0275\u0275sanitizeUrl"])("alt",i.name),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](4,B))}}var D=function(){return{confirmButtonText:"Borrar"}};function F(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275template"](1,j,9,5,"nb-card",26),d["\u0275\u0275elementStart"](2,"swal",27,28),d["\u0275\u0275listener"]("confirm",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,o=d["\u0275\u0275nextContext"](2);return o.deleteFile(t,i,o._marker.imgFiles)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.active),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",d["\u0275\u0275pureFunction0"](4,D))}}function V(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",40),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275text"](2," Vista Previa"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("file",e.$implicit)}function N(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-tab",20),d["\u0275\u0275elementStart"](1,"div",21),d["\u0275\u0275template"](2,F,4,5,"ng-container",22),d["\u0275\u0275elementStart"](3,"ngx-dropzone",23,24),d["\u0275\u0275listener"]("change",(function(t){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().onSelect(t)})),d["\u0275\u0275template"](5,V,3,1,"ngx-dropzone-image-preview",25),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i._marker.imgFiles),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("multiple",!1)("accept","image/*"),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i.files)}}function $(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",40),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275text"](2," Vista Previa"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("file",e.$implicit)}function Z(t,e){1&t&&d["\u0275\u0275element"](0,"img",57)}function G(t,e){1&t&&d["\u0275\u0275element"](0,"img",57)}function W(t,e){1&t&&d["\u0275\u0275element"](0,"img",58)}function H(t,e){1&t&&d["\u0275\u0275element"](0,"img",59)}function K(t,e){1&t&&d["\u0275\u0275element"](0,"img",60)}function U(t,e){1&t&&d["\u0275\u0275element"](0,"img",61)}function X(t,e){1&t&&d["\u0275\u0275element"](0,"img",62)}function Y(t,e){1&t&&d["\u0275\u0275element"](0,"img",63)}function J(t,e){1&t&&d["\u0275\u0275element"](0,"img",64)}function q(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",46),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"](2).openFile(t,!0)})),d["\u0275\u0275elementContainerStart"](1,47),d["\u0275\u0275template"](2,Z,1,0,"img",48),d["\u0275\u0275template"](3,G,1,0,"img",48),d["\u0275\u0275template"](4,W,1,0,"img",49),d["\u0275\u0275template"](5,H,1,0,"img",50),d["\u0275\u0275template"](6,K,1,0,"img",51),d["\u0275\u0275template"](7,U,1,0,"img",52),d["\u0275\u0275template"](8,X,1,0,"img",53),d["\u0275\u0275template"](9,Y,1,0,"img",54),d["\u0275\u0275template"](10,J,1,0,"img",55),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementStart"](11,"div",56),d["\u0275\u0275elementStart"](12,"p"),d["\u0275\u0275text"](13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275property"]("nbTooltip",i.icon),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitch",i.icon),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","txt"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","csv"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","pdf"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","docx"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","ppt"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","xlsx"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","png"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","jpg"),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](i.name)}}function Q(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2).$implicit;return d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](3).showFileSelector(),t.editing=!0})),d["\u0275\u0275element"](1,"nb-icon",38),d["\u0275\u0275elementEnd"]()}}function tt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2),e=t.$implicit,i=t.index,o=d["\u0275\u0275nextContext"](2);return o.editFile(e,i,o._marker.otherFiles)})),d["\u0275\u0275element"](1,"nb-icon",39),d["\u0275\u0275elementEnd"]()}}function et(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).$implicit.editing=!1})),d["\u0275\u0275text"](1," cancelar "),d["\u0275\u0275elementEnd"]()}}function nt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"nb-actions",35),d["\u0275\u0275elementStart"](2,"nb-action",36),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](5).fire()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,Q,2,0,"nb-action",17),d["\u0275\u0275template"](4,tt,2,0,"nb-action",17),d["\u0275\u0275template"](5,et,2,0,"nb-action",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}function it(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"div",44),d["\u0275\u0275template"](2,q,14,11,"a",45),d["\u0275\u0275template"](3,nt,6,3,"div",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"swal",27,28),d["\u0275\u0275listener"]("confirm",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,o=d["\u0275\u0275nextContext"](2);return o.deleteFile(t,i,o._marker.otherFiles)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",i.active),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](5,B)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",d["\u0275\u0275pureFunction0"](6,D))}}function ot(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-tab",41),d["\u0275\u0275elementStart"](1,"div",42),d["\u0275\u0275elementStart"](2,"ngx-dropzone",43,24),d["\u0275\u0275listener"]("change",(function(t){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().onSelect(t)})),d["\u0275\u0275template"](4,$,3,1,"ngx-dropzone-image-preview",25),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](5,it,6,7,"ng-container",22),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("multiple",!1),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i.files),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",i._marker.otherFiles)}}function rt(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"nb-tab",65),d["\u0275\u0275elementStart"](1,"p"),d["\u0275\u0275text"](2,"Prontro encontrar\xe1s aqu\xed m\xe1s informaci\xf3n sobre esta estaci\xf3n."),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function at(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"nb-card-back"),d["\u0275\u0275elementStart"](1,"nb-card",66),d["\u0275\u0275elementStart"](2,"nb-card-body"),d["\u0275\u0275element"](3,"ngx-add-files",67),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("_station",n._marker)}}function st(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().saveFiles()})),d["\u0275\u0275element"](1,"nb-icon",68),d["\u0275\u0275elementEnd"]()}}function lt(t,e){1&t&&d["\u0275\u0275element"](0,"nb-icon",71)}function ct(t,e){1&t&&d["\u0275\u0275element"](0,"nb-icon",72)}function ht(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",37),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().toggleCard()})),d["\u0275\u0275template"](1,lt,1,0,"nb-icon",69),d["\u0275\u0275template"](2,ct,1,0,"nb-icon",70),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.showCard),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.showCard)}}var ut=function(){function t(t,e,n,i,o){this._lightbox=t,this._dialogRef=e,this._httpClient=n,this._FileSaverService=i,this._colService=o,this.isEditing=!1,this.shadow=!1,this.showCard=!1,this.files=[]}return t.prototype.ngOnInit=function(){},t.prototype.open=function(t){this._lightbox.open(this._marker.imgFiles,t)},t.prototype.deleteFile=function(t,e,n){var i=this;this._colService.deleteFile(t).subscribe({next:function(t){t&&(i._colService.showToast("top left","success","Actualizado correctamente"),n.splice(e,1))},error:function(t){i._colService.showToast("top left","danger",t)}})},t.prototype.setEdit=function(){this.isEditing=this.files.length>0},t.prototype.editFile=function(t,e,n){var i=this;this.isEditing=!0;var r=this._colService.toFormData(t);this.files.map((function(t){return r.append("file",t)})),this.loading=!0,this._colService.uploadFiles(r).subscribe({next:function(r){r.type===o.e.UploadProgress&&(i.progress=Math.round(100*r.loaded/r.total)),r.type===o.e.Response&&(i.progress=0,r.error?(i._colService.showToast("top left","danger",r.error),i.setEdit(),t.editing=!1):(i._colService.showToast("top left","success","Actualizado correctamente"),i.files=[],i.setEdit(),t.editing=!1,Object.assign(n[e],r.body)),i.progress=0,i.loading=!1,i.setEdit(),t.editing=!1)},error:function(t){i.loading=!1,i.progress=0,i.isEditing=!1,i._colService.showToast("top left","danger",t)}})},t.prototype.openFile=function(t,e){var n=this,i="."+t.name+"."+t.icon;e&&this._httpClient.get(t.file_path,{observe:"response",responseType:"blob"}).subscribe((function(t){n._FileSaverService.save(t.body,i)}))},t.prototype.toggleCard=function(){this.showCard=!this.showCard},t.prototype.close=function(){this._lightbox.close()},t.prototype.closeModal=function(){this._dialogRef.close()},t.prototype.getBg=function(t){return"url("+t.src+")"},t.prototype.saveFiles=function(){this.child.uploadFiles()},t.prototype.onRemove=function(t){this.files.splice(this.files.indexOf(t),1)},t.prototype.onSelect=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](i.Lightbox),d["\u0275\u0275directiveInject"](p.F),d["\u0275\u0275directiveInject"](o.b),d["\u0275\u0275directiveInject"](M.b),d["\u0275\u0275directiveInject"](g))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-station-view"]],viewQuery:function(t,e){var n;1&t&&d["\u0275\u0275viewQuery"](O,!0),2&t&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(e.child=n.first)},inputs:{_marker:"_marker"},decls:27,vars:12,consts:[["cdkDrag","",1,"card-station","modal-content"],[1,"d-flex","justify-content-between"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["width","50","alt","icon",2,"z-index","10",3,"src"],["icon","close",3,"click"],[1,"shadow-none",3,"showToggleButton","revealed"],["accent","success"],["fullWidth",""],["tabTitle","Gr\xe1ficos","tabIcon","person-outline",4,"ngIf"],["tabTitle","Archivos","tabIcon","bell-outline",4,"ngIf"],["tabTitle","Informaci\xf3n","tabIcon","bell-outline",4,"ngIf"],[4,"nbIsGranted"],[1,"d-flex","justify-content-end"],["size","small","fullWidth",""],[3,"click",4,"ngIf"],[3,"click",4,"nbIsGranted"],["width","150","src","assets/img/logo.jpg","alt","logo obs"],["tabTitle","Gr\xe1ficos","tabIcon","person-outline"],[1,"d-flex","justify-content-center","flex-wrap"],[4,"ngFor","ngForOf"],[1,"drop-zone-fixed",3,"multiple","accept","change"],["drop",""],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file",4,"ngFor","ngForOf"],["class","card-picture ml-2 mt-3 align-items-stretch d-flex   align-self-stretch","size","small",4,"ngIf"],["title","Desea Borrar este archivo?","text","El archivo borrado no se podr\xe1 recuperar","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],["size","small",1,"card-picture","ml-2","mt-3","align-items-stretch","d-flex","align-self-stretch"],["width","24","height","24","src","assets/img/favicon.png"],[1,"cut-text"],["icon","expand-outline",3,"click"],[1,"picture",3,"click"],[1,"mt-1",3,"src","alt"],["size","tiny","fullWidth",""],["icon","trash-2-outline",3,"click"],[3,"click"],["icon","edit-2-outline","status","info"],["icon","save-outline","status","success"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file"],["tabTitle","Archivos","tabIcon","bell-outline"],[1,"d-flex","justify-content-start","flex-column",2,"max-width","100%"],[1,"drop-zone-fixed",3,"multiple","change"],[1,"row","d-flex","justify-content-between"],["nbTooltipStatus","primary","status","primary","class","ml-4 justify-content-start ","size","tiny","ghost","","nbButton","",3,"nbTooltip","click",4,"ngIf"],["nbTooltipStatus","primary","status","primary","size","tiny","ghost","","nbButton","",1,"ml-4","justify-content-start",3,"nbTooltip","click"],[3,"ngSwitch"],["width","32","src","assets/img/icons/csv.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/pdf.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/word.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/ppt.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/xls.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/png.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/jpg.ico",4,"ngSwitchCase"],["width","32","src","assets/img/icons/file.png",4,"ngSwitchDefault"],[1,"details"],["width","32","src","assets/img/icons/csv.png"],["width","32","src","assets/img/icons/pdf.png"],["width","32","src","assets/img/icons/word.png"],["width","32","src","assets/img/icons/ppt.png"],["width","32","src","assets/img/icons/xls.png"],["width","32","src","assets/img/icons/png.png"],["width","32","src","assets/img/icons/jpg.ico"],["width","32","src","assets/img/icons/file.png"],["tabTitle","Informaci\xf3n","tabIcon","bell-outline"],["status","control"],[3,"_station"],["status","success","icon","save-outline"],["icon","cloud-upload-outline",4,"ngIf"],["icon","close",4,"ngIf"],["icon","cloud-upload-outline"],["icon","close"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-header",1),d["\u0275\u0275text"](2),d["\u0275\u0275elementStart"](3,"nb-actions"),d["\u0275\u0275elementStart"](4,"nb-action"),d["\u0275\u0275elementStart"](5,"div",2),d["\u0275\u0275namespaceSVG"](),d["\u0275\u0275elementStart"](6,"svg",3),d["\u0275\u0275element"](7,"path",4),d["\u0275\u0275element"](8,"path",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275namespaceHTML"](),d["\u0275\u0275elementStart"](9,"nb-action"),d["\u0275\u0275element"](10,"img",6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"nb-action",7),d["\u0275\u0275listener"]("click",(function(){return e.closeModal()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"nb-card-body"),d["\u0275\u0275elementStart"](13,"nb-reveal-card",8),d["\u0275\u0275elementStart"](14,"nb-card-front"),d["\u0275\u0275elementStart"](15,"nb-card",9),d["\u0275\u0275elementStart"](16,"nb-tabset",10),d["\u0275\u0275template"](17,N,6,4,"nb-tab",11),d["\u0275\u0275template"](18,ot,6,3,"nb-tab",12),d["\u0275\u0275template"](19,rt,3,0,"nb-tab",13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](20,at,4,1,"nb-card-back",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"nb-card-footer",15),d["\u0275\u0275elementStart"](22,"nb-actions",16),d["\u0275\u0275template"](23,st,2,0,"nb-action",17),d["\u0275\u0275template"](24,ht,3,2,"nb-action",18),d["\u0275\u0275elementStart"](25,"nb-action"),d["\u0275\u0275element"](26,"img",19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",e._marker.name," "),d["\u0275\u0275advance"](8),d["\u0275\u0275propertyInterpolate"]("src",e._marker.icon,d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("showToggleButton",!1)("revealed",e.showCard),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",e._marker.imgFiles.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e._marker.otherFiles.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",0==e._marker.files.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](10,B)),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",e.showCard),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](11,B)))},directives:[p.u,k.a,p.x,p.l,p.k,k.b,p.t,p.mb,p.w,p.Db,f.m,S.c,p.v,p.Cb,f.l,v.a,E.a,p.K,v.b,v.e,p.q,p.Lb,f.o,f.p,f.q,p.s,O],styles:[".nb-theme-default   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-default   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-default   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-default   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-default   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-dark   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-dark   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-dark   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-cosmic   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-cosmic   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-cosmic   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-corporate   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-corporate   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-corporate   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-corporate   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-material-dark   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-material-dark   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-material-dark   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-material-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-material-dark   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-material-light   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-material-light   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-material-light   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-material-light   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-material-light   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}.nb-theme-obsrio   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-obsrio   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-obsrio   [_nghost-%COMP%]     nb-tab{width:100%;height:100%;min-width:70em;min-height:65vh;max-width:90em;max-height:67vh}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-obsrio   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-obsrio   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:160px;height:1.2em;white-space:nowrap}"]}),t}()},AxvH:function(t,e,n){"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],i=e[2].split(";"),o=null,r=i.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(o||(o=n.value),t):(t[n.key]=n.value,t):t}),{});return o?{url:n,rel:o,params:r}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}}},Bi8L:function(t,e,n){"use strict";var i=n("R/WN");window.Suggestions=t.exports=i},CH9F:function(t,e,n){var i=n("P7XM"),o=n("tnIz"),r=n("hwdV").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(t){return t<<30|t>>>2}function h(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(l,o),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,o=0|this._b,r=0|this._c,s=0|this._d,l=0|this._e,u=0;u<16;++u)n[u]=t.readInt32BE(4*u);for(;u<80;++u)n[u]=n[u-3]^n[u-8]^n[u-14]^n[u-16];for(var d=0;d<80;++d){var p=~~(d/20),g=0|((e=i)<<5|e>>>27)+h(p,o,r,s)+l+n[d]+a[p];l=s,s=r,r=c(o),o=i,i=g}this._a=i+this._a|0,this._b=o+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},Cu2R:function(t,e,n){"use strict";var i=n("ncV3"),o=n("KXza");t.exports=function(t){return function(e){var n;n=i.prototype.isPrototypeOf(e)?e:o(e);var r=Object.create(t);return r.client=n,r}}},EnSh:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return s}));var i=n("PbCK"),o=n("u6We"),r=n("fXoL"),a=n("Iab2"),s=(n("tk/3"),function(){var t=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,[{key:"genType",value:function(t){if(!t||-1===t.lastIndexOf("."))return"text/plain";var e=t.substr(t.lastIndexOf(".")+1);switch(e){case"txt":return"text/plain";case"xml":case"html":return"text/".concat(e);case"json":return"octet/stream";default:return"application/".concat(e)}}},{key:"save",value:function(t,e,n,i){if(!t)throw new Error("Data argument should be a blob instance");var o=new Blob([t],{type:n||t.type||this.genType(e)});Object(a.saveAs)(o,decodeURI(e||"download"),i)}},{key:"saveText",value:function(t,e,n){var i=new Blob([t]);this.save(i,e,null,n)}},{key:"isFileSaverSupported",get:function(){try{return!!new Blob}catch(t){return!1}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t}()),l=function(){var t=function t(){Object(i.a)(this,t)};return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)}}),t}()},H7XF:function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,i=c(t),a=i[0],s=i[1],l=new r(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),h=0,u=s>0?a-4:a;for(n=0;n<u;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,l[h++]=255&e),1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,r=[],a=0,s=n-o;a<s;a+=16383)r.push(h(t,a,a+16383>s?s:a+16383));return 1===o?r.push(i[(e=t[n-1])>>2]+i[e<<4&63]+"=="):2===o&&r.push(i[(e=(t[n-2]<<8)+t[n-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),r.join("")};for(var i=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],o[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var o,r=[],a=e;a<n;a+=3)r.push(i[(o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return r.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},Iab2:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){r(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,r,a){var s=o.URL||o.webkitURL,l=document.createElement("a");l.download=r=r||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):n(l.href)?e(t,r,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,r){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),o);else if(n(t))e(t,o,r);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){i(a)}))}}:function(t,n,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},c.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,u=h.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout((function(){h.revokeObjectURL(u)}),4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?i.apply(e,[]):i)||(t.exports=o)},KXza:function(t,e,n){"use strict";var i=n("oGbY"),o=n("ncV3");function r(t){o.call(this,t)}(r.prototype=Object.create(o.prototype)).constructor=r,r.prototype.sendRequest=i.browserSend,r.prototype.abortRequest=i.browserAbort,t.exports=function(t){return new r(t)}},KtRk:function(t,e,n){"use strict";var i=n("U6jy"),o=n("pit/");t.exports=i(o,{file:function(t){if("undefined"!=typeof window){if(t instanceof global.Blob||t instanceof global.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(n){return"date"}},coordinates:function(t){return o.tuple(o.number,o.number)(t)},assertShape:function(t,e){return o.assert(o.strictShape(t),e)}})},LFDd:function(t,e,n){"use strict";var i=n("U6jy"),o=n("KtRk"),r=n("baNz"),a=n("eFQn"),s=n("Cu2R"),l={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(t){o.assertShape({query:o.required(o.string),mode:o.oneOf("mapbox.places","mapbox.places-permanent"),countries:o.arrayOf(o.string),proximity:o.coordinates,types:o.arrayOf(o.oneOf(c)),autocomplete:o.boolean,bbox:o.arrayOf(o.number),limit:o.number,language:o.arrayOf(o.string)})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},r(t,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:r(t,["mode","query"]),query:e})},l.reverseGeocode=function(t){o.assertShape({query:o.required(o.coordinates),mode:o.oneOf("mapbox.places","mapbox.places-permanent"),countries:o.arrayOf(o.string),types:o.arrayOf(o.oneOf(c)),bbox:o.arrayOf(o.number),limit:o.number,language:o.arrayOf(o.string),reverseMode:o.oneOf("distance","score")})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},r(t,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:r(t,["mode","query"]),query:e})},t.exports=s(l)},"NkL+":function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===i.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},P7XM:function(t,e){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},"P8+q":function(t,e,n){var i;t.exports=i={},i.simpleFilter=function(t,e){return e.filter((function(e){return i.test(t,e)}))},i.test=function(t,e){return null!==i.match(t,e)},i.match=function(t,e,n){var i,o=0,r=[],a=e.length,s=0,l=0,c=(n=n||{}).pre||"",h=n.post||"",u=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var d=0;d<a;d++)i=e[d],u[d]===t[o]?(i=c+i+h,o+=1,l+=1+l):l=0,s+=l,r[r.length]=i;return o===t.length?(s=u===t?1/0:s,{rendered:r.join(""),score:s}):null},i.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce((function(e,o,r,a){var s=o;n.extract&&(s=n.extract(o));var l=i.match(t,s,n);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:r,original:o}),e}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))):[]}},"R/WN":function(t,e,n){"use strict";var i=n("U6jy"),o=n("P8+q"),r=n("SX8C"),a=function(t,e,n){return this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new r(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};a.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},a.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},a.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(t){this.data=t,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(t){return t.toLowerCase()},a.prototype.match=function(t,e){return t.indexOf(e)>-1},a.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?o.filter(this.query,this.data,e).map((function(t){return{original:t.original,string:this.render(t.original,t.string)}}).bind(this)):this.data.map((function(t){return{original:t,string:this.render(t)}}).bind(this)))},a.prototype.getItemValue=function(t){return t},a.prototype.render=function(t,e){if(e)return e;for(var n=this.getItemValue(t.original?t.original:t),i=this.normalize(n),o=i.lastIndexOf(this.query);o>-1;){var r=o+this.query.length;n=n.slice(0,o)+"<strong>"+n.slice(o,r)+"</strong>"+n.slice(r),o=i.slice(0,o).lastIndexOf(this.query)}return n},a.prototype.renderError=function(t){this.list.drawError(t)},t.exports=a},SX8C:function(t,e,n){"use strict";var i=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};i.prototype.show=function(){this.element.style.display="block"},i.prototype.hide=function(){this.element.style.display="none"},i.prototype.add=function(t){this.items.push(t)},i.prototype.clear=function(){this.items=[],this.active=0},i.prototype.isEmpty=function(){return!this.items.length},i.prototype.isVisible=function(){return"block"===this.element.style.display},i.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},i.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},i.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},i.prototype.move=function(t){this.active=t,this.draw()},i.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},i.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},i.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=i},"Smn/":function(t,e,n){"use strict";t.exports=function(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=e(i,t[i]),n}),{})}},SsYf:function(t,e){t.exports={"country.3148":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.3145":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.330":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.3179":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},T9HO:function(t,e,n){var i=n("P7XM"),o=n("tnIz"),r=n("hwdV").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function l(){this.init(),this._w=s,o.call(this,128,112)}function c(t,e,n){return n^t&(e^n)}function h(t,e,n){return t&e|n&(t|e)}function u(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function g(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function f(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}i(l,o),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(t){for(var e=this._w,n=0|this._ah,i=0|this._bh,o=0|this._ch,r=0|this._dh,s=0|this._eh,l=0|this._fh,b=0|this._gh,y=0|this._hh,_=0|this._al,C=0|this._bl,x=0|this._cl,w=0|this._dl,I=0|this._el,A=0|this._fl,P=0|this._gl,O=0|this._hl,M=0;M<32;M+=2)e[M]=t.readInt32BE(4*M),e[M+1]=t.readInt32BE(4*M+4);for(;M<160;M+=2){var k=e[M-30],S=e[M-30+1],E=p(k,S),T=g(S,k),R=m(k=e[M-4],S=e[M-4+1]),L=f(S,k),z=e[M-32],B=e[M-32+1],j=T+e[M-14+1]|0,D=E+e[M-14]+v(j,T)|0;D=(D=D+R+v(j=j+L|0,L)|0)+z+v(j=j+B|0,B)|0,e[M]=D,e[M+1]=j}for(var F=0;F<160;F+=2){D=e[F],j=e[F+1];var V=h(n,i,o),N=h(_,C,x),$=u(n,_),Z=u(_,n),G=d(s,I),W=d(I,s),H=a[F],K=a[F+1],U=c(s,l,b),X=c(I,A,P),Y=O+W|0,J=y+G+v(Y,O)|0;J=(J=(J=J+U+v(Y=Y+X|0,X)|0)+H+v(Y=Y+K|0,K)|0)+D+v(Y=Y+j|0,j)|0;var q=Z+N|0,Q=$+V+v(q,Z)|0;y=b,O=P,b=l,P=A,l=s,A=I,s=r+J+v(I=w+Y|0,w)|0,r=o,w=x,o=i,x=C,i=n,C=_,n=J+Q+v(_=Y+q|0,Y)|0}this._al=this._al+_|0,this._bl=this._bl+C|0,this._cl=this._cl+x|0,this._dl=this._dl+w|0,this._el=this._el+I|0,this._fl=this._fl+A|0,this._gl=this._gl+P|0,this._hl=this._hl+O|0,this._ah=this._ah+n+v(this._al,_)|0,this._bh=this._bh+i+v(this._bl,C)|0,this._ch=this._ch+o+v(this._cl,x)|0,this._dh=this._dh+r+v(this._dl,w)|0,this._eh=this._eh+s+v(this._el,I)|0,this._fh=this._fh+l+v(this._fl,A)|0,this._gh=this._gh+b+v(this._gl,P)|0,this._hh=this._hh+y+v(this._hl,O)|0},l.prototype._hash=function(){var t=r.allocUnsafe(64);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=l},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var o in i)n.call(i,o)&&(t[o]=i[o])}return t};var n=Object.prototype.hasOwnProperty},UsXk:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("AytR"),o=function(){function t(){}return t.prototype.deserialize=function(t){return t.file_path&&(t.file_path.includes(i.a.baseUrl.backend),t.src=t.file_path,t.thumb=t.file_path,t.caption="Imagen "+t.name),Object.assign(this,t),this},t}()},WpKc:function(t,e,n){"use strict";var i=n("afKu");function o(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="/events/v2",this.access_token=t.accessToken,this.version="0.0.1",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.lastSentInput="",this.lastSentIndex=0}o.prototype={select:function(t,e,n){var i=this.getSelectedIndex(t,e),o=this.getEventPayload("search.select",e);return o.resultIndex=i,i===this.lastSentIndex&&o.queryString===this.lastSentInput||-1==i?n?n():void 0:(this.lastSentIndex=i,this.lastSentInput=o.queryString,this.send(o,n))},start:function(t,e){var n=this.getEventPayload("search.start",t);return this.send(n,e)},send:function(t,e){if(e||(e=function(){}),!this.enableEventLogging)return e();var n=this.getRequestOptions(t);this.request(n,(function(t){return t?this.handleError(t,e):e?e():void 0}))},getRequestOptions:function(t){return{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify([t])}},getEventPayload:function(t,e){var n;n=e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:null;var i=e._map?e._map.getZoom():null;return{event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:e.options.limit,queryString:e.inputString,mapZoom:i,keyboardLocale:this.locale}},request:function(t,e){var n=new XMLHttpRequest;for(var i in n.onreadystatechange=function(){if(4==this.readyState)return e(204==this.status?null:this.statusText)},n.open(t.method,t.host+t.path,!0),t.headers)n.setRequestHeader(i,t.headers[i]);n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return(new i.sha256).update(Math.random().toString()).digest("hex")},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){var n=t.id;return e._typeahead.data.map((function(t){return t.id})).indexOf(n)},shouldEnableLogging:function(t){return-1!=this.origin.indexOf("api.mapbox.com")&&!t.localGeocoder&&!t.filter}},t.exports=o},XhcP:function(t,e,n){"use strict";n.d(e,"a",(function(){return D})),n.d(e,"b",(function(){return F})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return V}));var i=n("PbCK"),o=n("u6We"),r=n("hOK0"),a=n("3aX9"),s=n("nLfN"),l=n("vxfF"),c=n("ofXK"),h=n("fXoL"),u=n("FKr1"),d=n("8LU1"),p=n("FtGj"),g=n("XNiG"),m=n("xgIS"),f=n("VRyK"),v=n("pLZG"),b=n("lJxs"),y=n("1G5W"),_=n("/uUt"),C=n("IzEk"),x=n("JX91"),w=n("Kj3r"),I=n("R0Ic"),A=n("R1ws"),P=n("u47x"),O=n("cH1L"),M=["*"];function k(t,e){if(1&t){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",2),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]()._onBackdropClicked()})),h["\u0275\u0275elementEnd"]()}if(2&t){var i=h["\u0275\u0275nextContext"]();h["\u0275\u0275classProp"]("mat-drawer-shown",i._isShowingBackdrop())}}function S(t,e){1&t&&(h["\u0275\u0275elementStart"](0,"mat-drawer-content"),h["\u0275\u0275projection"](1,2),h["\u0275\u0275elementEnd"]())}var E=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],T=["mat-drawer","mat-drawer-content","*"],R={transformDrawer:Object(I.k)("transform",[Object(I.h)("open, open-instant",Object(I.i)({transform:"none",visibility:"visible"})),Object(I.h)("void",Object(I.i)({"box-shadow":"none",visibility:"hidden"})),Object(I.j)("void => open-instant",Object(I.e)("0ms")),Object(I.j)("void <=> open, open-instant => void",Object(I.e)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function L(t){throw Error("A drawer was already declared for 'position=\"".concat(t,"\"'"))}var z=new h.InjectionToken("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),B=new h.InjectionToken("MAT_DRAWER_CONTAINER"),j=function(){var t=function(t){Object(r.a)(n,t);var e=Object(a.a)(n);function n(t,o,r,a,s){var l;return Object(i.a)(this,n),(l=e.call(this,r,a,s))._changeDetectorRef=t,l._container=o,l}return Object(o.a)(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._container._contentMarginChanges.subscribe((function(){t._changeDetectorRef.markForCheck()}))}}]),n}(l.a);return t.\u0275fac=function(e){return new(e||t)(h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](Object(h.forwardRef)((function(){return F}))),h["\u0275\u0275directiveInject"](h.ElementRef),h["\u0275\u0275directiveInject"](l.c),h["\u0275\u0275directiveInject"](h.NgZone))},t.\u0275cmp=h["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&h["\u0275\u0275styleProp"]("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[h["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:M,decls:1,vars:0,template:function(t,e){1&t&&(h["\u0275\u0275projectionDef"](),h["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),t}(),D=function(){var t=function(){function t(e,n,o,r,a,s,l){var c=this;Object(i.a)(this,t),this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=o,this._platform=r,this._ngZone=a,this._doc=s,this._container=l,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new g.a,this._animationEnd=new g.a,this._animationState="void",this.openedChange=new h.EventEmitter(!0),this._openedStream=this.openedChange.pipe(Object(v.a)((function(t){return t})),Object(b.a)((function(){}))),this._closedStream=this.openedChange.pipe(Object(v.a)((function(t){return!t})),Object(b.a)((function(){}))),this._destroyed=new g.a,this.onPositionChanged=new h.EventEmitter,this._modeChanged=new g.a,this.openedChange.subscribe((function(t){t?(c._doc&&(c._elementFocusedBeforeDrawerWasOpened=c._doc.activeElement),c._takeFocus()):c._isFocusWithinDrawer()&&c._restoreFocus()})),this._ngZone.runOutsideAngular((function(){Object(m.a)(c._elementRef.nativeElement,"keydown").pipe(Object(v.a)((function(t){return t.keyCode===p.e&&!c.disableClose&&!Object(p.o)(t)})),Object(y.a)(c._destroyed)).subscribe((function(t){return c._ngZone.run((function(){c.close(),t.stopPropagation(),t.preventDefault()}))}))})),this._animationEnd.pipe(Object(_.a)((function(t,e){return t.fromState===e.fromState&&t.toState===e.toState}))).subscribe((function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&c.openedChange.emit(c._opened)}))}return Object(o.a)(t,[{key:"_takeFocus",value:function(){var t=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then((function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()}))}},{key:"_restoreFocus",value:function(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}},{key:"_isFocusWithinDrawer",value:function(){var t,e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(t){return this.toggle(!0,t)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"_closeViaBackdropClick",value:function(){return this._setOpen(!1,!0)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,e=arguments.length>1?arguments[1]:void 0;return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}},{key:"_setOpen",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"program";return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=i):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise((function(t){n.openedChange.pipe(Object(C.a)(1)).subscribe((function(e){return t(e?"open":"close")}))}))}},{key:"_getWidth",value:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(t){this._animationStarted.next(t)}},{key:"_animationDoneListener",value:function(t){this._animationEnd.next(t)}},{key:"position",get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(t){this._disableClose=Object(d.b)(t)}},{key:"autoFocus",get:function(){var t=this._autoFocus;return null==t?"side"!==this.mode:t},set:function(t){this._autoFocus=Object(d.b)(t)}},{key:"opened",get:function(){return this._opened},set:function(t){this.toggle(Object(d.b)(t))}},{key:"openedStart",get:function(){return this._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")})),Object(b.a)((function(){})))}},{key:"closedStart",get:function(){return this._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState&&"void"===t.toState})),Object(b.a)((function(){})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h["\u0275\u0275directiveInject"](h.ElementRef),h["\u0275\u0275directiveInject"](P.e),h["\u0275\u0275directiveInject"](P.c),h["\u0275\u0275directiveInject"](s.a),h["\u0275\u0275directiveInject"](h.NgZone),h["\u0275\u0275directiveInject"](c.d,8),h["\u0275\u0275directiveInject"](B,8))},t.\u0275cmp=h["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&h["\u0275\u0275syntheticHostListener"]("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(h["\u0275\u0275attribute"]("align",null),h["\u0275\u0275syntheticHostProperty"]("@transform",e._animationState),h["\u0275\u0275classProp"]("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",onPositionChanged:"positionChanged",openedStart:"openedStart",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:M,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(h["\u0275\u0275projectionDef"](),h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275projection"](1),h["\u0275\u0275elementEnd"]())},encapsulation:2,data:{animation:[R.transformDrawer]},changeDetection:0}),t}(),F=function(){var t=function(){function t(e,n,o,r,a){var s=this,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0;Object(i.a)(this,t),this._dir=e,this._element=n,this._ngZone=o,this._changeDetectorRef=r,this._animationMode=c,this._drawers=new h.QueryList,this.backdropClick=new h.EventEmitter,this._destroyed=new g.a,this._doCheckSubject=new g.a,this._contentMargins={left:null,right:null},this._contentMarginChanges=new g.a,e&&e.change.pipe(Object(y.a)(this._destroyed)).subscribe((function(){s._validateDrawers(),s.updateContentMargins()})),a.change().pipe(Object(y.a)(this._destroyed)).subscribe((function(){return s.updateContentMargins()})),this._autosize=l}return Object(o.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this._allDrawers.changes.pipe(Object(x.a)(this._allDrawers),Object(y.a)(this._destroyed)).subscribe((function(e){t._drawers.reset(e.filter((function(e){return!e._container||e._container===t}))),t._drawers.notifyOnChanges()})),this._drawers.changes.pipe(Object(x.a)(null)).subscribe((function(){t._validateDrawers(),t._drawers.forEach((function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)})),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t.updateContentMargins(),t._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){t._doCheckSubject.pipe(Object(w.a)(10),Object(y.a)(t._destroyed)).subscribe((function(){return t.updateContentMargins()}))}))}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach((function(t){return t.open()}))}},{key:"close",value:function(){this._drawers.forEach((function(t){return t.close()}))}},{key:"updateContentMargins",value:function(){var t=this,e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){var i=this._left._getWidth();e+=i,n-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){var o=this._right._getWidth();n+=o,e-=o}n=n||null,(e=e||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:e,right:n},this._ngZone.run((function(){return t._contentMarginChanges.next(t._contentMargins)})))}},{key:"ngDoCheck",value:function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular((function(){return t._doCheckSubject.next()}))}},{key:"_watchDrawerToggle",value:function(t){var e=this;t._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState})),Object(y.a)(this._drawers.changes)).subscribe((function(t){"open-instant"!==t.toState&&"NoopAnimations"!==e._animationMode&&e._element.nativeElement.classList.add("mat-drawer-transition"),e.updateContentMargins(),e._changeDetectorRef.markForCheck()})),"side"!==t.mode&&t.openedChange.pipe(Object(y.a)(this._drawers.changes)).subscribe((function(){return e._setContainerClass(t.opened)}))}},{key:"_watchDrawerPosition",value:function(t){var e=this;t&&t.onPositionChanged.pipe(Object(y.a)(this._drawers.changes)).subscribe((function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(C.a)(1)).subscribe((function(){e._validateDrawers()}))}))}},{key:"_watchDrawerMode",value:function(t){var e=this;t&&t._modeChanged.pipe(Object(y.a)(Object(f.a)(this._drawers.changes,this._destroyed))).subscribe((function(){e.updateContentMargins(),e._changeDetectorRef.markForCheck()}))}},{key:"_setContainerClass",value:function(t){var e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}},{key:"_validateDrawers",value:function(){var t=this;this._start=this._end=null,this._drawers.forEach((function(e){"end"==e.position?(null!=t._end&&L("end"),t._end=e):(null!=t._start&&L("start"),t._start=e)})),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}},{key:"_closeModalDrawersViaBackdrop",value:function(){var t=this;[this._start,this._end].filter((function(e){return e&&!e.disableClose&&t._canHaveBackdrop(e)})).forEach((function(t){return t._closeViaBackdropClick()}))}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(t){return"side"!==t.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(t){return null!=t&&t.opened}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(t){this._autosize=Object(d.b)(t)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(t){this._backdropOverride=null==t?null:Object(d.b)(t)}},{key:"scrollable",get:function(){return this._userContent||this._content}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h["\u0275\u0275directiveInject"](O.b,8),h["\u0275\u0275directiveInject"](h.ElementRef),h["\u0275\u0275directiveInject"](h.NgZone),h["\u0275\u0275directiveInject"](h.ChangeDetectorRef),h["\u0275\u0275directiveInject"](l.e),h["\u0275\u0275directiveInject"](z),h["\u0275\u0275directiveInject"](A.a,8))},t.\u0275cmp=h["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var i;1&t&&(h["\u0275\u0275contentQuery"](n,j,!0),h["\u0275\u0275contentQuery"](n,D,!0)),2&t&&(h["\u0275\u0275queryRefresh"](i=h["\u0275\u0275loadQuery"]())&&(e._content=i.first),h["\u0275\u0275queryRefresh"](i=h["\u0275\u0275loadQuery"]())&&(e._allDrawers=i))},viewQuery:function(t,e){var n;1&t&&h["\u0275\u0275viewQuery"](j,!0),2&t&&h["\u0275\u0275queryRefresh"](n=h["\u0275\u0275loadQuery"]())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&h["\u0275\u0275classProp"]("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[h["\u0275\u0275ProvidersFeature"]([{provide:B,useExisting:t}])],ngContentSelectors:T,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(h["\u0275\u0275projectionDef"](E),h["\u0275\u0275template"](0,k,1,2,"div",0),h["\u0275\u0275projection"](1),h["\u0275\u0275projection"](2,1),h["\u0275\u0275template"](3,S,2,0,"mat-drawer-content",1)),2&t&&(h["\u0275\u0275property"]("ngIf",e.hasBackdrop),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",!e._content))},directives:[c.m,j],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t}(),V=function(){var t=function t(){Object(i.a)(this,t)};return t.\u0275mod=h["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[c.c,u.a,s.b,l.b],l.b,u.a]}),t}()},YI60:function(t,e,n){"use strict";var i=n("aqBw"),o={};function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(o[t])return o[t];var e=t.split("."),n=e[0],a=e[1];if(!a)throw new Error("Invalid token");var s=function(t){try{return JSON.parse(i.decode(t))}catch(e){throw new Error("Invalid token")}}(a),l={usage:n,user:s.u};return r(s,"a")&&(l.authorization=s.a),r(s,"exp")&&(l.expires=1e3*s.exp),r(s,"iat")&&(l.created=1e3*s.iat),r(s,"scopes")&&(l.scopes=s.scopes),r(s,"client")&&(l.client=s.client),r(s,"ll")&&(l.lastLogin=s.ll),r(s,"iu")&&(l.impersonator=s.iu),o[t]=l,l}},YfBG:function(t,e,n){window,t.exports=function(){return n={},t.m=e=[function(t,e,n){"use strict";n.r(e),n.d(e,"parse",(function(){return u})),n.d(e,"repair",(function(){return d})),n.d(e,"escapeUnicodeChars",(function(){return p})),n.d(e,"validate",(function(){return g})),n.d(e,"extend",(function(){return m})),n.d(e,"clear",(function(){return f})),n.d(e,"getType",(function(){return v})),n.d(e,"isUrl",(function(){return y})),n.d(e,"isArray",(function(){return _})),n.d(e,"getAbsoluteLeft",(function(){return C})),n.d(e,"getAbsoluteTop",(function(){return x})),n.d(e,"addClassName",(function(){return w})),n.d(e,"removeAllClassNames",(function(){return I})),n.d(e,"removeClassName",(function(){return A})),n.d(e,"stripFormatting",(function(){return P})),n.d(e,"setEndOfContentEditable",(function(){return O})),n.d(e,"selectContentEditable",(function(){return M})),n.d(e,"getSelection",(function(){return k})),n.d(e,"setSelection",(function(){return S})),n.d(e,"getSelectionOffset",(function(){return E})),n.d(e,"setSelectionOffset",(function(){return T})),n.d(e,"getInnerText",(function(){return R})),n.d(e,"hasParentNode",(function(){return L})),n.d(e,"getInternetExplorerVersion",(function(){return z})),n.d(e,"isFirefox",(function(){return B})),n.d(e,"addEventListener",(function(){return D})),n.d(e,"removeEventListener",(function(){return F})),n.d(e,"isChildOf",(function(){return V})),n.d(e,"parsePath",(function(){return N})),n.d(e,"stringifyPath",(function(){return $})),n.d(e,"improveSchemaError",(function(){return Z})),n.d(e,"isPromise",(function(){return G})),n.d(e,"isValidValidationError",(function(){return W})),n.d(e,"insideRect",(function(){return H})),n.d(e,"debounce",(function(){return K})),n.d(e,"textDiff",(function(){return U})),n.d(e,"getInputSelection",(function(){return X})),n.d(e,"getIndexForPosition",(function(){return Y})),n.d(e,"getPositionForPath",(function(){return J})),n.d(e,"compileJSONPointer",(function(){return q})),n.d(e,"getColorCSS",(function(){return Q})),n.d(e,"isValidColor",(function(){return tt})),n.d(e,"makeFieldTooltip",(function(){return et})),n.d(e,"get",(function(){return nt})),n.d(e,"findUniqueName",(function(){return it})),n.d(e,"getChildPaths",(function(){return ot})),n.d(e,"sort",(function(){return rt})),n.d(e,"sortObjectKeys",(function(){return at})),n.d(e,"parseString",(function(){return st})),n.d(e,"isTimestamp",(function(){return lt})),n.d(e,"formatSize",(function(){return ct})),n.d(e,"limitCharacters",(function(){return ht})),n.d(e,"isObject",(function(){return ut})),n.d(e,"contains",(function(){return dt})),n.d(e,"isValidationErrorChanged",(function(){return pt})),n(24);var i=n(11),o=n.n(i),r=n(22),a=n.n(r),s=n(33),l=n.n(s),c=n(1);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e){try{return JSON.parse(e)}catch(t){throw g(e),t}}function d(t){var e=[],n=0,i=0,o=!1,r=t.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);r&&(t=r[3]);var a,s={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},l={None:"null",True:"true",False:"false"};function c(){return t.charAt(n)}function h(){return t.charAt(n+1)}function u(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function d(){if("/"===c()&&"*"===h()){for(n+=2;n<t.length&&("*"!==c()||"/"!==h());)n++;n+=2,"\n"===c()&&n++}}function p(e){var i="";i+='"',n++;for(var o=c();n<t.length&&o!==e;)'"'===o&&"\\"!==t.charAt(n-1)?i+='\\"':o in s?i+=s[o]:("\\"===o&&(n++,"'"!==(o=c())&&(i+="\\")),i+=o),n++,o=c();return o===e&&(i+='"',n++),i}for(;n<t.length;){d(),function(){if("/"===c()&&"/"===h())for(n+=2;n<t.length&&"\n"!==c();)n++}();var g,m=c();"{"===m&&i++,"}"===m&&i--,"\xa0"===(a=m)||"\u2000"<=a&&a<="\u200a"||"\u202f"===a||"\u205f"===a||"\u3000"===a?(e.push(" "),n++):"'"===m?e.push(p(m)):'"'===m?e.push(p('"')):"`"===m?e.push(p("\xb4")):"\u2018"===m?e.push(p("\u2019")):"\u201c"===m?e.push(p("\u201d")):"}"===m?(e.push(m),n++,g=function(){for(var e="";n<t.length&&u(c());)e+=c(),n++;return e}(),d(),"{"===function(){for(var e=n;e<t.length&&u(t[e]);)e++;return t[e]}()&&(e.push(","),0===i&&(o=!0)),e.push(g)):","===m&&-1!==["]","}"].indexOf(function(){for(var e=n+1;e<t.length&&u(t[e]);)e++;return t[e]}())?n++:/[a-zA-Z_$]/.test(m)&&-1!==["{",","].indexOf(function(){for(var t=e.length-1;0<=t;){var n=e[t];if(!u(n))return n;t--}return""}())?e.push(function(){for(var t="",e=c(),i=/[a-zA-Z_$\d]/;i.test(e);)t+=e,n++,e=c();return t in l?l[t]:-1===["null","true","false"].indexOf(t)?'"'+t+'"':t}()):/\w/.test(m)?e.push(function(){for(var t,e=c(),i="";/\w/.test(e);)i+=e,n++,e=c();if(0<i.length&&"("===e){if(n++,'"'===(e=c()))t=p(e),e=c();else for(t="";")"!==e&&""!==e;)t+=e,n++,e=c();return")"===e?(n++,t):i+"("+t+e}return"string"==typeof l[i]?l[i]:i}()):(e.push(m),n++)}return o&&(e.unshift("[\n"),e.push("\n]")),e.join("")}function p(t){return t.replace(/[\u007F-\uFFFF]/g,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))}function g(t){void 0!==a.a?a.a.parse(t):JSON.parse(t)}function m(t,e){for(var n in e)gt(e,n)&&(t[n]=e[n]);return t}function f(t){for(var e in t)gt(t,e)&&delete t[e];return t}function v(t){return null===t?"null":void 0===t?"undefined":t instanceof Number||"number"==typeof t?"number":t instanceof String||"string"==typeof t?"string":t instanceof Boolean||"boolean"==typeof t?"boolean":t instanceof RegExp?"regexp":_(t)?"array":"object"}var b=/^https?:\/\/\S+$/;function y(t){return("string"==typeof t||t instanceof String)&&b.test(t)}function _(t){return"[object Array]"===Object.prototype.toString.call(t)}function C(t){return t.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0}function x(t){return t.getBoundingClientRect().top+window.pageYOffset||document.scrollTop||0}function w(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" "))}function I(t){t.className=""}function A(t,e){var n=t.className.split(" "),i=n.indexOf(e);-1!==i&&(n.splice(i,1),t.className=n.join(" "))}function P(t){for(var e=t.childNodes,n=0,i=e.length;n<i;n++){var o=e[n];o.style&&o.removeAttribute("style");var r=o.attributes;if(r)for(var a=r.length-1;0<=a;a--){var s=r[a];!0===s.specified&&o.removeAttribute(s.name)}P(o)}}function O(t){var e,n;document.createRange&&((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e))}function M(t){var e,n;t&&"DIV"===t.nodeName&&window.getSelection&&document.createRange&&((n=document.createRange()).selectNodeContents(t),(e=window.getSelection()).removeAllRanges(),e.addRange(n))}function k(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return null}function S(t){var e;t&&window.getSelection&&((e=window.getSelection()).removeAllRanges(),e.addRange(t))}function E(){var t=k();return t&&"startOffset"in t&&"endOffset"in t&&t.startContainer&&t.startContainer===t.endContainer?{startOffset:t.startOffset,endOffset:t.endOffset,container:t.startContainer.parentNode}:null}function T(t){var e;document.createRange&&window.getSelection&&window.getSelection()&&(e=document.createRange(),t.container.firstChild||t.container.appendChild(document.createTextNode("")),e.setStart(t.container.firstChild,t.startOffset),e.setEnd(t.container.firstChild,t.endOffset),S(e))}function R(t,e){if(void 0===e&&(e={_text:"",flush:function(){var t=this._text;return this._text="",t},set:function(t){this._text=t}}),t.nodeValue){var n=t.nodeValue.replace(/\s*\n\s*/g,"");return""!==n?e.flush()+n:""}if(t.hasChildNodes()){for(var i=t.childNodes,o="",r=0,a=i.length;r<a;r++){var s,l,c=i[r];"DIV"===c.nodeName||"P"===c.nodeName?((l=(s=i[r-1])?s.nodeName:void 0)&&"DIV"!==l&&"P"!==l&&"BR"!==l&&(""!==o&&(o+="\n"),e.flush()),o+=R(c,e),e.set("\n")):"BR"===c.nodeName?(o+=e.flush(),e.set("\n")):o+=R(c,e)}return o}return""}function L(t,e){for(var n=t?t.parentNode:void 0;n;){if(n===e)return!0;n=n.parentNode}return!1}function z(){var t,e;return-1===j&&(t=-1,"undefined"!=typeof navigator&&"Microsoft Internet Explorer"===navigator.appName&&(e=navigator.userAgent,null!=new RegExp("MSIE ([0-9]+[.0-9]+)").exec(e)&&(t=parseFloat(RegExp.$1))),j=t),j}function B(){return"undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")}var j=-1;function D(t,e,n,i){if(t.addEventListener)return void 0===i&&(i=!1),"mousewheel"===e&&B()&&(e="DOMMouseScroll"),t.addEventListener(e,n,i),n;if(t.attachEvent){var o=function(){return n.call(t,window.event)};return t.attachEvent("on"+e,o),o}}function F(t,e,n,i){t.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&B()&&(e="DOMMouseScroll"),t.removeEventListener(e,n,i)):t.detachEvent&&t.detachEvent("on"+e,n)}function V(t,e){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}function N(t){var e=[],n=0;function i(e){for(var i="";void 0!==t[n]&&t[n]!==e;)i+=t[n],n++;if(t[n]!==e)throw new Error("Invalid JSON path: unexpected end, character "+e+" expected");return i}for(;void 0!==t[n];)if("."===t[n])n++,e.push(function(){for(var e="";void 0!==t[n]&&/[\w$]/.test(t[n]);)e+=t[n],n++;if(""===e)throw new Error("Invalid JSON path: property name expected at index "+n);return e}());else{if("["!==t[n])throw new Error('Invalid JSON path: unexpected character "'+t[n]+'" at index '+n);if("'"===t[++n]||'"'===t[n]){var o=t[n];if(n++,e.push(i(o)),t[n]!==o)throw new Error("Invalid JSON path: closing quote ' expected at index "+n);n++}else{var r=i("]").trim();if(0===r.length)throw new Error("Invalid JSON path: array value expected at index "+n);r="*"===r?r:JSON.parse(r),e.push(r)}if("]"!==t[n])throw new Error("Invalid JSON path: closing bracket ] expected at index "+n);n++}return e}function $(t){return t.map((function(t){return"number"==typeof t?"["+t+"]":"string"==typeof t&&t.match(/^[A-Za-z0-9_$]+$/)?"."+t:'["'+t+'"]'})).join("")}function Z(t){var e,n;return"enum"!==t.keyword||!Array.isArray(t.schema)||(n=t.schema)&&(5<(n=n.map((function(t){return JSON.stringify(t)}))).length&&(e=["("+(n.length-5)+" more...)"],(n=n.slice(0,5)).push(e)),t.message="should be equal to one of: "+n.join(", ")),"additionalProperties"===t.keyword&&(t.message="should NOT have additional property: "+t.params.additionalProperty),t}function G(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function W(t){return"object"===h(t)&&Array.isArray(t.path)&&"string"==typeof t.message}function H(t,e,n){var i=void 0!==n?n:0;return e.left-i>=t.left&&e.right+i<=t.right&&e.top-i>=t.top&&e.bottom+i<=t.bottom}function K(t,e,n){var i;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(o,r)}),e),a&&t.apply(o,r)}}function U(t,e){for(var n=e.length,i=0,o=t.length,r=e.length;e.charAt(i)===t.charAt(i)&&i<n;)i++;for(;e.charAt(r-1)===t.charAt(o-1)&&i<r&&0<o;)r--,o--;return{start:i,end:r}}function X(t){var e,n,i,o,r,a=0,s=0;return"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd?(a=t.selectionStart,s=t.selectionEnd):(n=document.selection.createRange())&&n.parentElement()===t&&(o=t.value.length,e=t.value.replace(/\r\n/g,"\n"),(i=t.createTextRange()).moveToBookmark(n.getBookmark()),(r=t.createTextRange()).collapse(!1),-1<i.compareEndPoints("StartToEnd",r)?a=s=o:(a=-i.moveStart("character",-o),a+=e.slice(0,a).split("\n").length-1,-1<i.compareEndPoints("EndToEnd",r)?s=o:(s=-i.moveEnd("character",-o),s+=e.slice(0,s).split("\n").length-1))),{startIndex:a,endIndex:s,start:l(a),end:l(s)};function l(e){var n=t.value.substring(0,e);return{row:(n.match(/\n/g)||[]).length+1,column:n.length-n.lastIndexOf("\n")}}}function Y(t,e,n){if(0<e&&0<n){var i=(t.value||"").split("\n",e);e=Math.min(i.length,e),n=Math.min(i[e-1].length,n-1);var o=1===e?n:n+1;return i.slice(0,e-1).join("\n").length+o}return-1}function J(t,e){var n,i=[];if(!e||!e.length)return i;try{n=l.a.parse(t)}catch(t){return i}return e.forEach((function(t){var e=q(N(t)),o=n.pointers[e];o&&i.push({path:t,line:o.key?o.key.line:o.value?o.value.line:0,column:o.key?o.key.column:o.value?o.value.column:0})})),i}function q(t){return t.map((function(t){return"/"+String(t).replace(/~/g,"~0").replace(/\//g,"~1")})).join("")}function Q(t){var e=document.createElement("div");return e.style.color=t,e.style.color.split(/\s+/).join("").toLowerCase()||null}function tt(t){return!!Q(t)}function et(t,e){if(!t)return"";var n="";return t.title&&(n+=t.title),t.description&&(0<n.length&&(n+="\n"),n+=t.description),t.default&&(0<n.length&&(n+="\n\n"),n+=Object(c.c)("default",void 0,e)+"\n",n+=JSON.stringify(t.default,null,2)),Array.isArray(t.examples)&&0<t.examples.length&&(0<n.length&&(n+="\n\n"),n+=Object(c.c)("examples",void 0,e)+"\n",t.examples.forEach((function(e,i){n+=JSON.stringify(e,null,2),i!==t.examples.length-1&&(n+="\n")}))),n}function nt(t,e){for(var n=t,i=0;i<e.length&&null!=n;i++)n=n[e[i]];return n}function it(t,e){for(var n=t.replace(/ \(copy( \d+)?\)$/,""),i=n,o=1;-1!==e.indexOf(i);)i=n+" (copy"+(1<o?" "+o:"")+")",o++;return i}function ot(t,e){var n={};if(Array.isArray(t))for(var i=Math.min(t.length,1e4),o=0;o<i;o++)!function t(e,n,i,o){(Array.isArray(e)||ut(e))&&!o||(n[i||""]=!0),ut(e)&&Object.keys(e).forEach((function(r){t(e[r],n,i+"."+r,o)}))}(t[o],n,"",e);else n[""]=!0;return Object.keys(n).sort()}function rt(t,e,n){var i=e&&"."!==e?N(e):[],o="desc"===n?-1:1,r=t.slice();return r.sort((function(t,e){var n=nt(t,i),r=nt(e,i);return o*(r<n?1:n<r?-1:0)})),r}function at(t,e){var n="desc"===e?-1:1,i=Object.keys(t).sort((function(t,e){return n*o()(t,e)})),r={};return i.forEach((function(e){r[e]=t[e]})),r}function st(t){if(""===t)return"";var e=t.toLowerCase();if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;var n=Number(t),i=parseFloat(t);return isNaN(n)||isNaN(i)?t:n}function lt(t,e){return"number"==typeof e&&9466848e5<e&&isFinite(e)&&Math.floor(e)===e&&!isNaN(new Date(e).valueOf())}function ct(t){if(t<900)return t.toFixed()+" B";var e=t/1e3;if(e<900)return e.toFixed(1)+" KB";var n=e/1e3;if(n<900)return n.toFixed(1)+" MB";var i=n/1e3;return i<900?i.toFixed(1)+" GB":(i/1e3).toFixed(1)+" TB"}function ht(t,e){return t.length<=e?t:t.slice(0,e)+"..."}function ut(t){return"object"===h(t)&&null!==t&&!Array.isArray(t)}function dt(t,e){return-1!==t.indexOf(e)}function pt(t,e){if(!e&&!t)return!1;if(e&&!t||!e&&t)return!0;if(e.length!==t.length)return!0;for(var n=0;n<t.length;++n){var i=function(n){if(!e.find("error"===t[n].type?function(e){return e.line===t[n].line}:function(e){return e.dataPath===t[n].dataPath&&e.schemaPath===t[n].schemaPath}))return{v:!0}}(n);if("object"===h(i))return i.v}return!1}function gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c})),n(24);var i=["en","pt-BR","zh-CN","tr","ja","fr-FR"],o={en:{array:"Array",auto:"Auto",appendText:"Append",appendTitle:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",appendSubmenuTitle:"Select the type of the field to be appended",appendTitleAuto:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascending",ascendingTitle:"Sort the childs of this ${type} in ascending order",actionsMenu:"Click to open the actions menu (Ctrl+M)",cannotParseFieldError:"Cannot parse field into JSON",cannotParseValueError:"Cannot parse value into JSON",collapseAll:"Collapse all fields",compactTitle:"Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",descending:"Descending",descendingTitle:"Sort the childs of this ${type} in descending order",drag:"Drag to move this field (Alt+Shift+Arrows)",duplicateKey:"duplicate key",duplicateText:"Duplicate",duplicateTitle:"Duplicate selected fields (Ctrl+D)",duplicateField:"Duplicate this field (Ctrl+D)",duplicateFieldError:"Duplicate field name",empty:"empty",expandAll:"Expand all fields",expandTitle:"Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs.",formatTitle:"Format JSON data, with proper indentation and line feeds (Ctrl+\\)",insert:"Insert",insertTitle:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",insertSub:"Select the type of the field to be inserted",object:"Object",ok:"Ok",redo:"Redo (Ctrl+Shift+Z)",removeText:"Remove",removeTitle:"Remove selected fields (Ctrl+Del)",removeField:"Remove this field (Ctrl+Del)",repairTitle:"Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.",searchTitle:"Search fields and values",searchNextResultTitle:"Next result (Enter)",searchPreviousResultTitle:"Previous result (Shift + Enter)",selectNode:"Select a node...",showAll:"show all",showMore:"show more",showMoreStatus:"displaying ${visibleChilds} of ${totalChilds} items.",sort:"Sort",sortTitle:"Sort the childs of this ${type}",sortTitleShort:"Sort contents",sortFieldLabel:"Field:",sortDirectionLabel:"Direction:",sortFieldTitle:"Select the nested field by which to sort the array or object",sortAscending:"Ascending",sortAscendingTitle:"Sort the selected field in ascending order",sortDescending:"Descending",sortDescendingTitle:"Sort the selected field in descending order",string:"String",transform:"Transform",transformTitle:"Filter, sort, or transform the childs of this ${type}",transformTitleShort:"Filter, sort, or transform contents",extract:"Extract",extractTitle:"Extract this ${type}",transformQueryTitle:"Enter a JMESPath query",transformWizardLabel:"Wizard",transformWizardFilter:"Filter",transformWizardSortBy:"Sort by",transformWizardSelectFields:"Select fields",transformQueryLabel:"Query",transformPreviewLabel:"Preview",type:"Type",typeTitle:"Change the type of this field",openUrl:"Ctrl+Click or Ctrl+Enter to open url in new window",undo:"Undo last action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Field type "object". An object contains an unordered set of key/value pairs.',arrayType:'Field type "array". An array contains an ordered collection of values.',stringType:'Field type "string". Field type is not determined from the value, but always returned as string.',modeEditorTitle:"Switch Editor Mode",modeCodeText:"Code",modeCodeTitle:"Switch to code highlighter",modeFormText:"Form",modeFormTitle:"Switch to form editor",modeTextText:"Text",modeTextTitle:"Switch to plain text editor",modeTreeText:"Tree",modeTreeTitle:"Switch to tree editor",modeViewText:"View",modeViewTitle:"Switch to tree view",modePreviewText:"Preview",modePreviewTitle:"Switch to preview mode",examples:"Examples",default:"Default"},"zh-CN":{array:"\u6570\u7ec4",auto:"\u81ea\u52a8",appendText:"\u8ffd\u52a0",appendTitle:"\u5728\u6b64\u5b57\u6bb5\u540e\u8ffd\u52a0\u4e00\u4e2a\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",appendSubmenuTitle:"\u9009\u62e9\u8981\u8ffd\u52a0\u7684\u5b57\u6bb5\u7c7b\u578b",appendTitleAuto:"\u8ffd\u52a0\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",ascending:"\u5347\u5e8f",ascendingTitle:"\u5347\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",actionsMenu:"\u70b9\u51fb\u6253\u5f00\u52a8\u4f5c\u83dc\u5355(Ctrl+M)",cannotParseFieldError:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u89e3\u6790\u4e3aJSON",cannotParseValueError:"\u65e0\u6cd5\u5c06\u503c\u89e3\u6790\u4e3aJSON",collapseAll:"\u7f29\u8fdb\u6240\u6709\u5b57\u6bb5",compactTitle:"\u538b\u7f29JSON\u6570\u636e\uff0c\u5220\u9664\u6240\u6709\u7a7a\u683c (Ctrl+Shift+\\)",descending:"\u964d\u5e8f",descendingTitle:"\u964d\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",drag:"\u62d6\u62fd\u79fb\u52a8\u8be5\u8282\u70b9(Alt+Shift+Arrows)",duplicateKey:"\u91cd\u590d\u952e",duplicateText:"\u590d\u5236",duplicateTitle:"\u590d\u5236\u9009\u4e2d\u5b57\u6bb5(Ctrl+D)",duplicateField:"\u590d\u5236\u8be5\u5b57\u6bb5(Ctrl+D)",duplicateFieldError:"\u91cd\u590d\u7684\u5b57\u6bb5\u540d\u79f0",empty:"\u6e05\u7a7a",expandAll:"\u5c55\u5f00\u6240\u6709\u5b57\u6bb5",expandTitle:"\u70b9\u51fb \u5c55\u5f00/\u6536\u7f29 \u8be5\u5b57\u6bb5(Ctrl+E). \nCtrl+Click \u5c55\u5f00/\u6536\u7f29 \u5305\u542b\u6240\u6709\u5b50\u8282\u70b9.",formatTitle:"\u4f7f\u7528\u9002\u5f53\u7684\u7f29\u8fdb\u548c\u6362\u884c\u7b26\u683c\u5f0f\u5316JSON\u6570\u636e (Ctrl+\\)",insert:"\u63d2\u5165",insertTitle:"\u5728\u6b64\u5b57\u6bb5\u524d\u63d2\u5165\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Ins)",insertSub:"\u9009\u62e9\u8981\u63d2\u5165\u7684\u5b57\u6bb5\u7c7b\u578b",object:"\u5bf9\u8c61",ok:"Ok",redo:"\u91cd\u505a (Ctrl+Shift+Z)",removeText:"\u79fb\u9664",removeTitle:"\u79fb\u9664\u9009\u4e2d\u5b57\u6bb5 (Ctrl+Del)",removeField:"\u79fb\u9664\u8be5\u5b57\u6bb5 (Ctrl+Del)",repairTitle:"\u4fee\u590dJSON\uff1a\u4fee\u590d\u5f15\u53f7\u548c\u8f6c\u4e49\u7b26\uff0c\u5220\u9664\u6ce8\u91ca\u548cJSONP\u8868\u793a\u6cd5\uff0c\u5c06JavaScript\u5bf9\u8c61\u8f6c\u6362\u4e3aJSON\u3002",selectNode:"\u9009\u62e9\u4e00\u4e2a\u8282\u70b9...",showAll:"\u5c55\u793a\u5168\u90e8",showMore:"\u5c55\u793a\u66f4\u591a",showMoreStatus:"\u663e\u793a${totalChilds}\u7684${visibleChilds}\u9879\u76ee.",sort:"\u6392\u5e8f",sortTitle:"\u6392\u5e8f${type}\u7684\u5b50\u8282\u70b9",sortTitleShort:"\u5185\u5bb9\u6392\u5e8f",sortFieldLabel:"\u5b57\u6bb5\uff1a",sortDirectionLabel:"\u65b9\u5411\uff1a",sortFieldTitle:"\u9009\u62e9\u7528\u4e8e\u5bf9\u6570\u7ec4\u6216\u5bf9\u8c61\u6392\u5e8f\u7684\u5d4c\u5957\u5b57\u6bb5",sortAscending:"\u5347\u5e8f\u6392\u5e8f",sortAscendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u5347\u5e8f\u6392\u5e8f",sortDescending:"\u964d\u5e8f\u6392\u5e8f",sortDescendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u964d\u5e8f\u6392\u5e8f",string:"\u5b57\u7b26\u4e32",transform:"\u53d8\u6362",transformTitle:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362${type}\u7684\u5b50\u8282\u70b9",transformTitleShort:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362\u5185\u5bb9",extract:"\u63d0\u53d6",extractTitle:"\u63d0\u53d6\u8fd9\u4e2a ${type}",transformQueryTitle:"\u8f93\u5165JMESPath\u67e5\u8be2",transformWizardLabel:"\u5411\u5bfc",transformWizardFilter:"\u7b5b\u9009",transformWizardSortBy:"\u6392\u5e8f",transformWizardSelectFields:"\u9009\u62e9\u5b57\u6bb5",transformQueryLabel:"\u67e5\u8be2",transformPreviewLabel:"\u9884\u89c8",type:"\u7c7b\u578b",typeTitle:"\u66f4\u6539\u5b57\u6bb5\u7c7b\u578b",openUrl:"Ctrl+Click \u6216\u8005 Ctrl+Enter \u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",undo:"\u64a4\u9500\u4e0a\u6b21\u52a8\u4f5c (Ctrl+Z)",validationCannotMove:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u79fb\u5165\u5176\u5b50\u8282\u70b9",autoType:'\u5b57\u6bb5\u7c7b\u578b "auto". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a \u53ef\u4ee5\u4e3a string\uff0cnumber\uff0cboolean\uff0c\u6216\u8005 null.',objectType:'\u5b57\u6bb5\u7c7b\u578b "object". \u5bf9\u8c61\u5305\u542b\u4e00\u7ec4\u65e0\u5e8f\u7684\u952e/\u503c\u5bf9.',arrayType:'\u5b57\u6bb5\u7c7b\u578b "array". \u6570\u7ec4\u5305\u542b\u503c\u7684\u6709\u5e8f\u96c6\u5408.',stringType:'\u5b57\u6bb5\u7c7b\u578b "string". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a\uff0c\u4f46\u59cb\u7ec8\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fd4\u56de.',modeCodeText:"\u4ee3\u7801",modeCodeTitle:"\u5207\u6362\u81f3\u4ee3\u7801\u9ad8\u4eae",modeFormText:"\u8868\u5355",modeFormTitle:"\u5207\u6362\u81f3\u8868\u5355\u7f16\u8f91",modeTextText:"\u6587\u672c",modeTextTitle:"\u5207\u6362\u81f3\u6587\u672c\u7f16\u8f91",modeTreeText:"\u6811",modeTreeTitle:"\u5207\u6362\u81f3\u6811\u7f16\u8f91",modeViewText:"\u89c6\u56fe",modeViewTitle:"\u5207\u6362\u81f3\u6811\u89c6\u56fe",modePreviewText:"\u9884\u89c8",modePreviewTitle:"\u5207\u6362\u81f3\u9884\u89c8\u6a21\u5f0f",examples:"\u4f8b\u5b50",default:"\u7f3a\u7701"},"pt-BR":{array:"Lista",auto:"Automatico",appendText:"Adicionar",appendTitle:"Adicionar novo campo com tipo 'auto' depois deste campo (Ctrl+Shift+Ins)",appendSubmenuTitle:"Selecione o tipo do campo a ser adicionado",appendTitleAuto:"Adicionar novo campo com tipo 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendente",ascendingTitle:"Organizar filhor do tipo ${type} em crescente",actionsMenu:"Clique para abrir o menu de a\xe7\xf5es (Ctrl+M)",cannotParseFieldError:"N\xe3o \xe9 poss\xedvel analisar o campo no JSON",cannotParseValueError:"N\xe3o \xe9 poss\xedvel analisar o valor em JSON",collapseAll:"Fechar todos campos",compactTitle:"Dados JSON compactos, remova todos os espa\xe7os em branco (Ctrl+Shift+\\)",descending:"Descendente",descendingTitle:"Organizar o filhos do tipo ${type} em decrescente",duplicateKey:"chave duplicada",drag:"Arraste para mover este campo (Alt+Shift+Arrows)",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos selecionados (Ctrl+D)",duplicateField:"Duplicar este campo (Ctrl+D)",duplicateFieldError:"Nome do campo duplicado",empty:"vazio",expandAll:"Expandir todos campos",expandTitle:"Clique para expandir/encolher este campo (Ctrl+E). \nCtrl+Click para expandir/encolher incluindo todos os filhos.",formatTitle:"Formate dados JSON, com recuo e feeds de linha adequados (Ctrl+\\)",insert:"Inserir",insertTitle:"Inserir um novo campo do tipo 'auto' antes deste campo (Ctrl+Ins)",insertSub:"Selecionar o tipo de campo a ser inserido",object:"Objeto",ok:"Ok",redo:"Refazer (Ctrl+Shift+Z)",removeText:"Remover",removeTitle:"Remover campos selecionados (Ctrl+Del)",removeField:"Remover este campo (Ctrl+Del)",repairTitle:"Repare JSON: corrija aspas e caracteres de escape, remova coment\xe1rios e nota\xe7\xe3o JSONP, transforme objetos JavaScript em JSON.",selectNode:"Selecione um n\xf3dulo...",showAll:"mostrar todos",showMore:"mostrar mais",showMoreStatus:"exibindo ${visibleChilds} de ${totalChilds} itens.",sort:"Organizar",sortTitle:"Organizar os filhos deste ${type}",sortTitleShort:"Organizar os filhos",sortFieldLabel:"Campo:",sortDirectionLabel:"Dire\xe7\xe3o:",sortFieldTitle:"Selecione um campo filho pelo qual ordenar o array ou objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar o campo selecionado por ordem ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar o campo selecionado por ordem descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar ou transformar os filhos deste ${type}",transformTitleShort:"Filtrar, ordenar ou transformar conte\xfados",transformQueryTitle:"Insira uma express\xe3o JMESPath",transformWizardLabel:"Assistente",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Selecionar campos",transformQueryLabel:"Express\xe3o",transformPreviewLabel:"Visualizar",type:"Tipo",typeTitle:"Mudar o tipo deste campo",openUrl:"Ctrl+Click ou Ctrl+Enter para abrir link em nova janela",undo:"Desfazer \xfaltimo a\xe7\xe3o (Ctrl+Z)",validationCannotMove:"N\xe3o pode mover um campo como filho dele mesmo",autoType:'Campo do tipo "auto". O tipo do campo \xe9 determinao automaticamente a partir do seu valor e pode ser texto, n\xfamero, verdade/falso ou nulo.',objectType:'Campo do tipo "objeto". Um objeto cont\xe9m uma lista de pares com chave e valor.',arrayType:'Campo do tipo "lista". Uma lista contem uma cole\xe7\xe3o de valores ordenados.',stringType:'Campo do tipo "string". Campo do tipo nao \xe9 determinado atrav\xe9s do seu valor, mas sempre retornara um texto.',examples:"Exemplos",default:"Revelia"},tr:{array:"Dizin",auto:"Otomatik",appendText:"Ekle",appendTitle:"Bu alan\u0131n alt\u0131na 'otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",appendSubmenuTitle:"Eklenecek alan\u0131n tipini se\xe7",appendTitleAuto:"'Otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",ascending:"Artan",ascendingTitle:"${type}'\u0131n alt tiplerini artan d\xfczende s\u0131rala",actionsMenu:"Aksiyon men\xfcs\xfcn\xfc a\xe7mak i\xe7in t\u0131klay\u0131n (Ctrl+M)",collapseAll:"T\xfcm alanlar\u0131 kapat",descending:"Azalan",descendingTitle:"${type}'\u0131n alt tiplerini azalan d\xfczende s\u0131rala",drag:"Bu alan\u0131 ta\u015f\u0131mak i\xe7in s\xfcr\xfckleyin (Alt+Shift+Arrows)",duplicateKey:"Var olan anahtar",duplicateText:"A\u015fa\u011f\u0131ya kopyala",duplicateTitle:"Se\xe7ili alanlardan bir daha olu\u015ftur (Ctrl+D)",duplicateField:"Bu alandan bir daha olu\u015ftur (Ctrl+D)",duplicateFieldError:"Duplicate field name",cannotParseFieldError:"Alan JSON'a ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",cannotParseValueError:"JSON'a de\u011fer ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",empty:"bo\u015f",expandAll:"T\xfcm alanlar\u0131 a\xe7",expandTitle:"Bu alan\u0131 a\xe7mak/kapatmak i\xe7in t\u0131kla (Ctrl+E). \nAlt alanlarda dahil t\xfcm alanlar\u0131 a\xe7mak i\xe7in Ctrl+Click ",insert:"Ekle",insertTitle:"Bu alan\u0131n \xfcst\xfcne 'otomatik' tipinde yeni bir alan ekle (Ctrl+Ins)",insertSub:"Araya eklenecek alan\u0131n tipini se\xe7",object:"Nesne",ok:"Tamam",redo:"Yeniden yap (Ctrl+Shift+Z)",removeText:"Kald\u0131r",removeTitle:"Se\xe7ilen alanlar\u0131 kald\u0131r (Ctrl+Del)",removeField:"Bu alan\u0131 kald\u0131r (Ctrl+Del)",selectNode:"Bir nesne se\xe7...",showAll:"t\xfcm\xfcn\xfc g\xf6ster",showMore:"daha fazla g\xf6ster",showMoreStatus:"${totalChilds} alan\u0131n ${visibleChilds} alt alanlar\u0131 g\xf6steriliyor",sort:"S\u0131rala",sortTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 s\u0131rala",sortTitleShort:"\u0130\xe7erikleri s\u0131rala",sortFieldLabel:"Alan:",sortDirectionLabel:"Y\xf6n:",sortFieldTitle:"Diziyi veya nesneyi s\u0131ralamak i\xe7in i\xe7 i\xe7e ge\xe7mi\u015f alan\u0131 se\xe7in",sortAscending:"Artan",sortAscendingTitle:"Se\xe7ili alan\u0131 artan d\xfczende s\u0131rala",sortDescending:"Azalan",sortDescendingTitle:"Se\xe7ili alan\u0131 azalan d\xfczende s\u0131rala",string:"Karakter Dizisi",transform:"D\xf6n\xfc\u015ft\xfcr",transformTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 filtrele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformTitleShort:"\u0130\xe7erikleri filterele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformQueryTitle:"JMESPath sorgusu gir",transformWizardLabel:"Sihirbaz",transformWizardFilter:"Filtre",transformWizardSortBy:"S\u0131rala",transformWizardSelectFields:"Alanlar\u0131 se\xe7",transformQueryLabel:"Sorgu",transformPreviewLabel:"\xd6nizleme",type:"Tip",typeTitle:"Bu alan\u0131n tipini de\u011fi\u015ftir",openUrl:"URL'i yeni bir pencerede a\xe7mak i\xe7in Ctrl+Click veya Ctrl+Enter",undo:"Son de\u011fi\u015fikli\u011fi geri al (Ctrl+Z)",validationCannotMove:"Alt alan olarak ta\u015f\u0131nam\u0131yor",autoType:'Alan tipi "otomatik". Alan t\xfcr\xfc otomatik olarak de\u011ferden belirlenirve bir dize, say\u0131, boolean veya null olabilir.',objectType:'Alan tipi "nesne". Bir nesne, s\u0131ralanmam\u0131\u015f bir anahtar / de\u011fer \xe7ifti k\xfcmesi i\xe7erir.',arrayType:'Alan tipi "dizi". Bir dizi, d\xfczenli de\u011ferler koleksiyonu i\xe7erir.',stringType:'Alan tipi "karakter dizisi". Alan t\xfcr\xfc de\u011ferden belirlenmez,ancak her zaman karakter dizisi olarak d\xf6nd\xfcr\xfcl\xfcr.',modeCodeText:"Kod",modeCodeTitle:"Kod vurgulay\u0131c\u0131ya ge\xe7",modeFormText:"Form",modeFormTitle:"Form d\xfczenleyiciye ge\xe7",modeTextText:"Metin",modeTextTitle:"D\xfcz metin d\xfczenleyiciye ge\xe7",modeTreeText:"A\u011fa\xe7",modeTreeTitle:"A\u011fa\xe7 d\xfczenleyiciye ge\xe7",modeViewText:"G\xf6r\xfcn\xfcm",modeViewTitle:"A\u011fa\xe7 g\xf6r\xfcn\xfcm\xfcne ge\xe7",examples:"\xd6rnekler",default:"Varsay\u0131lan"},ja:{array:"\u914d\u5217",auto:"\u30aa\u30fc\u30c8",appendText:"\u8ffd\u52a0",appendTitle:'\u6b21\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',appendSubmenuTitle:"\u8ffd\u52a0\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",appendTitleAuto:'"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',ascending:"\u6607\u9806",ascendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u6607\u9806\u306b\u4e26\u3079\u66ff\u3048",actionsMenu:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304f (Ctrl+M)",collapseAll:"\u3059\u3079\u3066\u3092\u6298\u308a\u305f\u305f\u3080",descending:"\u964d\u9806",descendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u964d\u9806\u306b\u4e26\u3079\u66ff\u3048",drag:"\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u79fb\u52d5 (Alt+Shift+Arrows)",duplicateKey:"\u8907\u88fd\u30ad\u30fc",duplicateText:"\u8907\u88fd",duplicateTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateFieldError:"\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304c\u91cd\u8907\u3057\u3066\u3044\u307e\u3059",cannotParseFieldError:"JSON\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",cannotParseValueError:"JSON\u306e\u5024\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",empty:"\u7a7a",expandAll:"\u3059\u3079\u3066\u3092\u5c55\u958b",expandTitle:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080 (Ctrl+E). \nCtrl+Click \u3067\u3059\u3079\u3066\u306e\u5b50\u8981\u7d20\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080",insert:"\u633f\u5165",insertTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u524d\u306b\u65b0\u3057\u3044\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u633f\u5165 (Ctrl+Ins)",insertSub:"\u633f\u5165\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e",object:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",ok:"\u5b9f\u884c",redo:"\u3084\u308a\u76f4\u3059 (Ctrl+Shift+Z)",removeText:"\u524a\u9664",removeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",removeField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",selectNode:"\u30ce\u30fc\u30c9\u3092\u9078\u629e...",showAll:"\u3059\u3079\u3066\u3092\u8868\u793a",showMore:"\u3082\u3063\u3068\u898b\u308b",showMoreStatus:"${totalChilds}\u500b\u306e\u30a2\u30a4\u30c6\u30e0\u306e\u3046\u3061 ${visibleChilds}\u500b\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002",sort:"\u4e26\u3079\u66ff\u3048",sortTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u4e26\u3079\u66ff\u3048",sortTitleShort:"\u4e26\u3079\u66ff\u3048",sortFieldLabel:"\u30d5\u30a3\u30fc\u30eb\u30c9:",sortDirectionLabel:"\u9806\u5e8f:",sortFieldTitle:"\u914d\u5217\u307e\u305f\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e26\u3073\u66ff\u3048\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",sortAscending:"\u6607\u9806",sortAscendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6607\u9806\u306b\u4e26\u3073\u66ff\u3048",sortDescending:"\u964d\u9806",sortDescendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u964d\u9806\u306b\u4e26\u3073\u66ff\u3048",string:"\u6587\u5b57\u5217",transform:"\u5909\u63db",transformTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",transformTitleShort:"\u5185\u5bb9\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",extract:"\u62bd\u51fa",extractTitle:"${type}\u3092\u62bd\u51fa",transformQueryTitle:"JMESPath\u30af\u30a8\u30ea\u3092\u5165\u529b",transformWizardLabel:"\u30a6\u30a3\u30b6\u30fc\u30c9",transformWizardFilter:"\u30d5\u30a3\u30eb\u30bf\u30fc",transformWizardSortBy:"\u4e26\u3073\u66ff\u3048",transformWizardSelectFields:"\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",transformQueryLabel:"\u30af\u30a8\u30ea",transformPreviewLabel:"\u30d7\u30ec\u30d3\u30e5\u30fc",type:"\u578b",typeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u5909\u66f4",openUrl:"Ctrl+Click \u307e\u305f\u306f Ctrl+Enter \u3067 \u65b0\u898f\u30a6\u30a3\u30f3\u30c9\u30a6\u3067URL\u3092\u958b\u304f",undo:"\u5143\u306b\u623b\u3059 (Ctrl+Z)",validationCannotMove:"\u5b50\u8981\u7d20\u306b\u79fb\u52d5\u3067\u304d\u307e\u305b\u3093 ",autoType:"\u30aa\u30fc\u30c8\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u306f\u5024\u304b\u3089\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002 (\u6587\u5b57\u5217\u30fb\u6570\u5024\u30fb\u30d6\u30fc\u30eb\u30fbnull)",objectType:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff1a \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u306a\u3044\u30ad\u30fc\u3068\u5024\u306e\u30da\u30a2\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002",arrayType:"\u914d\u5217\uff1a \u914d\u5217\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5024\u306e\u96c6\u5408\u4f53\u3067\u3059\u3002",stringType:"\u6587\u5b57\u5217\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u578b\u306f\u5024\u304b\u3089\u6c7a\u5b9a\u3055\u308c\u307e\u305b\u3093\u304c\u3001\u5e38\u306b\u6587\u5b57\u5217\u3068\u3057\u3066\u8fd4\u3055\u308c\u307e\u3059\u3002",modeCodeText:"\u30b3\u30fc\u30c9\u30e2\u30fc\u30c9",modeCodeTitle:"\u30cf\u30a4\u30e9\u30a4\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeFormText:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9",modeFormTitle:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTextText:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9",modeTextTitle:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTreeText:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9",modeTreeTitle:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeViewText:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9",modeViewTitle:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modePreviewText:"\u30d7\u30ec\u30d3\u30e5\u30fc",modePreviewTitle:"\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u5207\u308a\u66ff\u3048",examples:"\u4f8b",default:"\u30c7\u30d5\u30a9\u30eb\u30c8"},"fr-FR":{array:"Liste",auto:"Auto",appendText:"Ajouter",appendTitle:"Ajouter un champ de type 'auto' apr\xe8s ce champ (Ctrl+Shift+Ins)",appendSubmenuTitle:"S\xe9lectionner le type du champ \xe0 ajouter",appendTitleAuto:"Ajouter un champ de type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendant",ascendingTitle:"Trier les enfants de ce ${type} par ordre ascendant",actionsMenu:"Ouvrir le menu des actions (Ctrl+M)",collapseAll:"Regrouper",descending:"Descendant",descendingTitle:"Trier les enfants de ce ${type} par ordre descendant",drag:"D\xe9placer (Alt+Shift+Arrows)",duplicateKey:"Dupliquer la cl\xe9",duplicateText:"Dupliquer",duplicateTitle:"Dupliquer les champs s\xe9lectionn\xe9s (Ctrl+D)",duplicateField:"Dupliquer ce champ (Ctrl+D)",duplicateFieldError:"Dupliquer le nom de champ",cannotParseFieldError:"Champ impossible \xe0 parser en JSON",cannotParseValueError:"Valeur impossible \xe0 parser en JSON",empty:"vide",expandAll:"\xc9tendre",expandTitle:"\xc9tendre/regrouper ce champ (Ctrl+E). \nCtrl+Click pour \xe9tendre/regrouper avec tous les champs.",insert:"Ins\xe9rer",insertTitle:"Ins\xe9rer un champ de type 'auto' avant ce champ (Ctrl+Ins)",insertSub:"S\xe9lectionner le type de champ \xe0 ins\xe9rer",object:"Objet",ok:"Ok",redo:"Rejouer (Ctrl+Shift+Z)",removeText:"Supprimer",removeTitle:"Supprimer les champs s\xe9lectionn\xe9s (Ctrl+Del)",removeField:"Supprimer ce champ (Ctrl+Del)",searchTitle:"Rechercher champs et valeurs",searchNextResultTitle:"R\xe9sultat suivant (Enter)",searchPreviousResultTitle:"R\xe9sultat pr\xe9c\xe9dent (Shift + Enter)",selectNode:"S\xe9lectionner un n\u0153ud...",showAll:"voir tout",showMore:"voir plus",showMoreStatus:"${visibleChilds} \xe9l\xe9ments affich\xe9s de ${totalChilds}.",sort:"Trier",sortTitle:"Trier les champs de ce ${type}",sortTitleShort:"Trier",sortFieldLabel:"Champ:",sortDirectionLabel:"Direction:",sortFieldTitle:"S\xe9lectionner les champs permettant de trier les listes et objet",sortAscending:"Ascendant",sortAscendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre ascendant",sortDescending:"Descendant",sortDescendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre descendant",string:"Cha\xeene",transform:"Transformer",transformTitle:"Filtrer, trier, or transformer les enfants de ce ${type}",transformTitleShort:"Filtrer, trier ou transformer le contenu",extract:"Extraire",extractTitle:"Extraire ce ${type}",transformQueryTitle:"Saisir une requ\xeate JMESPath",transformWizardLabel:"Assistant",transformWizardFilter:"Filtrer",transformWizardSortBy:"Trier par",transformWizardSelectFields:"S\xe9lectionner les champs",transformQueryLabel:"Requ\xeate",transformPreviewLabel:"Pr\xe9visualisation",type:"Type",typeTitle:"Changer le type de ce champ",openUrl:"Ctrl+Click ou Ctrl+Enter pour ouvrir l'url dans une autre fen\xeatre",undo:"Annuler la derni\xe8re action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Champe de type "auto". Ce type de champ est automatiquement d\xe9termin\xe9 en fonction de la valeur et peut \xeatre de type "cha\xeene", "nombre", "bool\xe9en" ou null.',objectType:'Champ de type "objet". Un objet contient un ensemble non ordonn\xe9 de paires cl\xe9/valeur.',arrayType:'Champ de type "liste". Une liste contient une collection ordonn\xe9e de valeurs.',stringType:'Champ de type "cha\xeene". Ce type de champ n\'est pas d\xe9termin\xe9 en fonction de la valeur, mais retourne syst\xe9matiquement une cha\xeene de caract\xe8res.',modeEditorTitle:"Changer mode d'\xe9dition",modeCodeText:"Code",modeCodeTitle:"Activer surlignage code",modeFormText:"Formulaire",modeFormTitle:"Activer formulaire",modeTextText:"Texte",modeTextTitle:"Activer \xe9diteur texte",modeTreeText:"Arbre",modeTreeTitle:"Activer \xe9diteur arbre",modeViewText:"Lecture seule",modeViewTitle:"Activer vue arbre",modePreviewText:"Pr\xe9visualisation",modePreviewTitle:"Activer mode pr\xe9visualiser",examples:"Exemples",default:"D\xe9faut"}},r="undefined"!=typeof navigator?navigator.language||navigator.userLanguage:void 0,a=i.find((function(t){return t===r}))||"en";function s(t){var e;t&&((e=i.find((function(e){return e===t})))?a=e:console.error("Language not found"))}function l(t){if(t)for(var e in t)!function(e){i.find((function(t){return t===e}))||i.push(e),o[e]=Object.assign({},o.en,o[e],t[e])}(e)}function c(t,e,n){var i=o[n=n||a][t]||o.en[t]||t;if(e)for(var r in e)i=i.replace("${"+r+"}",e[r]);return i}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a}));var i=document.body,o=10485760,r=2e4,a=2147483648},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(12),o=n(0),r=n(1),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom={};var i=this,o=this.dom;this.anchor=void 0,this.items=e,this.eventListeners={},this.selection=void 0,this.onClose=n?n.close:void 0;var a=document.createElement("div");a.className="jsoneditor-contextmenu-root",o.root=a;var s=document.createElement("div");s.className="jsoneditor-contextmenu",o.menu=s,a.appendChild(s);var l=document.createElement("ul");l.className="jsoneditor-menu",s.appendChild(l),o.list=l,o.items=[];var c=document.createElement("button");c.type="button",o.focusButton=c;var h=document.createElement("li");h.style.overflow="hidden",h.style.height="0",h.appendChild(c),l.appendChild(h),function t(e,n,o){o.forEach((function(o){var a,s,l,c,h,u,d,p,g,m,f,v,b,y,_;"separator"===o.type?((a=document.createElement("div")).className="jsoneditor-separator",(s=document.createElement("li")).appendChild(a),e.appendChild(s)):(l={},c=document.createElement("li"),e.appendChild(c),(h=document.createElement("button")).type="button",h.className=o.className,l.button=h,o.title&&(h.title=o.title),o.click&&(h.onclick=function(t){t.preventDefault(),i.hide(),o.click()}),c.appendChild(h),o.submenu?((u=document.createElement("div")).className="jsoneditor-icon",h.appendChild(u),(d=document.createElement("div")).className="jsoneditor-text"+(o.click?"":" jsoneditor-right-margin"),d.appendChild(document.createTextNode(o.text)),h.appendChild(d),(p=o.click?(h.className+=" jsoneditor-default",(g=document.createElement("button")).type="button",(l.buttonExpand=g).className="jsoneditor-expand",(m=document.createElement("div")).className="jsoneditor-expand",g.appendChild(m),c.appendChild(g),o.submenuTitle&&(g.title=o.submenuTitle),g):((f=document.createElement("div")).className="jsoneditor-expand",h.appendChild(f),h)).onclick=function(t){t.preventDefault(),i._onExpandItem(l),p.focus()},l.subItems=v=[],b=document.createElement("ul"),(l.ul=b).className="jsoneditor-menu",b.style.height="0",c.appendChild(b),t(b,v,o.submenu)):((y=document.createElement("div")).className="jsoneditor-icon",h.appendChild(y),(_=document.createElement("div")).className="jsoneditor-text",_.appendChild(document.createTextNode(Object(r.c)(o.text))),h.appendChild(_)),n.push(l))}))}(l,this.dom.items,e),this.maxHeight=0,e.forEach((function(t){i.maxHeight=Math.max(i.maxHeight,24*(e.length+(t.submenu?t.submenu.length:0)))}))}var e;return(e=[{key:"_getVisibleButtons",value:function(){var t=[],e=this;return this.dom.items.forEach((function(n){t.push(n.button),n.buttonExpand&&t.push(n.buttonExpand),n.subItems&&n===e.expandedItem&&n.subItems.forEach((function(e){t.push(e.button),e.buttonExpand&&t.push(e.buttonExpand)}))})),t}},{key:"show",value:function(e,n,r){this.hide();var a=!0,s=e.parentNode,l=e.getBoundingClientRect(),c=s.getBoundingClientRect(),h=n.getBoundingClientRect(),u=this;this.dom.absoluteAnchor=Object(i.a)(e,n,(function(){u.hide()})),l.bottom+this.maxHeight<h.bottom||l.top-this.maxHeight>h.top&&(a=!1);var d,p=r?0:l.top-c.top;a?(d=e.offsetHeight,this.dom.menu.style.left="0",this.dom.menu.style.top=p+d+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left="0",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px"),this.dom.absoluteAnchor.appendChild(this.dom.root),this.selection=Object(o.getSelection)(),this.anchor=e,setTimeout((function(){u.dom.focusButton.focus()}),0),t.visibleMenu&&t.visibleMenu.hide(),t.visibleMenu=this}},{key:"hide",value:function(){this.dom.absoluteAnchor&&(this.dom.absoluteAnchor.destroy(),delete this.dom.absoluteAnchor),this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose()),t.visibleMenu===this&&(t.visibleMenu=void 0)}},{key:"_onExpandItem",value:function(t){var e,n=this,i=t===this.expandedItem,r=this.expandedItem;r&&(r.ul.style.height="0",r.ul.style.padding="",setTimeout((function(){n.expandedItem!==r&&(r.ul.style.display="",Object(o.removeClassName)(r.ul.parentNode,"jsoneditor-selected"))}),300),this.expandedItem=void 0),i||((e=t.ul).style.display="block",setTimeout((function(){if(n.expandedItem===t){for(var i=0,o=0;o<e.childNodes.length;o++)i+=e.childNodes[o].clientHeight;e.style.height=i+"px",e.style.padding="5px 10px"}}),0),Object(o.addClassName)(e.parentNode,"jsoneditor-selected"),this.expandedItem=t)}},{key:"_onKeyDown",value:function(t){var e,n,i,r,a=t.target,s=t.which,l=!1;27===s?(this.selection&&Object(o.setSelection)(this.selection),this.anchor&&this.anchor.focus(),this.hide(),l=!0):9===s?t.shiftKey?0===(n=(e=this._getVisibleButtons()).indexOf(a))&&(e[e.length-1].focus(),l=!0):(n=(e=this._getVisibleButtons()).indexOf(a))===e.length-1&&(e[0].focus(),l=!0):37===s?("jsoneditor-expand"===a.className&&(n=(e=this._getVisibleButtons()).indexOf(a),(i=e[n-1])&&i.focus()),l=!0):38===s?(n=(e=this._getVisibleButtons()).indexOf(a),(i=e[n-1])&&"jsoneditor-expand"===i.className&&(i=e[n-2]),(i=i||e[e.length-1])&&i.focus(),l=!0):39===s?(n=(e=this._getVisibleButtons()).indexOf(a),(r=e[n+1])&&"jsoneditor-expand"===r.className&&r.focus(),l=!0):40===s&&(n=(e=this._getVisibleButtons()).indexOf(a),(r=e[n+1])&&"jsoneditor-expand"===r.className&&(r=e[n+2]),(r=r||e[0])&&(r.focus(),l=!0),l=!0),l&&(t.stopPropagation(),t.preventDefault())}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();a.visibleMenu=void 0},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var i=n(34),o=n.n(i),r=n(0);function a(t,e){var n,i,o=e.sort,a=e.filter,s=e.projection,l="";return a?(n="@"!==a.field?["0"].concat(Object(r.parsePath)("."+a.field)):["0"],i="string"==typeof Object(r.get)(t,n)?a.value:Object(r.parseString)(a.value),l+="[? "+a.field+" "+a.relation+" `"+JSON.stringify(i)+"`]"):l+=Array.isArray(t)?"[*]":"@",o&&(l+="desc"===o.direction?" | reverse(sort_by(@, &"+o.field+"))":" | sort_by(@, &"+o.field+")"),s&&("]"!==l[l.length-1]&&(l+=" | [*]"),1===s.fields.length?l+="."+s.fields[0]:1<s.fields.length&&(l+=".{"+s.fields.map((function(t){var e=t.split(".");return e[e.length-1]+": "+t})).join(", ")+"}")),l}function s(t,e){return o.a.search(t,e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"showSortModal",(function(){return s}));var i=n(14),o=n.n(i),r=n(1),a=n(0);function s(t,e,n,i){var s=Array.isArray(e)?Object(a.getChildPaths)(e):[""],l=i&&i.path&&Object(a.contains)(s,i.path)?i.path:s[0],c=i&&i.direction||"asc",h='<div class="pico-modal-contents"><div class="pico-modal-header">'+Object(r.c)("sort")+"</div><form><table><tbody><tr>  <td>"+Object(r.c)("sortFieldLabel")+' </td>  <td class="jsoneditor-modal-input">  <div class="jsoneditor-select-wrapper">    <select id="field" title="'+Object(r.c)("sortFieldTitle")+'">    </select>  </div>  </td></tr><tr>  <td>'+Object(r.c)("sortDirectionLabel")+' </td>  <td class="jsoneditor-modal-input">  <div id="direction" class="jsoneditor-button-group"><input type="button" value="'+Object(r.c)("sortAscending")+'" title="'+Object(r.c)("sortAscendingTitle")+'" data-value="asc" class="jsoneditor-button-first jsoneditor-button-asc"/><input type="button" value="'+Object(r.c)("sortDescending")+'" title="'+Object(r.c)("sortDescendingTitle")+'" data-value="desc" class="jsoneditor-button-last jsoneditor-button-desc"/>  </div>  </td></tr><tr><td colspan="2" class="jsoneditor-modal-input jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+Object(r.c)("ok")+'" /></td></tr></tbody></table></form></div>';o()({parent:t,content:h,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-sort"}).afterCreate((function(t){var e=t.modalElem().querySelector("form"),i=t.modalElem().querySelector("#ok"),o=t.modalElem().querySelector("#field"),r=t.modalElem().querySelector("#direction");function a(t){r.value=t,r.className="jsoneditor-button-group jsoneditor-button-group-value-"+r.value}s.forEach((function(t){var e,n=document.createElement("option");n.text=""===(e=t)?"@":"."===e[0]?e.slice(1):e,n.value=t,o.appendChild(n)})),o.value=l||s[0],a(c||"asc"),r.onclick=function(t){a(t.target.getAttribute("data-value"))},i.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close(),n({path:o.value,direction:r.value})},e&&(e.onsubmit=i.onclick)})).afterClose((function(t){t.destroy()})).show()}},function(t,e,n){"use strict";n.r(e),n.d(e,"showTransformModal",(function(){return d}));var i=n(14),o=n.n(i),r=n(10),a=n.n(r),s=n(1);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,i){return"boolean"==typeof t||t instanceof Boolean||null===t||"number"==typeof t||t instanceof Number||"string"==typeof t||t instanceof String||t instanceof Date?JSON.stringify(t):Array.isArray(t)?function(t,e,n,i){for(var o=e?n+e:void 0,r=e?"[\n":"[",a=0;a<t.length;a++){var s=t[a];if(e&&(r+=o),r+=void 0!==s&&"function"!=typeof s?c(s,e,o,i):"null",a<t.length-1&&(r+=e?",\n":","),r.length>i)return r+"..."}return r+(e?"\n"+n+"]":"]")}(t,e,n,i):t&&"object"===l(t)?function(t,e,n,i){var o=e?n+e:void 0,r=!0,a=e?"{\n":"{";if("function"==typeof t.toJSON)return c(t.toJSON(),e,n,i);for(var s in t)if(function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,s)&&(r?r=!1:a+=e?",\n":",",a+=e?o+'"'+s+'": ':'"'+s+'":',(a+=c(t[s],e,o,i)).length>i))return a+"...";return a+(e?"\n"+n+"}":"}")}(t,e,n,i):void 0}var h=n(0),u=n(2);function d(t){var e=t.container,n=t.json,i=t.queryDescription,r=void 0===i?'Enter a <a href="http://jmespath.org" target="_blank">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>To learn JMESPath, go to <a href="http://jmespath.org/tutorial.html" target="_blank">the interactive tutorial</a>.':i,l=t.createQuery,d=t.executeQuery,p=t.onTransform,g=n,m='<label class="pico-modal-contents"><div class="pico-modal-header">'+Object(s.c)("transform")+"</div><p>"+r+'</p><div class="jsoneditor-jmespath-label">'+Object(s.c)("transformWizardLabel")+' </div><div id="wizard" class="jsoneditor-jmespath-block jsoneditor-jmespath-wizard">  <table class="jsoneditor-jmespath-wizard-table">    <tbody>      <tr>        <th>'+Object(s.c)("transformWizardFilter")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-filter-field" >            <select id="filterField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-relation" >            <select id="filterRelation">              <option value="==">==</option>              <option value="!=">!=</option>              <option value="<">&lt;</option>              <option value="<=">&lt;=</option>              <option value=">">&gt;</option>              <option value=">=">&gt;=</option>            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-value" >            <input type="text" class="value" placeholder="value..." id="filterValue" />          </div>        </td>      </tr>      <tr>        <th>'+Object(s.c)("transformWizardSortBy")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-sort-field">            <select id="sortField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-sort-order" >            <select id="sortOrder">              <option value="asc">Ascending</option>              <option value="desc">Descending</option>            </select>          </div>        </td>      </tr>      <tr id="selectFieldsPart">        <th>'+Object(s.c)("transformWizardSelectFields")+'</th>        <td class="jsoneditor-jmespath-filter">          <select class="jsoneditor-jmespath-select-fields" id="selectFields" multiple></select>        </td>      </tr>    </tbody>  </table></div><div class="jsoneditor-jmespath-label">'+Object(s.c)("transformQueryLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="query"             rows="4"             autocomplete="off"             autocorrect="off"             autocapitalize="off"             spellcheck="false"            title="'+Object(s.c)("transformQueryTitle")+'">[*]</textarea></div><div class="jsoneditor-jmespath-label">'+Object(s.c)("transformPreviewLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="preview"       class="jsoneditor-transform-preview"      readonly> </textarea></div><div class="jsoneditor-jmespath-block jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+Object(s.c)("ok")+'" autofocus /></div></div>';o()({parent:e,content:m,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-transform",focus:!1}).afterCreate((function(t){var e=t.modalElem(),i=e.querySelector("#wizard"),o=e.querySelector("#ok"),r=e.querySelector("#filterField"),s=e.querySelector("#filterRelation"),m=e.querySelector("#filterValue"),f=e.querySelector("#sortField"),v=e.querySelector("#sortOrder"),b=e.querySelector("#selectFields"),y=e.querySelector("#query"),_=e.querySelector("#preview");Array.isArray(g)||(i.style.fontStyle="italic",i.textContent="(wizard not available for objects, only for arrays)"),Object(h.getChildPaths)(n).forEach((function(t){var e=M(t),n=document.createElement("option");n.text=e,n.value=e,r.appendChild(n);var i=document.createElement("option");i.text=e,i.value=e,f.appendChild(i)}));var C,x=Object(h.getChildPaths)(n,!0).filter((function(t){return""!==t}));0<x.length?x.forEach((function(t){var e=M(t),n=document.createElement("option");n.text=e,n.value=e,b.appendChild(n)})):(C=e.querySelector("#selectFieldsPart"))&&(C.style.display="none");var w=new a.a(r,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),I=new a.a(s,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"compare..."}),A=new a.a(f,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),P=new a.a(v,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"order..."}),O=new a.a(b,{multiple:!0,clearable:!0,defaultSelected:!1,placeholder:"select fields..."});function M(t){return""===t?"@":"."===t[0]?t.slice(1):t}w.on("selectr.change",E),I.on("selectr.change",E),m.oninput=E,A.on("selectr.change",E),P.on("selectr.change",E),O.on("selectr.change",E),e.querySelector(".pico-modal-contents").onclick=function(t){"A"!==t.target.nodeName&&t.preventDefault()};var k=Object(h.debounce)((function(){try{var t=d(g,y.value);_.className="jsoneditor-transform-preview",_.value=function(t,e,n){var i,o,r=c(t,function(t,e){for(var n="";0<e--;)n+=" ";return n}(0,2),"",n);return r.length>n?(i=r,("number"==typeof(o=n)?i.slice(0,o):i)+"..."):r}(t,0,u.b),o.disabled=!1}catch(t){_.className="jsoneditor-transform-preview jsoneditor-error",_.value=t.toString(),o.disabled=!0}}),300);function S(t,e){try{y.value=l(t,e),o.disabled=!1,k()}catch(t){var n='Error: an error happened when executing "createQuery": '+(t.message||t.toString());y.value="",o.disabled=!0,_.className="jsoneditor-transform-preview jsoneditor-error",_.value=n}}function E(){var t={};if(r.value&&s.value&&m.value&&(t.filter={field:r.value,relation:s.value,value:m.value}),f.value&&v.value&&(t.sort={field:f.value,direction:v.value}),b.value){for(var e=[],i=0;i<b.options.length;i++)b.options[i].selected&&e.push(b.options[i].value);t.projection={fields:e}}S(n,t)}y.oninput=k,o.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close(),p(y.value)},S(n,{}),setTimeout((function(){y.select(),y.focus(),y.selectionStart=3,y.selectionEnd=3}))})).afterClose((function(t){t.destroy()})).show()}},function(t,e,n){"use strict";function i(t,e,n,i){var o=i?" !== ":" === ",r=i?" || ":" && ",a=i?"!":"",s=i?"":"!";switch(t){case"null":return e+o+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+r+"typeof "+e+o+'"object"'+r+s+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+o+'"number"'+r+s+"("+e+" % 1)"+r+e+o+e+(n?r+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+o+'"'+t+'"'+(n?r+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+o+'"'+t+'"'}}t.exports={copy:function(t,e){for(var n in e=e||{},t)e[n]=t[n];return e},checkDataType:i,checkDataTypes:function(t,e,n){switch(t.length){case 1:return i(t[0],e,n,!0);default:var o="",a=r(t);for(var s in a.array&&a.object&&(o=a.null?"(":"(!"+e+" || ",o+="typeof "+e+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)o+=(o?" && ":"")+i(s,e,n,!0);return o}},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var r=e[i];(o[r]||"array"===t&&"array"===r)&&(n[n.length]=r)}if(n.length)return n}else{if(o[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:r,getProperty:l,escapeQuotes:c,equal:n(18),ucs2length:n(47),varOccurences:function(t,e){var n=t.match(new RegExp(e+="[^0-9]","g"));return n?n.length:0},varReplace:function(t,e,n){return e+="([^0-9])",n=n.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),n+"$1")},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var n in t)if(e[n])return!0},schemaHasRulesExcept:function(t,e,n){if("boolean"==typeof t)return!t&&"not"!=n;for(var i in t)if(i!=n&&e[i])return!0},schemaUnknownRules:function(t,e){if("boolean"!=typeof t)for(var n in t)if(!e[n])return n},toQuotedString:h,getPathExpr:function(t,e,n,i){return p(t,n?"'/' + "+e+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,n){return p(t,h(n?"/"+g(e):l(e)))},getData:function(t,e,n){var i,o,r,a;if(""===t)return"rootData";if("/"==t[0]){if(!u.test(t))throw new Error("Invalid JSON-pointer: "+t);o=t,r="rootData"}else{if(!(a=t.match(d)))throw new Error("Invalid JSON-pointer: "+t);if(i=+a[1],"#"==(o=a[2])){if(e<=i)throw new Error("Cannot access property/index "+i+" levels up, current level is "+e);return n[e-i]}if(e<i)throw new Error("Cannot access data "+i+" levels up, current level is "+e);if(r="data"+(e-i||""),!o)return r}for(var s=r,c=o.split("/"),h=0;h<c.length;h++){var p=c[h];p&&(s+=" && "+(r+=l(m(p))))}return s},unescapeFragment:function(t){return m(decodeURIComponent(t))},unescapeJsonPointer:m,escapeFragment:function(t){return encodeURIComponent(g(t))},escapeJsonPointer:g};var o=r(["string","number","integer","boolean","null"]);function r(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function l(t){return"number"==typeof t?"["+t+"]":a.test(t)?"."+t:"['"+c(t)+"']"}function c(t){return t.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function h(t){return"'"+c(t)+"'"}var u=/^\/(?:[^~]|~0|~1)*$/,d=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(t,e){return'""'==t?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function g(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function m(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(3),o=n(1),r=function(){function t(e,n,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s={code:{text:Object(o.c)("modeCodeText"),title:Object(o.c)("modeCodeTitle"),click:function(){a("code")}},form:{text:Object(o.c)("modeFormText"),title:Object(o.c)("modeFormTitle"),click:function(){a("form")}},text:{text:Object(o.c)("modeTextText"),title:Object(o.c)("modeTextTitle"),click:function(){a("text")}},tree:{text:Object(o.c)("modeTreeText"),title:Object(o.c)("modeTreeTitle"),click:function(){a("tree")}},view:{text:Object(o.c)("modeViewText"),title:Object(o.c)("modeViewTitle"),click:function(){a("view")}},preview:{text:Object(o.c)("modePreviewText"),title:Object(o.c)("modePreviewTitle"),click:function(){a("preview")}}},l=[],c=0;c<n.length;c++){var h=n[c],u=s[h];if(!u)throw new Error('Unknown mode "'+h+'"');u.className="jsoneditor-type-modes"+(r===h?" jsoneditor-selected":""),l.push(u)}var d=s[r];if(!d)throw new Error('Unknown mode "'+r+'"');var p=d.text,g=document.createElement("button");g.type="button",g.className="jsoneditor-modes jsoneditor-separator",g.textContent=p+" \u25be",g.title=Object(o.c)("modeEditorTitle"),g.onclick=function(){new i.a(l).show(g,e)};var m=document.createElement("div");m.className="jsoneditor-modes",m.style.position="relative",m.appendChild(g),e.appendChild(m),this.dom={container:e,box:g,frame:m}}var e;return(e=[{key:"focus",value:function(){this.dom.box.focus()}},{key:"destroy",value:function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e.target||null,!this.target)throw new Error('FocusTracker constructor called without a "target" to track.');this.onFocus="function"==typeof e.onFocus?e.onFocus:null,this.onBlur="function"==typeof e.onBlur?e.onBlur:null,this._onClick=this._onEvent.bind(this),this._onKeyUp=(function(t){9!==t.which&&9!==t.keyCode||this._onEvent(t)}).bind(this),this.focusFlag=!1,this.firstEventFlag=!0,(this.onFocus||this.onBlur)&&(document.addEventListener("click",this._onClick),document.addEventListener("keyup",this._onKeyUp))}var e;return(e=[{key:"destroy",value:function(){document.removeEventListener("click",this._onClick),document.removeEventListener("keyup",this._onKeyUp),this._onEvent({target:document.body})}},{key:"_onEvent",value:function(t){var e=t.target;e===this.target||this.target.contains(e)||this.target.contains(document.activeElement)?this.focusFlag||(this.onFocus&&this.onFocus({type:"focus",target:this.target}),this.focusFlag=!0):(this.focusFlag||this.firstEventFlag)&&(this.onBlur&&this.onBlur({type:"blur",target:this.target}),this.focusFlag=!1,this.firstEventFlag&&(this.firstEventFlag=!1))}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e,n){"use strict";function i(){}var o={defaultSelected:!0,width:"auto",disabled:!1,searchable:!0,clearable:!1,sortSelected:!1,allowDeselect:!1,closeOnScroll:!1,nativeDropdown:!1,placeholder:"Select an option...",taggable:!1,tagPlaceholder:"Enter a tag..."};i.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){this._events=this._events||{},t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)},emit:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(t){for(var e=["on","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=i.prototype[e[n]]:t[e[n]]=i.prototype[e[n]];return t};var r={extend:function(t,e){var n;for(n in e=e||{},t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=t[n]));return e},each:function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(n,i,t[i],t);else for(var o=0,r=t.length;o<r;o++)e.call(n,o,t[o],t)},createElement:function(t,e){var n,i,o=document,r=o.createElement(t);if(e&&"[object Object]"===Object.prototype.toString.call(e))for(n in e)n in r?r[n]=e[n]:"html"===n?r.textContent=e[n]:"text"===n?(i=o.createTextNode(e[n]),r.appendChild(i)):r.setAttribute(n,e[n]);return r},hasClass:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){r.hasClass(t,e)||(t.classList?t.classList.add(e):t.className=t.className.trim()+" "+e)},removeClass:function(t,e){r.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},closest:function(t,e){return t&&t!==document.body&&(e(t)?t:r.closest(t.parentNode,e))},isInt:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},debounce:function(t,e,n){var i;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(o,r)}),e),a&&t.apply(o,r)}},rect:function(t,e){var n=window,i=t.getBoundingClientRect(),o=e?n.pageXOffset:0,r=e?n.pageYOffset:0;return{bottom:i.bottom+r,height:i.height,left:i.left+o,right:i.right+o,top:i.top+r,width:i.width}},includes:function(t,e){return-1<t.indexOf(e)},truncate:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}};function a(t,e){return t.hasOwnProperty(e)&&(!0===t[e]||t[e].length)}function s(t,e,n){t.parentNode?t.parentNode.parentNode||e.appendChild(t.parentNode):e.appendChild(t),r.removeClass(t,"excluded"),n||(t.textContent=t.textContent+"")}function l(){var t,e;this.items.length&&(t=document.createDocumentFragment(),this.config.pagination?(e=this.pages.slice(0,this.pageIndex),r.each(e,(function(e,n){r.each(n,(function(e,n){s(n,t,this.customOption)}),this)}),this)):r.each(this.items,(function(e,n){s(n,t,this.customOption)}),this),t.childElementCount&&(r.removeClass(this.items[this.navIndex],"active"),this.navIndex=t.querySelector(".selectr-option").idx,r.addClass(this.items[this.navIndex],"active")),this.tree.appendChild(t))}function c(t,e){e=e||t;var n=this.customOption?this.config.renderOption(e):t.textContent,i=r.createElement("li",{class:"selectr-option",html:n,role:"treeitem","aria-selected":!1});return i.idx=t.idx,this.items.push(i),t.defaultSelected&&this.defaultSelected.push(t.idx),t.disabled&&(i.disabled=!0,r.addClass(i,"disabled")),i}function h(){(this.config.searchable||this.config.taggable)&&(this.input.value=null,this.searching=!1,this.config.searchable&&r.removeClass(this.inputContainer,"active"),r.hasClass(this.container,"notice")&&(r.removeClass(this.container,"notice"),r.addClass(this.container,"open"),this.input.focus()),r.each(this.items,(function(t,e){r.removeClass(e,"excluded"),this.customOption||(e.textContent=e.textContent+"")}),this))}function u(t,e){if(e=e||{},!t)throw new Error("You must supply either a HTMLSelectElement or a CSS3 selector string.");if("string"==typeof(this.el=t)&&(this.el=document.querySelector(t)),null===this.el)throw new Error("The element you passed to Selectr can not be found.");if("select"!==this.el.nodeName.toLowerCase())throw new Error("The element you passed to Selectr is not a HTMLSelectElement.");this.render(e)}var d=function(){var t,e=this.tree;e.scrollHeight-e.offsetHeight<=e.scrollTop&&this.pageIndex<this.pages.length&&(t=document.createDocumentFragment(),r.each(this.pages[this.pageIndex],(function(e,n){s(n,t,this.customOption)}),this),e.appendChild(t),this.pageIndex++,this.emit("selectr.paginate",{items:this.items.length,total:this.data.length,page:this.pageIndex,pages:this.pages.length}))};u.prototype.render=function(t){var e;this.rendered||(this.config=r.extend(o,t),this.originalType=this.el.type,this.originalIndex=this.el.tabIndex,this.defaultSelected=[],this.originalOptionCount=this.el.options.length,(this.config.multiple||this.config.taggable)&&(this.el.multiple=!0),this.disabled=a(this.config,"disabled"),this.opened=!1,this.config.taggable&&(this.config.searchable=!1),this.navigating=!1,this.mobileDevice=!1,/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)&&(this.mobileDevice=!0),this.customOption=this.config.hasOwnProperty("renderOption")&&"function"==typeof this.config.renderOption,this.customSelected=this.config.hasOwnProperty("renderSelection")&&"function"==typeof this.config.renderSelection,i.mixin(this),(function(){this.requiresPagination=this.config.pagination&&0<this.config.pagination,a(this.config,"width")&&(r.isInt(this.config.width)?this.width=this.config.width+"px":"auto"===this.config.width?this.width="100%":r.includes(this.config.width,"%")&&(this.width=this.config.width)),this.container=r.createElement("div",{class:"selectr-container"}),this.config.customClass&&r.addClass(this.container,this.config.customClass),r.addClass(this.container,this.mobileDevice?"selectr-mobile":"selectr-desktop"),this.el.tabIndex=-1,r.addClass(this.el,this.config.nativeDropdown||this.mobileDevice?"selectr-visible":"selectr-hidden"),this.selected=r.createElement("div",{class:"selectr-selected",disabled:this.disabled,tabIndex:1,"aria-expanded":!1}),this.label=r.createElement(this.el.multiple?"ul":"span",{class:"selectr-label"});var t,e=r.createElement("div",{class:"selectr-options-container"});this.tree=r.createElement("ul",{class:"selectr-options",role:"tree","aria-hidden":!0,"aria-expanded":!1}),this.notice=r.createElement("div",{class:"selectr-notice"}),this.el.setAttribute("aria-hidden",!0),this.disabled&&(this.el.disabled=!0),this.el.multiple&&(r.addClass(this.label,"selectr-tags"),r.addClass(this.container,"multiple"),this.tags=[],this.selectedValues=this.getSelectedProperties("value"),this.selectedIndexes=this.getSelectedProperties("idx")),this.selected.appendChild(this.label),this.config.clearable&&(this.selectClear=r.createElement("button",{class:"selectr-clear",type:"button"}),this.container.appendChild(this.selectClear),r.addClass(this.container,"clearable")),this.config.taggable&&(t=r.createElement("li",{class:"input-tag"}),this.input=r.createElement("input",{class:"selectr-tag-input",placeholder:this.config.tagPlaceholder,tagIndex:0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),t.appendChild(this.input),this.label.appendChild(t),r.addClass(this.container,"taggable"),this.tagSeperators=[","],this.config.tagSeperators&&(this.tagSeperators=this.tagSeperators.concat(this.config.tagSeperators))),this.config.searchable&&(this.input=r.createElement("input",{class:"selectr-input",tagIndex:-1,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),this.inputClear=r.createElement("button",{class:"selectr-input-clear",type:"button"}),this.inputContainer=r.createElement("div",{class:"selectr-input-container"}),this.inputContainer.appendChild(this.input),this.inputContainer.appendChild(this.inputClear),e.appendChild(this.inputContainer)),e.appendChild(this.notice),e.appendChild(this.tree),this.items=[],this.options=[],this.el.options.length&&(this.options=[].slice.call(this.el.options));var n,i,o,s=!1,l=0;this.el.children.length&&r.each(this.el.children,(function(t,e){"OPTGROUP"===e.nodeName?(s=r.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+e.label+"</li>"}),r.each(e.children,(function(t,e){e.idx=l,s.appendChild(c.call(this,e,s)),l++}),this)):(e.idx=l,c.call(this,e),l++)}),this),this.config.data&&Array.isArray(this.config.data)&&(n=!(this.data=[]),s=!1,l=0,r.each(this.config.data,(function(t,e){a(e,"children")?(n=r.createElement("optgroup",{label:e.text}),s=r.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+e.text+"</li>"}),r.each(e.children,(function(t,e){(i=new Option(e.text,e.value,!1,e.hasOwnProperty("selected")&&!0===e.selected)).disabled=a(e,"disabled"),this.options.push(i),n.appendChild(i),i.idx=l,s.appendChild(c.call(this,i,e)),this.data[l]=e,l++}),this)):((i=new Option(e.text,e.value,!1,e.hasOwnProperty("selected")&&!0===e.selected)).disabled=a(e,"disabled"),this.options.push(i),i.idx=l,c.call(this,i,e),this.data[l]=e,l++)}),this)),this.setSelected(!0);for(var h=this.navIndex=0;h<this.items.length;h++)if(!r.hasClass(o=this.items[h],"disabled")){r.addClass(o,"active"),this.navIndex=h;break}this.requiresPagination&&(this.pageIndex=1,this.paginate()),this.container.appendChild(this.selected),this.container.appendChild(e),this.placeEl=r.createElement("div",{class:"selectr-placeholder"}),this.setPlaceholder(),this.selected.appendChild(this.placeEl),this.disabled&&this.disable(),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el)}).call(this),this.bindEvents(),this.update(),this.optsRect=r.rect(this.tree),this.rendered=!0,this.el.multiple||(this.el.selectedIndex=this.selectedIndex),e=this,setTimeout((function(){e.emit("selectr.init")}),20))},u.prototype.getSelected=function(){return this.el.querySelectorAll("option:checked")},u.prototype.getSelectedProperties=function(t){var e=this.getSelected();return[].slice.call(e).map((function(e){return e[t]})).filter((function(t){return null!=t}))},u.prototype.bindEvents=function(){var t=this;this.events={},this.events.dismiss=(function(t){this.container.contains(t.target)||!this.opened&&!r.hasClass(this.container,"notice")||this.close()}).bind(this),this.events.navigate=(function(t){if(t=t||window.event,this.items.length&&this.opened&&r.includes([13,38,40],t.which)){if(t.preventDefault(),13===t.which)return!(this.config.taggable&&0<this.input.value.length)&&this.change(this.navIndex);var e,n=this.items[this.navIndex];switch(t.which){case 38:(e=0)<this.navIndex&&this.navIndex--;break;case 40:e=1,this.navIndex<this.items.length-1&&this.navIndex++}for(this.navigating=!0;r.hasClass(this.items[this.navIndex],"disabled")||r.hasClass(this.items[this.navIndex],"excluded");)if(e?this.navIndex++:this.navIndex--,this.searching){if(this.navIndex>this.tree.lastElementChild.idx){this.navIndex=this.tree.lastElementChild.idx;break}if(this.navIndex<this.tree.firstElementChild.idx){this.navIndex=this.tree.firstElementChild.idx;break}}var i=r.rect(this.items[this.navIndex]);e?(0===this.navIndex?this.tree.scrollTop=0:i.top+i.height>this.optsRect.top+this.optsRect.height&&(this.tree.scrollTop=this.tree.scrollTop+(i.top+i.height-(this.optsRect.top+this.optsRect.height))),this.navIndex===this.tree.childElementCount-1&&this.requiresPagination&&d.call(this)):0===this.navIndex?this.tree.scrollTop=0:i.top-this.optsRect.top<0&&(this.tree.scrollTop=this.tree.scrollTop+(i.top-this.optsRect.top)),n&&r.removeClass(n,"active"),r.addClass(this.items[this.navIndex],"active")}else this.navigating=!1}).bind(this),this.events.reset=this.reset.bind(this),(this.config.nativeDropdown||this.mobileDevice)&&(this.container.addEventListener("touchstart",(function(e){e.changedTouches[0].target===t.el&&t.toggle()})),(this.config.nativeDropdown||this.mobileDevice)&&this.container.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),e.target===t.el&&t.toggle()})),this.el.addEventListener("change",(function(e){var n,i;t.el.multiple?(n=t.getSelectedProperties("idx"),i=function(t,e){for(var n,i=[],o=t.slice(0),r=0;r<e.length;r++)-1<(n=o.indexOf(e[r]))?o.splice(n,1):i.push(e[r]);return[i,o]}(t.selectedIndexes,n),r.each(i[0],(function(e,n){t.select(n)}),t),r.each(i[1],(function(e,n){t.deselect(n)}),t)):-1<t.el.selectedIndex&&t.select(t.el.selectedIndex)}))),this.config.nativeDropdown&&this.container.addEventListener("keydown",(function(e){"Enter"===e.key&&t.selected===document.activeElement&&(t.toggle(),setTimeout((function(){t.el.focus()}),200))})),this.selected.addEventListener("click",(function(e){t.disabled||t.toggle(),e.preventDefault(),e.stopPropagation()})),this.label.addEventListener("click",(function(e){r.hasClass(e.target,"selectr-tag-remove")&&t.deselect(e.target.parentNode.idx)})),this.selectClear&&this.selectClear.addEventListener("click",this.clear.bind(this)),this.tree.addEventListener("mousedown",(function(t){t.preventDefault()})),this.tree.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var n=r.closest(e.target,(function(t){return t&&r.hasClass(t,"selectr-option")}));n&&(r.hasClass(n,"disabled")||(r.hasClass(n,"selected")?(t.el.multiple||!t.el.multiple&&t.config.allowDeselect)&&t.deselect(n.idx):t.select(n.idx),t.opened&&!t.el.multiple&&t.close()))})),this.tree.addEventListener("mouseover",(function(e){r.hasClass(e.target,"selectr-option")&&(r.hasClass(e.target,"disabled")||(r.removeClass(t.items[t.navIndex],"active"),r.addClass(e.target,"active"),t.navIndex=[].slice.call(t.items).indexOf(e.target)))})),this.config.searchable&&(this.input.addEventListener("focus",(function(e){t.searching=!0})),this.input.addEventListener("blur",(function(e){t.searching=!1})),this.input.addEventListener("keyup",(function(e){t.search(),t.config.taggable||(this.value.length?r.addClass(this.parentNode,"active"):r.removeClass(this.parentNode,"active"))})),this.inputClear.addEventListener("click",(function(e){t.input.value=null,h.call(t),t.tree.childElementCount||l.call(t)}))),this.config.taggable&&this.input.addEventListener("keyup",(function(e){var n;t.search(),t.config.taggable&&this.value.length&&(n=this.value.trim(),13!==e.which&&!r.includes(t.tagSeperators,e.key)||(r.each(t.tagSeperators,(function(t,e){n=n.replace(e,"")})),t.add({value:n,text:n,selected:!0},!0)?(t.close(),h.call(t)):(this.value="",t.setMessage("That tag is already in use."))))})),this.update=r.debounce((function(){t.opened&&t.config.closeOnScroll&&t.close(),t.width&&(t.container.style.width=t.width),t.invert()}),50),this.requiresPagination&&(this.paginateItems=r.debounce((function(){d.call(this)}),50),this.tree.addEventListener("scroll",this.paginateItems.bind(this))),document.addEventListener("click",this.events.dismiss),window.addEventListener("keydown",this.events.navigate),window.addEventListener("resize",this.update),window.addEventListener("scroll",this.update),this.el.form&&this.el.form.addEventListener("reset",this.events.reset)},u.prototype.setSelected=function(t){var e;this.config.data||this.el.multiple||!this.el.options.length||(0===this.el.selectedIndex&&(this.el.options[0].defaultSelected||this.config.defaultSelected||(this.el.selectedIndex=-1)),this.selectedIndex=this.el.selectedIndex,-1<this.selectedIndex&&this.select(this.selectedIndex)),this.config.multiple&&"select-one"===this.originalType&&!this.config.data&&this.el.options[0].selected&&!this.el.options[0].defaultSelected&&(this.el.options[0].selected=!1),r.each(this.options,(function(t,e){e.selected&&e.defaultSelected&&this.select(e.idx)}),this),this.config.selectedValue&&this.setValue(this.config.selectedValue),this.config.data&&(!this.el.multiple&&this.config.defaultSelected&&this.el.selectedIndex<0&&this.select(0),e=0,r.each(this.config.data,(function(t,n){a(n,"children")?r.each(n.children,(function(t,n){n.hasOwnProperty("selected")&&!0===n.selected&&this.select(e),e++}),this):(n.hasOwnProperty("selected")&&!0===n.selected&&this.select(e),e++)}),this))},u.prototype.destroy=function(){this.rendered&&(this.emit("selectr.destroy"),"select-one"===this.originalType&&(this.el.multiple=!1),this.config.data&&(this.el.textContent=""),r.removeClass(this.el,"selectr-hidden"),this.el.form&&r.off(this.el.form,"reset",this.events.reset),r.off(document,"click",this.events.dismiss),r.off(document,"keydown",this.events.navigate),r.off(window,"resize",this.update),r.off(window,"scroll",this.update),this.container.parentNode.replaceChild(this.el,this.container),this.rendered=!1)},u.prototype.change=function(t){var e=this.options[t];e.disabled||(e.selected&&r.hasClass(this.items[t],"selected")?this.deselect(t):this.select(t),this.opened&&!this.el.multiple&&this.close())},u.prototype.select=function(t){var e=this.items[t],n=[].slice.call(this.el.options),i=this.options[t];if(this.el.multiple){if(r.includes(this.selectedIndexes,t))return!1;if(this.config.maxSelections&&this.tags.length===this.config.maxSelections)return this.setMessage("A maximum of "+this.config.maxSelections+" items can be selected.",!0),!1;this.selectedValues.push(i.value),this.selectedIndexes.push(t),(function(t){var e,n,i=this,o=document.createDocumentFragment(),a=this.options[t.idx],s=this.customSelected?this.config.renderSelection(this.data?this.data[t.idx]:a):a.textContent,l=r.createElement("li",{class:"selectr-tag",html:s}),c=r.createElement("button",{class:"selectr-tag-remove",type:"button"});l.appendChild(c),l.idx=t.idx,l.tag=a.value,this.tags.push(l),this.config.sortSelected?(e=this.tags.slice(),n=function(t,e){t.replace(/(\d+)|(\D+)/g,(function(t,n,i){e.push([n||1/0,i||""])}))},e.sort((function(t,e){var o,r,a=[],s=[];for(!0===i.config.sortSelected?(o=t.tag,r=e.tag):"text"===i.config.sortSelected&&(o=t.textContent,r=e.textContent),n(o,a),n(r,s);a.length&&s.length;){var l=a.shift(),c=s.shift(),h=l[0]-c[0]||l[1].localeCompare(c[1]);if(h)return h}return a.length-s.length})),r.each(e,(function(t,e){o.appendChild(e)})),this.label.textContent=""):o.appendChild(l),this.config.taggable?this.label.insertBefore(o,this.input.parentNode):this.label.appendChild(o)}).call(this,e)}else this.label.textContent=this.customSelected?this.config.renderSelection(this.data?this.data[t]:i):i.textContent,this.selectedValue=i.value,this.selectedIndex=t,r.each(this.options,(function(e,n){var i=this.items[e];e!==t&&(i&&r.removeClass(i,"selected"),n.selected=!1,n.removeAttribute("selected"))}),this);r.includes(n,i)||this.el.add(i),e.setAttribute("aria-selected",!0),r.addClass(e,"selected"),r.addClass(this.container,"has-selected"),i.selected=!0,i.setAttribute("selected",""),this.emit("selectr.change",i),this.emit("selectr.select",i)},u.prototype.deselect=function(t,e){var n=this.items[t],i=this.options[t];if(this.el.multiple){var o=this.selectedIndexes.indexOf(t);this.selectedIndexes.splice(o,1);var a=this.selectedValues.indexOf(i.value);this.selectedValues.splice(a,1),(function(t){var e=!1;r.each(this.tags,(function(n,i){i.idx===t.idx&&(e=i)}),this),e&&(this.label.removeChild(e),this.tags.splice(this.tags.indexOf(e),1))}).call(this,n),this.tags.length||r.removeClass(this.container,"has-selected")}else{if(!e&&!this.config.clearable&&!this.config.allowDeselect)return!1;this.label.textContent="",this.selectedValue=null,this.el.selectedIndex=this.selectedIndex=-1,r.removeClass(this.container,"has-selected")}this.items[t].setAttribute("aria-selected",!1),r.removeClass(this.items[t],"selected"),i.selected=!1,i.removeAttribute("selected"),this.emit("selectr.change",null),this.emit("selectr.deselect",i)},u.prototype.setValue=function(t){var e=Array.isArray(t);if(e||(t=t.toString().trim()),!this.el.multiple&&e)return!1;r.each(this.options,(function(n,i){(e&&r.includes(t.toString(),i.value)||i.value===t)&&this.change(i.idx)}),this)},u.prototype.getValue=function(t,e){var n,i;return this.el.multiple?t?this.selectedIndexes.length&&(i={values:[]},r.each(this.selectedIndexes,(function(t,e){var n=this.options[e];i.values[t]={value:n.value,text:n.textContent}}),this)):i=this.selectedValues.slice():i=t?{value:(n=this.options[this.selectedIndex]).value,text:n.textContent}:this.selectedValue,t&&e&&(i=JSON.stringify(i)),i},u.prototype.add=function(t,e){if(t){if(this.data=this.data||[],this.items=this.items||[],this.options=this.options||[],Array.isArray(t))r.each(t,(function(t,n){this.add(n,e)}),this);else if("[object Object]"===Object.prototype.toString.call(t)){if(e){var n=!1;if(r.each(this.options,(function(e,i){i.value.toLowerCase()===t.value.toLowerCase()&&(n=!0)})),n)return!1}var i=r.createElement("option",t);return this.data.push(t),this.options.push(i),i.idx=0<this.options.length?this.options.length-1:0,c.call(this,i),t.selected&&this.select(i.idx),i}return this.setPlaceholder(),this.config.pagination&&this.paginate(),!0}},u.prototype.remove=function(t){var e,n=[];Array.isArray(t)?r.each(t,(function(e,i){r.isInt(i)?n.push(this.getOptionByIndex(i)):"string"==typeof t&&n.push(this.getOptionByValue(i))}),this):r.isInt(t)?n.push(this.getOptionByIndex(t)):"string"==typeof t&&n.push(this.getOptionByValue(t)),n.length&&(r.each(n,(function(t,n){e=n.idx,this.el.remove(n),this.options.splice(e,1);var i=this.items[e].parentNode;i&&i.removeChild(this.items[e]),this.items.splice(e,1),r.each(this.options,(function(t,e){e.idx=t,this.items[t].idx=t}),this)}),this),this.setPlaceholder(),this.config.pagination&&this.paginate())},u.prototype.removeAll=function(){this.clear(!0),r.each(this.el.options,(function(t,e){this.el.remove(e)}),this),r.truncate(this.tree),this.items=[],this.options=[],this.data=[],this.navIndex=0,this.requiresPagination&&(this.requiresPagination=!1,this.pageIndex=1,this.pages=[]),this.setPlaceholder()},u.prototype.search=function(t){var e,n;this.navigating||(t=t||this.input.value,e=document.createDocumentFragment(),this.removeMessage(),r.truncate(this.tree),1<t.length?(r.each(this.options,(function(n,i){var o,a,l=this.items[i.idx];r.includes(i.textContent.toLowerCase(),t.toLowerCase())&&!i.disabled?(s(l,e,this.customOption),r.removeClass(l,"excluded"),this.customOption||(l.textContent="",(o=function(t,e){var n=new RegExp(t,"i").exec(e);if(n){var i=n.index,o=n.index+n[0].length;return{before:e.substring(0,i),match:e.substring(i,o),after:e.substring(o)}}return null}(t,i.textContent))&&(l.appendChild(document.createTextNode(o.before)),(a=document.createElement("span")).className="selectr-match",a.appendChild(document.createTextNode(o.match)),l.appendChild(a),l.appendChild(document.createTextNode(o.after))))):r.addClass(l,"excluded")}),this),e.childElementCount?(n=e.firstElementChild,r.removeClass(this.items[this.navIndex],"active"),this.navIndex=n.idx,r.addClass(n,"active")):this.config.taggable||this.setMessage("no results.")):l.call(this),this.tree.appendChild(e))},u.prototype.toggle=function(){this.disabled||(this.opened?this.close():this.open())},u.prototype.open=function(){var t=this;return!!this.options.length&&(this.opened||this.emit("selectr.open"),this.opened=!0,this.mobileDevice||this.config.nativeDropdown?(r.addClass(this.container,"native-open"),void(this.config.data&&r.each(this.options,(function(t,e){this.el.add(e)}),this))):(r.addClass(this.container,"open"),l.call(this),this.invert(),this.tree.scrollTop=0,r.removeClass(this.container,"notice"),this.selected.setAttribute("aria-expanded",!0),this.tree.setAttribute("aria-hidden",!1),this.tree.setAttribute("aria-expanded",!0),void(this.config.searchable&&!this.config.taggable&&setTimeout((function(){t.input.focus(),t.input.tabIndex=0}),10))))},u.prototype.close=function(){var t;this.opened&&this.emit("selectr.close"),this.opened=!1,this.mobileDevice||this.config.nativeDropdown?r.removeClass(this.container,"native-open"):(t=r.hasClass(this.container,"notice"),this.config.searchable&&!t&&(this.input.blur(),this.input.tabIndex=-1,this.searching=!1),t&&(r.removeClass(this.container,"notice"),this.notice.textContent=""),r.removeClass(this.container,"open"),r.removeClass(this.container,"native-open"),this.selected.setAttribute("aria-expanded",!1),this.tree.setAttribute("aria-hidden",!0),this.tree.setAttribute("aria-expanded",!1),r.truncate(this.tree),h.call(this))},u.prototype.enable=function(){this.disabled=!1,this.el.disabled=!1,this.selected.tabIndex=this.originalIndex,this.el.multiple&&r.each(this.tags,(function(t,e){e.lastElementChild.tabIndex=0})),r.removeClass(this.container,"selectr-disabled")},u.prototype.disable=function(t){t||(this.el.disabled=!0),this.selected.tabIndex=-1,this.el.multiple&&r.each(this.tags,(function(t,e){e.lastElementChild.tabIndex=-1})),this.disabled=!0,r.addClass(this.container,"selectr-disabled")},u.prototype.reset=function(){this.disabled||(this.clear(),this.setSelected(!0),r.each(this.defaultSelected,(function(t,e){this.select(e)}),this),this.emit("selectr.reset"))},u.prototype.clear=function(t){var e;this.el.multiple?this.selectedIndexes.length&&(e=this.selectedIndexes.slice(),r.each(e,(function(t,e){this.deselect(e)}),this)):-1<this.selectedIndex&&this.deselect(this.selectedIndex,t),this.emit("selectr.clear")},u.prototype.serialise=function(t){var e=[];return r.each(this.options,(function(t,n){var i={value:n.value,text:n.textContent};n.selected&&(i.selected=!0),n.disabled&&(i.disabled=!0),e[t]=i})),t?JSON.stringify(e):e},u.prototype.serialize=function(t){return this.serialise(t)},u.prototype.setPlaceholder=function(t){t=t||this.config.placeholder||this.el.getAttribute("placeholder"),this.options.length||(t="No options available"),this.placeEl.textContent=t},u.prototype.paginate=function(){if(this.items.length){var t=this;return this.pages=this.items.map((function(e,n){return n%t.config.pagination==0?t.items.slice(n,n+t.config.pagination):null})).filter((function(t){return t})),this.pages}},u.prototype.setMessage=function(t,e){e&&this.close(),r.addClass(this.container,"notice"),this.notice.textContent=t},u.prototype.removeMessage=function(){r.removeClass(this.container,"notice"),this.notice.textContent=""},u.prototype.invert=function(){var t=r.rect(this.selected),e=window.innerHeight;t.top+t.height+this.tree.parentNode.offsetHeight>e?(r.addClass(this.container,"inverted"),this.isInverted=!0):(r.removeClass(this.container,"inverted"),this.isInverted=!1),this.optsRect=r.rect(this.tree)},u.prototype.getOptionByIndex=function(t){return this.options[t]},u.prototype.getOptionByValue=function(t){for(var e=!1,n=0,i=this.options.length;n<i;n++)if(this.options[n].value.trim()===t.toString().trim()){e=this.options[n];break}return e},t.exports=u},function(t,e){t.exports=function t(e,n){"use strict";function i(e){return t.insensitive&&(""+e).toLowerCase()||""+e}var o,r,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,h=/^0/,u=i(e).replace(s,"")||"",d=i(n).replace(s,"")||"",p=u.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(u.match(c),16)||1!==p.length&&u.match(l)&&Date.parse(u),f=parseInt(d.match(c),16)||m&&d.match(l)&&Date.parse(d)||null;if(f){if(m<f)return-1;if(f<m)return 1}for(var v=0,b=Math.max(p.length,g.length);v<b;v++){if(o=!(p[v]||"").match(h)&&parseFloat(p[v])||p[v]||0,r=!(g[v]||"").match(h)&&parseFloat(g[v])||g[v]||0,isNaN(o)!==isNaN(r))return isNaN(o)?1:-1;if(typeof o!=typeof r&&(o+="",r+=""),o<r)return-1;if(r<o)return 1}return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(0);function o(t,e,n){var o,r,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s="function"==typeof(o=t).getRootNode?o.getRootNode():window,l={},c=t.getBoundingClientRect(),h=e.getBoundingClientRect(),u=document.createElement("div");function d(){if(u&&u.parentNode){for(var e in u.parentNode.removeChild(u),l){var o;Object.prototype.hasOwnProperty.call(l,e)&&((o=l[e])&&Object(i.removeEventListener)(s,e,o),delete l[e])}"function"==typeof n&&n(t)}}function p(t){var e;(e=t.target)===u||Object(i.isChildOf)(e,u)||d()}return u.className="jsoneditor-anchor",u.style.position="absolute",u.style.left=c.left-h.left+"px",u.style.top=c.top-h.top+"px",u.style.width=c.width-2+"px",u.style.height=c.height-2+"px",u.style.boxSizing="border-box",e.appendChild(u),l.mousedown=Object(i.addEventListener)(s,"mousedown",p),l.mousewheel=Object(i.addEventListener)(s,"mousewheel",p),a&&(r=null,u.onmouseover=function(){clearTimeout(r),r=null},u.onmouseout=function(){r=r||setTimeout(d,200)}),u.destroy=d,u}},function(t,e,n){var i;if(window.Picker)i=window.Picker;else try{i=n(41)}catch(t){}t.exports=i},function(t,e,n){var i,o,r;!function(){"use strict";o=[],void 0===(r="function"==typeof(i=function(){function t(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType}function e(){var t=[];return{watch:t.push.bind(t),trigger:function(e,n){for(var i=!0,o={detail:n,preventDefault:function(){i=!1}},r=0;r<t.length;r++)t[r](e,o);return i}}}function n(t){return"none"===window.getComputedStyle(t).display}function i(t){this.elem=t}i.make=function(t,e){"string"==typeof t&&(t=document.querySelector(t));var n=document.createElement(e||"div");return(t||document.body).appendChild(n),new i(n)},i.prototype={child:function(t){return i.make(this.elem,t)},stylize:function(t){for(var e in void 0!==(t=t||{}).opacity&&(t.filter="alpha(opacity="+100*t.opacity+")"),t)t.hasOwnProperty(e)&&(this.elem.style[e]=t[e]);return this},clazz:function(t){return this.elem.className+=" "+t,this},html:function(e){return t(e)?this.elem.appendChild(e):this.elem.innerHTML=e,this},onClick:function(t){return this.elem.addEventListener("click",t),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(t,e){return void 0!==e&&this.elem.setAttribute(t,e),this},anyAncestor:function(t){for(var e=this.elem;e;){if(t(new i(e)))return!0;e=e.parentNode}return!1},isVisible:function(){return!n(this.elem)}};var o=1;function r(t){return function(){return t().elem}}var a=e(),s=e();return document.documentElement.addEventListener("keydown",(function(t){var e=t.which||t.keyCode;27===e?a.trigger():9===e&&s.trigger(t)})),function(l){"string"!=typeof l&&!t(l)||(l={content:l});var c=e(),h=e(),u=e(),d=e(),p=e();function g(t,e){var n=l[t];return"function"==typeof n&&(n=n(e)),void 0===n?e:n}var m,f,v,b,y,_,C,x,w,I=S.bind(window,"modal"),A=S.bind(window,"overlay"),P=S.bind(window,"close");function O(t){A().hide(),I().hide(),p.trigger(m,t)}function M(t){d.trigger(m,t)&&O(t)}function k(t){return function(){return t.apply(this,arguments),m}}function S(t,e){var n,r,a;return f||(n=function(t,e){var n=t("width","auto");"number"==typeof n&&(n+="px");var r=t("modalId","pico-"+o++);return i.make(t("parent")).clazz("pico-content").clazz(t("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:n,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(t("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(t("content")).attr("id",r).attr("role","dialog").attr("aria-labelledby",t("ariaLabelledBy")).attr("aria-describedby",t("ariaDescribedBy",r)).onClick((function(t){new i(t.target).anyAncestor((function(t){return/\bpico-close\b/.test(t.elem.className)}))&&e()}))}(g,M),f={modal:n,overlay:(a=M,i.make((r=g)("parent")).clazz("pico-overlay").clazz(r("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(r("overlayStyles",{opacity:.5,background:"#000"})).onClick((function(){r("overlayClose",!0)&&a()}))),close:function(t,e){if(e("closeButton",!0))return t.child("button").html(e("closeHtml","&#xD7;")).clazz("pico-close").clazz(e("closeClass","")).stylize(e("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",e("close-label","Close"))}(n,g)},c.trigger(m,e)),f[t]}function E(t,e){return(t.msMatchesSelector||t.webkitMatchesSelector||t.matches).call(t,e)}function T(t){return!(n(t)||E(t,":disabled")||t.hasAttribute("contenteditable"))&&(t.hasAttribute("tabindex")||E(t,"input,select,textarea,button,a[href],area[href],iframe"))}function R(t){for(var e=t.getElementsByTagName("*"),n=0;n<e.length;n++)if(T(e[n]))return e[n]}return m={modalElem:r(I),closeElem:r(P),overlayElem:r(A),buildDom:k(S.bind(null,null)),isVisible:function(){return!!(f&&I&&I().isVisible())},show:function(t){return h.trigger(m,t)&&(A().show(),P(),I().show(),u.trigger(m,t)),this},close:k(M),forceClose:k(O),destroy:function(){I().destroy(),A().destroy(),A=I=P=void 0},options:function(t){Object.keys(t).map((function(e){l[e]=t[e]}))},afterCreate:k(c.watch),beforeShow:k(h.watch),afterShow:k(u.watch),beforeClose:k(d.watch),afterClose:k(p.watch)},v=m,b=g.bind(null,"focus",!0),v.beforeShow((function(){y=document.activeElement})),v.afterShow((function(){var t;!b()||(t=R(v.modalElem()))&&t.focus()})),v.afterClose((function(){b()&&y&&y.focus(),y=null})),s.watch((function(t){var e,n;b()&&v.isVisible()&&(e=R(v.modalElem()),n=function(t){for(var e=t.getElementsByTagName("*"),n=e.length;n--;)if(T(e[n]))return e[n]}(v.modalElem()),(t.shiftKey?e:n)===document.activeElement&&((t.shiftKey?n:e).focus(),t.preventDefault()))})),_=m,C=g.bind(null,"bodyOverflow",!0),w=new i(document.body),_.beforeShow((function(){x=w.elem.style.overflow,C()&&w.stylize({overflow:"hidden"})})),_.afterClose((function(){w.stylize({overflow:x})})),a.watch((function(){g("escCloses",!0)&&m.isVisible()&&m.close()})),m}})?i.apply(e,o):i)||(t.exports=r)}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errorTableVisible=e.errorTableVisible,this.onToggleVisibility=e.onToggleVisibility,this.onFocusLine=e.onFocusLine||function(){},this.onChangeHeight=e.onChangeHeight,this.dom={};var n=document.createElement("div");n.className="jsoneditor-validation-errors-container",this.dom.validationErrorsContainer=n;var i=document.createElement("div");i.style.display="none",i.className="jsoneditor-additional-errors fadein",i.textContent="Scroll for more \u25bf",this.dom.additionalErrorsIndication=i,n.appendChild(i);var o=document.createElement("span");o.className="jsoneditor-validation-error-icon",o.style.display="none",this.dom.validationErrorIcon=o;var r=document.createElement("span");r.className="jsoneditor-validation-error-count",r.style.display="none",this.dom.validationErrorCount=r,this.dom.parseErrorIndication=document.createElement("span"),this.dom.parseErrorIndication.className="jsoneditor-parse-error-icon",this.dom.parseErrorIndication.style.display="none"}var e;return(e=[{key:"getErrorTable",value:function(){return this.dom.validationErrorsContainer}},{key:"getErrorCounter",value:function(){return this.dom.validationErrorCount}},{key:"getWarningIcon",value:function(){return this.dom.validationErrorIcon}},{key:"getErrorIcon",value:function(){return this.dom.parseErrorIndication}},{key:"toggleTableVisibility",value:function(){this.errorTableVisible=!this.errorTableVisible,this.onToggleVisibility(this.errorTableVisible)}},{key:"setErrors",value:function(t,e){var n,i,o,r=this;this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.dom.additionalErrorsIndication.style.display="none"),this.errorTableVisible&&0<t.length?((n=document.createElement("div")).className="jsoneditor-validation-errors",(i=document.createElement("table")).className="jsoneditor-text-errors",n.appendChild(i),o=document.createElement("tbody"),i.appendChild(o),t.forEach((function(t){var n,i;isNaN(t.line)?!t.dataPath||(i=e.find((function(e){return e.path===t.dataPath})))&&(n=i.line+1):n=t.line;var a=document.createElement("tr");a.className=isNaN(n)?"":"jump-to-line",a.className+="error"===t.type?" parse-error":" validation-error";var s=document.createElement("td"),l=document.createElement("button");l.className="jsoneditor-schema-error",s.appendChild(l),a.appendChild(s);var c,h,u,d,p,g=document.createElement("td");g.style="white-space: nowrap;",g.textContent=isNaN(n)?"":"Ln "+n,a.appendChild(g),"string"==typeof t?((c=document.createElement("td")).colSpan=2,(h=document.createElement("pre")).appendChild(document.createTextNode(t)),c.appendChild(h),a.appendChild(c)):((u=document.createElement("td")).appendChild(document.createTextNode(t.dataPath||"")),a.appendChild(u),d=document.createElement("td"),(p=document.createElement("pre")).appendChild(document.createTextNode(t.message)),d.appendChild(p),a.appendChild(d)),a.onclick=function(){r.onFocusLine(n)},o.appendChild(a)})),this.dom.validationErrors=n,this.dom.validationErrorsContainer.appendChild(n),this.dom.additionalErrorsIndication.title=t.length+" errors total",this.dom.validationErrorsContainer.clientHeight<this.dom.validationErrorsContainer.scrollHeight?(this.dom.additionalErrorsIndication.style.display="block",this.dom.validationErrorsContainer.onscroll=function(){r.dom.additionalErrorsIndication.style.display=0<r.dom.validationErrorsContainer.clientHeight&&0===r.dom.validationErrorsContainer.scrollTop?"block":"none"}):this.dom.validationErrorsContainer.onscroll=void 0,this.onChangeHeight(this.dom.validationErrorsContainer.clientHeight+(this.dom.statusBar?this.dom.statusBar.clientHeight:0))):this.onChangeHeight(0);var a,s=t.filter((function(t){return"error"!==t.type})).length;0<s?(this.dom.validationErrorCount.style.display="inline",this.dom.validationErrorCount.innerText=s,this.dom.validationErrorCount.onclick=this.toggleTableVisibility.bind(this),this.dom.validationErrorIcon.style.display="inline",this.dom.validationErrorIcon.title=s+" schema validation error(s) found",this.dom.validationErrorIcon.onclick=this.toggleTableVisibility.bind(this)):(this.dom.validationErrorCount.style.display="none",this.dom.validationErrorIcon.style.display="none"),t.some((function(t){return"error"===t.type}))?(a=t[0].line,this.dom.parseErrorIndication.style.display="block",this.dom.parseErrorIndication.title=isNaN(a)?"parse error - check that the json is valid":"parse error on line "+a,this.dom.parseErrorIndication.onclick=this.toggleTableVisibility.bind(this)):this.dom.parseErrorIndication.style.display="none"}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=n(46),o=n(18),r=n(7),a=n(25),s=n(48);function l(t,e,n){var i=this._refs[n];if("string"==typeof i){if(!this._refs[i])return l.call(this,t,e,i);i=this._refs[i]}if((i=i||this._schemas[n])instanceof a)return p(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var o,r,s,h=c.call(this,e,n);return h&&(o=h.schema,e=h.root,s=h.baseId),o instanceof a?r=o.validate||t.call(this,o.schema,e,void 0,s):void 0!==o&&(r=p(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,s)),r}function c(t,e){var n=i.parse(e),o=m(n),r=g(this._getId(t.schema));if(0===Object.keys(t.schema).length||o!==r){var s=v(o),l=this._refs[s];if("string"==typeof l)return(function(t,e,n){var i=c.call(this,t,e);if(i){var o=i.schema,r=i.baseId;t=i.root;var a=this._getId(o);return a&&(r=b(r,a)),u.call(this,n,r,o,t)}}).call(this,t,l,n);if(l instanceof a)l.validate||this._compile(l),t=l;else{if(!((l=this._schemas[s])instanceof a))return;if(l.validate||this._compile(l),s==v(e))return{schema:l,root:t,baseId:r};t=l}if(!t.schema)return;r=g(this._getId(t.schema))}return u.call(this,n,r,t.schema,t)}(t.exports=l).normalizeId=v,l.fullPath=g,l.url=b,l.ids=function(t){var e=v(this._getId(t)),n={"":e},a={"":g(e,!1)},l={},c=this;return s(t,{allKeys:!0},(function(t,e,s,h,u,d,p){if(""!==e){var g=c._getId(t),m=n[h],f=a[h]+"/"+u;if(void 0!==p&&(f+="/"+("number"==typeof p?p:r.escapeFragment(p))),"string"==typeof g){g=m=v(m?i.resolve(m,g):g);var b=c._refs[g];if("string"==typeof b&&(b=c._refs[b]),b&&b.schema){if(!o(t,b.schema))throw new Error('id "'+g+'" resolves to more than one schema')}else if(g!=v(f))if("#"==g[0]){if(l[g]&&!o(t,l[g]))throw new Error('id "'+g+'" resolves to more than one schema');l[g]=t}else c._refs[g]=f}n[e]=m,a[e]=f}})),l},l.inlineRef=p,l.schema=c;var h=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function u(t,e,n,i){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var o=t.fragment.split("/"),a=1;a<o.length;a++){var s,l,u,d=o[a];if(d){if(void 0===(n=n[d=r.unescapeFragment(d)]))break;h[d]||((u=this._getId(n))&&(e=b(e,u)),n.$ref&&(s=b(e,n.$ref),(l=c.call(this,i,s))&&(n=l.schema,i=l.root,e=l.baseId)))}}return void 0!==n&&n!==i.schema?{schema:n,root:i,baseId:e}:void 0}}var d=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(t,e){return!1!==e&&(void 0===e||!0===e?function t(e){var n;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(n=e[i])&&!t(n))return!1}else for(var o in e){if("$ref"==o)return!1;if("object"==typeof(n=e[o])&&!t(n))return!1}return!0}(t):e?function t(e){var n,i=0;if(Array.isArray(e)){for(var o=0;o<e.length;o++)if("object"==typeof(n=e[o])&&(i+=t(n)),i==1/0)return 1/0}else for(var r in e){if("$ref"==r)return 1/0;if(d[r])i++;else if("object"==typeof(n=e[r])&&(i+=t(n)+1),i==1/0)return 1/0}return i}(t)<=e:void 0)}function g(t,e){return!1!==e&&(t=v(t)),m(i.parse(t))}function m(t){return i.serialize(t).split("#")[0]+"#"}var f=/#\/?$/;function v(t){return t?t.replace(f,""):""}function b(t,e){return e=v(e),i.resolve(t,e)}},function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,o,r;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(o=i;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(r=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;0!=o--;){var a=r[o];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},function(t,e,n){"use strict";var i=n(17);function o(t,e,n){this.message=n||o.message(t,e),this.missingRef=i.url(t,e),this.missingSchema=i.normalizeId(i.fullPath(this.missingRef))}function r(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t}t.exports={Validation:r((function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0})),MissingRef:r(o)},o.message=function(t,e){return"can't resolve reference "+e+" from id "+t}},function(t,e,n){var i;if(window.ace)i=window.ace;else try{i=n(37),n(38),n(39);var o=n(40);i.config.setModuleUrl("ace/mode/json_worker",o)}catch(t){}t.exports=i},function(t,e,n){"use strict";n.r(e),n.d(e,"textModeMixins",(function(){return y}));var i=n(20),o=n.n(i),r=n(1),a=n(8),s=n(15),l=n(0),c=n(5),h=n(6),u=n(9),d=n(2),p=n(35),g=n(4);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f={},v="ace/theme/jsoneditor";function b(){try{this.format()}catch(t){}}f.create=function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};void 0===n.statusBar&&(n.statusBar=!0),n.mainMenuBar=!1!==n.mainMenuBar,n.enableSort=!1!==n.enableSort,n.enableTransform=!1!==n.enableTransform,n.createQuery=n.createQuery||g.a,n.executeQuery=n.executeQuery||g.b,this.indentation="number"==typeof(this.options=n).indentation?Number(n.indentation):2,Object(r.b)(this.options.languages),Object(r.a)(this.options.language);var i=n.ace?n.ace:o.a;this.mode="code"===n.mode?"code":"text","code"===this.mode&&void 0===i&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=n.theme||v,this.theme===v&&i&&Object(p.tryRequireThemeJsonEditor)(),n.onTextSelectionChange&&this.onTextSelectionChange(n.onTextSelectionChange);var c=this;this.container=t,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this.annotations=[],this.lastSchemaErrors=void 0,this._debouncedValidate=Object(l.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(t){t.preventDefault()},this.frame.onkeydown=function(t){c._onKeyDown(t)};var h,d,f,b,y,_,C,x,w={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};this.frameFocusTracker=new u.a(w),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.options.mainMenuBar&&(Object(l.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(h=document.createElement("button")).type="button",h.className="jsoneditor-format",h.title=Object(r.c)("formatTitle"),this.menu.appendChild(h),h.onclick=function(){try{c.format(),c._onChange()}catch(t){c._onError(t)}},(d=document.createElement("button")).type="button",d.className="jsoneditor-compact",d.title=Object(r.c)("compactTitle"),this.menu.appendChild(d),d.onclick=function(){try{c.compact(),c._onChange()}catch(t){c._onError(t)}},this.options.enableSort&&((f=document.createElement("button")).type="button",f.className="jsoneditor-sort",f.title=Object(r.c)("sortTitleShort"),f.onclick=function(){c._showSortModal()},this.menu.appendChild(f)),this.options.enableTransform&&((b=document.createElement("button")).type="button",b.title=Object(r.c)("transformTitleShort"),b.className="jsoneditor-transform",b.onclick=function(){c._showTransformModal()},this.menu.appendChild(b)),(y=document.createElement("button")).type="button",y.className="jsoneditor-repair",y.title=Object(r.c)("repairTitle"),this.menu.appendChild(y),y.onclick=function(){try{c.repair(),c._onChange()}catch(t){c._onError(t)}},"code"===this.mode&&((_=document.createElement("button")).type="button",_.className="jsoneditor-undo jsoneditor-separator",_.title=Object(r.c)("undo"),_.onclick=function(){e.aceEditor.getSession().getUndoManager().undo()},this.menu.appendChild(_),this.dom.undo=_,(C=document.createElement("button")).type="button",C.className="jsoneditor-redo",C.title=Object(r.c)("redo"),C.onclick=function(){e.aceEditor.getSession().getUndoManager().redo()},this.menu.appendChild(C),this.dom.redo=C),this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new a.a(this.menu,this.options.modes,this.options.mode,(function(t){c.setMode(t),c.modeSwitcher.focus()}))),"code"===this.mode&&((x=document.createElement("a")).appendChild(document.createTextNode("powered by ace")),x.href="https://ace.c9.io/",x.target="_blank",x.className="jsoneditor-poweredBy",x.onclick=function(){window.open(x.href,x.target)},this.menu.appendChild(x)));var I,A,P,O,M,k,S,E,T,R,L,z=this.options.onEditable&&m("function"===this.options.onEditable)&&!this.options.onEditable({});this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"===this.mode?(this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom),A=(I=i.edit(this.editorDom)).getSession(),I.$blockScrolling=1/0,I.setTheme(this.theme),I.setOptions({readOnly:z}),I.setShowPrintMargin(!1),I.setFontSize("13px"),A.setMode("ace/mode/json"),A.setTabSize(this.indentation),A.setUseSoftTabs(!0),A.setUseWrapMode(!0),P=A.setAnnotations,A.setAnnotations=function(t){P.call(this,t&&t.length?t:c.annotations)},I.commands.bindKey("Ctrl-L",null),I.commands.bindKey("Command-L",null),(this.aceEditor=I).on("change",this._onChange.bind(this)),I.on("changeSelection",this._onSelect.bind(this))):((O=document.createElement("textarea")).className="jsoneditor-text",O.spellcheck=!1,this.content.appendChild(O),this.textarea=O,this.textarea.readOnly=z,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this),O.onselect=this._onSelect.bind(this),O.onmousedown=this._onMouseDown.bind(this),O.onblur=this._onBlur.bind(this)),this._updateHistoryButtons(),this.errorTable=new s.a({errorTableVisible:"text"===this.mode,onToggleVisibility:function(){c.validate()},onFocusLine:function(t){c.isFocused=!0,isNaN(t)||c.setTextSelection({row:t,column:1},{row:t,column:1e3})},onChangeHeight:function(t){var e=t+(c.dom.statusBar?c.dom.statusBar.clientHeight:0)+1;c.content.style.marginBottom=-e+"px",c.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.errorTable.getErrorTable()),n.statusBar&&(Object(l.addClassName)(this.content,"has-status-bar"),this.curserInfoElements={},M=document.createElement("div"),(this.dom.statusBar=M).className="jsoneditor-statusbar",this.frame.appendChild(M),(k=document.createElement("span")).className="jsoneditor-curserinfo-label",k.innerText="Ln:",(S=document.createElement("span")).className="jsoneditor-curserinfo-val",S.innerText="1",M.appendChild(k),M.appendChild(S),(E=document.createElement("span")).className="jsoneditor-curserinfo-label",E.innerText="Col:",(T=document.createElement("span")).className="jsoneditor-curserinfo-val",T.innerText="1",M.appendChild(E),M.appendChild(T),this.curserInfoElements.colVal=T,this.curserInfoElements.lnVal=S,(R=document.createElement("span")).className="jsoneditor-curserinfo-label",R.innerText="characters selected",R.style.display="none",(L=document.createElement("span")).className="jsoneditor-curserinfo-count",L.innerText="0",L.style.display="none",this.curserInfoElements.countLabel=R,this.curserInfoElements.countVal=L,M.appendChild(L),M.appendChild(R),M.appendChild(this.errorTable.getErrorCounter()),M.appendChild(this.errorTable.getWarningIcon()),M.appendChild(this.errorTable.getErrorIcon())),this.setSchema(this.options.schema,this.options.schemaRefs)},f._onChange=function(){var t=this;if(!this.onChangeDisabled){if(setTimeout((function(){return t._updateHistoryButtons()})),this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(t){console.error("Error in onChangeText callback: ",t)}}},f._updateHistoryButtons=function(){var t;this.aceEditor&&this.dom.undo&&this.dom.redo&&(t=this.aceEditor.getSession().getUndoManager())&&t.hasUndo&&t.hasRedo&&(this.dom.undo.disabled=!t.hasUndo(),this.dom.redo.disabled=!t.hasRedo())},f._showSortModal=function(){var t=this,e=this.options.modalAnchor||d.a,n=this.get();Object(c.showSortModal)(e,n,(function(e){var i,o;Array.isArray(n)&&(i=Object(l.sort)(n,e.path,e.direction),t.sortedBy=e,t.update(i)),Object(l.isObject)(n)&&(o=Object(l.sortObjectKeys)(n,e.direction),t.sortedBy=e,t.update(o))}),t.sortedBy)},f._showTransformModal=function(){var t=this,e=this.options,n=e.modalAnchor,i=e.createQuery,o=e.executeQuery,r=e.queryDescription,a=this.get();Object(h.showTransformModal)({anchor:n||d.a,json:a,queryDescription:r,createQuery:i,executeQuery:o,onTransform:function(e){var n=o(a,e);t.update(n)}})},f._onSelect=function(){this._updateCursorInfo(),this._emitSelectionChange()},f._onKeyDown=function(t){var e=!1;220===(t.which||t.keyCode)&&t.ctrlKey&&(t.shiftKey?this.compact():this.format(),this._onChange(),e=!0),e&&(t.preventDefault(),t.stopPropagation()),this._updateCursorInfo(),this._emitSelectionChange()},f._onMouseDown=function(){this._updateCursorInfo(),this._emitSelectionChange()},f._onBlur=function(){var t=this;setTimeout((function(){t.isFocused||(t._updateCursorInfo(),t._emitSelectionChange()),t.isFocused=!1}))},f._updateCursorInfo=function(){var t,e,n,i,o,r=this;function a(){r.curserInfoElements.countVal.innerText!==o&&(r.curserInfoElements.countVal.innerText=o,r.curserInfoElements.countVal.style.display=o?"inline":"none",r.curserInfoElements.countLabel.style.display=o?"inline":"none"),r.curserInfoElements.lnVal.innerText=n,r.curserInfoElements.colVal.innerText=i}this.textarea?setTimeout((function(){var t=Object(l.getInputSelection)(r.textarea);t.startIndex!==t.endIndex&&(o=t.endIndex-t.startIndex),i=o&&r.cursorInfo&&r.cursorInfo.line===t.end.row&&r.cursorInfo.column===t.end.column?(n=t.start.row,t.start.column):(n=t.end.row,t.end.column),r.cursorInfo={line:n,column:i,count:o},r.options.statusBar&&a()}),0):this.aceEditor&&this.curserInfoElements&&(t=this.aceEditor.getCursorPosition(),e=this.aceEditor.getSelectedText(),r.cursorInfo={line:n=t.row+1,column:i=t.column+1,count:o=e.length},this.options.statusBar&&a())},f._emitSelectionChange=function(){var t;this._selectionChangedHandler&&(t=this.getTextSelection(),this._selectionChangedHandler(t.start,t.end,t.text))},f._refreshAnnotations=function(){var t,e=this.aceEditor&&this.aceEditor.getSession();e&&(t=e.getAnnotations().filter((function(t){return"error"===t.type})),e.setAnnotations(t))},f.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null,this.frameFocusTracker.destroy()},f.compact=function(){var t=this.get(),e=JSON.stringify(t);this.updateText(e)},f.format=function(){var t=this.get(),e=JSON.stringify(t,null,this.indentation);this.updateText(e)},f.repair=function(){var t=this.getText(),e=Object(l.repair)(t);this.updateText(e)},f.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},f.resize=function(){this.aceEditor&&this.aceEditor.resize(!1)},f.set=function(t){this.setText(JSON.stringify(t,null,this.indentation))},f.update=function(t){this.updateText(JSON.stringify(t,null,this.indentation))},f.get=function(){var t=this.getText();return Object(l.parse)(t)},f.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},f._setText=function(t,e){var n,i=this,o=!0===this.options.escapeUnicode?Object(l.escapeUnicodeChars)(t):t;this.textarea&&(this.textarea.value=o),this.aceEditor&&(this.onChangeDisabled=!0,this.aceEditor.setValue(o,-1),this.onChangeDisabled=!1,e&&(n=this,setTimeout((function(){n.aceEditor&&n.aceEditor.session.getUndoManager().reset()}))),setTimeout((function(){return i._updateHistoryButtons()}))),this._debouncedValidate()},f.setText=function(t){this._setText(t,!0)},f.updateText=function(t){this.getText()!==t&&this._setText(t,!1)},f.validate=function(){var t,e,n=this,i=[],o=[];try{var r=this.get();this.validateSchema&&(this.validateSchema(r)||(i=this.validateSchema.errors.map((function(t){return t.type="validation",Object(l.improveSchemaError)(t)})))),this.validationSequence=(this.validationSequence||0)+1;var a=this,s=this.validationSequence;(function(t,e){if(!e)return Promise.resolve([]);try{var n=e(t);return(Object(l.isPromise)(n)?n:Promise.resolve(n)).then((function(t){return Array.isArray(t)?t.filter((function(t){var e=Object(l.isValidValidationError)(t);return e||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',t),e})).map((function(t){return{dataPath:Object(l.stringifyPath)(t.path),message:t.message,type:"customValidation"}})):[]}))}catch(t){return Promise.reject(t)}})(r,this.options.onValidate).then((function(t){var e;s===a.validationSequence&&(e=i.concat(o).concat(t),a._renderErrors(e),"function"==typeof n.options.onValidationError&&(Object(l.isValidationErrorChanged)(e,n.lastSchemaErrors)&&n.options.onValidationError.call(n,e),n.lastSchemaErrors=e))})).catch((function(t){console.error("Custom validation function did throw an error",t)}))}catch(r){this.getText()&&((t=/\w*line\s*(\d+)\w*/g.exec(r.message))&&(e=+t[1]),o=[{type:"error",message:r.message.replace(/\n/g,"<br>"),line:e}]),this._renderErrors(o),"function"==typeof this.options.onValidationError&&(Object(l.isValidationErrorChanged)(o,this.lastSchemaErrors)&&this.options.onValidationError.call(this,o),this.lastSchemaErrors=o)}},f._renderErrors=function(t){var e=this.getText(),n=[];t.reduce((function(t,e){return"string"==typeof e.dataPath&&-1===t.indexOf(e.dataPath)&&t.push(e.dataPath),t}),n);var i=Object(l.getPositionForPath)(e,n);this.aceEditor&&(this.annotations=i.map((function(e){var n=t.filter((function(t){return t.dataPath===e.path})),i=n.map((function(t){return t.message})).join("\n");return i?{row:e.line,column:e.column,text:"Schema validation error"+(1!==n.length?"s":"")+": \n"+i,type:"warning",source:"jsoneditor"}:{}})),this._refreshAnnotations()),this.errorTable.setErrors(t,i),this.aceEditor&&this.aceEditor.resize(!1)},f.getTextSelection=function(){var t={};if(this.textarea){var e=Object(l.getInputSelection)(this.textarea);return this.cursorInfo&&this.cursorInfo.line===e.end.row&&this.cursorInfo.column===e.end.column?(t.start=e.end,t.end=e.start):t=e,{start:t.start,end:t.end,text:this.textarea.value.substring(e.startIndex,e.endIndex)}}if(this.aceEditor){var n=this.aceEditor.getSelection(),i=this.aceEditor.getSelectedText(),o=n.getRange(),r=n.getSelectionLead();return r.row===o.end.row&&r.column===o.end.column?t=o:(t.start=o.end,t.end=o.start),{start:{row:t.start.row+1,column:t.start.column+1},end:{row:t.end.row+1,column:t.end.column+1},text:i}}},f.onTextSelectionChange=function(t){"function"==typeof t&&(this._selectionChangedHandler=Object(l.debounce)(t,this.DEBOUNCE_INTERVAL))},f.setTextSelection=function(t,e){var n,i,o,r,a;t&&e&&(this.textarea?(n=Object(l.getIndexForPosition)(this.textarea,t.row,t.column),i=Object(l.getIndexForPosition)(this.textarea,e.row,e.column),-1<n&&-1<i&&(this.textarea.setSelectionRange?(this.textarea.focus(),this.textarea.setSelectionRange(n,i)):this.textarea.createTextRange&&((o=this.textarea.createTextRange()).collapse(!0),o.moveEnd("character",i),o.moveStart("character",n),o.select()),r=(this.textarea.value.match(/\n/g)||[]).length+1,this.textarea.scrollTop=(a=t.row*(this.textarea.scrollHeight/r))>this.textarea.clientHeight?a-this.textarea.clientHeight/2:0)):this.aceEditor&&(this.aceEditor.selection.setRange({start:{row:t.row-1,column:t.column-1},end:{row:e.row-1,column:e.column-1}}),this.aceEditor.scrollToLine(t.row-1,!0)))};var y=[{mode:"text",mixin:f,data:"text",load:b},{mode:"code",mixin:f,data:"text",load:b}]},function(t,e,n){var i,o=((i={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,o,r){var a=r.length-1;switch(o){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=r[a-1];case 13:this.$={};break;case 14:this.$=r[a-1];break;case 15:this.$=[r[a-2],r[a]];break;case 16:this.$={},this.$[r[a][0]]=r[a][1];break;case 17:this.$=r[a-2],r[a-2][r[a][0]]=r[a][1];break;case 18:this.$=[];break;case 19:this.$=r[a-1];break;case 20:this.$=[r[a]];break;case 21:this.$=r[a-2],r[a-2].push(r[a])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],o=[],r=this.table,a="",s=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;function u(){var t=e.lexer.lex()||1;return"number"!=typeof t&&(t=e.symbols_[t]||t),t}o.push(h),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,g,m,f,v,b,y,_={};;){if(void 0===(m=this.defaultActions[g=n[n.length-1]]?this.defaultActions[g]:(null==d&&(d=u()),r[g]&&r[g][d]))||!m.length||!m[0]){if(!c){for(v in y=[],r[g])this.terminals_[v]&&2<v&&y.push("'"+this.terminals_[v]+"'");var C="";C=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+this.terminals_[d]+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:y})}if(3==c){if(1==d)throw new Error(C||"Parsing halted.");l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,d=u()}for(;!(2..toString()in r[g]);){if(0==g)throw new Error(C||"Parsing halted.");n.length=n.length-2,i.length=i.length-1,o.length=o.length-1,g=n[n.length-1]}p=d,d=2,m=r[g=n[n.length-1]]&&r[g][2],c=3}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+d);switch(m[0]){case 1:n.push(d),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,0<c&&c--);break;case 2:if(_.$=i[i.length-(b=this.productions_[m[1]][1])],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},void 0!==(f=this.performAction.call(_,a,l,s,this.yy,m[1],i,o)))return f;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),i.push(_.$),o.push(_._$),n.push(r[n[n.length-2]][n[n.length-1]]);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(!(n=this._input.match(this.rules[r[a]]))||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?((o=e[0].match(/\n.*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},i);e.parser=o,e.parse=o.parse.bind(o)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){function n(t){"remove"in t||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){void 0!==this.parentNode&&this.parentNode.removeChild(this)}})}"undefined"!=typeof Element&&(void 0!==window.Element&&n(window.Element.prototype),void 0!==window.CharacterData&&n(window.CharacterData.prototype),void 0!==window.DocumentType&&n(window.DocumentType.prototype)),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){for(var e=0;e<this.length;e++)if(t.call(this,this[e],e,this))return e;return-1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){return this[this.findIndex(t)]},configurable:!0,writable:!0}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},function(t,e,n){"use strict";var i=n(7);t.exports=function(t){i.copy(t,this)}},function(t,e,n){"use strict";t.exports=function(t,e){"function"==typeof(e=e||{})&&(e={cmp:e});var n,i="boolean"==typeof e.cycles&&e.cycles,o=e.cmp&&(n=e.cmp,function(t){return function(e,i){return n({key:e,value:t[e]},{key:i,value:t[i]})}}),r=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);if(Array.isArray(e)){for(s="[",l=0;l<e.length;l++)l&&(s+=","),s+=t(e[l])||"null";return s+"]"}if(null===e)return"null";if(-1!==r.indexOf(e)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}for(var n=r.push(e)-1,a=Object.keys(e).sort(o&&o(e)),s="",l=0;l<a.length;l++){var c=a[l],h=t(e[c]);h&&(s&&(s+=","),s+=JSON.stringify(c)+":"+h)}return r.splice(n,1),"{"+s+"}"}}(t)}},function(t,e,n){"use strict";t.exports=function(t,e){var n="",i=!0===t.schema.$async,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),r=t.self._getId(t.schema);if(t.opts.strictKeywords){var a=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(a){var s="unknown keyword: "+a;if("log"!==t.opts.strictKeywords)throw new Error(s);t.logger.warn(s)}}if(t.isTop&&(n+=" var validate = ",i&&(t.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",r&&(t.opts.sourceCode||t.opts.processCode)&&(n+=" /*# sourceURL="+r+" */ ")),"boolean"==typeof t.schema||!o&&!t.schema.$ref){var l=t.level,c=t.dataLevel,h=t.schema[e="false schema"],u=t.schemaPath+t.util.getProperty(e),d=t.errSchemaPath+"/"+e,p=!t.opts.allErrors,g="data"+(c||""),m="valid"+l;return!1===t.schema?(t.isTop?p=!0:n+=" var "+m+" = false; ",(G=G||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'boolean schema is false' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",E=n,n=G.pop(),n+=!t.compositeRule&&p?t.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "):n+=t.isTop?i?" return data; ":" validate.errors = null; return true; ":" var "+m+" = true; ",t.isTop&&(n+=" }; return validate; "),n}if(t.isTop){var f=t.isTop;if(l=t.level=0,c=t.dataLevel=0,g="data",t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[void 0],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var v="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(l=t.level,g="data"+((c=t.dataLevel)||""),r&&(t.baseId=t.resolve.url(t.baseId,r)),i&&!t.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}m="valid"+l,p=!t.opts.allErrors;var b,y="",_="",C=t.schema.type,x=Array.isArray(C);if(C&&t.opts.nullable&&!0===t.schema.nullable&&(x?-1==C.indexOf("null")&&(C=C.concat("null")):"null"!=C&&(C=[C,"null"],x=!0)),x&&1==C.length&&(C=C[0],x=!1),t.schema.$ref&&o){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(n+=" "+t.RULES.all.$comment.code(t,"$comment")),C){t.opts.coerceTypes&&(b=t.util.coerceToTypes(t.opts.coerceTypes,C));var w=t.RULES.types[C];if(b||x||!0===w||w&&!Y(w)){if(u=t.schemaPath+".type",d=t.errSchemaPath+"/type",u=t.schemaPath+".type",d=t.errSchemaPath+"/type",n+=" if ("+t.util[x?"checkDataTypes":"checkDataType"](C,g,t.opts.strictNumbers,!0)+") { ",b){var I="dataType"+l,A="coerced"+l;n+=" var "+I+" = typeof "+g+"; ","array"==t.opts.coerceTypes&&(n+=" if ("+I+" == 'object' && Array.isArray("+g+")) "+I+" = 'array'; "),n+=" var "+A+" = undefined; ";var P="",O=b;if(O)for(var M,k=-1,S=O.length-1;k<S;)M=O[k+=1],k&&(n+=" if ("+A+" === undefined) { ",P+="}"),"array"==t.opts.coerceTypes&&"array"!=M&&(n+=" if ("+I+" == 'array' && "+g+".length == 1) { "+A+" = "+g+" = "+g+"[0]; "+I+" = typeof "+g+";  } "),"string"==M?n+=" if ("+I+" == 'number' || "+I+" == 'boolean') "+A+" = '' + "+g+"; else if ("+g+" === null) "+A+" = ''; ":"number"==M||"integer"==M?(n+=" if ("+I+" == 'boolean' || "+g+" === null || ("+I+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==M&&(n+=" && !("+g+" % 1)"),n+=")) "+A+" = +"+g+"; "):"boolean"==M?n+=" if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+A+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+A+" = true; ":"null"==M?n+=" if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+A+" = null; ":"array"==t.opts.coerceTypes&&"array"==M&&(n+=" if ("+I+" == 'string' || "+I+" == 'number' || "+I+" == 'boolean' || "+g+" == null) "+A+" = ["+g+"]; ");(G=G||[]).push(n+=" "+P+" if ("+A+" === undefined) {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: { type: '",n+=x?""+C.join(","):""+C,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=x?""+C.join(","):""+C,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";var E=n;n=G.pop(),n+=!t.compositeRule&&p?t.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var T=c?"data"+(c-1||""):"parentData";n+=" "+g+" = "+A+"; ",c||(n+="if ("+T+" !== undefined)"),n+=" "+T+"["+(c?t.dataPathArr[c]:"parentDataProperty")+"] = "+A+"; } "}else(G=G||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: { type: '",n+=x?""+C.join(","):""+C,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=x?""+C.join(","):""+C,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",E=n,n=G.pop(),n+=!t.compositeRule&&p?t.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(t.schema.$ref&&!o)n+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",p&&(n+=" } if (errors === ",n+=f?"0":"errs_"+l,n+=") { ",_+="}");else{var R=t.RULES;if(R)for(var L=-1,z=R.length-1;L<z;)if(Y(w=R[L+=1])){if(w.type&&(n+=" if ("+t.util.checkDataType(w.type,g,t.opts.strictNumbers)+") { "),t.opts.useDefaults)if("object"==w.type&&t.schema.properties){h=t.schema.properties;var B=Object.keys(h);if(B)for(var j,D=-1,F=B.length-1;D<F;)if(void 0!==($=h[j=B[D+=1]]).default){var V=g+t.util.getProperty(j);if(t.compositeRule){if(t.opts.strictDefaults){if(v="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}}else n+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ",n+="shared"==t.opts.useDefaults?" "+t.useDefault($.default)+" ":" "+JSON.stringify($.default)+" ",n+="; "}}else if("array"==w.type&&Array.isArray(t.schema.items)){var N=t.schema.items;if(N){k=-1;for(var $,Z=N.length-1;k<Z;)if(void 0!==($=N[k+=1]).default)if(V=g+"["+k+"]",t.compositeRule){if(t.opts.strictDefaults){if(v="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}}else n+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ",n+="shared"==t.opts.useDefaults?" "+t.useDefault($.default)+" ":" "+JSON.stringify($.default)+" ",n+="; "}}var G,W=w.rules;if(W)for(var H,K,U=-1,X=W.length-1;U<X;)!J(K=W[U+=1])||(H=K.code(t,K.keyword,w.type))&&(n+=" "+H+" ",p&&(y+="}"));p&&(n+=" "+y+" ",y=""),w.type&&(n+=" } ",C&&C===w.type&&!b&&(u=t.schemaPath+".type",d=t.errSchemaPath+"/type",(G=G||[]).push(n+=" else { "),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: { type: '",n+=x?""+C.join(","):""+C,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=x?""+C.join(","):""+C,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",E=n,n=G.pop(),n+=!t.compositeRule&&p?t.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ")),p&&(n+=" if (errors === ",n+=f?"0":"errs_"+l,n+=") { ",_+="}")}}function Y(t){for(var e=t.rules,n=0;n<e.length;n++)if(J(e[n]))return 1}function J(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var n=e.implements,i=0;i<n.length;i++)if(void 0!==t.schema[n[i]])return 1}(e)}return p&&(n+=" "+_+" "),f?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+m+" = errors === errs_"+l+";",n}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a,s,l,c=" ",h=t.level,u=t.dataLevel,d=t.schema[e],p=t.schemaPath+t.util.getProperty(e),g=t.errSchemaPath+"/"+e,m=!t.opts.allErrors,f="data"+(u||""),v=t.opts.$data&&d&&d.$data,b=v?(c+=" var schema"+h+" = "+t.util.getData(d.$data,u,t.dataPathArr)+"; ","schema"+h):d,y="maximum"==e,_=y?"exclusiveMaximum":"exclusiveMinimum",C=t.schema[_],x=t.opts.$data&&C&&C.$data,w=y?"<":">",I=y?">":"<",A=void 0;if(!v&&"number"!=typeof d&&void 0!==d)throw new Error(e+" must be number");if(!x&&void 0!==C&&"number"!=typeof C&&"boolean"!=typeof C)throw new Error(_+" must be number or boolean");x?(r="exclIsNumber"+h,a="' + "+(s="op"+h)+" + '",c+=" var schemaExcl"+h+" = "+t.util.getData(C.$data,u,t.dataPathArr)+"; ",A=_,(l=l||[]).push(c+=" var "+(i="exclusive"+h)+"; var "+(o="exclType"+h)+" = typeof "+(n="schemaExcl"+h)+"; if ("+o+" != 'boolean' && "+o+" != 'undefined' && "+o+" != 'number') { "),c="",!1!==t.createErrors?(c+=" { keyword: '"+(A||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: {} ",!1!==t.opts.messages&&(c+=" , message: '"+_+" should be boolean' "),t.opts.verbose&&(c+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),c+=" } "):c+=" {} ",P=c,c=l.pop(),c+=!t.compositeRule&&m?t.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } else if ( ",v&&(c+=" ("+b+" !== undefined && typeof "+b+" != 'number') || "),c+=" "+o+" == 'number' ? ( ("+i+" = "+b+" === undefined || "+n+" "+w+"= "+b+") ? "+f+" "+I+"= "+n+" : "+f+" "+I+" "+b+" ) : ( ("+i+" = "+n+" === true) ? "+f+" "+I+"= "+b+" : "+f+" "+I+" "+b+" ) || "+f+" !== "+f+") { var op"+h+" = "+i+" ? '"+w+"' : '"+w+"='; ",void 0===d&&(A=_,g=t.errSchemaPath+"/"+_,b=n,v=x)):(a=w,(r="number"==typeof C)&&v?(s="'"+a+"'",c+=" if ( ",v&&(c+=" ("+b+" !== undefined && typeof "+b+" != 'number') || "),c+=" ( "+b+" === undefined || "+C+" "+w+"= "+b+" ? "+f+" "+I+"= "+C+" : "+f+" "+I+" "+b+" ) || "+f+" !== "+f+") { "):(r&&void 0===d?(i=!0,A=_,g=t.errSchemaPath+"/"+_,b=C,I+="="):(r&&(b=Math[y?"min":"max"](C,d)),C===(!r||b)?(i=!0,A=_,g=t.errSchemaPath+"/"+_,I+="="):(i=!1,a+="=")),s="'"+a+"'",c+=" if ( ",v&&(c+=" ("+b+" !== undefined && typeof "+b+" != 'number') || "),c+=" "+f+" "+I+" "+b+" || "+f+" !== "+f+") { ")),A=A||e,(l=l||[]).push(c),c="",!1!==t.createErrors?(c+=" { keyword: '"+(A||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: { comparison: "+s+", limit: "+b+", exclusive: "+i+" } ",!1!==t.opts.messages&&(c+=" , message: 'should be "+a+" ",c+=v?"' + "+b:b+"'"),t.opts.verbose&&(c+=" , schema:  ",c+=v?"validate.schema"+p:""+d,c+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),c+=" } "):c+=" {} ";var P=c;return c=l.pop(),c+=!t.compositeRule&&m?t.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } ",m&&(c+=" else { "),c}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h=t.opts.$data&&r&&r.$data,u=h?(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; ","schema"+i):r;if(!h&&"number"!=typeof r)throw new Error(e+" must be number");n+="if ( ",h&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || ");var d=e,p=p||[];p.push(n+=" "+c+".length "+("maxItems"==e?">":"<")+" "+u+") { "),n="",!1!==t.createErrors?(n+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { limit: "+u+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==e?"more":"fewer",n+=" than ",n+=h?"' + "+u+" + '":""+r,n+=" items' "),t.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h=t.opts.$data&&r&&r.$data,u=h?(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; ","schema"+i):r;if(!h&&"number"!=typeof r)throw new Error(e+" must be number");n+="if ( ",h&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=!1===t.opts.unicode?" "+c+".length ":" ucs2length("+c+") ";var d=e,p=p||[];p.push(n+=" "+("maxLength"==e?">":"<")+" "+u+") { "),n="",!1!==t.createErrors?(n+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { limit: "+u+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==e?"longer":"shorter",n+=" than ",n+=h?"' + "+u+" + '":""+r,n+=" characters' "),t.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h=t.opts.$data&&r&&r.$data,u=h?(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; ","schema"+i):r;if(!h&&"number"!=typeof r)throw new Error(e+" must be number");n+="if ( ",h&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || ");var d=e,p=p||[];p.push(n+=" Object.keys("+c+").length "+("maxProperties"==e?">":"<")+" "+u+") { "),n="",!1!==t.createErrors?(n+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { limit: "+u+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==e?"more":"fewer",n+=" than ",n+=h?"' + "+u+" + '":""+r,n+=" properties' "),t.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(t,e,n){"use strict";var i={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},o="a".charCodeAt();e.parse=function(t,e,n){var r={},a=0,s=0,l=0,c=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:function e(n,i){var o;h(),v(n,"value");var r=p();switch(r){case"t":d("rue"),o=!0;break;case"f":d("alse"),o=!1;break;case"n":d("ull"),o=null;break;case'"':o=u();break;case"[":o=function(t){h();var n=[],i=0;if("]"==p())return n;for(g();;){n.push(e(t+"/"+i)),h();var o=p();if("]"==o)break;","!=o&&C(),h(),i++}return n}(n);break;case"{":o=function(t){h();var n={};if("}"==p())return n;for(g();;){var i=y();'"'!=p()&&C();var o=u(),r=t+"/"+f(o);b(r,"key",i),v(r,"keyEnd"),h(),":"!=p()&&C(),h(),n[o]=e(r),h();var a=p();if("}"==a)break;","!=a&&C(),h()}return n}(n);break;default:g(),0<="-0123456789".indexOf(r)?o=function(){var e="",n=!0;"-"==t[l]&&(e+=p()),e+=("0"==t[l]?p:m)(),"."==t[l]&&(e+=p()+m(),n=!1),"e"!=t[l]&&"E"!=t[l]||(e+=p(),"+"!=t[l]&&"-"!=t[l]||(e+=p()),e+=m(),n=!1);var i=+e;return c&&n&&(i>Number.MAX_SAFE_INTEGER||i<Number.MIN_SAFE_INTEGER)?BigInt(e):i}():_()}return v(n,"valueEnd"),h(),i&&l<t.length&&_(),o}("",!0),pointers:r};function h(){t:for(;l<t.length;){switch(t[l]){case" ":s++;break;case"\t":s+=4;break;case"\r":s=0;break;case"\n":s=0,a++;break;default:break t}l++}}function u(){for(var t,e="";'"'!=(t=p());)"\\"==t?(t=p())in i?e+=i[t]:"u"==t?e+=function(){for(var t=4,e=0;t--;){e<<=4;var n=p().toLowerCase();"a"<=n&&n<="f"?e+=n.charCodeAt()-o+10:"0"<=n&&n<="9"?e+=+n:C()}return String.fromCharCode(e)}():C():e+=t;return e}function d(t){for(var e=0;e<t.length;e++)p()!==t[e]&&C()}function p(){x();var e=t[l];return l++,s++,e}function g(){l--,s--}function m(){for(var e="";"0"<=t[l]&&t[l]<="9";)e+=p();if(e.length)return e;x(),_()}function v(t,e){b(t,e,y())}function b(t,e,n){r[t]=r[t]||{},r[t][e]=n}function y(){return{line:a,column:s,pos:l}}function _(){throw new SyntaxError("Unexpected token "+t[l]+" in JSON at position "+l)}function C(){g(),_()}function x(){if(l>=t.length)throw new SyntaxError("Unexpected end of JSON input")}},e.stringify=function(t,e,n){if(a(t)){var i=0;switch(typeof(r="object"==typeof n?n.space:n)){case"number":var o=10<r?10:r<0?0:Math.floor(r),r=o&&C(o," "),s=o,l=o;break;case"string":r=r.slice(0,10);for(var c=l=s=0;c<r.length;c++){switch(r[c]){case" ":l++;break;case"\t":l+=4;break;case"\r":l=0;break;case"\n":l=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}s++}break;default:r=void 0}var h="",u={},d=0,g=0,m=0,v=n&&n.es6&&"function"==typeof Map;return function t(e,n,i){switch(_(i,"value"),typeof e){case"number":case"bigint":case"boolean":b(""+e);break;case"string":b(p(e));break;case"object":null===e?b("null"):"function"==typeof e.toJSON?b(p(e.toJSON())):Array.isArray(e)?o():v?e.constructor.BYTES_PER_ELEMENT?o():e instanceof Map?l():e instanceof Set?l(!0):s():s()}function o(){if(e.length){b("[");for(var o=n+1,r=0;r<e.length;r++){r&&b(","),y(o);var s=a(e[r])?e[r]:null;t(s,o,i+"/"+r)}y(n),b("]")}else b("[]")}function s(){var o=Object.keys(e);if(o.length){b("{");for(var s=n+1,l=0;l<o.length;l++){var c,h=o[l],u=e[h];a(u)&&(l&&b(","),c=i+"/"+f(h),y(s),_(c,"key"),b(p(h)),_(c,"keyEnd"),b(":"),r&&b(" "),t(u,s,c))}y(n),b("}")}else b("{}")}function l(o){if(e.size){b("{");for(var s=n+1,l=!0,c=e.entries(),h=c.next();!h.done;){var u,d=h.value,g=d[0],m=!!o||d[1];a(m)&&(l||b(","),l=!1,u=i+"/"+f(g),y(s),_(u,"key"),b(p(g)),_(u,"keyEnd"),b(":"),r&&b(" "),t(m,s,u)),h=c.next()}y(n),b("}")}else b("{}")}_(i,"valueEnd")}(t,0,""),{json:h,pointers:u}}function b(t){g+=t.length,m+=t.length,h+=t}function y(t){if(r){for(h+="\n"+C(t,r),d++,g=0;t--;)i?(d+=i,g=l):g+=l,m+=s;m+=1}}function _(t,e){u[t]=u[t]||{},u[t][e]={line:d,column:g,pos:m}}function C(t,e){return Array(t+1).join(e)}};var r=["number","bigint","boolean","string","object"];function a(t){return 0<=r.indexOf(typeof t)}var s=/"|\\/g,l=/[\b]/g,c=/\f/g,h=/\n/g,u=/\r/g,d=/\t/g;function p(t){return'"'+(t=t.replace(s,"\\$&").replace(c,"\\f").replace(l,"\\b").replace(h,"\\n").replace(u,"\\r").replace(d,"\\t"))+'"'}var g=/~/g,m=/\//g;function f(t){return t.replace(g,"~0").replace(m,"~1")}},function(t,e,n){!function(t){"use strict";function e(t){return null!==t&&"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t,o){if(t===o)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(o))return!1;if(!0===e(t)){if(t.length!==o.length)return!1;for(var r=0;r<t.length;r++)if(!1===i(t[r],o[r]))return!1;return!0}if(!0!==n(t))return!1;var a={};for(var s in t)if(hasOwnProperty.call(t,s)){if(!1===i(t[s],o[s]))return!1;a[s]=!0}for(var l in o)if(hasOwnProperty.call(o,l)&&!0!==a[l])return!1;return!0}function o(t){if(""===t||!1===t||null===t)return!0;if(e(t)&&0===t.length)return!0;if(n(t)){for(var i in t)if(t.hasOwnProperty(i))return!1;return!0}return!1}var r="function"==typeof String.prototype.trimLeft?function(t){return t.trimLeft()}:function(t){return t.match(/^\s*(.*)/)[1]},a=0,s=2,l="UnquotedIdentifier",c="QuotedIdentifier",h="Rbracket",u="Rparen",d="Comma",p="Colon",g="Rbrace",m="Number",f="Current",v="Expref",b="Pipe",y="GTE",_="LTE",C="Flatten",x="Star",w="Filter",I="Dot",A="Lbrace",P="Lbracket",O="Lparen",M="Literal",k={".":I,"*":x,",":d,":":p,"{":A,"}":g,"]":h,"(":O,")":u,"@":f},S={"<":!0,">":!0,"=":!0,"!":!0},E={" ":!0,"\t":!0,"\n":!0};function T(t){return"0"<=t&&t<="9"||"-"===t}function R(){}R.prototype={tokenize:function(t){var e,n,i,o,r=[];for(this._current=0;this._current<t.length;)if("a"<=(o=t[this._current])&&o<="z"||"A"<=o&&o<="Z"||"_"===o)e=this._current,n=this._consumeUnquotedIdentifier(t),r.push({type:l,value:n,start:e});else if(void 0!==k[t[this._current]])r.push({type:k[t[this._current]],value:t[this._current],start:this._current}),this._current++;else if(T(t[this._current]))i=this._consumeNumber(t),r.push(i);else if("["===t[this._current])i=this._consumeLBracket(t),r.push(i);else if('"'===t[this._current])e=this._current,n=this._consumeQuotedIdentifier(t),r.push({type:c,value:n,start:e});else if("'"===t[this._current])e=this._current,n=this._consumeRawStringLiteral(t),r.push({type:M,value:n,start:e});else if("`"===t[this._current]){e=this._current;var a=this._consumeLiteral(t);r.push({type:M,value:a,start:e})}else if(void 0!==S[t[this._current]])r.push(this._consumeOperator(t));else if(void 0!==E[t[this._current]])this._current++;else if("&"===t[this._current])e=this._current,this._current++,"&"===t[this._current]?(this._current++,r.push({type:"And",value:"&&",start:e})):r.push({type:v,value:"&",start:e});else{if("|"!==t[this._current]){var s=new Error("Unknown character:"+t[this._current]);throw s.name="LexerError",s}e=this._current,this._current++,"|"===t[this._current]?(this._current++,r.push({type:"Or",value:"||",start:e})):r.push({type:b,value:"|",start:e})}return r},_consumeUnquotedIdentifier:function(t){var e,n=this._current;for(this._current++;this._current<t.length&&("a"<=(e=t[this._current])&&e<="z"||"A"<=e&&e<="Z"||"0"<=e&&e<="9"||"_"===e);)this._current++;return t.slice(n,this._current)},_consumeQuotedIdentifier:function(t){var e=this._current;this._current++;for(var n=t.length;'"'!==t[this._current]&&this._current<n;){var i=this._current;"\\"!==t[i]||"\\"!==t[i+1]&&'"'!==t[i+1]?i++:i+=2,this._current=i}return this._current++,JSON.parse(t.slice(e,this._current))},_consumeRawStringLiteral:function(t){var e=this._current;this._current++;for(var n=t.length;"'"!==t[this._current]&&this._current<n;){var i=this._current;"\\"!==t[i]||"\\"!==t[i+1]&&"'"!==t[i+1]?i++:i+=2,this._current=i}return this._current++,t.slice(e+1,this._current-1).replace("\\'","'")},_consumeNumber:function(t){var e=this._current;this._current++;for(var n=t.length;T(t[this._current])&&this._current<n;)this._current++;var i=parseInt(t.slice(e,this._current));return{type:m,value:i,start:e}},_consumeLBracket:function(t){var e=this._current;return this._current++,"?"===t[this._current]?(this._current++,{type:w,value:"[?",start:e}):"]"===t[this._current]?(this._current++,{type:C,value:"[]",start:e}):{type:P,value:"[",start:e}},_consumeOperator:function(t){var e=this._current,n=t[e];return this._current++,"!"===n?"="===t[this._current]?(this._current++,{type:"NE",value:"!=",start:e}):{type:"Not",value:"!",start:e}:"<"===n?"="===t[this._current]?(this._current++,{type:_,value:"<=",start:e}):{type:"LT",value:"<",start:e}:">"===n?"="===t[this._current]?(this._current++,{type:y,value:">=",start:e}):{type:"GT",value:">",start:e}:"="===n&&"="===t[this._current]?(this._current++,{type:"EQ",value:"==",start:e}):void 0},_consumeLiteral:function(t){this._current++;for(var e=this._current,n=t.length;"`"!==t[this._current]&&this._current<n;){var i=this._current;"\\"!==t[i]||"\\"!==t[i+1]&&"`"!==t[i+1]?i++:i+=2,this._current=i}var o=(o=r(t.slice(e,this._current))).replace("\\`","`"),a=this._looksLikeJSON(o)?JSON.parse(o):JSON.parse('"'+o+'"');return this._current++,a},_looksLikeJSON:function(t){if(""===t)return!1;if(0<='[{"'.indexOf(t[0]))return!0;if(0<=["true","false","null"].indexOf(t))return!0;if(!(0<="-0123456789".indexOf(t[0])))return!1;try{return JSON.parse(t),!0}catch(t){return!1}}};var L={};function z(){}function B(t){this.runtime=t}function j(t){this._interpreter=t,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[a]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[a]}]},contains:{_func:this._functionContains,_signature:[{types:[s,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[s]},{types:[s]}]},floor:{_func:this._functionFloor,_signature:[{types:[a]}]},length:{_func:this._functionLength,_signature:[{types:[s,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[s]},{types:[s]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[s]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[s,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}L.EOF=0,L[l]=0,L[c]=0,L[h]=0,L[u]=0,L[d]=0,L[g]=0,L[m]=0,L[f]=0,L[v]=0,L[b]=1,L.Or=2,L.And=3,L.EQ=5,L.GT=5,L.LT=5,L.GTE=5,L.LTE=5,L.NE=5,L[C]=9,L[x]=20,L[w]=21,L.Dot=40,L.Not=45,L[A]=50,L[P]=55,L[O]=60,z.prototype={parse:function(t){this._loadTokens(t),this.index=0;var e=this.expression(0);if("EOF"===this._lookahead(0))return e;var n=this._lookaheadToken(0),i=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw i.name="ParserError",i},_loadTokens:function(t){var e=(new R).tokenize(t);e.push({type:"EOF",value:"",start:t.length}),this.tokens=e},expression:function(t){var e=this._lookaheadToken(0);this._advance();for(var n=this.nud(e),i=this._lookahead(0);t<L[i];)this._advance(),n=this.led(i,n),i=this._lookahead(0);return n},_lookahead:function(t){return this.tokens[this.index+t].type},_lookaheadToken:function(t){return this.tokens[this.index+t]},_advance:function(){this.index++},nud:function(t){var e,n;switch(t.type){case M:return{type:"Literal",value:t.value};case l:return{type:"Field",name:t.value};case c:var i={type:"Field",name:t.value};if(this._lookahead(0)===O)throw new Error("Quoted identifier not allowed for function names.");return i;case"Not":return{type:"NotExpression",children:[e=this.expression(L.Not)]};case x:return e=null,{type:"ValueProjection",children:[{type:"Identity"},e=this._lookahead(0)===h?{type:"Identity"}:this._parseProjectionRHS(L.Star)]};case w:return this.led(t.type,{type:"Identity"});case A:return this._parseMultiselectHash();case C:return{type:"Projection",children:[{type:C,children:[{type:"Identity"}]},e=this._parseProjectionRHS(L.Flatten)]};case P:return this._lookahead(0)===m||this._lookahead(0)===p?(e=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},e)):this._lookahead(0)===x&&this._lookahead(1)===h?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},e=this._parseProjectionRHS(L.Star)]}):this._parseMultiselectList();case f:return{type:f};case v:return{type:"ExpressionReference",children:[n=this.expression(L.Expref)]};case O:for(var o=[];this._lookahead(0)!==u;)this._lookahead(0)===f?(n={type:f},this._advance()):n=this.expression(0),o.push(n);return this._match(u),o[0];default:this._errorToken(t)}},led:function(t,e){var n;switch(t){case I:var i=L.Dot;return this._lookahead(0)!==x?{type:"Subexpression",children:[e,n=this._parseDotRHS(i)]}:(this._advance(),{type:"ValueProjection",children:[e,n=this._parseProjectionRHS(i)]});case b:return n=this.expression(L.Pipe),{type:b,children:[e,n]};case"Or":return{type:"OrExpression",children:[e,n=this.expression(L.Or)]};case"And":return{type:"AndExpression",children:[e,n=this.expression(L.And)]};case O:for(var o,r=e.name,a=[];this._lookahead(0)!==u;)this._lookahead(0)===f?(o={type:f},this._advance()):o=this.expression(0),this._lookahead(0)===d&&this._match(d),a.push(o);return this._match(u),{type:"Function",name:r,children:a};case w:var s=this.expression(0);return this._match(h),{type:"FilterProjection",children:[e,n=this._lookahead(0)===C?{type:"Identity"}:this._parseProjectionRHS(L.Filter),s]};case C:return{type:"Projection",children:[{type:C,children:[e]},this._parseProjectionRHS(L.Flatten)]};case"EQ":case"NE":case"GT":case y:case"LT":case _:return this._parseComparator(e,t);case P:var l=this._lookaheadToken(0);return l.type===m||l.type===p?(n=this._parseIndexExpression(),this._projectIfSlice(e,n)):(this._match(x),this._match(h),{type:"Projection",children:[e,n=this._parseProjectionRHS(L.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(t){if(this._lookahead(0)!==t){var e=this._lookaheadToken(0),n=new Error("Expected "+t+", got: "+e.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(t){var e=new Error("Invalid token ("+t.type+'): "'+t.value+'"');throw e.name="ParserError",e},_parseIndexExpression:function(){if(this._lookahead(0)===p||this._lookahead(1)===p)return this._parseSliceExpression();var t={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(h),t},_projectIfSlice:function(t,e){var n={type:"IndexExpression",children:[t,e]};return"Slice"===e.type?{type:"Projection",children:[n,this._parseProjectionRHS(L.Star)]}:n},_parseSliceExpression:function(){for(var t=[null,null,null],e=0,n=this._lookahead(0);n!==h&&e<3;){if(n===p)e++,this._advance();else{if(n!==m){var i=this._lookahead(0),o=new Error("Syntax error, unexpected token: "+i.value+"("+i.type+")");throw o.name="Parsererror",o}t[e]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(h),{type:"Slice",children:t}},_parseComparator:function(t,e){return{type:"Comparator",name:e,children:[t,this.expression(L[e])]}},_parseDotRHS:function(t){var e=this._lookahead(0);return 0<=[l,c,x].indexOf(e)?this.expression(t):e===P?(this._match(P),this._parseMultiselectList()):e===A?(this._match(A),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(t){var e;if(L[this._lookahead(0)]<10)e={type:"Identity"};else if(this._lookahead(0)===P)e=this.expression(t);else if(this._lookahead(0)===w)e=this.expression(t);else{if(this._lookahead(0)!==I){var n=this._lookaheadToken(0),i=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw i.name="ParserError",i}this._match(I),e=this._parseDotRHS(t)}return e},_parseMultiselectList:function(){for(var t=[];this._lookahead(0)!==h;){var e=this.expression(0);if(t.push(e),this._lookahead(0)===d&&(this._match(d),this._lookahead(0)===h))throw new Error("Unexpected token Rbracket")}return this._match(h),{type:"MultiSelectList",children:t}},_parseMultiselectHash:function(){for(var t,e,n,i=[],o=[l,c];;){if(t=this._lookaheadToken(0),o.indexOf(t.type)<0)throw new Error("Expecting an identifier token, got: "+t.type);if(e=t.value,this._advance(),this._match(p),n={type:"KeyValuePair",name:e,value:this.expression(0)},i.push(n),this._lookahead(0)===d)this._match(d);else if(this._lookahead(0)===g){this._match(g);break}}return{type:"MultiSelectHash",children:i}}},B.prototype={search:function(t,e){return this.visit(t,e)},visit:function(t,r){var a,s,l,c,h,u;switch(t.type){case"Field":return null!==r&&n(r)&&void 0!==(h=r[t.name])?h:null;case"Subexpression":for(I=this.visit(t.children[0],r),O=1;O<t.children.length;O++)if(null===(I=this.visit(t.children[1],I)))return null;return I;case"IndexExpression":return u=this.visit(t.children[0],r),this.visit(t.children[1],u);case"Index":if(!e(r))return null;var d=t.value;return d<0&&(d=r.length+d),void 0===(I=r[d])&&(I=null),I;case"Slice":if(!e(r))return null;var p=t.children.slice(0),g=this.computeSliceParams(r.length,p),m=g[0],x=g[1],w=g[2],I=[];if(0<w)for(O=m;O<x;O+=w)I.push(r[O]);else for(O=m;x<O;O+=w)I.push(r[O]);return I;case"Projection":var A=this.visit(t.children[0],r);if(!e(A))return null;for(L=[],O=0;O<A.length;O++)null!==(s=this.visit(t.children[1],A[O]))&&L.push(s);return L;case"ValueProjection":if(!n(A=this.visit(t.children[0],r)))return null;L=[];for(var P=function(t){for(var e=Object.keys(t),n=[],i=0;i<e.length;i++)n.push(t[e[i]]);return n}(A),O=0;O<P.length;O++)null!==(s=this.visit(t.children[1],P[O]))&&L.push(s);return L;case"FilterProjection":if(!e(A=this.visit(t.children[0],r)))return null;var M=[],k=[];for(O=0;O<A.length;O++)o(a=this.visit(t.children[2],A[O]))||M.push(A[O]);for(var S=0;S<M.length;S++)null!==(s=this.visit(t.children[1],M[S]))&&k.push(s);return k;case"Comparator":switch(l=this.visit(t.children[0],r),c=this.visit(t.children[1],r),t.name){case"EQ":I=i(l,c);break;case"NE":I=!i(l,c);break;case"GT":I=c<l;break;case y:I=c<=l;break;case"LT":I=l<c;break;case _:I=l<=c;break;default:throw new Error("Unknown comparator: "+t.name)}return I;case C:var E=this.visit(t.children[0],r);if(!e(E))return null;var T=[];for(O=0;O<E.length;O++)e(s=E[O])?T.push.apply(T,s):T.push(s);return T;case"Identity":return r;case"MultiSelectList":if(null===r)return null;for(L=[],O=0;O<t.children.length;O++)L.push(this.visit(t.children[O],r));return L;case"MultiSelectHash":if(null===r)return null;var R,L={};for(O=0;O<t.children.length;O++)L[(R=t.children[O]).name]=this.visit(R.value,r);return L;case"OrExpression":return o(a=this.visit(t.children[0],r))&&(a=this.visit(t.children[1],r)),a;case"AndExpression":return!0===o(l=this.visit(t.children[0],r))?l:this.visit(t.children[1],r);case"NotExpression":return o(l=this.visit(t.children[0],r));case"Literal":return t.value;case b:return u=this.visit(t.children[0],r),this.visit(t.children[1],u);case f:return r;case"Function":var z=[];for(O=0;O<t.children.length;O++)z.push(this.visit(t.children[O],r));return this.runtime.callFunction(t.name,z);case"ExpressionReference":var B=t.children[0];return B.jmespathType=v,B;default:throw new Error("Unknown node type: "+t.type)}},computeSliceParams:function(t,e){var n=e[0],i=e[1],o=e[2],r=[null,null,null];if(null===o)o=1;else if(0===o){var a=new Error("Invalid slice, step cannot be 0");throw a.name="RuntimeError",a}var s=o<0;return n=null===n?s?t-1:0:this.capSliceRange(t,n,o),i=null===i?s?-1:t:this.capSliceRange(t,i,o),r[0]=n,r[1]=i,r[2]=o,r},capSliceRange:function(t,e,n){return e<0?(e+=t)<0&&(e=n<0?-1:0):t<=e&&(e=n<0?t-1:t),e}},j.prototype={callFunction:function(t,e){var n=this.functionTable[t];if(void 0===n)throw new Error("Unknown function: "+t+"()");return this._validateArgs(t,e,n._signature),n._func.call(this,e)},_validateArgs:function(t,e,n){var i,o,r,a;if(n[n.length-1].variadic){if(e.length<n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+t+"() takes at least"+n.length+i+" but received "+e.length)}else if(e.length!==n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+t+"() takes "+n.length+i+" but received "+e.length);for(var s=0;s<n.length;s++){a=!1,o=n[s].types,r=this._getTypeName(e[s]);for(var l=0;l<o.length;l++)if(this._typeMatches(r,o[l],e[s])){a=!0;break}if(!a)throw new Error("TypeError: "+t+"() expected argument "+(s+1)+" to be type "+o+" but received type "+r+" instead.")}},_typeMatches:function(t,e,n){if(1===e)return!0;if(9!==e&&8!==e&&3!==e)return t===e;if(3===e)return 3===t;if(3===t){var i;8===e?i=a:9===e&&(i=s);for(var o=0;o<n.length;o++)if(!this._typeMatches(this._getTypeName(n[o]),i,n[o]))return!1;return!0}},_getTypeName:function(t){switch(Object.prototype.toString.call(t)){case"[object String]":return s;case"[object Number]":return a;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return t.jmespathType===v?6:4}},_functionStartsWith:function(t){return 0===t[0].lastIndexOf(t[1])},_functionEndsWith:function(t){var e=t[0],n=t[1];return-1!==e.indexOf(n,e.length-n.length)},_functionReverse:function(t){if(this._getTypeName(t[0])===s){for(var e=t[0],n="",i=e.length-1;0<=i;i--)n+=e[i];return n}var o=t[0].slice(0);return o.reverse(),o},_functionAbs:function(t){return Math.abs(t[0])},_functionCeil:function(t){return Math.ceil(t[0])},_functionAvg:function(t){for(var e=0,n=t[0],i=0;i<n.length;i++)e+=n[i];return e/n.length},_functionContains:function(t){return 0<=t[0].indexOf(t[1])},_functionFloor:function(t){return Math.floor(t[0])},_functionLength:function(t){return n(t[0])?Object.keys(t[0]).length:t[0].length},_functionMap:function(t){for(var e=[],n=this._interpreter,i=t[0],o=t[1],r=0;r<o.length;r++)e.push(n.visit(i,o[r]));return e},_functionMerge:function(t){for(var e={},n=0;n<t.length;n++){var i=t[n];for(var o in i)e[o]=i[o]}return e},_functionMax:function(t){if(0<t[0].length){if(this._getTypeName(t[0][0])===a)return Math.max.apply(Math,t[0]);for(var e=t[0],n=e[0],i=1;i<e.length;i++)n.localeCompare(e[i])<0&&(n=e[i]);return n}return null},_functionMin:function(t){if(0<t[0].length){if(this._getTypeName(t[0][0])===a)return Math.min.apply(Math,t[0]);for(var e=t[0],n=e[0],i=1;i<e.length;i++)e[i].localeCompare(n)<0&&(n=e[i]);return n}return null},_functionSum:function(t){for(var e=0,n=t[0],i=0;i<n.length;i++)e+=n[i];return e},_functionType:function(t){switch(this._getTypeName(t[0])){case a:return"number";case s:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(t){return Object.keys(t[0])},_functionValues:function(t){for(var e=t[0],n=Object.keys(e),i=[],o=0;o<n.length;o++)i.push(e[n[o]]);return i},_functionJoin:function(t){return t[1].join(t[0])},_functionToArray:function(t){return 3===this._getTypeName(t[0])?t[0]:[t[0]]},_functionToString:function(t){return this._getTypeName(t[0])===s?t[0]:JSON.stringify(t[0])},_functionToNumber:function(t){var e,n=this._getTypeName(t[0]);return n===a?t[0]:n!==s||(e=+t[0],isNaN(e))?null:e},_functionNotNull:function(t){for(var e=0;e<t.length;e++)if(7!==this._getTypeName(t[e]))return t[e];return null},_functionSort:function(t){var e=t[0].slice(0);return e.sort(),e},_functionSortBy:function(t){var e=t[0].slice(0);if(0===e.length)return e;var n=this._interpreter,i=t[1],o=this._getTypeName(n.visit(i,e[0]));if([a,s].indexOf(o)<0)throw new Error("TypeError");for(var r=this,l=[],c=0;c<e.length;c++)l.push([c,e[c]]);l.sort((function(t,e){var a=n.visit(i,t[1]),s=n.visit(i,e[1]);if(r._getTypeName(a)!==o)throw new Error("TypeError: expected "+o+", received "+r._getTypeName(a));if(r._getTypeName(s)!==o)throw new Error("TypeError: expected "+o+", received "+r._getTypeName(s));return s<a?1:a<s?-1:t[0]-e[0]}));for(var h=0;h<l.length;h++)e[h]=l[h][1];return e},_functionMaxBy:function(t){for(var e,n,i=t[0],o=this.createKeyFunction(t[1],[a,s]),r=-1/0,l=0;l<i.length;l++)r<(n=o(i[l]))&&(r=n,e=i[l]);return e},_functionMinBy:function(t){for(var e,n,i=t[0],o=this.createKeyFunction(t[1],[a,s]),r=1/0,l=0;l<i.length;l++)(n=o(i[l]))<r&&(r=n,e=i[l]);return e},createKeyFunction:function(t,e){var n=this,i=this._interpreter;return function(o){var r=i.visit(t,o);if(e.indexOf(n._getTypeName(r))<0){var a="TypeError: expected one of "+e+", received "+n._getTypeName(r);throw new Error(a)}return r}}},t.tokenize=function(t){return(new R).tokenize(t)},t.compile=function(t){return(new z).parse(t)},t.search=function(t,e){var n=new z,i=new j,o=new B(i);i._interpreter=o;var r=n.parse(e);return o.search(r,t)},t.strictDeepEqual=i}(e)},function(t,e,n){e.tryRequireThemeJsonEditor=function(){try{n(42)}catch(t){console.error(t)}}},function(t,e,n){"use strict";var i=n(20),o=n(13),r=n(80).treeModeMixins,a=n(21).textModeMixins,s=n(81).previewModeMixins,l=n(0),c=l.clear,h=l.extend,u=l.getInnerText,d=l.getInternetExplorerVersion,p=l.parse,g=n(43).tryRequireAjv,m=n(6).showTransformModal,f=n(5).showSortModal,v=g();function b(t,e,n){if(!(this instanceof b))throw new Error('JSONEditor constructor called without "new".');var i=d();if(-1!==i&&i<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");e&&(e.error&&(console.warn('Option "error" has been renamed to "onError"'),e.onError=e.error,delete e.error),e.change&&(console.warn('Option "change" has been renamed to "onChange"'),e.onChange=e.change,delete e.change),e.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),e.onEditable=e.editable,delete e.editable),e.onChangeJSON&&("text"!==e.mode&&"code"!==e.mode&&(!e.modes||-1===e.modes.indexOf("text")&&-1===e.modes.indexOf("code"))||console.warn('Option "onChangeJSON" is not applicable to modes "text" and "code". Use "onChangeText" or "onChange" instead.')),e&&Object.keys(e).forEach((function(t){-1===b.VALID_OPTIONS.indexOf(t)&&console.warn('Unknown option "'+t+'". This option will be ignored')}))),arguments.length&&this._create(t,e,n)}"undefined"==typeof Promise&&console.error("Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor"),b.modes={},b.prototype.DEBOUNCE_INTERVAL=150,b.VALID_OPTIONS=["ajv","schema","schemaRefs","templates","ace","theme","autocomplete","onChange","onChangeJSON","onChangeText","onEditable","onError","onEvent","onModeChange","onNodeName","onValidate","onCreateMenu","onSelectionChange","onTextSelectionChange","onClassName","onFocus","onBlur","colorPicker","onColorPicker","timestampTag","timestampFormat","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys","navigationBar","statusBar","mainMenuBar","languages","language","enableSort","enableTransform","limitDragging","maxVisibleChilds","onValidationError","modalAnchor","popupAnchor","createQuery","executeQuery","queryDescription"],b.prototype._create=function(t,e,n){this.container=t,this.options=e||{},this.json=n||{},this.setMode(this.options.mode||this.options.modes&&this.options.modes[0]||"tree")},b.prototype.destroy=function(){},b.prototype.set=function(t){this.json=t},b.prototype.get=function(){return this.json},b.prototype.setText=function(t){this.json=p(t)},b.prototype.getText=function(){return JSON.stringify(this.json)},b.prototype.setName=function(t){this.options||(this.options={}),this.options.name=t},b.prototype.getName=function(){return this.options&&this.options.name},b.prototype.setMode=function(t){if(t!==this.options.mode||!this.create){var e=this.container,n=h({},this.options),i=n.mode;n.mode=t;var o=b.modes[t];if(!o)throw new Error('Unknown mode "'+n.mode+'"');try{var r="text"===o.data,a=this.getName(),s=this[r?"getText":"get"]();if(this.destroy(),c(this),h(this,o.mixin),this.create(e,n),this.setName(a),this[r?"setText":"set"](s),"function"==typeof o.load)try{o.load.call(this)}catch(t){console.error(t)}if("function"==typeof n.onModeChange&&t!==i)try{n.onModeChange(t,i)}catch(t){console.error(t)}}catch(t){this._onError(t)}}},b.prototype.getMode=function(){return this.options.mode},b.prototype._onError=function(t){if(!this.options||"function"!=typeof this.options.onError)throw t;this.options.onError(t)},b.prototype.setSchema=function(t,e){if(t){var i;try{this.options.ajv?i=this.options.ajv:((i=v({allErrors:!0,verbose:!0,schemaId:"auto",$data:!0})).addMetaSchema(n(78)),i.addMetaSchema(n(79)))}catch(t){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}if(i){if(e){for(var o in e)i.removeSchema(o),e[o]&&i.addSchema(e[o],o);this.options.schemaRefs=e}this.validateSchema=i.compile(t),this.options.schema=t,this.validate()}this.refresh()}else this.validateSchema=null,this.options.schema=null,this.options.schemaRefs=null,this.validate(),this.refresh()},b.prototype.validate=function(){},b.prototype.refresh=function(){},b.registerMode=function(t){var e;if(Array.isArray(t))for(o=0;o<t.length;o++)b.registerMode(t[o]);else{if(!("mode"in t))throw new Error('Property "mode" missing');if(!("mixin"in t))throw new Error('Property "mixin" missing');if(!("data"in t))throw new Error('Property "data" missing');var n=t.mode;if(n in b.modes)throw new Error('Mode "'+n+'" already registered');if("function"!=typeof t.mixin.create)throw new Error('Required function "create" missing on mixin');for(var i=["setMode","registerMode","modes"],o=0;o<i.length;o++)if((e=i[o])in t.mixin)throw new Error('Reserved property "'+e+'" not allowed in mixin');b.modes[n]=t}},b.registerMode(r),b.registerMode(a),b.registerMode(s),b.ace=i,b.Ajv=v,b.VanillaPicker=o,b.showTransformModal=m,b.showSortModal=f,b.getInnerText=u,b.default=b,t.exports=b},function(t,e,n){(function(t){!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,i){"string"==typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};function n(t,e,n){if("string"==typeof e){var i=r(t,e);if(null!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(e)){for(var a=[],s=0,l=e.length;s<l;++s){var c=r(t,e[s]);if(null==c&&o.original)return;a.push(c)}return n&&n.apply(null,a)||!0}}e.modules={},e.payloads={};var i,o=function t(e,i){var o=n("",e,i);return null==o&&t.original?t.original.apply(this,arguments):o},r=function(t,i){i=function t(e,n){if(-1!==n.indexOf("!")){var i=n.split("!");return t(e,i[0])+"!"+t(e,i[1])}if("."==n.charAt(0))for(n=e.split("/").slice(0,-1).join("/")+"/"+n;-1!==n.indexOf(".")&&o!=n;){var o=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return n}(t,i);var o,r,a=e.modules[i];return a||("function"==typeof(a=e.payloads[i])&&(o={id:i,uri:"",exports:r={},packaged:!0},r=a((function(t,e){return n(i,t,e)}),r,o)||o.exports,e.modules[i]=r,delete e.payloads[i]),a=e.modules[i]=r||a),a};i=t,t.ace||(t.ace={}),(i=t.ace).define&&i.define.packaged||(e.original=i.define,i.define=e,i.define.packaged=!0),i.require&&i.require.packaged||(o.original=i.require,i.require=o,i.require.packaged=!0)}(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],(function(t,e,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(t,e,n){"use strict";e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},o=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),r=i.userAgent||"",a=i.appName||"";e.isWin="win"==o,e.isMac="mac"==o,e.isLinux="linux"==o,e.isIE="Microsoft Internet Explorer"==a||0<=a.indexOf("MSAppHost")?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=r.match(/ Gecko\/\d+/),e.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,e.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,e.isAIR=0<=r.indexOf("AdobeAIR"),e.isAndroid=0<=r.indexOf("Android"),e.isChromeOS=0<=r.indexOf(" CrOS "),e.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,e.isIOS&&(e.isMac=!0),e.isMobile=e.isIOS||e.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i,o=t("./useragent");e.buildDom=function t(e,n,i){if("string"==typeof e&&e){var o=document.createTextNode(e);return n&&n.appendChild(o),o}if(!Array.isArray(e))return e&&e.appendChild&&n&&n.appendChild(e),e;if("string"!=typeof e[0]||!e[0]){for(var r=[],a=0;a<e.length;a++){var s=t(e[a],n,i);s&&r.push(s)}return r}var l=document.createElement(e[0]),c=e[1],h=1;for(c&&"object"==typeof c&&!Array.isArray(c)&&(h=2),a=h;a<e.length;a++)t(e[a],l,i);return 2==h&&Object.keys(c).forEach((function(t){var e=c[t];"class"===t?l.className=Array.isArray(e)?e.join(" "):e:"function"==typeof e||"value"==t||"$"==t[0]?l[t]=e:"ref"===t?i&&(i[e]=l):null!=e&&l.setAttribute(t,e)})),n&&n.appendChild(l),l},e.getDocumentHead=function(t){return(t=t||document).head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.removeChildren=function(t){t.innerHTML=""},e.createTextNode=function(t,e){return(e?e.ownerDocument:document).createTextNode(t)},e.createFragment=function(t){return(t?t.ownerDocument:document).createDocumentFragment()},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var i=n.indexOf(e);if(-1==i)break;n.splice(i,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),i=!0;;){var o=n.indexOf(e);if(-1==o)break;i=!1,n.splice(o,1)}return i&&n.push(e),t.className=n.join(" "),i},e.setCssClass=function(t,n,i){i?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,i=0;if(n=(e=e||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===t)return!0},e.importCssString=function(t,n,i){var o=i;i&&i.getRootNode&&(o=i.getRootNode())&&o!=i||(o=document);var r=o.ownerDocument||o;if(n&&e.hasCssString(n,o))return null;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */");var a=e.createElement("style");a.appendChild(r.createTextNode(t)),n&&(a.id=n),o==r&&(o=e.getDocumentHead(r)),o.insertBefore(a,o.firstChild)},e.importCssStylsheet=function(t,n){e.buildDom(["link",{rel:"stylesheet",href:t}],e.getDocumentHead(n))},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=e.createElement("ace_outer"),o=i.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",i.appendChild(n);var r=t.documentElement;r.appendChild(i);var a=n.offsetWidth;o.overflow="scroll";var s=n.offsetWidth;return a==s&&(s=i.clientWidth),r.removeChild(i),a-s},"undefined"==typeof document&&(e.importCssString=function(){}),e.computedStyle=function(t,e){return window.getComputedStyle(t,"")||{}},e.setStyle=function(t,e,n){t[e]!==n&&(t[e]=n)},e.HAS_CSS_ANIMATION=!1,e.HAS_CSS_TRANSFORMS=!1,e.HI_DPI=!o.isWin||"undefined"!=typeof window&&1.5<=window.devicePixelRatio,"undefined"!=typeof document&&(i=document.createElement("div"),e.HI_DPI&&void 0!==i.style.transform&&(e.HAS_CSS_TRANSFORMS=!0),o.isEdge||void 0===i.style.animationName||(e.HAS_CSS_ANIMATION=!0),i=null),e.translate=e.HAS_CSS_TRANSFORMS?function(t,e,n){t.style.transform="translate("+Math.round(e)+"px, "+Math.round(n)+"px)"}:function(t,e,n){t.style.top=Math.round(n)+"px",t.style.left=Math.round(e)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("./oop"),o=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter((function(t){return e&n.KEY_MODS[t]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(e,o),e.keyCodeToString=function(t){var e=o[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i,o=t("./keys"),r=t("./useragent"),a=null,s=0;function l(){return null==i&&function(){i=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){i={passive:!1}}})}catch(t){}}(),i}function c(t,e,n){this.elem=t,this.type=e,this.callback=n}c.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var h,u=e.addListener=function(t,e,n,i){t.addEventListener(e,n,l()),i&&i.$toDestroy.push(new c(t,e,n))},d=e.removeListener=function(t,e,n){t.removeEventListener(e,n,l())};function p(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)}function g(t,e,n){var i,l=p(e);if(!r.isMac&&a){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(l|=8),a.altGr){if(3==(3&l))return;a.altGr=0}18!==n&&17!==n||(i="location"in e?e.location:e.keyLocation,17===n&&1===i?1==a[n]&&(s=e.timeStamp):18===n&&3===l&&2===i&&e.timeStamp-s<50&&(a.altGr=!0))}if(n in o.MODIFIER_KEYS&&(n=-1),l||13!==n||3!==(i="location"in e?e.location:e.keyLocation)||(t(e,l,-n),!e.defaultPrevented)){if(r.isChromeOS&&8&l){if(t(e,l,n),e.defaultPrevented)return;l&=-9}return!!(l||n in o.FUNCTION_KEYS||n in o.PRINTABLE_KEYS)&&t(e,l,n)}}function m(){a=Object.create(null)}e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation()},e.preventDefault=function(t){t.preventDefault&&t.preventDefault()},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||r.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.button},e.capture=function(t,e,n){var i=t&&t.ownerDocument||document;function o(t){e&&e(t),n&&n(t),d(i,"mousemove",e),d(i,"mouseup",o),d(i,"dragstart",o)}return u(i,"mousemove",e),u(i,"mouseup",o),u(i,"dragstart",o),o},e.addMouseWheelListener=function(t,e,n){"onmousewheel"in t?u(t,"mousewheel",(function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),e(t)}),n):"onwheel"in t?u(t,"wheel",(function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}e(t)}),n):u(t,"DOMMouseScroll",(function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),e(t)}),n)},e.addMultiMouseDownListener=function(t,n,i,o,a){var s,l,c,h=0,d={2:"dblclick",3:"tripleclick",4:"quadclick"};function p(t){var a;if(0!==e.getButton(t)?h=0:1<t.detail&&!(4<++h)||(h=1),r.isIE&&(a=5<Math.abs(t.clientX-s)||5<Math.abs(t.clientY-l),c&&!a||(h=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[h-1]||600),1==h&&(s=t.clientX,l=t.clientY)),t._clicks=h,i[o]("mousedown",t),4<h)h=0;else if(1<h)return i[o](d[h],t)}Array.isArray(t)||(t=[t]),t.forEach((function(t){u(t,"mousedown",p,a)}))},e.getModifierString=function(t){return o.KEY_MODS[p(t)]},e.addCommandKeyListener=function(t,n,i){var o,s;r.isOldGecko||r.isOpera&&!("KeyboardEvent"in window)?(o=null,u(t,"keydown",(function(t){o=t.keyCode}),i),u(t,"keypress",(function(t){return g(n,t,o)}),i)):(s=null,u(t,"keydown",(function(t){a[t.keyCode]=(a[t.keyCode]||0)+1;var e=g(n,t,t.keyCode);return s=t.defaultPrevented,e}),i),u(t,"keypress",(function(t){s&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),s=null)}),i),u(t,"keyup",(function(t){a[t.keyCode]=null}),i),a||(m(),u(window,"focus",m)))},"object"==typeof window&&window.postMessage&&!r.isOldIE&&(h=1,e.nextTick=function(t,n){n=n||window;var i="zero-timeout-message-"+h++;u(n,"message",(function o(r){r.data==i&&(e.stopPropagation(r),d(n,"message",o),t())})),n.postMessage(i,"*")}),e.$idleBlocked=!1,e.onIdle=function(t,n){return setTimeout((function n(){e.$idleBlocked?setTimeout(n,100):t()}),n)},e.$idleBlockId=null,e.blockIdle=function(t){e.$idleBlockId&&clearTimeout(e.$idleBlockId),e.$idleBlocked=!0,e.$idleBlockId=setTimeout((function(){e.$idleBlocked=!1}),t||100)},e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame=e.nextFrame?e.nextFrame.bind(window):function(t){setTimeout(t,17)}})),ace.define("ace/range",["require","exports","module"],(function(t,e,n){"use strict";function i(t,e,n,i){this.start={row:t,column:e},this.end={row:n,column:i}}(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e=t.end,n=t.start,i=this.compare(e.row,e.column);return 1==i?1==(i=this.compare(n.row,n.column))?2:0==i?1:0:-1==i?-2:-1==(i=this.compare(n.row,n.column))?-1:1==i?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)&&!this.isStart(t,e)},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row!==t||e<=this.end.column?0:1:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){var n,o;return this.end.row>e?n={row:e+1,column:0}:this.end.row<t&&(n={row:t,column:0}),this.start.row>e?o={row:e+1,column:0}:this.start.row<t&&(o={row:t,column:0}),i.fromPoints(o||this.start,n||this.end)},this.extend=function(t,e){var n,o,r=this.compare(t,e);return 0==r?this:(-1==r?n={row:t,column:e}:o={row:t,column:e},i.fromPoints(n||this.start,o||this.end))},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return new i(this.start.row,0,0==this.end.column?Math.max(this.start.row,this.end.row-1):this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new i(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(i.prototype),i.fromPoints=function(t,e){return new i(t.row,t.column,e.row,e.column)},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";0<e;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var i=/^\s\s*/,o=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(i,"")},e.stringTrimRight=function(t){return t.replace(o,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=t[n]&&"object"==typeof t[n]?this.copyObject(t[n]):t[n];return e},e.deepCopy=function t(e){if("object"!=typeof e||!e)return e;var n;if(Array.isArray(e)){n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var i in n={},e)n[i]=t(e[i]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return(""+t).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,(function(t){n.push({offset:arguments[arguments.length-2],length:t.length})})),n},e.deferredCall=function(t){function e(){n=null,t()}var n=null,i=function t(i){return t.cancel(),n=setTimeout(e,i||0),t};return(i.schedule=i).call=function(){return this.cancel(),t(),i},i.cancel=function(){return clearTimeout(n),n=null,i},i.isPending=function(){return n},i},e.delayedCall=function(t,e){function n(){o=null,t()}function i(t){null==o&&(o=setTimeout(n,t||e))}var o=null;return i.delay=function(t){o&&clearTimeout(o),o=setTimeout(n,t||e)},(i.schedule=i).call=function(){this.cancel(),t()},i.cancel=function(){o&&clearTimeout(o),o=null},i.isPending=function(){return o},i}})),ace.define("ace/clipboard",["require","exports","module"],(function(t,e,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(t,e,n){"use strict";var i=t("../lib/event"),o=t("../lib/useragent"),r=t("../lib/dom"),a=t("../lib/lang"),s=t("../clipboard"),l=o.isChrome<18,c=o.isIE,h=63<o.isChrome,u=t("../lib/keys"),d=u.KEY_MODS,p=o.isIOS,g=p?/\s/:/\n/,m=o.isMobile;e.TextInput=function(t,e){var n=r.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",t.insertBefore(n,t.firstChild);var f=!1,v=!1,b=!1,y=!1,_="";m||(n.style.fontSize="1px");var C=!1,x=!1,w="",I=0,A=0,P=0;try{var O=document.activeElement===n}catch(t){}i.addListener(n,"blur",(function(t){x||(e.onBlur(t),O=!1)}),e),i.addListener(n,"focus",(function(t){if(!x){if(O=!0,o.isEdge)try{if(!document.hasFocus())return}catch(t){}e.onFocus(t),o.isEdge?setTimeout(M):M()}}),e),this.$focusScroll=!1,this.focus=function(){if(_||h||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var t=n.style.top;n.style.position="fixed",n.style.top="0px";try{var e=0!=n.getBoundingClientRect().top}catch(t){return}var i=[];if(e)for(var o=n.parentElement;o&&1==o.nodeType;)i.push(o),o.setAttribute("ace_nocontext",!0),o=!o.parentElement&&o.getRootNode?o.getRootNode().host:o.parentElement;n.focus({preventScroll:!0}),e&&i.forEach((function(t){t.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=t)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return O},e.on("beforeEndOperation",(function(){var t=e.curOp,i=t&&t.command&&t.command.name;"insertstring"!=i&&(b&&i&&(t.docChanged||t.selectionChanged)&&(w=n.value="",F()),M())}));var M=p?function(t){var i,o;!O||f&&!t||y||((i="\n ab"+(t=t||"")+"cde fg\n")!=n.value&&(n.value=w=i),o=4+(t.length||(e.selection.isEmpty()?0:1)),4==I&&A==o||n.setSelectionRange(4,o),I=4,A=o)}:function(){if(!b&&!y&&(O||B)){b=!0;var t,i,o,r,a,s=0,l=0,c="";e.session&&(s=(i=(t=e.selection).getRange()).start.column,l=i.end.column,c=e.session.getLine(o=t.cursor.row),i.start.row!=o?(r=e.session.getLine(o-1),s=i.start.row<o-1?0:s,l+=r.length+1,c=r+"\n"+c):i.end.row!=o?(a=e.session.getLine(o+1),l=i.end.row>o+1?a.length:l,l+=c.length+1,c=c+"\n"+a):m&&0<o&&(c="\n"+c,l+=1,s+=1),400<c.length&&(s<400&&l<400?c=c.slice(0,400):(c="\n",s==l?s=l=0:(s=0,l=1))));var h=c+"\n\n";if(h!=w&&(n.value=w=h,I=A=h.length),B&&(I=n.selectionStart,A=n.selectionEnd),A!=l||I!=s||n.selectionEnd!=A)try{n.setSelectionRange(s,l),I=s,A=l}catch(t){}b=!1}};this.resetSelection=M,O&&e.onFocus();var k=null;function S(t,i){if(B=B&&!1,v)return M(),t&&e.onPaste(t),v=!1,"";for(var r=n.selectionStart,a=n.selectionEnd,s=I,l=w.length-A,c=t,h=t.length-r,u=t.length-a,d=0;0<s&&w[d]==t[d];)d++,s--;for(c=c.slice(d),d=1;0<l&&w.length-d>I-1&&w[w.length-d]==t[t.length-d];)d++,l--;h-=d-1,u-=d-1;var p=c.length-d+1;if(p<0&&(s=-p,p=0),c=c.slice(0,p),!(i||c||h||s||l||u))return"";var g=!(y=!0);return o.isAndroid&&". "==c&&(c="  ",g=!0),c&&!s&&!l&&!h&&!u||C?e.onTextInput(c):e.onTextInput(c,{extendLeft:s,extendRight:l,restoreStart:h,restoreEnd:u}),y=!1,w=t,I=r,A=a,P=u,g?"\n":c}function E(t){if(b)return D();if(t&&t.inputType){if("historyUndo"==t.inputType)return e.execCommand("undo");if("historyRedo"==t.inputType)return e.execCommand("redo")}var i=n.value,o=S(i,!0);(500<i.length||g.test(o)||m&&I<1&&I==A)&&M()}function T(t,o){var r=e.getCopyText();if(!r)return i.preventDefault(t);j(t,r)?(p&&(M(r),f=r,setTimeout((function(){f=!1}),10)),o?e.onCut():e.onCopy(),i.preventDefault(t)):(f=!0,n.value=r,n.select(),setTimeout((function(){f=!1,M(),o?e.onCut():e.onCopy()})))}function R(t){T(t,!0)}function L(t){T(t,!1)}function z(t){var r=j(t);s.pasteCancelled()||("string"==typeof r?(r&&e.onPaste(r,t),o.isIE&&setTimeout(M),i.preventDefault(t)):(n.value="",v=!0))}this.setInputHandler=function(t){k=t};var B=!(this.getInputHandler=function(){return k}),j=function t(e,n,i){var o=e.clipboardData||window.clipboardData;if(o&&!l){var r=c||i?"Text":"text/plain";try{return n?!1!==o.setData(r,n):o.getData(r)}catch(e){if(!i)return t(e,n,!0)}}};i.addCommandKeyListener(n,e.onCommandKey.bind(e),e),i.addListener(n,"select",(function(t){var i;b||(f?f=!1:0===(i=n).selectionStart&&i.selectionEnd>=w.length&&i.value===w&&w&&i.selectionEnd!==A?(e.selectAll(),M()):m&&n.selectionStart!=I&&M())}),e),i.addListener(n,"input",E,e),i.addListener(n,"cut",R,e),i.addListener(n,"copy",L,e),i.addListener(n,"paste",z,e),"oncut"in n&&"oncopy"in n&&"onpaste"in n||i.addListener(t,"keydown",(function(t){if((!o.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:L(t);break;case 86:z(t);break;case 88:R(t)}}),e);var D=function(){var t;if(b&&e.onCompositionUpdate&&!e.$readOnly)return C?V():void(b.useTextareaForIME?e.onCompositionUpdate(n.value):(t=n.value,S(t),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+A-b.selectionStart+P)))},F=function(t){e.onCompositionEnd&&!e.$readOnly&&(b=!1,e.onCompositionEnd(),e.off("mousedown",V),t&&E())};function V(){x=!0,n.blur(),n.focus(),x=!1}var N,$=a.delayedCall(D,50).schedule.bind(null,null);function Z(){clearTimeout(N),N=setTimeout((function(){_&&(n.style.cssText=_,_=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()}),0)}function G(t){e.textInput.onContextMenu(t),Z()}i.addListener(n,"compositionstart",(function(t){var i;b||!e.onCompositionStart||e.$readOnly||(b={},C||(t.data&&(b.useTextareaForIME=!1),setTimeout(D,0),e._signal("compositionStart"),e.on("mousedown",V),(i=e.getSelectionRange()).end.row=i.start.row,i.end.column=i.start.column,b.markerRange=i,b.selectionStart=I,e.onCompositionStart(b),b.useTextareaForIME?(w=n.value="",A=I=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))))}),e),i.addListener(n,"compositionupdate",D,e),i.addListener(n,"keyup",(function(t){27==t.keyCode&&n.value.length<n.selectionStart&&(b||(w=n.value),I=A=-1,M()),$()}),e),i.addListener(n,"keydown",$,e),i.addListener(n,"compositionend",F,e),this.getElement=function(){return n},this.setCommandMode=function(t){C=t,n.readOnly=!1},this.setReadOnly=function(t){C||(n.readOnly=t)},this.setCopyWithEmptySelection=function(t){},this.onContextMenu=function(t){B=!0,M(),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,a){function s(t){r.translate(n,t.clientX-u-2,Math.min(t.clientY-h-2,d))}_=_||n.style.cssText,n.style.cssText=(a?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(I+A)*e.renderer.characterWidth*.5+"px;";var l=e.container.getBoundingClientRect(),c=r.computedStyle(e.container),h=l.top+(parseInt(c.borderTopWidth)||0),u=l.left+(parseInt(l.borderLeftWidth)||0),d=l.bottom-h-n.clientHeight-2;s(t),"mousedown"==t.type&&(e.renderer.$isMousePressed=!0,clearTimeout(N),o.isWin&&i.capture(e.container,s,Z))},this.onContextMenuClose=Z,i.addListener(n,"mouseup",G,e),i.addListener(n,"mousedown",(function(t){t.preventDefault(),Z()}),e),i.addListener(e.renderer.scroller,"contextmenu",G,e),i.addListener(n,"contextmenu",G,e),p&&function(t,e){var n=null,i=!1;function o(n){var o,r,a,s,l;document.activeElement===e&&(i||b||t.$mouseHandler.isMousePressed||f||(r=e.selectionEnd,a=null,(s=0)==(o=e.selectionStart)?a=u.up:1==o?a=u.home:A<r&&"\n"==w[r]?a=u.end:o<I&&" "==w[o-1]?(a=u.left,s=d.option):o<I||o==I&&A!=I&&o==r?a=u.left:A<r&&2<w.slice(0,r).split("\n").length?a=u.down:A<r&&" "==w[r-1]?(a=u.right,s=d.option):(A<r||r==A&&A!=I&&o==r)&&(a=u.right),o!==r&&(s|=d.shift),a&&(!t.onCommandKey({},s,a)&&t.commands&&(a=u.keyCodeToString(a),(l=t.commands.findKeyCommand(s,a))&&t.execCommand(l)),I=o,A=r,M(""))))}e.addEventListener("keydown",(function(t){n&&clearTimeout(n),i=!0}),!0),e.addEventListener("keyup",(function(t){n=setTimeout((function(){i=!1}),100)}),!0),document.addEventListener("selectionchange",o),t.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(e,n)},e.$setUserAgentForTests=function(t,e){m=t,p=e}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/useragent");function o(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(e){t[e]=this[e]}),this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function r(t,e){return(t.start.row==t.end.row?2*e.column-t.start.column-t.end.column:t.start.row!=t.end.row-1||t.start.column||t.end.column?2*e.row-t.start.row-t.end.row:e.column-4)<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var o=this.editor,r=t.getButton();return 0!==r?(!o.getSelectionRange().isEmpty()&&1!=r||o.selection.moveToPosition(n),void(2==r&&(o.textInput.onContextMenu(t.domEvent),i.isMozilla||t.preventDefault()))):(this.mousedownEvent.time=Date.now(),!e||o.isFocused()||(o.focus(),!this.$focusTimeout||this.$clickSelection||o.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,1<t.domEvent._clicks),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t)))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,e,n,i=this.editor,o=i.renderer.screenToTextCoordinates(this.x,this.y);this.$clickSelection&&(n=-1==(t=this.$clickSelection.comparePoint(o))?this.$clickSelection.end:1==t?this.$clickSelection.start:(o=(e=r(this.$clickSelection,o)).cursor,e.anchor),i.selection.setSelectionAnchor(n.row,n.column)),i.selection.selectToPosition(o),i.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n,i,o,a=this.editor,s=a.renderer.screenToTextCoordinates(this.x,this.y),l=a.selection[t](s.row,s.column);this.$clickSelection&&(e=this.$clickSelection.comparePoint(l.start),n=this.$clickSelection.comparePoint(l.end),-1==e&&n<=0?(o=this.$clickSelection.end,l.end.row==s.row&&l.end.column==s.column||(s=l.start)):1==n&&0<=e?(o=this.$clickSelection.start,l.start.row==s.row&&l.start.column==s.column||(s=l.end)):o=-1==e&&1==n?(s=l.end,l.start):(s=(i=r(this.$clickSelection,s)).cursor,i.anchor),a.selection.setSelectionAnchor(o.row,o.column)),a.selection.selectToPosition(s),a.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t,e,n=(t=this.mousedownEvent.y,e=this.y,Math.sqrt(Math.pow(this.x-this.mousedownEvent.x,2)+Math.pow(e-t,2))),i=Date.now();(0<n||i-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=t.domEvent.timeStamp,o=i-n.t,r=o?t.wheelX/o:n.vx,a=o?t.wheelY/o:n.vy;o<550&&(r=(r+n.vx)/2,a=(a+n.vy)/2);var s=Math.abs(r/a),l=!1;return 1<=s&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(l=!0),s<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(l=!0),l?n.allowed=i:i-n.allowed<550&&(Math.abs(r)<=1.5*Math.abs(n.vx)&&Math.abs(a)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=i):n.allowed=0),n.t=i,n.vx=r,n.vy=a,l?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}}).call(o.prototype),e.DefaultHandlers=o})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(t,e,n){"use strict";t("./lib/oop");var i=t("./lib/dom");function o(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){this.getElement().textContent=t},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){i.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(o.prototype),e.Tooltip=o})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(t,e,n){"use strict";var i=t("../lib/dom"),o=t("../lib/oop"),r=t("../lib/event"),a=t("../tooltip").Tooltip;function s(t){a.call(this,t)}o.inherits(s,a),(function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();n<(t+=15)+o&&(t-=t+o-n),i<(e+=15)+r&&(e-=20+r),a.prototype.setPosition.call(this,t,e)}}).call(s.prototype),e.GutterHandler=function(t){var e,n,o,a=t.editor,l=a.renderer.$gutterLayer,c=new s(a.container);function h(){e=e&&clearTimeout(e),o&&(c.hide(),o=null,a._signal("hideGutterTooltip",c),a.off("mousewheel",h))}function u(t){c.setPosition(t.x,t.y)}t.editor.setDefaultHandler("guttermousedown",(function(e){if(a.isFocused()&&0==e.getButton()&&"foldWidgets"!=l.getRegion(e)){var n=e.getDocumentPosition().row,i=a.session.selection;if(e.getShiftKey())i.selectTo(n,0);else{if(2==e.domEvent.detail)return a.selectAll(),e.preventDefault();t.$clickSelection=a.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}})),t.editor.setDefaultHandler("guttermousemove",(function(r){if(i.hasCssClass(r.domEvent.target||r.domEvent.srcElement,"ace_fold-widget"))return h();o&&t.$tooltipFollowsMouse&&u(r),n=r,e=e||setTimeout((function(){e=null,(n&&!t.isMousePressed?function(){var e,i,r=n.getDocumentPosition().row,s=l.$annotations[r];if(!s)return h();if(r==a.session.getLength()){var d=a.renderer.pixelToScreenCoordinates(0,n.y).row,p=n.$pos;if(d>a.session.documentToScreenRow(p.row,p.column))return h()}o!=s&&(o=s.text.join("<br/>"),c.setHtml(o),c.show(),a._signal("showGutterTooltip",c),a.on("mousewheel",h),t.$tooltipFollowsMouse?u(n):(e=n.domEvent.target.getBoundingClientRect(),(i=c.getElement().style).left=e.right+"px",i.top=e.bottom+"px"))}:h)()}),50)})),r.addListener(a.renderer.$gutter,"mouseout",(function(t){n=null,o&&!e&&(e=setTimeout((function(){e=null,h()}),50))}),a),a.on("changeSession",h)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/event"),o=t("../lib/useragent"),r=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t,e=this.editor.getSelectionRange();return e.isEmpty()?this.$inSelection=!1:(t=this.getDocumentPosition(),this.$inSelection=e.contains(t.row,t.column)),this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/dom"),o=t("../lib/event"),r=t("../lib/useragent");function a(t){var e=t.editor,n=i.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(e){t[e]=this[e]}),this),e.on("mousedown",this.onMouseDown.bind(t));var a,l,c,h,u,d,p,g,m,f,v,b=e.container,y=0;function _(){var t,n,i,o=d;t=d=e.renderer.screenToTextCoordinates(l,c),n=o,i=Date.now(),f&&n&&t.row==n.row&&n&&t.column==n.column?5<s(v.x,v.y,l,c)?f=null:200<=i-f&&(e.renderer.scrollCursorIntoView(),f=null):(e.moveCursorToPosition(t),f=i,v={x:l,y:c}),function(t,n){var i=Date.now(),o=e.renderer.layerConfig.lineHeight,r=e.renderer.layerConfig.characterWidth,a=e.renderer.scroller.getBoundingClientRect(),s={x:{left:l-a.left,right:a.right-l},y:{top:c-a.top,bottom:a.bottom-c}},h=Math.min(s.x.left,s.x.right),u=Math.min(s.y.top,s.y.bottom),d={row:t.row,column:t.column};h/r<=2&&(d.column+=s.x.left<s.x.right?-3:2),u/o<=1&&(d.row+=s.y.top<s.y.bottom?-1:1),t.row!=d.row||t.column!=d.column&&n&&t.row==n.row?m?200<=i-m&&e.renderer.scrollCursorIntoView(d):m=i:m=null}(d,o)}function C(){u=e.selection.toOrientedRange(),a=e.session.addMarker(u,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(h),_(),h=setInterval(_,20),y=0,o.addListener(document,"mousemove",I)}function x(){clearInterval(h),e.session.removeMarker(a),a=null,e.selection.fromOrientedRange(u),e.isFocused()&&!g&&e.$resetCursorStyle(),y=0,f=m=d=u=null,o.removeListener(document,"mousemove",I)}this.onDragStart=function(t){if(this.cancelDrag||!b.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(t)}),0),t.preventDefault()}u=e.getSelectionRange();var o=t.dataTransfer;o.effectAllowed=e.getReadOnly()?"copy":"copyMove",r.isOpera&&(e.container.appendChild(n),n.scrollTop=0),o.setDragImage&&o.setDragImage(n,0,0),r.isOpera&&e.container.removeChild(n),o.clearData(),o.setData("Text",e.session.getTextRange()),g=!0,this.setState("drag")},this.onDragEnd=function(t){b.draggable=!1,g=!1,this.setState(null),e.getReadOnly()||(p||"move"!=t.dataTransfer.dropEffect||e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return l=t.clientX,c=t.clientY,a||C(),y++,t.dataTransfer.dropEffect=p=P(t),o.preventDefault(t)},this.onDragOver=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return l=t.clientX,c=t.clientY,a||(C(),y++),null!==w&&(w=null),t.dataTransfer.dropEffect=p=P(t),o.preventDefault(t)},this.onDragLeave=function(t){if(--y<=0&&a)return x(),p=null,o.preventDefault(t)},this.onDrop=function(t){if(d){var n=t.dataTransfer;if(g)switch(p){case"move":u=u.contains(d.row,d.column)?{start:d,end:d}:e.moveText(u,d);break;case"copy":u=e.moveText(u,d,!0)}else{var i=n.getData("Text");u={start:d,end:e.session.insert(d,i)},e.focus(),p=null}return x(),o.preventDefault(t)}},o.addListener(b,"dragstart",this.onDragStart.bind(t),e),o.addListener(b,"dragend",this.onDragEnd.bind(t),e),o.addListener(b,"dragenter",this.onDragEnter.bind(t),e),o.addListener(b,"dragover",this.onDragOver.bind(t),e),o.addListener(b,"dragleave",this.onDragLeave.bind(t),e),o.addListener(b,"drop",this.onDrop.bind(t),e);var w=null;function I(){null==w&&(w=setTimeout((function(){null!=w&&a&&x()}),20))}function A(t){var e=t.types;return!e||Array.prototype.some.call(e,(function(t){return"text/plain"==t||"Text"==t}))}function P(t){var e=["copy","copymove","all","uninitialized"],n=r.isMac?t.altKey:t.ctrlKey,i="uninitialized";try{i=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o="none";return n&&0<=e.indexOf(i)?o="copy":0<=["move","copymove","linkmove","all","uninitialized"].indexOf(i)?o="move":0<=e.indexOf(i)&&(o="copy"),o}}function s(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging"),t.renderer.setCursorStyle(r.isWin?"default":"move"),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;r.isIE&&"dragReady"==this.state&&3<s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&e.dragDrop(),"dragWait"===this.state&&0<s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),i=t.getButton();if(1===(t.domEvent.detail||1)&&0===i&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=t.domEvent.target||t.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on"),e.getDragDelay()?(r.isWebKit&&(this.cancelDrag=!0,e.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(a.prototype),e.DragdropHandler=a})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./mouse_event").MouseEvent,o=t("../lib/event"),r=t("../lib/dom");e.addTouchListeners=function(t,e){var n,a,s,l,c,h,u,d,p,g="scroll",m=0,f=0,v=0,b=0;function y(){p||function(){function t(t){var o,a,s=t.target.getAttribute("action");if("more"==s||!i)return i=!i,o=e.getCopyText(),a=e.session.getUndoManager().hasUndo(),void p.replaceChild(r.buildDom(i?["span",!o&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],o&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],o&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],n&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],a&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),p.firstChild);"paste"==s?n.readText().then((function(t){e.execCommand(s,t)})):s&&("cut"!=s&&"copy"!=s||(n?n.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(s)),p.firstChild.style.display="none",i=!1,"openCommandPallete"!=s&&e.focus()}var n=window.navigator&&window.navigator.clipboard,i=!1;p=r.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(t){g="menu",t.stopPropagation(),t.preventDefault(),e.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),t(e)},onclick:t},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container)}();var t=e.selection.cursor,n=e.renderer.textToScreenCoordinates(t.row,t.column),i=e.renderer.textToScreenCoordinates(0,0).pageX,o=e.renderer.scrollLeft,a=e.container.getBoundingClientRect();p.style.top=n.pageY-a.top-3+"px",n.pageX-a.left<a.width-70?(p.style.left="",p.style.right="10px"):(p.style.right="",p.style.left=i+o-a.left+"px"),p.style.display="",p.firstChild.style.display="none",e.on("input",_)}function _(t){p&&(p.style.display="none"),e.off("input",_)}function C(){c=null,clearTimeout(c);var t=e.selection.getRange(),n=t.contains(u.row,u.column);!t.isEmpty()&&n||(e.selection.moveToPosition(u),e.selection.selectWord()),g="wait",y()}o.addListener(t,"contextmenu",(function(t){d&&e.textInput.getElement().focus()}),e),o.addListener(t,"touchstart",(function(t){var o=t.touches;if(c||1<o.length)return clearTimeout(c),c=null,s=-1,void(g="zoom");d=e.$mouseHandler.isMousePressed=!0;var r=e.renderer.layerConfig.lineHeight,h=e.renderer.layerConfig.lineHeight,p=t.timeStamp;l=p;var y=o[0],_=y.clientX,x=y.clientY;Math.abs(n-_)+Math.abs(a-x)>r&&(s=-1),n=t.clientX=_,a=t.clientY=x,v=b=0;var w=new i(t,e);if(u=w.getDocumentPosition(),p-s<500&&1==o.length&&!m)f++,t.preventDefault(),t.button=0,function(){c=null,clearTimeout(c),e.selection.moveToPosition(u);var t=2<=f?e.selection.getLineRange(u.row):e.session.getBracketRange(u);t&&!t.isEmpty()?e.selection.setRange(t):e.selection.selectWord(),g="wait"}();else{f=0;var I=e.selection.cursor,A=e.selection.isEmpty()?I:e.selection.anchor,P=e.renderer.$cursorLayer.getPixelPosition(I,!0),O=e.renderer.$cursorLayer.getPixelPosition(A,!0),M=e.renderer.scroller.getBoundingClientRect(),k=e.renderer.layerConfig.offset,S=e.renderer.scrollLeft,E=function(t,e){return(t/=h)*t+(e=e/r-.75)*e};if(t.clientX<M.left)return void(g="zoom");var T=E(t.clientX-M.left-P.left+S,t.clientY-M.top-P.top+k),R=E(t.clientX-M.left-O.left+S,t.clientY-M.top-O.top+k);T<3.5&&R<3.5&&(g=R<T?"cursor":"anchor"),g=R<3.5?"anchor":T<3.5?"cursor":"scroll",c=setTimeout(C,450)}s=p}),e),o.addListener(t,"touchend",(function(t){d=e.$mouseHandler.isMousePressed=!1,h&&clearInterval(h),"zoom"==g?(g="",m=0):c?(e.selection.moveToPosition(u),m=0,y()):"scroll"==g?(m+=60,h=setInterval((function(){m--<=0&&(clearInterval(h),h=null),Math.abs(v)<.01&&(v=0),Math.abs(b)<.01&&(b=0),m<20&&(v*=.9),m<20&&(b*=.9);var t=e.session.getScrollTop();e.renderer.scrollBy(10*v,10*b),t==e.session.getScrollTop()&&(m=0)}),10),_()):y(),clearTimeout(c),c=null}),e),o.addListener(t,"touchmove",(function(t){c&&(clearTimeout(c),c=null);var o=t.touches;if(!(1<o.length||"zoom"==g)){var r=o[0],s=n-r.clientX,h=a-r.clientY;if("wait"==g){if(!(4<s*s+h*h))return t.preventDefault();g="cursor"}n=r.clientX,a=r.clientY,t.clientX=r.clientX,t.clientY=r.clientY;var u,d,p=t.timeStamp,m=p-l;l=p,"scroll"==g?((u=new i(t,e)).speed=1,u.wheelX=s,u.wheelY=h,10*Math.abs(s)<Math.abs(h)&&(s=0),10*Math.abs(h)<Math.abs(s)&&(h=0),0!=m&&(v=s/m,b=h/m),e._emit("mousewheel",u),u.propagationStopped||(v=b=0)):(d=new i(t,e).getDocumentPosition(),"cursor"==g?e.selection.moveCursorToPosition(d):"anchor"==g&&e.selection.setSelectionAnchor(d.row,d.column),e.renderer.scrollCursorIntoView(d),t.preventDefault())}}),e)}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=i.getDocumentHead(),o=document.createElement("script");o.src=t,n.appendChild(o),o.onload=o.onreadystatechange=function(t,n){!n&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(t,e,n){"use strict";function i(){this.propagationStopped=!0}function o(){this.defaultPrevented=!0}var r={};r._emit=r._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],r=this._defaultHandlers[t];if(n.length||r){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=i),e.preventDefault||(e.preventDefault=o),n=n.slice();for(var a=0;a<n.length&&(n[a](e,this),!e.propagationStopped);a++);return r&&!e.defaultPrevented?r(e,this):void 0}},r._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](e,this)}},r.once=function(t,e){var n=this;if(this.on(t,(function i(){n.off(t,i),e.apply(null,arguments)})),!e)return new Promise((function(t){e=t}))},r.setDefaultHandler=function(t,e){var n,i,o,r=this._defaultHandlers;(r=r||(this._defaultHandlers={_disabled_:{}}))[t]&&(n=r[t],(i=r._disabled_[t])||(r._disabled_[t]=i=[]),i.push(n),-1!=(o=i.indexOf(e))&&i.splice(o,1)),r[t]=e},r.removeDefaultHandler=function(t,e){var n,i,o=this._defaultHandlers;o&&(n=o._disabled_[t],o[t]==e?n&&this.setDefaultHandler(t,n.pop()):!n||-1!=(i=n.indexOf(e))&&n.splice(i,1))},r.on=r.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];return-1==(i=i||(this._eventRegistry[t]=[])).indexOf(e)&&i[n?"unshift":"push"](e),e},r.off=r.removeListener=r.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n,i=this._eventRegistry[t];!i||-1!==(n=i.indexOf(e))&&i.splice(n,1)},r.removeAllListeners=function(t){t||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[t]=void 0),this._defaultHandlers&&(this._defaultHandlers[t]=void 0)},e.EventEmitter=r})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){var i=t("./oop"),o=t("./event_emitter").EventEmitter,r={setOptions:function(t){Object.keys(t).forEach((function(e){this.setOption(e,t[e])}),this)},getOptions:function(t){var e,n={};return t?Array.isArray(t)||(n=t,t=Object.keys(n)):(e=this.$options,t=Object.keys(e).filter((function(t){return!e[t].hidden}))),t.forEach((function(t){n[t]=this.getOption(t)}),this),n},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return a('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:a('misspelled option "'+t+'"')}};function a(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function s(t,e){var n=new Error(t);n.data=e,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}function l(){this.$defaultOptions={}}(function(){i.implement(this,o),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach((function(e){var i=n[e];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=e),"initialValue"in(t.$options[i.name]=i)&&(t["$"+i.name]=i.initialValue)})),i.implement(t,r),this},this.resetOptions=function(t){Object.keys(t.$options).forEach((function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)}))},this.setDefaultValue=function(t,e,n){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][e])break;if(!this.$defaultOptions[t][e])return!1}var i=this.$defaultOptions[t]||(this.$defaultOptions[t]={});i[e]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,e,n):i[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach((function(n){this.setDefaultValue(t,n,e[n])}),this)},this.warn=a,this.reportError=s}).call(l.prototype),e.AppConfig=l})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(t,e,i){var o=t("./lib/lang"),r=(t("./lib/oop"),t("./lib/net")),a=t("./lib/app_config").AppConfig;i.exports=e=new a;var s=function(){return this||"undefined"!=typeof window&&window}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};e.get=function(t){if(!l.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return l[t]},e.set=function(t,e){if(l.hasOwnProperty(t))l[t]=e;else if(0==this.setDefaultValue("",t,e))throw new Error("Unknown config key: "+t)},e.all=function(){return o.copyObject(l)},e.$modes={},e.moduleUrl=function(t,e){if(l.$moduleUrls[t])return l.$moduleUrls[t];var n,i=t.split("/"),o="snippets"==(e=e||i[i.length-2]||"")?"/":"-",r=i[i.length-1];"worker"==e&&"-"==o&&(n=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g"),r=r.replace(n,"")),(!r||r==e)&&1<i.length&&(r=i[i.length-2]);var a=l[e+"Path"];return null==a?a=l.basePath:"/"==o&&(e=o=""),a&&"/"!=a.slice(-1)&&(a+="/"),a+e+o+r+this.get("suffix")},e.setModuleUrl=function(t,e){return l.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,i){var o,a;Array.isArray(n)&&(a=n[0],n=n[1]);try{o=t(n)}catch(i){}if(o&&!e.$loading[n])return i&&i(o);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(i),!(1<e.$loading[n].length)){var s=function(){t([n],(function(t){e._emit("load.module",{name:n,module:t});var i=e.$loading[n];e.$loading[n]=null,i.forEach((function(e){e&&e(t)}))}))};if(!e.get("packaged"))return s();r.loadScript(e.moduleUrl(n,a),s),c()}};var c=function(){l.basePath||l.workerPath||l.modePath||l.themePath||Object.keys(l.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};function h(o){if(s&&s.document){l.packaged=o||t.packaged||i.packaged||s.define&&n(23).packaged;for(var r={},a="",c=document.currentScript||document._currentScript,h=(c&&c.ownerDocument||document).getElementsByTagName("script"),u=0;u<h.length;u++){var d=h[u],p=d.src||d.getAttribute("src");if(p){for(var g=d.attributes,m=0,f=g.length;m<f;m++){var v=g[m];0===v.name.indexOf("data-ace-")&&(r[v.name.replace(/^data-ace-/,"").replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))]=v.value)}var b=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(a=b[1])}}for(var y in a&&(r.base=r.base||a,r.packaged=!0),r.basePath=r.base,r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base,r)void 0!==r[y]&&e.set(y,r[y])}}h(!0),e.init=h,e.version="1.4.12"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(t,e,n){"use strict";function i(t){var e=this;function n(e){document.hasFocus&&document.hasFocus()&&(t.isFocused()||document.activeElement!=(t.textInput&&t.textInput.getElement()))||window.focus(),t.focus()}this.editor=t,new a(this),new s(this),new c(this);var i=t.renderer.getMouseEventTarget();o.addListener(i,"click",this.onMouseEvent.bind(this,"click"),t),o.addListener(i,"mousemove",this.onMouseMove.bind(this,"mousemove"),t),o.addMultiMouseDownListener([i,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",t),o.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel"),t),h(t.container,t);var l=t.renderer.$gutter;o.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),t),o.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick"),t),o.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),t),o.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),t),o.addListener(i,"mousedown",n,t),o.addListener(l,"mousedown",n,t),r.isIE&&t.renderer.scrollBarV&&(o.addListener(t.renderer.scrollBarV.element,"mousedown",n,t),o.addListener(t.renderer.scrollBarH.element,"mousedown",n,t)),t.on("mousemove",(function(n){var i,o,r;e.state||e.$dragDelay||!e.$dragEnabled||(i=t.renderer.screenToTextCoordinates(n.x,n.y),o=t.session.selection.getRange(),r=t.renderer,!o.isEmpty()&&o.insideStart(i.row,i.column)?r.setCursorStyle("default"):r.setCursorStyle(""))}),t)}var o=t("../lib/event"),r=t("../lib/useragent"),a=t("./default_handlers").DefaultHandlers,s=t("./default_gutter_handler").GutterHandler,l=t("./mouse_event").MouseEvent,c=t("./dragdrop_handler").DragdropHandler,h=t("./touch_handler").addTouchListeners,u=t("../config");(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new l(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new l(e,this.editor))},this.onMouseWheel=function(t,e){var n=new l(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor,i=this.editor.renderer;function a(t){if(t){if(r.isWebKit&&!t.which&&c.releaseMouse)return c.releaseMouse();c.x=t.clientX,c.y=t.clientY,e&&e(t),c.mouseEvent=new l(t,c.editor),c.$mouseMoved=!0}}function s(t){n.off("beforeEndOperation",u),clearInterval(d),h(),c[c.state+"End"]&&c[c.state+"End"](t),c.state="",c.isMousePressed=i.$isMousePressed=!1,i.$keepTextAreaAtCursor&&i.$moveTextAreaToCursor(),c.$onCaptureMouseMove=c.releaseMouse=null,t&&c.onMouseEvent("mouseup",t),n.endOperation()}i.$isMousePressed=!0;var c=this,h=function(){c[c.state]&&c[c.state](),c.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout((function(){s(t)}));var u=function(t){c.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(c[c.state+"End"]&&c[c.state+"End"](),c.state="",c.releaseMouse())};n.on("beforeEndOperation",u),n.startOperation({command:{name:"mouse"}}),c.$onCaptureMouseMove=a,c.releaseMouse=o.capture(this.editor.container,a,s);var d=setInterval(h,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=(function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&o.stopEvent(e.domEvent))}).bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(i.prototype),u.defineOptions(i.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=i})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom");e.FoldHandler=function(t){t.on("click",(function(e){var n=e.getDocumentPosition(),o=t.session,r=o.getFoldAt(n.row,n.column,1);r&&(e.getAccelKey()?o.removeFold(r):o.expandFold(r),e.stop());var a=e.domEvent&&e.domEvent.target;a&&i.hasCssClass(a,"ace_inline_button")&&i.hasCssClass(a,"ace_toggle_wrap")&&(o.setOption("wrap",!o.getUseWrapMode()),t.renderer.scrollCursorIntoView())})),t.on("gutterclick",(function(e){var n,i;"foldWidgets"==t.renderer.$gutterLayer.getRegion(e)&&(n=e.getDocumentPosition().row,(i=t.session).foldWidgets&&i.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop())})),t.on("gutterdblclick",(function(e){var n,i,o,r,a;"foldWidgets"==t.renderer.$gutterLayer.getRegion(e)&&(n=e.getDocumentPosition().row,(r=(o=(i=t.session).getParentFoldRangeData(n,!0)).range||o.firstRange)&&((a=i.getFoldAt(n=r.start.row,i.getLine(n).length,1))?i.removeFold(a):(i.addFold("...",r),t.renderer.scrollCursorIntoView({row:r.start.row,column:0}))),e.stop())}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(t,e,n){"use strict";function i(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)}var o=t("../lib/keys"),r=t("../lib/event");(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){var n;t&&("function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t),-1!=(n=this.$handlers.indexOf(t))&&this.$handlers.splice(n,1),null==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor))},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(e,t)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,i){for(var o,a=!1,s=this.$editor.commands,l=this.$handlers.length;l--&&!((o=this.$handlers[l].handleKeyboard(this.$data,t,e,n,i))&&o.command&&((a="null"==o.command||s.exec(o.command,this.$editor,o.args,i))&&i&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),a)););return a||-1!=t||(o={command:"insertstring"},a=s.exec("insertstring",this.$editor,e)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),a},this.onCommandKey=function(t,e,n){var i=o.keyCodeToString(n);return this.$callKeyboardHandlers(e,i,n,t)},this.onTextInput=function(t){return this.$callKeyboardHandlers(-1,t)}}).call(i.prototype),e.KeyBinding=i})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(t,e,n){"use strict";var i=0,o=0,r=!1,a=!1,s=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=11,u=18,d=[u,u,u,u,u,u,u,u,u,6,5,6,8,5,u,u,u,u,u,u,u,u,u,u,u,u,u,u,5,5,5,6,8,4,4,h,h,h,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,u,u,u,u,u,u,5,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,9,4,h,h,h,h,4,4,4,4,0,4,4,u,4,4,h,h,2,2,4,0,4,4,4,2,0,4,4,4,4,4],p=[8,8,8,8,8,8,8,8,8,8,8,u,u,u,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,h,h,h,h,h,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function g(t,e,n){if(!(o<t))if(1!=t||1!=i||a)for(var r,s,l,c,h=n.length,u=0;u<h;){if(e[u]>=t){for(r=u+1;r<h&&e[r]>=t;)r++;for(s=u,l=r-1;s<l;s++,l--)c=n[s],n[s]=n[l],n[l]=c;u=r}u++}else n.reverse()}function m(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?191<e?0:d[e]:5==n?/[\u0591-\u05f4]/.test(t)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?12:/[\u0660-\u0669\u066b-\u066c]/.test(t)?3:1642==e?h:/[\u06f0-\u06f9]/.test(t)?2:7:32==n&&e<=8287?p[255&e]:254==n&&65136<=e?7:4}e.L=0,e.R=1,e.EN=2,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.RLE=7,e.DOT="\xb7",e.doBidiReorder=function(t,n,d){if(t.length<2)return{};var p=t.split(""),f=new Array(p.length),v=new Array(p.length),b=[];i=d?1:0,function(t,e,n,d){var p,g,f,v,b=i?c:l,y=0,_=-1,C=null,x=null,w=[];if(!d)for(C=0,d=[];C<n;C++)d[C]=m(t[C]);for(o=i,s=a=r=!1,x=0;x<n;x++){if(p=y,w[x]=g=function(t,e,n,o){var l,c,d,p,g=e[o];switch(g){case 0:case 1:r=!1;case 4:case 3:return g;case 2:return r?3:2;case 7:return r=!0,1;case 8:return 4;case 9:return o<1||o+1>=e.length||2!=(l=n[o-1])&&3!=l||2!=(c=e[o+1])&&3!=c?4:(r&&(c=3),c==l?c:4);case 10:return 2==(l=0<o?n[o-1]:5)&&o+1<e.length&&2==e[o+1]?2:4;case h:if(0<o&&2==n[o-1])return 2;if(r)return 4;for(p=o+1,d=e.length;p<d&&e[p]==h;)p++;return p<d&&2==e[p]?2:4;case 12:for(d=e.length,p=o+1;p<d&&12==e[p];)p++;if(p<d){var m=t[o];if(l=e[p],(1425<=m&&m<=2303||64286==m)&&(1==l||7==l))return 1}return o<1||5==(l=e[o-1])?4:n[o-1];case 5:return a=!(r=!1),i;case 6:return s=!0,4;case 13:case 14:case 16:case 17:case 15:r=!1;case u:return 4}}(t,d,w,x),v=240&(y=b[p][g]),e[x]=f=b[y&=15][5],0<v)if(16==v){for(C=_;C<x;C++)e[C]=1;_=-1}else _=-1;if(b[y][6])-1==_&&(_=x);else if(-1<_){for(C=_;C<x;C++)e[C]=f;_=-1}5==d[x]&&(e[x]=0),o|=f}if(s)for(C=0;C<n;C++)if(6==d[C]){e[C]=i;for(var I=C-1;0<=I&&8==d[I];I--)e[I]=i}}(p,b,p.length,n);for(var y=0;y<f.length;f[y]=y,y++);for(g(2,b,f),g(1,b,f),y=0;y<f.length-1;y++)3===n[y]?b[y]=e.AN:1===b[y]&&(n[y]>7&&n[y]<13||4===n[y]||n[y]===u)?b[y]=e.ON_R:0<y&&"\u0644"===p[y-1]&&/\u0622|\u0623|\u0625|\u0627/.test(p[y])&&(b[y-1]=b[y]=e.R_H,y++);for(p[p.length-1]===e.DOT&&(b[p.length-1]=e.B),"\u202b"===p[0]&&(b[0]=e.RLE),y=0;y<f.length;y++)v[y]=b[f[y]];return{logicalFromVisual:f,bidiLevels:v}},e.hasBidiCharacters=function(t,e){for(var n=!1,i=0;i<t.length;i++)e[i]=m(t.charAt(i)),n||1!=e[i]&&7!=e[i]&&3!=e[i]||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(t,e,n){"use strict";function i(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=a.test(t.getValue())}var o=t("./lib/bidiutil"),r=t("./lib/lang"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/;(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&a.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t,e=0,n=this.session.$screenRowCache;return!n.length||0<=(t=this.session.$getRowCacheIndex(n,this.currentRow))&&(e=this.session.$docRowCache[t]),e},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,i=this.session.$getRowCacheIndex(e,this.currentRow);0<this.currentRow-t&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===i;)i=n,t++;else t=this.currentRow;return t},this.updateRowLine=function(t,e){void 0===t&&(t=this.getDocumentRow());var n,i=t===this.session.getLength()-1?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(t),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode?((n=this.session.$wrapData[t])&&(void 0===e&&(e=this.getSplitIndex()),0<e&&n.length?(this.wrapIndent=n.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=e<n.length?this.line.substring(n[e-1],n[e]):this.line.substring(n[n.length-1])):this.line=this.line.substring(0,n[e])),e==n.length&&(this.line+=this.showInvisibles?i:o.DOT)):this.line+=this.showInvisibles?i:o.DOT;var a,s=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(t,e){return"\t"===t||s.isFullWidth(t.charCodeAt(0))?(a="\t"===t?s.getScreenTabSize(e+l):2,l+=a-1,r.stringRepeat(o.DOT,a)):t})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var t=[];this.bidiMap=o.hasBidiCharacters(this.line,t)||this.isRtlDir?o.doBidiReorder(this.line,t,this.isRtlDir):{}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){var e,n;this.characterWidth!==t.$characterSize.width&&(this.fontMetrics=t,e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4"),this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=e,this.charWidths[o.R]=this.charWidths[o.AN]=n,this.charWidths[o.R_H]=.45*n,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null)},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setContentWidth=function(t){this.contentWidth=t},this.isRtlLine=function(t){return!!this.$isRtl||(null!=t?this.session.getLine(t).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(t,e){for(var n=t.getCursorPosition(),i=t.selection.getSelectionAnchor().row;i<=n.row;i++)e||t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE?e&&t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE&&t.session.doc.insert({column:0,row:i},t.session.$bidiHandler.RLE):t.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(t){t-=this.wrapIndent;var e=this.line.charAt(0)===this.RLE?1:0,n=e<t?this.session.getOverwrite()?t:t-1:e,i=o.getVisualFromLogicalIdx(n,this.bidiMap),r=this.bidiMap.bidiLevels,a=0;!this.session.getOverwrite()&&t<=e&&r[i]%2!=0&&i++;for(var s=0;s<i;s++)a+=this.charWidths[r[s]];return!this.session.getOverwrite()&&e<t&&r[i]%2==0&&(a+=this.charWidths[r[i]]),this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(a+=this.rtlLineOffset),a},this.getSelections=function(t,e){var n,i=this.bidiMap,o=i.bidiLevels,r=[],a=0,s=Math.min(t,e)-this.wrapIndent,l=Math.max(t,e)-this.wrapIndent,c=!1,h=!1,u=0;this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,p=0;p<o.length;p++)n=o[p],(c=s<=(d=i.logicalFromVisual[p])&&d<l)&&!h?u=a:!c&&h&&r.push({left:u,width:a-u}),a+=this.charWidths[n],h=c;if(c&&p===o.length&&r.push({left:u,width:a-u}),this.isRtlDir)for(var g=0;g<r.length;g++)r[g].left+=this.rtlLineOffset;return r},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var e=0,n=(t=Math.max(t,0),0),i=0,o=this.bidiMap.bidiLevels,r=this.charWidths[o[i]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);n+r/2<t;){if(n+=r,i===o.length-1){r=0;break}r=this.charWidths[o[++i]]}return 0===(e=0<i&&o[i-1]%2!=0&&o[i]%2==0?(t<n&&i--,this.bidiMap.logicalFromVisual[i]):0<i&&o[i-1]%2==0&&o[i]%2!=0?1+(n<t?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===o.length-1&&0===r&&o[i-1]%2==0||!this.isRtlDir&&0===i&&o[i]%2!=0?1+this.bidiMap.logicalFromVisual[i]:(0<i&&o[i-1]%2!=0&&0!==r&&i--,this.bidiMap.logicalFromVisual[i]))&&this.isRtlDir&&e++,e+this.wrapIndent}}).call(i.prototype),e.BidiHandler=i})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(t,e,n){"use strict";function i(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",(function(t){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),e.$isEmpty||e.$silent||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)})),this.anchor.on("change",(function(){e.$anchorChanged=!0,e.$isEmpty||e.$silent||e._emit("changeSelection")}))}var o=t("./lib/oop"),r=t("./lib/lang"),a=t("./lib/event_emitter").EventEmitter,s=t("./range").Range;(function(){o.implement(this,a),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var n=e?t.end:t.start,i=e?t.start:t.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(t,e,n,i){var o,r;this.$silent||(o=this.$isEmpty,r=this.inMultiSelectMode,this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(n,i),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||o!=this.$isEmpty||r)&&this._emit("changeSelection"))},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection((function(){this.moveCursorTo(t,e)}))},this.selectToPosition=function(t){this.$moveSelection((function(){this.moveCursorToPosition(t)}))},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){var n;return void 0===e&&(t=(n=t||this.lead).row,e=n.column),this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n="number"==typeof t?t:this.lead.row,i=this.session.getFoldLine(n),o=i?(n=i.start.row,i.end.row):n;return!0===e?new s(n,0,o,this.session.getLine(o).length):new s(n,0,o+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var i=t.column,o=t.column+e;return n<0&&(i=t.column-e,o=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(i,o).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e,n=this.lead.getPosition();(t=this.session.getFoldAt(n.row,n.column,-1))?this.moveCursorTo(t.start.row,t.start.column):0===n.column?0<n.row&&this.moveCursorTo(n.row-1,this.doc.getLine(n.row-1).length):(e=this.session.getTabSize(),this.wouldMoveIntoSoftTab(n,e,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-e):this.moveCursorBy(0,-1))},this.moveCursorRight=function(){var t,e,n=this.lead.getPosition();(t=this.session.getFoldAt(n.row,n.column,1))?this.moveCursorTo(t.end.row,t.end.column):this.lead.column==this.doc.getLine(this.lead.row).length?this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0):(e=this.session.getTabSize(),this.wouldMoveIntoSoftTab(n=this.lead,e,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,e):this.moveCursorBy(0,1))},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),i=this.session.screenToDocumentPosition(n,0),o=this.session.getDisplayLine(t,null,i.row,i.column).match(/^\s*/);o[0].length==e||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var t,e,n=this.lead,i=this.session.getDocumentLastRowColumnPosition(n.row,n.column);this.lead.column==i.column&&(t=this.session.getLine(i.row),i.column!=t.length||0<(e=t.search(/\s+$/))&&(i.column=e)),this.moveCursorTo(i.row,i.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(t,e,1);if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(i)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(e)),e>=n.length)return this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)}},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))this.moveCursorTo(t.start.row,t.start.column);else{var i=this.session.getFoldStringAt(e,n,-1);null==i&&(i=this.doc.getLine(e).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(0<e&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)}},this.$shortWordEndIndex=function(t){var e,n=0,i=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&i.test(e);)n++;if(n<1)for(o.lastIndex=0;(e=t[n])&&!o.test(e);)if(o.lastIndex=0,n++,i.test(e)){if(2<n){n--;break}for(;(e=t[n])&&i.test(e);)n++;if(2<n)break}}return o.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e),o=this.session.getFoldAt(t,e,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(e==n.length){for(var r=this.doc.getLength();t++,i=this.doc.getLine(t),t<r&&/^\s*$/.test(i););/^\s+/.test(i)||(i=""),e=0}var a=this.$shortWordEndIndex(i);this.moveCursorTo(t,e+a)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getLine(e).substring(0,n);if(0===n){for(;e--,i=this.doc.getLine(e),0<e&&/^\s*$/.test(i););n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),a=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-a)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,i,o=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(o.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(o.column),o.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=o.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?o.column=this.$desiredColumn:this.$desiredColumn=o.column),0!=t&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]&&(i=this.session.lineWidgets[this.lead.row],t<0?t-=i.rowsAbove||0:0<t&&(t+=i.rowCount-(i.rowsAbove||0)));var r=this.session.screenToDocumentPosition(o.row+t,o.column,n);this.moveCursorTo(r.row,r.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var i=this.session.getFoldAt(t,e,1);i&&(t=i.start.row,e=i.start.column),this.$keepDesiredColumnOnChange=!0;var o=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(o.charAt(e))&&o.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?--e:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var i=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return s.fromPoints(e,n)}catch(t){return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){var t;return this.rangeCount?t=this.ranges.map((function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e})):(t=this.getRange()).isBackwards=this.isBackwards(),t},this.fromJSON=function(t){if(null==t.start){if(this.rangeList&&1<t.length){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(i.prototype),e.Selection=i})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(t,e,n){"use strict";function i(t){for(var e in this.states=t,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[e],i=[],o=0,r=this.matchMappings[e]={defaultToken:"text"},a="g",s=[],l=0;l<n.length;l++){var c,h,u=n[l];u.defaultToken&&(r.defaultToken=u.defaultToken),u.caseInsensitive&&(a="gi"),null!=u.regex&&(u.regex instanceof RegExp&&(u.regex=u.regex.toString().slice(1,-1)),c=u.regex,h=new RegExp("(?:("+c+")|(.))").exec("a").length-2,Array.isArray(u.token)?1==u.token.length||1==h?u.token=u.token[0]:h-1!=u.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:u,groupCount:h-1}),u.token=u.token[0]):(u.tokenArray=u.token,u.token=null,u.onMatch=this.$arrayTokens):"function"!=typeof u.token||u.onMatch||(u.onMatch=1<h?this.$applyToken:u.token),1<h&&(c=/\\\d/.test(u.regex)?u.regex.replace(/\\([0-9]+)/g,(function(t,e){return"\\"+(parseInt(e,10)+o+1)})):(h=1,this.removeCapturingGroups(u.regex)),u.splitRegex||"string"==typeof u.token||s.push(u)),r[o]=l,o+=h,i.push(c),u.onMatch||(u.onMatch=null))}i.length||(r[0]=0,i.push("$")),s.forEach((function(t){t.splitRegex=this.createSplitterRegexp(t.regex,a)}),this),this.regExps[e]=new RegExp("("+i.join(")|(")+")|($)",a)}}var o=t("./config"),r=2e3;(function(){this.$setMaxTokenCount=function(t){r=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"==typeof n)return[{type:n,value:t}];for(var i=[],o=0,r=n.length;o<r;o++)e[o]&&(i[i.length]={type:n[o],value:e[o]});return i},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],i=this.tokenArray,o=0,r=i.length;o<r;o++)e[o+1]&&(n[n.length]={type:i[o],value:e[o+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(t,e){return e?"(?:":t}))},this.createSplitterRegexp=function(t,e){var n,i,o;return-1!=t.indexOf("(?=")&&(n=0,i=!1,o={},t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(t,e,r,a,s,l){return i?i="]"!=s:s?i=!0:a?(n==o.stack&&(o.end=l+1,o.stack=-1),n--):r&&(n++,1!=r.length&&(o.stack=n,o.start=l)),t})),null!=o.end&&/^\)*$/.test(t.substr(o.end))&&(t=t.substring(0,o.start)+t.substr(o.end))),"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){var n;e&&"string"!=typeof e?"#tmp"===(e=(n=e.slice(0))[0])&&(n.shift(),e=n.shift()):n=[];var i=e||"start",o=this.states[i];o||(o=this.states[i="start"]);for(var a,s=this.matchMappings[i],l=this.regExps[i],c=[],h=l.lastIndex=0,u=0,d={type:null,value:""};a=l.exec(t);){var p,g=s.defaultToken,m=null,f=a[0],v=l.lastIndex;v-f.length>h&&(p=t.substring(h,v-f.length),d.type==g?d.value+=p:(d.type&&c.push(d),d={type:g,value:p}));for(var b=0;b<a.length-2;b++)if(void 0!==a[b+1]){g=(m=o[s[b]]).onMatch?m.onMatch(f,i,n,t):m.token,m.next&&(i="string"==typeof m.next?m.next:m.next(i,n),(o=this.states[i])||(this.reportError("state doesn't exist",i),o=this.states[i="start"]),s=this.matchMappings[i],h=v,(l=this.regExps[i]).lastIndex=v),m.consumeLineEnd&&(h=v);break}if(f)if("string"==typeof g)m&&!1===m.merge||d.type!==g?(d.type&&c.push(d),d={type:g,value:f}):d.value+=f;else if(g)for(d.type&&c.push(d),d={type:null,value:""},b=0;b<g.length;b++)c.push(g[b]);if(h==t.length)break;if(h=v,u++>r){for(u>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});h<t.length;)d.type&&c.push(d),d={value:t.substring(h,h+=500),type:"overflow"};i="start",n=[];break}}return d.type&&c.push(d),1<n.length&&n[0]!==i&&n.unshift("#tmp",i),{tokens:c,state:n.length?n:i}},this.reportError=o.reportError}).call(i.prototype),e.Tokenizer=i})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(t,e,n){"use strict";function i(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}}var o=t("../lib/lang");(function(){function t(t,e){return"start"==t&&!e.length||e.unshift(this.nextState,t),this.nextState}function e(t,e){return e.shift(),e.shift()||"start"}this.addRules=function(t,e){if(e)for(var n in t){for(var i=t[n],o=0;o<i.length;o++){var r=i[o];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(e)&&(r.next=e+r.next),r.nextState&&0!==r.nextState.indexOf(e)&&(r.nextState=e+r.nextState))}this.$rules[e+n]=i}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,i,r){var a="function"==typeof t?(new t).getRules():t;if(i)for(var s=0;s<i.length;s++)i[s]=e+i[s];else for(var l in i=[],a)i.push(e+l);if(this.addRules(a,e),n){var c=Array.prototype[r?"push":"unshift"];for(s=0;s<i.length;s++)c.apply(this.$rules[i[s]],o.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds},this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function o(r){var a=i[r];a.processed=!0;for(var s=0;s<a.length;s++){var l=a[s],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var h,u=l.next||l.push;if(u&&Array.isArray(u)?((h=l.stateName)||("string"!=typeof(h=l.token)&&(h=h[0]||""),i[h]&&(h+=n++)),i[h]=u,o(l.next=h)):"pop"==u&&(l.next=e),l.push&&(l.nextState=l.next||l.push,l.next=t,delete l.push),l.rules)for(var d in l.rules)i[d]?i[d].push&&i[d].push.apply(i[d],l.rules[d]):i[d]=l.rules[d];var p,g="string"==typeof l?l:l.include;g&&(c=Array.isArray(g)?g.map((function(t){return i[t]})):i[g]),c&&(p=[s,1].concat(c),l.noEscape&&(p=p.filter((function(t){return!t.next}))),a.splice.apply(a,p),s--),l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(t,e,n,i){var o=Object.create(null);return this.$keywordList=[],Object.keys(t).forEach((function(e){for(var r=t[e].split(i||"|"),a=r.length;a--;){var s=r[a];this.$keywordList.push(s),n&&(s=s.toLowerCase()),o[s]=e}}),this),t=null,n?function(t){return o[t.toLowerCase()]||e}:function(t){return o[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),e.TextHighlightRules=i})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(t,e,n){"use strict";function i(){this.$behaviours={}}(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){var n;n="function"==typeof t?(new t).getBehaviours(e):t.getBehaviours(e),this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(i.prototype),e.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(t,e,n){"use strict";function i(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var i=t.getTokenAt(e,n);this.$tokenIndex=i?i.index:-1}var o=t("./range").Range;(function(){this.stepBackward=function(){for(--this.$tokenIndex;this.$tokenIndex<0;){if(--this.$row,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t=t||this.$session.getLength(),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;0<e;)n+=t[--e].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new o(this.$row,e,this.$row,e+t.value.length)}}).call(i.prototype),e.TokenIterator=i})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,n){"use strict";function i(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,d.rangeCount!=t.multiSelect.rangeCount&&(d={rangeCount:t.multiSelect.rangeCount})),d[e])return r=d[e];r=d[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}function o(t,e,n,i){var o=t.end.row-t.start.row;return{text:n+e+i,selection:[0,t.start.column+1,o,t.end.column+(o?0:1)]}}var r,a=t("../../lib/oop"),s=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator,c=t("../../lib/lang"),h=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],d={},p={'"':'"',"'":"'"},g=function t(e){this.add("braces","insertion",(function(n,a,s,l,h){var u=s.getCursorPosition(),d=l.doc.getLine(u.row);if("{"==h){i(s);var p=s.getSelectionRange(),g=l.doc.getTextRange(p);if(""!==g&&"{"!==g&&s.getWrapBehavioursEnabled())return o(p,g,"{","}");if(t.isSaneInsertion(s,l))return/[\]\}\)]/.test(d[u.column])||s.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(s,l,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(s,l,"{"),{text:"{",selection:[1,1]})}else if("}"==h){if(i(s),"}"==d.substring(u.column,u.column+1)&&null!==l.$findOpeningBracket("}",{column:u.column+1,row:u.row})&&t.isAutoInsertedClosing(u,d,h))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==h||"\r\n"==h){i(s);var m="";if(t.isMaybeInsertedClosing(u,d)&&(m=c.stringRepeat("}",r.maybeInsertedBrackets),t.clearMaybeInsertedClosing()),"}"===d.substring(u.column,u.column+1)){var f=l.findMatchingBracket({row:u.row,column:u.column+1},"}");if(!f)return null;var v=this.$getIndent(l.getLine(f.row))}else{if(!m)return void t.clearMaybeInsertedClosing();v=this.$getIndent(d)}var b=v+l.getTabString();return{text:"\n"+b+"\n"+v+m,selection:[1,b.length,1,b.length]}}t.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(t,e,n,o,a){var s=o.doc.getTextRange(a);if(!a.isMultiLine()&&"{"==s){if(i(n),"}"==o.doc.getLine(a.start.row).substring(a.end.column,a.end.column+1))return a.end.column++,a;r.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,n,r,a,s){if("("==s){i(r);var l=r.getSelectionRange(),c=a.doc.getTextRange(l);if(""!==c&&r.getWrapBehavioursEnabled())return o(l,c,"(",")");if(t.isSaneInsertion(r,a))return t.recordAutoInsert(r,a,")"),{text:"()",selection:[1,1]}}else if(")"==s){i(r);var h=r.getCursorPosition(),u=a.doc.getLine(h.row);if(")"==u.substring(h.column,h.column+1)&&null!==a.$findOpeningBracket(")",{column:h.column+1,row:h.row})&&t.isAutoInsertedClosing(h,u,s))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(t,e,n,o,r){var a=o.doc.getTextRange(r);if(!r.isMultiLine()&&"("==a&&(i(n),")"==o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("brackets","insertion",(function(e,n,r,a,s){if("["==s){i(r);var l=r.getSelectionRange(),c=a.doc.getTextRange(l);if(""!==c&&r.getWrapBehavioursEnabled())return o(l,c,"[","]");if(t.isSaneInsertion(r,a))return t.recordAutoInsert(r,a,"]"),{text:"[]",selection:[1,1]}}else if("]"==s){i(r);var h=r.getCursorPosition(),u=a.doc.getLine(h.row);if("]"==u.substring(h.column,h.column+1)&&null!==a.$findOpeningBracket("]",{column:h.column+1,row:h.row})&&t.isAutoInsertedClosing(h,u,s))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(t,e,n,o,r){var a=o.doc.getTextRange(r);if(!r.isMultiLine()&&"["==a&&(i(n),"]"==o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("string_dquotes","insertion",(function(t,e,n,r,a){var s=r.$mode.$quotes||p;if(1==a.length&&s[a]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(a))return;i(n);var l=a,c=n.getSelectionRange(),h=r.doc.getTextRange(c);if(!(""===h||1==h.length&&s[h])&&n.getWrapBehavioursEnabled())return o(c,h,l,l);if(!h){var u=n.getCursorPosition(),d=r.doc.getLine(u.row),g=d.substring(u.column-1,u.column),m=d.substring(u.column,u.column+1),f=r.getTokenAt(u.row,u.column),v=r.getTokenAt(u.row,u.column+1);if("\\"==g&&f&&/escape/.test(f.type))return null;var b,y=f&&/string|escape/.test(f.type),_=!v||/string|escape/.test(v.type);if(m==l)(b=y!==_)&&/string\.end/.test(v.type)&&(b=!1);else{if(y&&!_)return null;if(y&&_)return null;var C=r.$mode.tokenRe;C.lastIndex=0;var x=C.test(g);C.lastIndex=0;var w=C.test(g);if(x||w)return null;if(m&&!/[\s;,.})\]\\]/.test(m))return null;var I=d[u.column-2];if(g==l&&(I==l||C.test(I)))return null;b=!0}return{text:b?l+l:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(t,e,n,o,r){var a=o.$mode.$quotes||p,s=o.doc.getTextRange(r);if(!r.isMultiLine()&&a.hasOwnProperty(s)&&(i(n),o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==s))return r.end.column++,r}))};g.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),i=new l(e,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",h)){if(/[)}\]]/.test(t.session.getLine(n.row)[n.column]))return!0;var o=new l(e,n.row,n.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",h))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",u)},g.$matchTokenType=function(t,e){return-1<e.indexOf(t.type||t)},g.recordAutoInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isAutoInsertedClosing(i,o,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=i.row,r.autoInsertedLineEnd=n+o.substr(i.column),r.autoInsertedBrackets++},g.recordMaybeInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isMaybeInsertedClosing(i,o)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=i.row,r.maybeInsertedLineStart=o.substr(0,i.column)+n,r.maybeInsertedLineEnd=o.substr(i.column),r.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(t,e,n){return 0<r.autoInsertedBrackets&&t.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&e.substr(t.column)===r.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(t,e){return 0<r.maybeInsertedBrackets&&t.row===r.maybeInsertedRow&&e.substr(t.column)===r.maybeInsertedLineEnd&&e.substr(0,t.column)==r.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},a.inherits(g,s),e.CstyleBehaviour=g})),ace.define("ace/unicode",["require","exports","module"],(function(t,e,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,r=[],a=0;a<i.length;a+=2)r.push(o+=i[a]),i[a+1]&&r.push(45,o+=i[a+1]);e.wordChars=String.fromCharCode.apply(null,r)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";function i(){this.HighlightRules=a}var o=t("../config"),r=t("../tokenizer").Tokenizer,a=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour/cstyle").CstyleBehaviour,l=t("../unicode"),c=t("../lib/lang"),h=t("../token_iterator").TokenIterator,u=t("../range").Range;(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,i){var o=e.doc,r=!0,a=!0,s=1/0,l=e.getTabSize(),h=!1;if(this.lineCommentStart){f=Array.isArray(this.lineCommentStart)?(b=this.lineCommentStart.map(c.escapeRegExp).join("|"),this.lineCommentStart[0]):(b=c.escapeRegExp(this.lineCommentStart),this.lineCommentStart),b=new RegExp("^(\\s*)(?:"+b+") ?"),h=e.getUseSoftTabs();var u=function(t,e){var n,i,r=t.match(b);r&&(m(t,n=r[1].length,i=r[0].length)||" "!=r[0][i-1]||i--,o.removeInLine(e,n,i))},d=f+" ",p=function(t,e){r&&!/\S/.test(t)||(m(t,s,s)?o.insertInLine({row:e,column:s},d):o.insertInLine({row:e,column:s},f))},g=function(t,e){return b.test(t)},m=function(t,e,n){for(var i=0;e--&&" "==t.charAt(e);)i++;if(i%l!=0)return!1;for(i=0;" "==t.charAt(n++);)i++;return 2<l?i%l!=l-1:i%l==0}}else{if(!this.blockComment)return!1;var f=this.blockComment.start,v=this.blockComment.end,b=new RegExp("^(\\s*)(?:"+c.escapeRegExp(f)+")"),y=new RegExp("(?:"+c.escapeRegExp(v)+")\\s*$");p=function(t,e){g(t,e)||r&&!/\S/.test(t)||(o.insertInLine({row:e,column:t.length},v),o.insertInLine({row:e,column:s},f))},u=function(t,e){var n;(n=t.match(y))&&o.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(b))&&o.removeInLine(e,n[1].length,n[0].length)},g=function(t,n){if(b.test(t))return!0;for(var i=e.getTokens(n),o=0;o<i.length;o++)if("comment"===i[o].type)return!0}}function _(t){for(var e=n;e<=i;e++)t(o.getLine(e),e)}var C=1/0;_((function(t,e){var n=t.search(/\S/);-1!==n?(n<s&&(s=n),a&&!g(t,e)&&(a=!1)):C>t.length&&(C=t.length)})),s==1/0&&(s=C,a=r=!1),h&&s%l!=0&&(s=Math.floor(s/l)*l),_(a?u:p)},this.toggleBlockComment=function(t,e,n,i){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,a,s=(g=new h(e,i.row,i.column)).getCurrentToken(),l=e.selection.toOrientedRange();if(s&&/comment/.test(s.type)){for(;s&&/comment/.test(s.type);){if(-1!=(m=s.value.indexOf(o.start))){var c=g.getCurrentTokenRow(),d=g.getCurrentTokenColumn()+m,p=new u(c,d,c,d+o.start.length);break}s=g.stepBackward()}var g,m;for(s=(g=new h(e,i.row,i.column)).getCurrentToken();s&&/comment/.test(s.type);){if(-1!=(m=s.value.indexOf(o.end))){c=g.getCurrentTokenRow(),d=g.getCurrentTokenColumn()+m;var f=new u(c,d,c,d+o.end.length);break}s=g.stepForward()}f&&e.remove(f),p&&(e.remove(p),r=p.start.row,a=-o.start.length)}else a=o.start.length,r=n.start.row,e.insert(n.end,o.end),e.insert(n.start,o.start);l.start.row==r&&(l.start.column+=a),l.end.row==r&&(l.end.column+=a),e.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t){var n,i,r;t[e]&&(i=(n=t[e]).prototype.$id,(r=o.$modes[i])||(o.$modes[i]=r=new n),o.$modes[e]||(o.$modes[e]=r),this.$embeds.push(e),this.$modes[e]=r)}var a=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<a.length;e++)!function(t){var n=a[e],i=t[n];t[a[e]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(t,e,n){var i=e[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])&&(r=this.$modes[i[2][i[2].length-1]]))return r[t].apply(r,[i[1]].concat([].slice.call(e,1)));i=i[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var r,a=i.split(this.$embeds[o]);if(!a[0]&&a[1])return e[0]=a[1],(r=this.$modes[this.$embeds[o]])[t].apply(r,e)}var s=n.apply(this,e);return n?s:void 0},this.transformAction=function(t,e,n,i,o){if(this.$behaviour){var r=this.$behaviour.getBehaviours();for(var a in r)if(r[a][e]){var s=r[a][e].apply(this,arguments);if(s)return s}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var i in e)for(var o=e[i],r=0,a=o.length;r<a;r++)if("string"==typeof o[r].token)/keyword|support|storage/.test(o[r].token)&&n.push(o[r].regex);else if("object"==typeof o[r].token)for(var s=0,l=o[r].token.length;s<l;s++)/keyword|support|storage/.test(o[r].token[s])&&(i=o[r].regex.match(/\(.+?\)/g)[s],n.push(i.substr(1,i.length-2)));this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(t){return{name:t,value:t,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(i.prototype),e.Mode=i})),ace.define("ace/apply_delta",["require","exports","module"],(function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var i,o=e.start.row,r=e.start.column,a=t[o]||"";switch(e.action){case"insert":1===e.lines.length?t[o]=a.substring(0,r)+e.lines[0]+a.substring(r):(i=[o,1].concat(e.lines),t.splice.apply(t,i),t[o]=a.substring(0,r)+t[o],t[o+e.lines.length-1]+=a.substring(r));break;case"remove":var s=e.end.column,l=e.end.row;o===l?t[o]=a.substring(0,r)+a.substring(s):t.splice(o,l-o+1,a.substring(0,r)+t[l].substring(s))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,r=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),void 0===n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){return t.row<e.row||t.row==e.row&&(n?t.column<=e.column:t.column<e.column)}i.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var n;e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row||(n=function(e,n,i){var o="insert"==e.action,r=(o?1:-1)*(e.end.row-e.start.row),a=(o?1:-1)*(e.end.column-e.start.column),s=e.start,l=o?s:e.end;return t(n,s,i)?{row:n.row,column:n.column}:t(l,n,!i)?{row:n.row+r,column:n.column+(n.row==l.row?a:0)}:{row:s.row,column:s.column}}(e,{row:this.row,column:this.column},this.$insertRight),this.setPosition(n.row,n.column,!0))},this.setPosition=function(t,e,n){var i,o=n?{row:t,column:e}:this.$clipPositionToDocument(t,e);this.row==o.row&&this.column==o.column||(i={row:this.row,column:this.column},this.row=o.row,this.column=o.column,this._signal("change",{old:i,value:o}))},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(r.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(t,e,n){"use strict";function i(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)}var o=t("./lib/oop"),r=t("./apply_delta").applyDelta,a=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,l=t("./anchor").Anchor;(function(){o.implement(this,a),this.setValue=function(t){var e=this.getLength()-1;this.remove(new s(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new l(this,t,e)},this.$split=0==="aaa".split(/a/).length?function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e,n;return t.start.row===t.end.row?e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)]:((e=this.getLines(t.start.row,t.end.row))[0]=(e[0]||"").substring(t.start.column),t.end.row-t.start.row==(n=e.length-1)&&(e[n]=e[n].substring(0,t.end.column))),e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),i=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[e]},!0),this.clonePos(i)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:n<=t&&(t=n-1,e=void 0);var i=this.getLine(t);return null==e&&(e=i.length),{row:t,column:e=Math.min(Math.max(e,0),i.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){var n=(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(e=e.concat([""]),0):(e=[""].concat(e),t--,this.$lines[t].length);this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),i={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:e}),this.clonePos(i)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var i=this.clippedPos(t,e),o=this.clippedPos(t,n);return this.applyDelta({start:i,end:o,action:"remove",lines:this.getLinesForRange({start:i,end:o})},!0),this.clonePos(i)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1);var n=(e=Math.min(Math.max(0,e),this.getLength()-1))==this.getLength()-1&&0<t,i=e<this.getLength()-1,o=n?t-1:t,r=n?this.getLine(o).length:0,a=i?e+1:e,l=i?0:this.getLine(a).length,c=new s(o,r,a,l),h=this.$lines.slice(t,e+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),h},this.removeNewLine=function(t){t<this.getLength()-1&&0<=t&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){return t instanceof s||(t=s.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty()?t.start:e==this.getTextRange(t)?t.end:(this.remove(t),e?this.insert(t.start,e):t.start)},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;0<=e;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!s.comparePoints(t.start,t.end))||(n&&2e4<t.lines.length?this.$splitAndapplyLargeDelta(t,2e4):(r(this.$lines,t,e),this._signal("change",t)))},this.$safeApplyDelta=function(t){var e=this.$lines.length;("remove"==t.action&&t.start.row<e&&t.end.row<e||"insert"==t.action&&t.start.row<=e)&&this.applyDelta(t)},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,i=n.length-e+1,o=t.start.row,r=t.start.column,a=0,s=0;a<i;a=s){var l=n.slice(a,s+=e-1);l.push(""),this.applyDelta({start:this.pos(o+a,r),end:this.pos(o+s,r=0),action:t.action,lines:l},!0)}t.lines=n.slice(a),t.start.row=o+a,t.start.column=r,this.applyDelta(t,!0)},this.revertDelta=function(t){this.$safeApplyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=e||0,r=n.length;o<r;o++)if((t-=n[o].length+i)<0)return{row:o,column:t+n[o].length+i};return{row:r-1,column:t+n[r-1].length+i}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=0,r=Math.min(t.row,n.length),a=e||0;a<r;++a)o+=n[a].length+i;return o+t.column}}).call(i.prototype),e.Document=i})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";function i(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,i=-1,o=n.doc,r=e;n.lines[e];)e++;var a=o.getLength(),s=0;for(n.running=!1;e<a;){for(n.$tokenizeRow(e),i=e;e++,n.lines[e];);if(++s%5==0&&20<new Date-t){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==i&&(i=e),r<=i&&n.fireUpdateEvent(r,i)}}}var o=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter;(function(){o.implement(this,r),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){this._signal("update",{data:{first:t,last:e}})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e,n=t.start.row,i=t.end.row-n;0==i?this.lines[n]=null:"remove"==t.action?(this.lines.splice(n,1+i,null),this.states.splice(n,1+i,null)):((e=Array(1+i)).unshift(n,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)),this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.tokenizer.getLineTokens(e,this.states[t-1],t);return this.states[t]+""!=n.state+""?(this.states[t]=n.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=n.tokens}}).call(i.prototype),e.BackgroundTokenizer=i})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";function i(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"}var o=t("./lib/lang"),r=(t("./lib/oop"),t("./range").Range);(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,i){if(this.regExp)for(var a=i.lastRow,s=i.firstRow;s<=a;s++){var l=this.cache[s];null==l&&((l=o.getMatchOffsets(n.getLine(s),this.regExp)).length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map((function(t){return new r(s,t.offset,s,t.offset+t.length)})),this.cache[s]=l.length?l:"");for(var c=l.length;c--;)e.drawSingleLineMarker(t,l[c].toScreenRange(n),this.clazz,i)}}}).call(i.prototype),e.SearchHighlight=i})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../range").Range;function o(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new i(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(t){t.setFoldLine(this)}),this)}(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach((function(e){e.start.row+=t,e.end.row+=t}))},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort((function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)})),0<this.range.compareEnd(t.start.row,t.start.column)?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var i,o,r=0,a=this.folds,s=!0;null==e&&(e=this.end.row,n=this.end.column);for(var l=0;l<a.length;l++){if(-1==(o=(i=a[l]).range.compareStart(e,n)))return void t(null,e,n,r,s);if(!t(null,i.start.row,i.start.column,r,s)&&t(i.placeholder,i.start.row,i.start.column,r)||0===o)return;s=!i.sameRow,r=i.end.column}t(null,e,n,r,s)},this.getNextFoldTo=function(t,e){for(var n,i,o=0;o<this.folds.length;o++){if(-1==(i=(n=this.folds[o]).range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var i,o,r=this.getNextFoldTo(t,e);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=e&&i.start.row!=t)window.console&&window.console.log(t,e,i);else if(i.start.row==t){var a=(o=this.folds).indexOf(i);for(0===a&&(this.start.column+=n);a<o.length;a++){if((i=o[a]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var i=this.folds,r=this.foldData,a=i.indexOf(n.fold),s=i[a-1];this.end.row=s.end.row,this.end.column=s.end.column;var l=new o(r,i=i.splice(a,i.length-a));return r.splice(r.indexOf(this)+1,0,l),l},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var i=this.foldData;i.splice(i.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach((function(e){t.push("  "+e.toString())})),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((t-=i.start.column-e)<0)return{row:i.start.row,column:i.start.column+t};if((t-=i.placeholder.length)<0)return i.start;e=i.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(o.prototype),e.FoldLine=o})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(t,e,n){"use strict";function i(){this.ranges=[],this.$bias=1}var o=t("./range").Range.comparePoints;(function(){this.comparePoints=o,this.pointIndex=function(t,e,n){for(var i=this.ranges,r=n||0;r<i.length;r++){var a=i[r],s=o(t,a.end);if(!(0<s)){var l=o(t,a.start);return 0===s?e&&0!==l?-r-2:r:0<l||0===l&&!e?r:-r-1}}return-r-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var i=this.pointIndex(t.end,e,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){for(var t,e=[],n=this.ranges,i=(n=n.sort((function(t,e){return o(t.start,e.start)})))[0],r=1;r<n.length;r++){var a=o((t=i).end,(i=n[r]).start);a<0||(0!=a||t.isEmpty()||i.isEmpty())&&(o(t.end,i.end)<0&&(t.end.row=i.end.row,t.end.column=i.end.column),n.splice(r,1),e.push(i),i=t,r--)}return this.ranges=n,e},this.contains=function(t,e){return 0<=this.pointIndex({row:t,column:e})},this.containsPoint=function(t){return 0<=this.pointIndex(t)},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(0<=e)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var i=this.pointIndex({row:t,column:0});i<0&&(i=-i-1);var o=this.pointIndex({row:e,column:0},i);o<0&&(o=-o-1);for(var r=[],a=i;a<o;a++)r.push(n[a]);return r},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){for(var e=t.start,n=t.end,i=e.row,o=n.row,r=this.ranges,a=0,s=r.length;a<s&&!((l=r[a]).end.row>=i);a++);var l;if("insert"==t.action){for(var c=o-i,h=-e.column+n.column;a<s&&!((l=r[a]).start.row>i);a++)if(l.start.row==i&&l.start.column>=e.column&&(l.start.column==e.column&&this.$bias<=0||(l.start.column+=h,l.start.row+=c)),l.end.row==i&&l.end.column>=e.column){if(l.end.column==e.column&&this.$bias<0)continue;l.end.column==e.column&&0<h&&a<s-1&&l.end.column>l.start.column&&l.end.column==r[a+1].start.column&&(l.end.column-=h),l.end.column+=h,l.end.row+=c}}else for(c=i-o,h=e.column-n.column;a<s&&!((l=r[a]).start.row>o);a++)l.end.row<o&&(i<l.end.row||i==l.end.row&&e.column<l.end.column)?(l.end.row=i,l.end.column=e.column):l.end.row==o?l.end.column<=n.column?(c||l.end.column>e.column)&&(l.end.column=e.column,l.end.row=e.row):(l.end.column+=h,l.end.row+=c):l.end.row>o&&(l.end.row+=c),l.start.row<o&&(i<l.start.row||i==l.start.row&&e.column<l.start.column)?(l.start.row=i,l.start.column=e.column):l.start.row==o?l.start.column<=n.column?(c||l.start.column>e.column)&&(l.start.column=e.column,l.start.row=e.row):(l.start.column+=h,l.start.row+=c):l.start.row>o&&(l.start.row+=c);if(0!=c&&a<s)for(;a<s;a++)(l=r[a]).start.row+=c,l.end.row+=c}}).call(i.prototype),e.RangeList=i})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("../range_list").RangeList,o=t("../lib/oop"),r=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};function a(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function s(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}o.inherits(r,i),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach((function(e){e.setFoldLine(t)}))},this.clone=function(){var t=this.range.clone(),e=new r(t,this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){var e,n;a((e=t).start,n=this.start),a(e.end,n);for(var i=t.start.row,o=t.start.column,r=0,s=-1;r<this.subFolds.length&&1==(s=this.subFolds[r].range.compare(i,o));r++);var l=this.subFolds[r],c=0;if(0==s){if(l.range.containsRange(t))return l.addSubFold(t);c=1}i=t.range.end.row,o=t.range.end.column;var h=r;for(s=-1;h<this.subFolds.length&&1==(s=this.subFolds[h].range.compare(i,o));h++);0==s&&h++;for(var u=this.subFolds.splice(r,h-r,t),d=0==s?u.length-1:u.length,p=c;p<d;p++)t.addSubFold(u[p]);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return s((e=t).start,n=this.start),void s(e.end,n);var e,n}}).call(r.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(t,e,n){"use strict";var i=t("../range").Range,o=t("./fold_line").FoldLine,r=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=function(){this.getFoldAt=function(t,e,n){var i=this.getFoldLine(t);if(!i)return null;for(var o=i.folds,r=0;r<o.length;r++){var a=o[r].range;if(a.contains(t,e)){if(1==n&&a.isEnd(t,e)&&!a.isEmpty())continue;if(-1==n&&a.isStart(t,e)&&!a.isEmpty())continue;return o[r]}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,i=this.$foldData,o=[];e.column+=1,--n.column;for(var r=0;r<i.length;r++)if(2!=(l=i[r].range.compareRange(t))){if(-2==l)break;for(var a=i[r].folds,s=0;s<a.length;s++){var l,c=a[s];if(-2==(l=c.range.compareRange(t)))break;if(2!=l){if(42==l)break;o.push(c)}}}return--e.column,n.column+=1,o},this.getFoldsInRangeList=function(t){var e;return Array.isArray(t)?(e=[],t.forEach((function(t){e=e.concat(this.getFoldsInRange(t))}),this)):e=this.getFoldsInRange(t),e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var i=0;i<e[n].folds.length;i++)t.push(e[n].folds[i]);return t},this.getFoldStringAt=function(t,e,n,i){if(!(i=i||this.getFoldLine(t)))return null;for(var o,r,a={end:{column:0}},s=0;s<i.folds.length;s++){var l=(r=i.folds[s]).range.compareEnd(t,e);if(-1==l){o=this.getLine(r.start.row).substring(a.end.column,r.start.column);break}if(0===l)return null;a=r}return o=o||this.getLine(r.start.row).substring(a.end.column),-1==n?o.substring(0,e-a.end.column):1==n?o.substring(e-a.end.column):o},this.getFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.start.row<=t&&o.end.row>=t)return o;if(o.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.end.row>=t)return o}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,i=e-t+1,o=0;o<n.length;o++){var r=n[o],a=r.end.row,s=r.start.row;if(e<=a){s<e&&(t<=s?i-=e-s:i=0);break}t<=a&&(i-=t<=s?a-s:a-t+1)}return i},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort((function(t,e){return t.start.row-e.start.row})),t},this.addFold=function(t,e){var n,i=this.$foldData,a=!1;t instanceof r?n=t:(n=new r(e,t)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(n.range);var s=n.start.row,l=n.start.column,c=n.end.row,h=n.end.column,u=this.getFoldAt(s,l,1),d=this.getFoldAt(c,h,-1);if(u&&d==u)return u.addSubFold(n);u&&!u.range.isStart(s,l)&&this.removeFold(u),d&&!d.range.isEnd(c,h)&&this.removeFold(d);var p=this.getFoldsInRange(n.range);0<p.length&&(this.removeFolds(p),n.collapseChildren||p.forEach((function(t){n.addSubFold(t)})));for(var g=0;g<i.length;g++){var m=i[g];if(c==m.start.row){m.addFold(n),a=!0;break}if(s==m.end.row){if(m.addFold(n),a=!0,!n.sameRow){var f=i[g+1];if(f&&f.start.row==c){m.merge(f);break}}break}if(c<=m.start.row)break}return a||(m=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(m.start.row,m.start.row):this.$updateRowLengthCache(m.start.row,m.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach((function(t){this.addFold(t)}),this)},this.removeFold=function(t){var e,n=t.foldLine,i=n.start.row,o=n.end.row,r=this.$foldData,a=n.folds;1==a.length?r.splice(r.indexOf(n),1):n.range.isEnd(t.end.row,t.end.column)?(a.pop(),n.end.row=a[a.length-1].end.row,n.end.column=a[a.length-1].end.column):n.range.isStart(t.start.row,t.start.column)?(a.shift(),n.start.row=a[0].start.row,n.start.column=a[0].start.column):t.sameRow?a.splice(a.indexOf(t),1):((a=(e=n.split(t.start.row,t.start.column)).folds).shift(),e.start.row=a[0].start.row,e.start.column=a[0].start.column),this.$updating||(this.$useWrapMode?this.$updateWrapData(i,o):this.$updateRowLengthCache(i,o)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach((function(t){this.removeFold(t)}),this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach((function(e){t.restoreRange(e),this.addFold(e)}),this),0<t.collapseChildren&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach((function(t){this.expandFold(t)}),this)},this.unfold=function(t,e){var n,o;if(null==t?(n=new i(0,0,this.getLength(),0),null==e&&(e=!0)):n="number"==typeof t?new i(t,0,t,this.getLine(t).length):"row"in t?i.fromPoints(t,t):t,o=this.getFoldsInRangeList(n),0!=e?this.removeFolds(o):this.expandFolds(o),o.length)return o},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,i,o){null==i&&(i=t.start.row),null==o&&(o=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var r=this.doc,a="";return t.walk((function(t,e,n,s){if(!(e<i)){if(e==i){if(n<o)return;s=Math.max(o,s)}a+=null!=t?t:r.getLine(e).substring(s,n)}}),e,n),a},this.getDisplayLine=function(t,e,n,i){var o=this.getFoldLine(t);if(o)return this.getFoldDisplayLine(o,t,e,n,i);var r=this.doc.getLine(t);return r.substring(i||0,e||r.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map((function(e){var n=e.folds.map((function(t){return t.clone()}));return new o(t,n)}))},this.toggleFold=function(t){var e,n=this.selection.getRange();if(n.isEmpty()){var i,o=n.start;if(i=this.getFoldAt(o.row,o.column))return void this.expandFold(i);(e=this.findMatchingBracket(o))?1==n.comparePoint(e)?n.end=e:(n.start=e,n.start.column++,n.end.column--):(e=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==n.comparePoint(e)?n.end=e:n.start=e,n.start.column++):n=this.getCommentFoldRange(o.row,o.column)||n}else{var r=this.getFoldsInRange(n);if(t&&r.length)return void this.expandFolds(r);1==r.length&&(i=r[0])}if((i=i||this.getFoldAt(n.start.row,n.start.column))&&i.range.toString()==n.toString())this.expandFold(i);else{var a="...";if(!n.isMultiLine()){if((a=this.getTextRange(n)).length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,n)}},this.getCommentFoldRange=function(t,e,n){var o=new a(this,t,e),r=o.getCurrentToken(),s=r&&r.type;if(r&&/^comment|string/.test(s)){"comment"==(s=s.match(/comment|string/)[0])&&(s+="|doc-start");var l=new RegExp(s),c=new i;if(1!=n){for(;(r=o.stepBackward())&&l.test(r.type););o.stepForward()}if(c.start.row=o.getCurrentTokenRow(),c.start.column=o.getCurrentTokenColumn()+2,o=new a(this,t,e),-1!=n){var h=-1;do{if(r=o.stepForward(),-1==h){var u=this.getState(o.$row);l.test(u)||(h=o.$row)}else if(o.$row>h)break}while(r&&l.test(r.type));r=o.stepBackward()}else r=o.getCurrentToken();return c.end.row=o.getCurrentTokenRow(),c.end.column=o.getCurrentTokenColumn()+r.value.length-2,c}},this.foldAll=function(t,e,n,i){null==n&&(n=1e5);var o=this.foldWidgets;if(o){e=e||this.getLength();for(var r,a=t=t||0;a<e;a++)null==o[a]&&(o[a]=this.getFoldWidget(a)),"start"==o[a]&&(i&&!i(a)||(r=this.getFoldWidgetRange(a))&&r.isMultiLine()&&r.end.row<=e&&r.start.row>=t&&(a=r.end.row,r.collapseChildren=n,this.addFold("...",r)))}},this.foldToLevel=function(t){for(this.foldAll();0<t--;)this.unfold(null,!1)},this.foldAllComments=function(){var t=this;this.foldAll(null,null,null,(function(e){for(var n=t.getTokens(e),i=0;i<n.length;i++){var o=n[i];if("text"!=o.type||!/^\s+$/.test(o.value))return!!/comment/.test(o.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");var e;this.$foldStyle!=t&&("manual"==(this.$foldStyle=t)&&this.unfold(),e=this.$foldMode,this.$setFolding(null),this.$setFolding(e))},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),t&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var i=t-1;0<=i;){var o=n[i];if(null==o&&(o=n[i]=this.getFoldWidget(i)),"start"==o){var r=this.getFoldWidgetRange(i),a=a||r;if(r&&r.end.row>=t)break}i--}return{range:-1!==i&&r,firstRange:a}},this.onFoldWidgetClick=function(t,e){var n,i={children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};this.$toggleFoldWidget(t,i)||(n=e.target||e.srcElement)&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),i=this.getLine(t),o="end"===n?-1:1,r=this.getFoldAt(t,-1==o?0:i.length,o);if(r)return e.children||e.all?this.removeFold(r):this.expandFold(r),r;var a,s,l,c=this.getFoldWidgetRange(t,!0);return c&&!c.isMultiLine()&&(r=this.getFoldAt(c.start.row,c.start.column,1))&&c.isEqual(r.range)?(this.removeFold(r),r):(e.siblings?((a=this.getParentFoldRangeData(t)).range&&(s=a.range.start.row+1,l=a.range.end.row),this.foldAll(s,l,e.all?1e4:0)):e.children?(l=c?c.end.row:this.getLength(),this.foldAll(t+1,l,e.all?1e4:0)):c&&(e.all&&(c.collapseChildren=1e4),this.addFold("...",c)),c)}},this.toggleFoldWidget=function(t){var e,n,i=this.selection.getCursor().row,o=(i=this.getRowFoldStart(i),this.$toggleFoldWidget(i,{}));o||(o=(e=this.getParentFoldRangeData(i,!0)).range||e.firstRange)&&((n=this.getFoldAt(i=o.start.row,this.getLine(i).length,1))?this.removeFold(n):this.addFold("...",o))},this.updateFoldWidgets=function(t){var e,n=t.start.row,i=t.end.row-n;0==i?this.foldWidgets[n]=null:"remove"==t.action?this.foldWidgets.splice(n,1+i,null):((e=Array(1+i)).unshift(n,1),this.foldWidgets.splice.apply(this.foldWidgets,e))},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var i=t("../token_iterator").TokenIterator,o=t("../range").Range;e.BracketMatch=function(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t):null},this.getBracketRange=function(t){var e,n,i=this.getLine(t.row),r=!0,a=i.charAt(t.column-1),s=a&&a.match(/([\(\[\{])|([\)\]\}])/);if(s||(a=i.charAt(t.column),t={row:t.row,column:t.column+1},s=a&&a.match(/([\(\[\{])|([\)\]\}])/),r=!1),!s)return null;if(s[1]){if(!(n=this.$findClosingBracket(s[1],t)))return null;e=o.fromPoints(t,n),r||(e.end.column++,e.start.column--),e.cursor=e.end}else{if(!(n=this.$findOpeningBracket(s[2],t)))return null;e=o.fromPoints(n,t),r||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.getMatchingBracketRanges=function(t){var e=this.getLine(t.row),n=e.charAt(t.column-1),i=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(i||(n=e.charAt(t.column),t={row:t.row,column:t.column+1},i=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!i)return null;var r=new o(t.row,t.column-1,t.row,t.column),a=i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t);return a?[r,new o(a.row,a.column,a.row,a.column+1)]:[r]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(t,e,n){var o=this.$brackets[t],r=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s=s||a.stepForward()){n=n||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+");for(var l=e.column-a.getCurrentTokenColumn()-2,c=s.value;;){for(;0<=l;){var h=c.charAt(l);if(h==o){if(0==--r)return{row:a.getCurrentTokenRow(),column:l+a.getCurrentTokenColumn()}}else h==t&&(r+=1);--l}for(;(s=a.stepBackward())&&!n.test(s.type););if(null==s)break;l=(c=s.value).length-1}return null}},this.$findClosingBracket=function(t,e,n){var o=this.$brackets[t],r=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s=s||a.stepForward()){n=n||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+");for(var l=e.column-a.getCurrentTokenColumn();;){for(var c=s.value,h=c.length;l<h;){var u=c.charAt(l);if(u==o){if(0==--r)return{row:a.getCurrentTokenRow(),column:l+a.getCurrentTokenColumn()}}else u==t&&(r+=1);l+=1}for(;(s=a.stepForward())&&!n.test(s.type););if(null==s)break;l=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(t,e,n){"use strict";var i=t("./lib/oop"),o=t("./lib/lang"),r=t("./bidihandler").BidiHandler,a=t("./config"),s=t("./lib/event_emitter").EventEmitter,l=t("./selection").Selection,c=t("./mode/text").Mode,h=t("./range").Range,u=t("./document").Document,d=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,g=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new u(e)),this.setDocument(e),this.selection=new l(this),this.$bidiHandler=new r(this),a.resetOptions(this),this.setMode(n),a._signal("session",this)};g.$uid=0,(function(){i.implement(this,s),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),(this.doc=t).on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;n<e&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,i=t.length-1;n<=i;){var o=n+i>>1,r=t[o];if(r<e)n=1+o;else{if(!(e<r))return o;i=o-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){this.$resetRowCache(t.data.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);!this.$fromUndo&&this.$undoManager&&(e&&e.length&&(this.$undoManager.add({action:"removeFolds",folds:e},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(t,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,i=this.bgTokenizer.getTokens(t),o=0;if(null==e){var r=i.length-1;o=this.getLine(t).length}else for(r=0;r<i.length&&!(e<=(o+=i[r].value.length));r++);return(n=i[r])?(n.index=r,n.start=o-n.value.length,n):null},this.setUndoManager=function(t){var e;this.$undoManager=t,this.$informUndoManager&&this.$informUndoManager.cancel(),t?(e=this,t.addSession(this),this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.mergeUndoDeltas=!1},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)):this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,i){var o=this.$markerId++,r={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!i,id:o};return i?(this.$frontMarkers[o]=r,this._signal("changeFrontMarker")):(this.$backMarkers[o]=r,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];e&&(delete(e.inFront?this.$frontMarkers:this.$backMarkers)[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){var e;this.$searchHighlight||(e=new p(null,"ace_selected-word","text"),this.$searchHighlight=this.addDynamicMarker(e)),this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,i){"number"!=typeof e&&(n=e,e=t),n=n||"ace_step";var o=new h(t,0,e,1/0);return o.id=this.addMarker(o,n,"fullLine",i),o},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n,i=this.getLine(t),o=!1;0<e&&(o=!!i.charAt(e-1).match(this.tokenRe)),n=(o=o||!!i.charAt(e).match(this.tokenRe))?this.tokenRe:/^\s+$/.test(i.slice(e-1,e+1))?/\s/:this.nonTokenRe;var r=e;if(0<r){for(;0<=--r&&i.charAt(r).match(n););r++}for(var a=e;a<i.length&&i.charAt(a).match(n);)a++;return new h(t,r,t,a)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){this.bgTokenizer.start(t.data.first),this._signal("tokenizerUpdate",t)},this.$modes=a.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"==typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,i=t.path}else i=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(e&&e());this.$modeId=i,a.loadModule(["mode",i],(function(t){if(this.$modeId!==i)return e&&e();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):t&&t.Mode&&(t=new t.Mode(n),n||((this.$modes[i]=t).$id=i),this.$onChangeMode(t)),e&&e()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){var n,i,o,r;e||(this.$modeId=t.$id),this.$mode!==t&&(n=this.$mode,this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker(),void 0!==(i=t.getTokenizer()).on&&(o=this.onReloadTokenizer.bind(this),i.on("update",o)),this.bgTokenizer?this.bgTokenizer.setTokenizer(i):(this.bgTokenizer=new d(i),(r=this).bgTokenizer.on("update",(function(t){r._signal("tokenizerUpdate",t)}))),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:t})))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){a.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach((function(e){e&&e.screenWidth>t&&(t=e.screenWidth)})),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,o=0,r=this.$foldData[o],a=r?r.start.row:1/0,s=e.length,l=0;l<s;l++){if(a<l){if(s<=(l=r.end.row+1))break;a=(r=this.$foldData[o++])?r.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(e[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=t.length-1;-1!=n;n--){var i=t[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!e&&this.$undoSelect&&(t.selectionBefore?this.selection.fromJSON(t.selectionBefore):this.selection.setRange(this.$getUndoSelection(t,!0))),this.$fromUndo=!1}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=0;n<t.length;n++){var i=t[n];"insert"!=i.action&&"remove"!=i.action||this.doc.$safeApplyDelta(i)}!e&&this.$undoSelect&&(t.selectionAfter?this.selection.fromJSON(t.selectionAfter):this.selection.setRange(this.$getUndoSelection(t,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e){function n(t){return e?"insert"!==t.action:"insert"===t.action}for(var i,o,r=0;r<t.length;r++){var a=t[r];a.start&&(i?n(a)?(-1==i.compare((o=a.start).row,o.column)&&i.setStart(o),1==i.compare((o=a.end).row,o.column)&&i.setEnd(o)):-1==i.compare((o=a.start).row,o.column)&&(i=h.fromPoints(a.start,a.start)):i=n(a)?h.fromPoints(a.start,a.end):h.fromPoints(a.start,a.start))}return i},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var i,o,r,a,s=this.getTextRange(t),l=this.getFoldsInRange(t),c=h.fromPoints(e,e);return n||(this.remove(t),(a=(r=t.start.row-t.end.row)?-t.end.column:t.start.column-t.end.column)&&(c.start.row==t.end.row&&c.start.column>t.end.column&&(c.start.column+=a),c.end.row==t.end.row&&c.end.column>t.end.column&&(c.end.column+=a)),r&&c.start.row>=t.end.row&&(c.start.row+=r,c.end.row+=r)),c.end=this.insert(c.start,s),l.length&&(r=(o=c.start).row-(i=t.start).row,a=o.column-i.column,this.addFolds(l.map((function(t){return(t=t.clone()).start.row==i.row&&(t.start.column+=a),t.end.row==i.row&&(t.end.column+=a),t.start.row+=r,t.end.row+=r,t})))),c},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var i=t;i<=e;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new h(0,0,0,0),i=this.getTabSize(),o=e.start.row;o<=e.end.row;++o){var r=this.getLine(o);n.start.row=o,n.end.row=o;for(var a=0;a<i&&" "==r.charAt(a);++a);a<i&&"\t"==r.charAt(a)?(n.start.column=a,n.end.column=a+1):(n.start.column=0,n.end.column=a),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){if((o=this.getRowFoldStart(t+n))<0)return 0;var i=o-t}else if(0<n){var o;if((o=this.getRowFoldEnd(e+n))>this.doc.getLength()-1)return 0;i=o-e}else t=this.$clipRowToDocument(t),i=(e=this.$clipRowToDocument(e))-t+1;var r=new h(t,0,e,Number.MAX_VALUE),a=this.getFoldsInRange(r).map((function(t){return(t=t.clone()).start.row+=i,t.end.row+=i,t})),s=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+i,s),a.length&&this.addFolds(a),i},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){var n;return e=Math.max(0,e),e=t<0?t=0:(n=this.doc.getLength())<=t?(t=n-1,this.doc.getLine(n-1).length):Math.min(this.doc.getLine(t).length,e),{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){var e;t!=this.$useWrapMode&&(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t&&(e=this.getLength(),this.$wrapData=Array(e),this.$updateWrapData(0,e-1)),this._signal("changeWrapMode"))},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var i=this.$constrainWrapLimit(t,n.min,n.max);return i!=this.$wrapLimit&&1<i&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e,n=this.$useWrapMode,i=t.action,o=t.start,r=t.end,a=o.row,s=r.row,l=s-a,c=null;if(this.$updating=!0,0!=l)if("remove"===i){this[n?"$wrapData":"$rowLengthCache"].splice(a,l);var h=this.$foldData;c=this.getFoldsInRange(t),this.removeFolds(c);var u,d=0;for((e=this.getFoldLine(r.row))&&(e.addRemoveChars(r.row,r.column,o.column-r.column),e.shiftRow(-l),(u=this.getFoldLine(a))&&u!==e&&(u.merge(e),e=u),d=h.indexOf(e)+1);d<h.length;d++)(e=h[d]).start.row>=r.row&&e.shiftRow(-l);s=a}else{var p=Array(l);p.unshift(a,0);var g,m=n?this.$wrapData:this.$rowLengthCache;for(m.splice.apply(m,p),h=this.$foldData,d=0,(e=this.getFoldLine(a))&&(0==(g=e.range.compareInside(o.row,o.column))?(e=e.split(o.row,o.column))&&(e.shiftRow(l),e.addRemoveChars(s,0,r.column-o.column)):-1==g&&(e.addRemoveChars(a,0,r.column-o.column),e.shiftRow(l)),d=h.indexOf(e)+1);d<h.length;d++)(e=h[d]).start.row>=a&&e.shiftRow(l)}else l=Math.abs(t.start.column-t.end.column),"remove"===i&&(c=this.getFoldsInRange(t),this.removeFolds(c),l=-l),(e=this.getFoldLine(a))&&e.addRemoveChars(a,o.column,l);return n&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,n?this.$updateWrapData(a,s):this.$updateRowLengthCache(a,s),c},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,i){var o,r,a=this.doc.getAllLines(),s=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,h=t;for(i=Math.min(i,a.length-1);h<=i;)(r=this.getFoldLine(h,r))?(o=[],r.walk((function(t,i,r,s){var l;if(null!=t){(l=this.$getDisplayTokens(t,o.length))[0]=e;for(var c=1;c<l.length;c++)l[c]=n}else l=this.$getDisplayTokens(a[i].substring(s,r),o.length);o=o.concat(l)}).bind(this),r.end.row,a[r.end.row].length+1),l[r.start.row]=this.$computeWrapSplits(o,c,s),h=r.end.row+1):(o=this.$getDisplayTokens(a[h]),l[h]=this.$computeWrapSplits(o,c,s),h++)};var e=3,n=4;function r(t){return!(t<4352)&&(4352<=t&&t<=4447||4515<=t&&t<=4519||4602<=t&&t<=4607||9001<=t&&t<=9002||11904<=t&&t<=11929||11931<=t&&t<=12019||12032<=t&&t<=12245||12272<=t&&t<=12283||12288<=t&&t<=12350||12353<=t&&t<=12438||12441<=t&&t<=12543||12549<=t&&t<=12589||12593<=t&&t<=12686||12688<=t&&t<=12730||12736<=t&&t<=12771||12784<=t&&t<=12830||12832<=t&&t<=12871||12880<=t&&t<=13054||13056<=t&&t<=19903||19968<=t&&t<=42124||42128<=t&&t<=42182||43360<=t&&t<=43388||44032<=t&&t<=55203||55216<=t&&t<=55238||55243<=t&&t<=55291||63744<=t&&t<=64255||65040<=t&&t<=65049||65072<=t&&t<=65106||65108<=t&&t<=65126||65128<=t&&t<=65131||65281<=t&&t<=65376||65504<=t&&t<=65510)}this.$computeWrapSplits=function(t,i,o){if(0==t.length)return[];var r=[],a=t.length,s=0,l=0,c=this.$wrapAsCode,h=this.$indentedSoftWrap,u=i<=Math.max(2*o,8)||!1===h?0:Math.floor(i/2);function d(e){for(var n=e-s,i=s;i<e;i++){var a=t[i];12!==a&&2!==a||--n}r.length||(p=function(){var e=0;if(0===u)return e;if(h)for(var n=0;n<t.length;n++){var i=t[n];if(10==i)e+=1;else{if(11!=i){if(12==i)continue;break}e+=o}}return c&&!1!==h&&(e+=o),Math.min(e,u)}(),r.indent=p),r.push(l+=n),s=e}for(var p=0;i-p<a-s;){var g=s+i-p;if(10<=t[g-1]&&10<=t[g])d(g);else if(t[g]!=e&&t[g]!=n){for(var m=Math.max(g-(i-(i>>2)),s-1);m<g&&t[g]<e;)g--;if(c){for(;m<g&&t[g]<e;)g--;for(;m<g&&9==t[g];)g--}else for(;m<g&&t[g]<10;)g--;m<g?d(++g):(2==t[g=s+i]&&g--,d(g-p))}else{for(;g!=s-1&&t[g]!=e;g--);if(s<g){d(g);continue}for(g=s+i;g<t.length&&t[g]==n;g++);if(g==t.length)break;d(g)}}return r},this.$getDisplayTokens=function(t,e){var n,i=[];e=e||0;for(var o=0;o<t.length;o++){var a=t.charCodeAt(o);if(9==a){n=this.getScreenTabSize(i.length+e),i.push(11);for(var s=1;s<n;s++)i.push(12)}else 32==a?i.push(10):39<a&&a<48||57<a&&a<64?i.push(9):4352<=a&&r(a)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(t,e,n){if(0==e)return[0,0];var i,o;for(null==e&&(e=1/0),n=n||0,o=0;o<t.length&&(9==(i=t.charCodeAt(o))?n+=this.getScreenTabSize(n):4352<=i&&r(i)?n+=2:n+=1,!(e<n));o++);return[n,o]},this.lineWidgets=null,this.getRowLength=function(t){var e=1;return this.lineWidgets&&(e+=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0),this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+e:e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-(t%this.$tabSize|0)},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var i,o,r,a=0,s=0,l=0,c=0,h=this.$screenRowCache,u=this.$getRowCacheIndex(h,t),d=h.length;r=d&&0<=u?(l=h[u],a=this.$docRowCache[u],t>h[d-1]):!d;for(var p=this.getLength()-1,g=this.getNextFoldLine(a),m=g?g.start.row:1/0;l<=t&&!(t<l+(c=this.getRowLength(a))||p<=a);)l+=c,m<++a&&(m=(g=this.getNextFoldLine(a=g.end.row+1,g))?g.start.row:1/0),r&&(this.$docRowCache.push(a),this.$screenRowCache.push(l));if(g&&g.start.row<=a)i=this.getFoldDisplayLine(g),a=g.start.row;else{if(l+c<=t||p<a)return{row:p,column:this.getLine(p).length};i=this.getLine(a),g=null}var f,v=0,b=Math.floor(t-l);return!this.$useWrapMode||(f=this.$wrapData[a])&&(o=f[b],0<b&&f.length&&(v=f.indent,i=i.substring(s=f[b-1]||f[f.length-1]))),void 0!==n&&this.$bidiHandler.isBidiRow(l+b,a,b)&&(e=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,e-v)[1],this.$useWrapMode&&o<=s&&(s=o-1),g?g.idxToPosition(s):{row:a,column:s}},this.documentToScreenPosition=function(t,e){var n,i=void 0===e?this.$clipPositionToDocument(t.row,t.column):this.$clipPositionToDocument(t,e),o=0;(n=this.getFoldAt(t=i.row,e=i.column,1))&&(t=n.start.row,e=n.start.column);var r,a,s=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,t),h=l.length;a=h&&0<=c?(s=l[c],o=this.$screenRowCache[c],t>l[h-1]):!h;for(var u=this.getNextFoldLine(s),d=u?u.start.row:1/0;s<t;){if(d<=s){if(t<(r=u.end.row+1))break;d=(u=this.getNextFoldLine(r,u))?u.start.row:1/0}else r=s+1;o+=this.getRowLength(s),s=r,a&&(this.$docRowCache.push(s),this.$screenRowCache.push(o))}var p="",g=u&&d<=s?(p=this.getFoldDisplayLine(u,t,e),u.start.row):(p=this.getLine(t).substring(0,e),t),m=0;if(this.$useWrapMode){var f=this.$wrapData[g];if(f){for(var v=0;p.length>=f[v];)o++,v++;p=p.substring(f[v-1]||0,p.length),m=0<v?f.indent:0}}return this.lineWidgets&&this.lineWidgets[s]&&this.lineWidgets[s].rowsAbove&&(o+=this.lineWidgets[s].rowsAbove),{row:o,column:m+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,o=0,r=(e=this.$foldData[o++])?e.start.row:1/0;i<n;){var a=this.$wrapData[i];t+=a?a.length+1:1,r<++i&&(i=e.end.row+1,r=(e=this.$foldData[o++])?e.start.row:1/0)}else{t=this.getLength();var s=this.$foldData;for(o=0;o<s.length;o++)t-=(e=s[o]).end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,i){if(0===n)return[0,0];var o,r;for(n=n||1/0,i=i||0,r=0;r<e.length&&!(n<(i+="\t"===(o=e.charAt(r))?this.getScreenTabSize(i):t.getCharacterWidth(o)));r++);return[i,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=r}).call(g.prototype),t("./edit_session/folding").Folding.call(g.prototype),t("./edit_session/bracket_match").BracketMatch.call(g.prototype),a.defineOptions(g.prototype,"session",{wrap:{set:function(t){var e;t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t&&((this.$wrap=t)?(this.setWrapLimitRange(e="number"==typeof t?t:null,e),this.setUseWrapMode(!0)):this.setUseWrapMode(!1))},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){0<(t=parseInt(t))&&this.$tabSize!==t&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(t){this.setFoldStyle(t)},handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId},handlesSet:!0}}),e.EditSession=g})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";function i(){this.$options={}}var o=t("./lib/lang"),r=t("./lib/oop"),a=t("./range").Range;(function(){this.set=function(t){return r.mixin(this.$options,t),this},this.getOptions=function(){return o.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var i=null;return n.forEach((function(t,n,o,r){return i=new a(t,n,o,r),!(n==r&&e.start&&e.start.start&&0!=e.skipCurrent&&i.isEqual(e.start)&&(i=null,1))})),i},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,i=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),r=[],s=e.re;if(e.$isMultiLine){var l,c=s.length,h=i.length-c;t:for(var u=s.offset||0;u<=h;u++){for(var d=0;d<c;d++)if(-1==i[u+d].search(s[d]))continue t;var p=i[u],g=i[u+c-1],m=p.length-p.match(s[0])[0].length,f=g.match(s[c-1])[0].length;l&&l.end.row===u&&l.end.column>m||(r.push(l=new a(u,m,u+c-1,f)),2<c&&(u=u+c-2))}}else for(var v=0;v<i.length;v++){var b=o.getMatchOffsets(i[v],s);for(d=0;d<b.length;d++){var y=b[d];r.push(new a(v,y.offset,v,y.offset+y.length))}}if(n){var _=n.start.column,C=n.start.column;for(v=0,d=r.length-1;v<d&&r[v].start.column<_&&r[v].start.row==n.start.row;)v++;for(;v<d&&r[d].end.column>C&&r[d].end.row==n.end.row;)d--;for(r=r.slice(v,d+1),v=0,d=r.length;v<d;v++)r[v].start.row+=n.start.row,r[v].end.row+=n.start.row}return r},this.replace=function(t,e){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(i){var o=i.exec(t);if(!o||o[0].length!=t.length)return null;if(e=t.replace(i,e),n.preserveCase){e=e.split("");for(var r=Math.min(t.length,t.length);r--;){var a=t[r];e[r]=a&&a.toLowerCase()!=a?e[r].toUpperCase():e[r].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n,i,r=t.needle;if(!t.needle)return t.re=!1;function a(t){return/\w/.test(t)||i.regExp?"\\b":""}t.regExp||(r=o.escapeRegExp(r)),t.wholeWord&&(i=t,r=a((n=r)[0])+n+a(n[n.length-1]));var s=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(r),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(r,s);try{var l=new RegExp(r,s)}catch(t){l=!1}return t.re=l},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],o=0;o<n.length;o++)try{i.push(new RegExp(n[o],e))}catch(t){return!1}return i},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var i=1==e.backwards,o=0!=e.skipCurrent,r=e.range,a=e.start;(a=a||(r?r[i?"end":"start"]:t.selection.getRange())).start&&(a=a[o!=i?"end":"start"]);var s,l,c,h=r?r.start.row:0,u=r?r.end.row:t.getLength()-1;return s=i?function(t){var n=a.row;if(!c(n,a.column,t)){for(n--;h<=n;n--)if(c(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=u,h=a.row;h<=n;n--)if(c(n,Number.MAX_VALUE,t))return}}:function(t){var n=a.row;if(!c(n,a.column,t)){for(n+=1;n<=u;n++)if(c(n,0,t))return;if(0!=e.wrap)for(n=h,u=a.row;n<=u;n++)if(c(n,0,t))return}},c=e.$isMultiLine?(l=n.length,function(e,o,r){var a=i?e-l+1:e;if(!(a<0)){var s=t.getLine(a),c=s.search(n[0]);if(!(!i&&c<o||-1===c)){for(var h=1;h<l;h++)if(-1==(s=t.getLine(a+h)).search(n[h]))return;var u=s.match(n[l-1])[0].length;if(!(i&&o<u))return!!r(a,c,a+l-1,u)||void 0}}}):i?function(e,i,o){var r,a=t.getLine(e),s=[];for(n.lastIndex=0;r=n.exec(a);){var l=r[0].length,c=r.index;if(!l){if(c>=a.length)break;n.lastIndex=c+=1}if(r.index+l>i)break;s.push(r.index,l)}for(var h=s.length-1;0<=h;h-=2){var u=s[h-1];if(o(e,u,e,u+(l=s[h])))return!0}}:function(e,i,o){var r,a=t.getLine(e);for(n.lastIndex=i;r=n.exec(a);){var s,l=r[0].length;if(o(e,s=r.index,e,s+l))return!0;if(!l&&(n.lastIndex=s+=1,s>=a.length))return!1}},{forEach:s}}}).call(i.prototype),e.Search=i})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/keys"),o=t("../lib/useragent"),r=i.KEY_MODS;function a(t,e){this.platform=e||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function s(t,e){a.call(this,t,e),this.$singleCommand=!1}s.prototype=a.prototype,(function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),(this.commands[t.name]=t).bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"==typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var i=this.commandKeyBinding;for(var o in i){var r,a=i[o];a==t?delete i[o]:!Array.isArray(a)||-1!=(r=a.indexOf(t))&&(a.splice(r,1),1==a.length&&(i[o]=a[0]))}},this.bindKey=function(t,e,n){if("object"==typeof t&&t&&(null==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach((function(t){var i,o="";-1!=t.indexOf(" ")&&(t=(i=t.split(/\s+/)).pop(),i.forEach((function(t){var e=this.parseKeys(t);this._addCommandToBinding(o+=(o?" ":"")+(r[e.hashId]+e.key),"chainKeys")}),this),o+=" ");var a=this.parseKeys(t);this._addCommandToBinding(o+(r[a.hashId]+a.key),e,n)}),this)},this._addCommandToBinding=function(e,n,i){var o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(a=o[e].indexOf(n))&&o[e].splice(a,1):o[e]=[o[e]],"number"!=typeof i&&(i=t(n));for(var r=o[e],a=0;a<r.length&&!(i<t(r[a]));a++);r.splice(a,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];if(n){if("string"==typeof n)return this.bindKey(n,e);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=e),this.addCommand(n))}}),this)},this.removeCommands=function(t){Object.keys(t).forEach((function(e){this.removeCommand(t[e])}),this)},this.bindKeys=function(t){Object.keys(t).forEach((function(e){this.bindKey(e,t[e])}),this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(t){return t})),n=e.pop(),o=i[n];if(i.FUNCTION_KEYS[o])n=i.FUNCTION_KEYS[o].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,a=e.length;a--;){var s=i.KEY_MODS[e[a]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+e[a]+" in "+t),!1;r|=s}return{key:n,hashId:r}},this.findKeyCommand=function(t,e){return this.commandKeyBinding[r[t]+e]},this.handleKeyboard=function(t,e,n,i){if(!(i<0)){var o=r[e]+n,a=this.commandKeyBinding[o];return t.$keyChain&&(t.$keyChain+=" "+o,a=this.commandKeyBinding[t.$keyChain]||a),!a||"chainKeys"!=a&&"chainKeys"!=a[a.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||0<i)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-o.length-1)),{command:a}):(t.$keyChain=t.$keyChain||o,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}).call(a.prototype),e.HashHandler=a,e.MultiHashHandler=s})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(t,e,n){"use strict";function i(t,e){r.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",(function(t){return t.command.exec(t.editor,t.args||{})}))}var o=t("../lib/oop"),r=t("../keyboard/hash_handler").MultiHashHandler,a=t("../lib/event_emitter").EventEmitter;o.inherits(i,r),(function(){o.implement(this,a),this.exec=function(t,e,n){if(Array.isArray(t)){for(var i=t.length;i--;)if(this.exec(t[i],e,n))return!0;return!1}if("string"==typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(0!=this.$checkCommandState&&t.isAvailable&&!t.isAvailable(e))return!1;var o={editor:e,command:t,args:n};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach((function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map((function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t}))}}).call(i.prototype),e.CommandManager=i})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(t,e,n){"use strict";var i=t("../lib/lang"),o=t("../config"),r=t("../range").Range;function a(t,e){return{win:t,mac:e}}e.commands=[{name:"showSettingsMenu",bindKey:a("Ctrl-,","Command-,"),exec:function(t){o.loadModule("ace/ext/settings_menu",(function(e){e.init(t),t.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:a("Alt-E","F4"),exec:function(t){o.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(t){o.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(t,e){"number"!=typeof e||isNaN(e)||t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:a("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:a("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(t){o.loadModule("ace/ext/searchbox",(function(e){e.Search(t)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty()?t.selection.getLineRange():t.selection.getRange();t._emit("cut",e),e.isEmpty()||t.session.remove(e),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(t){o.loadModule("ace/ext/searchbox",(function(e){e.Search(t,!0)}))}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(i.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(t){t.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),o=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),a=t.session.doc.getLine(n.row).length,s=t.session.doc.getTextRange(t.selection.getRange()).replace(/\n\s*/," ").length,l=t.session.doc.getLine(n.row),c=n.row+1;c<=o.row+1;c++){var h=i.stringTrimLeft(i.stringTrimRight(t.session.doc.getLine(c)));0!==h.length&&(h=" "+h),l+=h}o.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new r(n.row,0,o.row+2,0),l),0<s?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+s)):(a=t.session.doc.getLine(n.row).length>a?a+1:a,t.selection.moveCursorTo(n.row,a))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,i=t.selection.rangeList.ranges,o=[];i.length<1&&(i=[t.selection.getRange()]);for(var a=0;a<i.length;a++)a==i.length-1&&(i[a].end.row===e&&i[a].end.column===n||o.push(new r(i[a].end.row,i[a].end.column,e,n))),0===a?0===i[a].start.row&&0===i[a].start.column||o.push(new r(0,0,i[a].start.row,i[a].start.column)):o.push(new r(i[a-1].end.row,i[a-1].end.column,i[a].start.row,i[a].start.column));for(t.exitMultiSelectMode(),t.clearSelection(),a=0;a<o.length;a++)t.selection.addRange(o[a],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(t){t.selection.clearSelection(),t.navigateLineEnd(),t.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(t){t.selection.clearSelection();var e=t.getCursorPosition();t.selection.moveTo(e.row-1,Number.MAX_VALUE),t.insert("\n"),0===e.row&&t.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:a("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}];for(var s=1;s<9;s++)e.commands.push({name:"foldToLevel"+s,description:"Fold To Level "+s,level:s,exec:function(t){t.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/oop"),o=t("./lib/dom"),r=t("./lib/lang"),a=t("./lib/useragent"),s=t("./keyboard/textinput").TextInput,l=t("./mouse/mouse_handler").MouseHandler,c=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,u=t("./edit_session").EditSession,d=t("./search").Search,p=t("./range").Range,g=t("./lib/event_emitter").EventEmitter,m=t("./commands/command_manager").CommandManager,f=t("./commands/default_commands").commands,v=t("./config"),b=t("./token_iterator").TokenIterator,y=t("./clipboard"),_=function t(e,n,i){this.$toDestroy=[];var o=e.getContainerElement();this.container=o,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new m(a.isMac?"mac":"win",f),"object"==typeof document&&(this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new h(this),this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall((function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",(function(t,e){e._$emitInputEvent.schedule(31)})),this.setSession(n||i&&i.session||new u("")),v.resetOptions(this),i&&this.setOptions(i),v._signal("editor",this)};_.$uid=0,(function(){i.implement(this,g),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(t){if(this.curOp&&this.session){if(t&&!1===t.returnValue||!this.session)return this.curOp=null;if(1==t&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var e=this.curOp.command,n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),o=this.renderer.layerConfig;(i.start.row>=o.lastRow||i.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var r=this.selection.toJSON();this.curOp.selectionAfter=r,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(r),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){var e,n,i,o;this.$mergeUndoDeltas&&(n=this.$mergeableCommands,i=(e=this.prevOp).command&&t.command.name==e.command.name,"insertstring"==t.command.name?(o=t.args,void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(e.args)),this.mergeNextCommand=!0):i=i&&-1!==n.indexOf(t.command.name),"always"!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now()))},this.setKeyboardHandler=function(t,e){var n;t&&"string"==typeof t&&"ace"!=t?(this.$keybindingId=t,n=this,v.loadModule(["keybinding",t],(function(i){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(i&&i.handler),e&&e()}))):(this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e())},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){var e,n;this.session!=t&&(this.curOp&&this.endOperation(),this.curOp={},(e=this.session)&&(this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),(n=this.session.getSelection()).off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)),(this.session=t)?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart())},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){var t;this.$highlightPending||((t=this).$highlightPending=!0,setTimeout((function(){t.$highlightPending=!1;var e,n,i=t.session;i&&i.bgTokenizer&&(i.$bracketHighlight&&(i.$bracketHighlight.markerIds.forEach((function(t){i.removeMarker(t)})),i.$bracketHighlight=null),!(e=i.getMatchingBracketRanges(t.getCursorPosition()))&&i.$mode.getMatching&&(e=i.$mode.getMatching(t.session)),e&&(n="ace_bracket",Array.isArray(e)?1==e.length&&(n="ace_error_bracket"):e=[e],2==e.length&&(0==p.comparePoints(e[0].end,e[1].start)?e=[p.fromPoints(e[0].start,e[1].end)]:0==p.comparePoints(e[0].start,e[1].end)&&(e=[p.fromPoints(e[1].start,e[0].end)])),i.$bracketHighlight={ranges:e,markerIds:e.map((function(t){return i.addMarker(t,n,"text")}))}))}),50))},this.$highlightTags=function(){var t;this.$highlightTagPending||((t=this).$highlightTagPending=!0,setTimeout((function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),i=new b(t.session,n.row,n.column),o=i.getCurrentToken();if(!o||!/\b(?:tag-open|tag-name)/.test(o.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1===o.type.indexOf("tag-open")||(o=i.stepForward())){var r=o.value,a=o.value,s=0,l=i.stepBackward();if("<"===l.value)for(;l=o,(o=i.stepForward())&&(-1!==o.type.indexOf("tag-name")?r===(a=o.value)&&("<"===l.value?s++:"</"===l.value&&s--):r===a&&"/>"===o.value&&s--),o&&0<=s;);else{do{if(o=l,l=i.stepBackward(),o)if(-1!==o.type.indexOf("tag-name"))r===o.value&&("<"===l.value?s++:"</"===l.value&&s--);else if("/>"===o.value){for(var c=0,h=l;h;){if(-1!==h.type.indexOf("tag-name")&&h.value===r){s--;break}if("<"===h.value)break;h=i.stepBackward(),c++}for(var u=0;u<c;u++)i.stepForward()}}while(l&&s<=0);i.stepForward()}if(!o)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var d=i.getCurrentTokenRow(),g=i.getCurrentTokenColumn(),m=new p(d,g,d,g+o.value.length),f=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=f&&0!==m.compareRange(f.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(m,"ace_bracket","text"))}}}),50))},this.focus=function(){var t=this;setTimeout((function(){t.isFocused()||t.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(t){this.renderer.updateLines(t.start.row,t.start.row==t.end.row?t.end.row:1/0,this.session.$useWrapMode),this._signal("change",t),this.$cursorChange()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e,n=this.getSession();this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(t=!1)),n.$highlightLineMarker&&!t?(n.removeMarker(n.$highlightLineMarker.id),n.$highlightLineMarker=null):!n.$highlightLineMarker&&t?((e=new p(t.row,t.column,t.row,1/0)).id=n.addMarker(e,"ace_active-line","screenLine"),n.$highlightLineMarker=e):t&&(n.$highlightLineMarker.start.row=t.row,n.$highlightLineMarker.end.row=t.row,n.$highlightLineMarker.start.column=t.column,n._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e,n,i=this.session;i.$selectionMarker&&i.removeMarker(i.$selectionMarker),i.$selectionMarker=null,this.selection.isEmpty()?this.$updateHighlightActiveLine():(e=this.selection.getRange(),n=this.getSelectionStyle(),i.$selectionMarker=i.addMarker(e,"ace_selection",n));var o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column,i=e.end.column,o=t.getLine(e.start.row),r=o.substring(n,i);if(!(5e3<r.length)&&/[\w\d]/.test(r)){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r}),s=o.substring(n-1,i+1);if(a.test(s))return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText(),e=this.session.doc.getNewLineCharacter(),n=!1;if(!t&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),o=0;o<i.length;o++){var r=i[o];o&&i[o-1].start.row==r.start.row||(t+=this.session.getLine(r.start.row)+e)}}var a={text:t};return this._signal("copy",a),y.lineMode=n?a.text:"",a.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){this.commands.exec("paste",this,{text:t,event:e})},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text,n=e==y.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},e):this.insert(e);else if(n)this.selection.rangeList.ranges.forEach((function(t){i.insert({row:t.start.row,column:0},e)}));else{var o=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(o.length!=r.length||!(2!=o.length||o[0]&&o[1]))return this.commands.exec("insertstring",this,e);for(var a=r.length;a--;){var s=r[a];s.isEmpty()||i.remove(s),i.insert(s.start,o[a])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n,i,o,r=this.session,a=r.getMode(),s=this.getCursorPosition();!this.getBehavioursEnabled()||e||(n=a.transformAction(r.getState(s.row),"insertion",this,r,t))&&(t!==n.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),t=n.text),"\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()?this.session.getOverwrite()&&-1==t.indexOf("\n")&&((i=new p.fromPoints(s,s)).end.column+=t.length,this.session.remove(i)):(i=this.getSelectionRange(),s=this.session.remove(i),this.clearSelection()),"\n"!=t&&"\r\n"!=t||(u=r.getLine(s.row),s.column>u.search(/\S|$/)&&(o=u.substr(s.column).search(/\S|$/),r.doc.removeInLine(s.row,s.column,s.column+o))),this.clearSelection();var l,c=s.column,h=r.getState(s.row),u=r.getLine(s.row),d=a.checkOutdent(h,u,t);r.insert(s,t),n&&n.selection&&this.selection.setSelectionRange(2==n.selection.length?new p(s.row,c+n.selection[0],s.row,c+n.selection[1]):new p(s.row+n.selection[0],n.selection[1],s.row+n.selection[2],n.selection[3])),this.$enableAutoIndent&&(r.getDocument().isNewLine(t)&&(l=a.getNextLineIndent(h,u.slice(0,s.column),r.getTabString()),r.insert({row:s.row+1,column:0},l)),d&&a.autoOutdent(h,r,s.row))},this.autoIndent=function(){var t,e,n,i=this.session,o=i.getMode();n=this.selection.isEmpty()?(e=0,i.doc.getLength()-1):(e=(t=this.getSelectionRange()).start.row,t.end.row);for(var r,a,s,l,c="",h="",u=i.getTabString(),d=e;d<=n;d++)0<d&&(c=i.getState(d-1),r=i.getLine(d-1),h=o.getNextLineIndent(c,r,u)),a=i.getLine(d),h!==(s=o.$getIndent(a))&&(0<s.length&&(l=new p(d,0,d,s.length),i.remove(l)),0<h.length&&i.insert({row:d,column:0},h)),o.autoOutdent(c,i,d)},this.onTextInput=function(t,e){if(!e)return this.keyBinding.onTextInput(t);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,t,e);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(t,e){var n;(e.extendLeft||e.extendRight)&&((n=this.selection.getRange()).start.column-=e.extendLeft,n.end.column+=e.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),t||n.isEmpty()||this.remove()),!t&&this.selection.isEmpty()||this.insert(t,!0),(e.restoreStart||e.restoreEnd)&&((n=this.selection.getRange()).start.column-=e.restoreStart,n.end.column-=e.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(t,e,n){return this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e,n,i,o,r,a=this.getSelectionRange();this.getBehavioursEnabled()&&(n=(e=this.session).getState(a.start.row),i=e.getMode().transformAction(n,"deletion",this,e,a),0!==a.end.column||"\n"==(o=e.getTextRange(a))[o.length-1]&&(r=e.getLine(a.end.row),/^\s+$/.test(r)&&(a.end.column=r.length)),i&&(a=i)),this.session.remove(a),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){var t,e,n,i,o;!this.selection.isEmpty()||0!==(e=(t=this.getCursorPosition()).column)&&(o=e<(n=this.session.getLine(t.row)).length?(i=n.charAt(e)+n.charAt(e-1),new p(t.row,e-1,t.row,e+1)):(i=n.charAt(e-1)+n.charAt(e-2),new p(t.row,e-2,t.row,e)),this.session.replace(o,i),this.session.selection.moveToPosition(o.end))},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var n=t.getTextRange(e);if(!/^\s+$/.test(n))return h=this.$getSelectedRows(),void t.indentRows(h.first,h.last,"\t")}var i=t.getLine(e.start.row),o=e.start,a=t.getTabSize(),s=t.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var l=a-s%a,c=r.stringRepeat(" ",l);else{for(l=s%a;" "==i[e.start.column-1]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)}var h=this.$getSelectedRows();t.indentRows(h.first,h.last,"\t")},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],i=t.first;i<=t.last;i++)n.push(e.getLine(i));n.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}));var o=new p(0,0,0,0);for(i=t.first;i<=t.last;i++){var r=e.getLine(i);o.start.row=i,o.end.row=i,o.end.column=r.length,e.replace(o,n[i-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(t);n.lastIndex<e;){var o=n.exec(i);if(o.index<=e&&o.index+o[0].length>=e)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(t){var e,n,i,o,r,a,s=this.selection.getCursor().row,l=this.selection.getCursor().column,c=new p(s,l-1,s,l),h=this.session.getTextRange(c);!isNaN(parseFloat(h))&&isFinite(h)?(e=this.getNumberAt(s,l))&&(n=0<=e.value.indexOf(".")?e.start+e.value.indexOf(".")+1:e.end,i=e.start+e.value.length-n,o=parseFloat(e.value),o*=Math.pow(10,i),o+=t*=n!==e.end&&l<n?Math.pow(10,e.end-l-1):Math.pow(10,e.end-l),r=(o/=Math.pow(10,i)).toFixed(i),a=new p(s,e.start,s,e.end),this.session.replace(a,r),this.moveCursorTo(s,Math.max(e.start+1,l+r.length-e.value.length))):this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var t=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,o=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),a=e-i-1;a<0&&(a=0);var s,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&o.forEach((function(e,o){s=l+e.length,l<=a&&a<=s&&(n=e,c.selection.clearSelection(),c.moveCursorTo(t,l+i),c.selection.selectTo(t,s+i)),l=s}));for(var h,u=this.$toggleWordPairs,d=0;d<u.length;d++)for(var p=u[d],g=0;g<=1;g++){var m=+!g,f=n.match(new RegExp("^\\s?_?("+r.escapeRegExp(p[g])+")\\s?$","i"));f&&n.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(f[1])+")($|\\s)","g"))&&(h=n.replace(new RegExp(r.escapeRegExp(p[g]),"i"),(function(t){var e=p[m];return t.toUpperCase()==t?e=e.toUpperCase():t.charAt(0).toUpperCase()==t.charAt(0)&&(e=e.substr(0,0)+p[m].charAt(0).toUpperCase()+e.substr(1)),e})),this.insert(h))}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t,e,n,i=this.selection,o=this.session,r=i.getRange(),a=i.isBackwards();r.isEmpty()?o.duplicateLines(t=r.start.row,t):(n=o.insert(e=a?r.start:r.end,o.getTextRange(r),!1),r.start=e,r.end=n,i.setSelectionRange(r,a))},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n=this.selection;if(!n.inMultiSelectMode||this.inVirtualSelectionMode){var i=n.toOrientedRange(),o=this.$getSelectedRows(i),r=this.session.$moveLines(o.first,o.last,e?0:t);e&&-1==t&&(r=0),i.moveBy(r,0),n.fromOrientedRange(i)}else{var a=n.rangeList.ranges;n.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,l=0,c=a.length,h=0;h<c;h++){var u=h;a[h].moveBy(s,0);for(var d=(o=this.$getSelectedRows(a[h])).first,p=o.last;++h<c;){l&&a[h].moveBy(l,0);var g=this.$getSelectedRows(a[h]);if(e&&g.first!=p)break;if(!e&&g.first>p+1)break;p=g.last}for(h--,s=this.session.$moveLines(d,p,e?0:t),e&&-1==t&&(u=h+1);u<=h;)a[u].moveBy(s,0),u++;e||(s=0),l+=s}n.fromOrientedRange(n.ranges[0]),n.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(t)},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,i=this.renderer.layerConfig,o=t*Math.floor(i.height/i.lineHeight);!0===e?this.selection.$moveSelection((function(){this.moveCursorBy(o,0)})):!1===e&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection());var r=n.scrollTop;n.scrollBy(0,o*i.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,i){this.renderer.scrollToLine(t,e,n,i)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),i=new b(this.session,n.row,n.column),o=i.getCurrentToken(),r=o||i.stepForward();if(r){var a,s,l,c=!1,h={},u=n.column-r.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;u<r.value.length&&!c;u++)if(d[r.value[u]])switch(s=d[r.value[u]]+"."+r.type.replace("rparen","lparen"),isNaN(h[s])&&(h[s]=0),r.value[u]){case"(":case"[":case"{":h[s]++;break;case")":case"]":case"}":h[s]--,-1===h[s]&&(a="bracket",c=!0)}}else-1!==r.type.indexOf("tag-name")&&(isNaN(h[r.value])&&(h[r.value]=0),"<"===o.value?h[r.value]++:"</"===o.value&&h[r.value]--,-1===h[r.value]&&(a="tag",c=!0));c||(o=r,r=i.stepForward(),u=0)}while(r&&!c);if(a){if("bracket"===a)(g=this.session.getBracketRange(n))||(l=(g=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1)).start,(e||l.row===n.row&&Math.abs(l.column-n.column)<2)&&(g=this.session.getBracketRange(l)));else if("tag"===a){if(!r||-1===r.type.indexOf("tag-name"))return;var g,m=r.value;if(0===(g=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column))for(c=!1;r=o,(o=i.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&g.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),r.value===m&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?h[m]++:"</"===o.value&&h[m]--,0===h[m]&&(c=!0))),o&&!c;);r&&r.type.indexOf("tag-name")&&(l=g.start).row==n.row&&Math.abs(l.column-n.column)<2&&(l=g.end)}(l=g&&g.cursor||l)&&(t?g&&e?this.selection.setRange(g):g&&g.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(l.row,l.column):this.selection.moveTo(l.row,l.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),i=0;return n&&(this.$tryReplace(n,t)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var o=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=n.length-1;0<=r;--r)this.$tryReplace(n[r],t)&&i++;return this.selection.setSelectionRange(o),i},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return null!==(e=this.$search.replace(n,e))?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e=e||{},"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&i.mixin(e,t);var o=this.selection.getRange();null==e.needle&&((t=this.session.getTextRange(o)||this.$search.$options.needle)||(o=this.session.getWordRange(o.start.row,o.start.column),t=this.session.getTextRange(o)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:o});var r=this.$search.find(this.session);return e.preventScroll?r:r?(this.revealRange(r,n),r):(e.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.session.unfold(t),this.selection.setSelectionRange(t);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(t){t.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(t){var e,n,i,o,r,a,s;t&&(i=!1,(n=this).$scrollAnchor||(this.$scrollAnchor=document.createElement("div")),(o=this.$scrollAnchor).style.cssText="position:absolute",this.container.insertBefore(o,this.container.firstChild),r=this.on("changeSelection",(function(){i=!0})),a=this.renderer.on("beforeRender",(function(){i&&(e=n.renderer.container.getBoundingClientRect())})),s=this.renderer.on("afterRender",(function(){var t,r,a,s;i&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())&&(s=(r=(t=n.renderer).$cursorLayer.$pixelPos).top-(a=t.layerConfig).offset,null!=(i=0<=r.top&&s+e.top<0||!(r.top<a.height&&r.top+e.top+a.lineHeight>window.innerHeight)&&null)&&(o.style.top=s+"px",o.style.left=r.left+"px",o.style.height=a.lineHeight+"px",o.scrollIntoView(i)),i=e=null)})),this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",r),this.renderer.off("afterRender",s),this.renderer.off("beforeRender",a))})},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,o.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))},this.prompt=function(t,e,n){var i=this;v.loadModule("./ext/prompt",(function(o){o.prompt(i,t,e,n)}))}}).call(_.prototype),v.defineOptions(_.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.textInput.setReadOnly(t),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(t){this.textInput.setCopyWithEmptySelection(t)},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(t){this.session.setValue(t)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(t){this.setSession(t)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(t){this.renderer.$gutterLayer.setShowLineNumbers(t),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),t&&this.$relativeLineNumbers?C.attach(this):C.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(t){this.$showLineNumbers&&t?C.attach(this):C.detach(this)}},placeholder:{set:function(t){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var t,e=this.session&&(this.renderer.$composition||this.getValue());e&&this.renderer.placeholderNode?(this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null):e||this.renderer.placeholderNode?!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||""):(this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder"),(t=o.createElement("div")).className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode))}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var C={getText:function(t,e){return(Math.abs(t.selection.lead.row-e)||e+1+(e<9?"\xb7":""))+""},getWidth:function(t,e,n){return Math.max(e.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(t,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(t){t.renderer.$gutterLayer.$renderer=this,t.on("changeSelection",this.update),this.update(null,t)},detach:function(t){t.renderer.$gutterLayer.$renderer==this&&(t.renderer.$gutterLayer.$renderer=null),t.off("changeSelection",this.update),this.update(null,t)}};e.Editor=_})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(t,e,n){"use strict";function i(){this.$maxRev=0,this.$fromUndo=!1,this.reset()}(function(){this.addSession=function(t){this.$session=t},this.add=function(t,e,n){this.$fromUndo||t!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==e&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),t.id=this.$rev=++this.$maxRev),"remove"!=t.action&&"insert"!=t.action||(this.$lastDelta=t),this.lastDeltas.push(t))},this.addSelection=function(t,e){this.selections.push({value:t,rev:e||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var o=n[i][0];if(o.id<=t)break;o.id<e&&(o.ignore=!0)}this.lastDeltas=null},this.getSelection=function(t,e){for(var n=this.selections,i=n.length;i--;){var o=n[i];if(o.rev<t)return e&&(o=n[i+1]),o}},this.getRevision=function(){return this.$rev},this.getDeltas=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=null,o=0,r=n.length;r--;){var a=n[r][0];if(a.id<e&&!i&&(i=r+1),a.id<=t){o=r+1;break}}return n.slice(o,i)},this.getChangedRanges=function(t,e){null==e&&(e=this.$rev+1)},this.getChangedLines=function(t,e){null==e&&(e=this.$rev+1)},this.undo=function(t,e){this.lastDeltas=null;var n=this.$undoStack;if(function(t,e){for(var n=e;n--;){var i=t[n];if(i&&!i[0].ignore){for(;n<e-1;){var o=function(t,e){for(var n=t.length;n--;)for(var i=0;i<e.length;i++)if(!c(t[n],e[i])){for(;n<t.length;){for(;i--;)c(e[i],t[n]);i=e.length,n++}return[t,e]}return t.selectionBefore=e.selectionBefore=t.selectionAfter=e.selectionAfter=null,[e,t]}(t[n],t[n+1]);t[n]=o[0],t[n+1]=o[1],n++}return!0}}}(n,n.length)){t=t||this.$session,this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),o=null;return i&&(o=t.undoChanges(i,e),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,o}},this.redo=function(t,e){var n;this.lastDeltas=null,t=t||this.$session,this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev&&(n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1),function(t,e){for(var n=0;n<e.length;n++)for(var i=e[n],s=0;s<i.length;s++)!function(t,e){e=function(t){return{start:a(t.start),end:a(t.end),action:t.action,lines:t.lines.slice()}}(e);for(var n=t.length;n--;){for(var i=t[n],s=0;s<i.length;s++){var l=function(t,e){var n,i,a="insert"==t.action,s="insert"==e.action;if(a&&s)r(t.start,e.start)<0?h(e,t,1):h(t,e,1);else if(a&&!s)0<=r(t.start,e.end)?h(t,e,-1):(r(t.start,e.start)<=0||h(t,o.fromPoints(e.start,t.start),-1),h(e,t,1));else if(!a&&s)0<=r(e.start,t.end)?h(e,t,-1):(r(e.start,t.start)<=0||h(e,o.fromPoints(t.start,e.start),-1),h(t,e,1));else if(!a&&!s)if(0<=r(e.start,t.end))h(e,t,-1);else{if(!(r(e.end,t.start)<=0))return r(t.start,e.start)<0&&(t=d(n=t,e.start)),0<r(t.end,e.end)&&(i=d(t,e.end)),u(e.end,t.start,t.end,-1),i&&!n&&(t.lines=i.lines,t.start=i.start,t.end=i.end,i=t),[e,n,i].filter(Boolean);h(t,e,-1)}return[e,t]}(i[s],e);e=l[0],2!=l.length&&(l[2]?(i.splice(s+1,1,l[1],l[2]),s++):l[1]||(i.splice(s,1),s--))}i.length||t.splice(n,1)}}(t,i[s])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(t){t[0].id=++this.$maxRev}),this));var i=this.$redoStack.pop(),s=null;return i&&(s=t.redoChanges(i,e),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,s},this.$syncRev=function(){var t=this.$undoStack,e=t[t.length-1],n=e&&e[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return 0<this.$undoStack.length},this.canRedo=function(){return 0<this.$redoStack.length},this.bookmark=function(t){null==t&&(t=this.$rev),this.mark=t},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(t){return t?s(t):s(this.$undoStack)+"\n---\n"+s(this.$redoStack)}}).call(i.prototype);var o=t("./range").Range,r=o.comparePoints;function a(t){return{row:t.row,column:t.column}}function s(t){if(t=t||this,Array.isArray(t))return t.map(s).join("\n");var e="";return t.action?(e="insert"==t.action?"+":"-",e+="["+t.lines+"]"):t.value&&(e=Array.isArray(t.value)?t.value.map(l).join("\n"):l(t.value)),t.start&&(e+=l(t)),(t.id||t.rev)&&(e+="\t("+(t.id||t.rev)+")"),e}function l(t){return t.start.row+":"+t.start.column+"=>"+t.end.row+":"+t.end.column}function c(t,e){var n="insert"==t.action,i="insert"==e.action;if(n&&i)if(0<=r(e.start,t.end))h(e,t,-1);else{if(!(r(e.start,t.start)<=0))return;h(t,e,1)}else if(n&&!i)if(0<=r(e.start,t.end))h(e,t,-1);else{if(!(r(e.end,t.start)<=0))return;h(t,e,-1)}else if(!n&&i)if(0<=r(e.start,t.start))h(e,t,1);else{if(!(r(e.start,t.start)<=0))return;h(t,e,1)}else if(!n&&!i)if(0<=r(e.start,t.start))h(e,t,1);else{if(!(r(e.end,t.start)<=0))return;h(t,e,-1)}return 1}function h(t,e,n){u(t.start,e.start,e.end,n),u(t.end,e.start,e.end,n)}function u(t,e,n,i){t.row==(1==i?e:n).row&&(t.column+=i*(n.column-e.column)),t.row+=i*(n.row-e.row)}function d(t,e){var n=t.lines,i=t.end;t.end=a(e);var o=t.end.row-t.start.row,r=n.splice(o,n.length),s=o?e.column:e.column-t.start.column;return n.push(r[0].substring(0,s)),r[0]=r[0].substr(s),{start:a(e),end:i,lines:r,action:t.action}}e.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";function i(t,e){this.element=t,this.canvasHeight=e||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}var o=t("../lib/dom");(function(){this.moveContainer=function(t){o.translate(this.element,0,-t.firstRowScreen*t.lineHeight%this.canvasHeight-t.offset*this.$offsetCoefficient)},this.pageChanged=function(t,e){return Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)!==Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)},this.computeLineTop=function(t,e,n){var i=Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight);return n.documentToScreenRow(t,0)*e.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(t,e,n){return e.lineHeight*n.getRowLineCount(t)},this.getLength=function(){return this.cells.length},this.get=function(t){return this.cells[t]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(t){if(Array.isArray(t)){this.cells.push.apply(this.cells,t);for(var e=o.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.appendChild(e)}else this.cells.push(t),this.element.appendChild(t.element)},this.unshift=function(t){if(Array.isArray(t)){this.cells.unshift.apply(this.cells,t);for(var e=o.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.firstChild?this.element.insertBefore(e,this.element.firstChild):this.element.appendChild(e)}else this.cells.unshift(t),this.element.insertAdjacentElement("afterbegin",t.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(t){t&&(t.element.remove(),this.cellCache.push(t))},this.createCell=function(t,e,n,i){var r,a=this.cellCache.pop();return a||(r=o.createElement("div"),i&&i(r),this.element.appendChild(r),a={element:r,text:"",row:t}),a.row=t,a}}).call(i.prototype),e.Lines=i})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(t,e,n){"use strict";function i(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}var o=t("../lib/dom"),r=t("../lib/oop"),a=t("../lib/lang"),s=t("../lib/event_emitter").EventEmitter,l=t("./lines").Lines;function c(t){var e=document.createTextNode("");t.appendChild(e);var n=o.createElement("span");return t.appendChild(n),t}(function(){r.implement(this,s),this.setSession=function(t){this.session&&this.session.off("change",this.$updateAnnotations),(this.session=t)&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.row,o=(o=this.$annotations[i])||(this.$annotations[i]={text:[]}),r=(r=n.text)?a.escapeHTML(r):n.html||"";-1===o.text.indexOf(r)&&o.text.push(r);var s=n.type;"error"==s?o.className=" ace_error":"warning"==s&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=s||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(t){var e,n,i;this.$annotations.length&&(0==(n=t.end.row-(e=t.start.row))||("remove"==t.action?this.$annotations.splice(e,1+n,null):((i=new Array(1+n)).unshift(e,1),this.$annotations.splice.apply(this.$annotations,i))))},this.update=function(t){this.config=t;var e=this.session,n=t.firstRow,i=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1);this.oldLastRow=i,this.config=t,this.$lines.moveContainer(t),this.$updateCursorRow();for(var o=e.getNextFoldLine(n),r=o?o.start.row:1/0,a=null,s=-1,l=n;;){if(r<l&&(r=(o=e.getNextFoldLine(l=o.end.row+1,o))?o.start.row:1/0),i<l){for(;this.$lines.getLength()>s+1;)this.$lines.pop();break}(a=this.$lines.get(++s))?a.row=l:(a=this.$lines.createCell(l,t,this.session,c),this.$lines.push(a)),this.$renderCell(a,t,o,l),l++}this._signal("afterRender"),this.$updateGutterWidth(t)},this.$updateGutterWidth=function(t){var e=this.session,n=e.gutterRenderer||this.$renderer,i=e.$firstLineNumber,o=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||e.$useWrapMode)&&(o=e.getLength()+i-1);var r=n?n.getWidth(e,o,t):o.toString().length*t.characterWidth,a=this.$padding||this.$computePadding();(r+=a.left+a.right)===this.gutterWidth||isNaN(r)||(this.gutterWidth=r,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",r))},this.$updateCursorRow=function(){var t;this.$highlightGutterLine&&(t=this.session.selection.getCursor(),this.$cursorRow!==t.row&&(this.$cursorRow=t.row))},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var t=this.session.selection.cursor.row;if(this.$cursorRow=t,!this.$cursorCell||this.$cursorCell.row!=t){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var e=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<e.length;n++){var i=e[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var o=this.session.getFoldLine(this.$cursorRow);if(!(0<n&&o&&o.start.row==e[n-1].row))break;i=e[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$updateCursorRow(),this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=Math.min(t.lastRow+t.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!e||i<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var o=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);0<o;o--)this.$lines.shift();if(n<i)for(o=this.session.getFoldedRowCount(n+1,i);0<o;o--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLines(t,t.firstRow,e.firstRow-1)),i<n&&this.$lines.push(this.$renderLines(t,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(t)},this.$renderLines=function(t,e,n){for(var i=[],o=e,r=this.session.getNextFoldLine(o),a=r?r.start.row:1/0;a<o&&(a=(r=this.session.getNextFoldLine(o=r.end.row+1,r))?r.start.row:1/0),!(n<o);){var s=this.$lines.createCell(o,t,this.session,c);this.$renderCell(s,t,r,o),i.push(s),o++}return i},this.$renderCell=function(t,e,n,i){var r,a=t.element,s=this.session,l=a.childNodes[0],c=a.childNodes[1],h=s.$firstLineNumber,u=s.$breakpoints,d=s.$decorations,p=s.gutterRenderer||this.$renderer,g=this.$showFoldWidgets&&s.foldWidgets,m=n?n.start.row:Number.MAX_VALUE,f="ace_gutter-cell ";this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&m<=i&&this.$cursorRow<=n.end.row)&&(f+="ace_gutter-active-line ",this.$cursorCell!=t&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=t)),u[i]&&(f+=u[i]),d[i]&&(f+=d[i]),this.$annotations[i]&&(f+=this.$annotations[i].className),a.className!=f&&(a.className=f),!g||null==(r=g[i])&&(r=g[i]=s.getFoldWidget(i)),r?(f="ace_fold-widget ace_"+r,c.className!=(f+="start"==r&&i==m&&i<n.end.row?" ace_closed":" ace_open")&&(c.className=f),o.setStyle(c.style,"height",e.lineHeight+"px"),o.setStyle(c.style,"display","inline-block")):c&&o.setStyle(c.style,"display","none");var v=(p?p.getText(s,i):i+h).toString();return v!==l.data&&(l.data=v),o.setStyle(t.element.style,"height",this.$lines.computeLineHeight(i,e,s)+"px"),o.setStyle(t.element.style,"top",this.$lines.computeLineTop(i,e,s)+"px"),t.text=v,t},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(t){this.$highlightGutterLine=t},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(t.borderLeftWidth)||0)+(parseInt(t.paddingLeft)||0)+1,this.$padding.right=(parseInt(t.borderRightWidth)||0)+(parseInt(t.paddingRight)||0),this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(i.prototype),e.Gutter=i})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(t,e,n){"use strict";function i(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)}var o=t("../range").Range,r=t("../lib/dom");(function(){this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.elt=function(t,e){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=e,n.className=t},this.update=function(t){if(t){var e;for(var n in this.config=t,this.i=0,this.markers){var i,o,r=this.markers[n];r.range?(o=r.range.clipRows(t.firstRow,t.lastRow)).isEmpty()||(o=o.toScreenRange(this.session),r.renderer?(i=this.$getTop(o.start.row,t),r.renderer(e,o,this.$padding+o.start.column*t.characterWidth,i,t)):"fullLine"==r.type?this.drawFullLineMarker(e,o,r.clazz,t):"screenLine"==r.type?this.drawScreenLineMarker(e,o,r.clazz,t):o.isMultiLine()?"text"==r.type?this.drawTextMarker(e,o,r.clazz,t):this.drawMultiLineMarker(e,o,r.clazz,t):this.drawSingleLineMarker(e,o,r.clazz+" ace_start ace_br15",t)):r.update(e,this,this.session,t)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(t,e,n,i,r){for(var a,s=this.session,l=e.start.row,c=e.end.row,h=l,u=0,d=s.getScreenLastRowColumn(h),p=new o(h,e.start.column,h,u);h<=c;h++)p.start.row=p.end.row=h,p.start.column=h==l?e.start.column:s.getRowWrapIndent(h),a=u,u=p.end.column=d,d=h+1<c?s.getScreenLastRowColumn(h+1):h==c?0:e.end.column,this.drawSingleLineMarker(t,p,n+(h==l?" ace_start":"")+" ace_br"+((h==l||h==l+1&&e.start.column?1:0)|(a<u?2:0)|(d<u?4:0)|(h==c?8:0)),i,h==c?0:1,r)},this.drawMultiLineMarker=function(t,e,n,i,o){var r,a,s=this.$padding,l=i.lineHeight,c=this.$getTop(e.start.row,i),h=s+e.start.column*i.characterWidth;o=o||"",this.session.$bidiHandler.isBidiRow(e.start.row)?((r=e.clone()).end.row=r.start.row,r.end.column=this.session.getLine(r.start.row).length,this.drawBidiSingleLineMarker(t,r,n+" ace_br1 ace_start",i,null,o)):this.elt(n+" ace_br1 ace_start","height:"+l+"px;right:0;top:"+c+"px;left:"+h+"px;"+(o||"")),this.session.$bidiHandler.isBidiRow(e.end.row)?((r=e.clone()).start.row=r.end.row,r.start.column=0,this.drawBidiSingleLineMarker(t,r,n+" ace_br12",i,null,o)):(c=this.$getTop(e.end.row,i),this.elt(n+" ace_br12","height:"+l+"px;width:"+e.end.column*i.characterWidth+"px;top:"+c+"px;left:"+s+"px;"+(o||""))),(l=(e.end.row-e.start.row-1)*i.lineHeight)<=0||(c=this.$getTop(e.start.row+1,i),this.elt(n+((a=(e.start.column?1:0)|(e.end.column?0:8))?" ace_br"+a:""),"height:"+l+"px;right:0;top:"+c+"px;left:"+s+"px;"+(o||"")))},this.drawSingleLineMarker=function(t,e,n,i,o,r){if(this.session.$bidiHandler.isBidiRow(e.start.row))return this.drawBidiSingleLineMarker(t,e,n,i,o,r);var a=i.lineHeight,s=(e.end.column+(o||0)-e.start.column)*i.characterWidth,l=this.$getTop(e.start.row,i);this.elt(n,"height:"+a+"px;width:"+s+"px;top:"+l+"px;left:"+(this.$padding+e.start.column*i.characterWidth)+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(t,e,n,i,o,r){var a=i.lineHeight,s=this.$getTop(e.start.row,i),l=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach((function(t){this.elt(n,"height:"+a+"px;width:"+t.width+(o||0)+"px;top:"+s+"px;left:"+(l+t.left)+"px;"+(r||""))}),this)},this.drawFullLineMarker=function(t,e,n,i,o){var r=this.$getTop(e.start.row,i),a=i.lineHeight;e.start.row!=e.end.row&&(a+=this.$getTop(e.end.row,i)-r),this.elt(n,"height:"+a+"px;top:"+r+"px;left:0;right:0;"+(o||""))},this.drawScreenLineMarker=function(t,e,n,i,o){var r=this.$getTop(e.start.row,i);this.elt(n,"height:"+i.lineHeight+"px;top:"+r+"px;left:0;right:0;"+(o||""))}}).call(i.prototype),e.Marker=i})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(t,e,n){"use strict";function i(t){this.dom=r,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)}var o=t("../lib/oop"),r=t("../lib/dom"),a=t("../lib/lang"),s=t("./lines").Lines,l=t("../lib/event_emitter").EventEmitter;(function(){o.implement(this,l),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,e="\n"==t.getNewLineCharacter()&&"windows"!=t.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",(function(t){this._signal("changeCharacterSize",t)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){(this.session=t)&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&("string"==typeof(this.showInvisibles=t)?(this.showSpaces=/tab/i.test(t),this.showTabs=/space/i.test(t),this.showEOL=/eol/i.test(t)):this.showSpaces=this.showTabs=this.showEOL=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e,n,i,o,r,s,l=this.$tabStrings=[0],c=1;c<t+1;c++)this.showTabs?((s=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",s.textContent=a.stringRepeat(this.TAB_CHAR,c),l.push(s)):l.push(this.dom.createTextNode(a.stringRepeat(" ",c),this.element));this.displayIndentGuides&&(this.$indentGuideRe=/\s\S| \t|\t |\s$/,e="ace_indent-guide",n=this.showSpaces?" ace_invisible ace_invisible_space":"",i=a.stringRepeat(this.showSpaces?this.SPACE_CHAR:" ",this.tabSize),o=this.showTabs?" ace_invisible ace_invisible_tab":"",r=this.showTabs?a.stringRepeat(this.TAB_CHAR,this.tabSize):i,(s=this.dom.createElement("span")).className=e+n,s.textContent=i,this.$tabStrings[" "]=s,(s=this.dom.createElement("span")).className=e+o,s.textContent=r,this.$tabStrings["\t"]=s)},this.updateLines=function(t,e,n){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var i=Math.max(e,t.firstRow),o=Math.min(n,t.lastRow),r=this.element.childNodes,a=0,s=t.firstRow;s<i;s++){if(l=this.session.getFoldLine(s)){if(l.containsRow(i)){i=l.start.row;break}s=l.end.row}a++}for(var l,c=!1,h=(l=this.session.getNextFoldLine(s=i))?l.start.row:1/0;h<s&&(h=(l=this.session.getNextFoldLine(s=l.end.row+1,l))?l.start.row:1/0),!(o<s);){var u,d=r[a++];d&&(this.dom.removeChildren(d),this.$renderLine(d,s,s==h&&l),c&&(d.style.top=this.$lines.computeLineTop(s,t,this.session)+"px"),u=t.lineHeight*this.session.getRowLength(s)+"px",d.style.height!=u&&(c=!0,d.style.height=u)),s++}if(c)for(;a<this.$lines.cells.length;){var p=this.$lines.cells[a++];p.element.style.top=this.$lines.computeLineTop(p.row,t,this.session)+"px"}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=t.lastRow;if(!e||(e?e.lastRow:-1)<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);0<i;i--)this.$lines.shift();if(e.lastRow>t.lastRow)for(i=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);0<i;i--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,e.firstRow-1)),t.lastRow>e.lastRow&&this.$lines.push(this.$renderLinesFragment(t,e.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,e,n){for(var i=[],o=e,a=this.session.getNextFoldLine(o),s=a?a.start.row:1/0;s<o&&(s=(a=this.session.getNextFoldLine(o=a.end.row+1,a))?a.start.row:1/0),!(n<o);){var l=this.$lines.createCell(o,t,this.session),c=l.element;this.dom.removeChildren(c),r.setStyle(c.style,"height",this.$lines.computeLineHeight(o,t,this.session)+"px"),r.setStyle(c.style,"top",this.$lines.computeLineTop(o,t,this.session)+"px"),this.$renderLine(c,o,o==s&&a),c.className=this.$useLineGroups()?"ace_line_group":"ace_line",i.push(l),o++}return i},this.update=function(t){this.$lines.moveContainer(t);for(var e=(this.config=t).firstRow,n=t.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(t,e,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,i){for(var o,r,s=this,l=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,c=this.dom.createFragment(this.element),h=0;o=l.exec(i);){var u,d,p,g=o[1],m=o[2],f=o[3],v=o[4],b=o[5];!s.showSpaces&&m||(u=h!=o.index?i.slice(h,o.index):"",h=o.index+o[0].length,u&&c.appendChild(this.dom.createTextNode(u,this.element)),g?(d=s.session.getScreenTabSize(e+o.index),c.appendChild(s.$tabStrings[d].cloneNode(!0)),e+=d-1):m?s.showSpaces?((p=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",p.textContent=a.stringRepeat(s.SPACE_CHAR,m.length),c.appendChild(p)):c.appendChild(this.com.createTextNode(m,this.element)):f?((p=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",p.textContent=a.stringRepeat(s.SPACE_CHAR,f.length),c.appendChild(p)):v?(e+=1,(p=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",p.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",p.textContent=s.showSpaces?s.SPACE_CHAR:v,c.appendChild(p)):b&&(e+=1,(p=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",p.className="ace_cjk",p.textContent=b,c.appendChild(p)))}return c.appendChild(this.dom.createTextNode(h?i.slice(h):i,this.element)),this.$textToken[n.type]?t.appendChild(c):(r="ace_"+n.type.replace(/\./g," ace_"),p=this.dom.createElement("span"),"fold"==n.type&&(p.style.width=n.value.length*this.config.characterWidth+"px"),p.className=r,p.appendChild(c),t.appendChild(p)),e+i.length},this.renderIndentGuide=function(t,e,n){var i=e.search(this.$indentGuideRe);if(i<=0||n<=i)return e;if(" "==e[0]){for(var o=(i-=i%this.tabSize)/this.tabSize,r=0;r<o;r++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return e.substr(i)}if("\t"!=e[0])return e;for(r=0;r<i;r++)t.appendChild(this.$tabStrings["\t"].cloneNode(!0));return e.substr(i)},this.$createLineElement=function(t){var e=this.dom.createElement("div");return e.className="ace_line",e.style.height=this.config.lineHeight+"px",e},this.$renderWrappedLine=function(t,e,n){var i=0,o=0,r=n[0],s=0,l=this.$createLineElement();t.appendChild(l);for(var c=0;c<e.length;c++){var h=e[c],u=h.value;if(0==c&&this.displayIndentGuides){if(i=u.length,!(u=this.renderIndentGuide(l,u,r)))continue;i-=u.length}if(i+u.length<r)s=this.$renderToken(l,s,h,u),i+=u.length;else{for(;i+u.length>=r;)s=this.$renderToken(l,s,h,u.substring(0,r-i)),u=u.substring(r-i),i=r,l=this.$createLineElement(),t.appendChild(l),l.appendChild(this.dom.createTextNode(a.stringRepeat("\xa0",n.indent),this.element)),s=0,r=n[++o]||Number.MAX_VALUE;0!=u.length&&(i+=u.length,s=this.$renderToken(l,s,h,u))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,s,null,"",!0)},this.$renderSimpleLine=function(t,e){var n=0,i=e[0],o=i.value;this.displayIndentGuides&&(o=this.renderIndentGuide(t,o)),o&&(n=this.$renderToken(t,n,i,o));for(var r=1;r<e.length;r++){if(n+(o=(i=e[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,n,i,o);n=this.$renderToken(t,n,i,o)}},this.$renderOverflowMessage=function(t,e,n,i,o){n&&this.$renderToken(t,e,n,i.slice(0,this.MAX_LINE_LENGTH-e));var r=this.dom.createElement("span");r.className="ace_inline_button ace_keyword ace_toggle_wrap",r.textContent=o?"<hide>":"<click to see more...>",t.appendChild(r)},this.$renderLine=function(t,e,n){var i;n||0==n||(n=this.session.getFoldLine(e));var o,r,a=t;(i=n?this.$getFoldLineTokens(e,n):this.session.getTokens(e)).length?(o=this.session.getRowSplitData(e))&&o.length?(this.$renderWrappedLine(t,i,o),a=t.lastChild):(a=t,this.$useLineGroups()&&(a=this.$createLineElement(),t.appendChild(a)),this.$renderSimpleLine(a,i)):this.$useLineGroups()&&(a=this.$createLineElement(),t.appendChild(a)),this.showEOL&&a&&(n&&(e=n.end.row),(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_eol",r.textContent=e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,a.appendChild(r))},this.$getFoldLineTokens=function(t,e){var n=this.session,i=[],o=n.getTokens(t);return e.walk((function(t,e,r,a,s){null!=t?i.push({type:"fold",value:t}):(s&&(o=n.getTokens(e)),o.length&&function(t,e,n){for(var o,r=0,a=0;a+t[r].value.length<e;)if(a+=t[r].value.length,++r==t.length)return;for(a!=e&&((o=t[r].value.substring(e-a)).length>n-e&&(o=o.substring(0,n-e)),i.push({type:t[r].type,value:o}),a=e+o.length,r+=1);a<n&&r<t.length;)(o=t[r].value).length+a>n?i.push({type:t[r].type,value:o.substring(0,n-a)}):i.push(t[r]),a+=o.length,r+=1}(o,a,r))}),e.end.row,this.session.getLine(e.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(i.prototype),e.Text=i})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";function i(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}var o=t("../lib/dom");(function(){this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)o.setStyle(e[n].style,"opacity",t?"":"0")},this.$startCssAnimation=function(){for(var t=this.cursors,e=t.length;e--;)t[e].style.animationDuration=this.blinkInterval+"ms";setTimeout((function(){o.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){o.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t!=this.smoothBlinking&&(this.smoothBlinking=t,o.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var t=o.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(1<this.cursors.length){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t,e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&o.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible?(this.smoothBlinking&&setTimeout((function(){o.addCssClass(this.element,"ace_smooth-blinking")}).bind(this)),o.HAS_CSS_ANIMATION?this.$startCssAnimation():(t=(function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}).bind(this),this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t())):this.$stopCssAnimation()},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t=t||this.session.selection.getCursor();var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(t,e){return 0<=t.top&&t.top<e.maxHeight},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,i=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]),n=0;for(var r=e.length;n<r;n++){var a,s,l=this.getPixelPosition(e[n].cursor,!0);(l.top>t.height+t.offset||l.top<0)&&1<n||(s=(a=this.cursors[i++]||this.addCursor()).style,this.drawCursor?this.drawCursor(a,l,t,e[n],this.session):this.isCursorInView(l,t)?(o.setStyle(s,"display","block"),o.translate(a,l.left,l.top),o.setStyle(s,"width",Math.round(t.characterWidth)+"px"),o.setStyle(s,"height",t.lineHeight+"px")):o.setStyle(s,"display","none"))}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=l,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&((this.overwrite=t)?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),e.Cursor=i})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(t,e,n){"use strict";function i(t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}var o=t("./lib/oop"),r=t("./lib/dom"),a=t("./lib/event"),s=t("./lib/event_emitter").EventEmitter;function l(t,e){i.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=r.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0}function c(t,e){i.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}(function(){o.implement(this,s),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(i.prototype),o.inherits(l,i),(function(){this.classSuffix="-v",this.onScroll=function(){var t;this.skipEvent||(this.scrollTop=this.element.scrollTop,1!=this.coeff&&(this.scrollTop=this.scrollTop*(1-(t=this.element.clientHeight/this.scrollHeight))/(this.coeff-t)),this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){32768<(this.scrollHeight=t)?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}).call(l.prototype),o.inherits(c,i),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}).call(c.prototype),e.ScrollBar=l,e.ScrollBarV=l,e.ScrollBarH=c,e.VScrollBar=l,e.HScrollBar=c})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(t,e,n){"use strict";function i(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=e||window;var n=this;this._flush=function(t){n.pending=!1;var e=n.changes;if(e&&(o.blockIdle(100),n.changes=0,n.onRender(e)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}}var o=t("./lib/event");(function(){this.schedule=function(t){this.changes=this.changes|t,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},this.clear=function(t){var e=this.changes;return this.changes=0,e}}).call(i.prototype),e.RenderLoop=i})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(t,e,n){var i=t("../lib/oop"),o=t("../lib/dom"),r=t("../lib/lang"),a=t("../lib/event"),s=t("../lib/useragent"),l=t("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,h=e.FontMetrics=function(t){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),this.$measureNode.textContent=r.stringRepeat("X",256),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",s.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(t){var e;void 0===t&&(t=this.$measureSizes()),!t||this.$characterSize.width===t.width&&this.$characterSize.height===t.height||(this.$measureNode.style.fontWeight="bold",e=this.$measureSizes(),this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t}))},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver((function(e){t.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=a.onIdle((function e(){t.checkForSizeChanges(),a.onIdle(e,500)}),500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(t){var e={height:(t||this.$measureNode).clientHeight,width:(t||this.$measureNode).clientWidth/256};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.textContent=r.stringRepeat(t,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function t(e){return e&&e.parentElement?(window.getComputedStyle(e).zoom||1)*t(e.parentElement):1},this.$initTransformMeasureNodes=function(){function t(t,e){return["div",{style:"position: absolute;top:"+t+"px;left:"+e+"px;"}]}this.els=o.buildDom([t(0,0),t(200,0),t(0,200),t(200,200)],this.el)},this.transformCoordinates=function(t,e){function n(t,e,n){var i=t[1]*e[0]-t[0]*e[1];return[(-e[1]*n[0]+e[0]*n[1])/i,(t[1]*n[0]-t[0]*n[1])/i]}function i(t,e){return[t[0]-e[0],t[1]-e[1]]}function o(t,e){return[t[0]+e[0],t[1]+e[1]]}function r(t,e){return[t*e[0],t*e[1]]}function a(t){var e=t.getBoundingClientRect();return[e.left,e.top]}t=t&&r(1/this.$getZoom(this.el),t),this.els||this.$initTransformMeasureNodes();var s=a(this.els[0]),l=a(this.els[1]),c=a(this.els[2]),h=a(this.els[3]),u=n(i(h,l),i(h,c),i(o(l,c),o(h,s))),d=r(1+u[0],i(l,s)),p=r(1+u[1],i(c,s));if(e){var g=u[0]*e[0]/200+u[1]*e[1]/200+1,m=o(r(e[0],d),r(e[1],p));return o(r(1/g/200,m),s)}var f=i(t,s),v=n(i(d,r(u[0],f)),i(p,r(u[1],f)),f);return r(200,v)}}).call(h.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./lib/oop"),o=t("./lib/dom"),r=t("./config"),a=t("./layer/gutter").Gutter,s=t("./layer/marker").Marker,l=t("./layer/text").Text,c=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,u=t("./scrollbar").VScrollBar,d=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,g=t("./lib/event_emitter").EventEmitter,m='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',f=t("./lib/useragent"),v=f.isIE;function b(t,e){var n=this;this.container=t||o.createElement("div"),o.addCssClass(this.container,"ace_editor"),o.HI_DPI&&o.addCssClass(this.container,"ace_hidpi"),this.setTheme(e),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new s(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new u(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!f.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._signal("renderer",this)}o.importCssString(m,"ace_editor.css"),(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),o.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),(this.session=t)&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,i){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=t?1:0;var o=this.container,r=this.$updateCachedSize(t,e,n=n||o.clientWidth||o.scrollWidth,i=i||o.clientHeight||o.scrollHeight);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,i){var r,a=0,s=this.$size,l={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};return(i-=this.$extraHeight||0)&&(t||s.height!=i)&&(s.height=i,a|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",a|=this.CHANGE_SCROLL),n&&(t||s.width!=n)&&(a|=this.CHANGE_SIZE,s.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,o.setStyle(this.scrollBarH.element.style,"left",e+"px"),o.setStyle(this.scroller.style,"left",e+this.margin.left+"px"),s.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()-this.margin.h),o.setStyle(this.$gutter.style,"left",this.margin.left+"px"),r=this.scrollBarV.getWidth()+"px",o.setStyle(this.scrollBarH.element.style,"right",r),o.setStyle(this.scroller.style,"right",r),o.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(a|=this.CHANGE_FULL)),s.$dirty=!n||!i,a&&this._signal("resize",l),a},this.onGutterResize=function(t){var e=this.$showGutter?t:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var t=Math.floor((this.$size.scrollerWidth-2*this.$padding)/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){var t,e;(this.$showPrintMargin||this.$printMarginEl)&&(this.$printMarginEl||((t=o.createElement("div")).className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)),(e=this.$printMarginEl.style).left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit())},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){var t,e,n,i,r,a,s,l,c;this.$isMousePressed||(t=this.textarea.style,e=this.$composition,this.$keepTextAreaAtCursor||e?(n=this.$cursorLayer.$pixelPos)&&(e&&e.markerRange&&(n=this.$cursorLayer.getPixelPosition(e.markerRange.start,!0)),r=n.top,a=n.left,s=e&&e.useTextareaForIME?this.lineHeight:v?0:1,(r-=(i=this.layerConfig).offset)<0||r>i.height-s?o.translate(this.textarea,0,0):(c=1,l=this.$size.height-s,e?e.useTextareaForIME?c=this.characterWidth*this.session.$getStringScreenWidth(this.textarea.value)[0]:r+=this.lineHeight+2:r+=this.lineHeight,(a-=this.scrollLeft)>this.$size.scrollerWidth-c&&(a=this.$size.scrollerWidth-c),a+=this.gutterWidth+this.margin.left,o.setStyle(t,"height",s+"px"),o.setStyle(t,"width",c+"px"),o.translate(this.textarea,Math.min(a,this.$size.scrollerWidth-c),Math.min(r,l)))):o.translate(this.textarea,-100,0))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,i){var o=this.scrollMargin;o.top=0|t,o.bottom=0|e,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.setMargin=function(t,e,n,i){var o=this.margin;o.top=0|t,o.bottom=0|e,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>(t-=(e-this.lineHeight)*this.$scrollPastEnd)-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(t||e)){if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",t),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n,i,r=this.layerConfig;if((t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL)&&(t|=this.$computeLayerConfig()|this.$loop.clear(),r.firstRow==this.layerConfig.firstRow||r.firstRowScreen!=this.layerConfig.firstRowScreen||0<(n=this.scrollTop+(r.firstRow-this.layerConfig.firstRow)*this.lineHeight)&&(this.scrollTop=n,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig()|this.$loop.clear()),r=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),o.translate(this.content,-this.scrollLeft,-r.offset),i=r.minHeight+"px",o.setStyle(this.content.style,"width",r.width+2*this.$padding+"px"),o.setStyle(this.content.style,"height",i)),t&this.CHANGE_H_SCROLL&&(o.translate(this.content,-this.scrollLeft,-r.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(r),this.$showGutter&&this.$gutterLayer.update(r),this.$markerBack.update(r),this.$markerFront.update(r),this.$cursorLayer.update(r),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);if(t&this.CHANGE_SCROLL)return this.$changedLines=null,t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(r):this.$textLayer.scrollLines(r),this.$showGutter&&(t&this.CHANGE_GUTTER||t&this.CHANGE_LINES?this.$gutterLayer.update(r):this.$gutterLayer.scrollLines(r)),this.$markerBack.update(r),this.$markerFront.update(r),this.$cursorLayer.update(r),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);t&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(r),this.$showGutter&&this.$gutterLayer.update(r)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(r):t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(r):t&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(r),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(r),this.$moveTextAreaToCursor()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(r),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(r),this._signal("afterRender",t)}else this.$changes|=t},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i,o=!(n<=2*this.lineHeight)&&e<t;n==this.desiredHeight&&this.$size.height==this.desiredHeight&&o==this.$vScroll||(o!=this.$vScroll&&(this.$vScroll=o,this.scrollBarV.setVisible(o)),i=this.container.clientWidth,this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize"))},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,o=this.$getLongestLine(),r=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==r;a&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var s=this.$vScroll;this.$maxLines&&1<this.lineHeight&&this.$autosize();var l=e.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var h=this.scrollMargin;this.session.setScrollTop(Math.max(-h.top,Math.min(this.scrollTop,i-e.scrollerHeight+h.bottom))),this.session.setScrollLeft(Math.max(-h.left,Math.min(this.scrollLeft,o+2*this.$padding-e.scrollerWidth+h.right)));var u=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-i+c<0||this.scrollTop>h.top),d=s!==u;d&&(this.$vScroll=u,this.scrollBarV.setVisible(u));var p,g,m=this.scrollTop%this.lineHeight,f=Math.ceil(l/this.lineHeight)-1,v=(y=Math.max(0,Math.round((this.scrollTop-m)/this.lineHeight)))+f,b=this.lineHeight,y=t.screenToDocumentRow(y,0),_=t.getFoldLine(y);_&&(y=_.start.row),p=t.documentToScreenRow(y,0),g=t.getRowLength(y)*b,v=Math.min(t.screenToDocumentRow(v,0),t.getLength()-1),l=e.scrollerHeight+t.getRowLength(v)*b+g,m=this.scrollTop-p*b;var C=0;return this.layerConfig.width==o&&!a||(C=this.CHANGE_H_SCROLL),(a||d)&&(C|=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),d&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:p,lastRow:v,lineHeight:b,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:m,gutterOffset:b?Math.max(0,Math.ceil((m+e.height-e.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(o-this.$padding),C},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1||e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),this.$textLayer&&t>this.$textLayer.MAX_LINE_LENGTH&&(t=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){var i,o,r,a,s,l,c;0!==this.$size.scrollerHeight&&(o=(i=this.$cursorLayer.getPixelPosition(t)).left,a=n&&n.top||0,s=n&&n.bottom||0,(r=i.top)<(l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop)+a?(e&&l+a>r+this.lineHeight&&(r-=e*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):l+this.$size.scrollerHeight-s<r+this.lineHeight&&(e&&l+this.$size.scrollerHeight-s<r-this.lineHeight&&(r+=e*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+s-this.$size.scrollerHeight)),o<(c=this.scrollLeft)?(o<this.$padding+2*this.layerConfig.characterWidth&&(o=-this.scrollMargin.left),this.session.setScrollLeft(o)):c+this.$size.scrollerWidth<o+this.characterWidth?this.session.setScrollLeft(Math.round(o+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&o-c<this.characterWidth&&this.session.setScrollLeft(0))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t).top-(this.$size.scrollerHeight-this.lineHeight)*(e||0);return this.session.setScrollTop(n),n},this.STEPS=8,this.$calcSteps=function(t,e){var n,i=0,o=this.STEPS,r=[];for(i=0;i<o;++i)r.push((e-(n=t))*(Math.pow(i/this.STEPS-1,3)+1)+n);return r},this.scrollToLine=function(t,e,n,i){var o=this.$cursorLayer.getPixelPosition({row:t,column:0}).top;e&&(o-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(r,i)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(t!=n){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(t=o[0])==n)return}var r=i.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:r},clearInterval(this.$timer),i.session.setScrollTop(r.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){return i.session?void(r.length?(i.session.setScrollTop(r.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,e&&e())):clearInterval(i.$timer)}),10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||0<e&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||0<t&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(t,e){var n,i;this.$hasCssTransforms?(n={top:0,left:0},t=(i=this.$fontMetrics.transformCoordinates([t,e]))[1]-this.gutterWidth-this.margin.left,e=i[0]):n=this.scroller.getBoundingClientRect();var o=t+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,a=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),s=this.$blockCursor?Math.floor(r):Math.round(r);return{row:a,column:s,side:0<r-s?1:-1,offsetX:o}},this.screenToTextCoordinates=function(t,e){var n,i;this.$hasCssTransforms?(n={top:0,left:0},t=(i=this.$fontMetrics.transformCoordinates([t,e]))[1]-this.gutterWidth-this.margin.left,e=i[0]):n=this.scroller.getBoundingClientRect();var o=t+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,a=this.$blockCursor?Math.floor(r):Math.round(r),s=Math.floor((e+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(s,Math.max(a,0),o)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(t,e),o=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,t)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth));return{pageX:n.left+o-this.scrollLeft,pageY:n.top+i.row*this.lineHeight-this.scrollTop}},this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){(this.$composition=t).cssText||(t.cssText=this.textarea.style.cssText),null==t.useTextareaForIME&&(t.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):t.markerId=this.session.addMarker(t.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(t){var e=this.session.selection.cursor;this.addToken(t,"composition_placeholder",e.row,e.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){var t;this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),o.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.removeExtraToken((t=this.session.selection.cursor).row,t.column),this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(t,e,n,i){var o=this.session;o.bgTokenizer.lines[n]=null;var r={type:e,value:t},a=o.getTokens(n);if(null==i)a.push(r);else for(var s=0,l=0;l<a.length;l++){var c=a[l];if(i<=(s+=c.value.length)){var h=c.value.length-(s-i),u=c.value.slice(0,h),d=c.value.slice(h);a.splice(l,1,{type:c.type,value:u},r,{type:c.type,value:d});break}}this.updateLines(n,n)},this.removeExtraToken=function(t,e){this.updateLines(t,t)},this.setTheme=function(t,e){var n=this;function i(i){if(n.$themeId!=t)return e&&e();if(!i||!i.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");i.$id&&(n.$themeId=i.$id),o.importCssString(i.cssText,i.cssClass,n.container),n.theme&&o.removeCssClass(n.container,n.theme.cssClass);var r="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&r!=n.$padding&&n.setPadding(r),n.$theme=i.cssClass,n.theme=i,o.addCssClass(n.container,i.cssClass),o.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),e&&e()}this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t?i(t):r.loadModule(["theme",t||this.$options.theme.initialValue],i)},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){o.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){o.removeCssClass(this.container,t)},this.setCursorStyle=function(t){o.setStyle(this.scroller.style,"cursor",t)},this.setMouseCursor=function(t){o.setStyle(this.scroller.style,"cursor",t)},this.attachToShadowRoot=function(){o.importCssString(m,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(b.prototype),r.defineOptions(b.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){this.$gutterLayer.setHighlightGutterLine(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){this.$scrollPastEnd!=(t=+t||0)&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!f.isMobile&&!f.isIE}}),e.VirtualRenderer=b})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(t,e,n){"use strict";var i=t("../lib/oop"),o=t("../lib/net"),r=t("../lib/event_emitter").EventEmitter,a=t("../config");function s(t){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var e=function(t){var e="importScripts('"+o.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(t){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(e),n.getBlob("application/javascript")}}(t),n=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(n)}return new Worker(t)}function l(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage}(function(){i.implement(this,r),this.$createWorkerFromOldConfig=function(e,n,i,o,r){var l,c;return t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl?o=o||a.moduleUrl(n,"worker"):(l=this.$normalizePath,o=o||l(t.toUrl("ace/worker/worker.js",null,"_")),c={},e.forEach((function(e){c[e]=l(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))),this.$worker=s(o),r&&this.send("importScripts",r),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:i}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return o.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){var i;n&&(i=this.callbackId++,this.callbacks[i]=n,e.push(i)),this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker.postMessage({event:t,data:{data:e.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),this.deltaQueue.push(t.start,"insert"==t.action?t.lines:t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,50<t.length&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(l.prototype),e.UIWorkerClient=function(t,e,n){var i=null,o=!1,s=Object.create(r),c=[],h=new l({messageBuffer:c,terminate:function(){},postMessage:function(t){c.push(t),i&&(o?setTimeout(u):u())}});h.setEmitSync=function(t){o=t};var u=function(){var t=c.shift();t.command?i[t.command].apply(i,t.args):t.event&&s._signal(t.event,t.data)};return s.postMessage=function(t){h.onMessage({data:t})},s.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},s.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],(function(t){for(i=new t[n](s);c.length;)u()})),h},e.WorkerClient=l,e.createWorker=s})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(t,e,n){"use strict";function i(t,e,n,i,o,r){var a=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){a.onCursorChange()}))},this.$pos=n;var s=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)}var o=t("./range").Range,r=t("./lib/event_emitter").EventEmitter,a=t("./lib/oop");(function(){a.implement(this,r),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new o(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=e.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),t.others.push(i)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){var t,e;this.othersActive||(t=this.session,(e=this).othersActive=!0,this.others.forEach((function(n){n.markerId=t.addMarker(new o(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)})))},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,i=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,r=e.start.column-this.pos.column;if(this.updateAnchors(t),i&&(this.length+=n),i&&!this.session.$fromUndo)if("insert"===t.action)for(var a=this.others.length-1;0<=a;a--){var s={row:(l=this.others[a]).row,column:l.column+r};this.doc.insertMergedLines(s,t.lines)}else if("remove"===t.action)for(a=this.others.length-1;0<=a;a--){var l;s={row:(l=this.others[a]).row,column:l.column+r},this.doc.remove(new o(s.row,s.column,s.row,s.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new o(n.row,n.column,n.row,n.column+t.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)}},this.onCursorChange=function(t){var e;!this.$updating&&this.session&&((e=this.session.selection.getCursor()).row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t)))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(i.prototype),e.PlaceHolder=i})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){var i=t("../lib/event"),o=t("../lib/useragent");function r(t,e){return t.row==e.row&&t.column==e.column}e.onMouseDown=function(t){var e=t.domEvent,n=e.altKey,a=e.shiftKey,s=e.ctrlKey,l=t.getAccelKey(),c=t.getButton();if(s&&o.isMac&&(c=e.button),t.editor.inMultiSelectMode&&2==c)t.editor.textInput.onContextMenu(t.domEvent);else if(s||n||l){if(0===c){var h,u,d,p=t.editor,g=p.selection,m=p.inMultiSelectMode,f=t.getDocumentPosition(),v=g.getCursor(),b=t.inSelection()||g.isEmpty()&&r(f,v),y=t.x,_=t.y,C=p.session,x=p.renderer.pixelToScreenCoordinates(y,_),w=x;if(p.$mouseHandler.$enableJumpToDef)s&&n||l&&n?h=a?"block":"add":n&&p.$blockSelectEnabled&&(h="block");else if(l&&!n){if(h="add",!m&&a)return}else n&&p.$blockSelectEnabled&&(h="block");if(h&&o.isMac&&e.ctrlKey&&p.$mouseHandler.cancelContextMenu(),"add"==h){if(!m&&b)return;m||(u=g.toOrientedRange(),p.addSelectionMarker(u));var I=g.rangeList.rangeAtPoint(f);p.inVirtualSelectionMode=!0,a&&(I=null,p.removeSelectionMarker(u=g.ranges[0]||u)),p.once("mouseup",(function(){var t=g.toOrientedRange();I&&t.isEmpty()&&r(I.cursor,t.cursor)?g.substractPoint(t.cursor):(a?g.substractPoint(u.cursor):u&&(p.removeSelectionMarker(u),g.addRange(u)),g.addRange(t)),p.inVirtualSelectionMode=!1}))}else if("block"==h){var A=function(){var t=p.renderer.pixelToScreenCoordinates(y,_),e=C.screenToDocumentPosition(t.row,t.column,t.offsetX);r(w,t)&&r(e,g.lead)||(w=t,p.selection.moveToPosition(e),p.renderer.scrollCursorIntoView(),p.removeSelectionMarkers(P),P=g.rectangularRangeBlock(w,x),p.$mouseHandler.$clickSelection&&1==P.length&&P[0].isEmpty()&&(P[0]=p.$mouseHandler.$clickSelection.clone()),P.forEach(p.addSelectionMarker,p),p.updateSelectionMarkers())};t.stop(),p.inVirtualSelectionMode=!0;var P=[];m&&!l?g.toSingleRange():!m&&l&&(d=g.toOrientedRange(),p.addSelectionMarker(d)),a?x=C.documentToScreenPosition(g.lead):g.moveToPosition(f),w={row:-1,column:-1};var O=A;i.capture(p.container,(function(t){y=t.clientX,_=t.clientY}),(function(t){A(),clearInterval(M),p.removeSelectionMarkers(P),P.length||(P=[g.toOrientedRange()]),d&&(p.removeSelectionMarker(d),g.toSingleRange(d));for(var e=0;e<P.length;e++)g.addRange(P[e]);p.inVirtualSelectionMode=!1,p.$mouseHandler.$clickSelection=null}));var M=setInterval((function(){O()}),20);return t.preventDefault()}}}else 0===c&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(t){1<t.multiSelect.rangeCount?t.multiSelect.joinSelections():t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var i=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new i(e.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(t,e,n){var i=t("./range_list").RangeList,o=t("./range").Range,r=t("./selection").Selection,a=t("./mouse/multi_select_handler").onMouseDown,s=t("./lib/event"),l=t("./lib/lang"),c=t("./commands/multi_select_commands");e.commands=c.defaultCommands.concat(c.multiSelectCommands);var h=new(t("./search").Search),u=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(u.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var i=this.rangeList.add(t);return this.$onAddRange(t),i.length&&this.$onRemoveRange(i),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length&&this.$onRemoveRange(t)},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){var e;this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode&&(e=this.rangeList.ranges.pop(),t.push(e),this.rangeCount=0);for(var n=t.length;n--;){var i=this.ranges.indexOf(t[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var t=this.ranges.length?this.ranges:[this.getRange()],e=[],n=0;n<t.length;n++){var i=t[n],r=i.start.row,a=i.end.row;if(r===a)e.push(i.clone());else{for(e.push(new o(r,i.start.column,r,this.session.getLine(r).length));++r<a;)e.push(this.getLineRange(r,!0));e.push(new o(a,0,a,i.end.column))}0!=n||this.isBackwards()||(e=e.reverse())}for(this.toSingleRange(),n=e.length;n--;)this.addRange(e[n])},this.joinSelections=function(){var t=this.rangeList.ranges,e=t[t.length-1],n=o.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)},this.toggleBlockSelection=function(){var t,e,n,i,r;1<this.rangeCount?(e=(t=this.rangeList.ranges)[t.length-1],n=o.fromPoints(t[0].start,e.end),this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)):(i=this.session.documentToScreenPosition(this.cursor),r=this.session.documentToScreenPosition(this.anchor),this.rectangularRangeBlock(i,r).forEach(this.addRange,this))},this.rectangularRangeBlock=function(t,e,n){var i,r,a,s,l=[],c=t.column<e.column;s=c?(i=t.column,r=e.column,a=t.offsetX,e.offsetX):(i=e.column,r=t.column,a=e.offsetX,t.offsetX);var h,u,d,p=t.row<e.row;u=p?(h=t.row,e.row):(h=e.row,t.row),i<0&&(i=0),h<0&&(h=0),h==u&&(n=!0);for(var g,m,f=h;f<=u;f++){var v=o.fromPoints(this.session.screenToDocumentPosition(f,i,a),this.session.screenToDocumentPosition(f,r,s));if(v.isEmpty()){if(d&&(g=v.end).row==(m=d).row&&g.column==m.column)break;d=v.end}v.cursor=c?v.start:v.end,l.push(v)}if(p&&l.reverse(),!n){for(var b=l.length-1;l[b].isEmpty()&&0<b;)b--;if(0<b)for(var y=0;l[y].isEmpty();)y++;for(var _=b;y<=_;_--)l[_].isEmpty()&&l.splice(_,1)}return l}}).call(r.prototype);var d=t("./editor").Editor;function p(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",a),t.commands.addCommands(c.defaultCommands),function(t){if(t.textInput){var e=t.textInput.getElement(),n=!1;s.addListener(e,"keydown",(function(e){t.$blockSelectEnabled&&18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey)?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&i()}),t),s.addListener(e,"keyup",i,t),s.addListener(e,"blur",i,t)}function i(e){n&&(t.renderer.setMouseCursor(""),n=!1)}}(t))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){var e;t.marker&&(this.session.removeMarker(t.marker),-1!=(e=this.session.$selectionMarkers.indexOf(t))&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length)},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var i,o=t[n];o.marker&&(this.session.removeMarker(o.marker),-1!=(i=e.indexOf(o))&&e.splice(i,1))}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e,n=t.command,i=t.editor;if(i.multiSelect)return n.multiSelectAction?e="forEach"==n.multiSelectAction?i.forEachSelection(n,t.args):"forEachLine"==n.multiSelectAction?i.forEachSelection(n,t.args,!0):"single"==n.multiSelectAction?(i.exitMultiSelectMode(),n.exec(i,t.args||{})):n.multiSelectAction(i,t.args||{}):(e=n.exec(i,t.args||{}),i.multiSelect.addRange(i.multiSelect.toOrientedRange()),i.multiSelect.mergeOverlappingRanges()),e},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var i,o=1==n||n&&n.$byLines,a=this.session,s=this.selection,l=(n&&n.keepOrder?s:s.rangeList).ranges;if(!l.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var c=s._eventRegistry;s._eventRegistry={};var h=new r(a);this.inVirtualSelectionMode=!0;for(var u=l.length;u--;){if(o)for(;0<u&&l[u].start.row==l[u-1].end.row;)u--;h.fromOrientedRange(l[u]),h.index=u,this.selection=a.selection=h;var d=t.exec?t.exec(this,e||{}):t(this,e||{});i||void 0===d||(i=d),h.toOrientedRange(l[u])}h.detach(),this.selection=a.selection=s,this.inVirtualSelectionMode=!1,s._eventRegistry=c,s.mergeOverlappingRanges(),s.ranges[0]&&s.fromOrientedRange(s.ranges[0]);var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],i=0;i<e.length;i++)n.push(this.session.getTextRange(e[i]));var o=this.session.getDocument().getNewLineCharacter();(t=n.join(o)).length==(n.length-1)*o.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var i=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=e.row||this.session.$clipPositionToDocument(i.row,i.column).column!=e.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(t,e,n){var i;(e=e||{}).needle=t||e.needle,null==e.needle&&(i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange(),e.needle=this.session.getTextRange(i)),this.$search.set(e);var o=this.$search.findAll(this.session);if(!o.length)return 0;var r=this.multiSelect;n||r.toSingleRange(o[0]);for(var a=o.length;a--;)r.addRange(o[a],!0);return i&&r.rangeList.rangeAtPoint(i.start)&&r.addRange(i,!0),o.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var a,s,l,c,h=this.session.screenToDocumentPosition(r.row+t,r.column);s=n.isEmpty()?h:(a=this.session.documentToScreenPosition(i?n.end:n.start),this.session.screenToDocumentPosition(a.row+t,a.column)),i?(l=o.fromPoints(h,s)).cursor=l.start:(l=o.fromPoints(s,h)).cursor=l.end,l.desiredColumn=r.column,this.selection.inMultiSelectMode?e&&(c=n.cursor):this.selection.addRange(n),this.selection.addRange(l),c&&this.selection.substractPoint(c)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,i=n.ranges,o=i.length;o--;)(a=i[o]).isEmpty()&&(s=e.getWordRange(a.start.row,a.start.column),a.start.row=s.start.row,a.start.column=s.start.column,a.end.row=s.end.row,a.end.column=s.end.column);n.mergeOverlappingRanges();var r=[];for(o=i.length;o--;){var a=i[o];r.unshift(e.getTextRange(a))}for(t<0?r.unshift(r.pop()):r.push(r.shift()),o=i.length;o--;){var s=(a=i[o]).clone();e.replace(a,r[o]),a.start.row=s.start.row,a.start.column=s.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(t,e,n){var i,o,r,a,s,l=this.session,c=l.multiSelect.toOrientedRange();c.isEmpty()&&((c=l.getWordRange(c.start.row,c.start.column)).cursor=-1==t?c.start:c.end,this.multiSelect.addRange(c),n)||(i=l.getTextRange(c),r=l,a=i,s=t,h.$options.wrap=!0,h.$options.needle=a,h.$options.backwards=-1==s,(o=h.find(r))&&(o.cursor=-1==t?o.start:o.end,this.session.unfold(o),this.multiSelect.addRange(o),this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(c.cursor))},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,i=-1,r=n.filter((function(t){return t.cursor.row==i||void(i=t.cursor.row)}));if(n.length&&r.length!=n.length-1){r.forEach((function(t){e.substractPoint(t.cursor)}));var a=0,s=1/0,c=n.map((function(e){var n=e.cursor,i=t.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>a&&(a=n.column),i<s&&(s=i),i}));n.forEach((function(e,n){var i=e.cursor,r=a-i.column,h=c[n]-s;h<r?t.insert(i,l.stringRepeat(" ",r-h)):t.remove(new o(i.row,i.column,i.row,i.column-r+h)),e.start.column=e.end.column=a,e.start.row=e.end.row=i.row,e.cursor=e.end})),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var h=this.selection.getRange(),u=h.start.row,d=h.end.row,p=u==d;if(p){for(var g,m=this.session.getLength();g=this.session.getLine(d),/[=:]/.test(g)&&++d<m;);for(;g=this.session.getLine(u),/[=:]/.test(g)&&0<--u;);u<0&&(u=0),m<=d&&(d=m-1)}var f=this.session.removeFullLines(u,d);f=this.$reAlignText(f,p),this.session.insert({row:u,column:0},f.join("\n")+"\n"),p||(h.start.column=0,h.end.column=f[f.length-1].length),this.selection.setRange(h)}},this.$reAlignText=function(t,e){var n,i,o,r=!0,a=!0;return t.map((function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?(null==n?(n=e[1].length,i=e[2].length,o=e[3].length):(n+i+o!=e[1].length+e[2].length+e[3].length&&(a=!1),n!=e[1].length&&(r=!1),n>e[1].length&&(n=e[1].length),i<e[2].length&&(i=e[2].length),o>e[3].length&&(o=e[3].length)),e):[t]})).map(e?c:r?a?function(t){return t[2]?s(n+i-t[2].length)+t[2]+s(o)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}:c:function(t){return t[2]?s(n)+t[2]+s(o)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]});function s(t){return l.stringRepeat(" ",t)}function c(t){return t[2]?s(n)+t[2]+s(i-t[2].length+o)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}}}).call(d.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=p,t("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(t){p(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",a)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",a))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../../range").Range,o=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var o=/\S/,r=t.getLine(e),a=r.search(o);if(-1!=a){for(var s=n||r.length,l=t.getLength(),c=e,h=e;++e<l;){var u=t.getLine(e).search(o);if(-1!=u){if(u<=a){var d=t.getTokenAt(e,0);if(!d||"string"!==d.type)break}h=e}}if(c<h){var p=t.getLine(h).length;return new i(c,s,h,p)}}},this.openingBracketBlock=function(t,e,n,o,r){var a={row:n,column:o+1},s=t.$findClosingBracket(e,a,r);if(s){var l=t.foldWidgets[s.row];return null==l&&(l=t.getFoldWidget(s.row)),"start"==l&&s.row>a.row&&(s.row--,s.column=t.getLine(s.row).length),i.fromPoints(a,s)}},this.closingBracketBlock=function(t,e,n,o,r){var a={row:n,column:o},s=t.$findOpeningBracket(e,a);if(s)return s.column++,a.column--,i.fromPoints(s,a)}}).call(o.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e.$id="ace/theme/textmate",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./lib/dom");function o(t){this.session=t,(this.session.widgetManager=this).session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(t){var e=this.lineWidgets&&this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach((function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)})),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),(this.editor=t)&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e,n=this.editor;n&&(this.editor=null,n.widgetManager=null,n.renderer.off("beforeRender",this.measureWidgets),n.renderer.off("afterRender",this.renderWidgets),(e=this.session.lineWidgets)&&e.forEach((function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})))},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var i=t.data,o=i.start.row,r=i.end.row,a="add"==t.action,s=o+1;s<r;s++)n[s]&&(n[s].hidden=a);n[r]&&(a?n[o]?n[r].hidden=a:n[o]=n[r]:(n[o]==n[r]&&(n[o]=void 0),n[r].hidden=a))}},this.updateOnChange=function(t){var e,n,i,o,r=this.session.lineWidgets;r&&(0==(n=t.end.row-(e=t.start.row))||("remove"==t.action?(i=r.splice(e+1,n),!r[e]&&i[i.length-1]&&(r[e]=i.pop()),i.forEach((function(t){t&&this.removeLineWidget(t)}),this)):(o=new Array(n),r[e]&&null!=r[e].column&&t.start.column>r[e].column&&e++,o.unshift(e,0),r.splice.apply(r,o)),this.$updateRows()))},this.$updateRows=function(){var t,e=this.session.lineWidgets;e&&(t=!0,e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null))},this.$registerLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];return e&&(t.$oldWidget=e).el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1),this.session.lineWidgets[t.row]=t},this.addLineWidget=function(t){if(this.$registerLineWidget(t),t.session=this.session,!this.editor)return t;var e=this.editor.renderer;t.html&&!t.el&&(t.el=i.createElement("div"),t.el.innerHTML=t.html),t.el&&(i.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,e.container.appendChild(t.el),t._inDocument=!0,t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight)),null==t.rowCount&&(t.rowCount=t.pixelHeight/e.layerConfig.lineHeight);var n,o=this.session.getFoldAt(t.row,0);return(t.$fold=o)&&(n=this.session.lineWidgets,t.row!=o.end.row||n[o.start.row]?t.hidden=!0:n[o.start.row]=t),this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,e),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,i=e.layerConfig;if(n&&n.length){for(var o=1/0,r=0;r<n.length;r++){var a=n[r];if(a&&a.el&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,e.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/i.characterWidth));var s=a.h/i.lineHeight;a.coverLine&&(s-=this.session.getRowLineCount(a.row))<0&&(s=0),a.rowCount!=s&&(a.rowCount=s,a.row<o&&(o=a.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,i=this.session.lineWidgets;if(i){for(var o=Math.min(this.firstRow,n.firstRow),r=Math.max(this.lastRow,n.lastRow,i.length);0<o&&!i[o];)o--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var a=o;a<=r;a++){var s,l,c=i[a];c&&c.el&&(c.hidden?c.el.style.top=-100-(c.pixelHeight||0)+"px":(c._inDocument||(c._inDocument=!0,e.container.appendChild(c.el)),s=e.$cursorLayer.getPixelPosition({row:a,column:0},!0).top,c.coverLine||(s+=n.lineHeight*this.session.getRowLineCount(c.row)),c.el.style.top=s-n.offset+"px",l=c.coverGutter?0:e.gutterWidth,c.fixedWidth||(l-=e.scrollLeft),c.el.style.left=l+"px",c.fullWidth&&c.screenWidth&&(c.el.style.minWidth=n.width+2*n.padding+"px"),c.el.style.right=c.fixedWidth?e.scrollBar.getWidth()+"px":""))}}}}).call(o.prototype),e.LineWidgets=o})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(t,e,n){"use strict";var i=t("../line_widgets").LineWidgets,o=t("../lib/dom"),r=t("../range").Range;function a(t,e,n){var i=t.getAnnotations().sort(r.comparePoints);if(i.length){var o=function(t,e,n){for(var i=0,o=t.length-1;i<=o;){var r=i+o>>1,a=n(e,t[r]);if(0<a)i=1+r;else{if(!(a<0))return r;o=r-1}}return-(i+1)}(i,{row:e,column:-1},r.comparePoints);o<0&&(o=-o-1),o>=i.length?o=0<n?0:i.length-1:0===o&&n<0&&(o=i.length-1);var a=i[o];if(a&&n){if(a.row===e){for(;(a=i[o+=n])&&a.row===e;);if(!a)return i.slice()}var s=[];for(e=a.row;s[n<0?"unshift":"push"](a),(a=i[o+=n])&&a.row==e;);return s.length&&s}}}e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(t));var r=t.getCursorPosition(),s=r.row,l=n.widgetManager.getWidgetsAtRow(s).filter((function(t){return"errorMarker"==t.type}))[0];l?l.destroy():s-=e;var c,h=a(n,s,e);if(h){var u=h[0];r.column=(u.pos&&"number"!=typeof u.column?u.pos.sc:u.column)||0,r.row=u.row,c=t.renderer.$gutterLayer.$annotations[r.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(r.row),t.selection.moveToPosition(r);var d={row:r.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},p=d.el.appendChild(o.createElement("div")),g=d.el.appendChild(o.createElement("div"));g.className="error_widget_arrow "+c.className;var m=t.renderer.$cursorLayer.getPixelPosition(r).left;function f(t,e,n){if(0===e&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}}g.style.left=m+t.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",p.className="error_widget "+c.className,p.innerHTML=c.text.join("<br>"),p.appendChild(o.createElement("div")),d.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(f),n.widgetManager.removeLineWidget(d),t.off("changeSelection",d.destroy),t.off("changeSession",d.destroy),t.off("mouseup",d.destroy),t.off("change",d.destroy))},t.keyBinding.addKeyboardHandler(f),t.on("changeSelection",d.destroy),t.on("changeSession",d.destroy),t.on("mouseup",d.destroy),t.on("change",d.destroy),t.session.widgetManager.addLineWidget(d),d.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},o.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var o=t("./lib/dom"),r=t("./lib/event"),a=t("./range").Range,s=t("./editor").Editor,l=t("./edit_session").EditSession,c=t("./undomanager").UndoManager,h=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.require=t,e.define=n(23),e.edit=function(t,n){if("string"==typeof t){var i=t;if(!(t=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(t&&t.env&&t.env.editor instanceof s)return t.env.editor;var a,l="";t&&/input|textarea/i.test(t.tagName)?(l=(a=t).value,t=o.createElement("pre"),a.parentNode.replaceChild(t,a)):t&&(l=t.textContent,t.innerHTML="");var c=e.createEditSession(l),u=new s(new h(t),c,n),d={document:c,editor:u,onResize:u.resize.bind(u,null)};return a&&(d.textarea=a),r.addListener(window,"resize",d.onResize),u.on("destroy",(function(){r.removeListener(window,"resize",d.onResize),d.editor.container.env=null})),u.container.env=u.env=d,u},e.createEditSession=function(t,e){var n=new l(t,e);return n.setUndoManager(new c),n},e.Range=a,e.Editor=s,e.EditSession=l,e.UndoManager=c,e.VirtualRenderer=h,e.version=e.config.version})),ace.require(["ace/ace"],(function(e){for(var n in e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e),e)e.hasOwnProperty(n)&&(window.ace[n]=e[n]);window.ace.default=window.ace,t&&(t.exports=window.ace)}))}).call(this,n(16)(t))},function(t,e,n){(function(t){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,n){"use strict";function i(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}}var o=t("../lib/oop"),r=t("./text_highlight_rules").TextHighlightRules;o.inherits(i,r),e.JsonHighlightRules=i})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(t,e,n){"use strict";function i(){}var o=t("../range").Range;(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e).match(/^(\s*\})/);if(!n)return 0;var i=n[1].length,r=t.findMatchingBracket({row:e,column:i});if(!r||r.row==e)return 0;var a=this.$getIndent(t.getLine(r.row));t.replace(new o(e,0,e,i-1),a)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(i.prototype),e.MatchingBraceOutdent=i})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(t,e,n){"use strict";var i=t("../../lib/oop"),o=t("../../range").Range,r=t("./fold_mode").FoldMode,a=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};i.inherits(a,r),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var o=this._getFoldWidgetBase(t,e,n);return!o&&this.startRegionRe.test(i)?"start":o},this.getFoldWidgetRange=function(t,e,n,i){var o=t.getLine(n);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(t,o,n);var r=o.match(this.foldingStartMarker);if(r){var a=r.index;if(r[1])return this.openingBracketBlock(t,r[1],n,a);var s=t.getCommentFoldRange(n,a+r[0].length,1);return s&&!s.isMultiLine()&&(i?s=this.getSectionRange(t,n):"all"!=e&&(s=null)),s}return"markbegin"!==e&&(r=o.match(this.foldingStopMarker))?(a=r.index+r[0].length,r[1]?this.closingBracketBlock(t,r[1],n,a):t.getCommentFoldRange(n,a,-1)):void 0},this.getSectionRange=function(t,e){for(var n=t.getLine(e),i=n.search(/\S/),r=e,a=n.length,s=e+=1,l=t.getLength();++e<l;){var c=(n=t.getLine(e)).search(/\S/);if(-1!==c){if(c<i)break;var h=this.getFoldWidgetRange(t,"all",e);if(h){if(h.start.row<=r)break;if(h.isMultiLine())e=h.end.row;else if(i==c)break}s=e}}return new o(r,a,s,t.getLine(s).length)},this.getCommentRegionBlock=function(t,e,n){for(var i=e.search(/\s*$/),r=t.getLength(),a=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<r;){e=t.getLine(n);var c=s.exec(e);if(c&&(c[1]?l--:l++,!l))break}if(a<n)return new o(a,i,n,e.length)}}).call(a.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(t,e,n){"use strict";function i(){this.HighlightRules=a,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new c}var o=t("../lib/oop"),r=t("./text").Mode,a=t("./json_highlight_rules").JsonHighlightRules,s=t("./matching_brace_outdent").MatchingBraceOutdent,l=t("./behaviour/cstyle").CstyleBehaviour,c=t("./folding/cstyle").FoldMode,h=t("../worker/worker_client").WorkerClient;o.inherits(i,r),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e);return"start"==t&&e.match(/^.*[\{\(\[]\s*$/)&&(i+=n),i},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.createWorker=function(t){var e=new h(["ace"],"ace/mode/json_worker","JsonWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/json"}).call(i.prototype),e.Mode=i})),ace.require(["ace/mode/json"],(function(e){t&&(t.exports=e)}))}).call(this,n(16)(t))},function(t,e,n){(function(t){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],(function(t,e,n){"use strict";var i=t("../lib/dom"),o=t("../lib/lang"),r=t("../lib/event"),a='.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',s=t("../keyboard/hash_handler").HashHandler,l=t("../lib/keys");function c(t,e,n){var o=i.createElement("div");i.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"\u200b"],["span",{action:"findNext",class:"ace_searchbtn next"},"\u200b"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],o),this.element=o.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(t),i.importCssString(a,"ace_searchbox",t.container)}i.importCssString(a,"ace_searchbox"),(function(){this.setEditor=function(t){t.searchBox=this,t.renderer.scroller.appendChild(this.element),this.editor=t},this.setSession=function(t){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(t){this.searchBox=t.querySelector(".ace_search_form"),this.replaceBox=t.querySelector(".ace_replace_form"),this.searchOption=t.querySelector("[action=searchInSelection]"),this.replaceOption=t.querySelector("[action=toggleReplace]"),this.regExpOption=t.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=t.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=t.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=t.querySelector(".ace_search_counter")},this.$init=function(){var t=this.element;this.$initElements(t);var e=this;r.addListener(t,"mousedown",(function(t){setTimeout((function(){e.activeInput.focus()}),0),r.stopPropagation(t)})),r.addListener(t,"click",(function(t){var n=(t.target||t.srcElement).getAttribute("action");n&&e[n]?e[n]():e.$searchBarKb.commands[n]&&e.$searchBarKb.commands[n].exec(e),r.stopPropagation(t)})),r.addCommandKeyListener(t,(function(t,n,i){var o=l.keyCodeToString(i),a=e.$searchBarKb.findKeyCommand(n,o);a&&a.exec&&(a.exec(e),r.stopEvent(t))})),this.$onChange=o.delayedCall((function(){e.find(!1,!1)})),r.addListener(this.searchInput,"input",(function(){e.$onChange.schedule(20)})),r.addListener(this.searchInput,"focus",(function(){e.activeInput=e.searchInput,e.searchInput.value&&e.highlight()})),r.addListener(this.replaceInput,"focus",(function(){e.activeInput=e.replaceInput,e.searchInput.value&&e.highlight()}))},this.$closeSearchBarKb=new s([{bindKey:"Esc",name:"closeSearchBar",exec:function(t){t.searchBox.hide()}}]),this.$searchBarKb=new s,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(t){var e=t.isReplace=!t.isReplace;t.replaceBox.style.display=e?"":"none",t.replaceOption.checked=!1,t.$syncOptions(),t.searchInput.focus()},"Ctrl-H|Command-Option-F":function(t){t.editor.getReadOnly()||(t.replaceOption.checked=!0,t.$syncOptions(),t.replaceInput.focus())},"Ctrl-G|Command-G":function(t){t.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(t){t.findPrev()},esc:function(t){setTimeout((function(){t.hide()}))},Return:function(t){t.activeInput==t.replaceInput&&t.replace(),t.findNext()},"Shift-Return":function(t){t.activeInput==t.replaceInput&&t.replace(),t.findPrev()},"Alt-Return":function(t){t.activeInput==t.replaceInput&&t.replaceAll(),t.findAll()},Tab:function(t){(t.activeInput==t.replaceInput?t.searchInput:t.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(t){t.regExpOption.checked=!t.regExpOption.checked,t.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(t){t.caseSensitiveOption.checked=!t.caseSensitiveOption.checked,t.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(t){t.wholeWordOption.checked=!t.wholeWordOption.checked,t.$syncOptions()}},{name:"toggleReplace",exec:function(t){t.replaceOption.checked=!t.replaceOption.checked,t.$syncOptions()}},{name:"searchInSelection",exec:function(t){t.searchOption.checked=!t.searchRange,t.setSearchRange(t.searchOption.checked&&t.editor.getSelectionRange()),t.$syncOptions()}}]),this.setSearchRange=function(t){(this.searchRange=t)?this.searchRangeMarker=this.editor.session.addMarker(t,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(t){i.setCssClass(this.replaceOption,"checked",this.searchRange),i.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",i.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),i.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),i.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var e=this.editor.getReadOnly();this.replaceOption.style.display=e?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!e?"":"none",this.find(!1,!1,t)},this.highlight=function(t){this.editor.session.highlight(t||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(t,e,n){var o=!this.editor.find(this.searchInput.value,{skipCurrent:t,backwards:e,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",o),this.editor._emit("findSearchBox",{match:!o}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var t=this.editor,e=t.$search.$options.re,n=0,i=0;if(e){var o=this.searchRange?t.session.getTextRange(this.searchRange):t.getValue(),r=t.session.doc.positionToIndex(t.selection.anchor);this.searchRange&&(r-=t.session.doc.positionToIndex(this.searchRange.start));for(var a,s=e.lastIndex=0;(a=e.exec(o))&&(n++,(s=a.index)<=r&&i++,!(999<n))&&(a[0]||(e.lastIndex=s+=1,!(s>=o.length))););}this.searchCounter.textContent=i+" of "+(999<n?"999+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var t=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",t),this.editor._emit("findSearchBox",{match:!t}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(t,e){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=e,t&&(this.searchInput.value=t),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var t=document.activeElement;return t==this.searchInput||t==this.replaceInput}}).call(c.prototype),e.SearchBox=c,e.Search=function(t,e){(t.searchBox||new c(t)).show(t.session.getTextRange(),e)}})),ace.require(["ace/ext/searchbox"],(function(e){t&&(t.exports=e)}))}).call(this,n(16)(t))},function(t,e){t.exports="data:application/javascript;base64,Im5vIHVzZSBzdHJpY3QiOwohKGZ1bmN0aW9uKHdpbmRvdykgewppZiAodHlwZW9mIHdpbmRvdy53aW5kb3cgIT0gInVuZGVmaW5lZCIgJiYgd2luZG93LmRvY3VtZW50KQogICAgcmV0dXJuOwppZiAod2luZG93LnJlcXVpcmUgJiYgd2luZG93LmRlZmluZSkKICAgIHJldHVybjsKCmlmICghd2luZG93LmNvbnNvbGUpIHsKICAgIHdpbmRvdy5jb25zb2xlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1zZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApOwogICAgICAgIHBvc3RNZXNzYWdlKHt0eXBlOiAibG9nIiwgZGF0YTogbXNnc30pOwogICAgfTsKICAgIHdpbmRvdy5jb25zb2xlLmVycm9yID0KICAgIHdpbmRvdy5jb25zb2xlLndhcm4gPSAKICAgIHdpbmRvdy5jb25zb2xlLmxvZyA9CiAgICB3aW5kb3cuY29uc29sZS50cmFjZSA9IHdpbmRvdy5jb25zb2xlOwp9CndpbmRvdy53aW5kb3cgPSB3aW5kb3c7CndpbmRvdy5hY2UgPSB3aW5kb3c7Cgp3aW5kb3cub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZpbGUsIGxpbmUsIGNvbCwgZXJyKSB7CiAgICBwb3N0TWVzc2FnZSh7dHlwZTogImVycm9yIiwgZGF0YTogewogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgZGF0YTogZXJyLmRhdGEsCiAgICAgICAgZmlsZTogZmlsZSwKICAgICAgICBsaW5lOiBsaW5lLCAKICAgICAgICBjb2w6IGNvbCwKICAgICAgICBzdGFjazogZXJyLnN0YWNrCiAgICB9fSk7Cn07Cgp3aW5kb3cubm9ybWFsaXplTW9kdWxlID0gZnVuY3Rpb24ocGFyZW50SWQsIG1vZHVsZU5hbWUpIHsKICAgIC8vIG5vcm1hbGl6ZSBwbHVnaW4gcmVxdWlyZXMKICAgIGlmIChtb2R1bGVOYW1lLmluZGV4T2YoIiEiKSAhPT0gLTEpIHsKICAgICAgICB2YXIgY2h1bmtzID0gbW9kdWxlTmFtZS5zcGxpdCgiISIpOwogICAgICAgIHJldHVybiB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBjaHVua3NbMF0pICsgIiEiICsgd2luZG93Lm5vcm1hbGl6ZU1vZHVsZShwYXJlbnRJZCwgY2h1bmtzWzFdKTsKICAgIH0KICAgIC8vIG5vcm1hbGl6ZSByZWxhdGl2ZSByZXF1aXJlcwogICAgaWYgKG1vZHVsZU5hbWUuY2hhckF0KDApID09ICIuIikgewogICAgICAgIHZhciBiYXNlID0gcGFyZW50SWQuc3BsaXQoIi8iKS5zbGljZSgwLCAtMSkuam9pbigiLyIpOwogICAgICAgIG1vZHVsZU5hbWUgPSAoYmFzZSA/IGJhc2UgKyAiLyIgOiAiIikgKyBtb2R1bGVOYW1lOwogICAgICAgIAogICAgICAgIHdoaWxlIChtb2R1bGVOYW1lLmluZGV4T2YoIi4iKSAhPT0gLTEgJiYgcHJldmlvdXMgIT0gbW9kdWxlTmFtZSkgewogICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBtb2R1bGVOYW1lOwogICAgICAgICAgICBtb2R1bGVOYW1lID0gbW9kdWxlTmFtZS5yZXBsYWNlKC9eXC5cLy8sICIiKS5yZXBsYWNlKC9cL1wuXC8vLCAiLyIpLnJlcGxhY2UoL1teXC9dK1wvXC5cLlwvLywgIiIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIG1vZHVsZU5hbWU7Cn07Cgp3aW5kb3cucmVxdWlyZSA9IGZ1bmN0aW9uIHJlcXVpcmUocGFyZW50SWQsIGlkKSB7CiAgICBpZiAoIWlkKSB7CiAgICAgICAgaWQgPSBwYXJlbnRJZDsKICAgICAgICBwYXJlbnRJZCA9IG51bGw7CiAgICB9CiAgICBpZiAoIWlkLmNoYXJBdCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIndvcmtlci5qcyByZXF1aXJlKCkgYWNjZXB0cyBvbmx5IChwYXJlbnRJZCwgaWQpIGFzIGFyZ3VtZW50cyIpOwoKICAgIGlkID0gd2luZG93Lm5vcm1hbGl6ZU1vZHVsZShwYXJlbnRJZCwgaWQpOwoKICAgIHZhciBtb2R1bGUgPSB3aW5kb3cucmVxdWlyZS5tb2R1bGVzW2lkXTsKICAgIGlmIChtb2R1bGUpIHsKICAgICAgICBpZiAoIW1vZHVsZS5pbml0aWFsaXplZCkgewogICAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5mYWN0b3J5KCkuZXhwb3J0czsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgfQogICAKICAgIGlmICghd2luZG93LnJlcXVpcmUudGxucykKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coInVuYWJsZSB0byBsb2FkICIgKyBpZCk7CiAgICAKICAgIHZhciBwYXRoID0gcmVzb2x2ZU1vZHVsZUlkKGlkLCB3aW5kb3cucmVxdWlyZS50bG5zKTsKICAgIGlmIChwYXRoLnNsaWNlKC0zKSAhPSAiLmpzIikgcGF0aCArPSAiLmpzIjsKICAgIAogICAgd2luZG93LnJlcXVpcmUuaWQgPSBpZDsKICAgIHdpbmRvdy5yZXF1aXJlLm1vZHVsZXNbaWRdID0ge307IC8vIHByZXZlbnQgaW5maW5pdGUgbG9vcCBvbiBicm9rZW4gbW9kdWxlcwogICAgaW1wb3J0U2NyaXB0cyhwYXRoKTsKICAgIHJldHVybiB3aW5kb3cucmVxdWlyZShwYXJlbnRJZCwgaWQpOwp9OwpmdW5jdGlvbiByZXNvbHZlTW9kdWxlSWQoaWQsIHBhdGhzKSB7CiAgICB2YXIgdGVzdFBhdGggPSBpZCwgdGFpbCA9ICIiOwogICAgd2hpbGUgKHRlc3RQYXRoKSB7CiAgICAgICAgdmFyIGFsaWFzID0gcGF0aHNbdGVzdFBhdGhdOwogICAgICAgIGlmICh0eXBlb2YgYWxpYXMgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgcmV0dXJuIGFsaWFzICsgdGFpbDsKICAgICAgICB9IGVsc2UgaWYgKGFsaWFzKSB7CiAgICAgICAgICAgIHJldHVybiAgYWxpYXMubG9jYXRpb24ucmVwbGFjZSgvXC8qJC8sICIvIikgKyAodGFpbCB8fCBhbGlhcy5tYWluIHx8IGFsaWFzLm5hbWUpOwogICAgICAgIH0gZWxzZSBpZiAoYWxpYXMgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9CiAgICAgICAgdmFyIGkgPSB0ZXN0UGF0aC5sYXN0SW5kZXhPZigiLyIpOwogICAgICAgIGlmIChpID09PSAtMSkgYnJlYWs7CiAgICAgICAgdGFpbCA9IHRlc3RQYXRoLnN1YnN0cihpKSArIHRhaWw7CiAgICAgICAgdGVzdFBhdGggPSB0ZXN0UGF0aC5zbGljZSgwLCBpKTsKICAgIH0KICAgIHJldHVybiBpZDsKfQp3aW5kb3cucmVxdWlyZS5tb2R1bGVzID0ge307CndpbmRvdy5yZXF1aXJlLnRsbnMgPSB7fTsKCndpbmRvdy5kZWZpbmUgPSBmdW5jdGlvbihpZCwgZGVwcywgZmFjdG9yeSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICAgIGZhY3RvcnkgPSBkZXBzOwogICAgICAgIGlmICh0eXBlb2YgaWQgIT0gInN0cmluZyIpIHsKICAgICAgICAgICAgZGVwcyA9IGlkOwogICAgICAgICAgICBpZCA9IHdpbmRvdy5yZXF1aXJlLmlkOwogICAgICAgIH0KICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgZmFjdG9yeSA9IGlkOwogICAgICAgIGRlcHMgPSBbXTsKICAgICAgICBpZCA9IHdpbmRvdy5yZXF1aXJlLmlkOwogICAgfQogICAgCiAgICBpZiAodHlwZW9mIGZhY3RvcnkgIT0gImZ1bmN0aW9uIikgewogICAgICAgIHdpbmRvdy5yZXF1aXJlLm1vZHVsZXNbaWRdID0gewogICAgICAgICAgICBleHBvcnRzOiBmYWN0b3J5LAogICAgICAgICAgICBpbml0aWFsaXplZDogdHJ1ZQogICAgICAgIH07CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICghZGVwcy5sZW5ndGgpCiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gZGVwZW5kZW5jaWVzLCB3ZSBpbmplY3QgInJlcXVpcmUiLCAiZXhwb3J0cyIgYW5kCiAgICAgICAgLy8gIm1vZHVsZSIgYXMgZGVwZW5kZW5jaWVzLCB0byBwcm92aWRlIENvbW1vbkpTIGNvbXBhdGliaWxpdHkuCiAgICAgICAgZGVwcyA9IFsicmVxdWlyZSIsICJleHBvcnRzIiwgIm1vZHVsZSJdOwoKICAgIHZhciByZXEgPSBmdW5jdGlvbihjaGlsZElkKSB7CiAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1aXJlKGlkLCBjaGlsZElkKTsKICAgIH07CgogICAgd2luZG93LnJlcXVpcmUubW9kdWxlc1tpZF0gPSB7CiAgICAgICAgZXhwb3J0czoge30sCiAgICAgICAgZmFjdG9yeTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSB0aGlzOwogICAgICAgICAgICB2YXIgcmV0dXJuRXhwb3J0cyA9IGZhY3RvcnkuYXBwbHkodGhpcywgZGVwcy5zbGljZSgwLCBmYWN0b3J5Lmxlbmd0aCkubWFwKGZ1bmN0aW9uKGRlcCkgewogICAgICAgICAgICAgICAgc3dpdGNoIChkZXApIHsKICAgICAgICAgICAgICAgICAgICAvLyBCZWNhdXNlICJyZXF1aXJlIiwgImV4cG9ydHMiIGFuZCAibW9kdWxlIiBhcmVuJ3QgYWN0dWFsCiAgICAgICAgICAgICAgICAgICAgLy8gZGVwZW5kZW5jaWVzLCB3ZSBtdXN0IGhhbmRsZSB0aGVtIHNlcGVyYXRlbHkuCiAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVxdWlyZSI6IHJldHVybiByZXE7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZXhwb3J0cyI6IHJldHVybiBtb2R1bGUuZXhwb3J0czsKICAgICAgICAgICAgICAgICAgICBjYXNlICJtb2R1bGUiOiAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgICAgICAvLyBCdXQgZm9yIGFsbCBvdGhlciBkZXBlbmRlbmNpZXMsIHdlIGNhbiBqdXN0IGdvIGFoZWFkIGFuZAogICAgICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgdGhlbS4KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAgICAgICAgcmV0dXJuIHJlcShkZXApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGlmIChyZXR1cm5FeHBvcnRzKQogICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSByZXR1cm5FeHBvcnRzOwogICAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgIH0KICAgIH07Cn07CndpbmRvdy5kZWZpbmUuYW1kID0ge307CnJlcXVpcmUudGxucyA9IHt9Owp3aW5kb3cuaW5pdEJhc2VVcmxzICA9IGZ1bmN0aW9uIGluaXRCYXNlVXJscyh0b3BMZXZlbE5hbWVzcGFjZXMpIHsKICAgIGZvciAodmFyIGkgaW4gdG9wTGV2ZWxOYW1lc3BhY2VzKQogICAgICAgIHJlcXVpcmUudGxuc1tpXSA9IHRvcExldmVsTmFtZXNwYWNlc1tpXTsKfTsKCndpbmRvdy5pbml0U2VuZGVyID0gZnVuY3Rpb24gaW5pdFNlbmRlcigpIHsKCiAgICB2YXIgRXZlbnRFbWl0dGVyID0gd2luZG93LnJlcXVpcmUoImFjZS9saWIvZXZlbnRfZW1pdHRlciIpLkV2ZW50RW1pdHRlcjsKICAgIHZhciBvb3AgPSB3aW5kb3cucmVxdWlyZSgiYWNlL2xpYi9vb3AiKTsKICAgIAogICAgdmFyIFNlbmRlciA9IGZ1bmN0aW9uKCkge307CiAgICAKICAgIChmdW5jdGlvbigpIHsKICAgICAgICAKICAgICAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICAgICAgICAgICAgICAKICAgICAgICB0aGlzLmNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSwgY2FsbGJhY2tJZCkgewogICAgICAgICAgICBwb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAiY2FsbCIsCiAgICAgICAgICAgICAgICBpZDogY2FsbGJhY2tJZCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgIAogICAgICAgIHRoaXMuZW1pdCA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEpIHsKICAgICAgICAgICAgcG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogImV2ZW50IiwKICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgCiAgICB9KS5jYWxsKFNlbmRlci5wcm90b3R5cGUpOwogICAgCiAgICByZXR1cm4gbmV3IFNlbmRlcigpOwp9OwoKdmFyIG1haW4gPSB3aW5kb3cubWFpbiA9IG51bGw7CnZhciBzZW5kZXIgPSB3aW5kb3cuc2VuZGVyID0gbnVsbDsKCndpbmRvdy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7CiAgICB2YXIgbXNnID0gZS5kYXRhOwogICAgaWYgKG1zZy5ldmVudCAmJiBzZW5kZXIpIHsKICAgICAgICBzZW5kZXIuX3NpZ25hbChtc2cuZXZlbnQsIG1zZy5kYXRhKTsKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5jb21tYW5kKSB7CiAgICAgICAgaWYgKG1haW5bbXNnLmNvbW1hbmRdKQogICAgICAgICAgICBtYWluW21zZy5jb21tYW5kXS5hcHBseShtYWluLCBtc2cuYXJncyk7CiAgICAgICAgZWxzZSBpZiAod2luZG93W21zZy5jb21tYW5kXSkKICAgICAgICAgICAgd2luZG93W21zZy5jb21tYW5kXS5hcHBseSh3aW5kb3csIG1zZy5hcmdzKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5rbm93biBjb21tYW5kOiIgKyBtc2cuY29tbWFuZCk7CiAgICB9CiAgICBlbHNlIGlmIChtc2cuaW5pdCkgewogICAgICAgIHdpbmRvdy5pbml0QmFzZVVybHMobXNnLnRsbnMpOwogICAgICAgIHNlbmRlciA9IHdpbmRvdy5zZW5kZXIgPSB3aW5kb3cuaW5pdFNlbmRlcigpOwogICAgICAgIHZhciBjbGF6eiA9IHJlcXVpcmUobXNnLm1vZHVsZSlbbXNnLmNsYXNzbmFtZV07CiAgICAgICAgbWFpbiA9IHdpbmRvdy5tYWluID0gbmV3IGNsYXp6KHNlbmRlcik7CiAgICB9Cn07Cn0pKHRoaXMpOwoKYWNlLmRlZmluZSgiYWNlL2xpYi9vb3AiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKZXhwb3J0cy5pbmhlcml0cyA9IGZ1bmN0aW9uKGN0b3IsIHN1cGVyQ3RvcikgewogICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwgewogICAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgICAgIHZhbHVlOiBjdG9yLAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgIH0KICAgIH0pOwp9OwoKZXhwb3J0cy5taXhpbiA9IGZ1bmN0aW9uKG9iaiwgbWl4aW4pIHsKICAgIGZvciAodmFyIGtleSBpbiBtaXhpbikgewogICAgICAgIG9ialtrZXldID0gbWl4aW5ba2V5XTsKICAgIH0KICAgIHJldHVybiBvYmo7Cn07CgpleHBvcnRzLmltcGxlbWVudCA9IGZ1bmN0aW9uKHByb3RvLCBtaXhpbikgewogICAgZXhwb3J0cy5taXhpbihwcm90bywgbWl4aW4pOwp9OwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvcmFuZ2UiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwp2YXIgY29tcGFyZVBvaW50cyA9IGZ1bmN0aW9uKHAxLCBwMikgewogICAgcmV0dXJuIHAxLnJvdyAtIHAyLnJvdyB8fCBwMS5jb2x1bW4gLSBwMi5jb2x1bW47Cn07CnZhciBSYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgZW5kUm93LCBlbmRDb2x1bW4pIHsKICAgIHRoaXMuc3RhcnQgPSB7CiAgICAgICAgcm93OiBzdGFydFJvdywKICAgICAgICBjb2x1bW46IHN0YXJ0Q29sdW1uCiAgICB9OwoKICAgIHRoaXMuZW5kID0gewogICAgICAgIHJvdzogZW5kUm93LAogICAgICAgIGNvbHVtbjogZW5kQ29sdW1uCiAgICB9Owp9OwoKKGZ1bmN0aW9uKCkgewogICAgdGhpcy5pc0VxdWFsID0gZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdGFydC5yb3cgPT09IHJhbmdlLnN0YXJ0LnJvdyAmJgogICAgICAgICAgICB0aGlzLmVuZC5yb3cgPT09IHJhbmdlLmVuZC5yb3cgJiYKICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPT09IHJhbmdlLnN0YXJ0LmNvbHVtbiAmJgogICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPT09IHJhbmdlLmVuZC5jb2x1bW47CiAgICB9OwogICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiAoIlJhbmdlOiBbIiArIHRoaXMuc3RhcnQucm93ICsgIi8iICsgdGhpcy5zdGFydC5jb2x1bW4gKwogICAgICAgICAgICAiXSAtPiBbIiArIHRoaXMuZW5kLnJvdyArICIvIiArIHRoaXMuZW5kLmNvbHVtbiArICJdIik7CiAgICB9OwoKICAgIHRoaXMuY29udGFpbnMgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pID09IDA7CiAgICB9OwogICAgdGhpcy5jb21wYXJlUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSkgewogICAgICAgIHZhciBjbXAsCiAgICAgICAgICAgIGVuZCA9IHJhbmdlLmVuZCwKICAgICAgICAgICAgc3RhcnQgPSByYW5nZS5zdGFydDsKCiAgICAgICAgY21wID0gdGhpcy5jb21wYXJlKGVuZC5yb3csIGVuZC5jb2x1bW4pOwogICAgICAgIGlmIChjbXAgPT0gMSkgewogICAgICAgICAgICBjbXAgPSB0aGlzLmNvbXBhcmUoc3RhcnQucm93LCBzdGFydC5jb2x1bW4pOwogICAgICAgICAgICBpZiAoY21wID09IDEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNtcCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChjbXAgPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIC0yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShzdGFydC5yb3csIHN0YXJ0LmNvbHVtbik7CiAgICAgICAgICAgIGlmIChjbXAgPT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjbXAgPT0gMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDQyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jb21wYXJlUG9pbnQgPSBmdW5jdGlvbihwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShwLnJvdywgcC5jb2x1bW4pOwogICAgfTsKICAgIHRoaXMuY29udGFpbnNSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVBvaW50KHJhbmdlLnN0YXJ0KSA9PSAwICYmIHRoaXMuY29tcGFyZVBvaW50KHJhbmdlLmVuZCkgPT0gMDsKICAgIH07CiAgICB0aGlzLmludGVyc2VjdHMgPSBmdW5jdGlvbihyYW5nZSkgewogICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmVSYW5nZShyYW5nZSk7CiAgICAgICAgcmV0dXJuIChjbXAgPT0gLTEgfHwgY21wID09IDAgfHwgY21wID09IDEpOwogICAgfTsKICAgIHRoaXMuaXNFbmQgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIHJldHVybiB0aGlzLmVuZC5yb3cgPT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PSBjb2x1bW47CiAgICB9OwogICAgdGhpcy5pc1N0YXJ0ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbjsKICAgIH07CiAgICB0aGlzLnNldFN0YXJ0ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodHlwZW9mIHJvdyA9PSAib2JqZWN0IikgewogICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9IHJvdy5jb2x1bW47CiAgICAgICAgICAgIHRoaXMuc3RhcnQucm93ID0gcm93LnJvdzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IHJvdzsKICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPSBjb2x1bW47CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuc2V0RW5kID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodHlwZW9mIHJvdyA9PSAib2JqZWN0IikgewogICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPSByb3cuY29sdW1uOwogICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSByb3cucm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZW5kLnJvdyA9IHJvdzsKICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID0gY29sdW1uOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLmluc2lkZSA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMCkgewogICAgICAgICAgICBpZiAodGhpcy5pc0VuZChyb3csIGNvbHVtbikgfHwgdGhpcy5pc1N0YXJ0KHJvdywgY29sdW1uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuaW5zaWRlU3RhcnQgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pID09IDApIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmQocm93LCBjb2x1bW4pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdGhpcy5pbnNpZGVFbmQgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pID09IDApIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNTdGFydChyb3csIGNvbHVtbikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CiAgICB0aGlzLmNvbXBhcmUgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICghdGhpcy5pc011bHRpTGluZSgpKSB7CiAgICAgICAgICAgIGlmIChyb3cgPT09IHRoaXMuc3RhcnQucm93KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uIDwgdGhpcy5zdGFydC5jb2x1bW4gPyAtMSA6IChjb2x1bW4gPiB0aGlzLmVuZC5jb2x1bW4gPyAxIDogMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChyb3cgPCB0aGlzLnN0YXJ0LnJvdykKICAgICAgICAgICAgcmV0dXJuIC0xOwoKICAgICAgICBpZiAocm93ID4gdGhpcy5lbmQucm93KQogICAgICAgICAgICByZXR1cm4gMTsKCiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID09PSByb3cpCiAgICAgICAgICAgIHJldHVybiBjb2x1bW4gPj0gdGhpcy5zdGFydC5jb2x1bW4gPyAwIDogLTE7CgogICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPT09IHJvdykKICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA8PSB0aGlzLmVuZC5jb2x1bW4gPyAwIDogMTsKCiAgICAgICAgcmV0dXJuIDA7CiAgICB9OwogICAgdGhpcy5jb21wYXJlU3RhcnQgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLnN0YXJ0LnJvdyA9PSByb3cgJiYgdGhpcy5zdGFydC5jb2x1bW4gPT0gY29sdW1uKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jb21wYXJlRW5kID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5lbmQucm93ID09IHJvdyAmJiB0aGlzLmVuZC5jb2x1bW4gPT0gY29sdW1uKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLmNvbXBhcmVJbnNpZGUgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PSBjb2x1bW4pIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXJ0LnJvdyA9PSByb3cgJiYgdGhpcy5zdGFydC5jb2x1bW4gPT0gY29sdW1uKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jbGlwUm93cyA9IGZ1bmN0aW9uKGZpcnN0Um93LCBsYXN0Um93KSB7CiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA+IGxhc3RSb3cpCiAgICAgICAgICAgIHZhciBlbmQgPSB7cm93OiBsYXN0Um93ICsgMSwgY29sdW1uOiAwfTsKICAgICAgICBlbHNlIGlmICh0aGlzLmVuZC5yb3cgPCBmaXJzdFJvdykKICAgICAgICAgICAgdmFyIGVuZCA9IHtyb3c6IGZpcnN0Um93LCBjb2x1bW46IDB9OwoKICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPiBsYXN0Um93KQogICAgICAgICAgICB2YXIgc3RhcnQgPSB7cm93OiBsYXN0Um93ICsgMSwgY29sdW1uOiAwfTsKICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXJ0LnJvdyA8IGZpcnN0Um93KQogICAgICAgICAgICB2YXIgc3RhcnQgPSB7cm93OiBmaXJzdFJvdywgY29sdW1uOiAwfTsKCiAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQgfHwgdGhpcy5zdGFydCwgZW5kIHx8IHRoaXMuZW5kKTsKICAgIH07CiAgICB0aGlzLmV4dGVuZCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgdmFyIGNtcCA9IHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7CgogICAgICAgIGlmIChjbXAgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgZWxzZSBpZiAoY21wID09IC0xKQogICAgICAgICAgICB2YXIgc3RhcnQgPSB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHZhciBlbmQgPSB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufTsKCiAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQgfHwgdGhpcy5zdGFydCwgZW5kIHx8IHRoaXMuZW5kKTsKICAgIH07CgogICAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXJ0LnJvdyA9PT0gdGhpcy5lbmQucm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09PSB0aGlzLmVuZC5jb2x1bW4pOwogICAgfTsKICAgIHRoaXMuaXNNdWx0aUxpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gKHRoaXMuc3RhcnQucm93ICE9PSB0aGlzLmVuZC5yb3cpOwogICAgfTsKICAgIHRoaXMuY2xvbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7CiAgICB9OwogICAgdGhpcy5jb2xsYXBzZVJvd3MgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy5lbmQuY29sdW1uID09IDApCiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2UodGhpcy5zdGFydC5yb3csIDAsIE1hdGgubWF4KHRoaXMuc3RhcnQucm93LCB0aGlzLmVuZC5yb3ctMSksIDApOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLnN0YXJ0LnJvdywgMCwgdGhpcy5lbmQucm93LCAwKTsKICAgIH07CiAgICB0aGlzLnRvU2NyZWVuUmFuZ2UgPSBmdW5jdGlvbihzZXNzaW9uKSB7CiAgICAgICAgdmFyIHNjcmVlblBvc1N0YXJ0ID0gc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24odGhpcy5zdGFydCk7CiAgICAgICAgdmFyIHNjcmVlblBvc0VuZCA9IHNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHRoaXMuZW5kKTsKCiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZSgKICAgICAgICAgICAgc2NyZWVuUG9zU3RhcnQucm93LCBzY3JlZW5Qb3NTdGFydC5jb2x1bW4sCiAgICAgICAgICAgIHNjcmVlblBvc0VuZC5yb3csIHNjcmVlblBvc0VuZC5jb2x1bW4KICAgICAgICApOwogICAgfTsKICAgIHRoaXMubW92ZUJ5ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICB0aGlzLnN0YXJ0LnJvdyArPSByb3c7CiAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gKz0gY29sdW1uOwogICAgICAgIHRoaXMuZW5kLnJvdyArPSByb3c7CiAgICAgICAgdGhpcy5lbmQuY29sdW1uICs9IGNvbHVtbjsKICAgIH07Cgp9KS5jYWxsKFJhbmdlLnByb3RvdHlwZSk7ClJhbmdlLmZyb21Qb2ludHMgPSBmdW5jdGlvbihzdGFydCwgZW5kKSB7CiAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uLCBlbmQucm93LCBlbmQuY29sdW1uKTsKfTsKUmFuZ2UuY29tcGFyZVBvaW50cyA9IGNvbXBhcmVQb2ludHM7CgpSYW5nZS5jb21wYXJlUG9pbnRzID0gZnVuY3Rpb24ocDEsIHAyKSB7CiAgICByZXR1cm4gcDEucm93IC0gcDIucm93IHx8IHAxLmNvbHVtbiAtIHAyLmNvbHVtbjsKfTsKCgpleHBvcnRzLlJhbmdlID0gUmFuZ2U7Cn0pOwoKYWNlLmRlZmluZSgiYWNlL2FwcGx5X2RlbHRhIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCmZ1bmN0aW9uIHRocm93RGVsdGFFcnJvcihkZWx0YSwgZXJyb3JUZXh0KXsKICAgIGNvbnNvbGUubG9nKCJJbnZhbGlkIERlbHRhOiIsIGRlbHRhKTsKICAgIHRocm93ICJJbnZhbGlkIERlbHRhOiAiICsgZXJyb3JUZXh0Owp9CgpmdW5jdGlvbiBwb3NpdGlvbkluRG9jdW1lbnQoZG9jTGluZXMsIHBvc2l0aW9uKSB7CiAgICByZXR1cm4gcG9zaXRpb24ucm93ICAgID49IDAgJiYgcG9zaXRpb24ucm93ICAgIDwgIGRvY0xpbmVzLmxlbmd0aCAmJgogICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA+PSAwICYmIHBvc2l0aW9uLmNvbHVtbiA8PSBkb2NMaW5lc1twb3NpdGlvbi5yb3ddLmxlbmd0aDsKfQoKZnVuY3Rpb24gdmFsaWRhdGVEZWx0YShkb2NMaW5lcywgZGVsdGEpIHsKICAgIGlmIChkZWx0YS5hY3Rpb24gIT0gImluc2VydCIgJiYgZGVsdGEuYWN0aW9uICE9ICJyZW1vdmUiKQogICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgImRlbHRhLmFjdGlvbiBtdXN0IGJlICdpbnNlcnQnIG9yICdyZW1vdmUnIik7CiAgICBpZiAoIShkZWx0YS5saW5lcyBpbnN0YW5jZW9mIEFycmF5KSkKICAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsICJkZWx0YS5saW5lcyBtdXN0IGJlIGFuIEFycmF5Iik7CiAgICBpZiAoIWRlbHRhLnN0YXJ0IHx8ICFkZWx0YS5lbmQpCiAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsICJkZWx0YS5zdGFydC9lbmQgbXVzdCBiZSBhbiBwcmVzZW50Iik7CiAgICB2YXIgc3RhcnQgPSBkZWx0YS5zdGFydDsKICAgIGlmICghcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBkZWx0YS5zdGFydCkpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuc3RhcnQgbXVzdCBiZSBjb250YWluZWQgaW4gZG9jdW1lbnQiKTsKICAgIHZhciBlbmQgPSBkZWx0YS5lbmQ7CiAgICBpZiAoZGVsdGEuYWN0aW9uID09ICJyZW1vdmUiICYmICFwb3NpdGlvbkluRG9jdW1lbnQoZG9jTGluZXMsIGVuZCkpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuZW5kIG11c3QgY29udGFpbmVkIGluIGRvY3VtZW50IGZvciAncmVtb3ZlJyBhY3Rpb25zIik7CiAgICB2YXIgbnVtUmFuZ2VSb3dzID0gZW5kLnJvdyAtIHN0YXJ0LnJvdzsKICAgIHZhciBudW1SYW5nZUxhc3RMaW5lQ2hhcnMgPSAoZW5kLmNvbHVtbiAtIChudW1SYW5nZVJvd3MgPT0gMCA/IHN0YXJ0LmNvbHVtbiA6IDApKTsKICAgIGlmIChudW1SYW5nZVJvd3MgIT0gZGVsdGEubGluZXMubGVuZ3RoIC0gMSB8fCBkZWx0YS5saW5lc1tudW1SYW5nZVJvd3NdLmxlbmd0aCAhPSBudW1SYW5nZUxhc3RMaW5lQ2hhcnMpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEucmFuZ2UgbXVzdCBtYXRjaCBkZWx0YSBsaW5lcyIpOwp9CgpleHBvcnRzLmFwcGx5RGVsdGEgPSBmdW5jdGlvbihkb2NMaW5lcywgZGVsdGEsIGRvTm90VmFsaWRhdGUpIHsKICAgIAogICAgdmFyIHJvdyA9IGRlbHRhLnN0YXJ0LnJvdzsKICAgIHZhciBzdGFydENvbHVtbiA9IGRlbHRhLnN0YXJ0LmNvbHVtbjsKICAgIHZhciBsaW5lID0gZG9jTGluZXNbcm93XSB8fCAiIjsKICAgIHN3aXRjaCAoZGVsdGEuYWN0aW9uKSB7CiAgICAgICAgY2FzZSAiaW5zZXJ0IjoKICAgICAgICAgICAgdmFyIGxpbmVzID0gZGVsdGEubGluZXM7CiAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAgIGRvY0xpbmVzW3Jvd10gPSBsaW5lLnN1YnN0cmluZygwLCBzdGFydENvbHVtbikgKyBkZWx0YS5saW5lc1swXSArIGxpbmUuc3Vic3RyaW5nKHN0YXJ0Q29sdW1uKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW3JvdywgMV0uY29uY2F0KGRlbHRhLmxpbmVzKTsKICAgICAgICAgICAgICAgIGRvY0xpbmVzLnNwbGljZS5hcHBseShkb2NMaW5lcywgYXJncyk7CiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3ddID0gbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZG9jTGluZXNbcm93XTsKICAgICAgICAgICAgICAgIGRvY0xpbmVzW3JvdyArIGRlbHRhLmxpbmVzLmxlbmd0aCAtIDFdICs9IGxpbmUuc3Vic3RyaW5nKHN0YXJ0Q29sdW1uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJyZW1vdmUiOgogICAgICAgICAgICB2YXIgZW5kQ29sdW1uID0gZGVsdGEuZW5kLmNvbHVtbjsKICAgICAgICAgICAgdmFyIGVuZFJvdyA9IGRlbHRhLmVuZC5yb3c7CiAgICAgICAgICAgIGlmIChyb3cgPT09IGVuZFJvdykgewogICAgICAgICAgICAgICAgZG9jTGluZXNbcm93XSA9IGxpbmUuc3Vic3RyaW5nKDAsIHN0YXJ0Q29sdW1uKSArIGxpbmUuc3Vic3RyaW5nKGVuZENvbHVtbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2NMaW5lcy5zcGxpY2UoCiAgICAgICAgICAgICAgICAgICAgcm93LCBlbmRSb3cgLSByb3cgKyAxLAogICAgICAgICAgICAgICAgICAgIGxpbmUuc3Vic3RyaW5nKDAsIHN0YXJ0Q29sdW1uKSArIGRvY0xpbmVzW2VuZFJvd10uc3Vic3RyaW5nKGVuZENvbHVtbikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn07Cn0pOwoKYWNlLmRlZmluZSgiYWNlL2xpYi9ldmVudF9lbWl0dGVyIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBFdmVudEVtaXR0ZXIgPSB7fTsKdmFyIHN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7IH07CnZhciBwcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9OwoKRXZlbnRFbWl0dGVyLl9lbWl0ID0KRXZlbnRFbWl0dGVyLl9kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBlKSB7CiAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5IHx8ICh0aGlzLl9ldmVudFJlZ2lzdHJ5ID0ge30pOwogICAgdGhpcy5fZGVmYXVsdEhhbmRsZXJzIHx8ICh0aGlzLl9kZWZhdWx0SGFuZGxlcnMgPSB7fSk7CgogICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50UmVnaXN0cnlbZXZlbnROYW1lXSB8fCBbXTsKICAgIHZhciBkZWZhdWx0SGFuZGxlciA9IHRoaXMuX2RlZmF1bHRIYW5kbGVyc1tldmVudE5hbWVdOwogICAgaWYgKCFsaXN0ZW5lcnMubGVuZ3RoICYmICFkZWZhdWx0SGFuZGxlcikKICAgICAgICByZXR1cm47CgogICAgaWYgKHR5cGVvZiBlICE9ICJvYmplY3QiIHx8ICFlKQogICAgICAgIGUgPSB7fTsKCiAgICBpZiAoIWUudHlwZSkKICAgICAgICBlLnR5cGUgPSBldmVudE5hbWU7CiAgICBpZiAoIWUuc3RvcFByb3BhZ2F0aW9uKQogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gc3RvcFByb3BhZ2F0aW9uOwogICAgaWYgKCFlLnByZXZlbnREZWZhdWx0KQogICAgICAgIGUucHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdDsKCiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoKTsKICAgIGZvciAodmFyIGk9MDsgaTxsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0ZW5lcnNbaV0oZSwgdGhpcyk7CiAgICAgICAgaWYgKGUucHJvcGFnYXRpb25TdG9wcGVkKQogICAgICAgICAgICBicmVhazsKICAgIH0KICAgIAogICAgaWYgKGRlZmF1bHRIYW5kbGVyICYmICFlLmRlZmF1bHRQcmV2ZW50ZWQpCiAgICAgICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyKGUsIHRoaXMpOwp9OwoKCkV2ZW50RW1pdHRlci5fc2lnbmFsID0gZnVuY3Rpb24oZXZlbnROYW1lLCBlKSB7CiAgICB2YXIgbGlzdGVuZXJzID0gKHRoaXMuX2V2ZW50UmVnaXN0cnkgfHwge30pW2V2ZW50TmFtZV07CiAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICByZXR1cm47CiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoKTsKICAgIGZvciAodmFyIGk9MDsgaTxsaXN0ZW5lcnMubGVuZ3RoOyBpKyspCiAgICAgICAgbGlzdGVuZXJzW2ldKGUsIHRoaXMpOwp9OwoKRXZlbnRFbWl0dGVyLm9uY2UgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgX3NlbGYgPSB0aGlzOwogICAgdGhpcy5vbihldmVudE5hbWUsIGZ1bmN0aW9uIG5ld0NhbGxiYWNrKCkgewogICAgICAgIF9zZWxmLm9mZihldmVudE5hbWUsIG5ld0NhbGxiYWNrKTsKICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgfSk7CiAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgICAgICAgY2FsbGJhY2sgPSByZXNvbHZlOwogICAgICAgIH0pOwogICAgfQp9OwoKCkV2ZW50RW1pdHRlci5zZXREZWZhdWx0SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHsKICAgIHZhciBoYW5kbGVycyA9IHRoaXMuX2RlZmF1bHRIYW5kbGVyczsKICAgIGlmICghaGFuZGxlcnMpCiAgICAgICAgaGFuZGxlcnMgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnMgPSB7X2Rpc2FibGVkXzoge319OwogICAgCiAgICBpZiAoaGFuZGxlcnNbZXZlbnROYW1lXSkgewogICAgICAgIHZhciBvbGQgPSBoYW5kbGVyc1tldmVudE5hbWVdOwogICAgICAgIHZhciBkaXNhYmxlZCA9IGhhbmRsZXJzLl9kaXNhYmxlZF9bZXZlbnROYW1lXTsKICAgICAgICBpZiAoIWRpc2FibGVkKQogICAgICAgICAgICBoYW5kbGVycy5fZGlzYWJsZWRfW2V2ZW50TmFtZV0gPSBkaXNhYmxlZCA9IFtdOwogICAgICAgIGRpc2FibGVkLnB1c2gob2xkKTsKICAgICAgICB2YXIgaSA9IGRpc2FibGVkLmluZGV4T2YoY2FsbGJhY2spOwogICAgICAgIGlmIChpICE9IC0xKSAKICAgICAgICAgICAgZGlzYWJsZWQuc3BsaWNlKGksIDEpOwogICAgfQogICAgaGFuZGxlcnNbZXZlbnROYW1lXSA9IGNhbGxiYWNrOwp9OwpFdmVudEVtaXR0ZXIucmVtb3ZlRGVmYXVsdEhhbmRsZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnM7CiAgICBpZiAoIWhhbmRsZXJzKQogICAgICAgIHJldHVybjsKICAgIHZhciBkaXNhYmxlZCA9IGhhbmRsZXJzLl9kaXNhYmxlZF9bZXZlbnROYW1lXTsKICAgIAogICAgaWYgKGhhbmRsZXJzW2V2ZW50TmFtZV0gPT0gY2FsbGJhY2spIHsKICAgICAgICBpZiAoZGlzYWJsZWQpCiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdEhhbmRsZXIoZXZlbnROYW1lLCBkaXNhYmxlZC5wb3AoKSk7CiAgICB9IGVsc2UgaWYgKGRpc2FibGVkKSB7CiAgICAgICAgdmFyIGkgPSBkaXNhYmxlZC5pbmRleE9mKGNhbGxiYWNrKTsKICAgICAgICBpZiAoaSAhPSAtMSkKICAgICAgICAgICAgZGlzYWJsZWQuc3BsaWNlKGksIDEpOwogICAgfQp9OwoKRXZlbnRFbWl0dGVyLm9uID0KRXZlbnRFbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrLCBjYXB0dXJpbmcpIHsKICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5IHx8IHt9OwoKICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV07CiAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV0gPSBbXTsKCiAgICBpZiAobGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spID09IC0xKQogICAgICAgIGxpc3RlbmVyc1tjYXB0dXJpbmcgPyAidW5zaGlmdCIgOiAicHVzaCJdKGNhbGxiYWNrKTsKICAgIHJldHVybiBjYWxsYmFjazsKfTsKCkV2ZW50RW1pdHRlci5vZmYgPQpFdmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPQpFdmVudEVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHsKICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5IHx8IHt9OwoKICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV07CiAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICByZXR1cm47CgogICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spOwogICAgaWYgKGluZGV4ICE9PSAtMSkKICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTsKfTsKCkV2ZW50RW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgIGlmICghZXZlbnROYW1lKSB0aGlzLl9ldmVudFJlZ2lzdHJ5ID0gdGhpcy5fZGVmYXVsdEhhbmRsZXJzID0gdW5kZWZpbmVkOwogICAgaWYgKHRoaXMuX2V2ZW50UmVnaXN0cnkpIHRoaXMuX2V2ZW50UmVnaXN0cnlbZXZlbnROYW1lXSA9IHVuZGVmaW5lZDsKICAgIGlmICh0aGlzLl9kZWZhdWx0SGFuZGxlcnMpIHRoaXMuX2RlZmF1bHRIYW5kbGVyc1tldmVudE5hbWVdID0gdW5kZWZpbmVkOwp9OwoKZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9hbmNob3IiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4vbGliL29vcCIpOwp2YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgiLi9saWIvZXZlbnRfZW1pdHRlciIpLkV2ZW50RW1pdHRlcjsKCnZhciBBbmNob3IgPSBleHBvcnRzLkFuY2hvciA9IGZ1bmN0aW9uKGRvYywgcm93LCBjb2x1bW4pIHsKICAgIHRoaXMuJG9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpOwogICAgdGhpcy5hdHRhY2goZG9jKTsKICAgIAogICAgaWYgKHR5cGVvZiBjb2x1bW4gPT0gInVuZGVmaW5lZCIpCiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihyb3cucm93LCByb3cuY29sdW1uKTsKICAgIGVsc2UKICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHJvdywgY29sdW1uKTsKfTsKCihmdW5jdGlvbigpIHsKCiAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICB0aGlzLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQodGhpcy5yb3csIHRoaXMuY29sdW1uKTsKICAgIH07CiAgICB0aGlzLmdldERvY3VtZW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQ7CiAgICB9OwogICAgdGhpcy4kaW5zZXJ0UmlnaHQgPSBmYWxzZTsKICAgIHRoaXMub25DaGFuZ2UgPSBmdW5jdGlvbihkZWx0YSkgewogICAgICAgIGlmIChkZWx0YS5zdGFydC5yb3cgPT0gZGVsdGEuZW5kLnJvdyAmJiBkZWx0YS5zdGFydC5yb3cgIT0gdGhpcy5yb3cpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgaWYgKGRlbHRhLnN0YXJ0LnJvdyA+IHRoaXMucm93KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgIHZhciBwb2ludCA9ICRnZXRUcmFuc2Zvcm1lZFBvaW50KGRlbHRhLCB7cm93OiB0aGlzLnJvdywgY29sdW1uOiB0aGlzLmNvbHVtbn0sIHRoaXMuJGluc2VydFJpZ2h0KTsKICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHBvaW50LnJvdywgcG9pbnQuY29sdW1uLCB0cnVlKTsKICAgIH07CiAgICAKICAgIGZ1bmN0aW9uICRwb2ludHNJbk9yZGVyKHBvaW50MSwgcG9pbnQyLCBlcXVhbFBvaW50c0luT3JkZXIpIHsKICAgICAgICB2YXIgYkNvbElzQWZ0ZXIgPSBlcXVhbFBvaW50c0luT3JkZXIgPyBwb2ludDEuY29sdW1uIDw9IHBvaW50Mi5jb2x1bW4gOiBwb2ludDEuY29sdW1uIDwgcG9pbnQyLmNvbHVtbjsKICAgICAgICByZXR1cm4gKHBvaW50MS5yb3cgPCBwb2ludDIucm93KSB8fCAocG9pbnQxLnJvdyA9PSBwb2ludDIucm93ICYmIGJDb2xJc0FmdGVyKTsKICAgIH0KICAgICAgICAgICAgCiAgICBmdW5jdGlvbiAkZ2V0VHJhbnNmb3JtZWRQb2ludChkZWx0YSwgcG9pbnQsIG1vdmVJZkVxdWFsKSB7CiAgICAgICAgdmFyIGRlbHRhSXNJbnNlcnQgPSBkZWx0YS5hY3Rpb24gPT0gImluc2VydCI7CiAgICAgICAgdmFyIGRlbHRhUm93U2hpZnQgPSAoZGVsdGFJc0luc2VydCA/IDEgOiAtMSkgKiAoZGVsdGEuZW5kLnJvdyAgICAtIGRlbHRhLnN0YXJ0LnJvdyk7CiAgICAgICAgdmFyIGRlbHRhQ29sU2hpZnQgPSAoZGVsdGFJc0luc2VydCA/IDEgOiAtMSkgKiAoZGVsdGEuZW5kLmNvbHVtbiAtIGRlbHRhLnN0YXJ0LmNvbHVtbik7CiAgICAgICAgdmFyIGRlbHRhU3RhcnQgPSBkZWx0YS5zdGFydDsKICAgICAgICB2YXIgZGVsdGFFbmQgPSBkZWx0YUlzSW5zZXJ0ID8gZGVsdGFTdGFydCA6IGRlbHRhLmVuZDsgLy8gQ29sbGFwc2UgaW5zZXJ0IHJhbmdlLgogICAgICAgIGlmICgkcG9pbnRzSW5PcmRlcihwb2ludCwgZGVsdGFTdGFydCwgbW92ZUlmRXF1YWwpKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICByb3c6IHBvaW50LnJvdywKICAgICAgICAgICAgICAgIGNvbHVtbjogcG9pbnQuY29sdW1uCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmICgkcG9pbnRzSW5PcmRlcihkZWx0YUVuZCwgcG9pbnQsICFtb3ZlSWZFcXVhbCkpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJvdzogcG9pbnQucm93ICsgZGVsdGFSb3dTaGlmdCwKICAgICAgICAgICAgICAgIGNvbHVtbjogcG9pbnQuY29sdW1uICsgKHBvaW50LnJvdyA9PSBkZWx0YUVuZC5yb3cgPyBkZWx0YUNvbFNoaWZ0IDogMCkKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcm93OiBkZWx0YVN0YXJ0LnJvdywKICAgICAgICAgICAgY29sdW1uOiBkZWx0YVN0YXJ0LmNvbHVtbgogICAgICAgIH07CiAgICB9CiAgICB0aGlzLnNldFBvc2l0aW9uID0gZnVuY3Rpb24ocm93LCBjb2x1bW4sIG5vQ2xpcCkgewogICAgICAgIHZhciBwb3M7CiAgICAgICAgaWYgKG5vQ2xpcCkgewogICAgICAgICAgICBwb3MgPSB7CiAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcG9zID0gdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudChyb3csIGNvbHVtbik7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yb3cgPT0gcG9zLnJvdyAmJiB0aGlzLmNvbHVtbiA9PSBwb3MuY29sdW1uKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIHZhciBvbGQgPSB7CiAgICAgICAgICAgIHJvdzogdGhpcy5yb3csCiAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW4KICAgICAgICB9OwoKICAgICAgICB0aGlzLnJvdyA9IHBvcy5yb3c7CiAgICAgICAgdGhpcy5jb2x1bW4gPSBwb3MuY29sdW1uOwogICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlIiwgewogICAgICAgICAgICBvbGQ6IG9sZCwKICAgICAgICAgICAgdmFsdWU6IHBvcwogICAgICAgIH0pOwogICAgfTsKICAgIHRoaXMuZGV0YWNoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5kb2N1bWVudC5vZmYoImNoYW5nZSIsIHRoaXMuJG9uQ2hhbmdlKTsKICAgIH07CiAgICB0aGlzLmF0dGFjaCA9IGZ1bmN0aW9uKGRvYykgewogICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2MgfHwgdGhpcy5kb2N1bWVudDsKICAgICAgICB0aGlzLmRvY3VtZW50Lm9uKCJjaGFuZ2UiLCB0aGlzLiRvbkNoYW5nZSk7CiAgICB9OwogICAgdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgdmFyIHBvcyA9IHt9OwoKICAgICAgICBpZiAocm93ID49IHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkpIHsKICAgICAgICAgICAgcG9zLnJvdyA9IE1hdGgubWF4KDAsIHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkgLSAxKTsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJvdyA8IDApIHsKICAgICAgICAgICAgcG9zLnJvdyA9IDA7CiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcG9zLnJvdyA9IHJvdzsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IE1hdGgubWluKHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGgsIE1hdGgubWF4KDAsIGNvbHVtbikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbHVtbiA8IDApCiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwOwoKICAgICAgICByZXR1cm4gcG9zOwogICAgfTsKCn0pLmNhbGwoQW5jaG9yLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9kb2N1bWVudCIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi9saWIvb29wIik7CnZhciBhcHBseURlbHRhID0gcmVxdWlyZSgiLi9hcHBseV9kZWx0YSIpLmFwcGx5RGVsdGE7CnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCIuL2xpYi9ldmVudF9lbWl0dGVyIikuRXZlbnRFbWl0dGVyOwp2YXIgUmFuZ2UgPSByZXF1aXJlKCIuL3JhbmdlIikuUmFuZ2U7CnZhciBBbmNob3IgPSByZXF1aXJlKCIuL2FuY2hvciIpLkFuY2hvcjsKCnZhciBEb2N1bWVudCA9IGZ1bmN0aW9uKHRleHRPckxpbmVzKSB7CiAgICB0aGlzLiRsaW5lcyA9IFsiIl07CiAgICBpZiAodGV4dE9yTGluZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbGluZXMgPSBbIiJdOwogICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRleHRPckxpbmVzKSkgewogICAgICAgIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMoe3JvdzogMCwgY29sdW1uOiAwfSwgdGV4dE9yTGluZXMpOwogICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluc2VydCh7cm93OiAwLCBjb2x1bW46MH0sIHRleHRPckxpbmVzKTsKICAgIH0KfTsKCihmdW5jdGlvbigpIHsKCiAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgIHZhciBsZW4gPSB0aGlzLmdldExlbmd0aCgpIC0gMTsKICAgICAgICB0aGlzLnJlbW92ZShuZXcgUmFuZ2UoMCwgMCwgbGVuLCB0aGlzLmdldExpbmUobGVuKS5sZW5ndGgpKTsKICAgICAgICB0aGlzLmluc2VydCh7cm93OiAwLCBjb2x1bW46IDB9LCB0ZXh0KTsKICAgIH07CiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsTGluZXMoKS5qb2luKHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpKTsKICAgIH07CiAgICB0aGlzLmNyZWF0ZUFuY2hvciA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgcmV0dXJuIG5ldyBBbmNob3IodGhpcywgcm93LCBjb2x1bW4pOwogICAgfTsKICAgIGlmICgiYWFhIi5zcGxpdCgvYS8pLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJHNwbGl0ID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cclxufFxyL2csICJcbiIpLnNwbGl0KCJcbiIpOwogICAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNwbGl0ID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXHJcbnxccnxcbi8pOwogICAgICAgIH07CiAgICB9CgoKICAgIHRoaXMuJGRldGVjdE5ld0xpbmUgPSBmdW5jdGlvbih0ZXh0KSB7CiAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCgvXi4qPyhcclxufFxyfFxuKS9tKTsKICAgICAgICB0aGlzLiRhdXRvTmV3TGluZSA9IG1hdGNoID8gbWF0Y2hbMV0gOiAiXG4iOwogICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlTmV3TGluZU1vZGUiKTsKICAgIH07CiAgICB0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBzd2l0Y2ggKHRoaXMuJG5ld0xpbmVNb2RlKSB7CiAgICAgICAgICBjYXNlICJ3aW5kb3dzIjoKICAgICAgICAgICAgcmV0dXJuICJcclxuIjsKICAgICAgICAgIGNhc2UgInVuaXgiOgogICAgICAgICAgICByZXR1cm4gIlxuIjsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRhdXRvTmV3TGluZSB8fCAiXG4iOwogICAgICAgIH0KICAgIH07CgogICAgdGhpcy4kYXV0b05ld0xpbmUgPSAiIjsKICAgIHRoaXMuJG5ld0xpbmVNb2RlID0gImF1dG8iOwogICAgdGhpcy5zZXROZXdMaW5lTW9kZSA9IGZ1bmN0aW9uKG5ld0xpbmVNb2RlKSB7CiAgICAgICAgaWYgKHRoaXMuJG5ld0xpbmVNb2RlID09PSBuZXdMaW5lTW9kZSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICB0aGlzLiRuZXdMaW5lTW9kZSA9IG5ld0xpbmVNb2RlOwogICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlTmV3TGluZU1vZGUiKTsKICAgIH07CiAgICB0aGlzLmdldE5ld0xpbmVNb2RlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG5ld0xpbmVNb2RlOwogICAgfTsKICAgIHRoaXMuaXNOZXdMaW5lID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgIHJldHVybiAodGV4dCA9PSAiXHJcbiIgfHwgdGV4dCA9PSAiXHIiIHx8IHRleHQgPT0gIlxuIik7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lID0gZnVuY3Rpb24ocm93KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzW3Jvd10gfHwgIiI7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lcyA9IGZ1bmN0aW9uKGZpcnN0Um93LCBsYXN0Um93KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzLnNsaWNlKGZpcnN0Um93LCBsYXN0Um93ICsgMSk7CiAgICB9OwogICAgdGhpcy5nZXRBbGxMaW5lcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldExpbmVzKDAsIHRoaXMuZ2V0TGVuZ3RoKCkpOwogICAgfTsKICAgIHRoaXMuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzLmxlbmd0aDsKICAgIH07CiAgICB0aGlzLmdldFRleHRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSkuam9pbih0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIoKSk7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lc0ZvclJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICB2YXIgbGluZXM7CiAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LnJvdyA9PT0gcmFuZ2UuZW5kLnJvdykgewogICAgICAgICAgICBsaW5lcyA9IFt0aGlzLmdldExpbmUocmFuZ2Uuc3RhcnQucm93KS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uLCByYW5nZS5lbmQuY29sdW1uKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGluZXMgPSB0aGlzLmdldExpbmVzKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2UuZW5kLnJvdyk7CiAgICAgICAgICAgIGxpbmVzWzBdID0gKGxpbmVzWzBdIHx8ICIiKS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uKTsKICAgICAgICAgICAgdmFyIGwgPSBsaW5lcy5sZW5ndGggLSAxOwogICAgICAgICAgICBpZiAocmFuZ2UuZW5kLnJvdyAtIHJhbmdlLnN0YXJ0LnJvdyA9PSBsKQogICAgICAgICAgICAgICAgbGluZXNbbF0gPSBsaW5lc1tsXS5zdWJzdHJpbmcoMCwgcmFuZ2UuZW5kLmNvbHVtbik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaW5lczsKICAgIH07CiAgICB0aGlzLmluc2VydExpbmVzID0gZnVuY3Rpb24ocm93LCBsaW5lcykgewogICAgICAgIGNvbnNvbGUud2FybigiVXNlIG9mIGRvY3VtZW50Lmluc2VydExpbmVzIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgaW5zZXJ0RnVsbExpbmVzIG1ldGhvZCBpbnN0ZWFkLiIpOwogICAgICAgIHJldHVybiB0aGlzLmluc2VydEZ1bGxMaW5lcyhyb3csIGxpbmVzKTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUxpbmVzID0gZnVuY3Rpb24oZmlyc3RSb3csIGxhc3RSb3cpIHsKICAgICAgICBjb25zb2xlLndhcm4oIlVzZSBvZiBkb2N1bWVudC5yZW1vdmVMaW5lcyBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIHJlbW92ZUZ1bGxMaW5lcyBtZXRob2QgaW5zdGVhZC4iKTsKICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVGdWxsTGluZXMoZmlyc3RSb3csIGxhc3RSb3cpOwogICAgfTsKICAgIHRoaXMuaW5zZXJ0TmV3TGluZSA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJVc2Ugb2YgZG9jdW1lbnQuaW5zZXJ0TmV3TGluZSBpcyBkZXByZWNhdGVkLiBVc2UgaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIFsnJywgJyddKSBpbnN0ZWFkLiIpOwogICAgICAgIHJldHVybiB0aGlzLmluc2VydE1lcmdlZExpbmVzKHBvc2l0aW9uLCBbIiIsICIiXSk7CiAgICB9OwogICAgdGhpcy5pbnNlcnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgdGV4dCkgewogICAgICAgIGlmICh0aGlzLmdldExlbmd0aCgpIDw9IDEpCiAgICAgICAgICAgIHRoaXMuJGRldGVjdE5ld0xpbmUodGV4dCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIHRoaXMuJHNwbGl0KHRleHQpKTsKICAgIH07CiAgICB0aGlzLmluc2VydEluTGluZSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCB0ZXh0KSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5jbGlwcGVkUG9zKHBvc2l0aW9uLnJvdywgcG9zaXRpb24uY29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5wb3MocG9zaXRpb24ucm93LCBwb3NpdGlvbi5jb2x1bW4gKyB0ZXh0Lmxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICBlbmQ6IGVuZCwKICAgICAgICAgICAgYWN0aW9uOiAiaW5zZXJ0IiwKICAgICAgICAgICAgbGluZXM6IFt0ZXh0XQogICAgICAgIH0sIHRydWUpOwogICAgICAgIAogICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKGVuZCk7CiAgICB9OwogICAgCiAgICB0aGlzLmNsaXBwZWRQb3MgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpOwogICAgICAgIGlmIChyb3cgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByb3cgPSBsZW5ndGg7CiAgICAgICAgfSBlbHNlIGlmIChyb3cgPCAwKSB7CiAgICAgICAgICAgIHJvdyA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChyb3cgPj0gbGVuZ3RoKSB7CiAgICAgICAgICAgIHJvdyA9IGxlbmd0aCAtIDE7CiAgICAgICAgICAgIGNvbHVtbiA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmdldExpbmUocm93KTsKICAgICAgICBpZiAoY29sdW1uID09IHVuZGVmaW5lZCkKICAgICAgICAgICAgY29sdW1uID0gbGluZS5sZW5ndGg7CiAgICAgICAgY29sdW1uID0gTWF0aC5taW4oTWF0aC5tYXgoY29sdW1uLCAwKSwgbGluZS5sZW5ndGgpOwogICAgICAgIHJldHVybiB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufTsKICAgIH07CiAgICAKICAgIHRoaXMuY2xvbmVQb3MgPSBmdW5jdGlvbihwb3MpIHsKICAgICAgICByZXR1cm4ge3JvdzogcG9zLnJvdywgY29sdW1uOiBwb3MuY29sdW1ufTsKICAgIH07CiAgICAKICAgIHRoaXMucG9zID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07CiAgICB9OwogICAgCiAgICB0aGlzLiRjbGlwUG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpOwogICAgICAgIGlmIChwb3NpdGlvbi5yb3cgPj0gbGVuZ3RoKSB7CiAgICAgICAgICAgIHBvc2l0aW9uLnJvdyA9IE1hdGgubWF4KDAsIGxlbmd0aCAtIDEpOwogICAgICAgICAgICBwb3NpdGlvbi5jb2x1bW4gPSB0aGlzLmdldExpbmUobGVuZ3RoIC0gMSkubGVuZ3RoOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBvc2l0aW9uLnJvdyA9IE1hdGgubWF4KDAsIHBvc2l0aW9uLnJvdyk7CiAgICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA9IE1hdGgubWluKE1hdGgubWF4KHBvc2l0aW9uLmNvbHVtbiwgMCksIHRoaXMuZ2V0TGluZShwb3NpdGlvbi5yb3cpLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgIH07CiAgICB0aGlzLmluc2VydEZ1bGxMaW5lcyA9IGZ1bmN0aW9uKHJvdywgbGluZXMpIHsKICAgICAgICByb3cgPSBNYXRoLm1pbihNYXRoLm1heChyb3csIDApLCB0aGlzLmdldExlbmd0aCgpKTsKICAgICAgICB2YXIgY29sdW1uID0gMDsKICAgICAgICBpZiAocm93IDwgdGhpcy5nZXRMZW5ndGgoKSkgewogICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChbIiJdKTsKICAgICAgICAgICAgY29sdW1uID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaW5lcyA9IFsiIl0uY29uY2F0KGxpbmVzKTsKICAgICAgICAgICAgcm93LS07CiAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMuJGxpbmVzW3Jvd10ubGVuZ3RoOwogICAgICAgIH0KICAgICAgICB0aGlzLmluc2VydE1lcmdlZExpbmVzKHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59LCBsaW5lcyk7CiAgICB9OyAgICAKICAgIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMgPSBmdW5jdGlvbihwb3NpdGlvbiwgbGluZXMpIHsKICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmNsaXBwZWRQb3MocG9zaXRpb24ucm93LCBwb3NpdGlvbi5jb2x1bW4pOwogICAgICAgIHZhciBlbmQgPSB7CiAgICAgICAgICAgIHJvdzogc3RhcnQucm93ICsgbGluZXMubGVuZ3RoIC0gMSwKICAgICAgICAgICAgY29sdW1uOiAobGluZXMubGVuZ3RoID09IDEgPyBzdGFydC5jb2x1bW4gOiAwKSArIGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aAogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICBlbmQ6IGVuZCwKICAgICAgICAgICAgYWN0aW9uOiAiaW5zZXJ0IiwKICAgICAgICAgICAgbGluZXM6IGxpbmVzCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVQb3MoZW5kKTsKICAgIH07CiAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLmVuZC5yb3csIHJhbmdlLmVuZC5jb2x1bW4pOwogICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgZW5kOiBlbmQsCiAgICAgICAgICAgIGFjdGlvbjogInJlbW92ZSIsCiAgICAgICAgICAgIGxpbmVzOiB0aGlzLmdldExpbmVzRm9yUmFuZ2Uoe3N0YXJ0OiBzdGFydCwgZW5kOiBlbmR9KQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKHN0YXJ0KTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUluTGluZSA9IGZ1bmN0aW9uKHJvdywgc3RhcnRDb2x1bW4sIGVuZENvbHVtbikgewogICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhyb3csIHN0YXJ0Q29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJvdywgZW5kQ29sdW1uKTsKICAgICAgICAKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGVuZDogZW5kLAogICAgICAgICAgICBhY3Rpb246ICJyZW1vdmUiLAogICAgICAgICAgICBsaW5lczogdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHtzdGFydDogc3RhcnQsIGVuZDogZW5kfSkKICAgICAgICB9LCB0cnVlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhzdGFydCk7CiAgICB9OwogICAgdGhpcy5yZW1vdmVGdWxsTGluZXMgPSBmdW5jdGlvbihmaXJzdFJvdywgbGFzdFJvdykgewogICAgICAgIGZpcnN0Um93ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlyc3RSb3cpLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7CiAgICAgICAgbGFzdFJvdyAgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBsYXN0Um93ICksIHRoaXMuZ2V0TGVuZ3RoKCkgLSAxKTsKICAgICAgICB2YXIgZGVsZXRlRmlyc3ROZXdMaW5lID0gbGFzdFJvdyA9PSB0aGlzLmdldExlbmd0aCgpIC0gMSAmJiBmaXJzdFJvdyA+IDA7CiAgICAgICAgdmFyIGRlbGV0ZUxhc3ROZXdMaW5lICA9IGxhc3RSb3cgIDwgdGhpcy5nZXRMZW5ndGgoKSAtIDE7CiAgICAgICAgdmFyIHN0YXJ0Um93ID0gKCBkZWxldGVGaXJzdE5ld0xpbmUgPyBmaXJzdFJvdyAtIDEgICAgICAgICAgICAgICAgICA6IGZpcnN0Um93ICAgICAgICAgICAgICAgICAgICApOwogICAgICAgIHZhciBzdGFydENvbCA9ICggZGVsZXRlRmlyc3ROZXdMaW5lID8gdGhpcy5nZXRMaW5lKHN0YXJ0Um93KS5sZW5ndGggOiAwICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICB2YXIgZW5kUm93ICAgPSAoIGRlbGV0ZUxhc3ROZXdMaW5lICA/IGxhc3RSb3cgKyAxICAgICAgICAgICAgICAgICAgIDogbGFzdFJvdyAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgdmFyIGVuZENvbCAgID0gKCBkZWxldGVMYXN0TmV3TGluZSAgPyAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0TGluZShlbmRSb3cpLmxlbmd0aCApOyAKICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbCk7CiAgICAgICAgdmFyIGRlbGV0ZWRMaW5lcyA9IHRoaXMuJGxpbmVzLnNsaWNlKGZpcnN0Um93LCBsYXN0Um93ICsgMSk7CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0LAogICAgICAgICAgICBlbmQ6IHJhbmdlLmVuZCwKICAgICAgICAgICAgYWN0aW9uOiAicmVtb3ZlIiwKICAgICAgICAgICAgbGluZXM6IHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZGVsZXRlZExpbmVzOwogICAgfTsKICAgIHRoaXMucmVtb3ZlTmV3TGluZSA9IGZ1bmN0aW9uKHJvdykgewogICAgICAgIGlmIChyb3cgPCB0aGlzLmdldExlbmd0aCgpIC0gMSAmJiByb3cgPj0gMCkgewogICAgICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucG9zKHJvdywgdGhpcy5nZXRMaW5lKHJvdykubGVuZ3RoKSwKICAgICAgICAgICAgICAgIGVuZDogdGhpcy5wb3Mocm93ICsgMSwgMCksCiAgICAgICAgICAgICAgICBhY3Rpb246ICJyZW1vdmUiLAogICAgICAgICAgICAgICAgbGluZXM6IFsiIiwgIiJdCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLnJlcGxhY2UgPSBmdW5jdGlvbihyYW5nZSwgdGV4dCkgewogICAgICAgIGlmICghKHJhbmdlIGluc3RhbmNlb2YgUmFuZ2UpKQogICAgICAgICAgICByYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMocmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZCk7CiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwICYmIHJhbmdlLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIHJhbmdlLnN0YXJ0OwogICAgICAgIGlmICh0ZXh0ID09IHRoaXMuZ2V0VGV4dFJhbmdlKHJhbmdlKSkKICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmVuZDsKCiAgICAgICAgdGhpcy5yZW1vdmUocmFuZ2UpOwogICAgICAgIHZhciBlbmQ7CiAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgZW5kID0gdGhpcy5pbnNlcnQocmFuZ2Uuc3RhcnQsIHRleHQpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZW5kID0gcmFuZ2Uuc3RhcnQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBlbmQ7CiAgICB9OwogICAgdGhpcy5hcHBseURlbHRhcyA9IGZ1bmN0aW9uKGRlbHRhcykgewogICAgICAgIGZvciAodmFyIGk9MDsgaTxkZWx0YXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKGRlbHRhc1tpXSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMucmV2ZXJ0RGVsdGFzID0gZnVuY3Rpb24oZGVsdGFzKSB7CiAgICAgICAgZm9yICh2YXIgaT1kZWx0YXMubGVuZ3RoLTE7IGk+PTA7IGktLSkgewogICAgICAgICAgICB0aGlzLnJldmVydERlbHRhKGRlbHRhc1tpXSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuYXBwbHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRhLCBkb05vdFZhbGlkYXRlKSB7CiAgICAgICAgdmFyIGlzSW5zZXJ0ID0gZGVsdGEuYWN0aW9uID09ICJpbnNlcnQiOwogICAgICAgIGlmIChpc0luc2VydCA/IGRlbHRhLmxpbmVzLmxlbmd0aCA8PSAxICYmICFkZWx0YS5saW5lc1swXQogICAgICAgICAgICA6ICFSYW5nZS5jb21wYXJlUG9pbnRzKGRlbHRhLnN0YXJ0LCBkZWx0YS5lbmQpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKGlzSW5zZXJ0ICYmIGRlbHRhLmxpbmVzLmxlbmd0aCA+IDIwMDAwKSB7CiAgICAgICAgICAgIHRoaXMuJHNwbGl0QW5kYXBwbHlMYXJnZURlbHRhKGRlbHRhLCAyMDAwMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBhcHBseURlbHRhKHRoaXMuJGxpbmVzLCBkZWx0YSwgZG9Ob3RWYWxpZGF0ZSk7CiAgICAgICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlIiwgZGVsdGEpOwogICAgICAgIH0KICAgIH07CiAgICAKICAgIHRoaXMuJHNhZmVBcHBseURlbHRhID0gZnVuY3Rpb24oZGVsdGEpIHsKICAgICAgICB2YXIgZG9jTGVuZ3RoID0gdGhpcy4kbGluZXMubGVuZ3RoOwogICAgICAgIGlmICgKICAgICAgICAgICAgZGVsdGEuYWN0aW9uID09ICJyZW1vdmUiICYmIGRlbHRhLnN0YXJ0LnJvdyA8IGRvY0xlbmd0aCAmJiBkZWx0YS5lbmQucm93IDwgZG9jTGVuZ3RoCiAgICAgICAgICAgIHx8IGRlbHRhLmFjdGlvbiA9PSAiaW5zZXJ0IiAmJiBkZWx0YS5zdGFydC5yb3cgPD0gZG9jTGVuZ3RoCiAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YSk7CiAgICAgICAgfQogICAgfTsKICAgIAogICAgdGhpcy4kc3BsaXRBbmRhcHBseUxhcmdlRGVsdGEgPSBmdW5jdGlvbihkZWx0YSwgTUFYKSB7CiAgICAgICAgdmFyIGxpbmVzID0gZGVsdGEubGluZXM7CiAgICAgICAgdmFyIGwgPSBsaW5lcy5sZW5ndGggLSBNQVggKyAxOwogICAgICAgIHZhciByb3cgPSBkZWx0YS5zdGFydC5yb3c7IAogICAgICAgIHZhciBjb2x1bW4gPSBkZWx0YS5zdGFydC5jb2x1bW47CiAgICAgICAgZm9yICh2YXIgZnJvbSA9IDAsIHRvID0gMDsgZnJvbSA8IGw7IGZyb20gPSB0bykgewogICAgICAgICAgICB0byArPSBNQVggLSAxOwogICAgICAgICAgICB2YXIgY2h1bmsgPSBsaW5lcy5zbGljZShmcm9tLCB0byk7CiAgICAgICAgICAgIGNodW5rLnB1c2goIiIpOwogICAgICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucG9zKHJvdyArIGZyb20sIGNvbHVtbiksCiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMucG9zKHJvdyArIHRvLCBjb2x1bW4gPSAwKSwKICAgICAgICAgICAgICAgIGFjdGlvbjogZGVsdGEuYWN0aW9uLAogICAgICAgICAgICAgICAgbGluZXM6IGNodW5rCiAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgIH0KICAgICAgICBkZWx0YS5saW5lcyA9IGxpbmVzLnNsaWNlKGZyb20pOwogICAgICAgIGRlbHRhLnN0YXJ0LnJvdyA9IHJvdyArIGZyb207CiAgICAgICAgZGVsdGEuc3RhcnQuY29sdW1uID0gY29sdW1uOwogICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YSwgdHJ1ZSk7CiAgICB9OwogICAgdGhpcy5yZXZlcnREZWx0YSA9IGZ1bmN0aW9uKGRlbHRhKSB7CiAgICAgICAgdGhpcy4kc2FmZUFwcGx5RGVsdGEoewogICAgICAgICAgICBzdGFydDogdGhpcy5jbG9uZVBvcyhkZWx0YS5zdGFydCksCiAgICAgICAgICAgIGVuZDogdGhpcy5jbG9uZVBvcyhkZWx0YS5lbmQpLAogICAgICAgICAgICBhY3Rpb246IChkZWx0YS5hY3Rpb24gPT0gImluc2VydCIgPyAicmVtb3ZlIiA6ICJpbnNlcnQiKSwKICAgICAgICAgICAgbGluZXM6IGRlbHRhLmxpbmVzLnNsaWNlKCkKICAgICAgICB9KTsKICAgIH07CiAgICB0aGlzLmluZGV4VG9Qb3NpdGlvbiA9IGZ1bmN0aW9uKGluZGV4LCBzdGFydFJvdykgewogICAgICAgIHZhciBsaW5lcyA9IHRoaXMuJGxpbmVzIHx8IHRoaXMuZ2V0QWxsTGluZXMoKTsKICAgICAgICB2YXIgbmV3bGluZUxlbmd0aCA9IHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRSb3cgfHwgMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBpbmRleCAtPSBsaW5lc1tpXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RoOwogICAgICAgICAgICBpZiAoaW5kZXggPCAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHtyb3c6IGksIGNvbHVtbjogaW5kZXggKyBsaW5lc1tpXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RofTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHtyb3c6IGwtMSwgY29sdW1uOiBpbmRleCArIGxpbmVzW2wtMV0ubGVuZ3RoICsgbmV3bGluZUxlbmd0aH07CiAgICB9OwogICAgdGhpcy5wb3NpdGlvblRvSW5kZXggPSBmdW5jdGlvbihwb3MsIHN0YXJ0Um93KSB7CiAgICAgICAgdmFyIGxpbmVzID0gdGhpcy4kbGluZXMgfHwgdGhpcy5nZXRBbGxMaW5lcygpOwogICAgICAgIHZhciBuZXdsaW5lTGVuZ3RoID0gdGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoOwogICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgdmFyIHJvdyA9IE1hdGgubWluKHBvcy5yb3csIGxpbmVzLmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0Um93IHx8IDA7IGkgPCByb3c7ICsraSkKICAgICAgICAgICAgaW5kZXggKz0gbGluZXNbaV0ubGVuZ3RoICsgbmV3bGluZUxlbmd0aDsKCiAgICAgICAgcmV0dXJuIGluZGV4ICsgcG9zLmNvbHVtbjsKICAgIH07Cgp9KS5jYWxsKERvY3VtZW50LnByb3RvdHlwZSk7CgpleHBvcnRzLkRvY3VtZW50ID0gRG9jdW1lbnQ7Cn0pOwoKYWNlLmRlZmluZSgiYWNlL2xpYi9sYW5nIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCmV4cG9ydHMubGFzdCA9IGZ1bmN0aW9uKGEpIHsKICAgIHJldHVybiBhW2EubGVuZ3RoIC0gMV07Cn07CgpleHBvcnRzLnN0cmluZ1JldmVyc2UgPSBmdW5jdGlvbihzdHJpbmcpIHsKICAgIHJldHVybiBzdHJpbmcuc3BsaXQoIiIpLnJldmVyc2UoKS5qb2luKCIiKTsKfTsKCmV4cG9ydHMuc3RyaW5nUmVwZWF0ID0gZnVuY3Rpb24gKHN0cmluZywgY291bnQpIHsKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIHdoaWxlIChjb3VudCA+IDApIHsKICAgICAgICBpZiAoY291bnQgJiAxKQogICAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nOwoKICAgICAgICBpZiAoY291bnQgPj49IDEpCiAgICAgICAgICAgIHN0cmluZyArPSBzdHJpbmc7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0Owp9OwoKdmFyIHRyaW1CZWdpblJlZ2V4cCA9IC9eXHNccyovOwp2YXIgdHJpbUVuZFJlZ2V4cCA9IC9cc1xzKiQvOwoKZXhwb3J0cy5zdHJpbmdUcmltTGVmdCA9IGZ1bmN0aW9uIChzdHJpbmcpIHsKICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSh0cmltQmVnaW5SZWdleHAsICcnKTsKfTsKCmV4cG9ydHMuc3RyaW5nVHJpbVJpZ2h0ID0gZnVuY3Rpb24gKHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHRyaW1FbmRSZWdleHAsICcnKTsKfTsKCmV4cG9ydHMuY29weU9iamVjdCA9IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGNvcHkgPSB7fTsKICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBjb3B5W2tleV0gPSBvYmpba2V5XTsKICAgIH0KICAgIHJldHVybiBjb3B5Owp9OwoKZXhwb3J0cy5jb3B5QXJyYXkgPSBmdW5jdGlvbihhcnJheSl7CiAgICB2YXIgY29weSA9IFtdOwogICAgZm9yICh2YXIgaT0wLCBsPWFycmF5Lmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBpZiAoYXJyYXlbaV0gJiYgdHlwZW9mIGFycmF5W2ldID09ICJvYmplY3QiKQogICAgICAgICAgICBjb3B5W2ldID0gdGhpcy5jb3B5T2JqZWN0KGFycmF5W2ldKTsKICAgICAgICBlbHNlIAogICAgICAgICAgICBjb3B5W2ldID0gYXJyYXlbaV07CiAgICB9CiAgICByZXR1cm4gY29weTsKfTsKCmV4cG9ydHMuZGVlcENvcHkgPSBmdW5jdGlvbiBkZWVwQ29weShvYmopIHsKICAgIGlmICh0eXBlb2Ygb2JqICE9PSAib2JqZWN0IiB8fCAhb2JqKQogICAgICAgIHJldHVybiBvYmo7CiAgICB2YXIgY29weTsKICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKICAgICAgICBjb3B5ID0gW107CiAgICAgICAgZm9yICh2YXIga2V5ID0gMDsga2V5IDwgb2JqLmxlbmd0aDsga2V5KyspIHsKICAgICAgICAgICAgY29weVtrZXldID0gZGVlcENvcHkob2JqW2tleV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY29weTsKICAgIH0KICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSAhPT0gIltvYmplY3QgT2JqZWN0XSIpCiAgICAgICAgcmV0dXJuIG9iajsKICAgIAogICAgY29weSA9IHt9OwogICAgZm9yICh2YXIga2V5IGluIG9iaikKICAgICAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSk7CiAgICByZXR1cm4gY29weTsKfTsKCmV4cG9ydHMuYXJyYXlUb01hcCA9IGZ1bmN0aW9uKGFycikgewogICAgdmFyIG1hcCA9IHt9OwogICAgZm9yICh2YXIgaT0wOyBpPGFyci5sZW5ndGg7IGkrKykgewogICAgICAgIG1hcFthcnJbaV1dID0gMTsKICAgIH0KICAgIHJldHVybiBtYXA7Cgp9OwoKZXhwb3J0cy5jcmVhdGVNYXAgPSBmdW5jdGlvbihwcm9wcykgewogICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7CiAgICAgICAgbWFwW2ldID0gcHJvcHNbaV07CiAgICB9CiAgICByZXR1cm4gbWFwOwp9OwpleHBvcnRzLmFycmF5UmVtb3ZlID0gZnVuY3Rpb24oYXJyYXksIHZhbHVlKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgIGlmICh2YWx1ZSA9PT0gYXJyYXlbaV0pIHsKICAgICAgYXJyYXkuc3BsaWNlKGksIDEpOwogICAgfQogIH0KfTsKCmV4cG9ydHMuZXNjYXBlUmVnRXhwID0gZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbLiorP14ke30oKXxbXF1cL1xcXSkvZywgJ1xcJDEnKTsKfTsKCmV4cG9ydHMuZXNjYXBlSFRNTCA9IGZ1bmN0aW9uKHN0cikgewogICAgcmV0dXJuICgiIiArIHN0cikucmVwbGFjZSgvJi9nLCAiJiMzODsiKS5yZXBsYWNlKC8iL2csICImIzM0OyIpLnJlcGxhY2UoLycvZywgIiYjMzk7IikucmVwbGFjZSgvPC9nLCAiJiM2MDsiKTsKfTsKCmV4cG9ydHMuZ2V0TWF0Y2hPZmZzZXRzID0gZnVuY3Rpb24oc3RyaW5nLCByZWdFeHApIHsKICAgIHZhciBtYXRjaGVzID0gW107CgogICAgc3RyaW5nLnJlcGxhY2UocmVnRXhwLCBmdW5jdGlvbihzdHIpIHsKICAgICAgICBtYXRjaGVzLnB1c2goewogICAgICAgICAgICBvZmZzZXQ6IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTJdLAogICAgICAgICAgICBsZW5ndGg6IHN0ci5sZW5ndGgKICAgICAgICB9KTsKICAgIH0pOwoKICAgIHJldHVybiBtYXRjaGVzOwp9OwpleHBvcnRzLmRlZmVycmVkQ2FsbCA9IGZ1bmN0aW9uKGZjbikgewogICAgdmFyIHRpbWVyID0gbnVsbDsKICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICBmY24oKTsKICAgIH07CgogICAgdmFyIGRlZmVycmVkID0gZnVuY3Rpb24odGltZW91dCkgewogICAgICAgIGRlZmVycmVkLmNhbmNlbCgpOwogICAgICAgIHRpbWVyID0gc2V0VGltZW91dChjYWxsYmFjaywgdGltZW91dCB8fCAwKTsKICAgICAgICByZXR1cm4gZGVmZXJyZWQ7CiAgICB9OwoKICAgIGRlZmVycmVkLnNjaGVkdWxlID0gZGVmZXJyZWQ7CgogICAgZGVmZXJyZWQuY2FsbCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgZmNuKCk7CiAgICAgICAgcmV0dXJuIGRlZmVycmVkOwogICAgfTsKCiAgICBkZWZlcnJlZC5jYW5jZWwgPSBmdW5jdGlvbigpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICByZXR1cm4gZGVmZXJyZWQ7CiAgICB9OwogICAgCiAgICBkZWZlcnJlZC5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGltZXI7CiAgICB9OwoKICAgIHJldHVybiBkZWZlcnJlZDsKfTsKCgpleHBvcnRzLmRlbGF5ZWRDYWxsID0gZnVuY3Rpb24oZmNuLCBkZWZhdWx0VGltZW91dCkgewogICAgdmFyIHRpbWVyID0gbnVsbDsKICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICBmY24oKTsKICAgIH07CgogICAgdmFyIF9zZWxmID0gZnVuY3Rpb24odGltZW91dCkgewogICAgICAgIGlmICh0aW1lciA9PSBudWxsKQogICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRpbWVvdXQgfHwgZGVmYXVsdFRpbWVvdXQpOwogICAgfTsKCiAgICBfc2VsZi5kZWxheSA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsKICAgICAgICB0aW1lciAmJiBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIHRpbWVyID0gc2V0VGltZW91dChjYWxsYmFjaywgdGltZW91dCB8fCBkZWZhdWx0VGltZW91dCk7CiAgICB9OwogICAgX3NlbGYuc2NoZWR1bGUgPSBfc2VsZjsKCiAgICBfc2VsZi5jYWxsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5jYW5jZWwoKTsKICAgICAgICBmY24oKTsKICAgIH07CgogICAgX3NlbGYuY2FuY2VsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICB9OwoKICAgIF9zZWxmLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aW1lcjsKICAgIH07CgogICAgcmV0dXJuIF9zZWxmOwp9Owp9KTsKCmFjZS5kZWZpbmUoImFjZS93b3JrZXIvbWlycm9yIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBSYW5nZSA9IHJlcXVpcmUoIi4uL3JhbmdlIikuUmFuZ2U7CnZhciBEb2N1bWVudCA9IHJlcXVpcmUoIi4uL2RvY3VtZW50IikuRG9jdW1lbnQ7CnZhciBsYW5nID0gcmVxdWlyZSgiLi4vbGliL2xhbmciKTsKICAgIAp2YXIgTWlycm9yID0gZXhwb3J0cy5NaXJyb3IgPSBmdW5jdGlvbihzZW5kZXIpIHsKICAgIHRoaXMuc2VuZGVyID0gc2VuZGVyOwogICAgdmFyIGRvYyA9IHRoaXMuZG9jID0gbmV3IERvY3VtZW50KCIiKTsKICAgIAogICAgdmFyIGRlZmVycmVkVXBkYXRlID0gdGhpcy5kZWZlcnJlZFVwZGF0ZSA9IGxhbmcuZGVsYXllZENhbGwodGhpcy5vblVwZGF0ZS5iaW5kKHRoaXMpKTsKICAgIAogICAgdmFyIF9zZWxmID0gdGhpczsKICAgIHNlbmRlci5vbigiY2hhbmdlIiwgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBkYXRhID0gZS5kYXRhOwogICAgICAgIGlmIChkYXRhWzBdLnN0YXJ0KSB7CiAgICAgICAgICAgIGRvYy5hcHBseURlbHRhcyhkYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFbaSsxXSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHthY3Rpb246ICJpbnNlcnQiLCBzdGFydDogZGF0YVtpXSwgbGluZXM6IGRhdGFbaSsxXX07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0ge2FjdGlvbjogInJlbW92ZSIsIHN0YXJ0OiBkYXRhW2ldLCBlbmQ6IGRhdGFbaSsxXX07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2MuYXBwbHlEZWx0YShkLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX3NlbGYuJHRpbWVvdXQpCiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZFVwZGF0ZS5zY2hlZHVsZShfc2VsZi4kdGltZW91dCk7CiAgICAgICAgX3NlbGYub25VcGRhdGUoKTsKICAgIH0pOwp9OwoKKGZ1bmN0aW9uKCkgewogICAgCiAgICB0aGlzLiR0aW1lb3V0ID0gNTAwOwogICAgCiAgICB0aGlzLnNldFRpbWVvdXQgPSBmdW5jdGlvbih0aW1lb3V0KSB7CiAgICAgICAgdGhpcy4kdGltZW91dCA9IHRpbWVvdXQ7CiAgICB9OwogICAgCiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICB0aGlzLmRvYy5zZXRWYWx1ZSh2YWx1ZSk7CiAgICAgICAgdGhpcy5kZWZlcnJlZFVwZGF0ZS5zY2hlZHVsZSh0aGlzLiR0aW1lb3V0KTsKICAgIH07CiAgICAKICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbihjYWxsYmFja0lkKSB7CiAgICAgICAgdGhpcy5zZW5kZXIuY2FsbGJhY2sodGhpcy5kb2MuZ2V0VmFsdWUoKSwgY2FsbGJhY2tJZCk7CiAgICB9OwogICAgCiAgICB0aGlzLm9uVXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICB9OwogICAgCiAgICB0aGlzLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkVXBkYXRlLmlzUGVuZGluZygpOwogICAgfTsKICAgIAp9KS5jYWxsKE1pcnJvci5wcm90b3R5cGUpOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9qc29uL2pzb25fcGFyc2UiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKICAgIHZhciBhdCwgICAgIC8vIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFyYWN0ZXIKICAgICAgICBjaCwgICAgIC8vIFRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICAgIGVzY2FwZWUgPSB7CiAgICAgICAgICAgICciJzogICciJywKICAgICAgICAgICAgJ1xcJzogJ1xcJywKICAgICAgICAgICAgJy8nOiAgJy8nLAogICAgICAgICAgICBiOiAgICAnXGInLAogICAgICAgICAgICBmOiAgICAnXGYnLAogICAgICAgICAgICBuOiAgICAnXG4nLAogICAgICAgICAgICByOiAgICAnXHInLAogICAgICAgICAgICB0OiAgICAnXHQnCiAgICAgICAgfSwKICAgICAgICB0ZXh0LAoKICAgICAgICBlcnJvciA9IGZ1bmN0aW9uIChtKSB7CgogICAgICAgICAgICB0aHJvdyB7CiAgICAgICAgICAgICAgICBuYW1lOiAgICAnU3ludGF4RXJyb3InLAogICAgICAgICAgICAgICAgbWVzc2FnZTogbSwKICAgICAgICAgICAgICAgIGF0OiAgICAgIGF0LAogICAgICAgICAgICAgICAgdGV4dDogICAgdGV4dAogICAgICAgICAgICB9OwogICAgICAgIH0sCgogICAgICAgIG5leHQgPSBmdW5jdGlvbiAoYykgewoKICAgICAgICAgICAgaWYgKGMgJiYgYyAhPT0gY2gpIHsKICAgICAgICAgICAgICAgIGVycm9yKCJFeHBlY3RlZCAnIiArIGMgKyAiJyBpbnN0ZWFkIG9mICciICsgY2ggKyAiJyIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjaCA9IHRleHQuY2hhckF0KGF0KTsKICAgICAgICAgICAgYXQgKz0gMTsKICAgICAgICAgICAgcmV0dXJuIGNoOwogICAgICAgIH0sCgogICAgICAgIG51bWJlciA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHZhciBudW1iZXIsCiAgICAgICAgICAgICAgICBzdHJpbmcgPSAnJzsKCiAgICAgICAgICAgIGlmIChjaCA9PT0gJy0nKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgPSAnLSc7CiAgICAgICAgICAgICAgICBuZXh0KCctJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKGNoID49ICcwJyAmJiBjaCA8PSAnOScpIHsKICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2ggPT09ICcuJykgewogICAgICAgICAgICAgICAgc3RyaW5nICs9ICcuJzsKICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0KCkgJiYgY2ggPj0gJzAnICYmIGNoIDw9ICc5JykgewogICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2ggPT09ICdlJyB8fCBjaCA9PT0gJ0UnKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gY2g7CiAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdoaWxlIChjaCA+PSAnMCcgJiYgY2ggPD0gJzknKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBudW1iZXIgPSArc3RyaW5nOwogICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSkgewogICAgICAgICAgICAgICAgZXJyb3IoIkJhZCBudW1iZXIiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBzdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgaGV4LAogICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgIHN0cmluZyA9ICcnLAogICAgICAgICAgICAgICAgdWZmZmY7CgogICAgICAgICAgICBpZiAoY2ggPT09ICciJykgewogICAgICAgICAgICAgICAgd2hpbGUgKG5leHQoKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJyInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnXFwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAndScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVmZmZmID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCA0OyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXggPSBwYXJzZUludChuZXh0KCksIDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGhleCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVmZmZmID0gdWZmZmYgKiAxNiArIGhleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVmZmZmKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXNjYXBlZVtjaF0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gZXNjYXBlZVtjaF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT0gIlxuIiB8fCBjaCA9PSAiXHIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3IoIkJhZCBzdHJpbmciKTsKICAgICAgICB9LAoKICAgICAgICB3aGl0ZSA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHdoaWxlIChjaCAmJiBjaCA8PSAnICcpIHsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHdvcmQgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgIGNhc2UgJ3QnOgogICAgICAgICAgICAgICAgbmV4dCgndCcpOwogICAgICAgICAgICAgICAgbmV4dCgncicpOwogICAgICAgICAgICAgICAgbmV4dCgndScpOwogICAgICAgICAgICAgICAgbmV4dCgnZScpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGNhc2UgJ2YnOgogICAgICAgICAgICAgICAgbmV4dCgnZicpOwogICAgICAgICAgICAgICAgbmV4dCgnYScpOwogICAgICAgICAgICAgICAgbmV4dCgnbCcpOwogICAgICAgICAgICAgICAgbmV4dCgncycpOwogICAgICAgICAgICAgICAgbmV4dCgnZScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBjYXNlICduJzoKICAgICAgICAgICAgICAgIG5leHQoJ24nKTsKICAgICAgICAgICAgICAgIG5leHQoJ3UnKTsKICAgICAgICAgICAgICAgIG5leHQoJ2wnKTsKICAgICAgICAgICAgICAgIG5leHQoJ2wnKTsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVycm9yKCJVbmV4cGVjdGVkICciICsgY2ggKyAiJyIpOwogICAgICAgIH0sCgogICAgICAgIHZhbHVlLCAgLy8gUGxhY2UgaG9sZGVyIGZvciB0aGUgdmFsdWUgZnVuY3Rpb24uCgogICAgICAgIGFycmF5ID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIGFycmF5ID0gW107CgogICAgICAgICAgICBpZiAoY2ggPT09ICdbJykgewogICAgICAgICAgICAgICAgbmV4dCgnWycpOwogICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgnXScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTsgICAvLyBlbXB0eSBhcnJheQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgYXJyYXkucHVzaCh2YWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoJ10nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXh0KCcsJyk7CiAgICAgICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvcigiQmFkIGFycmF5Iik7CiAgICAgICAgfSwKCiAgICAgICAgb2JqZWN0ID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIGtleSwKICAgICAgICAgICAgICAgIG9iamVjdCA9IHt9OwoKICAgICAgICAgICAgaWYgKGNoID09PSAneycpIHsKICAgICAgICAgICAgICAgIG5leHQoJ3snKTsKICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICd9JykgewogICAgICAgICAgICAgICAgICAgIG5leHQoJ30nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0OyAgIC8vIGVtcHR5IG9iamVjdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNoKSB7CiAgICAgICAgICAgICAgICAgICAga2V5ID0gc3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgICAgICBuZXh0KCc6Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRHVwbGljYXRlIGtleSAiJyArIGtleSArICciJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoJ30nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbmV4dCgnLCcpOwogICAgICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3IoIkJhZCBvYmplY3QiKTsKICAgICAgICB9OwoKICAgIHZhbHVlID0gZnVuY3Rpb24gKCkgewoKICAgICAgICB3aGl0ZSgpOwogICAgICAgIHN3aXRjaCAoY2gpIHsKICAgICAgICBjYXNlICd7JzoKICAgICAgICAgICAgcmV0dXJuIG9iamVjdCgpOwogICAgICAgIGNhc2UgJ1snOgogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsKICAgICAgICBjYXNlICciJzoKICAgICAgICAgICAgcmV0dXJuIHN0cmluZygpOwogICAgICAgIGNhc2UgJy0nOgogICAgICAgICAgICByZXR1cm4gbnVtYmVyKCk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGNoID49ICcwJyAmJiBjaCA8PSAnOScgPyBudW1iZXIoKSA6IHdvcmQoKTsKICAgICAgICB9CiAgICB9OwoKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlLCByZXZpdmVyKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgdGV4dCA9IHNvdXJjZTsKICAgICAgICBhdCA9IDA7CiAgICAgICAgY2ggPSAnICc7CiAgICAgICAgcmVzdWx0ID0gdmFsdWUoKTsKICAgICAgICB3aGl0ZSgpOwogICAgICAgIGlmIChjaCkgewogICAgICAgICAgICBlcnJvcigiU3ludGF4IGVycm9yIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicgPyBmdW5jdGlvbiB3YWxrKGhvbGRlciwga2V5KSB7CiAgICAgICAgICAgIHZhciBrLCB2LCB2YWx1ZSA9IGhvbGRlcltrZXldOwogICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgZm9yIChrIGluIHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2ID0gd2Fsayh2YWx1ZSwgayk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW2tdID0gdjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7CiAgICAgICAgfSh7Jyc6IHJlc3VsdH0sICcnKSA6IHJlc3VsdDsKICAgIH07Cn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvanNvbl93b3JrZXIiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4uL2xpYi9vb3AiKTsKdmFyIE1pcnJvciA9IHJlcXVpcmUoIi4uL3dvcmtlci9taXJyb3IiKS5NaXJyb3I7CnZhciBwYXJzZSA9IHJlcXVpcmUoIi4vanNvbi9qc29uX3BhcnNlIik7Cgp2YXIgSnNvbldvcmtlciA9IGV4cG9ydHMuSnNvbldvcmtlciA9IGZ1bmN0aW9uKHNlbmRlcikgewogICAgTWlycm9yLmNhbGwodGhpcywgc2VuZGVyKTsKICAgIHRoaXMuc2V0VGltZW91dCgyMDApOwp9OwoKb29wLmluaGVyaXRzKEpzb25Xb3JrZXIsIE1pcnJvcik7CgooZnVuY3Rpb24oKSB7CgogICAgdGhpcy5vblVwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZG9jLmdldFZhbHVlKCk7CiAgICAgICAgdmFyIGVycm9ycyA9IFtdOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSkKICAgICAgICAgICAgICAgIHBhcnNlKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmRvYy5pbmRleFRvUG9zaXRpb24oZS5hdC0xKTsKICAgICAgICAgICAgZXJyb3JzLnB1c2goewogICAgICAgICAgICAgICAgcm93OiBwb3Mucm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBwb3MuY29sdW1uLAogICAgICAgICAgICAgICAgdGV4dDogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zZW5kZXIuZW1pdCgiYW5ub3RhdGUiLCBlcnJvcnMpOwogICAgfTsKCn0pLmNhbGwoSnNvbldvcmtlci5wcm90b3R5cGUpOwoKfSk7Cg=="},function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var i={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var r=function(){function r(e,i,o,a){t(this,r);var s=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===o){var l=e&&""+e;l&&function(t){if(t.startsWith("hsl")){var e=t.match(/([\-\d\.e]+)/g).map(Number),i=n(e,4),o=i[0],a=i[1],l=i[2],c=i[3];void 0===c&&(c=1),s.hsla=[o/=360,a/=100,l/=100,c]}else if(t.startsWith("rgb")){var h=t.match(/([\-\d\.e]+)/g).map(Number),u=n(h,4),d=u[3];void 0===d&&(d=1),s.rgba=[u[0],u[1],u[2],d]}else s.rgba=t.startsWith("#")?r.hexToRgb(t):r.nameToRgb(t)||r.hexToRgb(t)}(l.toLowerCase())}else this.rgba=[e,i,o,void 0===a?1:a]}return e(r,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return o(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],i=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,i){return o(t*e[i],3===i?3:1)+n[i]}));return t?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=r.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=r.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(t){this.rgba=r.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(t){var e=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),n=i[e];return void 0===n?n:r.hexToRgb(n.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=n(t,4),i=e[0],o=e[1],r=e[2],a=e[3];i/=255,o/=255,r/=255;var s=Math.max(i,o,r),l=Math.min(i,o,r),c=void 0,h=void 0,u=(s+l)/2;if(s===l)c=h=0;else{var d=s-l;switch(h=u>.5?d/(2-s-l):d/(s+l),s){case i:c=(o-r)/d+(o<r?6:0);break;case o:c=(r-i)/d+2;break;case r:c=(i-o)/d+4}c/=6}return[c,h,u,a]}},{key:"hslToRgb",value:function(t){var e=n(t,4),i=e[0],o=e[1],r=e[2],a=e[3],s=void 0,l=void 0,c=void 0;if(0===o)s=l=c=r;else{var h=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},u=r<.5?r*(1+o):r+o-r*o,d=2*r-u;s=h(d,u,i+1/3),l=h(d,u,i),c=h(d,u,i-1/3)}var p=[255*s,255*l,255*c].map(Math.round);return p[3]=a,p}}]),r}(),a=function(){function n(){t(this,n),this._events=[]}return e(n,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(t,e,i){this._events=this._events.filter((function(o){var r=!0;return t&&t!==o.target&&(r=!1),e&&e!==o.type&&(r=!1),i&&i!==o.handler&&(r=!1),r&&n._doRemove(o.target,o.type,o.handler),!r}))}},{key:"destroy",value:function(){this._events.forEach((function(t){return n._doRemove(t.target,t.type,t.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),n}();function s(t,e,n){var i=!1;function o(t,e,n){return Math.max(e,Math.min(t,n))}function r(t,r,a){if(a&&(i=!0),i){t.preventDefault();var s=e.getBoundingClientRect(),l=s.width,c=s.height,h=r.clientY,u=o(r.clientX-s.left,0,l),d=o(h-s.top,0,c);n(u/l,d/c)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?r(t,t,e):i=!1}function s(t,e){1===t.touches.length?r(t,t.touches[0],e):i=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){i=!1})),t.add(e,"touchend",(function(t){i=!1})),t.add(e,"touchcancel",(function(t){i=!1}))}var l="mousedown",c="focusin";function h(t,e){return(e||document).querySelector(t)}function u(t){t.preventDefault(),t.stopPropagation()}function d(t,e,n,i,o){t.add(e,"keydown",(function(t){n.indexOf(t.key)>=0&&(o&&u(t),i(t))}))}var p=document.createElement("style");return p.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(p),function(){function n(e){t(this,n),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new a,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return e(n,[{key:"setOptions",value:function(t){var e,n,i,o,r=this;t&&(e=this.settings,t instanceof HTMLElement?e.parent=t:(e.parent&&t.parent&&e.parent!==t.parent&&(this._events.remove(e.parent),this._popupInited=!1),function(t,e,n){for(var i in t)e[i]=t[i]}(t,e),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose),(n=t.color||t.colour)&&this._setColor(n)),(i=e.parent)&&e.popup&&!this._popupInited?(this._events.add(i,"click",o=function(t){return r.openHandler(t)}),d(this._events,i,[" ","Spacebar","Enter"],o),this._popupInited=!0):t.parent&&!e.popup&&this.show())}},{key:"openHandler",value:function(t){var e;this.show()&&(t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none",e=t&&"keydown"===t.type?this._domEdit:this.domElement,setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour))}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;t?e===l||e===c?t.timeStamp>(this.__containedEvent||0)+100&&(n=!0):(u(t),n=!0):n=!0,n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==l&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n,i=void 0;try{i=new r(t)}catch(t){if(e.failSilently)return;throw t}this.settings.alpha||((n=i.hsla)[3]=1,i.hsla=n),this.colour=this.color=i,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,n,i=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(n=document.createElement("div")).innerHTML=e,n.firstElementChild);return this.domElement=i,this._domH=h(".picker_hue",i),this._domSL=h(".picker_sl",i),this._domA=h(".picker_alpha",i),this._domEdit=h(".picker_editor input",i),this._domSample=h(".picker_sample",i),this._domOkay=h(".picker_done button",i),this._domCancel=h(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,i=this._events;function o(t,e,n){i.add(t,e,n)}o(n,"click",(function(t){return t.preventDefault()})),s(i,this._domH,(function(t,n){return e._setHSLA(t)})),s(i,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&s(i,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var r=this._domEdit;function a(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)}o(r,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),o(r,"focus",(function(t){this.selectionStart===this.selectionEnd&&this.select()})),this._ifPopup((function(){function e(e){return t.closeHandler(e)}function r(e){t.__containedEvent=e.timeStamp}o(window,l,e),o(window,c,e),d(i,n,["Esc","Escape"],e),o(n,l,r),o(n,c,r),o(t._domCancel,"click",e)})),o(this._domOkay,"click",a),d(i,n,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===i?e.classList.add(t):e.classList.remove(t)})),e.classList.add(i)}))}},{key:"_setHSLA",value:function(t,e,n,i,o){o=o||{};var r=this.colour,a=r.hsla;[t,e,n,i].forEach((function(t,e){!t&&0!==t||(a[e]=t)})),r.hsla=a,this._updateUI(o),this.onChange&&!o.silent&&this.onChange(r)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,i="hsl("+360*n[0]+", 100%, 50%)",o=e.hslString,r=e.hslaString,a=this._domSL,s=this._domA,l=h(".picker_selector",this._domH),c=h(".picker_selector",a),u=h(".picker_selector",s);f(0,l,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,f(0,c,n[1]),v(0,c,1-n[2]),a.style.color=o,v(0,u,1-n[3]);var d=o,p=d.replace("hsl","hsla").replace(")",", 0)");if(this._domA.style.backgroundImage="linear-gradient("+[d,p]+"), url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.alpha,m=void 0;switch(this.settings.editorFormat){case"rgb":m=e.printRGB(g);break;case"hsl":m=e.printHSL(g);break;default:m=e.printHex(g)}this._domEdit.value=m}this._domSample.style.color=r}function f(t,e,n){e.style.left=100*n+"%"}function v(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",i=e.style.display!==n;return i&&(e.style.display=n),i}}],[{key:"StyleElement",get:function(){return p}}]),n}()}()},function(t,e){window.ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],(function(t,e,n){e.isDark=!1,e.cssClass="ace-jsoneditor",e.cssText='.ace-jsoneditor .ace_gutter {\nbackground: #ebebeb;\ncolor: #333\n}\n\n.ace-jsoneditor.ace_editor {\nfont-family: "dejavu sans mono", "droid sans mono", consolas, monaco, "lucida console", "courier new", courier, monospace, sans-serif;\nline-height: 1.3;\nbackground-color: #fff;\n}\n.ace-jsoneditor .ace_print-margin {\nwidth: 1px;\nbackground: #e8e8e8\n}\n.ace-jsoneditor .ace_scroller {\nbackground-color: #FFFFFF\n}\n.ace-jsoneditor .ace_text-layer {\ncolor: gray\n}\n.ace-jsoneditor .ace_variable {\ncolor: #1a1a1a\n}\n.ace-jsoneditor .ace_cursor {\nborder-left: 2px solid #000000\n}\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\nborder-left: 0px;\nborder-bottom: 1px solid #000000\n}\n.ace-jsoneditor .ace_marker-layer .ace_selection {\nbackground: lightgray\n}\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\nbox-shadow: 0 0 3px 0px #FFFFFF;\nborder-radius: 2px\n}\n.ace-jsoneditor .ace_marker-layer .ace_step {\nbackground: rgb(255, 255, 0)\n}\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\nmargin: -1px 0 0 -1px;\nborder: 1px solid #BFBFBF\n}\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\nbackground: #FFFBD1\n}\n.ace-jsoneditor .ace_gutter-active-line {\nbackground-color : #dcdcdc\n}\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\nborder: 1px solid lightgray\n}\n.ace-jsoneditor .ace_invisible {\ncolor: #BFBFBF\n}\n.ace-jsoneditor .ace_keyword,\n.ace-jsoneditor .ace_meta,\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\ncolor: #AF956F\n}\n.ace-jsoneditor .ace_keyword.ace_operator {\ncolor: #484848\n}\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\ncolor: #96DC5F\n}\n.ace-jsoneditor .ace_constant.ace_language {\ncolor: darkorange\n}\n.ace-jsoneditor .ace_constant.ace_numeric {\ncolor: red\n}\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\ncolor: #BF78CC\n}\n.ace-jsoneditor .ace_invalid {\ncolor: #FFFFFF;\nbackground-color: #FF002A;\n}\n.ace-jsoneditor .ace_fold {\nbackground-color: #AF956F;\nborder-color: #000000\n}\n.ace-jsoneditor .ace_storage,\n.ace-jsoneditor .ace_support.ace_class,\n.ace-jsoneditor .ace_support.ace_function,\n.ace-jsoneditor .ace_support.ace_other,\n.ace-jsoneditor .ace_support.ace_type {\ncolor: #C52727\n}\n.ace-jsoneditor .ace_string {\ncolor: green\n}\n.ace-jsoneditor .ace_comment {\ncolor: #BCC8BA\n}\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\ncolor: #606060\n}\n.ace-jsoneditor .ace_markup.ace_underline {\ntext-decoration: underline\n}\n.ace-jsoneditor .ace_indent-guide {\nbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\n}',t("../lib/dom").importCssString(e.cssText,e.cssClass)}))},function(t,e,n){e.tryRequireAjv=function(){try{return n(44)}catch(t){}}},function(t,e,n){"use strict";var i=n(45),o=n(17),r=n(49),a=n(25),s=n(26),l=n(50),c=n(51),h=n(72),u=n(7);(t.exports=v).prototype.validate=function(t,e){var n;if("string"==typeof t){if(!(n=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var i=this._addSchema(t);n=i.validate||this._compile(i)}var o=n(e);return!0!==n.$async&&(this.errors=n.errors),o},v.prototype.compile=function(t,e){var n=this._addSchema(t,void 0,e);return n.validate||this._compile(n)},v.prototype.addSchema=function(t,e,n,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.addSchema(t[r],void 0,n,i);return this}var a=this._getId(t);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return w(this,e=o.normalizeId(e||a)),this._schemas[e]=this._addSchema(t,n,i,!0),this},v.prototype.addMetaSchema=function(t,e,n){return this.addSchema(t,e,n,!0),this},v.prototype.validateSchema=function(t,e){var n=t.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(t){var e=t._opts.meta;return t._opts.defaultMeta="object"==typeof e?t._getId(e)||e:t.getSchema(g)?g:void 0,t._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),!(this.errors=null);var i=this.validate(n,t);if(!i&&e){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return i},v.prototype.getSchema=function(t){var e=b(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var n=o.schema.call(t,{schema:{}},e);if(n){var r=n.schema,s=n.root,l=n.baseId,c=i.call(t,r,s,void 0,l);return t._fragments[e]=new a({ref:e,fragment:!0,schema:r,root:s,baseId:l,validate:c}),c}}(this,t)}},v.prototype.removeSchema=function(t){if(t instanceof RegExp)return y(this,this._schemas,t),y(this,this._refs,t),this;switch(typeof t){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var e=b(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var n=this._opts.serialize,i=n?n(t):t;this._cache.del(i);var r=this._getId(t);r&&(r=o.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this},v.prototype.addFormat=function(t,e){return"string"==typeof e&&(e=new RegExp(e)),this._formats[t]=e,this},v.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var n=void 0===(e=e||{}).separator?", ":e.separator,i=void 0===e.dataVar?"data":e.dataVar,o="",r=0;r<t.length;r++){var a=t[r];a&&(o+=i+a.dataPath+" "+a.message+n)}return o.slice(0,-n.length)},v.prototype._addSchema=function(t,e,n,i){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(t):t,l=this._cache.get(s);if(l)return l;i=i||!1!==this._opts.addUsedSchema;var c=o.normalizeId(this._getId(t));c&&i&&w(this,c);var h,u=!1!==this._opts.validateSchema&&!e;u&&!(h=c&&c==o.normalizeId(t.$schema))&&this.validateSchema(t,!0);var d=o.ids.call(this,t),p=new a({id:c,schema:t,localRefs:d,cacheKey:s,meta:n});return"#"!=c[0]&&i&&(this._refs[c]=p),this._cache.put(s,p),u&&h&&this.validateSchema(t,!0),p},v.prototype._compile=function(t,e){if(t.compiling)return(t.validate=r).schema=t.schema,r.errors=null,r.root=e||r,!0===t.schema.$async&&(r.$async=!0),r;var n,o;t.compiling=!0,t.meta&&(n=this._opts,this._opts=this._metaOpts);try{o=i.call(this,t.schema,e,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=n)}return t.validate=o,t.refs=o.refs,t.refVal=o.refVal,t.root=o.root,o;function r(){var e=t.validate,n=e.apply(this,arguments);return r.errors=e.errors,n}},v.prototype.compileAsync=n(73);var d=n(74);v.prototype.addKeyword=d.add,v.prototype.getKeyword=d.get,v.prototype.removeKeyword=d.remove,v.prototype.validateKeyword=d.validate;var p=n(19);v.ValidationError=p.Validation,v.MissingRefError=p.MissingRef,v.$dataMetaSchema=h;var g="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],f=["/properties"];function v(t){if(!(this instanceof v))return new v(t);t=this._opts=u.copy(t)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:I,warn:I,error:I};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(t){switch(t.schemaId){case"auto":return x;case"id":return _;default:return C}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=s),this._metaOpts=function(t){for(var e=u.copy(t._opts),n=0;n<m.length;n++)delete e[m[n]];return e}(this),t.formats&&function(t){for(var e in t._opts.formats)t.addFormat(e,t._opts.formats[e])}(this),t.keywords&&function(t){for(var e in t._opts.keywords)t.addKeyword(e,t._opts.keywords[e])}(this),function(t){var e;if(t._opts.$data&&(e=n(77),t.addMetaSchema(e,e.$id,!0)),!1!==t._opts.meta){var i=n(32);t._opts.$data&&(i=h(i,f)),t.addMetaSchema(i,g,!0),t._refs["http://json-schema.org/schema"]=g}}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var n in e)t.addSchema(e[n],n)}(this)}function b(t,e){return e=o.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function y(t,e,n){for(var i in e){var o=e[i];o.meta||n&&!n.test(i)||(t._cache.del(o.cacheKey),delete e[i])}}function _(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function C(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function x(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function w(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function I(){}},function(t,e,n){"use strict";var i=n(17),o=n(7),r=n(19),a=n(26),s=n(27),l=o.ucs2length,c=n(18),h=r.Validation;function u(t,e,n){for(var i=0;i<this._compilations.length;i++){var o=this._compilations[i];if(o.schema==t&&o.root==e&&o.baseId==n)return i}return-1}function d(t,e){return"var pattern"+t+" = new RegExp("+o.toQuotedString(e[t])+");"}function p(t){return"var default"+t+" = defaults["+t+"];"}function g(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function m(t){return"var customRule"+t+" = customRules["+t+"];"}function f(t,e){if(!t.length)return"";for(var n="",i=0;i<t.length;i++)n+=e(i,t);return n}t.exports=function t(e,n,v,b){var y=this,_=this._opts,C=[void 0],x={},w=[],I={},A=[],P={},O=[],M=(function(t,e,n){var i=u.call(this,t,e,n);return 0<=i?{index:i,compiling:!0}:(this._compilations[i=this._compilations.length]={schema:t,root:e,baseId:n},{index:i,compiling:!1})}).call(this,e,n=n||{schema:e,refVal:C,refs:x},b),k=this._compilations[M.index];if(M.compiling)return k.callValidate=function t(){var e=k.validate,n=e.apply(this,arguments);return t.errors=e.errors,n};var S=this._formats,E=this.RULES;try{var T=L(e,n,v,b);k.validate=T;var R=k.callValidate;return R&&(R.schema=T.schema,R.errors=null,R.refs=T.refs,R.refVal=T.refVal,R.root=T.root,R.$async=T.$async,_.sourceCode&&(R.source=T.source)),T}finally{(function(t,e,n){var i=u.call(this,t,e,n);0<=i&&this._compilations.splice(i,1)}).call(this,e,n,b)}function L(e,a,u,v){var b=!a||a&&a.schema==e;if(a.schema!=n.schema)return t.call(y,e,a,u,v);var I=!0===e.$async,P=s({isTop:!0,schema:e,isRoot:b,baseId:v,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:r.MissingRef,RULES:E,validate:s,util:o,resolve:i,resolveRef:z,usePattern:D,useDefault:F,useCustomRule:V,opts:_,formats:S,logger:y.logger,self:y});P=f(C,g)+f(w,d)+f(A,p)+f(O,m)+P,_.processCode&&(P=_.processCode(P,e));try{var M=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",P)(y,E,S,n,C,A,O,c,l,h);C[0]=M}catch(e){throw y.logger.error("Error compiling schema, function code:",P),e}return M.schema=e,M.errors=null,M.refs=x,M.refVal=C,M.root=b?M:a,I&&(M.$async=!0),!0===_.sourceCode&&(M.source={code:P,patterns:w,defaults:A}),M}function z(e,o,r){o=i.url(e,o);var a,s,l=x[o];if(void 0!==l)return j(a=C[l],s="refVal["+l+"]");if(!r&&n.refs){var c=n.refs[o];if(void 0!==c)return j(a=n.refVal[c],s=B(o,a))}s=B(o);var h,u=i.call(y,L,n,o);if(void 0!==u||(h=v&&v[o])&&(u=i.inlineRef(h,_.inlineRefs)?h:t.call(y,h,n,v,e)),void 0!==u)return C[x[o]]=u,j(u,s);delete x[o]}function B(t,e){var n=C.length;return C[n]=e,"refVal"+(x[t]=n)}function j(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function D(t){var e=I[t];return void 0===e&&(e=I[t]=w.length,w[e]=t),"pattern"+e}function F(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return o.toQuotedString(t);case"object":if(null===t)return"null";var e=a(t),n=P[e];return void 0===n&&(n=P[e]=A.length,A[n]=t),"default"+n}}function V(t,e,n,i){if(!1!==y._opts.validateSchema){var o=t.definition.dependencies;if(o&&!o.every((function(t){return Object.prototype.hasOwnProperty.call(n,t)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var r=t.definition.validateSchema;if(r&&!r(e)){var a="keyword schema is invalid: "+y.errorsText(r.errors);if("log"!=y._opts.validateSchema)throw new Error(a);y.logger.error(a)}}var s,l=t.definition.compile,c=t.definition.inline,h=t.definition.macro;if(l)s=l.call(y,e,n,i);else if(h)s=h.call(y,e,n,i),!1!==_.validateSchema&&y.validateSchema(s,!0);else if(c)s=c.call(y,i,t.keyword,e,n);else if(!(s=t.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var u=O.length;return{code:"customRule"+u,validate:O[u]=s}}}},function(t,e,n){!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var i=e.length-1,o=1;o<i;++o)e[o]=e[o].slice(1,-1);return e[i]=e[i].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function i(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function o(t){return t.toUpperCase()}function r(t){var i="[A-Za-z]",o="[0-9]",r=e(o,"[A-Fa-f]"),a=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=e("[\\:\\/\\?\\#\\[\\]\\@]",s),c=t?"[\\uE000-\\uF8FF]":"[]",h=e(i,o,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=n(i+e(i,o,"[\\+\\-\\.]")+"*"),d=n(n(a+"|"+e(h,s,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("[1-9]"+o)+"|"+o),n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("0?[1-9]"+o)+"|0?0?"+o)),g=n(p+"\\."+p+"\\."+p+"\\."+p),m=n(r+"{1,4}"),f=n(n(m+"\\:"+m)+"|"+g),v=n(n(m+"\\:")+"{6}"+f),b=n("\\:\\:"+n(m+"\\:")+"{5}"+f),y=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+f),_=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+f),C=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+f),x=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+f),w=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+f),I=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),A=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),P=n([v,b,y,_,C,x,w,I,A].join("|")),O=n(n(h+"|"+a)+"+"),M=(n(P+"\\%25"+O),n(P+n("\\%25|\\%(?!"+r+"{2})")+O)),k=n("[vV]"+r+"+\\."+e(h,s,"[\\:]")+"+"),S=n("\\["+n(M+"|"+P+"|"+k)+"\\]"),E=n(n(a+"|"+e(h,s))+"*"),T=n(S+"|"+g+"(?!"+E+")|"+E),R=n(o+"*"),L=n(n(d+"@")+"?"+T+n("\\:"+R)+"?"),z=n(a+"|"+e(h,s,"[\\:\\@]")),B=n(z+"*"),j=n(z+"+"),D=n(n(a+"|"+e(h,s,"[\\@]"))+"+"),F=n(n("\\/"+B)+"*"),V=n("\\/"+n(j+F)+"?"),N=n(D+F),$=n(j+F),Z="(?!"+z+")",G=(n(F+"|"+V+"|"+N+"|"+$+"|"+Z),n(n(z+"|"+e("[\\/\\?]",c))+"*")),W=n(n(z+"|[\\/\\?]")+"*"),H=n(n("\\/\\/"+L+F)+"|"+V+"|"+$+"|"+Z),K=n(u+"\\:"+H+n("\\?"+G)+"?"+n("\\#"+W)+"?"),U=n(n("\\/\\/"+L+F)+"|"+V+"|"+N+"|"+Z),X=n(U+n("\\?"+G)+"?"+n("\\#"+W)+"?");return n(K+"|"+X),n(u+"\\:"+H+n("\\?"+G)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+T+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+V+"|"+$+"|"+Z+")"),n("\\?("+G+")"),n("\\#("+W+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+T+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+V+"|"+N+"|"+Z+")"),n("\\?("+G+")"),n("\\#("+W+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+T+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+V+"|"+$+"|"+Z+")"),n("\\?("+G+")"),n("\\#("+W+")"),n("("+d+")@"),n("\\:("+R+")"),{NOT_SCHEME:new RegExp(e("[^]",i,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",h,s),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",h,s),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",h,s),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",h,s),"g"),NOT_QUERY:new RegExp(e("[^\\%]",h,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",h,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",h,s),"g"),UNRESERVED:new RegExp(h,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",h,l),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+g+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+O+")")+"?\\]?$")}}var a=r(!1),s=r(!0),l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,h=36,u=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,f=String.fromCharCode;function v(t){throw new RangeError(g[t])}function b(t,e){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]);var o=function(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}((t=t.replace(p,".")).split("."),e).join(".");return i+o}var y=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:h},_=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},C=function(t,e,n){var i=0;for(t=n?m(t/700):t>>1,t+=m(t/e);t>455;i+=h)t=m(t/35);return m(i+36*t/(t+38))},x=function(t){return b(t,(function(t){return d.test(t)?"xn--"+function t(e){var n=[],i=(e=function(t){for(var e=[],n=0,i=t.length;n<i;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<i){var r=t.charCodeAt(n++);56320==(64512&r)?e.push(((1023&o)<<10)+(1023&r)+65536):(e.push(o),n--)}else e.push(o)}return e}(e)).length,o=128,r=0,a=72,s=!0,l=!1,u=void 0;try{for(var d,p=e[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var g=d.value;g<128&&n.push(f(g))}}catch(t){l=!0,u=t}finally{try{!s&&p.return&&p.return()}finally{if(l)throw u}}var b=n.length,y=b;for(b&&n.push("-");y<i;){var x=c,w=!0,I=!1,A=void 0;try{for(var P,O=e[Symbol.iterator]();!(w=(P=O.next()).done);w=!0){var M=P.value;M>=o&&M<x&&(x=M)}}catch(t){I=!0,A=t}finally{try{!w&&O.return&&O.return()}finally{if(I)throw A}}var k=y+1;x-o>m((c-r)/k)&&v("overflow"),r+=(x-o)*k,o=x;var S=!0,E=!1,T=void 0;try{for(var R,L=e[Symbol.iterator]();!(S=(R=L.next()).done);S=!0){var z=R.value;if(z<o&&++r>c&&v("overflow"),z==o){for(var B=r,j=h;;j+=h){var D=j<=a?1:j>=a+26?26:j-a;if(B<D)break;var F=B-D,V=h-D;n.push(f(_(D+F%V,0))),B=m(F/V)}n.push(f(_(B,0))),a=C(r,k,y==b),r=0,++y}}}catch(t){E=!0,T=t}finally{try{!S&&L.return&&L.return()}finally{if(E)throw T}}++r,++o}return n.join("")}(t):t}))},w=function(t){return b(t,(function(t){return u.test(t)?function(t){var e=[],n=t.length,i=0,o=128,r=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var s=0;s<a;++s)t.charCodeAt(s)>=128&&v("not-basic"),e.push(t.charCodeAt(s));for(var l=a>0?a+1:0;l<n;){for(var u=i,d=1,p=h;;p+=h){l>=n&&v("invalid-input");var g=y(t.charCodeAt(l++));(g>=h||g>m((c-i)/d))&&v("overflow"),i+=g*d;var f=p<=r?1:p>=r+26?26:p-r;if(g<f)break;var b=h-f;d>m(c/b)&&v("overflow"),d*=b}var _=e.length+1;r=C(i-u,_,0==u),m(i/_)>c-o&&v("overflow"),o+=m(i/_),i%=_,e.splice(i++,0,o)}return String.fromCodePoint.apply(String,e)}(t.slice(4).toLowerCase()):t}))},I={};function A(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function P(t){for(var e="",n=0,i=t.length;n<i;){var o=parseInt(t.substr(n+1,2),16);if(o<128)e+=String.fromCharCode(o),n+=3;else if(o>=194&&o<224){if(i-n>=6){var r=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&o)<<6|63&r)}else e+=t.substr(n,6);n+=6}else if(o>=224){if(i-n>=9){var a=parseInt(t.substr(n+4,2),16),s=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&o)<<12|(63&a)<<6|63&s)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function O(t,e){function n(t){var n=P(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,A).replace(e.PCT_ENCODED,o)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,A).replace(e.PCT_ENCODED,o)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,A).replace(e.PCT_ENCODED,o)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,A).replace(e.PCT_ENCODED,o)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,A).replace(e.PCT_ENCODED,o)),t}function M(t){return t.replace(/^0*(.*)/,"$1")||"0"}function k(t,e){var n=t.match(e.IPV4ADDRESS)||[],i=l(n,2)[1];return i?i.split(".").map(M).join("."):t}function S(t,e){var n=t.match(e.IPV6ADDRESS)||[],i=l(n,3),o=i[1],r=i[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),s=l(a,2),c=s[0],h=s[1],u=h?h.split(":").map(M):[],d=c.split(":").map(M),p=e.IPV4ADDRESS.test(d[d.length-1]),g=p?7:8,m=d.length-g,f=Array(g),v=0;v<g;++v)f[v]=u[v]||d[m+v]||"";p&&(f[g-1]=k(f[g-1],e));var b=f.reduce((function(t,e,n){if(!e||"0"===e){var i=t[t.length-1];i&&i.index+i.length===n?i.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],y=void 0;if(b&&b.length>1){var _=f.slice(0,b.index),C=f.slice(b.index+b.length);y=_.join(":")+"::"+C.join(":")}else y=f.join(":");return r&&(y+="%"+r),y}return t}var E=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,T=void 0==="".match(/(){0}/)[1];function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==e.iri?s:a;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var o=t.match(E);if(o){T?(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5])):(n.scheme=o[1]||void 0,n.userinfo=-1!==t.indexOf("@")?o[3]:void 0,n.host=-1!==t.indexOf("//")?o[4]:void 0,n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=-1!==t.indexOf("?")?o[7]:void 0,n.fragment=-1!==t.indexOf("#")?o[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),n.host&&(n.host=S(k(n.host,i),i)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var r=I[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||r&&r.unicodeSupport)O(n,i);else{if(n.host&&(e.domainHost||r&&r.domainHost))try{n.host=x(n.host.replace(i.PCT_ENCODED,P).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}O(n,a)}r&&r.parse&&r.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function L(t,e){var n=!1!==e.iri?s:a,i=[];return void 0!==t.userinfo&&(i.push(t.userinfo),i.push("@")),void 0!==t.host&&i.push(S(k(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"==typeof t.port&&(i.push(":"),i.push(t.port.toString(10))),i.length?i.join(""):void 0}var z=/^\.\.?\//,B=/^\/\.(\/|$)/,j=/^\/\.\.(\/|$)/,D=/^\/?(?:.|\n)*?(?=\/|$)/;function F(t){for(var e=[];t.length;)if(t.match(z))t=t.replace(z,"");else if(t.match(B))t=t.replace(B,"/");else if(t.match(j))t=t.replace(j,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(D);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];t=t.slice(i.length),e.push(i)}return e.join("")}function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?s:a,i=[],o=I[(e.scheme||t.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||o&&o.domainHost)try{t.host=e.iri?w(t.host):x(t.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}O(t,n),"suffix"!==e.reference&&t.scheme&&(i.push(t.scheme),i.push(":"));var r=L(t,e);if(void 0!==r&&("suffix"!==e.reference&&i.push("//"),i.push(r),t.path&&"/"!==t.path.charAt(0)&&i.push("/")),void 0!==t.path){var l=t.path;e.absolutePath||o&&o.absolutePath||(l=F(l)),void 0===r&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==t.query&&(i.push("?"),i.push(t.query)),void 0!==t.fragment&&(i.push("#"),i.push(t.fragment)),i.join("")}function N(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],o={};return i||(t=R(V(t,n),n),e=R(V(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(o.scheme=e.scheme,o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=F(e.path||""),o.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=F(e.path||""),o.query=e.query):(e.path?("/"===e.path.charAt(0)?o.path=F(e.path):(o.path=void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:e.path:"/"+e.path,o.path=F(o.path)),o.query=e.query):(o.path=t.path,o.query=void 0!==e.query?e.query:t.query),o.userinfo=t.userinfo,o.host=t.host,o.port=t.port),o.scheme=t.scheme),o.fragment=e.fragment,o}function $(t,e){return t&&t.toString().replace(e&&e.iri?s.PCT_ENCODED:a.PCT_ENCODED,P)}var Z={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},G={scheme:"https",domainHost:Z.domainHost,parse:Z.parse,serialize:Z.serialize},W={},H="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",U=n(n("%[EFef]"+K+"%"+K+K+"%"+K+K)+"|"+n("%[89A-Fa-f]"+K+"%"+K+K)+"|"+n("%"+K+K)),X=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Y=new RegExp(H,"g"),J=new RegExp(U,"g"),q=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),Q=new RegExp(e("[^]",H,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),tt=Q;function et(t){var e=P(t);return e.match(Y)?e:t}var nt={scheme:"mailto",parse:function t(e,n){var i=e,o=i.to=i.path?i.path.split(","):[];if(i.path=void 0,i.query){for(var r=!1,a={},s=i.query.split("&"),l=0,c=s.length;l<c;++l){var h=s[l].split("=");switch(h[0]){case"to":for(var u=h[1].split(","),d=0,p=u.length;d<p;++d)o.push(u[d]);break;case"subject":i.subject=$(h[1],n);break;case"body":i.body=$(h[1],n);break;default:r=!0,a[$(h[0],n)]=$(h[1],n)}}r&&(i.headers=a)}i.query=void 0;for(var g=0,m=o.length;g<m;++g){var f=o[g].split("@");if(f[0]=$(f[0]),n.unicodeSupport)f[1]=$(f[1],n).toLowerCase();else try{f[1]=x($(f[1],n).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}o[g]=f.join("@")}return i},serialize:function t(e,n){var i=e,r=function(t){return null!=t?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[]}(e.to);if(r){for(var a=0,s=r.length;a<s;++a){var l=String(r[a]),c=l.lastIndexOf("@"),h=l.slice(0,c).replace(J,et).replace(J,o).replace(q,A),u=l.slice(c+1);try{u=n.iri?w(u):x($(u,n).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to "+(n.iri?"Unicode":"ASCII")+" via punycode: "+t}r[a]=h+"@"+u}i.path=r.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var g in d)d[g]!==W[g]&&p.push(g.replace(J,et).replace(J,o).replace(Q,A)+"="+d[g].replace(J,et).replace(J,o).replace(tt,A));return p.length&&(i.query=p.join("&")),i}},it=/^([^\:]+)\:(.*)/,ot={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(it),i=t;if(n){var o=e.scheme||i.scheme||"urn",r=n[1].toLowerCase(),a=n[2],s=I[o+":"+(e.nid||r)];i.nid=r,i.nss=a,i.path=void 0,s&&(i=s.parse(i,e))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(t,e){var n=t.nid,i=I[(e.scheme||t.scheme||"urn")+":"+(e.nid||n)];i&&(t=i.serialize(t,e));var o=t;return o.path=(n||e.nid)+":"+t.nss,o}},rt=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,at={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(rt)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};I[Z.scheme]=Z,I[G.scheme]=G,I[nt.scheme]=nt,I[ot.scheme]=ot,I[at.scheme]=at,t.SCHEMES=I,t.pctEncChar=A,t.pctDecChars=P,t.parse=R,t.removeDotSegments=F,t.serialize=V,t.resolveComponents=N,t.resolve=function(t,e,n){var i=function(t,e){var n={scheme:"null"};if(e)for(var i in e)n[i]=e[i];return n}(0,n);return V(N(R(t,i),R(e,i),i,!0),i)},t.normalize=function(t,e){return"string"==typeof t?t=V(R(t,e),e):"object"===i(t)&&(t=R(V(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=V(R(t,n),n):"object"===i(t)&&(t=V(t,n)),"string"==typeof e?e=V(R(e,n),n):"object"===i(e)&&(e=V(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?s.ESCAPE:a.ESCAPE,A)},t.unescapeComponent=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=0,i=t.length,o=0;o<i;)n++,55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<i&&56320==(64512&(e=t.charCodeAt(o)))&&o++;return n}},function(t,e,n){"use strict";var i=t.exports=function(t,e,n){"function"==typeof e&&(n=e,e={}),function t(e,n,o,r,a,s,l,c,h,u){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var d in n(r,a,s,l,c,h,u),r){var p=r[d];if(Array.isArray(p)){if(d in i.arrayKeywords)for(var g=0;g<p.length;g++)t(e,n,o,p[g],a+"/"+d+"/"+g,s,a,d,r,g)}else if(d in i.propsKeywords){if(p&&"object"==typeof p)for(var m in p)t(e,n,o,p[m],a+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,d,r,m)}else(d in i.keywords||e.allKeys&&!(d in i.skipKeywords))&&t(e,n,o,p,a+"/"+d,s,a,d,r)}o(r,a,s,l,c,h,u)}}(e,"function"==typeof(n=e.cb||n)?n:n.pre||function(){},n.post||function(){},t,"",t)};i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(t,e,n){"use strict";var i=t.exports=function(){this._cache={}};i.prototype.put=function(t,e){this._cache[t]=e},i.prototype.get=function(t){return this._cache[t]},i.prototype.del=function(t){delete this._cache[t]},i.prototype.clear=function(){this._cache={}}},function(t,e,n){"use strict";var i=n(7),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,h=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,u=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,g=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(t){return i.copy(m[t="full"==t?"full":"fast"])}function f(t){var e=t.match(o);if(!e)return!1;var n,i=+e[2],a=+e[3];return 1<=i&&i<=12&&1<=a&&a<=(2!=i||(n=+e[1])%4!=0||n%100==0&&n%400!=0?r[i]:29)}function v(t,e){var n=t.match(a);if(!n)return!1;var i=n[1],o=n[2],r=n[3];return(i<=23&&o<=59&&r<=59||23==i&&59==o&&60==r)&&(!e||n[5])}(t.exports=m).fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:h,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:u,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":g},m.full={date:f,time:v,"date-time":function(t){var e=t.split(b);return 2==e.length&&f(e[0])&&v(e[1],!0)},uri:function(t){return y.test(t)&&l.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:h,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:u,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":g};var b=/t|\s/i,y=/\/|:/,_=/[^\\]\\Z/;function C(t){if(_.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}}},function(t,e,n){"use strict";var i=n(52),o=n(7).toHash;t.exports=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=o(e),t.types=o(["number","integer","string","array","object","boolean","null"]),t.forEach((function(n){n.rules=n.rules.map((function(n){var o,r;return"object"==typeof n&&(r=n[o=Object.keys(n)[0]],n=o,r.forEach((function(n){e.push(n),t.all[n]=!0}))),e.push(n),t.all[n]={keyword:n,code:i[n],implements:r}})),t.all.$comment={keyword:"$comment",code:i.$comment},n.type&&(t.types[n.type]=n)})),t.keywords=o(e.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},function(t,e,n){"use strict";t.exports={$ref:n(53),allOf:n(54),anyOf:n(55),$comment:n(56),const:n(57),contains:n(58),dependencies:n(59),enum:n(60),format:n(61),if:n(62),items:n(63),maximum:n(28),minimum:n(28),maxItems:n(29),minItems:n(29),maxLength:n(30),minLength:n(30),maxProperties:n(31),minProperties:n(31),multipleOf:n(64),not:n(65),oneOf:n(66),pattern:n(67),properties:n(68),propertyNames:n(69),required:n(70),uniqueItems:n(71),validate:n(27)}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o=" ",r=t.dataLevel,a=t.schema[e],s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(r||""),h="valid"+t.level;if("#"==a||"#/"==a)i=t.isRoot?(n=t.async,"validate"):(n=!0===t.root.schema.$async,"root.refVal[0]");else{var u,d,p=t.resolveRef(t.baseId,a,t.isRoot);if(void 0===p){var g,m=t.MissingRefError.message(t.baseId,a);if("fail"==t.opts.missingRefs){t.logger.error(m),(g=g||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { ref: '"+t.util.escapeQuotes(a)+"' } ",!1!==t.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(a)+"' "),t.opts.verbose&&(o+=" , schema: "+t.util.toQuotedString(a)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),o+=" } "):o+=" {} ";var f=o;o=g.pop(),o+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,a,m);t.logger.warn(m),l&&(o+=" if (true) { ")}}else p.inline?((u=t.util.copy(t)).level++,d="valid"+u.level,u.schema=p.schema,u.schemaPath="",u.errSchemaPath=a,o+=" "+t.validate(u).replace(/validate\.schema/g,p.code)+" ",l&&(o+=" if ("+d+") { ")):(n=!0===p.$async||t.async&&!1!==p.$async,i=p.code)}if(i){(g=g||[]).push(o),o="",o+=t.opts.passContext?" "+i+".call(this, ":" "+i+"( ",o+=" "+c+", (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var v=o+=" , "+(r?"data"+(r-1||""):"parentData")+" , "+(r?t.dataPathArr[r]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),n){if(!t.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+h+"; "),o+=" try { await "+v+"; ",l&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+h+" = false; "),o+=" } ",l&&(o+=" if ("+h+") { ")}else o+=" if (!"+v+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.schema[e],o=t.schemaPath+t.util.getProperty(e),r=t.errSchemaPath+"/"+e,a=!t.opts.allErrors,s=t.util.copy(t),l="";s.level++;var c="valid"+s.level,h=s.baseId,u=!0,d=i;if(d)for(var p,g=-1,m=d.length-1;g<m;)p=d[g+=1],(t.opts.strictKeywords?"object"==typeof p&&0<Object.keys(p).length:t.util.schemaHasRules(p,t.RULES.all))&&(u=!1,s.schema=p,s.schemaPath=o+"["+g+"]",s.errSchemaPath=r+"/"+g,n+="  "+t.validate(s)+" ",s.baseId=h,a&&(n+=" if ("+c+") { ",l+="}"));return a&&(n+=u?" if (true) { ":" "+l.slice(0,-1)+" "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level;if(r.every((function(e){return t.opts.strictKeywords?"object"==typeof e&&0<Object.keys(e).length:t.util.schemaHasRules(e,t.RULES.all)}))){var m=d.baseId;n+=" var "+u+" = errors; var "+h+" = false;  ";var f=t.compositeRule;t.compositeRule=d.compositeRule=!0;var v=r;if(v)for(var b,y=-1,_=v.length-1;y<_;)b=v[y+=1],d.schema=b,d.schemaPath=a+"["+y+"]",d.errSchemaPath=s+"/"+y,n+="  "+t.validate(d)+" ",d.baseId=m,n+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",p+="}";t.compositeRule=d.compositeRule=f,n+=" "+p+" if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(n+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.errSchemaPath+"/"+e,o=t.util.toQuotedString(t.schema[e]);return!0===t.opts.$comment?n+=" console.log("+o+");":"function"==typeof t.opts.$comment&&(n+=" self._opts.$comment("+o+", "+t.util.toQuotedString(i)+", validate.root.schema);"),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u=t.opts.$data&&r&&r.$data;u&&(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; "),u||(n+=" var schema"+i+" = validate.schema"+a+";");var d=d||[];d.push(n+="var "+h+" = equal("+c+", schema"+i+"); if (!"+h+") {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { allowedValue: schema"+i+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u="errs__"+i,d=t.util.copy(t);d.level++;var p,g,m,f="valid"+d.level,v="i"+i,b=d.dataLevel=t.dataLevel+1,y="data"+b,_=t.baseId,C=t.opts.strictKeywords?"object"==typeof r&&0<Object.keys(r).length:t.util.schemaHasRules(r,t.RULES.all);n+="var "+u+" = errors;var "+h+";",C?(p=t.compositeRule,t.compositeRule=d.compositeRule=!0,d.schema=r,d.schemaPath=a,d.errSchemaPath=s,n+=" var "+f+" = false; for (var "+v+" = 0; "+v+" < "+c+".length; "+v+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0),g=c+"["+v+"]",d.dataPathArr[b]=v,m=t.validate(d),d.baseId=_,t.util.varOccurences(m,y)<2?n+=" "+t.util.varReplace(m,y,g)+" ":n+=" var "+y+" = "+g+"; "+m+" ",n+=" if ("+f+") break; }  ",t.compositeRule=d.compositeRule=p,n+="  if (!"+f+") {"):n+=" if ("+c+".length == 0) {";var x=x||[];x.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should contain a valid item' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var w=n;return n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",C&&(n+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } "),t.opts.allErrors&&(n+=" } "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="errs__"+i,u=t.util.copy(t),d="";u.level++;var p,g="valid"+u.level,m={},f={},v=t.opts.ownProperties;for(y in r)"__proto__"!=y&&(L=r[y],(p=Array.isArray(L)?f:m)[y]=L);n+="var "+h+" = errors;";var b=t.errorPath;for(var y in n+="var missing"+i+";",f)if((p=f[y]).length){if(n+=" if ( "+c+t.util.getProperty(y)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(y)+"') "),l){n+=" && ( ";var _=p;if(_)for(var C=-1,x=_.length-1;C<x;)M=_[C+=1],C&&(n+=" || "),n+=" ( ( "+(T=c+(E=t.util.getProperty(M)))+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(M)+"') "),n+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?M:E)+") ) ";n+=")) {  ";var w="missing"+i,I="' + "+w+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,w,!0):b+" + "+w);var A=A||[];A.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { property: '"+t.util.escapeQuotes(y)+"', missingProperty: '"+I+"', depsCount: "+p.length+", deps: '"+t.util.escapeQuotes(1==p.length?p[0]:p.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",n+=1==p.length?"property "+t.util.escapeQuotes(p[0]):"properties "+t.util.escapeQuotes(p.join(", ")),n+=" when property "+t.util.escapeQuotes(y)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var P=n;n=A.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var O=p;if(O)for(var M,k=-1,S=O.length-1;k<S;){M=O[k+=1];var E=t.util.getProperty(M),T=(I=t.util.escapeQuotes(M),c+E);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,M,t.opts.jsonPointers)),n+=" if ( "+T+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(M)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { property: '"+t.util.escapeQuotes(y)+"', missingProperty: '"+I+"', depsCount: "+p.length+", deps: '"+t.util.escapeQuotes(1==p.length?p[0]:p.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",n+=1==p.length?"property "+t.util.escapeQuotes(p[0]):"properties "+t.util.escapeQuotes(p.join(", ")),n+=" when property "+t.util.escapeQuotes(y)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(d+="}",n+=" else { ")}t.errorPath=b;var R=u.baseId;for(var y in m){var L=m[y];(t.opts.strictKeywords?"object"==typeof L&&0<Object.keys(L).length:t.util.schemaHasRules(L,t.RULES.all))&&(n+=" "+g+" = true; if ( "+c+t.util.getProperty(y)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(y)+"') "),n+=") { ",u.schema=L,u.schemaPath=a+t.util.getProperty(y),u.errSchemaPath=s+"/"+t.util.escapeFragment(y),n+="  "+t.validate(u)+" ",u.baseId=R,n+=" }  ",l&&(n+=" if ("+g+") { ",d+="}"))}return l&&(n+="   "+d+" if ("+h+" == errors) {"),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u=t.opts.$data&&r&&r.$data,d=(u&&(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; "),"i"+i),p="schema"+i;u||(n+=" var "+p+" = validate.schema"+a+";"),n+="var "+h+";",u&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=h+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+c+", "+p+"["+d+"])) { "+h+" = true; break; }",u&&(n+="  }  ");var g=g||[];g.push(n+=" if (!"+h+") {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { allowedValues: schema"+i+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=g.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",o=t.level,r=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(r||"");if(!1===t.opts.format)return c&&(i+=" if (true) { "),i;var u,d=t.opts.$data&&a&&a.$data,p=d?(i+=" var schema"+o+" = "+t.util.getData(a.$data,r,t.dataPathArr)+"; ","schema"+o):a,g=t.opts.unknownFormats,m=Array.isArray(g);if(d)i+=" var "+(u="format"+o)+" = formats["+p+"]; var "+(f="isObject"+o)+" = typeof "+u+" == 'object' && !("+u+" instanceof RegExp) && "+u+".validate; var "+(b="formatType"+o)+" = "+f+" && "+u+".type || 'string'; if ("+f+") { ",t.async&&(i+=" var async"+o+" = "+u+".async; "),i+=" "+u+" = "+u+".validate; } if (  ",d&&(i+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),i+=" (","ignore"!=g&&(i+=" ("+p+" && !"+u+" ",m&&(i+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),i+=") || "),i+=" ("+u+" && "+b+" == '"+n+"' && !(typeof "+u+" == 'function' ? ",i+=t.async?" (async"+o+" ? await "+u+"("+h+") : "+u+"("+h+")) ":" "+u+"("+h+") ",i+=" : "+u+".test("+h+"))))) {";else{if(!(u=t.formats[a])){if("ignore"==g)return t.logger.warn('unknown format "'+a+'" ignored in schema at path "'+t.errSchemaPath+'"'),c&&(i+=" if (true) { "),i;if(m&&0<=g.indexOf(a))return c&&(i+=" if (true) { "),i;throw new Error('unknown format "'+a+'" is used in schema at path "'+t.errSchemaPath+'"')}var f,v,b=(f="object"==typeof u&&!(u instanceof RegExp)&&u.validate)&&u.type||"string";if(f&&(v=!0===u.async,u=u.validate),b!=n)return c&&(i+=" if (true) { "),i;if(v){if(!t.async)throw new Error("async format in sync schema");i+=" if (!(await "+(y="formats"+t.util.getProperty(a)+".validate")+"("+h+"))) { "}else{i+=" if (! ";var y="formats"+t.util.getProperty(a);f&&(y+=".validate"),i+="function"==typeof u?" "+y+"("+h+") ":" "+y+".test("+h+") ",i+=") { "}}var _=_||[];_.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { format:  ",i+=d?""+p:""+t.util.toQuotedString(a),i+="  } ",!1!==t.opts.messages&&(i+=" , message: 'should match format \"",i+=d?"' + "+p+" + '":""+t.util.escapeQuotes(a),i+="\"' "),t.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+s:""+t.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var C=i;return i=_.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u="errs__"+i,d=t.util.copy(t);d.level++;var p,g,m="valid"+d.level,f=t.schema.then,v=t.schema.else,b=void 0!==f&&(t.opts.strictKeywords?"object"==typeof f&&0<Object.keys(f).length:t.util.schemaHasRules(f,t.RULES.all)),y=void 0!==v&&(t.opts.strictKeywords?"object"==typeof v&&0<Object.keys(v).length:t.util.schemaHasRules(v,t.RULES.all)),_=d.baseId;return b||y?(d.createErrors=!1,d.schema=r,d.schemaPath=a,d.errSchemaPath=s,n+=" var "+u+" = errors; var "+h+" = true;  ",g=t.compositeRule,t.compositeRule=d.compositeRule=!0,n+="  "+t.validate(d)+" ",d.baseId=_,d.createErrors=!0,n+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",t.compositeRule=d.compositeRule=g,b?(n+=" if ("+m+") {  ",d.schema=t.schema.then,d.schemaPath=t.schemaPath+".then",d.errSchemaPath=t.errSchemaPath+"/then",n+="  "+t.validate(d)+" ",d.baseId=_,n+=" "+h+" = "+m+"; ",b&&y?n+=" var "+(p="ifClause"+i)+" = 'then'; ":p="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+m+") { ",y&&(d.schema=t.schema.else,d.schemaPath=t.schemaPath+".else",d.errSchemaPath=t.errSchemaPath+"/else",n+="  "+t.validate(d)+" ",d.baseId=_,n+=" "+h+" = "+m+"; ",b&&y?n+=" var "+(p="ifClause"+i)+" = 'else'; ":p="'else'",n+=" } "),n+=" if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { failingKeyword: "+p+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match \"' + "+p+" + '\" schema' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(n+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")):l&&(n+=" if (true) { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level,m="i"+i,f=d.dataLevel=t.dataLevel+1,v="data"+f,b=t.baseId;if(n+="var "+u+" = errors;var "+h+";",Array.isArray(r)){var y,_,C,x=t.schema.additionalItems;!1===x&&(n+=" "+h+" = "+c+".length <= "+r.length+"; ",y=s,s=t.errSchemaPath+"/additionalItems",(_=_||[]).push(n+="  if (!"+h+") {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { limit: "+r.length+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have more than "+r.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",C=n,n=_.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",s=y,l&&(p+="}",n+=" else { "));var w=r;if(w)for(var I=-1,A=w.length-1;I<A;){var P,O,M=w[I+=1];(t.opts.strictKeywords?"object"==typeof M&&0<Object.keys(M).length:t.util.schemaHasRules(M,t.RULES.all))&&(n+=" "+g+" = true; if ("+c+".length > "+I+") { ",P=c+"["+I+"]",d.schema=M,d.schemaPath=a+"["+I+"]",d.errSchemaPath=s+"/"+I,d.errorPath=t.util.getPathExpr(t.errorPath,I,t.opts.jsonPointers,!0),d.dataPathArr[f]=I,O=t.validate(d),d.baseId=b,t.util.varOccurences(O,v)<2?n+=" "+t.util.varReplace(O,v,P)+" ":n+=" var "+v+" = "+P+"; "+O+" ",n+=" }  ",l&&(n+=" if ("+g+") { ",p+="}"))}"object"==typeof x&&(t.opts.strictKeywords?"object"==typeof x&&0<Object.keys(x).length:t.util.schemaHasRules(x,t.RULES.all))&&(d.schema=x,d.schemaPath=t.schemaPath+".additionalItems",d.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" "+g+" = true; if ("+c+".length > "+r.length+") {  for (var "+m+" = "+r.length+"; "+m+" < "+c+".length; "+m+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0),P=c+"["+m+"]",d.dataPathArr[f]=m,O=t.validate(d),d.baseId=b,t.util.varOccurences(O,v)<2?n+=" "+t.util.varReplace(O,v,P)+" ":n+=" var "+v+" = "+P+"; "+O+" ",l&&(n+=" if (!"+g+") break; "),n+=" } }  ",l&&(n+=" if ("+g+") { ",p+="}"))}else(t.opts.strictKeywords?"object"==typeof r&&0<Object.keys(r).length:t.util.schemaHasRules(r,t.RULES.all))&&(d.schema=r,d.schemaPath=a,d.errSchemaPath=s,n+="  for (var "+m+" = 0; "+m+" < "+c+".length; "+m+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0),P=c+"["+m+"]",d.dataPathArr[f]=m,O=t.validate(d),d.baseId=b,t.util.varOccurences(O,v)<2?n+=" "+t.util.varReplace(O,v,P)+" ":n+=" var "+v+" = "+P+"; "+O+" ",l&&(n+=" if (!"+g+") break; "),n+=" }");return l&&(n+=" "+p+" if ("+u+" == errors) {"),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h=t.opts.$data&&r&&r.$data,u=h?(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; ","schema"+i):r;if(!h&&"number"!=typeof r)throw new Error(e+" must be number");n+="var division"+i+";if (",h&&(n+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),n+=" (division"+i+" = "+c+" / "+u+", ",n+=t.opts.multipleOfPrecision?" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+t.opts.multipleOfPrecision+" ":" division"+i+" !== parseInt(division"+i+") ",n+=" ) ",h&&(n+="  )  ");var d=d||[];d.push(n+=" ) {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { multipleOf: "+u+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be multiple of ",n+=h?"' + "+u:u+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="errs__"+i,u=t.util.copy(t);u.level++;var d,p,g,m,f="valid"+u.level;return(t.opts.strictKeywords?"object"==typeof r&&0<Object.keys(r).length:t.util.schemaHasRules(r,t.RULES.all))?(u.schema=r,u.schemaPath=a,u.errSchemaPath=s,n+=" var "+h+" = errors;  ",d=t.compositeRule,t.compositeRule=u.compositeRule=!0,u.createErrors=!1,u.opts.allErrors&&(p=u.opts.allErrors,u.opts.allErrors=!1),n+=" "+t.validate(u)+" ",u.createErrors=!0,p&&(u.opts.allErrors=p),t.compositeRule=u.compositeRule=d,(g=g||[]).push(n+=" if ("+f+") {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",m=n,n=g.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")):(n+="  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ")),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level,m=d.baseId,f="prevValid"+i,v="passingSchemas"+i;n+="var "+u+" = errors , "+f+" = false , "+h+" = false , "+v+" = null; ";var b=t.compositeRule;t.compositeRule=d.compositeRule=!0;var y=r;if(y)for(var _,C=-1,x=y.length-1;C<x;)_=y[C+=1],(t.opts.strictKeywords?"object"==typeof _&&0<Object.keys(_).length:t.util.schemaHasRules(_,t.RULES.all))?(d.schema=_,d.schemaPath=a+"["+C+"]",d.errSchemaPath=s+"/"+C,n+="  "+t.validate(d)+" ",d.baseId=m):n+=" var "+g+" = true; ",C&&(n+=" if ("+g+" && "+f+") { "+h+" = false; "+v+" = ["+v+", "+C+"]; } else { ",p+="}"),n+=" if ("+g+") { "+h+" = "+f+" = true; "+v+" = "+C+"; }";return t.compositeRule=d.compositeRule=b,n+=p+"if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { passingSchemas: "+v+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(n+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h=t.opts.$data&&r&&r.$data,u=h?(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; ","schema"+i):r;n+="if ( ",h&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" !"+(h?"(new RegExp("+u+"))":t.usePattern(r))+".test("+c+") ) {   ";var d=d||[];d.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { pattern:  ",n+=h?""+u:""+t.util.toQuotedString(r),n+="  } ",!1!==t.opts.messages&&(n+=" , message: 'should match pattern \"",n+=h?"' + "+u+" + '":""+t.util.escapeQuotes(r),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+t.util.toQuotedString(r),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="errs__"+i,u=t.util.copy(t),d="";u.level++;var p,g,m,f="valid"+u.level,v="key"+i,b="idx"+i,y=u.dataLevel=t.dataLevel+1,_="data"+y,C="dataProperties"+i,x=Object.keys(r||{}).filter(L),w=t.schema.patternProperties||{},I=Object.keys(w).filter(L),A=t.schema.additionalProperties,P=x.length||I.length,O=!1===A,M="object"==typeof A&&Object.keys(A).length,k=t.opts.removeAdditional,S=O||M||k,E=t.opts.ownProperties,T=t.baseId,R=t.schema.required;function L(t){return"__proto__"!==t}if(R&&(!t.opts.$data||!R.$data)&&R.length<t.opts.loopRequired&&(p=t.util.toHash(R)),n+="var "+h+" = errors;var "+f+" = true;",E&&(n+=" var "+C+" = undefined;"),S){if(n+=E?" "+C+" = "+C+" || Object.keys("+c+"); for (var "+b+"=0; "+b+"<"+C+".length; "+b+"++) { var "+v+" = "+C+"["+b+"]; ":" for (var "+v+" in "+c+") { ",P){if(n+=" var isAdditional"+i+" = !(false ",x.length)if(8<x.length)n+=" || validate.schema"+a+".hasOwnProperty("+v+") ";else{var z=x;if(z)for(var B=-1,j=z.length-1;B<j;)Z=z[B+=1],n+=" || "+v+" == "+t.util.toQuotedString(Z)+" "}if(I.length){var D=I;if(D)for(var F=-1,V=D.length-1;F<V;)nt=D[F+=1],n+=" || "+t.usePattern(nt)+".test("+v+") "}n+=" ); if (isAdditional"+i+") { "}"all"==k?n+=" delete "+c+"["+v+"]; ":(X=t.errorPath,g="' + "+v+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers)),O?k?n+=" delete "+c+"["+v+"]; ":(Y=s,s=t.errSchemaPath+"/additionalProperties",(q=q||[]).push(n+=" "+f+" = false; "),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { additionalProperty: '"+g+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",n+="' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",Q=n,n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Q+"]); ":" validate.errors = ["+Q+"]; return false; ":" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s=Y,l&&(n+=" break; ")):M&&("failing"==k?(n+=" var "+h+" = errors;  ",m=t.compositeRule,t.compositeRule=u.compositeRule=!0,u.schema=A,u.schemaPath=t.schemaPath+".additionalProperties",u.errSchemaPath=t.errSchemaPath+"/additionalProperties",u.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers),rt=c+"["+v+"]",u.dataPathArr[y]=v,at=t.validate(u),u.baseId=T,t.util.varOccurences(at,_)<2?n+=" "+t.util.varReplace(at,_,rt)+" ":n+=" var "+_+" = "+rt+"; "+at+" ",n+=" if (!"+f+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+v+"]; }  ",t.compositeRule=u.compositeRule=m):(u.schema=A,u.schemaPath=t.schemaPath+".additionalProperties",u.errSchemaPath=t.errSchemaPath+"/additionalProperties",u.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers),rt=c+"["+v+"]",u.dataPathArr[y]=v,at=t.validate(u),u.baseId=T,t.util.varOccurences(at,_)<2?n+=" "+t.util.varReplace(at,_,rt)+" ":n+=" var "+_+" = "+rt+"; "+at+" ",l&&(n+=" if (!"+f+") break; "))),t.errorPath=X),P&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+f+") { ",d+="}")}var N=t.opts.useDefaults&&!t.compositeRule;if(x.length){var $=x;if($)for(var Z,G=-1,W=$.length-1;G<W;){var H,K,U,X,Y,J,q,Q,tt=r[Z=$[G+=1]];(t.opts.strictKeywords?"object"==typeof tt&&0<Object.keys(tt).length:t.util.schemaHasRules(tt,t.RULES.all))&&(rt=c+(H=t.util.getProperty(Z)),K=N&&void 0!==tt.default,u.schema=tt,u.schemaPath=a+H,u.errSchemaPath=s+"/"+t.util.escapeFragment(Z),u.errorPath=t.util.getPath(t.errorPath,Z,t.opts.jsonPointers),u.dataPathArr[y]=t.util.toQuotedString(Z),at=t.validate(u),u.baseId=T,t.util.varOccurences(at,_)<2?(at=t.util.varReplace(at,_,rt),U=rt):n+=" var "+(U=_)+" = "+rt+"; ",K?n+=" "+at+" ":(p&&p[Z]?(n+=" if ( "+U+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(Z)+"') "),n+=") { "+f+" = false; ",X=t.errorPath,Y=s,J=t.util.escapeQuotes(Z),t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(X,Z,t.opts.jsonPointers)),s=t.errSchemaPath+"/required",(q=q||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+J+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+J+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",Q=n,n=q.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Q+"]); ":" validate.errors = ["+Q+"]; return false; ":" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s=Y,t.errorPath=X,n+=" } else { "):l?(n+=" if ( "+U+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(Z)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+U+" !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(Z)+"') "),n+=" ) { "),n+=" "+at+" } ")),l&&(n+=" if ("+f+") { ",d+="}")}}if(I.length){var et=I;if(et)for(var nt,it=-1,ot=et.length-1;it<ot;){var rt,at;tt=w[nt=et[it+=1]],(t.opts.strictKeywords?"object"==typeof tt&&0<Object.keys(tt).length:t.util.schemaHasRules(tt,t.RULES.all))&&(u.schema=tt,u.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(nt),u.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(nt),n+=E?" "+C+" = "+C+" || Object.keys("+c+"); for (var "+b+"=0; "+b+"<"+C+".length; "+b+"++) { var "+v+" = "+C+"["+b+"]; ":" for (var "+v+" in "+c+") { ",n+=" if ("+t.usePattern(nt)+".test("+v+")) { ",u.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers),rt=c+"["+v+"]",u.dataPathArr[y]=v,at=t.validate(u),u.baseId=T,t.util.varOccurences(at,_)<2?n+=" "+t.util.varReplace(at,_,rt)+" ":n+=" var "+_+" = "+rt+"; "+at+" ",l&&(n+=" if (!"+f+") break; "),n+=" } ",l&&(n+=" else "+f+" = true; "),n+=" }  ",l&&(n+=" if ("+f+") { ",d+="}"))}}return l&&(n+=" "+d+" if ("+h+" == errors) {"),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="errs__"+i,u=t.util.copy(t);u.level++;var d,p,g,m,f,v,b,y,_,C,x,w="valid"+u.level;return n+="var "+h+" = errors;",(t.opts.strictKeywords?"object"==typeof r&&0<Object.keys(r).length:t.util.schemaHasRules(r,t.RULES.all))&&(u.schema=r,u.schemaPath=a,u.errSchemaPath=s,p="idx"+i,g="i"+i,m="' + "+(d="key"+i)+" + '",f="data"+(u.dataLevel=t.dataLevel+1),v="dataProperties"+i,y=t.baseId,(b=t.opts.ownProperties)&&(n+=" var "+v+" = undefined; "),n+=b?" "+v+" = "+v+" || Object.keys("+c+"); for (var "+p+"=0; "+p+"<"+v+".length; "+p+"++) { var "+d+" = "+v+"["+p+"]; ":" for (var "+d+" in "+c+") { ",n+=" var startErrs"+i+" = errors; ",_=d,C=t.compositeRule,t.compositeRule=u.compositeRule=!0,x=t.validate(u),u.baseId=y,t.util.varOccurences(x,f)<2?n+=" "+t.util.varReplace(x,f,_)+" ":n+=" var "+f+" = "+_+"; "+x+" ",t.compositeRule=u.compositeRule=C,n+=" if (!"+w+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+d+"; }   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { propertyName: '"+m+"' } ",!1!==t.opts.messages&&(n+=" , message: 'property name \\'"+m+"\\' is invalid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(n+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"),l&&(n+="  if ("+h+" == errors) {"),n}},function(t,e,n){"use strict";t.exports=function(t,e){var n=" ",i=t.level,o=t.dataLevel,r=t.schema[e],a=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+i,u=t.opts.$data&&r&&r.$data,d=(u&&(n+=" var schema"+i+" = "+t.util.getData(r.$data,o,t.dataPathArr)+"; "),"schema"+i);if(!u)if(r.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var p=[],g=r;if(g)for(var m,f=-1,v=g.length-1;f<v;){m=g[f+=1];var b=t.schema.properties[m];b&&(t.opts.strictKeywords?"object"==typeof b&&0<Object.keys(b).length:t.util.schemaHasRules(b,t.RULES.all))||(p[p.length]=m)}}else p=r;if(u||p.length){var y=t.errorPath,_=u||p.length>=t.opts.loopRequired,C=t.opts.ownProperties;if(l)if(n+=" var missing"+i+"; ",_){u||(n+=" var "+d+" = validate.schema"+a+"; ");var x="' + "+(M="schema"+i+"["+(P="i"+i)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(y,M,t.opts.jsonPointers)),n+=" var "+h+" = true; ",u&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { "+h+" = "+c+"["+d+"["+P+"]] !== undefined ",C&&(n+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+d+"["+P+"]) "),n+="; if (!"+h+") break; } ",u&&(n+="  }  "),(I=I||[]).push(n+="  if (!"+h+") {   "),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+x+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+x+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var w=n;n=I.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var I,A=p;if(A)for(var P=-1,O=A.length-1;P<O;)S=A[P+=1],P&&(n+=" || "),n+=" ( ( "+(L=c+(R=t.util.getProperty(S)))+" === undefined ",C&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(S)+"') "),n+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?S:R)+") ) ";n+=") {  ",x="' + "+(M="missing"+i)+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(y,M,!0):y+" + "+M),(I=I||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+x+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+x+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",w=n,n=I.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(_){var M;u||(n+=" var "+d+" = validate.schema"+a+"; "),x="' + "+(M="schema"+i+"["+(P="i"+i)+"]")+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(y,M,t.opts.jsonPointers)),u&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+x+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+x+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { if ("+c+"["+d+"["+P+"]] === undefined ",C&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+d+"["+P+"]) "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+x+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+x+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(n+="  }  ")}else{var k=p;if(k)for(var S,E=-1,T=k.length-1;E<T;){S=k[E+=1];var R=t.util.getProperty(S),L=(x=t.util.escapeQuotes(S),c+R);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(y,S,t.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",C&&(n+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(S)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(s)+" , params: { missingProperty: '"+x+"' } ",!1!==t.opts.messages&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+x+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=y}else l&&(n+=" if (true) {");return n}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a=" ",s=t.level,l=t.dataLevel,c=t.schema[e],h=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,d=!t.opts.allErrors,p="data"+(l||""),g="valid"+s,m=t.opts.$data&&c&&c.$data,f=m?(a+=" var schema"+s+" = "+t.util.getData(c.$data,l,t.dataPathArr)+"; ","schema"+s):c;return(c||m)&&!1!==t.opts.uniqueItems?(m&&(a+=" var "+g+"; if ("+f+" === false || "+f+" === undefined) "+g+" = true; else if (typeof "+f+" != 'boolean') "+g+" = false; else { "),a+=" var i = "+p+".length , "+g+" = true , j; if (i > 1) { ",n=t.schema.items&&t.schema.items.type,i=Array.isArray(n),!n||"object"==n||"array"==n||i&&(0<=n.indexOf("object")||0<=n.indexOf("array"))?a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+g+" = false; break outer; } } } ":(a+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ",a+=" if ("+t.util["checkDataType"+(i?"s":"")](n,"item",t.opts.strictNumbers,!0)+") continue; ",i&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+g+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),a+=" } ",m&&(a+="  }  "),(o=o||[]).push(a+=" if (!"+g+") {   "),a="",!1!==t.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+h:""+c,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ",r=a,a=o.pop(),a+=!t.compositeRule&&d?t.async?" throw new ValidationError(["+r+"]); ":" validate.errors = ["+r+"]; return false; ":" var err = "+r+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",d&&(a+=" else { ")):d&&(a+=" if (true) { "),a}},function(t,e,n){"use strict";var i=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(t,e){for(var n=0;n<e.length;n++){t=JSON.parse(JSON.stringify(t));for(var o=e[n].split("/"),r=t,a=1;a<o.length;a++)r=r[o[a]];for(a=0;a<i.length;a++){var s=i[a],l=r[s];l&&(r[s]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}},function(t,e,n){"use strict";var i=n(19).MissingRef;t.exports=function t(e,n,o){var r=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(o=n,n=void 0);var a=s(e).then((function(){var t=r._addSchema(e,void 0,n);return t.validate||function e(o){try{return r._compile(o)}catch(t){if(t instanceof i)return function(t){var i=t.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+t.missingRef+" cannot be resolved");var a=r._loadingSchemas[i];return a||(a=r._loadingSchemas[i]=r._opts.loadSchema(i)).then(l,l),a.then((function(t){if(!c(i))return s(t).then((function(){c(i)||r.addSchema(t,i,void 0,n)}))})).then((function(){return e(o)}));function l(){delete r._loadingSchemas[i]}function c(t){return r._refs[t]||r._schemas[t]}}(t);throw t}}(t)}));return o&&a.then((function(t){o(null,t)}),o),a;function s(e){var n=e.$schema;return n&&!r.getSchema(n)?t.call(r,{$ref:n},!0):Promise.resolve()}}},function(t,e,n){"use strict";var i=/^[a-z_$][a-z0-9_$-]*$/i,o=n(75),r=n(76);t.exports={add:function(t,e){var n=this.RULES;if(n.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!i.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var r=e.type;if(Array.isArray(r))for(var a=0;a<r.length;a++)l(t,r[a],e);else l(t,r,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}function l(t,e,i){for(var r,a=0;a<n.length;a++){var s=n[a];if(s.type==e){r=s;break}}r||n.push(r={type:e,rules:[]});var l={keyword:t,definition:i,custom:!0,code:o,implements:i.implements};r.rules.push(l),n.custom[t]=l}return n.keywords[t]=n.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var n=0;n<e.length;n++)for(var i=e[n].rules,o=0;o<i.length;o++)if(i[o].keyword==t){i.splice(o,1);break}return this},validate:function t(e,n){t.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(r,!0);if(i(e))return!0;if(t.errors=i.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1}}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a,s,l=" ",c=t.level,h=t.dataLevel,u=t.schema[e],d=t.schemaPath+t.util.getProperty(e),p=t.errSchemaPath+"/"+e,g=!t.opts.allErrors,m="data"+(h||""),f="valid"+c,v="errs__"+c,b=t.opts.$data&&u&&u.$data,y=b?(l+=" var schema"+c+" = "+t.util.getData(u.$data,h,t.dataPathArr)+"; ","schema"+c):u,_="definition"+c,C=this.definition,x="";if(b&&C.$data){var w=C.validateSchema;l+=" var "+_+" = RULES.custom['"+e+"'].definition; var "+(s="keywordValidate"+c)+" = "+_+".validate;"}else{if(!(a=t.useCustomRule(this,u,t.schema,t)))return;y="validate.schema"+d,s=a.code,i=C.compile,o=C.inline,r=C.macro}var I,A,P,O,M,k,S,E,T,R,L=s+".errors",z="i"+c,B="ruleErr"+c,j=C.async;if(j&&!t.async)throw new Error("async keyword in sync schema");return o||r||(l+=L+" = null;"),l+="var "+v+" = errors;var "+f+";",b&&C.$data&&(x+="}",l+=" if ("+y+" === undefined) { "+f+" = true; } else { ",w&&(x+="}",l+=" "+f+" = "+_+".validateSchema("+y+"); if ("+f+") { ")),o?l+=C.statements?" "+a.validate+" ":" "+f+" = "+a.validate+"; ":r?(x="",(I=t.util.copy(t)).level++,A="valid"+I.level,I.schema=a.validate,I.schemaPath="",P=t.compositeRule,t.compositeRule=I.compositeRule=!0,O=t.validate(I).replace(/validate\.schema/g,s),t.compositeRule=I.compositeRule=P,l+=" "+O):((E=E||[]).push(l),l="",l+="  "+s+".call( ",l+=t.opts.passContext?"this":"self",l+=i||!1===C.schema?" , "+m+" ":" , "+y+" , "+m+" , validate.schema"+t.schemaPath+" ",l+=" , (dataPath || '')",'""'!=t.errorPath&&(l+=" + "+t.errorPath),S=l+=" , "+(M=h?"data"+(h-1||""):"parentData")+" , "+(k=h?t.dataPathArr[h]:"parentDataProperty")+" , rootData )  ",l=E.pop(),!1===C.errors?(l+=" "+f+" = ",j&&(l+="await "),l+=S+"; "):l+=j?" var "+(L="customErrors"+c)+" = null; try { "+f+" = await "+S+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+L+" = e.errors; else throw e; } ":" "+L+" = null; "+f+" = "+S+"; "),C.modifying&&(l+=" if ("+M+") "+m+" = "+M+"["+k+"];"),l+=""+x,C.valid?g&&(l+=" if (true) { "):(l+=" if ( ",void 0===C.valid?(l+=" !",l+=r?""+A:f):l+=" "+!C.valid+" ",n=this.keyword,(E=E||[]).push(l+=") { "),(E=E||[]).push(l=""),l="",!1!==t.createErrors?(l+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(l+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(l+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),l+=" } "):l+=" {} ",T=l,l=E.pop(),R=l+=!t.compositeRule&&g?t.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=E.pop(),o?C.errors?"full"!=C.errors&&(l+="  for (var "+z+"="+v+"; "+z+"<errors; "+z+"++) { var "+B+" = vErrors["+z+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+p+'"; } ',t.opts.verbose&&(l+=" "+B+".schema = "+y+"; "+B+".data = "+m+"; "),l+=" } "):!1===C.errors?l+=" "+R+" ":(l+=" if ("+v+" == errors) { "+R+" } else {  for (var "+z+"="+v+"; "+z+"<errors; "+z+"++) { var "+B+" = vErrors["+z+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+p+'"; } ',t.opts.verbose&&(l+=" "+B+".schema = "+y+"; "+B+".data = "+m+"; "),l+=" } } "):r?(l+="   var err =   ",!1!==t.createErrors?(l+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(l+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(l+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),l+=" } "):l+=" {} ",l+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&g&&(l+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===C.errors?l+=" "+R+" ":(l+=" if (Array.isArray("+L+")) { if (vErrors === null) vErrors = "+L+"; else vErrors = vErrors.concat("+L+"); errors = vErrors.length;  for (var "+z+"="+v+"; "+z+"<errors; "+z+"++) { var "+B+" = vErrors["+z+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+t.errorPath+";  "+B+'.schemaPath = "'+p+'";  ',t.opts.verbose&&(l+=" "+B+".schema = "+y+"; "+B+".data = "+m+"; "),l+=" } } else { "+R+" } "),l+=" } ",g&&(l+=" else { ")),l}},function(t,e,n){"use strict";var i=n(32);t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:i.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:i.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(t){t.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},function(t,e,n){"use strict";n.r(e),n.d(e,"treeModeMixins",(function(){return R}));var i=n(13),o=n.n(i),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.locked=!1}var e;return(e=[{key:"highlight",value:function(t){this.locked||(this.node!==t&&(this.node&&this.node.setHighlight(!1),this.node=t,this.node.setHighlight(!0)),this._cancelUnhighlight())}},{key:"unhighlight",value:function(){var t;this.locked||(t=this).node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout((function(){t.node.setHighlight(!1),t.node=void 0,t.unhighlightTimer=void 0}),0))}},{key:"_cancelUnhighlight",value:function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),a=n(0),s=function(){function t(e){function n(t){return e.node.findNodeByInternalPath(t)}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(t){n(t.parentPath).childs[t.index].updateField(t.oldValue)},redo:function(t){n(t.parentPath).childs[t.index].updateField(t.newValue)}},editValue:{undo:function(t){n(t.path).updateValue(t.oldValue)},redo:function(t){n(t.path).updateValue(t.newValue)}},changeType:{undo:function(t){n(t.path).changeType(t.oldType)},redo:function(t){n(t.path).changeType(t.newType)}},appendNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath);t.nodes.forEach((function(t){e.appendChild(t)}))}},insertBeforeNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.beforePath);t.nodes.forEach((function(t){e.insertBefore(t,i)}))}},insertAfterNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.afterPath);t.nodes.forEach((function(t){e.insertAfter(t,i),i=t}))}},removeNodes:{undo:function(t){var e=n(t.parentPath),i=e.childs[t.index]||e.append;t.nodes.forEach((function(t){e.insertBefore(t,i)}))},redo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))}},duplicateNodes:{undo:function(t){var e=n(t.parentPath);t.clonePaths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.afterPath);t.paths.map(n).forEach((function(t){var n,o=t.clone();"object"===e.type&&(n=e.getFieldNames(),o.field=Object(a.findUniqueName)(t.field,n)),e.insertAfter(o,i),i=o}))}},moveNodes:{undo:function(t){var e=n(t.oldParentPath),i=n(t.newParentPath),o=e.childs[t.oldIndex]||e.append;i.childs.slice(t.newIndex,t.newIndex+t.count).forEach((function(n,i){n.field=t.fieldNames[i],e.moveBefore(n,o)})),null===t.newParentPathRedo&&(t.newParentPathRedo=i.getInternalPath())},redo:function(t){var e=n(t.oldParentPathRedo),i=n(t.newParentPathRedo),o=i.childs[t.newIndexRedo]||i.append;e.childs.slice(t.oldIndexRedo,t.oldIndexRedo+t.count).forEach((function(e,n){e.field=t.fieldNames[n],i.moveBefore(e,o)}))}},sort:{undo:function(t){var e=n(t.path);e.hideChilds(),e.childs=t.oldChilds,e.updateDom({updateIndexes:!0}),e.showChilds()},redo:function(t){var e=n(t.path);e.hideChilds(),e.childs=t.newChilds,e.updateDom({updateIndexes:!0}),e.showChilds()}},transform:{undo:function(t){n(t.path).setInternalValue(t.oldValue)},redo:function(t){n(t.path).setInternalValue(t.newValue)}}}}var e;return(e=[{key:"onChange",value:function(){}},{key:"add",value:function(t,e){this.index++,this.history[this.index]={action:t,params:e,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()}},{key:"clear",value:function(){this.history=[],this.index=-1,this.onChange()}},{key:"canUndo",value:function(){return 0<=this.index}},{key:"canRedo",value:function(){return this.index<this.history.length-1}},{key:"undo",value:function(){if(this.canUndo()){var t=this.history[this.index];if(t){var e=this.actions[t.action];if(e&&e.undo){if(e.undo(t.params),t.params.oldSelection)try{this.editor.setDomSelection(t.params.oldSelection)}catch(t){console.error(t)}}else console.error(new Error('unknown action "'+t.action+'"'))}this.index--,this.onChange()}}},{key:"redo",value:function(){if(this.canRedo()){this.index++;var t=this.history[this.index];if(t){var e=this.actions[t.action];if(e&&e.redo){if(e.redo(t.params),t.params.newSelection)try{this.editor.setDomSelection(t.params.newSelection)}catch(t){console.error(t)}}else console.error(new Error('unknown action "'+t.action+'"'))}this.onChange()}}},{key:"destroy",value:function(){this.editor=null,this.history=[],this.index=-1}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),l=n(1),c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this;this.editor=e,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.results=null,this.dom={},this.dom.container=n;var o=document.createElement("div");(this.dom.wrapper=o).className="jsoneditor-search",n.appendChild(o);var r=document.createElement("div");(this.dom.results=r).className="jsoneditor-results",o.appendChild(r);var a=document.createElement("div");(this.dom.input=a).className="jsoneditor-frame",a.title=Object(l.c)("searchTitle"),o.appendChild(a);var s=document.createElement("button");s.type="button",s.className="jsoneditor-refresh",a.appendChild(s);var c=document.createElement("input");c.type="text",(this.dom.search=c).oninput=function(t){i._onDelayedSearch(t)},c.onchange=function(t){i._onSearch()},c.onkeydown=function(t){i._onKeyDown(t)},c.onkeyup=function(t){i._onKeyUp(t)},s.onclick=function(t){c.select()},a.appendChild(c);var h=document.createElement("button");h.type="button",h.title=Object(l.c)("searchNextResultTitle"),h.className="jsoneditor-next",h.onclick=function(){i.next()},a.appendChild(h);var u=document.createElement("button");u.type="button",u.title=Object(l.c)("searchPreviousResultTitle"),u.className="jsoneditor-previous",u.onclick=function(){i.previous()},a.appendChild(u)}var e;return(e=[{key:"next",value:function(t){var e;this.results&&((e=null!==this.resultIndex?this.resultIndex+1:0)>this.results.length-1&&(e=0),this._setActiveResult(e,t))}},{key:"previous",value:function(t){var e,n;this.results&&(e=this.results.length-1,(n=null!==this.resultIndex?this.resultIndex-1:e)<0&&(n=e),this._setActiveResult(n,t))}},{key:"_setActiveResult",value:function(t,e){var n;if(this.activeResult&&(n=this.activeResult.node,"field"===this.activeResult.elem?delete n.searchFieldActive:delete n.searchValueActive,n.updateDom()),!this.results||!this.results[t])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=t;var i=this.results[this.resultIndex].node,o=this.results[this.resultIndex].elem;"field"===o?i.searchFieldActive=!0:i.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],i.updateDom(),i.scrollTo((function(){e&&i.focus(o)}))}},{key:"_clearDelay",value:function(){void 0!==this.timeout&&(clearTimeout(this.timeout),delete this.timeout)}},{key:"_onDelayedSearch",value:function(){this._clearDelay();var t=this;this.timeout=setTimeout((function(e){t._onSearch()}),this.delay)}},{key:"_onSearch",value:function(t){this._clearDelay();var e=this.dom.search.value,n=0<e.length?e:void 0;if(n!==this.lastText||t){this.lastText=n,this.results=this.editor.search(n);var i,o=this.results[0]?this.results[0].node.MAX_SEARCH_RESULTS:1/0,r=0;if(this.activeResult)for(var a=0;a<this.results.length;a++)if(this.results[a].node===this.activeResult.node){r=a;break}this._setActiveResult(r,!1),this.dom.results.textContent=void 0!==n?0===(i=this.results.length)?"no\xa0results":1===i?"1\xa0result":o<i?o+"+\xa0results":i+"\xa0results":""}}},{key:"_onKeyDown",value:function(t){var e=t.which;27===e?(this.dom.search.value="",this._onSearch(),t.preventDefault(),t.stopPropagation()):13===e&&(t.ctrlKey?this._onSearch(!0):t.shiftKey?this.previous():this.next(),t.preventDefault(),t.stopPropagation())}},{key:"_onKeyUp",value:function(t){var e=t.keyCode;27!==e&&13!==e&&this._onDelayedSearch(t)}},{key:"clear",value:function(){this.dom.search.value="",this._onSearch()}},{key:"forceSearch",value:function(){this._onSearch(!0)}},{key:"isEmpty",value:function(){return""===this.dom.search.value}},{key:"destroy",value:function(){this.editor=null,this.dom.container.removeChild(this.dom.wrapper),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),h=n(3),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.root=n,this.path=document.createElement("div"),this.path.className="jsoneditor-treepath",this.path.setAttribute("tabindex",0),this.contentMenuClicked=!1,e.appendChild(this.path),this.reset())}var e;return(e=[{key:"reset",value:function(){this.path.textContent=Object(l.c)("selectNode")}},{key:"setPath",value:function(t){var e=this;this.path.textContent="",t&&t.length&&t.forEach((function(n,i){var o,r,s,l=document.createElement("span");l.className="jsoneditor-treepath-element",l.innerText=n.name,l.onclick=(function(t){this.selectionCallback&&this.selectionCallback(t)}).bind(e,n),e.path.appendChild(l),n.children.length&&((o=document.createElement("span")).className="jsoneditor-treepath-seperator",o.textContent="\u25ba",o.onclick=function(){e.contentMenuClicked=!0;var r=[];n.children.forEach((function(o){r.push({text:o.name,className:"jsoneditor-type-modes"+(t[i+1]+1&&t[i+1].name===o.name?" jsoneditor-selected":""),click:(function(t,e){this.contextMenuCallback&&this.contextMenuCallback(t,e)}).bind(e,n,o.name)})})),new h.a(r).show(o,e.root,!0)},e.path.appendChild(o)),i===t.length-1&&(r=(o||l).getBoundingClientRect().right,e.path.offsetWidth<r&&(e.path.scrollLeft=r),e.path.scrollLeft&&((s=document.createElement("span")).className="jsoneditor-treepath-show-all-btn",s.title="show all path",s.textContent="...",s.onclick=(function(t){e.contentMenuClicked=!1,Object(a.addClassName)(e.path,"show-all"),e.path.style.width=e.path.parentNode.getBoundingClientRect().width-10+"px",e.path.onblur=function(){if(e.contentMenuClicked)return e.contentMenuClicked=!1,void e.path.focus();Object(a.removeClassName)(e.path,"show-all"),e.path.onblur=void 0,e.path.style.width="",e.setPath(t)}}).bind(e,t),e.path.insertBefore(s,e.path.firstChild)))}))}},{key:"onSectionSelected",value:function(t){"function"==typeof t&&(this.selectionCallback=t)}},{key:"onContextMenuItemSelected",value:function(t){"function"==typeof t&&(this.contextMenuCallback=t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),d=n(11),p=n.n(d),g=n(12),m=n(5),f=n(6),v=n(2);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.dom={},this.expanded=!1,n&&n instanceof Object?(this.setField(n.field,n.fieldEditable),"value"in n&&this.setValue(n.value,n.type),"internalValue"in n&&this.setInternalValue(n.internalValue)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=Object(a.debounce)(this._onChangeValue.bind(this),t.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=Object(a.debounce)(this._onChangeField.bind(this),t.prototype.DEBOUNCE_INTERVAL),this.visibleChilds=this.getMaxVisibleChilds()}var e;return(e=[{key:"getMaxVisibleChilds",value:function(){return this.editor&&this.editor.options&&this.editor.options.maxVisibleChilds?this.editor.options.maxVisibleChilds:_}},{key:"_updateEditability",value:function(){var t;this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,"tree"!==this.editor.options.mode&&"form"!==this.editor.options.mode||"function"!=typeof this.editor.options.onEditable||("boolean"==typeof(t=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()}))?(this.editable.field=t,this.editable.value=t):("boolean"==typeof t.field&&(this.editable.field=t.field),"boolean"==typeof t.value&&(this.editable.value=t.value))))}},{key:"getPath",value:function(){for(var t=this,e=[];t;){var n=t.getName();void 0!==n&&e.unshift(n),t=t.parent}return e}},{key:"getInternalPath",value:function(){for(var t=this,e=[];t;)t.parent&&e.unshift(t.getIndex()),t=t.parent;return e}},{key:"getName",value:function(){return this.parent?"array"!==this.parent.type?this.field:this.index:void 0}},{key:"findNodeByPath",value:function(t){if(t){if(0===t.length)return this;if(t.length&&this.childs&&this.childs.length)for(var e=0;e<this.childs.length;++e)if(""+t[0]==""+this.childs[e].getName())return this.childs[e].findNodeByPath(t.slice(1))}}},{key:"findNodeByInternalPath",value:function(t){if(t){for(var e=this,n=0;n<t.length&&e;n++)e=e.childs[t[n]];return e}}},{key:"serialize",value:function(){return{value:this.getValue(),path:this.getPath()}}},{key:"findNode",value:function(t){for(var e=Object(a.parsePath)(t),n=this;n&&0<e.length;)!function(){var t=e.shift();if("number"==typeof t){if("array"!==n.type)throw new Error("Cannot get child node at index "+t+": node is no array");n=n.childs[t]}else{if("object"!==n.type)throw new Error("Cannot get child node "+t+": node is no object");n=n.childs.filter((function(e){return e.field===t}))[0]}}();return n}},{key:"findParents",value:function(){for(var t=[],e=this.parent;e;)t.unshift(e),e=e.parent;return t}},{key:"setError",value:function(t,e){this.error=t,this.errorChild=e,this.dom&&this.dom.tr&&this.updateError()}},{key:"updateError",value:function(){var t=this,e=this.fieldError||this.valueError||this.error,n=this.dom.tdError;if(e&&this.dom&&this.dom.tr){Object(a.addClassName)(this.dom.tr,"jsoneditor-validation-error"),n||(n=document.createElement("td"),this.dom.tdError=n,this.dom.tdValue.parentNode.appendChild(n));var i=document.createElement("button");i.type="button",i.className="jsoneditor-button jsoneditor-schema-error";var o=function(){t.dom.popupAnchor&&t.dom.popupAnchor.destroy()},r=function(){delete t.dom.popupAnchor},s=function(n){var o=t.editor.frame;t.dom.popupAnchor=Object(g.a)(i,t.editor.getPopupAnchor(),r,n);var a=i.getBoundingClientRect(),s=120<o.getBoundingClientRect().width-a.x?"jsoneditor-above":"jsoneditor-left",l=document.createElement("div");l.className="jsoneditor-popover "+s,l.appendChild(document.createTextNode(e.message)),t.dom.popupAnchor.appendChild(l)};i.onmouseover=function(){t.dom.popupAnchor||s(!0)},i.onfocus=function(){o(),s(!1)},i.onblur=function(){o()};var l=this.errorChild;for(l&&(i.onclick=function(){l.findParents().forEach((function(t){t.expand(!1)})),l.scrollTo((function(){l.focus()}))});n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i)}else this.dom.tr&&Object(a.removeClassName)(this.dom.tr,"jsoneditor-validation-error"),n&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)}},{key:"getIndex",value:function(){if(this.parent){var t=this.parent.childs.indexOf(this);return-1!==t?t:null}return-1}},{key:"setParent",value:function(t){this.parent=t}},{key:"setField",value:function(t,e){this.field=t,this.previousField=t,this.fieldEditable=!0===e}},{key:"getField",value:function(){return void 0===this.field&&this._getDomField(),this.field}},{key:"setValue",value:function(e,n){var i,o,r,a,s,l,c,h,u=this.childs;if(this.type=this._getType(e),n&&n!==this.type){if("string"!==n||"auto"!==this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+n+'"');this.type=n}if("array"===this.type){for(this.childs||(this.childs=[]),o=0;o<e.length;o++)void 0===(s=e[o])||s instanceof Function||(o<this.childs.length?((i=this.childs[o]).fieldEditable=!1,i.index=o,i.setValue(s)):(i=new t(this.editor,{value:s}),a=o<this.getMaxVisibleChilds(),this.appendChild(i,a,!1)));for(r=this.childs.length;r>=e.length;r--)this.removeChild(this.childs[r],!1)}else if("object"===this.type){for(this.childs||(this.childs=[]),r=this.childs.length-1;0<=r;r--)w(e,this.childs[r].field)||this.removeChild(this.childs[r],!1);for(var d in o=0,e)w(e,d)&&(void 0===(s=e[d])||s instanceof Function||((l=this.findChildByProperty(d))?(l.setField(d,!0),l.setValue(s)):(c=new t(this.editor,{field:d,value:s}),h=o<this.getMaxVisibleChilds(),this.appendChild(c,h,!1))),o++);!(this.value="")===this.editor.options.sortObjectKeys&&this.sort([],"asc",!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=e;Array.isArray(u)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"setInternalValue",value:function(e){var n,i,o,r,a,s=this.childs;if(this.type=e.type,"array"===e.type){for(this.childs||(this.childs=[]),r=0;r<e.childs.length;r++)void 0===(n=e.childs[r])||n instanceof Function||(r<this.childs.length?((i=this.childs[r]).fieldEditable=!1,i.index=r,i.setInternalValue(n)):(i=new t(this.editor,{internalValue:n}),o=r<this.getMaxVisibleChilds(),this.appendChild(i,o,!1)));for(a=this.childs.length;a>=e.childs.length;a--)this.removeChild(this.childs[a],!1)}else if("object"===e.type){for(this.childs||(this.childs=[]),r=0;r<e.childs.length;r++)void 0===(n=e.childs[r])||n instanceof Function||(r<this.childs.length?(delete(i=this.childs[r]).index,i.setField(n.field,!0),i.setInternalValue(n.value)):(i=new t(this.editor,{field:n.field,internalValue:n.value}),o=r<this.getMaxVisibleChilds(),this.appendChild(i,o,!1)));for(a=this.childs.length;a>=e.childs.length;a--)this.removeChild(this.childs[a],!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=e.value;Array.isArray(s)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"recreateDom",value:function(){var t;this.dom&&this.dom.tr&&this.dom.tr.parentNode?(t=this._detachFromDom(),this.clearDom(),this._attachToDom(t)):this.clearDom()}},{key:"getValue",value:function(){if("array"===this.type){var t=[];return this.childs.forEach((function(e){t.push(e.getValue())})),t}if("object"!==this.type)return void 0===this.value&&this._getDomValue(),this.value;var e={};return this.childs.forEach((function(t){e[t.getField()]=t.getValue()})),e}},{key:"getInternalValue",value:function(){return"array"===this.type?{type:this.type,childs:this.childs.map((function(t){return t.getInternalValue()}))}:"object"===this.type?{type:this.type,childs:this.childs.map((function(t){return{field:t.getField(),value:t.getInternalValue()}}))}:(void 0===this.value&&this._getDomValue(),{type:this.type,value:this.value})}},{key:"getLevel",value:function(){return this.parent?this.parent.getLevel()+1:0}},{key:"getNodePath",value:function(){var t=this.parent?this.parent.getNodePath():[];return t.push(this),t}},{key:"clone",value:function(){var e,n=new t(this.editor);return n.type=this.type,n.field=this.field,n.fieldInnerText=this.fieldInnerText,n.fieldEditable=this.fieldEditable,n.previousField=this.previousField,n.value=this.value,n.valueInnerText=this.valueInnerText,n.previousValue=this.previousValue,n.expanded=this.expanded,n.visibleChilds=this.visibleChilds,this.childs?(e=[],this.childs.forEach((function(t){var i=t.clone();i.setParent(n),e.push(i)})),n.childs=e):n.childs=void 0,n}},{key:"expand",value:function(t){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-expanded"),this.showChilds(),!1!==t&&this.childs.forEach((function(e){e.expand(t)})),this.updateDom({recurse:!1}))}},{key:"collapse",value:function(t){this.childs&&(this.hideChilds(),!1!==t&&this.childs.forEach((function(e){e.collapse(t)})),this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-collapsed"),this.expanded=!1,this.updateDom({recurse:!1}))}},{key:"showChilds",value:function(){if(this.childs&&this.expanded){var t=this.dom.tr,e=t?t.parentNode:void 0;if(e){var n=this.getAppendDom();n.parentNode||((o=t.nextSibling)?e.insertBefore(n,o):e.appendChild(n));for(var i=Math.min(this.childs.length,this.visibleChilds),o=this._getNextTr(),r=0;r<i;r++){var a=this.childs[r];a.getDom().parentNode||e.insertBefore(a.getDom(),o),a.showChilds()}var s=this.getShowMoreDom();o=this._getNextTr(),s.parentNode||e.insertBefore(s,o),this.showMore.updateDom()}}}},{key:"_getNextTr",value:function(){return this.showMore&&this.showMore.getDom().parentNode?this.showMore.getDom():this.append&&this.append.getDom().parentNode?this.append.getDom():void 0}},{key:"hide",value:function(t){var e=this.dom.tr,n=e?e.parentNode:void 0;n&&n.removeChild(e),this.dom.popupAnchor&&this.dom.popupAnchor.destroy(),this.hideChilds(t)}},{key:"hideChilds",value:function(t){var e,n;this.childs&&this.expanded&&((e=this.getAppendDom()).parentNode&&e.parentNode.removeChild(e),this.childs.forEach((function(t){t.hide()})),(n=this.getShowMoreDom()).parentNode&&n.parentNode.removeChild(n),t&&!t.resetVisibleChilds||(this.visibleChilds=this.getMaxVisibleChilds()))}},{key:"_updateCssClassName",value:function(){var t;this.dom.field&&this.editor&&this.editor.options&&"function"==typeof this.editor.options.onClassName&&this.dom.tree&&(Object(a.removeAllClassNames)(this.dom.tree),t=this.editor.options.onClassName({path:this.getPath(),field:this.field,value:this.value})||"",Object(a.addClassName)(this.dom.tree,"jsoneditor-values "+t))}},{key:"recursivelyUpdateCssClassesOnNodes",value:function(){if(this._updateCssClassName(),Array.isArray(this.childs))for(var t=0;t<this.childs.length;t++)this.childs[t].recursivelyUpdateCssClassesOnNodes()}},{key:"expandTo",value:function(){for(var t=this.parent;t;)t.expanded||t.expand(),t=t.parent}},{key:"appendChild",value:function(t,e,n){var i,o,r;this._hasChilds()&&(t.setParent(this),t.fieldEditable="object"===this.type,"array"===this.type&&(t.index=this.childs.length),"object"===this.type&&void 0===t.field&&t.setField(""),this.childs.push(t),this.expanded&&!1!==e&&(i=t.getDom(),r=(o=this._getNextTr())?o.parentNode:void 0,o&&r&&r.insertBefore(i,o),t.showChilds(),this.visibleChilds++),!1!==n&&(this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0})))}},{key:"moveBefore",value:function(t,e,n){var i,o;this._hasChilds()&&((i=this.dom.tr?this.dom.tr.parentNode:void 0)&&((o=document.createElement("tr")).style.height=i.clientHeight+"px",i.appendChild(o)),t.parent&&t.parent.removeChild(t),e instanceof I||!e?this.childs.length+1>this.visibleChilds?this.insertBefore(t,this.childs[this.visibleChilds-1],n):this.appendChild(t,!0,n):this.insertBefore(t,e,n),i&&i.removeChild(o))}},{key:"insertBefore",value:function(t,e,n){if(this._hasChilds()){if(this.visibleChilds++,"object"===this.type&&void 0===t.field&&t.setField(""),e===this.append)t.setParent(this),t.fieldEditable="object"===this.type,this.childs.push(t);else{var i=this.childs.indexOf(e);if(-1===i)throw new Error("Node not found");t.setParent(this),t.fieldEditable="object"===this.type,this.childs.splice(i,0,t)}var o,r,a;this.expanded&&(o=t.getDom(),a=(r=e.getDom())?r.parentNode:void 0,r&&a&&a.insertBefore(o,r),t.showChilds(),this.showChilds()),!1!==n&&(this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0}))}}},{key:"insertAfter",value:function(t,e){var n,i;this._hasChilds()&&(n=this.childs.indexOf(e),(i=this.childs[n+1])?this.insertBefore(t,i):this.appendChild(t))}},{key:"search",value:function(t,e){Array.isArray(e)||(e=[]);var n=t?t.toLowerCase():void 0;return delete this.searchField,delete this.searchValue,void 0!==this.field&&e.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.field).toLowerCase().indexOf(n)&&(this.searchField=!0,e.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?this.childs&&this.childs.forEach((function(n){n.search(t,e)})):void 0!==this.value&&e.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.value).toLowerCase().indexOf(n)&&(this.searchValue=!0,e.push({node:this,elem:"value"})),this._updateDomValue()),e}},{key:"scrollTo",value:function(t){this.expandPathToNode(),this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,t)}},{key:"expandPathToNode",value:function(){for(var t=this;t&&t.parent;){for(var e="array"===t.parent.type?t.index:t.parent.childs.indexOf(t);t.parent.visibleChilds<e+1;)t.parent.visibleChilds+=this.getMaxVisibleChilds();t.parent.expand(!1),t=t.parent}}},{key:"focus",value:function(e){if(t.focusElement=e,this.dom.tr&&this.dom.tr.parentNode){var n=this.dom;switch(e){case"drag":n.drag?n.drag.focus():n.menu.focus();break;case"menu":n.menu.focus();break;case"expand":this._hasChilds()?n.expand.focus():n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):n.menu.focus();break;case"field":n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):this._hasChilds()?n.expand.focus():n.menu.focus();break;case"value":default:n.select?n.select.focus():n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):this._hasChilds()?n.expand.focus():n.menu.focus()}}}},{key:"containsNode",value:function(t){if(this===t)return!0;var e=this.childs;if(e)for(var n=0,i=e.length;n<i;n++)if(e[n].containsNode(t))return!0;return!1}},{key:"removeChild",value:function(t,e){if(this.childs){var n=this.childs.indexOf(t);if(-1!==n){n<this.visibleChilds&&this.expanded&&this.visibleChilds--,t.hide(),delete t.searchField,delete t.searchValue;var i=this.childs.splice(n,1)[0];return i.parent=null,!1!==e&&this.updateDom({updateIndexes:!0}),i}}}},{key:"_remove",value:function(t){this.removeChild(t)}},{key:"changeType",value:function(t){var e,n=this.type;n!==t&&("string"!==t&&"auto"!==t||"string"!==n&&"auto"!==n?(e=this._detachFromDom(),this.clearDom(),"object"===(this.type=t)?(this.childs||(this.childs=[]),this.childs.forEach((function(t){t.clearDom(),delete t.index,t.fieldEditable=!0,void 0===t.field&&(t.field="")})),"string"!==n&&"auto"!==n||(this.expanded=!0)):"array"===t?(this.childs||(this.childs=[]),this.childs.forEach((function(t,e){t.clearDom(),t.fieldEditable=!1,t.index=e})),"string"!==n&&"auto"!==n||(this.expanded=!0)):this.expanded=!1,this._attachToDom(e)):this.type=t,"auto"!==t&&"string"!==t||(this.value="string"===t?String(this.value):Object(a.parseString)(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0}))}},{key:"deepEqual",value:function(t){var e;if("array"===this.type){if(!Array.isArray(t))return!1;if(this.childs.length!==t.length)return!1;for(e=0;e<this.childs.length;e++)if(!this.childs[e].deepEqual(t[e]))return!1}else if("object"===this.type){if("object"!==b(t)||!t)return!1;var n=Object.keys(t);if(this.childs.length!==n.length)return!1;for(e=0;e<n.length;e++){var i=this.childs[e];if(i.field!==n[e]||!i.deepEqual(t[i.field]))return!1}}else if(this.value!==t)return!1;return!0}},{key:"_getDomValue",value:function(){if(this._clearValueError(),this.dom.value&&"array"!==this.type&&"object"!==this.type&&(this.valueInnerText=Object(a.getInnerText)(this.dom.value),""===this.valueInnerText&&""!==this.dom.value.innerHTML&&(this.dom.value.textContent="")),void 0!==this.valueInnerText)try{var t,e;(e="string"===this.type?this._unescapeHTML(this.valueInnerText):(t=this._unescapeHTML(this.valueInnerText),Object(a.parseString)(t)))!==this.value&&(this.value=e,this._debouncedOnChangeValue())}catch(t){this._setValueError(Object(l.c)("cannotParseValueError"))}}},{key:"_setValueError",value:function(t){this.valueError={message:t},this.updateError()}},{key:"_clearValueError",value:function(){this.valueError&&(this.valueError=null,this.updateError())}},{key:"_setFieldError",value:function(t){this.fieldError={message:t},this.updateError()}},{key:"_clearFieldError",value:function(){this.fieldError&&(this.fieldError=null,this.updateError())}},{key:"_onChangeValue",value:function(){var t,e=this.editor.getDomSelection();e.range&&(t=Object(a.textDiff)(String(this.value),String(this.previousValue)),e.range.startOffset=t.start,e.range.endOffset=t.end);var n,i=this.editor.getDomSelection();i.range&&(n=Object(a.textDiff)(String(this.previousValue),String(this.value)),i.range.startOffset=n.start,i.range.endOffset=n.end),this.editor._onAction("editValue",{path:this.getInternalPath(),oldValue:this.previousValue,newValue:this.value,oldSelection:e,newSelection:i}),this.previousValue=this.value}},{key:"_onChangeField",value:function(){var t,e=this.editor.getDomSelection(),n=this.previousField||"";e.range&&(t=Object(a.textDiff)(this.field,n),e.range.startOffset=t.start,e.range.endOffset=t.end);var i,o=this.editor.getDomSelection();o.range&&(i=Object(a.textDiff)(n,this.field),o.range.startOffset=i.start,o.range.endOffset=i.end),this.editor._onAction("editField",{parentPath:this.parent.getInternalPath(),index:this.getIndex(),oldValue:this.previousField,newValue:this.field,oldSelection:e,newSelection:o}),this.previousField=this.field}},{key:"_updateDomValue",value:function(){var t=this.dom.value;if(t){var e=["jsoneditor-value"],n=this.value,i="auto"===this.type?Object(a.getType)(n):this.type,o="string"===i&&Object(a.isUrl)(n);if(e.push("jsoneditor-"+i),o&&e.push("jsoneditor-url"),""===String(this.value)&&"array"!==this.type&&"object"!==this.type&&e.push("jsoneditor-empty"),this.searchValueActive&&e.push("jsoneditor-highlight-active"),this.searchValue&&e.push("jsoneditor-highlight"),t.className=e.join(" "),t.title="array"===i||"object"===i?this.type+" containing "+(this.childs?this.childs.length:0)+" items":o&&this.editable.value?Object(l.c)("openUrl"):"","boolean"===i&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement("option"),this.dom.select.option.value="",this.dom.select.option.textContent="--",this.dom.select.appendChild(this.dom.select.option);for(var r=0;r<this.enum.length;r++)this.dom.select.option=document.createElement("option"),this.dom.select.option.value=this.enum[r],this.dom.select.option.textContent=this.enum[r],this.dom.select.option.value===this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||w(this.schema,"oneOf")||w(this.schema,"anyOf")||w(this.schema,"allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.textContent="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);if(this.editable.value&&this.editor.options.colorPicker&&"string"==typeof n&&Object(a.isValidColor)(n)?(this.dom.color||(this.dom.color=document.createElement("div"),this.dom.color.className="jsoneditor-color",this.dom.tdColor=document.createElement("td"),this.dom.tdColor.className="jsoneditor-tree",this.dom.tdColor.appendChild(this.dom.color),this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor,this.dom.tdValue)),Object(a.addClassName)(this.dom.value,"jsoneditor-color-value"),this.dom.color.style.backgroundColor=n):this._deleteDomColor(),this._showTimestampTag()){this.dom.date||(this.dom.date=document.createElement("div"),this.dom.date.className="jsoneditor-date",this.dom.value.parentNode.appendChild(this.dom.date));var s=null;if("function"==typeof this.editor.options.timestampFormat&&(s=this.editor.options.timestampFormat({field:this.field,value:this.value,path:this.getPath()})),s){for(;this.dom.date.firstChild;)this.dom.date.removeChild(this.dom.date.firstChild);this.dom.date.appendChild(document.createTextNode(s))}else this.dom.date.textContent=new Date(n).toISOString();this.dom.date.title=new Date(n).toString()}else this.dom.date&&(this.dom.date.parentNode.removeChild(this.dom.date),delete this.dom.date);Object(a.stripFormatting)(t),this._updateDomDefault()}}},{key:"_deleteDomColor",value:function(){this.dom.color&&(this.dom.tdColor.parentNode.removeChild(this.dom.tdColor),delete this.dom.tdColor,delete this.dom.color,Object(a.removeClassName)(this.dom.value,"jsoneditor-color-value"))}},{key:"_updateDomField",value:function(){var t,e=this.dom.field;e&&((t=Object(a.makeFieldTooltip)(this.schema,this.editor.options.language))&&(e.title=t),(""===String(this.field)&&"array"!==this.parent.type?Object(a.addClassName):Object(a.removeClassName))(e,"jsoneditor-empty"),Object(this.searchFieldActive?a.addClassName:a.removeClassName)(e,"jsoneditor-highlight-active"),Object(this.searchField?a.addClassName:a.removeClassName)(e,"jsoneditor-highlight"),Object(a.stripFormatting)(e))}},{key:"_getDomField",value:function(t){if(this._clearFieldError(),this.dom.field&&this.fieldEditable&&(this.fieldInnerText=Object(a.getInnerText)(this.dom.field),""===this.fieldInnerText&&""!==this.dom.field.innerHTML&&(this.dom.field.textContent="")),void 0!==this.fieldInnerText)try{var e=this._unescapeHTML(this.fieldInnerText),n=this.parent.getFieldNames(this);-1!==n.indexOf(e)?t?(e=Object(a.findUniqueName)(e,n))!==this.field&&(this.field=e,this._debouncedOnChangeField()):this._setFieldError(Object(l.c)("duplicateFieldError")):e!==this.field&&(this.field=e,this._debouncedOnChangeField())}catch(t){this._setFieldError(Object(l.c)("cannotParseFieldError"))}}},{key:"_updateDomDefault",value:function(){var t;!this.schema||void 0===this.schema.default||this._hasChilds()||(t=this.dom.select?this.dom.select:this.dom.value)&&(this.value===this.schema.default?(t.title=Object(l.c)("default"),Object(a.addClassName)(t,"jsoneditor-is-default"),Object(a.removeClassName)(t,"jsoneditor-is-not-default")):(t.removeAttribute("title"),Object(a.removeClassName)(t,"jsoneditor-is-default"),Object(a.addClassName)(t,"jsoneditor-is-not-default")))}},{key:"_showTimestampTag",value:function(){if("number"!=typeof this.value)return!1;var t=this.editor.options.timestampTag;if("function"!=typeof t)return!0===t&&Object(a.isTimestamp)(this.field,this.value);var e=t({field:this.field,value:this.value,path:this.getPath()});return"boolean"==typeof e?e:Object(a.isTimestamp)(this.field,this.value)}},{key:"clearDom",value:function(){this.dom={}}},{key:"getDom",value:function(){var t,e,n,i,o=this.dom;if(o.tr)return o.tr;this._updateEditability(),o.tr=document.createElement("tr"),"tree"===(o.tr.node=this).editor.options.mode&&(t=document.createElement("td"),this.editable.field&&this.parent&&((e=document.createElement("button")).type="button",(o.drag=e).className="jsoneditor-button jsoneditor-dragarea",e.title=Object(l.c)("drag"),t.appendChild(e)),o.tr.appendChild(t),n=document.createElement("td"),(i=document.createElement("button")).type="button",(o.menu=i).className="jsoneditor-button jsoneditor-contextmenu-button",i.title=Object(l.c)("actionsMenu"),n.appendChild(o.menu),o.tr.appendChild(n));var r=document.createElement("td");return o.tr.appendChild(r),o.tree=this._createDomTree(),r.appendChild(o.tree),this.updateDom({updateIndexes:!0}),o.tr}},{key:"isVisible",value:function(){return this.dom&&this.dom.tr&&this.dom.tr.parentNode||!1}},{key:"isDescendantOf",value:function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1}},{key:"_createDomField",value:function(){return document.createElement("div")}},{key:"setHighlight",value:function(t){this.dom.tr&&(Object(t?a.addClassName:a.removeClassName)(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(t),this.childs&&this.childs.forEach((function(e){e.setHighlight(t)})))}},{key:"setSelected",value:function(t,e){this.selected=t,this.dom.tr&&(Object(t?a.addClassName:a.removeClassName)(this.dom.tr,"jsoneditor-selected"),Object(e?a.addClassName:a.removeClassName)(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(t),this.showMore&&this.showMore.setSelected(t),this.childs&&this.childs.forEach((function(e){e.setSelected(t)})))}},{key:"updateValue",value:function(t){this.value=t,this.previousValue=t,this.valueError=void 0,this.updateDom()}},{key:"updateField",value:function(t){this.field=t,this.previousField=t,this.fieldError=void 0,this.updateDom()}},{key:"updateDom",value:function(e){var n=this.dom.tree;n&&(n.style.marginLeft=24*this.getLevel()+"px");var i,o,r,s=this.dom.field;s&&(this.fieldEditable?(s.contentEditable=this.editable.field,s.spellcheck=!1,s.className="jsoneditor-field"):(s.contentEditable=!1,s.className="jsoneditor-readonly"),o=void 0!==this.index?this.index:void 0!==this.field?this.field:(i=this.editor.options.schema?t._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):void 0)&&i.title?i.title:this._hasChilds()?this.type:"",r=this._escapeHTML(o),document.activeElement===s&&r===this._unescapeHTML(Object(a.getInnerText)(s))||(s.innerHTML=r),this._updateSchema());var l,c=this.dom.value;c&&("array"===this.type||"object"===this.type?this.updateNodeName():(l=this._escapeHTML(this.value),document.activeElement===c&&l===this._unescapeHTML(Object(a.getInnerText)(c))||(c.innerHTML=l)));var h=this.dom.tr;h&&("array"===this.type||"object"===this.type?(Object(a.addClassName)(h,"jsoneditor-expandable"),this.expanded?(Object(a.addClassName)(h,"jsoneditor-expanded"),Object(a.removeClassName)(h,"jsoneditor-collapsed")):(Object(a.addClassName)(h,"jsoneditor-collapsed"),Object(a.removeClassName)(h,"jsoneditor-expanded"))):(Object(a.removeClassName)(h,"jsoneditor-expandable"),Object(a.removeClassName)(h,"jsoneditor-expanded"),Object(a.removeClassName)(h,"jsoneditor-collapsed"))),this._updateDomField(),this._updateDomValue(),e&&!0===e.updateIndexes&&this._updateDomIndexes(),e&&!0===e.recurse&&this.childs&&this.childs.forEach((function(t){t.updateDom(e)})),this.error&&this.updateError(),this.append&&this.append.updateDom(),this.showMore&&this.showMore.updateDom(),this._updateCssClassName()}},{key:"_updateSchema",value:function(){this.editor&&this.editor.options&&(this.schema=this.editor.options.schema?t._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):null,this.schema?this.enum=t._findEnum(this.schema):delete this.enum)}},{key:"_updateDomIndexes",value:function(){var t=this.childs;this.dom.value&&t&&("array"===this.type?t.forEach((function(t,e){t.index=e;var n=t.dom.field;n&&(n.textContent=e)})):"object"===this.type&&t.forEach((function(t){void 0!==t.index&&(delete t.index,void 0===t.field&&(t.field=""))})))}},{key:"_createDomValue",value:function(){var t;return"array"===this.type?(t=document.createElement("div")).textContent="[...]":"object"===this.type?(t=document.createElement("div")).textContent="{...}":(!this.editable.value&&Object(a.isUrl)(this.value)?(t=document.createElement("a")).href=this.value:((t=document.createElement("div")).contentEditable=this.editable.value,t.spellcheck=!1),t.innerHTML=this._escapeHTML(this.value)),t}},{key:"_createDomExpandButton",value:function(){var t=document.createElement("button");return t.type="button",this._hasChilds()?(t.className=this.expanded?"jsoneditor-button jsoneditor-expanded":"jsoneditor-button jsoneditor-collapsed",t.title=Object(l.c)("expandTitle")):(t.className="jsoneditor-button jsoneditor-invisible",t.title=""),t}},{key:"_createDomTree",value:function(){var t=this.dom,e=document.createElement("table"),n=document.createElement("tbody");e.style.borderCollapse="collapse",e.className="jsoneditor-values",e.appendChild(n);var i=document.createElement("tr");n.appendChild(i);var o=document.createElement("td");o.className="jsoneditor-tree",i.appendChild(o),t.expand=this._createDomExpandButton(),o.appendChild(t.expand),t.tdExpand=o;var r=document.createElement("td");r.className="jsoneditor-tree",i.appendChild(r),t.field=this._createDomField(),r.appendChild(t.field),t.tdField=r;var a=document.createElement("td");a.className="jsoneditor-tree",i.appendChild(a),"object"!==this.type&&"array"!==this.type&&(a.appendChild(document.createTextNode(":")),a.className="jsoneditor-separator"),t.tdSeparator=a;var s=document.createElement("td");return s.className="jsoneditor-tree",i.appendChild(s),t.value=this._createDomValue(),s.appendChild(t.value),t.tdValue=s,e}},{key:"onEvent",value:function(t){var e,n=t.type,i=t.target||t.srcElement,o=this.dom,r=this,s=this._hasChilds();"function"==typeof this.editor.options.onEvent&&this._onEvent(t),i!==o.drag&&i!==o.menu||("mouseover"===n?this.editor.highlighter.highlight(this):"mouseout"===n&&this.editor.highlighter.unhighlight()),"click"===n&&i===o.menu&&((e=r.editor.highlighter).highlight(r),e.lock(),Object(a.addClassName)(o.menu,"jsoneditor-selected"),this.showContextMenu(o.menu,(function(){Object(a.removeClassName)(o.menu,"jsoneditor-selected"),e.unlock(),e.unhighlight()}))),"click"===n&&i===o.expand&&s&&this._onExpand(t.ctrlKey),"click"!==n||t.target!==r.dom.tdColor&&t.target!==r.dom.color||this._showColorPicker(),"change"===n&&i===o.checkbox&&(this.dom.value.textContent=String(!this.value),this._getDomValue(),this._updateDomDefault()),"change"===n&&i===o.select&&(this.dom.value.innerHTML=this._escapeHTML(o.select.value),this._getDomValue(),this._updateDomValue());var l=o.value;if(i===l)switch(n){case"blur":case"change":this._getDomValue(),this._clearValueError(),this._updateDomValue();var c=this._escapeHTML(this.value);c!==this._unescapeHTML(Object(a.getInnerText)(l))&&(l.innerHTML=c);break;case"input":this._getDomValue(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"click":t.ctrlKey&&this.editable.value&&Object(a.isUrl)(this.value)&&(t.preventDefault(),window.open(this.value,"_blank"));break;case"keyup":this._getDomValue(),this._updateDomValue();break;case"cut":case"paste":setTimeout((function(){r._getDomValue(),r._updateDomValue()}),1)}var h=o.field;if(i===h)switch(n){case"blur":this._getDomField(!0),this._updateDomField();var u=this._escapeHTML(this.field);u!==this._unescapeHTML(Object(a.getInnerText)(h))&&(h.innerHTML=u);break;case"input":this._getDomField(),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"keyup":this._getDomField(),this._updateDomField();break;case"cut":case"paste":setTimeout((function(){r._getDomField(),r._updateDomField()}),1)}var d=o.tree;d&&i===d.parentNode&&"click"===n&&!t.hasMoved&&((void 0!==t.offsetX?t.offsetX<24*(this.getLevel()+1):t.pageX<Object(a.getAbsoluteLeft)(o.tdSeparator))||s?h&&(Object(a.setEndOfContentEditable)(h),h.focus()):l&&!this.enum&&(Object(a.setEndOfContentEditable)(l),l.focus())),(i!==o.tdExpand||s)&&i!==o.tdField&&i!==o.tdSeparator||"click"!==n||t.hasMoved||h&&(Object(a.setEndOfContentEditable)(h),h.focus()),"keydown"===n&&this.onKeyDown(t)}},{key:"_onEvent",value:function(t){var e,n=t.target;n!==this.dom.field&&n!==this.dom.value||(e={field:this.getField(),path:this.getPath()},this._hasChilds()||n!==this.dom.value||(e.value=this.getValue()),this.editor.options.onEvent(e,t))}},{key:"onKeyDown",value:function(e){var n,i,o,r,s,l,c,h,u,d,p,g,m,f,v,b,y,_,C,w,A=e.which||e.keyCode,P=e.target||e.srcElement,O=e.ctrlKey,M=e.shiftKey,k=e.altKey,S=!1,E="tree"===this.editor.options.mode,T=0<this.editor.multiselection.nodes.length?this.editor.multiselection.nodes:[this],R=T[0],L=T[T.length-1];13===A?P===this.dom.value?this.editable.value&&!e.ctrlKey||Object(a.isUrl)(this.value)&&(window.open(this.value,"_blank"),S=!0):P===this.dom.expand&&this._hasChilds()&&(this._onExpand(e.ctrlKey),P.focus(),S=!0):68===A?O&&E&&(t.onDuplicate(T),S=!0):69===A?O&&(this._onExpand(M),P.focus(),S=!0):77===A&&E?O&&(this.showContextMenu(P),S=!0):46===A&&E?O&&(t.onRemove(T),S=!0):45===A&&E?O&&!M?(this._onInsertBefore(),S=!0):O&&M&&(this._onInsertAfter(),S=!0):35===A?k&&((g=this._lastNode())&&g.focus(t.focusElement||this._getElementName(P)),S=!0):36===A?k&&((m=this._firstNode())&&m.focus(t.focusElement||this._getElementName(P)),S=!0):37===A?k&&!M?((f=this._previousElement(P))&&this.focus(this._getElementName(f)),S=!0):k&&M&&E&&(b=L.expanded?(v=L.getAppendDom())?v.nextSibling:void 0:L.getDom().nextSibling)&&(i=t.getNodeFromTarget(b),y=t.getNodeFromTarget(b.nextSibling),i&&i instanceof I&&1!==L.parent.childs.length&&y&&y.parent&&(o=this.editor.getDomSelection(),r=(s=R.parent).childs[L.getIndex()+1]||s.append,l=R.getIndex(),c=y.getIndex(),h=s.getInternalPath(),u=y.parent.getInternalPath(),T.forEach((function(t){y.parent.moveBefore(t,y)})),this.focus(t.focusElement||this._getElementName(P)),this.editor._onAction("moveNodes",{count:T.length,fieldNames:T.map(x),oldParentPath:s.getInternalPath(),newParentPath:R.parent.getInternalPath(),oldIndex:r.getIndex(),newIndex:R.getIndex(),oldIndexRedo:l,newIndexRedo:c,oldParentPathRedo:h,newParentPathRedo:u,oldSelection:o,newSelection:this.editor.getDomSelection()}))):38===A?k&&!M?((n=this._previousNode())&&(this.editor.deselect(!0),n.focus(t.focusElement||this._getElementName(P))),S=!0):!k&&O&&M&&E?((n=this._previousNode())&&((p=this.editor.multiselection).start=p.start||this,p.end=n,d=this.editor._findTopLevelNodes(p.start,p.end),this.editor.select(d),n.focus("field")),S=!0):k&&M&&E&&((n=R._previousNode())&&n.parent&&(o=this.editor.getDomSelection(),r=(s=R.parent).childs[L.getIndex()+1]||s.append,l=R.getIndex(),c=n.getIndex(),h=s.getInternalPath(),u=n.parent.getInternalPath(),T.forEach((function(t){n.parent.moveBefore(t,n)})),this.focus(t.focusElement||this._getElementName(P)),this.editor._onAction("moveNodes",{count:T.length,fieldNames:T.map(x),oldParentPath:s.getInternalPath(),newParentPath:R.parent.getInternalPath(),oldIndex:r.getIndex(),newIndex:R.getIndex(),oldIndexRedo:l,newIndexRedo:c,oldParentPathRedo:h,newParentPathRedo:u,oldSelection:o,newSelection:this.editor.getDomSelection()})),S=!0):39===A?k&&!M?((_=this._nextElement(P))&&this.focus(this._getElementName(_)),S=!0):k&&M&&E&&(C=R.getDom().previousSibling)&&(n=t.getNodeFromTarget(C))&&n.parent&&!n.isVisible()&&(o=this.editor.getDomSelection(),r=(s=R.parent).childs[L.getIndex()+1]||s.append,l=R.getIndex(),c=n.getIndex(),h=s.getInternalPath(),u=n.parent.getInternalPath(),T.forEach((function(t){n.parent.moveBefore(t,n)})),this.focus(t.focusElement||this._getElementName(P)),this.editor._onAction("moveNodes",{count:T.length,fieldNames:T.map(x),oldParentPath:s.getInternalPath(),newParentPath:R.parent.getInternalPath(),oldIndex:r.getIndex(),newIndex:R.getIndex(),oldIndexRedo:l,newIndexRedo:c,oldParentPathRedo:h,newParentPathRedo:u,oldSelection:o,newSelection:this.editor.getDomSelection()})):40===A&&(k&&!M?((i=this._nextNode())&&(this.editor.deselect(!0),i.focus(t.focusElement||this._getElementName(P))),S=!0):!k&&O&&M&&E?((i=this._nextNode())&&((p=this.editor.multiselection).start=p.start||this,p.end=i,d=this.editor._findTopLevelNodes(p.start,p.end),this.editor.select(d),i.focus("field")),S=!0):k&&M&&E&&((i=L.expanded?L.append?L.append._nextNode():void 0:L._nextNode())&&!i.isVisible()&&(i=i.parent.showMore),i&&i instanceof I&&(i=L),(w=i&&(i._nextNode()||i.parent.append))&&w.parent&&(o=this.editor.getDomSelection(),r=(s=R.parent).childs[L.getIndex()+1]||s.append,l=R.getIndex(),c=w.getIndex(),h=s.getInternalPath(),u=w.parent.getInternalPath(),T.forEach((function(t){w.parent.moveBefore(t,w)})),this.focus(t.focusElement||this._getElementName(P)),this.editor._onAction("moveNodes",{count:T.length,fieldNames:T.map(x),oldParentPath:s.getInternalPath(),newParentPath:R.parent.getInternalPath(),oldParentPathRedo:h,newParentPathRedo:u,oldIndexRedo:l,newIndexRedo:c,oldIndex:r.getIndex(),newIndex:R.getIndex(),oldSelection:o,newSelection:this.editor.getDomSelection()})),S=!0)),S&&(e.preventDefault(),e.stopPropagation())}},{key:"_onExpand",value:function(t){var e,n,i;t&&(i=(n=(e=this.dom.tr.parentNode).parentNode).scrollTop,n.removeChild(e)),this.expanded?this.collapse(t):this.expand(t),t&&(n.appendChild(e),n.scrollTop=i)}},{key:"_showColorPicker",value:function(){var t,e;"function"==typeof this.editor.options.onColorPicker&&this.dom.color&&((t=this)._deleteDomColor(),t.updateDom(),e=Object(g.a)(this.dom.color,this.editor.getPopupAnchor()),this.editor.options.onColorPicker(e,this.value,(function(e){"string"==typeof e&&e!==t.value&&(t._deleteDomColor(),t.value=e,t.updateDom(),t._debouncedOnChangeValue())})))}},{key:"getFieldNames",value:function(t){return"object"===this.type?this.childs.filter((function(e){return e!==t})).map((function(t){return t.field})):[]}},{key:"_onInsertBefore",value:function(e,n,i){var o=this.editor.getDomSelection(),r=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});r.expand(!0);var a=this.getInternalPath();this.parent.insertBefore(r,this),this.editor.highlighter.unhighlight(),r.focus("field");var s=this.editor.getDomSelection();this.editor._onAction("insertBeforeNodes",{nodes:[r],paths:[r.getInternalPath()],beforePath:a,parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:s})}},{key:"_onInsertAfter",value:function(e,n,i){var o=this.editor.getDomSelection(),r=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});r.expand(!0),this.parent.insertAfter(r,this),this.editor.highlighter.unhighlight(),r.focus("field");var a=this.editor.getDomSelection();this.editor._onAction("insertAfterNodes",{nodes:[r],paths:[r.getInternalPath()],afterPath:this.getInternalPath(),parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:a})}},{key:"_onAppend",value:function(e,n,i){var o=this.editor.getDomSelection(),r=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});r.expand(!0),this.parent.appendChild(r),this.editor.highlighter.unhighlight(),r.focus("field");var a=this.editor.getDomSelection();this.editor._onAction("appendNodes",{nodes:[r],paths:[r.getInternalPath()],parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:a})}},{key:"_onChangeType",value:function(t){var e,n,i=this.type;t!==i&&(e=this.editor.getDomSelection(),this.changeType(t),n=this.editor.getDomSelection(),this.editor._onAction("changeType",{path:this.getInternalPath(),oldType:i,newType:t,oldSelection:e,newSelection:n}))}},{key:"sort",value:function(t,e,n){var i,o,r=!(2<arguments.length&&void 0!==n)||n;"string"==typeof t&&(t=Object(a.parsePath)(t)),this._hasChilds()&&(this.hideChilds(),i=this.childs,this.childs=this.childs.concat(),o="desc"===e?-1:1,this.childs.sort("object"===this.type?function(t,e){return o*p()(t.field,e.field)}:function(e,n){var i=e.getNestedChild(t),r=n.getNestedChild(t);if(!i)return o;if(!r)return-o;var a=i.value,s=r.value;return"string"!=typeof a&&"string"!=typeof s?s<a?o:a<s?-o:0:o*p()(a,s)}),this._updateDomIndexes(),this.showChilds(),!0===r&&this.editor._onAction("sort",{path:this.getInternalPath(),oldChilds:i,newChilds:this.childs}))}},{key:"update",value:function(t){var e=this.getInternalValue();this.setValue(t),this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:e,newValue:this.getInternalValue()})}},{key:"_detachFromDom",value:function(){var t=this.dom.tr?this.dom.tr.parentNode:void 0,e=this.expanded?this.getAppendDom():this.getDom(),n=e&&e.parentNode?e.nextSibling:void 0;return this.hide({resetVisibleChilds:!1}),{table:t,nextTr:n}}},{key:"_attachToDom",value:function(t){t.table&&(t.nextTr?t.table.insertBefore(this.getDom(),t.nextTr):t.table.appendChild(this.getDom())),this.expanded&&this.showChilds()}},{key:"transform",value:function(t){if(this._hasChilds()){this.hideChilds();try{var e=this.getInternalValue(),n=this.getValue(),i=this.editor.options.executeQuery(n,t);this.setValue(i);var o=this.getInternalValue();this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:e,newValue:o}),this.showChilds()}catch(t){this.showChilds(),this.editor._onError(t)}}}},{key:"extract",value:function(){this.editor.node.hideChilds(),this.hideChilds();try{var t=this.editor.node.getInternalValue();this.editor._setRoot(this);var e=this.editor.node.getInternalValue();this.editor._onAction("transform",{path:this.editor.node.getInternalPath(),oldValue:t,newValue:e})}catch(t){this.editor._onError(t)}finally{this.updateDom({recurse:!0}),this.showChilds()}}},{key:"getNestedChild",value:function(t){for(var e=0,n=this;n&&e<t.length;)n=n.findChildByProperty(t[e]),e++;return n}},{key:"findChildByProperty",value:function(t){if("object"===this.type)return this.childs.find((function(e){return e.field===t}))}},{key:"getAppendDom",value:function(){return this.append||(this.append=new I(this.editor),this.append.setParent(this)),this.append.getDom()}},{key:"getShowMoreDom",value:function(){return this.showMore||(this.showMore=new P(this.editor,this)),this.showMore.getDom()}},{key:"nextSibling",value:function(){var t=this.parent.childs.indexOf(this);return this.parent.childs[t+1]||this.parent.append}},{key:"_previousNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode)for(var i=n;e=t.getNodeFromTarget(i=i.previousSibling),i&&e&&e instanceof I&&!e.isVisible(););return e}},{key:"_nextNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode)for(var i=n;e=t.getNodeFromTarget(i=i.nextSibling),i&&e&&e instanceof I&&!e.isVisible(););return e}},{key:"_firstNode",value:function(){var e=null,n=this.getDom();return n&&n.parentNode&&(e=t.getNodeFromTarget(n.parentNode.firstChild)),e}},{key:"_lastNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode){var i=n.parentNode.lastChild;for(e=t.getNodeFromTarget(i);i&&e&&!e.isVisible();)e=t.getNodeFromTarget(i=i.previousSibling)}return e}},{key:"_previousElement",value:function(t){var e=this.dom;switch(t){case e.value:if(this.fieldEditable)return e.field;case e.field:if(this._hasChilds())return e.expand;case e.expand:return e.menu;case e.menu:if(e.drag)return e.drag;default:return null}}},{key:"_nextElement",value:function(t){var e=this.dom;switch(t){case e.drag:return e.menu;case e.menu:if(this._hasChilds())return e.expand;case e.expand:if(this.fieldEditable)return e.field;case e.field:if(!this._hasChilds())return e.value;default:return null}}},{key:"_getElementName",value:function(t){var e=this;return Object.keys(this.dom).find((function(n){return e.dom[n]===t}))}},{key:"_hasChilds",value:function(){return"array"===this.type||"object"===this.type}},{key:"addTemplates",value:function(t,e){var n=this,i=n.editor.options.templates;null!=i&&(i.length&&t.push({type:"separator"}),i.forEach((function(i){t.push({text:i.text,className:i.className||"jsoneditor-type-object",title:i.title,click:e?(function(t,e){n._onAppend(t,e)}).bind(this,i.field,i.value):(function(t,e){n._onInsertBefore(t,e)}).bind(this,i.field,i.value)})})))}},{key:"showContextMenu",value:function(e,n){var i,o,r,a,s=this,c=[];this.editable.value&&c.push({text:Object(l.c)("type"),title:Object(l.c)("typeTitle"),className:"jsoneditor-type-"+this.type,submenu:[{text:Object(l.c)("auto"),className:"jsoneditor-type-auto"+("auto"===this.type?" jsoneditor-selected":""),title:Object(l.c)("autoType"),click:function(){s._onChangeType("auto")}},{text:Object(l.c)("array"),className:"jsoneditor-type-array"+("array"===this.type?" jsoneditor-selected":""),title:Object(l.c)("arrayType"),click:function(){s._onChangeType("array")}},{text:Object(l.c)("object"),className:"jsoneditor-type-object"+("object"===this.type?" jsoneditor-selected":""),title:Object(l.c)("objectType"),click:function(){s._onChangeType("object")}},{text:Object(l.c)("string"),className:"jsoneditor-type-string"+("string"===this.type?" jsoneditor-selected":""),title:Object(l.c)("stringType"),click:function(){s._onChangeType("string")}}]}),this._hasChilds()&&(this.editor.options.enableSort&&c.push({text:Object(l.c)("sort"),title:Object(l.c)("sortTitle",{type:this.type}),className:"jsoneditor-sort-asc",click:function(){s.showSortModal()}}),this.editor.options.enableTransform&&c.push({text:Object(l.c)("transform"),title:Object(l.c)("transformTitle",{type:this.type}),className:"jsoneditor-transform",click:function(){s.showTransformModal()}}),this.parent&&c.push({text:Object(l.c)("extract"),title:Object(l.c)("extractTitle",{type:this.type}),className:"jsoneditor-extract",click:function(){s.extract()}})),this.parent&&this.parent._hasChilds()&&(c.length&&c.push({type:"separator"}),s===(i=s.parent.childs)[i.length-1]&&(o=[{text:Object(l.c)("auto"),className:"jsoneditor-type-auto",title:Object(l.c)("autoType"),click:function(){s._onAppend("","","auto")}},{text:Object(l.c)("array"),className:"jsoneditor-type-array",title:Object(l.c)("arrayType"),click:function(){s._onAppend("",[])}},{text:Object(l.c)("object"),className:"jsoneditor-type-object",title:Object(l.c)("objectType"),click:function(){s._onAppend("",{})}},{text:Object(l.c)("string"),className:"jsoneditor-type-string",title:Object(l.c)("stringType"),click:function(){s._onAppend("","","string")}}],s.addTemplates(o,!0),c.push({text:Object(l.c)("appendText"),title:Object(l.c)("appendTitle"),submenuTitle:Object(l.c)("appendSubmenuTitle"),className:"jsoneditor-append",click:function(){s._onAppend("","","auto")},submenu:o})),r=[{text:Object(l.c)("auto"),className:"jsoneditor-type-auto",title:Object(l.c)("autoType"),click:function(){s._onInsertBefore("","","auto")}},{text:Object(l.c)("array"),className:"jsoneditor-type-array",title:Object(l.c)("arrayType"),click:function(){s._onInsertBefore("",[])}},{text:Object(l.c)("object"),className:"jsoneditor-type-object",title:Object(l.c)("objectType"),click:function(){s._onInsertBefore("",{})}},{text:Object(l.c)("string"),className:"jsoneditor-type-string",title:Object(l.c)("stringType"),click:function(){s._onInsertBefore("","","string")}}],s.addTemplates(r,!1),c.push({text:Object(l.c)("insert"),title:Object(l.c)("insertTitle"),submenuTitle:Object(l.c)("insertSub"),className:"jsoneditor-insert",click:function(){s._onInsertBefore("","","auto")},submenu:r}),this.editable.field&&(c.push({text:Object(l.c)("duplicateText"),title:Object(l.c)("duplicateField"),className:"jsoneditor-duplicate",click:function(){t.onDuplicate(s)}}),c.push({text:Object(l.c)("removeText"),title:Object(l.c)("removeField"),className:"jsoneditor-remove",click:function(){t.onRemove(s)}}))),this.editor.options.onCreateMenu&&(a=s.getPath(),c=this.editor.options.onCreateMenu(c,{type:"single",path:a,paths:[a]})),new h.a(c,{close:n}).show(e,this.editor.getPopupAnchor())}},{key:"showSortModal",value:function(){var t=this,e=this.editor.options.modalAnchor||v.a,n=this.getValue();Object(m.showSortModal)(e,n,(function(e){var n=e.path,i=Object(a.parsePath)(n);t.sortedBy=e,t.sort(i,e.direction)}),t.sortedBy)}},{key:"showTransformModal",value:function(){var t=this,e=this.editor.options,n=e.modalAnchor,i=e.createQuery,o=e.executeQuery,r=e.queryDescription,a=this.getValue();Object(f.showTransformModal)({anchor:n||v.a,json:a,queryDescription:r,createQuery:i,executeQuery:o,onTransform:function(e){t.transform(e)}})}},{key:"_getType",value:function(t){return t instanceof Array?"array":t instanceof Object?"object":"string"==typeof t&&"string"!=typeof Object(a.parseString)(t)?"string":"auto"}},{key:"_escapeHTML",value:function(t){if("string"!=typeof t)return String(t);var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),n=JSON.stringify(e),i=n.substring(1,n.length-1);return!0===this.editor.options.escapeUnicode&&(i=Object(a.escapeUnicodeChars)(i)),i}},{key:"_unescapeHTML",value:function(t){var e='"'+this._escapeJSON(t)+'"';return Object(a.parse)(e).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")}},{key:"_escapeJSON",value:function(t){for(var e="",n=0;n<t.length;){var i=t.charAt(n);"\n"===i?e+="\\n":"\\"===i?(e+=i,n++,""!==(i=t.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(e+="\\"),e+=i):e+='"'===i?'\\"':i,n++}return e}},{key:"updateNodeName",value:function(){var t,e=this.childs?this.childs.length:0;if("object"===this.type||"array"===this.type){if(this.editor.options.onNodeName)try{t=this.editor.options.onNodeName({path:this.getPath(),size:e,type:this.type})}catch(t){console.error("Error in onNodeName callback: ",t)}this.dom.value.textContent="object"===this.type?"{"+(t||e)+"}":"["+(t||e)+"]"}}},{key:"recursivelyUpdateNodeName",value:function(){var t;if(this.expanded&&(this.updateNodeName(),"undefined"!==this.childs))for(t in this.childs)this.childs[t].recursivelyUpdateNodeName()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();y.prototype.DEBOUNCE_INTERVAL=150,y.prototype.MAX_SEARCH_RESULTS=999;var _=100;function C(t){return t.getInternalPath()}function x(t){return t.getField()}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}y.focusElement=void 0,y.select=function(t){setTimeout((function(){Object(a.selectContentEditable)(t)}),0)},y.onDragStart=function(t,e){if(!Array.isArray(t))return y.onDragStart([t],e);var n,i,o,r,s,l;0!==t.length&&(i=t[t.length-1],o=(n=t[0]).parent,r=y.getNodeFromTarget(e.target),s=n.editor,l=Object(a.getAbsoluteTop)(r.dom.tr)-Object(a.getAbsoluteTop)(n.dom.tr),s.mousemove||(s.mousemove=Object(a.addEventListener)(window,"mousemove",(function(e){y.onDrag(t,e)}))),s.mouseup||(s.mouseup=Object(a.addEventListener)(window,"mouseup",(function(e){y.onDragEnd(t,e)}))),s.highlighter.lock(),s.drag={oldCursor:document.body.style.cursor,oldSelection:s.getDomSelection(),oldPaths:t.map(C),oldParent:o,oldNextNode:o.childs[i.getIndex()+1]||o.append,oldParentPathRedo:o.getInternalPath(),oldIndexRedo:n.getIndex(),mouseX:e.pageX,offsetY:l,level:n.getLevel()},document.body.style.cursor="move",e.preventDefault())},y.onDrag=function(t,e){if(!Array.isArray(t))return y.onDrag([t],e);if(0!==t.length){var n,i,o,r,s,l,c,h=t[0].editor,u=e.pageY-h.drag.offsetY,d=e.pageX,p=!1,g=t[0],m=g.dom.tr,f=Object(a.getAbsoluteTop)(m),v=m.offsetHeight;if(u<f){for(P=m;O=y.getNodeFromTarget(P=P.previousSibling),r=P?Object(a.getAbsoluteTop)(P):0,P&&u<r;);O&&!O.parent&&(O=void 0),O||(P=(i=m.parentNode.firstChild)?i.nextSibling:void 0,(O=y.getNodeFromTarget(P))===g&&(O=void 0)),O&&O.isVisible()&&(r=(P=O.dom.tr)?Object(a.getAbsoluteTop)(P):0)+v<u&&(O=void 0),!O||!1!==h.options.limitDragging&&O.parent!==t[0].parent||(t.forEach((function(t){O.parent.moveBefore(t,O)})),p=!0)}else{var b,_,C=t[t.length-1];if(_=(b=C.expanded&&C.append?C.append.getDom():C.dom.tr)?b.nextSibling:void 0){for(s=Object(a.getAbsoluteTop)(_),n=_;o=y.getNodeFromTarget(n),n&&(l=n.nextSibling?Object(a.getAbsoluteTop)(n.nextSibling):0,c=n?l-s:0,o&&o.parent.childs.length===t.length&&o.parent.childs[t.length-1]===C&&(f+=27),n=n.nextSibling),n&&f+c<u;);if(o&&o.parent){for(var x=Math.round((d-h.drag.mouseX)/24/2),w=h.drag.level+x,A=o.getLevel(),P=o.dom.tr&&o.dom.tr.previousSibling;A<w&&P;){var O=y.getNodeFromTarget(P);if(!t.some((function(t){return t===O||O.isDescendantOf(t)}))){if(!(O instanceof I))break;var M=O.parent.childs;if(M.length===t.length&&M[t.length-1]===C)break;A=(o=y.getNodeFromTarget(P)).getLevel()}P=P.previousSibling}o instanceof I&&!o.isVisible()&&o.parent.showMore.isVisible()&&(o=o._nextNode()),o&&(!1===h.options.limitDragging||o.parent===t[0].parent)&&o.dom.tr&&o.dom.tr!==b.nextSibling&&(t.forEach((function(t){o.parent.moveBefore(t,o)})),p=!0)}}}p&&(h.drag.mouseX=d,h.drag.level=g.getLevel()),h.startAutoScroll(u),e.preventDefault()}},y.onDragEnd=function(t,e){if(!Array.isArray(t))return y.onDrag([t],e);var n,i,o,r,s,l,c,h,u,d;0!==t.length&&(i=(n=t[0]).editor,t[0]&&t[0].dom.menu.focus(),o=i.drag.oldParent.getInternalPath(),r=n.parent.getInternalPath(),s=i.drag.oldParent===n.parent,l=i.drag.oldNextNode.getIndex(),c=n.getIndex(),h=i.drag.oldParentPathRedo,u=i.drag.oldIndexRedo,d=s&&u<c?c+t.length:c,s&&u===c||i._onAction("moveNodes",{count:t.length,fieldNames:t.map(x),oldParentPath:o,newParentPath:r,oldIndex:l,newIndex:c,oldIndexRedo:u,newIndexRedo:d,oldParentPathRedo:h,newParentPathRedo:null,oldSelection:i.drag.oldSelection,newSelection:i.getDomSelection()}),document.body.style.cursor=i.drag.oldCursor,i.highlighter.unlock(),t.forEach((function(t){t.updateDom(),e.target!==t.dom.drag&&e.target!==t.dom.menu&&i.highlighter.unhighlight()})),delete i.drag,i.mousemove&&(Object(a.removeEventListener)(window,"mousemove",i.mousemove),delete i.mousemove),i.mouseup&&(Object(a.removeEventListener)(window,"mouseup",i.mouseup),delete i.mouseup),i.stopAutoScroll(),e.preventDefault())},y._findEnum=function(t){if(t.enum)return t.enum;var e=t.oneOf||t.anyOf||t.allOf;if(e){var n=e.filter((function(t){return t.enum}));if(0<n.length)return n[0].enum}return null},y._findSchema=function(t,e,n){for(var i=t,o=i,r=(r=t.oneOf||t.anyOf||t.allOf)||[t],a=0;a<r.length;a++){"$ref"in(i=r[a])&&"string"==typeof i.$ref&&(i=e[i.$ref])&&(o=y._findSchema(i,e,n));for(var s=0;s<n.length&&i;s++){var l=n.slice(s+1,n.length),c=n[s];if("string"!=typeof c||!i.patternProperties||i.properties&&c in i.properties)"string"==typeof c&&i.properties?c in i.properties?(i=i.properties[c])&&(o=y._findSchema(i,e,l)):o=null:"number"==typeof c&&i.items&&(i=i.items)&&(o=y._findSchema(i,e,l));else for(var h in i.patternProperties)c.match(h)&&(o=y._findSchema(i.patternProperties[h],e,l))}}return o===t&&0<n.length?null:o},y.onRemove=function(t){if(!Array.isArray(t))return y.onRemove([t]);var e,n,i,o,r,a,s;t&&0<t.length&&(n=(e=t[0]).parent,i=e.editor,o=e.getIndex(),i.highlighter.unhighlight(),r=i.getDomSelection(),y.blurNodes(t),a=i.getDomSelection(),s=t.map(C),t.forEach((function(t){t.parent._remove(t)})),i._onAction("removeNodes",{nodes:t,paths:s,parentPath:n.getInternalPath(),index:o,oldSelection:r,newSelection:a}))},y.onDuplicate=function(t){if(!Array.isArray(t))return y.onDuplicate([t]);var e,n,i,o,r,s,l;t&&0<t.length&&(n=(e=t[t.length-1]).parent,(i=e.editor).deselect(i.multiselection.nodes),o=i.getDomSelection(),r=e,s=t.map((function(t){var e,i=t.clone();return"object"===t.parent.type&&(e=t.parent.getFieldNames(),i.field=Object(a.findUniqueName)(t.field,e)),n.insertAfter(i,r),r=i})),1===t.length?"object"===s[0].parent.type?(s[0].dom.field.innerHTML=(void 0)._escapeHTML(t[0].field),s[0].focus("field")):s[0].focus():i.select(s),l=i.getDomSelection(),i._onAction("duplicateNodes",{paths:t.map(C),clonePaths:s.map(C),afterPath:e.getInternalPath(),parentPath:n.getInternalPath(),oldSelection:o,newSelection:l}))},y.getNodeFromTarget=function(t){for(;t;){if(t.node)return t.node;t=t.parentNode}},y.targetIsColorPicker=function(t){var e=y.getNodeFromTarget(t);if(e)for(var n=t&&t.parentNode;n;){if(n===e.dom.color)return!0;n=n.parentNode}return!1},y.blurNodes=function(t){var e,n,i;Array.isArray(t)?(n=(e=t[0]).parent,i=e.getIndex(),n.childs[i+t.length]?n.childs[i+t.length].focus():n.childs[i-1]?n.childs[i-1].focus():n.focus()):y.blurNodes([t])};var I=((A.prototype=new y).getDom=function(){var t=this.dom;if(t.tr)return t.tr;this._updateEditability();var e,n,i=document.createElement("tr");i.className="jsoneditor-append",i.node=this,t.tr=i,"tree"===this.editor.options.mode&&(t.tdDrag=document.createElement("td"),e=document.createElement("td"),t.tdMenu=e,(n=document.createElement("button")).type="button",n.className="jsoneditor-button jsoneditor-contextmenu-button",n.title="Click to open the actions menu (Ctrl+M)",t.menu=n,e.appendChild(t.menu));var o=document.createElement("td"),r=document.createElement("div");return r.appendChild(document.createTextNode("("+Object(l.c)("empty")+")")),r.className="jsoneditor-readonly",o.appendChild(r),t.td=o,t.text=r,this.updateDom(),i},A.prototype.getPath=function(){return null},A.prototype.getIndex=function(){return null},A.prototype.updateDom=function(t){var e=this.dom,n=e.td;n&&(n.style.paddingLeft=24*this.getLevel()+26+"px");var i=e.text;i&&(i.firstChild.nodeValue="("+Object(l.c)("empty")+" "+this.parent.type+")");var o=e.tr;this.isVisible()?e.tr.firstChild||(e.tdDrag&&o.appendChild(e.tdDrag),e.tdMenu&&o.appendChild(e.tdMenu),o.appendChild(n)):e.tr.firstChild&&(e.tdDrag&&o.removeChild(e.tdDrag),e.tdMenu&&o.removeChild(e.tdMenu),o.removeChild(n))},A.prototype.isVisible=function(){return 0===this.parent.childs.length},A.prototype.showContextMenu=function(t,e){var n=this,i=[{text:Object(l.c)("auto"),className:"jsoneditor-type-auto",title:Object(l.c)("autoType"),click:function(){n._onAppend("","","auto")}},{text:Object(l.c)("array"),className:"jsoneditor-type-array",title:Object(l.c)("arrayType"),click:function(){n._onAppend("",[])}},{text:Object(l.c)("object"),className:"jsoneditor-type-object",title:Object(l.c)("objectType"),click:function(){n._onAppend("",{})}},{text:Object(l.c)("string"),className:"jsoneditor-type-string",title:Object(l.c)("stringType"),click:function(){n._onAppend("","","string")}}];n.addTemplates(i,!0);var o,r=[{text:Object(l.c)("appendText"),title:Object(l.c)("appendTitleAuto"),submenuTitle:Object(l.c)("appendSubmenuTitle"),className:"jsoneditor-insert",click:function(){n._onAppend("","","auto")},submenu:i}];this.editor.options.onCreateMenu&&(o=n.parent.getPath(),r=this.editor.options.onCreateMenu(r,{type:"append",path:o,paths:[o]})),new h.a(r,{close:e}).show(t,this.editor.getPopupAnchor())},A.prototype.onEvent=function(t){var e,n=t.type,i=t.target||t.srcElement,o=this.dom;i===o.menu&&("mouseover"===n?this.editor.highlighter.highlight(this.parent):"mouseout"===n&&this.editor.highlighter.unhighlight()),"click"===n&&i===o.menu&&((e=this.editor.highlighter).highlight(this.parent),e.lock(),Object(a.addClassName)(o.menu,"jsoneditor-selected"),this.showContextMenu(o.menu,(function(){Object(a.removeClassName)(o.menu,"jsoneditor-selected"),e.unlock(),e.unhighlight()}))),"keydown"===n&&this.onKeyDown(t)},A);function A(t){this.editor=t,this.dom={}}var P=((O.prototype=new y).getDom=function(){return this.dom.tr||(this._updateEditability(),this.dom.tr||(e=(t=this).parent,(n=document.createElement("a")).appendChild(document.createTextNode(Object(l.c)("showMore"))),n.href="#",n.onclick=function(n){return e.visibleChilds=Math.floor(e.visibleChilds/e.getMaxVisibleChilds()+1)*e.getMaxVisibleChilds(),t.updateDom(),e.showChilds(),n.preventDefault(),!1},(i=document.createElement("a")).appendChild(document.createTextNode(Object(l.c)("showAll"))),i.href="#",i.onclick=function(n){return e.visibleChilds=1/0,t.updateDom(),e.showChilds(),n.preventDefault(),!1},o=document.createElement("div"),r=document.createTextNode(this._getShowMoreText()),o.className="jsoneditor-show-more",o.appendChild(r),o.appendChild(n),o.appendChild(document.createTextNode(". ")),o.appendChild(i),o.appendChild(document.createTextNode(". ")),(a=document.createElement("td")).appendChild(o),s=document.createElement("tr"),"tree"===this.editor.options.mode&&(s.appendChild(document.createElement("td")),s.appendChild(document.createElement("td"))),s.appendChild(a),s.className="jsoneditor-show-more",this.dom.tr=s,this.dom.moreContents=o,this.dom.moreText=r),this.updateDom()),this.dom.tr;var t,e,n,i,o,r,a,s},O.prototype.updateDom=function(t){var e;this.isVisible()?(this.dom.tr.node=this.parent.childs[this.parent.visibleChilds],this.dom.tr.parentNode||(e=this.parent._getNextTr())&&e.parentNode.insertBefore(this.dom.tr,e),this.dom.moreText.nodeValue=this._getShowMoreText(),this.dom.moreContents.style.marginLeft=24*(this.getLevel()+1)+"px"):this.dom.tr&&this.dom.tr.parentNode&&this.dom.tr.parentNode.removeChild(this.dom.tr)},O.prototype._getShowMoreText=function(){return Object(l.c)("showMoreStatus",{visibleChilds:this.parent.visibleChilds,totalChilds:this.parent.childs.length})+" "},O.prototype.isVisible=function(){return this.parent.expanded&&this.parent.childs.length>this.parent.visibleChilds},O.prototype.onEvent=function(t){"keydown"===t.type&&this.onKeyDown(t)},O);function O(t,e){this.editor=t,this.parent=e,this.dom={}}var M=n(8),k=n(9),S={start:function(t,e){return 0===e.indexOf(t)},contain:function(t,e){return-1<e.indexOf(t)}},E=n(4),T={create:function(t,e){if(!t)throw new Error("No container element provided.");this.container=t,this.dom={},this.highlighter=new r,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.validationSequence=0,this.errorNodes=[],this.lastSchemaErrors=void 0,this.node=null,this.focusTarget=null,this._setOptions(e),e.autocomplete&&(this.autocomplete=function(t){(t=t||{}).filter=t.filter||"start",t.trigger=t.trigger||"keydown",t.confirmKeys=t.confirmKeys||[39,35,9],t.caseSensitive=t.caseSensitive||!1;var e="",n="",i=document.createElement("div");i.style.position="relative",i.style.outline="0",i.style.border="0",i.style.margin="0",i.style.padding="0";var o,r,a=document.createElement("div");function s(t){var e,n;document.createRange?((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(t),e.collapse(!1),e.select())}function l(t){return void 0===o&&((o=document.createElement("span")).style.visibility="hidden",o.style.position="fixed",o.style.outline="0",o.style.margin="0",o.style.padding="0",o.style.border="0",o.style.left="0",o.style.whiteSpace="pre",o.style.fontSize=e,o.style.fontFamily=n,o.style.fontWeight="normal",document.body.appendChild(o)),o.textContent=t,o.getBoundingClientRect().right}a.className="autocomplete dropdown",a.style.position="absolute",a.style.visibility="hidden";var c,h,u,d,p,g={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},startFrom:0,options:[],element:null,elementHint:null,elementStyle:null,wrapper:i,show:function(t,o,r){var s=this;this.startFrom=o,this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null),""===e&&(e=window.getComputedStyle(t).getPropertyValue("font-size")),""===n&&(n=window.getComputedStyle(t).getPropertyValue("font-family")),a.style.marginLeft="0",a.style.marginTop=t.getBoundingClientRect().height+"px",this.options=r.map(String),this.element!==t&&(this.element=t,this.elementStyle={zIndex:this.element.style.zIndex,position:this.element.style.position,backgroundColor:this.element.style.backgroundColor,borderColor:this.element.style.borderColor}),this.element.style.zIndex=3,this.element.style.position="relative",this.element.style.backgroundColor="transparent",this.element.style.borderColor="transparent",this.elementHint=t.cloneNode(),this.elementHint.className="autocomplete hint",this.elementHint.style.zIndex=2,this.elementHint.style.position="absolute",this.elementHint.onfocus=function(){s.element.focus()},this.element.addEventListener&&(this.element.removeEventListener("keydown",y),this.element.addEventListener("keydown",y,!1),this.element.removeEventListener("blur",_),this.element.addEventListener("blur",_,!1)),i.appendChild(this.elementHint),i.appendChild(a),t.parentElement.appendChild(i),this.repaint(t)},setText:function(t){this.element.innerText=t},getText:function(){return this.element.innerText},hideDropDown:function(){this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null,m.hide(),this.element.style.zIndex=this.elementStyle.zIndex,this.element.style.position=this.elementStyle.position,this.element.style.backgroundColor=this.elementStyle.backgroundColor,this.element.style.borderColor=this.elementStyle.borderColor)},repaint:function(e){var n=(n=e.innerText).replace("\n",""),i=this.options.length,o=n.substring(this.startFrom);r=n.substring(0,this.startFrom);for(var s=0;s<i;s++){var c=this.options[s];if(!t.caseSensitive&&0===c.toLowerCase().indexOf(o.toLowerCase())||t.caseSensitive&&0===c.indexOf(o)){this.elementHint.innerText=r+o+c.substring(o.length),this.elementHint.realInnerText=r+c;break}}a.style.left=l(r)+"px",m.refresh(o,this.options),this.elementHint.style.width=l(this.elementHint.innerText)+10+"px","hidden"===a.style.visibility||(this.elementHint.style.width=l(this.elementHint.innerText)+a.clientWidth+"px")}},m=(c=a,h=[],u=0,d=-1,p={rs:g,hide:function(){c.style.visibility="hidden"},refresh:function(e,n){c.style.visibility="hidden",u=0,c.textContent="";var i=window.innerHeight||document.documentElement.clientHeight,o=c.parentNode.getBoundingClientRect(),r=o.top-6,a=i-o.bottom-6;h=[];var s="function"==typeof t.filter?t.filter:S[t.filter],l=s?n.filter((function(n){return s(t.caseSensitive?e:e.toLowerCase(),t.caseSensitive?n:n.toLowerCase(),t)})):[];0!==(h=l.map((function(t){var n=document.createElement("div");n.className="item",n.onmouseover=f,n.onmouseout=v,n.onmousedown=b,n.__hint=t,n.textContent="",n.appendChild(document.createTextNode(t.substring(0,e.length)));var i=document.createElement("b");return i.appendChild(document.createTextNode(t.substring(e.length))),n.appendChild(i),c.appendChild(n),n}))).length&&(1===h.length&&(e.toLowerCase()===h[0].__hint.toLowerCase()&&!t.caseSensitive||e===h[0].__hint&&t.caseSensitive)||h.length<2||(p.highlight(0),3*a<r?(c.style.maxHeight=r+"px",c.style.top="",c.style.bottom="100%"):(c.style.top="100%",c.style.bottom="",c.style.maxHeight=a+"px"),c.style.visibility="visible"))},highlight:function(t){-1!==d&&h[d]&&(h[d].className="item"),h[t].className="item hover",d=t},move:function(t){return"hidden"===c.style.visibility?"":(u+t===-1||u+t===h.length||p.highlight(u+=t),h[u].__hint)},onmouseselection:function(){}});function f(){this.style.backgroundColor="#ddd"}function v(){this.style.backgroundColor=""}function b(){p.hide(),p.onmouseselection(this.__hint,p.rs)}var y=(function(e){var n=(e=e||window.event).keyCode;if(null!=this.elementHint&&33!==n&&34!==n){if(27===n)return g.hideDropDown(),g.element.focus(),e.preventDefault(),void e.stopPropagation();var i,o,l=(l=this.element.innerText).replace("\n","");if(0<=t.confirmKeys.indexOf(n))return 9===n&&0===this.elementHint.innerText.length&&g.onTab(),void(0<this.elementHint.innerText.length&&this.element.innerText!==this.elementHint.realInnerText&&(this.element.innerText=this.elementHint.realInnerText,g.hideDropDown(),s(this.element),9===n&&(g.element.focus(),e.preventDefault(),e.stopPropagation())));if(13!==n){if(40===n){var c=l.substring(this.startFrom),h=m.move(1);return""===h&&g.onArrowDown(),this.elementHint.innerText=r+c+h.substring(c.length),this.elementHint.realInnerText=r+h,e.preventDefault(),void e.stopPropagation()}38===n&&(i=l.substring(this.startFrom),""===(o=m.move(-1))&&g.onArrowUp(),this.elementHint.innerText=r+i+o.substring(i.length),this.elementHint.realInnerText=r+o,e.preventDefault(),e.stopPropagation())}else if(0===this.elementHint.innerText.length)g.onEnter();else{var u="hidden"===a.style.visibility;if(m.hide(),u)return g.hideDropDown(),g.element.focus(),void g.onEnter();this.element.innerText=this.elementHint.realInnerText,g.hideDropDown(),s(this.element),e.preventDefault(),e.stopPropagation()}}}).bind(g),_=function(){g.hideDropDown()};return m.onmouseselection=function(t,e){e.element.innerText=e.elementHint.innerText=r+t,e.hideDropDown(),window.setTimeout((function(){e.element.focus(),s(e.element)}),1)},g}(e.autocomplete)),this.options.history&&"view"!==this.options.mode&&(this.history=new s(this)),this._createFrame(),this._createTable()},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.frameFocusTracker.destroy()},_setOptions:function(t){var e=this;this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null,schemaRefs:null,autocomplete:null,navigationBar:!0,mainMenuBar:!0,limitDragging:!1,onSelectionChange:null,colorPicker:!0,onColorPicker:function(t,e,n){var i,r;o.a?(i=t.getBoundingClientRect().top,r=window.innerHeight-i<300&&300<i,new o.a({parent:t,color:e,popup:r?"top":"bottom",onDone:function(t){var e=1===t.rgba[3]?t.hex.substr(0,7):t.hex;n(e)}}).show()):console.warn("Cannot open color picker: the `vanilla-picker` library is not included in the bundle. Either use the full bundle or implement your own color picker using `onColorPicker`.")},timestampTag:!0,timestampFormat:null,createQuery:E.a,executeQuery:E.b,onEvent:null,enableSort:!0,enableTransform:!0},t&&(Object.keys(t).forEach((function(n){e.options[n]=t[n]})),null==t.limitDragging&&null!=t.schema&&(this.options.limitDragging=!0)),this.setSchema(this.options.schema,this.options.schemaRefs),this._debouncedValidate=Object(a.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),t.onSelectionChange&&this.onSelectionChange(t.onSelectionChange),Object(l.b)(this.options.languages),Object(l.a)(this.options.language)},set:function(t){var e;t instanceof Function||void 0===t?this.clear():(this.content.removeChild(this.table),e=new y(this,{field:this.options.name,value:t}),this._setRoot(e),this.validate(),this.node.expand(!1),this.content.appendChild(this.table)),this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},update:function(t){var e,n,i;this.node.deepEqual(t)||(e=this.getSelection(),this.onChangeDisabled=!0,this.node.update(t),this.onChangeDisabled=!1,this.validate(),this.searchBox&&!this.searchBox.isEmpty()&&this.searchBox.forceSearch(),e&&e.start&&e.end?(n=this.node.findNodeByPath(e.start.path),i=this.node.findNodeByPath(e.end.path),n&&i?this.setSelection(e.start,e.end):this.setSelection({},{})):this.setSelection({},{}))},get:function(){return this.node?this.node.getValue():void 0},getText:function(){return JSON.stringify(this.get())},setText:function(e){try{this.set(Object(a.parse)(e))}catch(t){var n=Object(a.repair)(e);this.set(Object(a.parse)(n))}},updateText:function(e){try{this.update(Object(a.parse)(e))}catch(t){var n=Object(a.repair)(e);this.update(Object(a.parse)(n))}},setName:function(t){this.options.name=t,this.node&&this.node.updateField(this.options.name)},getName:function(){return this.options.name},focus:function(){var t=this.scrollableContent.querySelector("[contenteditable=true]");t?t.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(t=this.frame.querySelector("button"))&&t.focus()},clear:function(){this.node&&(this.node.hide(),delete this.node),this.treePath&&this.treePath.reset()},_setRoot:function(t){this.clear(),(this.node=t).setParent(null),t.setField(this.getName(),!1),delete t.index,this.tbody.appendChild(t.getDom())},search:function(t){var e;return this.node?(this.content.removeChild(this.table),e=this.node.search(t),this.content.appendChild(this.table)):e=[],e},expandAll:function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},collapseAll:function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},_onAction:function(t,e){this.history&&this.history.add(t,e),this._onChange()},_onChange:function(){if(!this.onChangeDisabled){var t;if(this.selection=this.getDomSelection(),this._debouncedValidate(),this.treePath&&((t=this.node&&this.selection?this.node.findNodeByInternalPath(this.selection.path):this.multiselection?this.multiselection.nodes[0]:void 0)?this._updateTreePath(t.getNodePath()):this.treePath.reset()),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(t){console.error("Error in onChangeJSON callback: ",t)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(t){console.error("Error in onChangeText callback: ",t)}if(this.options.onClassName&&this.node.recursivelyUpdateCssClassesOnNodes(),this.options.onNodeName&&this.node.childs)try{this.node.recursivelyUpdateNodeName()}catch(t){console.error("Error in onNodeName callback: ",t)}}},validate:function(){var t=this,e=this.node;if(e){var n=e.getValue(),i=[];this.validateSchema&&(this.validateSchema(n)||(i=this.validateSchema.errors.map((function(t){return Object(a.improveSchemaError)(t)})).map((function(t){return{node:e.findNode(t.dataPath),error:t,type:"validation"}})).filter((function(t){return null!=t.node}))));try{this.validationSequence++;var o=this,r=this.validationSequence;this._validateCustom(n).then((function(e){var n;r===o.validationSequence&&(n=[].concat(i,e||[]),o._renderValidationErrors(n),"function"==typeof t.options.onValidationError&&(Object(a.isValidationErrorChanged)(n,t.lastSchemaErrors)&&t.options.onValidationError.call(t,n),t.lastSchemaErrors=n))})).catch((function(t){console.error(t)}))}catch(n){console.error(n)}}},_renderValidationErrors:function(t){this.errorNodes&&this.errorNodes.forEach((function(t){t.setError(null)}));var e=t.reduce((function(t,e){return e.node.findParents().filter((function(e){return!t.some((function(t){return t[0]===e}))})).map((function(t){return[t,e.node]})).concat(t)}),[]);this.errorNodes=e.map((function(t){return{node:t[0],child:t[1],error:{message:"object"===t[0].type?"Contains invalid properties":"Contains invalid items"}}})).concat(t).map((function(t){return t.node.setError(t.error,t.child),t.node}))},_validateCustom:function(t){try{if(this.options.onValidate){var e=this.node,n=this.options.onValidate(t);return(Object(a.isPromise)(n)?n:Promise.resolve(n)).then((function(t){return Array.isArray(t)?t.filter((function(t){var e=Object(a.isValidValidationError)(t);return e||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',t),e})).map((function(t){var n;try{n=t&&t.path?e.findNodeByPath(t.path):null}catch(t){}return n||console.warn("Ignoring validation error: node not found. Path:",t.path,"Error:",t),{node:n,error:t,type:"customValidation"}})).filter((function(t){return t&&t.node&&t.error&&t.error.message})):null}))}}catch(t){return Promise.reject(t)}return Promise.resolve(null)},refresh:function(){this.node&&this.node.updateDom({recurse:!0})},startAutoScroll:function(t){var e=this,n=this.scrollableContent,i=Object(a.getAbsoluteTop)(n),o=n.clientHeight,r=i+o;this.autoScrollStep=t<i+24&&0<n.scrollTop?(i+24-t)/3:r-24<t&&o+n.scrollTop<n.scrollHeight?(r-24-t)/3:void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval((function(){e.autoScrollStep?n.scrollTop-=e.autoScrollStep:e.stopAutoScroll()}),50)):this.stopAutoScroll()},stopAutoScroll:function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},setDomSelection:function(t){var e,n,i,o,r;t&&("scrollTop"in t&&this.scrollableContent&&(this.scrollableContent.scrollTop=t.scrollTop),t.paths?(e=this,n=t.paths.map((function(t){return e.node.findNodeByInternalPath(t)})),this.select(n)):(o=(i=t.path?this.node.findNodeByInternalPath(t.path):null)&&t.domName?i.dom[t.domName]:null,t.range&&o?(r=Object.assign({},t.range,{container:o}),Object(a.setSelectionOffset)(r)):i&&i.focus()))},getDomSelection:function(){var t=y.getNodeFromTarget(this.focusTarget),e=this.focusTarget,n=t?Object.keys(t.dom).find((function(n){return t.dom[n]===e})):null,i=Object(a.getSelectionOffset)();return i&&"DIV"!==i.container.nodeName&&(i=null),i&&i.container!==e&&(i=null),i&&delete i.container,{path:t?t.getInternalPath():null,domName:n,range:i,paths:0<this.multiselection.length?this.multiselection.nodes.map((function(t){return t.getInternalPath()})):null,scrollTop:this.scrollableContent?this.scrollableContent.scrollTop:0}},scrollTo:function(t,e){var n,i,o,r,a=this.scrollableContent;a?((n=this).animateTimeout&&(clearTimeout(n.animateTimeout),delete n.animateTimeout),n.animateCallback&&(n.animateCallback(!1),delete n.animateCallback),o=a.scrollHeight-(i=a.clientHeight),r=Math.min(Math.max(t-i/4,0),o),function t(){var i=r-a.scrollTop;3<Math.abs(i)?(a.scrollTop+=i/3,n.animateCallback=e,n.animateTimeout=setTimeout(t,50)):(e&&e(!0),a.scrollTop=r,delete n.animateTimeout,delete n.animateCallback)}()):e&&e(!1)},_createFrame:function(){this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame),this.contentOuter=document.createElement("div"),this.contentOuter.className="jsoneditor-outer";var t,e,n,i,o,r,s,h=this;function d(t){h._onEvent&&h._onEvent(t)}this.frameFocusTracker=new k.a({target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null}),this.frame.onclick=function(t){var e=t.target;d(t),"BUTTON"===e.nodeName&&t.preventDefault()},this.frame.oninput=d,this.frame.onchange=d,this.frame.onkeydown=d,this.frame.onkeyup=d,this.frame.oncut=d,this.frame.onpaste=d,this.frame.onmousedown=d,this.frame.onmouseup=d,this.frame.onmouseover=d,this.frame.onmouseout=d,Object(a.addEventListener)(this.frame,"focus",d,!0),Object(a.addEventListener)(this.frame,"blur",d,!0),this.frame.onfocusin=d,this.frame.onfocusout=d,this.options.mainMenuBar&&(Object(a.addClassName)(this.contentOuter,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(t=document.createElement("button")).type="button",t.className="jsoneditor-expand-all",t.title=Object(l.c)("expandAll"),t.onclick=function(){h.expandAll()},this.menu.appendChild(t),(e=document.createElement("button")).type="button",e.title=Object(l.c)("collapseAll"),e.className="jsoneditor-collapse-all",e.onclick=function(){h.collapseAll()},this.menu.appendChild(e),this.options.enableSort&&((n=document.createElement("button")).type="button",n.className="jsoneditor-sort",n.title=Object(l.c)("sortTitleShort"),n.onclick=function(){h.node.showSortModal()},this.menu.appendChild(n)),this.options.enableTransform&&((i=document.createElement("button")).type="button",i.title=Object(l.c)("transformTitleShort"),i.className="jsoneditor-transform",i.onclick=function(){h.node.showTransformModal()},this.menu.appendChild(i)),this.history&&((o=document.createElement("button")).type="button",o.className="jsoneditor-undo jsoneditor-separator",o.title=Object(l.c)("undo"),o.onclick=function(){h._onUndo()},this.menu.appendChild(o),this.dom.undo=o,(r=document.createElement("button")).type="button",r.className="jsoneditor-redo",r.title=Object(l.c)("redo"),r.onclick=function(){h._onRedo()},this.menu.appendChild(r),this.dom.redo=r,this.history.onChange=function(){o.disabled=!h.history.canUndo(),r.disabled=!h.history.canRedo()},this.history.onChange()),this.options&&this.options.modes&&this.options.modes.length&&((s=this).modeSwitcher=new M.a(this.menu,this.options.modes,this.options.mode,(function(t){s.setMode(t),s.modeSwitcher.focus()}))),this.options.search&&(this.searchBox=new c(this,this.menu))),this.options.navigationBar&&(this.navBar=document.createElement("div"),this.navBar.className="jsoneditor-navigation-bar nav-bar-empty",this.frame.appendChild(this.navBar),this.treePath=new u(this.navBar,this.getPopupAnchor()),this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this)),this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this)))},_onUndo:function(){this.history&&(this.history.undo(),this._onChange())},_onRedo:function(){this.history&&(this.history.redo(),this._onChange())},_onEvent:function(t){if(!y.targetIsColorPicker(t.target)){var e,n=y.getNodeFromTarget(t.target);if("keydown"===t.type&&this._onKeyDown(t),n&&"focus"===t.type&&(this.focusTarget=t.target,this.options.autocomplete&&"focus"===this.options.autocomplete.trigger&&this._showAutoComplete(t.target)),"mousedown"===t.type&&this._startDragDistance(t),"mousemove"!==t.type&&"mouseup"!==t.type&&"click"!==t.type||this._updateDragDistance(t),n&&this.options&&this.options.navigationBar&&n&&("keydown"===t.type||"mousedown"===t.type)&&(e=this,setTimeout((function(){e._updateTreePath(n.getNodePath())}))),n&&n.selected){if("click"===t.type){if(t.target===n.dom.menu)return void this.showContextMenu(t.target);t.hasMoved||this.deselect()}"mousedown"===t.type&&y.onDragStart(this.multiselection.nodes,t)}else"mousedown"===t.type&&Object(a.hasParentNode)(t.target,this.content)&&(this.deselect(),n&&t.target===n.dom.drag?y.onDragStart(n,t):n&&(t.target===n.dom.field||t.target===n.dom.value||t.target===n.dom.select)||this._onMultiSelectStart(t));n&&n.onEvent(t)}},_updateTreePath:function(t){var e;function n(t){return t.parent?"array"===t.parent.type?t.index:t.field:t.field||t.type}t&&t.length?(Object(a.removeClassName)(this.navBar,"nav-bar-empty"),e=[],t.forEach((function(t){var i={name:n(t),node:t,children:[]};t.childs&&t.childs.length&&t.childs.forEach((function(t){i.children.push({name:n(t),node:t})})),e.push(i)})),this.treePath.setPath(e)):Object(a.addClassName)(this.navBar,"nav-bar-empty")},_onTreePathSectionSelected:function(t){t&&t.node&&(t.node.expandTo(),t.node.focus())},_onTreePathMenuItemSelected:function(t,e){var n;t&&t.children.length&&(n=t.children.find((function(t){return t.name===e})))&&n.node&&(this._updateTreePath(n.node.getNodePath()),n.node.expandTo(),n.node.focus())},_startDragDistance:function(t){this.dragDistanceEvent={initialTarget:t.target,initialPageX:t.pageX,initialPageY:t.pageY,dragDistance:0,hasMoved:!1}},_updateDragDistance:function(t){this.dragDistanceEvent||this._startDragDistance(t);var e=t.pageX-this.dragDistanceEvent.initialPageX,n=t.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(e*e+n*n),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||10<this.dragDistanceEvent.dragDistance,t.dragDistance=this.dragDistanceEvent.dragDistance,t.hasMoved=this.dragDistanceEvent.hasMoved,t.dragDistance},_onMultiSelectStart:function(t){var e,n=y.getNodeFromTarget(t.target);"tree"===this.options.mode&&void 0===this.options.onEditable&&(this.multiselection={start:n||null,end:null,nodes:[]},this._startDragDistance(t),(e=this).mousemove||(this.mousemove=Object(a.addEventListener)(window,"mousemove",(function(t){e._onMultiSelect(t)}))),this.mouseup||(this.mouseup=Object(a.addEventListener)(window,"mouseup",(function(t){e._onMultiSelectEnd(t)}))),t.preventDefault())},_onMultiSelect:function(t){var e,n,i,o;t.preventDefault(),this._updateDragDistance(t),t.hasMoved&&((e=y.getNodeFromTarget(t.target))&&(null==this.multiselection.start&&(this.multiselection.start=e),this.multiselection.end=e),this.deselect(),i=this.multiselection.end||this.multiselection.start,(n=this.multiselection.start)&&i&&(this.multiselection.nodes=this._findTopLevelNodes(n,i),this.multiselection.nodes&&this.multiselection.nodes.length&&(this.multiselection.direction=this.multiselection.start===(o=this.multiselection.nodes[0])||this.multiselection.start.isDescendantOf(o)?"down":"up"),this.select(this.multiselection.nodes)))},_onMultiSelectEnd:function(){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&(Object(a.removeEventListener)(window,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&(Object(a.removeEventListener)(window,"mouseup",this.mouseup),delete this.mouseup)},deselect:function(t){var e=!!this.multiselection.nodes.length;this.multiselection.nodes.forEach((function(t){t.setSelected(!1)})),this.multiselection.nodes=[],t&&(this.multiselection.start=null,this.multiselection.end=null),e&&this._selectionChangedHandler&&this._selectionChangedHandler()},select:function(t){if(!Array.isArray(t))return this.select([t]);var e,n;t&&(this.deselect(),this.multiselection.nodes=t.slice(0),e=t[0],t.forEach((function(t){t.expandPathToNode(),t.setSelected(!0,t===e)})),this._selectionChangedHandler&&(n=this.getSelection(),this._selectionChangedHandler(n.start,n.end)))},_findTopLevelNodes:function(t,e){for(var n=t.getNodePath(),i=e.getNodePath(),o=0;o<n.length&&n[o]===i[o];)o++;var r=n[o-1],a=n[o],s=i[o];if(a&&s||(r.parent?r=(s=a=r).parent:(a=r.childs[0],s=r.childs[r.childs.length-1])),r&&a&&s){var l=r.childs.indexOf(a),c=r.childs.indexOf(s),h=Math.min(l,c),u=Math.max(l,c);return r.childs.slice(h,u+1)}return[]},_showAutoComplete:function(t){var e=y.getNodeFromTarget(t),n="";0<=t.className.indexOf("jsoneditor-value")&&(n="value"),0<=t.className.indexOf("jsoneditor-field")&&(n="field");var i=this;setTimeout((function(){var o;e&&("focus"===i.options.autocomplete.trigger||0<t.innerText.length)&&null!==(o=i.options.autocomplete.getOptions(t.innerText,e.getPath(),n,e.editor))?"function"==typeof o.then?o.then((function(e){null===e?i.autocomplete.hideDropDown():e.options?i.autocomplete.show(t,e.startFrom,e.options):i.autocomplete.show(t,0,e)})).catch((function(t){console.error(t)})):o.options?i.autocomplete.show(t,o.startFrom,o.options):i.autocomplete.show(t,0,o):i.autocomplete.hideDropDown()}),50)},_onKeyDown:function(t){var e,n=t.which||t.keyCode,i=t.altKey,o=t.ctrlKey,r=t.metaKey,s=t.shiftKey,l=!1,c=this.focusTarget;9===n&&(e=this,setTimeout((function(){e.focusTarget!==c&&Object(a.selectContentEditable)(e.focusTarget)}),0)),this.searchBox&&(o&&70===n?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),l=!0):(114===n||o&&71===n)&&(s?this.searchBox.previous(!0):this.searchBox.next(!0),l=!0)),this.history&&(o&&!s&&90===n?(this._onUndo(),l=!0):o&&s&&90===n&&(this._onRedo(),l=!0)),this.options.autocomplete&&!l&&(o||i||r||1!==t.key.length&&8!==n&&46!==n||(l=!1,this._showAutoComplete(t.target))),l&&(t.preventDefault(),t.stopPropagation())},_createTable:function(){var t;this.options.navigationBar&&Object(a.addClassName)(this.contentOuter,"has-nav-bar"),this.scrollableContent=document.createElement("div"),this.scrollableContent.className="jsoneditor-tree",this.contentOuter.appendChild(this.scrollableContent),this.content=document.createElement("div"),this.content.className="jsoneditor-tree-inner",this.scrollableContent.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table),this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&((t=document.createElement("col")).width="24px",this.colgroupContent.appendChild(t)),(t=document.createElement("col")).width="24px",this.colgroupContent.appendChild(t),t=document.createElement("col"),this.colgroupContent.appendChild(t),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(this.contentOuter)},showContextMenu:function(t,e){var n,i=[],o=this.multiselection.nodes.slice();i.push({text:Object(l.c)("duplicateText"),title:Object(l.c)("duplicateTitle"),className:"jsoneditor-duplicate",click:function(){y.onDuplicate(o)}}),i.push({text:Object(l.c)("remove"),title:Object(l.c)("removeTitle"),className:"jsoneditor-remove",click:function(){y.onRemove(o)}}),this.options.onCreateMenu&&(n=o.map((function(t){return t.getPath()})),i=this.options.onCreateMenu(i,{type:"multiple",path:n[0],paths:n})),new h.a(i,{close:e}).show(t,this.getPopupAnchor())},getPopupAnchor:function(){return this.options.popupAnchor||this.frame},getSelection:function(){var t,e,n={start:null,end:null};return this.multiselection.nodes&&this.multiselection.nodes.length&&this.multiselection.nodes.length&&(t=this.multiselection.nodes[0],e=this.multiselection.nodes[this.multiselection.nodes.length-1],"down"===this.multiselection.direction?(n.start=t.serialize(),n.end=e.serialize()):(n.start=e.serialize(),n.end=t.serialize())),n},onSelectionChange:function(t){"function"==typeof t&&(this._selectionChangedHandler=Object(a.debounce)(t,this.DEBOUNCE_INTERVAL))},setSelection:function(t,e){t&&t.dom&&t.range&&(console.warn("setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options"),this.setDomSelection(t));var n=this._getNodeInstancesByRange(t,e);n.forEach((function(t){t.expandTo()})),this.select(n)},_getNodeInstancesByRange:function(t,e){var n,i;t&&t.path&&(n=this.node.findNodeByPath(t.path),e&&e.path&&(i=this.node.findNodeByPath(e.path)));var o=[];if(n instanceof y)if(i instanceof y&&i!==n)if(n.parent===i.parent){e=n.getIndex()<i.getIndex()?(t=n,i):(t=i,n);var r=t;for(o.push(r);r=r.nextSibling(),o.push(r),r&&r!==e;);}else o=this._findTopLevelNodes(n,i);else o.push(n);return o},getNodesByRange:function(t,e){var n=this._getNodeInstancesByRange(t,e),i=[];return n.forEach((function(t){i.push(t.serialize())})),i}},R=[{mode:"tree",mixin:T,data:"json"},{mode:"view",mixin:T,data:"json"},{mode:"form",mixin:T,data:"json"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"previewModeMixins",(function(){return f}));var i=n(1),o=n(8),r=n(15),a=n(5),s=n(6),l=n(21),c=n(2),h=n(9),u=n(0),d=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onChange=e,this.calculateItemSize=n||function(){return 1},this.limit=i,this.items=[],this.index=-1}var e;return(e=[{key:"add",value:function(t){for(;this._calculateHistorySize()>this.limit&&1<this.items.length;)this.items.shift(),this.index--;this.items=this.items.slice(0,this.index+1),this.items.push(t),this.index++,this.onChange()}},{key:"_calculateHistorySize",value:function(){var t=this.calculateItemSize,e=0;return this.items.forEach((function(n){e+=t(n)})),e}},{key:"undo",value:function(){if(this.canUndo())return this.index--,this.onChange(),this.items[this.index]}},{key:"redo",value:function(){if(this.canRedo())return this.index++,this.onChange(),this.items[this.index]}},{key:"canUndo",value:function(){return 0<this.index}},{key:"canRedo",value:function(){return this.index<this.items.length-1}},{key:"clear",value:function(){this.items=[],this.index=-1,this.onChange()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),p=n(4),g=l.textModeMixins[0].mixin,m={create:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};void 0===e.statusBar&&(e.statusBar=!0),e.mainMenuBar=!1!==e.mainMenuBar,e.enableSort=!1!==e.enableSort,e.enableTransform=!1!==e.enableTransform,e.createQuery=e.createQuery||p.a,e.executeQuery=e.executeQuery||p.b,this.indentation="number"==typeof(this.options=e).indentation?Number(e.indentation):2,Object(i.b)(this.options.languages),Object(i.a)(this.options.language),this.mode="preview";var n=this;this.container=t,this.dom={},this.json=void 0,this.text="",this._debouncedValidate=Object(u.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-preview",this.frame.onclick=function(t){t.preventDefault()};var a,s,l,g,m,f,v,b,y={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};this.frameFocusTracker=new h.a(y),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.dom.busy=document.createElement("div"),this.dom.busy.className="jsoneditor-busy",this.dom.busyContent=document.createElement("span"),this.dom.busyContent.textContent="busy...",this.dom.busy.appendChild(this.dom.busyContent),this.content.appendChild(this.dom.busy),this.dom.previewContent=document.createElement("pre"),this.dom.previewContent.className="jsoneditor-preview",this.dom.previewText=document.createTextNode(""),this.dom.previewContent.appendChild(this.dom.previewText),this.content.appendChild(this.dom.previewContent),this.options.mainMenuBar&&(Object(u.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(a=document.createElement("button")).type="button",a.className="jsoneditor-format",a.title=Object(i.c)("formatTitle"),this.menu.appendChild(a),a.onclick=function(){n.executeWithBusyMessage((function(){try{n.format()}catch(t){n._onError(t)}}),"formatting...")},(s=document.createElement("button")).type="button",s.className="jsoneditor-compact",s.title=Object(i.c)("compactTitle"),this.menu.appendChild(s),s.onclick=function(){n.executeWithBusyMessage((function(){try{n.compact()}catch(t){n._onError(t)}}),"compacting...")},this.options.enableSort&&((l=document.createElement("button")).type="button",l.className="jsoneditor-sort",l.title=Object(i.c)("sortTitleShort"),l.onclick=function(){n._showSortModal()},this.menu.appendChild(l)),this.options.enableTransform&&((g=document.createElement("button")).type="button",g.title=Object(i.c)("transformTitleShort"),g.className="jsoneditor-transform",g.onclick=function(){n._showTransformModal()},this.dom.transform=g,this.menu.appendChild(g)),(m=document.createElement("button")).type="button",m.className="jsoneditor-repair",m.title=Object(i.c)("repairTitle"),this.menu.appendChild(m),!(m.onclick=function(){void 0===n.json&&n.executeWithBusyMessage((function(){try{n.repair()}catch(t){n._onError(t)}}),"repairing...")})!==this.options.history&&(this.history=new d((function(){n.dom.undo.disabled=!n.history.canUndo(),n.dom.redo.disabled=!n.history.canRedo()}),(function(t){return 2*t.text.length}),c.c),(f=document.createElement("button")).type="button",f.className="jsoneditor-undo jsoneditor-separator",f.title=Object(i.c)("undo"),f.onclick=function(){var t=n.history.undo();t&&n._applyHistory(t)},this.menu.appendChild(f),this.dom.undo=f,(v=document.createElement("button")).type="button",v.className="jsoneditor-redo",v.title=Object(i.c)("redo"),v.onclick=function(){var t=n.history.redo();t&&n._applyHistory(t)},this.menu.appendChild(v),this.dom.redo=v,this.history.onChange()),this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new o.a(this.menu,this.options.modes,this.options.mode,(function(t){n.setMode(t),n.modeSwitcher.focus()})))),this.errorTable=new r.a({errorTableVisible:!0,onToggleVisibility:function(){n.validate()},onFocusLine:null,onChangeHeight:function(t){var e=t+(n.dom.statusBar?n.dom.statusBar.clientHeight:0)+1;n.content.style.marginBottom=-e+"px",n.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.content),this.frame.appendChild(this.errorTable.getErrorTable()),this.container.appendChild(this.frame),e.statusBar&&(Object(u.addClassName)(this.content,"has-status-bar"),b=document.createElement("div"),(this.dom.statusBar=b).className="jsoneditor-statusbar",this.frame.appendChild(b),this.dom.fileSizeInfo=document.createElement("span"),this.dom.fileSizeInfo.className="jsoneditor-size-info",this.dom.fileSizeInfo.innerText="",b.appendChild(this.dom.fileSizeInfo),this.dom.arrayInfo=document.createElement("span"),this.dom.arrayInfo.className="jsoneditor-size-info",this.dom.arrayInfo.innerText="",b.appendChild(this.dom.arrayInfo),b.appendChild(this.errorTable.getErrorCounter()),b.appendChild(this.errorTable.getWarningIcon()),b.appendChild(this.errorTable.getErrorIcon())),this._renderPreview(),this.setSchema(this.options.schema,this.options.schemaRefs)},_renderPreview:function(){var t=this.getText();this.dom.previewText.nodeValue=Object(u.limitCharacters)(t,c.b),this.dom.fileSizeInfo&&(this.dom.fileSizeInfo.innerText="Size: "+Object(u.formatSize)(t.length)),this.dom.arrayInfo&&(this.dom.arrayInfo.innerText=Array.isArray(this.json)?"Array: "+this.json.length+" items":"")},_onChange:function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(t){console.error("Error in onChangeJSON callback: ",t)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(t){console.error("Error in onChangeText callback: ",t)}},_showSortModal:function(){var t=this;this.executeWithBusyMessage((function(){var e=t.options.modalAnchor||c.a,n=t.get();t._renderPreview(),Object(a.showSortModal)(e,n,(function(e){t.executeWithBusyMessage((function(){var i,o,r,a;i=n,o=e,Array.isArray(i)&&(r=Object(u.sort)(i,o.path,o.direction),t.sortedBy=o,t._setAndFireOnChange(r)),Object(u.isObject)(i)&&(a=Object(u.sortObjectKeys)(i,o.direction),t.sortedBy=o,t._setAndFireOnChange(a))}),"sorting...")}),t.sortedBy)}),"parsing...")},_showTransformModal:function(){var t=this;this.executeWithBusyMessage((function(){var e=t.options,n=e.createQuery,i=e.executeQuery,o=e.modalAnchor,r=e.queryDescription,a=t.get();t._renderPreview(),Object(s.showTransformModal)({anchor:o||c.a,json:a,queryDescription:r,createQuery:n,executeQuery:i,onTransform:function(e){t.executeWithBusyMessage((function(){var n=i(a,e);t._setAndFireOnChange(n)}),"transforming...")}})}),"parsing...")},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this._debouncedValidate=null,this.history&&(this.history.clear(),this.history=null),this.frameFocusTracker.destroy()},compact:function(){var t=this.get(),e=JSON.stringify(t);this._setTextAndFireOnChange(e,t)},format:function(){var t=this.get(),e=JSON.stringify(t,null,this.indentation);this._setTextAndFireOnChange(e,t)},repair:function(){var t=this.getText(),e=Object(u.repair)(t);this._setTextAndFireOnChange(e)},focus:function(){this.dom.transform.focus()},set:function(t){this.history&&this.history.clear(),this._set(t)},update:function(t){this._set(t)},_set:function(t){this.text=void 0,this.json=t,this._renderPreview(),this._pushHistory(),this._debouncedValidate()},_setAndFireOnChange:function(t){this._set(t),this._onChange()},get:function(){var t;return void 0===this.json&&(t=this.getText(),this.json=Object(u.parse)(t)),this.json},getText:function(){return void 0===this.text&&(this.text=JSON.stringify(this.json,null,this.indentation),!0===this.options.escapeUnicode&&(this.text=Object(u.escapeUnicodeChars)(this.text))),this.text},setText:function(t){this.history&&this.history.clear(),this._setText(t)},updateText:function(t){this.getText()!==t&&this._setText(t)},_setText:function(t,e){var n;this.text=!0===this.options.escapeUnicode?Object(u.escapeUnicodeChars)(t):t,this.json=e,this._renderPreview(),void 0===this.json?(n=this).executeWithBusyMessage((function(){try{n.json=n.get(),n._renderPreview(),n._pushHistory()}catch(t){}}),"parsing..."):this._pushHistory(),this._debouncedValidate()},_setTextAndFireOnChange:function(t,e){this._setText(t,e),this._onChange()},_applyHistory:function(t){this.json=t.json,this.text=t.text,this._renderPreview(),this._debouncedValidate()},_pushHistory:function(){this.history&&this.history.add({text:this.text,json:this.json})},executeWithBusyMessage:function(t,e){var n;this.getText().length>c.d?(n=this,Object(u.addClassName)(n.frame,"busy"),n.dom.busyContent.innerText=e,setTimeout((function(){t(),Object(u.removeClassName)(n.frame,"busy"),n.dom.busyContent.innerText=""}),100)):t()}};m.validate=g.validate,m._renderErrors=g._renderErrors;var f=[{mode:"preview",mixin:m,data:"json"}]}],t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,(function(t){return e[t]}).bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=36);function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e,n}()},ZgVZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("UsXk"),o=function(){function t(){}return t.prototype.deserialize=function(e){return e.data&&e.data.map((function(e){return(new t).deserialize(e)})),Object.assign(this,e),this.imgFiles=this.imgFiles?e.imgFiles.map((function(t){return(new i.a).deserialize(t)})):[],this.otherFiles=this.otherFiles?e.otherFiles.map((function(t){return(new i.a).deserialize(t)})):[],this.files=this.files?e.files.map((function(t){return(new i.a).deserialize(t)})):[],this},t}()},afKu:function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n("CH9F"),e.sha1=n("fnjI"),e.sha224=n("cqoG"),e.sha256=n("olUY"),e.sha384=n("uDfV"),e.sha512=n("T9HO")},aqBw:function(t,e,n){(function(t){var i;!function(o){"object"==typeof global&&global;var r=function(t){this.message=t};(r.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new r(t)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,c={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,i,o,r=t.length%3,l="",c=-1,h=t.length-r;++c<h;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,i=t.charCodeAt(++c),l+=s.charAt((o=e+n+i)>>18&63)+s.charAt(o>>12&63)+s.charAt(o>>6&63)+s.charAt(63&o);return 2==r?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),l+=s.charAt((o=e+n)>>10)+s.charAt(o>>4&63)+s.charAt(o<<2&63)+"="):1==r&&(o=t.charCodeAt(c),l+=s.charAt(o>>2)+s.charAt(o<<4&63)+"=="),l},decode:function(t){var e=(t=String(t).replace(l,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,o=0,r="",c=-1;++c<e;)i=s.indexOf(t.charAt(c)),n=o%4?64*n+i:i,o++%4&&(r+=String.fromCharCode(255&n>>(-2*o&6)));return r},version:"0.1.0"};void 0===(i=(function(){return c}).call(e,n,e,t))||(t.exports=i)}()}).call(this,n("d3kn")(t))},baNz:function(t,e,n){"use strict";t.exports=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})}},cRm7:function(t,e,n){"use strict";var i=n("AxvH");function o(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(n){this.body=e.body}this.links=i(this.headers.link)}o.prototype.hasNextPage=function(){return!!this.links.next},o.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=o},cqoG:function(t,e,n){var i=n("P7XM"),o=n("olUY"),r=n("tnIz"),a=n("hwdV").Buffer,s=new Array(64);function l(){this.init(),this._w=s,r.call(this,64,56)}i(l,o),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=l},cryX:function(t,e,n){"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e}},d0rS:function(t,e,n){"use strict";function i(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function o(t,e,n){if(!1===n||null===n)return t;var o=/\?/.test(t)?"&":"?",r=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(r+="="+i(n)),""+t+o+r}t.exports={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&(Array.isArray(i)&&(i=i.filter((function(t){return!!t})).join(",")),n=o(n,t,i))})),n},appendQueryParam:o,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,n){var o=e[n];if(void 0===o)throw new Error("Unspecified route parameter "+n);return"/"+i(o)})):t}}},eFQn:function(t,e,n){"use strict";var i=n("Smn/");t.exports=function(t){return i(t,(function(t,e){return"boolean"==typeof e?JSON.stringify(e):e}))}},fnjI:function(t,e,n){var i=n("P7XM"),o=n("tnIz"),r=n("hwdV").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function u(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(l,o),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,o=0|this._b,r=0|this._c,s=0|this._d,l=0|this._e,d=0;d<16;++d)n[d]=t.readInt32BE(4*d);for(;d<80;++d)n[d]=(e=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|e>>>31;for(var p=0;p<80;++p){var g=~~(p/20),m=c(i)+u(g,o,r,s)+l+n[p]+a[g]|0;l=s,s=r,r=h(o),o=i,i=m}this._a=i+this._a|0,this._b=o+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},hwdV:function(t,e,n){var i=n("tjlA"),o=i.Buffer;function r(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=i:(r(i,e),e.Buffer=a),a.prototype=Object.create(o.prototype),r(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=o(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},iFvi:function(t,e,n){"use strict";var i,o=n("Bi8L"),r=n("9/5/"),a=n("U6jy"),s=n("+qE3").EventEmitter,l=n("SsYf"),c=n("0KjW"),h=n("LFDd"),u=n("WpKc");function d(t){this._eventEmitter=new s,this.options=a({},this.options,t),this.inputString="",this.fresh=!0}d.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,trackProximity:!1,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com"},onAdd:function(t){this._map=t,i=h(c({accessToken:this.options.accessToken,origin:this.options.origin})),this.eventManager=new u(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this),this._updateProximity=this._updateProximity.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var r=document.createElement("div");return r.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",r.appendChild(this._clearEl),r.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(r),this._typeahead=new o(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(t){return t.place_name},this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),e},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map.off("moveend",this._updateProximity),this._map=null,this},_onKeyDown:r((function(t){var e=t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!e.value)return this.fresh=!0,this._clear(t),this._clearEl.style.display="none";t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||e.value.length>=this.options.minLength&&this._geocode(e.value)}),200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var t=this._typeahead.selected;if(t){if(this.options.flyTo)if(!l[t.id]&&t.bbox){var e=t.bbox;this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]])}else l[t.id]?this._map.fitBounds(l[t.id].bbox):this._map.flyTo({center:t.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this)}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var e,n=this,o=["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((function(t,e){return n.options[e]&&(t[e]=["countries","types","language"].indexOf(e)>-1?n.options[e].split(/[\s,]+/):n.options[e],"proximity"===e&&n.options[e]&&n.options[e].longitude&&n.options[e].latitude&&(t[e]=[n.options[e].longitude,n.options[e].latitude])),t}),{});if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var r=t.split(/[\s(,)?]+/).map((function(t){return parseFloat(t,10)})).reverse();o=a(o,{query:r,limit:1}),e=i.reverseGeocode(o).send()}else o=a(o,{query:t}),e=i.forwardGeocode(o).send();var s=[];return this.options.localGeocoder&&((s=this.options.localGeocoder(t))||(s=[])),e.then((function(t){this._loadingEl.style.display="none";var e={};"200"==t.statusCode&&(e=t.body),e.features=e.features?s.concat(e.features):s,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),e.config=o,this.fresh&&(this.eventManager.start(this),this.fresh=!1),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)}).bind(this)),e.catch((function(t){this._loadingEl.style.display="none",s.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:s}),this._typeahead.update(s),this._eventEmitter.emit("error",{error:t})}).bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear"),this.fresh=!0},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},query:function(t){return this._geocode(t).then(this._onQueryResult),this},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},t.exports=d},jLWS:function(t,e,n){"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},"kVK+":function(t,e){e.read=function(t,e,n,i,o){var r,a,s=8*o-i-1,l=(1<<s)-1,c=l>>1,h=-7,u=n?o-1:0,d=n?-1:1,p=t[e+u];for(u+=d,r=p&(1<<-h)-1,p>>=-h,h+=s;h>0;r=256*r+t[e+u],u+=d,h-=8);for(a=r&(1<<-h)-1,r>>=-h,h+=i;h>0;a=256*a+t[e+u],u+=d,h-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),r-=c}return(p?-1:1)*a*Math.pow(2,r-i)},e.write=function(t,e,n,i,o,r){var a,s,l,c=8*r-o-1,h=(1<<c)-1,u=h>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,g=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=h?(s=0,a=h):a+u>=1?(s=(e*l-1)*Math.pow(2,o),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=g,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+p]=255&a,p+=g,a/=256,c-=8);t[n+p-g]|=128*m}},mvqV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("mrSG"),o=n("w8jS"),r=n("ZgVZ"),a=n("vkgz"),s=n("JIr8"),l=n("lJxs"),c=n("g+oh"),h=n("fXoL"),u=n("aceb"),d=function(t){return"stations/"+t},p=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i}return Object(i.c)(e,t),e.prototype.addStation=function(t){var e=this;return this._http.postFormData("stations",t,{reportProgress:!0,observe:"events"}).pipe(Object(a.a)((function(t){return e.log("create station ")})))},e.prototype.deleteStation=function(t){var e=this,n="number"==typeof t?t:t.id,i=d(n);return this._http.delete(i).pipe(Object(a.a)((function(t){return e.log("deleted station id="+n)})),Object(s.a)(this.handleError("deleteStation")))},e.prototype.getAll=function(){var t=this;return this._http.get("stations").pipe(Object(a.a)((function(e){return t.log("Fetched Stations")})),Object(s.a)(this.handleError("getAll",[])),Object(l.a)((function(t){return t.map((function(t){return(new r.a).deserialize(t)}))})))},e.prototype.getRows=function(){var t=this;return this._http.get("stations/rows").pipe(Object(a.a)((function(e){return t.log("Fetched Stations")})),Object(s.a)(this.handleError("getAllRows",[])),Object(l.a)((function(t){return t.map((function(t){return(new r.a).deserialize(t)}))})))},e.prototype.getFilesByColumns=function(){var t=this;return this._http.get("stations").pipe(Object(a.a)((function(e){return t.log("Fetched Stations")})),Object(s.a)(this.handleError("getAll",[])),Object(l.a)((function(t){return t.map((function(t){return(new r.a).deserialize(t)}))})))},e.prototype.updateStation=function(t){var e=this;return this._http.put(d(t.id),t).pipe(Object(a.a)((function(n){return e.log("updated station id="+t.id)})),Object(s.a)(this.handleError("updateStations")))},e.prototype.uploadFiles=function(t){var e=this;return this._http.postFormData("stations/files",t,{reportProgress:!0,observe:"events"}).pipe(Object(a.a)((function(t){return e.log("files uploaded station ")})),Object(s.a)(this.handleError("uploadFiles",t)))},e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275inject"](o.a),h["\u0275\u0275inject"](u.Ib))},e.\u0275prov=h["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(c.a)},ncV3:function(t,e,n){"use strict";var i=n("YI60"),o=n("2+Hy"),r=n("jLWS");function a(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");i(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||r.API_ORIGIN}a.prototype.createRequest=function(t){return new o(this,t)},t.exports=a},oGbY:function(t,e,n){"use strict";var i=n("cRm7"),o=n("73jG"),r=n("jLWS"),a=n("cryX"),s={};function l(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function c(t,e){return new Promise((function(n,i){e.onprogress=function(e){t.emitter.emit(r.EVENT_PROGRESS_DOWNLOAD,l(e))};var a=t.file;a&&(e.upload.onprogress=function(e){t.emitter.emit(r.EVENT_PROGRESS_UPLOAD,l(e))}),e.onerror=function(t){i(t)},e.onabort=function(){var e=new o({request:t,type:r.ERROR_REQUEST_ABORTED});i(e)},e.onload=function(){if(delete s[t.id],e.status<200||e.status>=400){var r=new o({request:t,body:e.response,statusCode:e.status});i(r)}else n(e)};var c=t.body;"string"==typeof c?e.send(c):c?e.send(JSON.stringify(c)):a?e.send(a):e.send(),s[t.id]=e})).then((function(e){return function(t,e){return new i(t,{body:e.response,headers:a(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function h(t,e){var n=t.url(e),i=new window.XMLHttpRequest;return i.open(t.method,n),Object.keys(t.headers).forEach((function(e){i.setRequestHeader(e,t.headers[e])})),i}t.exports={browserAbort:function(t){var e=s[t.id];e&&(e.abort(),delete s[t.id])},sendRequestXhr:c,browserSend:function(t){return Promise.resolve().then((function(){var e=h(t,t.client.accessToken);return c(t,e)}))},createRequestXhr:h}},olUY:function(t,e,n){var i=n("P7XM"),o=n("tnIz"),r=n("hwdV").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(t,e,n){return n^t&(e^n)}function h(t,e,n){return t&e|n&(t|e)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}i(l,o),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,o=0|this._b,r=0|this._c,s=0|this._d,l=0|this._e,g=0|this._f,m=0|this._g,f=0|this._h,v=0;v<16;++v)n[v]=t.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((e=n[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[v-7]+p(n[v-15])+n[v-16];for(var b=0;b<64;++b){var y=f+d(l)+c(l,g,m)+a[b]+n[b]|0,_=u(i)+h(i,o,r)|0;f=m,m=g,g=l,l=s+y|0,s=r,r=o,o=i,i=y+_|0}this._a=i+this._a|0,this._b=o+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0,this._f=g+this._f|0,this._g=m+this._g|0,this._h=f+this._h|0},l.prototype._hash=function(){var t=r.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=l},"pit/":function(t,e,n){"use strict";var i=n("NkL+"),o=n("U6jy"),r={};function a(t){var e=Array.isArray(t);return function(n){var i=s(r.plainArray,n);if(i)return i;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var o=0;o<n.length;o++)if(i=s(e?t[o]:t,n[o]))return[o].concat(i)}}function s(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function l(t,e){var n=t.length,i=t[n-1],r=t.slice(0,n-1);return 0===r.length&&(r=["value"]),e=o(e,{path:r}),"function"==typeof i?i(e):h(e,function(t){return"must be "+(/^an? /.test(e=t)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e)+".";var e}(i))}function c(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function h(t,e){return(u(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function u(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}r.assert=function(t,e){return e=e||{},function(n){var i=s(t,n);if(i){var o=l(i,e);throw e.apiName&&(o=e.apiName+": "+o),new Error(o)}}},r.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,i=s(r.plainObject,t);if(i)return i;for(var o=[],a=0;a<n.length;a++)(i=s(n[a].value,t[e=n[a].key]))&&o.push([e].concat(i));return o.length<2?o[0]:function(t){o=o.map((function(e){return"- "+e[0]+": "+l(e,t).split("\n").join("\n  ")}));var e=t.path.join(".");return"The following properties"+("value"===e?"":" of "+e)+" have invalid values:\n  "+o.join("\n  ")}}},r.strictShape=function(t){var e=r.shape(t);return function(n){var i=e(n);if(i)return i;var o=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==o.length?function(){return"The following keys are invalid: "+o.join(", ")}:void 0}},r.arrayOf=function(t){return a(t)},r.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return a(t)},r.required=function(t){function e(e){return null==e?function(t){return h(t,u(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},r.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return s(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?c(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},r.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},r.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return r.equal(t)}));return r.oneOfType.apply(this,e)},r.range=function(t){var e=t[0],n=t[1];return function(t){if(s(r.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},r.any=function(){},r.boolean=function(t){if("boolean"!=typeof t)return"boolean"},r.number=function(t){if("number"!=typeof t)return"number"},r.plainArray=function(t){if(!Array.isArray(t))return"array"},r.plainObject=function(t){if(!i(t))return"object"},r.string=function(t){if("string"!=typeof t)return"string"},r.func=function(t){if("function"!=typeof t)return"function"},r.validate=s,r.processMessage=l,t.exports=r},tjlA:function(t,e,n){"use strict";var i=n("H7XF"),o=n("kVK+"),r=n("49sm");function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(e,n),o=(t=s(t,i)).write(e,n);return o!==i&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):d(t,e);if("Buffer"===e.type&&r(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(h(e),t=s(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(i)return F(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function f(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,i,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,i,o){var r,a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var h=-1;for(r=n;r<s;r++)if(c(t,r)===c(e,-1===h?0:r-h)){if(-1===h&&(h=r),r-h+1===l)return h*a}else-1!==h&&(r-=r-h),h=-1}else for(n+l>s&&(n=s-l),r=n;r>=0;r--){for(var u=!0,d=0;d<l;d++)if(c(t,r+d)!==c(e,d)){u=!1;break}if(u)return r}return-1}function y(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i))>o&&(i=o):i=o;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,i){return N(F(e,t.length-n),t,n,i)}function C(t,e,n,i){return N(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return C(t,e,n,i)}function w(t,e,n,i){return N(V(e),t,n,i)}function I(t,e,n,i){return N(function(t,e){for(var n,i,o=[],r=0;r<t.length&&!((e-=2)<0);++r)i=(n=t.charCodeAt(r))>>8,o.push(n%256),o.push(i);return o}(e,t.length-n),t,n,i)}function A(t,e,n){return i.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var i=[],o=e;o<n;){var r,a,s,l,c=t[o],h=null,u=c>239?4:c>223?3:c>191?2:1;if(o+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(r=t[o+1]))&&(l=(31&c)<<6|63&r)>127&&(h=l);break;case 3:a=t[o+2],128==(192&(r=t[o+1]))&&128==(192&a)&&(l=(15&c)<<12|(63&r)<<6|63&a)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=t[o+2],s=t[o+3],128==(192&(r=t[o+1]))&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(i.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),i.push(h),o+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}function M(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}function k(t,e,n){var i,o=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>o)&&(n=o);for(var r="",a=e;a<n;++a)r+=(i=t[a])<16?"0"+i.toString(16):i.toString(16);return r}function S(t,e,n){for(var i=t.slice(e,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function E(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,i,o,r){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<r)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function R(t,e,n,i){e<0&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-n,2);o<r;++o)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function L(t,e,n,i){e<0&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-n,4);o<r;++o)t[n+o]=e>>>8*(i?o:3-o)&255}function z(t,e,n,i,o,r){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,i,r){return r||z(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function j(t,e,n,i,r){return r||z(t,0,n,8),o.write(t,e,n,i,52,8),n+8}e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return h(e),e<=0?s(null,e):void 0!==n?"string"==typeof i?s(null,e).fill(n,i):s(null,e).fill(n):s(null,e)}(0,t,e,n)},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var r=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(r,a),c=this.slice(i,o),h=t.slice(e,n),u=0;u<s;++u)if(c[u]!==h[u]){r=c[u],a=h[u];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var r=0;r<o;++r)n[r]=this[r+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i},l.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||E(t,e,this.length);for(var i=e,o=1,r=this[t+--i];i>0&&(o*=256);)r+=this[t+--i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,r=0;for(this[e]=255&t;++r<n&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);T(this,t,e,n,o-1,-o)}var r=0,a=1,s=0;for(this[e]=255&t;++r<n&&(a*=256);)t<0&&0===s&&0!==this[e+r-1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);T(this,t,e,n,o-1,-o)}var r=n-1,a=1,s=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===s&&0!==this[e+r+1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o,r=i-n;if(this===t&&n<e&&e<i)for(o=r-1;o>=0;--o)t[o+e]=this[o+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+r),e);return r},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{var a=l.isBuffer(t)?t:F(new l(t,i).toString()),s=a.length;for(r=0;r<n-e;++r)this[r+e]=a[r%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function F(t,e){var n;e=e||1/0;for(var i=t.length,o=null,r=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;r.push(n)}else if(n<2048){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function V(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,i){for(var o=0;o<i&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}},tnIz:function(t,e,n){var i=n("hwdV").Buffer;function o(t,e){this._block=i.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}o.prototype.update=function(t,e){"string"==typeof t&&(t=i.from(t,e=e||"utf8"));for(var n=this._block,o=this._blockSize,r=t.length,a=this._len,s=0;s<r;){for(var l=a%o,c=Math.min(r-s,o-l),h=0;h<c;h++)n[l+h]=t[s+h];s+=c,(a+=c)%o==0&&this._update(n)}return this._len+=r,this},o.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0;this._block.writeUInt32BE((n-i)/4294967296,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o},uDfV:function(t,e,n){var i=n("P7XM"),o=n("T9HO"),r=n("tnIz"),a=n("hwdV").Buffer,s=new Array(160);function l(){this.init(),this._w=s,r.call(this,128,112)}i(l,o),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=l},uhBA:function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,o="~";function r(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||t,r),l=o?o+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=this._events[o?o+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,i=e.length,r=new Array(i);n<i;n++)r[n]=e[n].fn;return r},c.prototype.listenerCount=function(t){var e=this._events[o?o+t:t];return e?e.fn?1:e.length:0},c.prototype.emit=function(t,e,n,i,r,a){var s=o?o+t:t;if(!this._events[s])return!1;var l,c,h=this._events[s],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,r),!0;case 6:return h.fn.call(h.context,e,n,i,r,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,i){var r=o?o+t:t;if(!this._events[r])return this;if(!e)return l(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||l(this,r);else{for(var s=0,c=[],h=a.length;s<h;s++)(a[s].fn!==e||i&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[r]=1===c.length?c[0]:c:l(this,r)}return this},c.prototype.removeAllListeners=function(t){var e;return t?this._events[e=o?o+t:t]&&l(this,e):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c}}]);