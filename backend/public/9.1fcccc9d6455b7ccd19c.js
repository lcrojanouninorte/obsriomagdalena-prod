(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+qE3":function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,r),i(n)},t.once("error",o)),t.once(e,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,o,a;if(l(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=u(t))>0&&a.length>r&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=d.bind(i);return r.listener=n,i.wrapFn=r,r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=r[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var l=c.length,u=m(c,l);for(n=0;n<l;++n)o(u[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,i,r,o,a;if(l(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},"0KjW":function(t,e,n){"use strict";var i=n("KXza");t.exports=i},"2+Hy":function(t,e,n){"use strict";var i=n("YI60"),r=n("U6jy"),o=n("uhBA"),a=n("d0rS"),s=n("jLWS"),c=1;function l(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var i=r(n,e.headers),a=Object.keys(i).reduce((function(t,e){return t[e.toLowerCase()]=i[e],t}),{});this.id=c++,this._options=e,this.emitter=new o,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.headers=a}l.prototype.url=function(t){var e=a.prependOrigin(this.path,this.origin);e=a.appendQueryObject(e,this.query);var n=this.params;if(t){e=a.appendQueryParam(e,"access_token",t);var o=i(t).user;n=r({ownerId:o},n)}return a.interpolateRouteParams(e,n)},l.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(s.EVENT_RESPONSE,e),e}),(function(e){throw t.error=e,t.emitter.emit(s.EVENT_ERROR,e),e}))},l.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},l.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,r(t))}))}function i(e){t(e,null,(function(){}))}function r(t){t.send().then(n,i)}r(this)},l.prototype.clone=function(){return this._extend()},l.prototype._extend=function(t){var e=r(this._options,t);return new l(this.client,e)},t.exports=l},"3PWe":function(t,e,n){t.exports=n("vjb2")},"49sm":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=r(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=i;function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function c(t,e,i,r){var o=new n(t,e,i,r);return function(t){return o.solve(t)}}var l=c(.25,.1,.25,1);function u(t,e,n){return Math.min(n,Math.max(e,t))}function h(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function d(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}var p=1;function f(){return p++}function g(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function v(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function b(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i}function _(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function C(t){return Array.isArray(t)?t.map(C):"object"==typeof t&&t?b(t,C):t}var x={};function w(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function I(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function A(t){for(var e=0,n=0,i=t.length,r=i-1,o=void 0,a=void 0;n<i;r=n++)e+=((a=t[r]).x-(o=t[n]).x)*(o.y+a.y);return e}function P(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function O(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,i,r){var o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var M=null;function S(t){if(null==M){var e=t.navigator?t.navigator.userAgent:null;M=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return M}function k(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var E,L,T,R,N=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),B=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,j=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,D={now:N,frame:function(t){var e=B(t);return{cancel:function(){return j(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=a.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return E||(E=a.document.createElement("a")),E.href=t,E.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==L&&(L=a.matchMedia("(prefers-reduced-motion: reduce)")),L.matches)}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(t){!V&&R&&(G?Z(t):T=t)}},V=!1,G=!1;function Z(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;z.supported=!0}catch(t){}t.deleteTexture(e),V=!0}a.document&&((R=a.document.createElement("img")).onload=function(){T&&Z(T),T=null,G=!0},R.onerror=function(){V=!0,T=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var W="01",H=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function U(t){return 0===t.indexOf("mapbox:")}H.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",W,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},H.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},H.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},H.prototype.normalizeStyleURL=function(t,e){if(!U(t))return t;var n=Y(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeGlyphsURL=function(t,e){if(!U(t))return t;var n=Y(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSourceURL=function(t,e){if(!U(t))return t;var n=Y(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSpriteURL=function(t,e,n,i){var r=Y(t);return U(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+n,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=""+e+n,q(r))},H.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!U(t))return t;var n=Y(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(D.devicePixelRatio>=2||512===e?"@2x":"")+(z.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var i=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(n.params)||F.ACCESS_TOKEN;return F.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,i)},H.prototype.canonicalizeTileURL=function(t,e){var n=Y(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=n.path.replace("/v4/","");var r=n.params;return e&&(r=r.filter((function(t){return!t.match(/^access_token=/)}))),r.length&&(i+="?"+r.join("&")),i},H.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&U(e),i=[],r=0,o=t.tiles||[];r<o.length;r+=1){var a=o[r];K(a)?i.push(this.canonicalizeTileURL(a,n)):i.push(a)}return i},H.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Y(F.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!F.REQUIRE_ACCESS_TOKEN)return q(t);if(!(e=e||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),q(t)};var $=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function K(t){return $.test(t)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(t){var e=t.match(X);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function q(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function J(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,n=J(F.ACCESS_TOKEN);return e=n&&n.u?a.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):F.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var i=a.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var r=a.localStorage.getItem(n);r&&(this.anonId=r)}catch(t){w("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(t){},Q.prototype.postEvent=function(t,e,n,i){var r=this;if(F.EVENTS_URL){var o=Y(F.EVENTS_URL);o.params.push("access_token="+(i||F.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:W,userId:this.anonId},s=e?d(a,e):a,c={url:q(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Ct(c,(function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests(i)}))}},Q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,nt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,i){this.skuToken=n,(F.EVENTS_URL&&i||F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return U(t)||K(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=g()),this.postEvent(r,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Q),it=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return U(t)||K(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=J(F.ACCESS_TOKEN),i=n?n.u:F.ACCESS_TOKEN,r=i!==this.eventData.tokenU;m(this.anonId)||(this.anonId=g(),r=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),c=(o-this.eventData.lastSuccess)/864e5;r=r||c>=1||c<-1||a.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=i)}),t)}},e}(Q)),rt=it.postTurnstileEvent.bind(it),ot=new nt,at=ot.postMapLoadEvent.bind(ot),st=500,ct=50;function lt(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function ut(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ht,dt=1/0;function pt(){return null==ht&&(ht=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ht}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var gt,mt,vt=function(t){function e(e,n,i){401===n&&K(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=P()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},bt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,i=new a.AbortController,r=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:i.signal}),o=!1,s=!1,c=(n=r.url).indexOf("sku=")>0&&K(n);"json"===t.type&&r.headers.set("Accept","application/json");var l=function(n,i,o){if(!s){if(n&&"SecurityError"!==n.message&&w(n),i&&o)return u(i);var l=Date.now();a.fetch(r).then((function(n){if(n.ok){var i=c?n.clone():null;return u(n,i,l)}return e(new vt(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},u=function(n,i,c){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){s||(i&&c&&function(t,e,n){if(lt(),tt){var i={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var r=O(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var n=new a.Response(e,i);lt(),tt&&tt.then((function(e){return e.put(ut(t.url),n)})).catch((function(t){return w(t.message)}))})))}}(r,i,c),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return c?function(t,e){if(lt(),!tt)return e(null);var n=ut(t.url);tt.then((function(t){t.match(n).then((function(i){var r=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=O(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(r,l):l(null,null),{cancel:function(){s=!0,o||i.abort()}}}(t,e);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new a.XMLHttpRequest;for(var i in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new vt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},_t=function(t,e){return bt(d(t,{type:"arrayBuffer"}),e)},Ct=function(t,e){return bt(d(t,{method:"POST"}),e)};function xt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function wt(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}gt=[],mt=0;var It=function(t,e){void 0===e&&(e={}),d(this,e),this.type=t},At=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",d({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(It),Pt=function(){};Pt.prototype.on=function(t,e){return this._listeners=this._listeners||{},xt(t,e,this._listeners),this},Pt.prototype.off=function(t,e){return wt(t,e,this._listeners),wt(t,e,this._oneTimeListeners),this},Pt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},xt(t,e,this._oneTimeListeners),this},Pt.prototype.fire=function(t,e){"string"==typeof t&&(t=new It(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var i=0,r=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];i<r.length;i+=1)r[i].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];wt(n,s,this._oneTimeListeners),s.call(this,t)}var c=this._eventedParent;c&&(d(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(t))}else t instanceof At&&console.error(t.error);return this},Pt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Pt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Ot={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Mt=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function St(t){var e=t.value;return e?[new Mt(t.key,e,"constants have been deprecated as of v8")]:[]}function kt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}function Et(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Lt(t){if(Array.isArray(t))return t.map(Lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Lt(t[n]);return e}return Et(t)}var Tt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.bindings[r[0]]=r[1]}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Nt={kind:"null"},Bt={kind:"number"},jt={kind:"string"},Dt={kind:"boolean"},Ft={kind:"color"},zt={kind:"object"},Vt={kind:"value"},Gt={kind:"collator"},Zt={kind:"formatted"},Wt={kind:"resolvedImage"};function Ht(t,e){return{kind:"array",itemType:t,N:e}}function Ut(t){if("array"===t.kind){var e=Ut(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var $t=[Nt,Bt,jt,Dt,Ft,Zt,zt,Ht(Vt),Wt];function Kt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Kt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=$t;n<i.length;n+=1)if(!Kt(i[n],e))return null}return"Expected "+Ut(t)+" but found "+Ut(e)+" instead."}function Xt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Yt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var qt=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var c=s.indexOf("("),l=s.indexOf(")");if(-1!==c&&l+1===s.length){var u=s.substr(0,c),h=s.substr(c+1,l-(c+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),g=o(h[2]),m=g<=.5?g*(f+1):g+f-g*f,v=2*g-m;return[i(255*a(v,m,p+1/3)),i(255*a(v,m,p)),i(255*a(v,m,p-1/3)),d];default:return null}}return null}}catch(t){}})).parseCSSColor,Jt=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};Jt.parse=function(t){if(t){if(t instanceof Jt)return t;if("string"==typeof t){var e=qt(t);if(e)return new Jt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Jt.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],i=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+i+")"},Jt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Jt.black=new Jt(0,0,0,1),Jt.white=new Jt(1,1,1,1),Jt.transparent=new Jt(0,0,0,0),Jt.red=new Jt(1,0,0,1);var Qt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r},ee=function(t){this.sections=t};ee.fromString=function(t){return new ee([new te(t,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ee.factory=function(t){return t instanceof ee?t:ee.fromString(t)},ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ee.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r)}}return t};var ne=function(t){this.name=t.name,this.available=t.available};function ie(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function re(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Jt)return!0;if(t instanceof Qt)return!0;if(t instanceof ee)return!0;if(t instanceof ne)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!re(n[e]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!re(t[i]))return!1;return!0}return!1}function oe(t){if(null===t)return Nt;if("string"==typeof t)return jt;if("boolean"==typeof t)return Dt;if("number"==typeof t)return Bt;if(t instanceof Jt)return Ft;if(t instanceof Qt)return Gt;if(t instanceof ee)return Zt;if(t instanceof ne)return Wt;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var o=oe(r[i]);if(e){if(e===o)continue;e=Vt;break}e=o}return Ht(e||Vt,n)}return zt}function ae(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Jt||t instanceof ee||t instanceof ne?t.toString():JSON.stringify(t)}ne.prototype.toString=function(){return this.name},ne.fromString=function(t){return t?new ne({name:t,available:!1}):null},ne.prototype.serialize=function(){return["image",this.name]};var se=function(t,e){this.type=t,this.value=e};se.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!re(t[1]))return e.error("invalid value");var n=t[1],i=oe(n),r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new se(i,n)},se.prototype.evaluate=function(){return this.value},se.prototype.eachChild=function(){},se.prototype.outputDefined=function(){return!0},se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Jt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var ce=function(t){this.name="ExpressionEvaluationError",this.message=t};ce.prototype.toJSON=function(){return this.message};var le={string:jt,number:Bt,boolean:Dt,object:zt},ue=function(t,e){this.type=t,this.args=e};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,r=t[0];if("array"===r){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=le[s],i++}else o=Vt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}n=Ht(o,a)}else n=le[r];for(var c=[];i<t.length;i++){var l=e.parse(t[i],i,Vt);if(!l)return null;c.push(l)}return new ue(n,c)},ue.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Kt(this.type,oe(n)))return n;if(e===this.args.length-1)throw new ce("Expected value to be of type "+Ut(this.type)+", but found "+Ut(oe(n))+" instead.")}return null},ue.prototype.eachChild=function(t){this.args.forEach(t)},ue.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ue.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var he=function(t){this.type=Zt,this.sections=t};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var i=[],r=!1,o=1;o<=t.length-1;++o){var a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Bt)))return null;var c=null;if(a["text-font"]&&!(c=e.parse(a["text-font"],1,Ht(jt))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,Ft)))return null;var u=i[i.length-1];u.scale=s,u.font=c,u.textColor=l}else{var h=e.parse(t[o],1,Vt);if(!h)return null;var d=h.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new he(i)},he.prototype.evaluate=function(t){return new ee(this.sections.map((function(e){var n=e.content.evaluate(t);return oe(n)===Wt?new te("",n,null,null,null):new te(ae(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},he.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.content.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),t.push(r)}return t};var de=function(t){this.type=Wt,this.input=t};de.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,jt);return n?new de(n):e.error("No image name provided.")},de.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ne.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},de.prototype.eachChild=function(t){t(this.input)},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){return["image",this.input.serialize()]};var pe={"to-boolean":Dt,"to-color":Ft,"to-number":Bt,"to-string":jt},fe=function(t,e){this.type=t,this.args=e};fe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var i=pe[n],r=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Vt);if(!a)return null;r.push(a)}return new fe(i,r)},fe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1){if(n=null,(e=r[i].evaluate(t))instanceof Jt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ie(e[0],e[1],e[2],e[3])))return new Jt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ce(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,c=this.args;s<c.length;s+=1){if(null===(a=c[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new ce("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ee.fromString(ae(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ne.fromString(ae(this.args[0].evaluate(t))):ae(this.args[0].evaluate(t))},fe.prototype.eachChild=function(t){this.args.forEach(t)},fe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},fe.prototype.serialize=function(){if("formatted"===this.type.kind)return new he([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new de(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var ge=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ge[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Jt.parse(t)),e};var ve=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ve.parse=function(t,e){var n,i=t[0],r=ve.definitions[i];if(!r)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),c=null,l=0,u=s;l<u.length;l+=1){var h=u[l],d=h[0],p=h[1];c=new Fe(e.registry,e.path,null,e.scope);for(var f=[],g=!1,m=1;m<t.length;m++){var v=t[m],y=Array.isArray(d)?d[m-1]:d.type,b=c.parse(v,1+f.length,y);if(!b){g=!0;break}f.push(b)}if(!g)if(Array.isArray(d)&&d.length!==f.length)c.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var _=0;_<f.length;_++){var C=Array.isArray(d)?d[_]:d.type,x=f[_];c.concat(_+1).checkSubtype(C,x.type)}if(0===c.errors.length)return new ve(i,o,p,f)}}if(1===s.length)(n=e.errors).push.apply(n,c.errors);else{for(var w=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Ut).join(", ")+")":"("+Ut(e.type)+"...)"})).join(" | "),I=[],A=1;A<t.length;A++){var P=e.parse(t[A],1+I.length);if(!P)return null;I.push(Ut(P.type))}e.error("Expected arguments of type "+w+", but found ("+I.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var n in ve.definitions=e,e)t[n]=ve};var ye=function(t,e,n){this.type=Gt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function _e(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ce(t,e){var n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*8192),Math.round(i*r*8192)]}function xe(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function we(t,e){for(var n,i,r,o,a,s,c,l=!1,u=0,h=e.length;u<h;u++)for(var d=e[u],p=0,f=d.length;p<f-1;p++){if((o=(n=t)[0]-(i=d[p])[0])*(c=n[1]-(r=d[p+1])[1])-(s=n[0]-r[0])*(a=n[1]-i[1])==0&&o*s<=0&&a*c<=0)return!1;xe(t,d[p],d[p+1])&&(l=!l)}return l}function Ie(t,e){for(var n=0;n<e.length;n++)if(we(t,e[n]))return!0;return!1}function Ae(t,e,n,i){var r=i[0]-n[0],o=i[1]-n[1],a=(t[0]-n[0])*o-r*(t[1]-n[1]),s=(e[0]-n[0])*o-r*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Pe(t,e,n){for(var i=0,r=n;i<r.length;i+=1)for(var o=r[i],a=0;a<o.length-1;++a)if(0!=(h=[(u=o[a+1])[0]-(l=o[a])[0],u[1]-l[1]])[0]*(d=[(c=e)[0]-(s=t)[0],c[1]-s[1]])[1]-h[1]*d[0]&&Ae(s,c,l,u)&&Ae(l,u,s,c))return!0;var s,c,l,u,h,d;return!1}function Oe(t,e){for(var n=0;n<t.length;++n)if(!we(t[n],e))return!1;for(var i=0;i<t.length-1;++i)if(Pe(t[i],t[i+1],e))return!1;return!0}function Me(t,e){for(var n=0;n<e.length;n++)if(Oe(t,e[n]))return!0;return!1}function Se(t,e,n){for(var i=[],r=0;r<t.length;r++){for(var o=[],a=0;a<t[r].length;a++){var s=Ce(t[r][a],n);be(e,s),o.push(s)}i.push(o)}return i}function ke(t,e,n){for(var i=[],r=0;r<t.length;r++){var o=Se(t[r],e,n);i.push(o)}return i}function Ee(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){var r=.5*i,o=t[0]-n[0]>r?-i:n[0]-t[0]>r?i:0;0===o&&(o=t[0]-n[2]>r?-i:n[2]-t[0]>r?i:0),t[0]+=o}be(e,t)}function Le(t,e,n,i){for(var r=8192*Math.pow(2,i.z),o=[8192*i.x,8192*i.y],a=[],s=0,c=t;s<c.length;s+=1)for(var l=0,u=c[s];l<u.length;l+=1){var h=u[l],d=[h.x+o[0],h.y+o[1]];Ee(d,e,n,r),a.push(d)}return a}function Te(t,e,n,i){for(var r,o=8192*Math.pow(2,i.z),a=[8192*i.x,8192*i.y],s=[],c=0,l=t;c<l.length;c+=1){for(var u=[],h=0,d=l[c];h<d.length;h+=1){var p=d[h],f=[p.x+a[0],p.y+a[1]];be(e,f),u.push(f)}s.push(u)}if(e[2]-e[0]<=o/2){(r=e)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(var g=0,m=s;g<m.length;g+=1)for(var v=0,y=m[g];v<y.length;v+=1)Ee(y[v],e,n,o)}return s}ye.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Dt);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Dt);if(!r)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,jt))?null:new ye(i,r,o)},ye.prototype.evaluate=function(t){return new Qt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ye.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ye.prototype.outputDefined=function(){return!1},ye.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Re=function(t,e){this.type=Dt,this.geojson=t,this.geometries=e};function Ne(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Re)return!1;var e=!0;return t.eachChild((function(t){e&&!Ne(t)&&(e=!1)})),e}function Be(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Be(t)&&(e=!1)})),e}function je(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!je(t,e)&&(n=!1)})),n}Re.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(re(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var i=0;i<n.features.length;++i){var r=n.features[i].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Re(n,n.features[i].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Re(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Re(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Re.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Se(e.coordinates,i,r),a=Le(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var s=0,c=a;s<c.length;s+=1)if(!we(c[s],o))return!1}if("MultiPolygon"===e.type){var l=ke(e.coordinates,i,r),u=Le(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var h=0,d=u;h<d.length;h+=1)if(!Ie(d[h],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Se(e.coordinates,i,r),a=Te(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var s=0,c=a;s<c.length;s+=1)if(!Oe(c[s],o))return!1}if("MultiPolygon"===e.type){var l=ke(e.coordinates,i,r),u=Te(t.geometry(),n,i,r);if(!_e(n,i))return!1;for(var h=0,d=u;h<d.length;h+=1)if(!Me(d[h],l))return!1}return!0}(t,this.geometries)}return!1},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!0},Re.prototype.serialize=function(){return["within",this.geojson]};var De=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};De.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new De(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},De.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},De.prototype.eachChild=function(){},De.prototype.outputDefined=function(){return!1},De.prototype.serialize=function(){return["var",this.name]};var Fe=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new Rt),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=r,this.expectedType=n};function ze(t,e){for(var n,i=t.length-1,r=0,o=i,a=0;r<=o;)if((n=t[a=Math.floor((r+o)/2)])<=e){if(a===i||e<t[a+1])return a;r=a+1}else{if(!(n>e))throw new ce("Input is not a number.");o=a-1}return 0}Fe.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)},Fe.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new ue(e,[t]):"coerce"===n?new fe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[i];if(r){var o=r.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof se)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof De)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof ye)return!1;if(e instanceof Re)return!1;var n=e instanceof fe||e instanceof ue,i=!0;return e.eachChild((function(e){i=n?i&&t(e):i&&e instanceof se})),!!i&&Ne(e)&&je(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var c=new me;try{o=new se(o.type,o.evaluate(c))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Fe.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new Fe(this.registry,i,e||null,r,this.errors)},Fe.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Tt(i,t))},Fe.prototype.checkSubtype=function(t,e){var n=Kt(t,e);return n&&this.error(n),n};var Ve=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var o=r[i],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ge(t,e,n){return t*(1-n)+e*n}Ve.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Bt);if(!n)return null;var i=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],c=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var u=e.parse(s,l,r);if(!u)return null;r=r||u.type,i.push([a,u])}return new Ve(r,n,i)},Ve.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[ze(e,i)].evaluate(t)},Ve.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ve.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Ve.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ze=Object.freeze({__proto__:null,number:Ge,color:function(t,e,n){return new Jt(Ge(t.r,e.r,n),Ge(t.g,e.g,n),Ge(t.b,e.b,n),Ge(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,i){return Ge(t,e[i],n)}))}}),We=6/29*3*(6/29),He=Math.PI/180,Ue=180/Math.PI;function $e(t){return t>.008856451679035631?Math.pow(t,1/3):t/We+4/29}function Ke(t){return t>6/29?t*t*t:We*(t-4/29)}function Xe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function qe(t){var e=Ye(t.r),n=Ye(t.g),i=Ye(t.b),r=$e((.4124564*e+.3575761*n+.1804375*i)/.95047),o=$e((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-$e((.0193339*e+.119192*n+.9503041*i)/1.08883)),alpha:t.a}}function Je(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Ke(e),n=.95047*Ke(n),i=1.08883*Ke(i),new Jt(Xe(3.2404542*n-1.5371385*e-.4985314*i),Xe(-.969266*n+1.8760108*e+.041556*i),Xe(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Qe(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var tn={forward:qe,reverse:Je,interpolate:function(t,e,n){return{l:Ge(t.l,e.l,n),a:Ge(t.a,e.a,n),b:Ge(t.b,e.b,n),alpha:Ge(t.alpha,e.alpha,n)}}},en={forward:function(t){var e=qe(t),n=e.l,i=e.a,r=e.b,o=Math.atan2(r,i)*Ue;return{h:o<0?o+360:o,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*He,n=t.c;return Je({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Qe(t.h,e.h,n),c:Ge(t.c,e.c,n),l:Ge(t.l,e.l,n),alpha:Ge(t.alpha,e.alpha,n)}}},nn=Object.freeze({__proto__:null,lab:tn,hcl:en}),rn=function(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],c=s[1];this.labels.push(s[0]),this.outputs.push(c)}};function on(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}rn.interpolationFactor=function(t,e,i,r){var o=0;if("exponential"===t.name)o=on(e,t.base,i,r);else if("linear"===t.name)o=on(e,1,i,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(on(e,1,i,r))}return o},rn.parse=function(t,e){var n=t[0],i=t[1],r=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Bt)))return null;var c=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Ft:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var u=0;u<o.length;u+=2){var h=o[u],d=o[u+1],p=u+3,f=u+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(c.length&&c[c.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var g=e.parse(d,f,l);if(!g)return null;l=l||g.type,c.push([h,g])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new rn(l,n,i,r,c):e.error("Type "+Ut(l)+" is not interpolatable.")},rn.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var o=ze(e,i),a=rn.interpolationFactor(this.interpolation,i,e[o],e[o+1]),s=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?Ze[this.type.kind.toLowerCase()](s,c,a):"interpolate-hcl"===this.operator?en.reverse(en.interpolate(en.forward(s),en.forward(c),a)):tn.reverse(tn.interpolate(tn.forward(s),tn.forward(c),a))},rn.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},rn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},rn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var an=function(t,e){this.type=t,this.args=e};an.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+r.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,r.push(s)}var c=i&&r.some((function(t){return Kt(i,t.type)}));return new an(c?Vt:n,r)},an.prototype.evaluate=function(t){for(var e,n=null,i=0,r=0,o=this.args;r<o.length&&(i++,(n=o[r].evaluate(t))&&n instanceof ne&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null===n);r+=1);return n},an.prototype.eachChild=function(t){this.args.forEach(t)},an.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},an.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var sn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};sn.prototype.evaluate=function(t){return this.result.evaluate(t)},sn.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},sn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new sn(n,a):null},sn.prototype.outputDefined=function(){return this.result.outputDefined()},sn.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var cn=function(t,e,n){this.type=t,this.index=e,this.input=n};cn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Bt),i=e.parse(t[2],2,Ht(e.expectedType||Vt));return n&&i?new cn(i.type.itemType,n,i):null},cn.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ce("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new ce("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new ce("Array index must be an integer, but found "+e+" instead.");return n[e]},cn.prototype.eachChild=function(t){t(this.index),t(this.input)},cn.prototype.outputDefined=function(){return!1},cn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ln=function(t,e){this.type=Dt,this.needle=t,this.haystack=e};ln.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Vt);return n&&i?Xt(n.type,[Dt,jt,Bt,Nt,Vt])?new ln(n,i):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(n.type)+" instead"):null},ln.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new ce("Expected first argument to be of type boolean, string, number or null, but found "+Ut(oe(e))+" instead.");if(!Yt(n,["string","array"]))throw new ce("Expected second argument to be of type array or string, but found "+Ut(oe(n))+" instead.");return n.indexOf(e)>=0},ln.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ln.prototype.outputDefined=function(){return!0},ln.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var un=function(t,e,n){this.type=Bt,this.needle=t,this.haystack=e,this.fromIndex=n};un.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Vt);if(!n||!i)return null;if(!Xt(n.type,[Dt,jt,Bt,Nt,Vt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(n.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Bt);return r?new un(n,i,r):null}return new un(n,i)},un.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new ce("Expected first argument to be of type boolean, string, number or null, but found "+Ut(oe(e))+" instead.");if(!Yt(n,["string","array"]))throw new ce("Expected second argument to be of type array or string, but found "+Ut(oe(n))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)},un.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},un.prototype.outputDefined=function(){return!1},un.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hn=function(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o};hn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],c=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var u=0,h=s;u<h.length;u+=1){var d=h[u];if("number"!=typeof d&&"string"!=typeof d)return l.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,oe(d)))return null}else n=oe(d);if(void 0!==r[String(d)])return l.error("Branch labels must be unique.");r[String(d)]=o.length}var p=e.parse(c,a,i);if(!p)return null;i=i||p.type,o.push(p)}var f=e.parse(t[1],1,Vt);if(!f)return null;var g=e.parse(t[t.length-1],t.length-1,i);return g?"value"!==f.type.kind&&e.concat(1).checkSubtype(n,f.type)?null:new hn(n,i,f,r,o,g):null},hn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(oe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},hn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},hn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r];void 0===(h=i[this.cases[a]])?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,l=n;c<l.length;c+=1){var u=l[c],h=u[0],d=u[1];e.push(1===d.length?s(d[0]):d.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var dn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};dn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Dt);if(!o)return null;var a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new dn(n,i,s):null},dn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];if(i[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},dn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];t(i[0]),t(r)}t(this.otherwise)},dn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},dn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var pn=function(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i};function fn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function gn(t,e,n,i){return 0===i.compare(e,n)}function mn(t,e,n){var i="=="!==t&&"!="!==t;return function(){function r(t,e,n){this.type=Dt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Vt);if(!o)return null;if(!fn(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Ut(o.type)+"'.");var a=e.parse(t[2],2,Vt);if(!a)return null;if(!fn(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Ut(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Ut(o.type)+"' and '"+Ut(a.type)+"'.");i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ue(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ue(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Gt)))return null}return new r(o,a,s)},r.prototype.evaluate=function(r){var o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=oe(o),c=oe(a);if(s.kind!==c.kind||"string"!==s.kind&&"number"!==s.kind)throw new ce('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+c.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var l=oe(o),u=oe(a);if("string"!==l.kind||"string"!==u.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.outputDefined=function(){return!0},r.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},r}()}pn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Vt),i=e.parse(t[2],2,Bt);if(!n||!i)return null;if(!Xt(n.type,[Ht(Vt),jt,Vt]))return e.error("Expected first argument to be of type array or string, but found "+Ut(n.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Bt);return r?new pn(n.type,n,i,r):null}return new pn(n.type,n,i)},pn.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new ce("Expected first argument to be of type array or string, but found "+Ut(oe(e))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)},pn.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var vn=mn("==",(function(t,e,n){return e===n}),gn),yn=mn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!gn(0,e,n,i)})),bn=mn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),_n=mn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Cn=mn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),xn=mn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0})),wn=function(t,e,n,i,r){this.type=jt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r};wn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Bt);if(!n)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var r=null;if(i.locale&&!(r=e.parse(i.locale,1,jt)))return null;var o=null;if(i.currency&&!(o=e.parse(i.currency,1,jt)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,Bt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,Bt))?null:new wn(n,r,o,a,s)},wn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},wn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var In=function(t){this.type=Bt,this.input=t};In.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Ut(n.type)+" instead."):new In(n):null},In.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ce("Expected value to be of type string or array, but found "+Ut(oe(e))+" instead.")},In.prototype.eachChild=function(t){t(this.input)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var An={"==":vn,"!=":yn,">":_n,"<":bn,">=":xn,"<=":Cn,array:ue,at:cn,boolean:ue,case:dn,coalesce:an,collator:ye,format:he,image:de,in:ln,"index-of":un,interpolate:rn,"interpolate-hcl":rn,"interpolate-lab":rn,length:In,let:sn,literal:se,match:hn,number:ue,"number-format":wn,object:ue,slice:pn,step:Ve,string:ue,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,var:De,within:Re};function Pn(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=ie(n,i,r,a);if(s)throw new ce(s);return new Jt(n/255*a,i/255*a,r/255*a,a)}function On(t,e){return t in e}function Mn(t,e){var n=e[t];return void 0===n?null:n}function Sn(t){return{type:t}}function kn(t){return{result:"success",value:t}}function En(t){return{result:"error",value:t}}function Ln(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Tn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Rn(t){return!!t.expression&&t.expression.interpolated}function Nn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Bn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function jn(t){return t}function Dn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Fn(t,e,n,i,r){return Dn(typeof n===r?i[n]:void 0,t.default,e.default)}function zn(t,e,n){if("number"!==Nn(n))return Dn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var r=ze(t.stops.map((function(t){return t[0]})),n);return t.stops[r][1]}function Vn(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==Nn(n))return Dn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o=ze(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],c=t.stops[o+1][1],l=Ze[e.type]||jn;if(t.colorSpace&&"rgb"!==t.colorSpace){var u=nn[t.colorSpace];l=function(t,e){return u.reverse(u.interpolate(u.forward(t),u.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),i=c.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return l(n,i,a)}}:l(s,c,a)}function Gn(t,e,n){return"color"===e.type?n=Jt.parse(n):"formatted"===e.type?n=ee.fromString(n.toString()):"resolvedImage"===e.type?n=ne.fromString(n.toString()):Nn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Dn(n,t.default,e.default)}ve.register(An,{error:[{kind:"error"},[jt],function(t,e){throw new ce(e[0].evaluate(t))}],typeof:[jt,[Vt],function(t,e){return Ut(oe(e[0].evaluate(t)))}],"to-rgba":[Ht(Bt,4),[Ft],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ft,[Bt,Bt,Bt],Pn],rgba:[Ft,[Bt,Bt,Bt,Bt],Pn],has:{type:Dt,overloads:[[[jt],function(t,e){return On(e[0].evaluate(t),t.properties())}],[[jt,zt],function(t,e){var n=e[1];return On(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Vt,overloads:[[[jt],function(t,e){return Mn(e[0].evaluate(t),t.properties())}],[[jt,zt],function(t,e){var n=e[1];return Mn(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Vt,[jt],function(t,e){return Mn(e[0].evaluate(t),t.featureState||{})}],properties:[zt,[],function(t){return t.properties()}],"geometry-type":[jt,[],function(t){return t.geometryType()}],id:[Vt,[],function(t){return t.id()}],zoom:[Bt,[],function(t){return t.globals.zoom}],"heatmap-density":[Bt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Bt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Vt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Bt,Sn(Bt),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[Bt,Sn(Bt),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:Bt,overloads:[[[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Bt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Bt,[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Bt,[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Bt,[],function(){return Math.LN2}],pi:[Bt,[],function(){return Math.PI}],e:[Bt,[],function(){return Math.E}],"^":[Bt,[Bt,Bt],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Bt,[Bt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Bt,[Bt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Bt,[Bt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Bt,[Bt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Bt,[Bt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Bt,[Bt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Bt,[Bt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Bt,[Bt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Bt,Sn(Bt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Bt,Sn(Bt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Bt,[Bt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Bt,[Bt],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Bt,[Bt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Bt,[Bt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Dt,[jt,Vt],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[Dt,[Vt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Dt,[jt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Dt,[jt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Dt,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[Dt,[jt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[Dt,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[Dt,[jt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Dt,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[Dt,[jt,Vt],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[Dt,[Vt],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[Dt,[Vt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Dt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Dt,[Ht(jt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Dt,[Ht(Vt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Dt,[jt,Ht(Vt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Dt,[jt,Ht(Vt)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[Sn(Dt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[Sn(Dt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Dt,[Dt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Dt,[jt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[jt,[jt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[jt,[jt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[jt,Sn(Vt),function(t,e){return e.map((function(e){return ae(e.evaluate(t))})).join("")}],"resolved-locale":[jt,[Gt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Zn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&Bn(t.default)?new Jt(0,0,0,0):"color"===t.type?Jt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Wn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in An}function Hn(t,e){var n=new Fe(An,[],e?function(t){var e={color:Ft,string:jt,number:Bt,enum:jt,boolean:Dt,formatted:Zt,resolvedImage:Wt};return"array"===t.type?Ht(e[t.value]||Vt,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?kn(new Zn(i,e)):En(n.errors)}Zn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Zn.prototype.evaluate=function(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ce("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Un=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Be(e.expression)};Un.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)},Un.prototype.evaluate=function(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)};var $n=function(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Be(e.expression),this.interpolationType=i};function Kn(t,e){if("error"===(t=Hn(t,e)).result)return t;var n=t.value.expression,i=Ne(n);if(!i&&!Ln(e))return En([new Tt("","data expressions not supported")]);var r=je(n,["zoom"]);if(!r&&!Tn(e))return En([new Tt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof sn)n=t(e.result);else if(e instanceof an)for(var i=0,r=e.args;i<r.length&&!(n=t(r[i]));i+=1);else(e instanceof Ve||e instanceof rn)&&e.input instanceof ve&&"zoom"===e.input.name&&(n=e);return n instanceof Tt||e.eachChild((function(e){var i=t(e);i instanceof Tt?n=i:!n&&i?n=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||r?o instanceof Tt?En([o]):o instanceof rn&&!Rn(e)?En([new Tt("",'"interpolate" expressions cannot be used with this property')]):kn(o?new $n(i?"camera":"composite",t.value,o.labels,o instanceof rn?o.interpolation:void 0):new Un(i?"constant":"source",t.value)):En([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}$n.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)},$n.prototype.evaluate=function(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)},$n.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?rn.interpolationFactor(this.interpolationType,t,e,n):0};var Xn=function(t,e){this._parameters=t,this._specification=e,kt(this,function t(e,n){var i,r,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],c=s||!(s||void 0!==e.property),l=e.type||(Rn(n)?"exponential":"interval");if(a&&((e=kt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Jt.parse(t[1])]}))),e.default=Jt.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!nn[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)i=Vn;else if("interval"===l)i=zn;else if("categorical"===l){i=Fn,r=Object.create(null);for(var u=0,h=e.stops;u<h.length;u+=1){var d=h[u];r[d[0]]=d[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');i=Gn}if(s){for(var p={},f=[],g=0;g<e.stops.length;g++){var m=e.stops[g],v=m[0].zoom;void 0===p[v]&&(p[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},f.push(v)),p[v].stops.push([m[0].value,m[1]])}for(var y=[],b=0,_=f;b<_.length;b+=1){var C=_[b];y.push([p[C].zoom,t(p[C],n)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:rn.interpolationFactor.bind(void 0,x),zoomStops:y.map((function(t){return t[0]})),evaluate:function(t,i){var r=t.zoom;return Vn({stops:y,base:e.base},n,r).evaluate(r,i)}}}if(c){var w="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:rn.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return i(e,n,t.zoom,r,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Dn(e.default,n.default):i(e,n,s,r,o)}}}(this._parameters,this._specification))};function Yn(t){var e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],c=Nn(n);if("object"!==c)return[new Mt(e,n,"object expected, "+c+" found")];for(var l in n){var u=l.split(".")[0],h=i[u]||i["*"],d=void 0;if(r[u])d=r[u];else if(i[u])d=Ci;else if(r["*"])d=r["*"];else{if(!i["*"]){s.push(new Mt(e,n[l],'unknown property "'+l+'"'));continue}d=Ci}s=s.concat(d({key:(e?e+".":e)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var p in i)r[p]||i[p].required&&void 0===i[p].default&&void 0===n[p]&&s.push(new Mt(e,n,'missing required property "'+p+'"'));return s}function qn(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||Ci;if("array"!==Nn(e))return[new Mt(o,e,"array expected, "+Nn(e)+" found")];if(n.length&&e.length!==n.length)return[new Mt(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Mt(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};r.$version<7&&(s.function=n.function),"object"===Nn(n.value)&&(s=n.value);for(var c=[],l=0;l<e.length;l++)c=c.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:i,styleSpec:r,key:o+"["+l+"]"}));return c}function Jn(t){var e=t.key,n=t.value,i=t.valueSpec,r=Nn(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new Mt(e,n,"number expected, "+r+" found")]:"minimum"in i&&n<i.minimum?[new Mt(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new Mt(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function Qn(t){var e,n,i,r=t.valueSpec,o=Et(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,c=!s,l="array"===Nn(t.value.stops)&&"array"===Nn(t.value.stops[0])&&"object"===Nn(t.value.stops[0][0]),u=Yn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(qn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Nn(n)&&0===n.length&&e.push(new Mt(t.key,n,"array must have at least one stop")),e},default:function(t){return Ci({key:t.key,value:t.value,valueSpec:r,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&u.push(new Mt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||u.push(new Mt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Rn(t.valueSpec)&&u.push(new Mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!Ln(t.valueSpec)?u.push(new Mt(t.key,t.value,"property functions not supported")):s&&!Tn(t.valueSpec)&&u.push(new Mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||u.push(new Mt(t.key,t.value,'"property" property is required')),u;function h(t){var e=[],o=t.value,s=t.key;if("array"!==Nn(o))return[new Mt(s,o,"array expected, "+Nn(o)+" found")];if(2!==o.length)return[new Mt(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Nn(o[0]))return[new Mt(s,o,"object expected, "+Nn(o[0])+" found")];if(void 0===o[0].zoom)return[new Mt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Mt(s,o,"object stop key must have value")];if(i&&i>Et(o[0].zoom))return[new Mt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Et(o[0].zoom)!==i&&(i=Et(o[0].zoom),n=void 0,a={}),e=e.concat(Yn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Jn,value:d}}))}else e=e.concat(d({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Wn(Lt(o[1]))?e.concat([new Mt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Ci({key:s+"[1]",value:o[1],valueSpec:r,style:t.style,styleSpec:t.styleSpec}))}function d(t,i){var s=Nn(t.value),c=Et(t.value),l=null!==t.value?t.value:i;if(e){if(s!==e)return[new Mt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Mt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var u="number expected, "+s+" found";return Ln(r)&&void 0===o&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mt(t.key,l,u)]}return"categorical"!==o||"number"!==s||isFinite(c)&&Math.floor(c)===c?"categorical"!==o&&"number"===s&&void 0!==n&&c<n?[new Mt(t.key,l,"stop domain values must appear in ascending order")]:(n=c,"categorical"===o&&c in a?[new Mt(t.key,l,"stop domain values must be unique")]:(a[c]=!0,[])):[new Mt(t.key,l,"integer expected, found "+c)]}}function ti(t){var e=("property"===t.expressionContext?Kn:Hn)(Lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Mt(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Be(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Be(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!je(n,["zoom","feature-state"]))return[new Mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ne(n))return[new Mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(t){var e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Et(n))&&r.push(new Mt(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(Et(n))&&r.push(new Mt(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),r}function ni(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!ni(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Xn.deserialize=function(t){return new Xn(t._parameters,t._specification)},Xn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ii={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ri(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ni(t)||(t=ai(t));var e=Hn(t,ii);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,i){return e.value.evaluate(t,n,{},i)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function oi(t,e){return t<e?-1:t>e?1:0}function ai(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?si(t[1],t[2],"=="):"!="===n?ui(si(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?si(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(ai))):"all"===n?["all"].concat(t.slice(1).map(ai)):"none"===n?["all"].concat(t.slice(1).map(ai).map(ui)):"in"===n?ci(t[1],t.slice(2)):"!in"===n?ui(ci(t[1],t.slice(2))):"has"===n?li(t[1]):"!has"===n?ui(li(t[1])):"within"!==n||t}function si(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function ci(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(oi)]]:["filter-in-small",t,["literal",e]]}}function li(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ui(t){return["!",t]}function hi(t){return ni(Lt(t.value))?ti(kt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==Nn(n))return[new Mt(i,n,"array expected, "+Nn(n)+" found")];var r,o=e.styleSpec,a=[];if(n.length<1)return[new Mt(i,n,"filter array must have at least 1 element")];switch(a=a.concat(ei({key:i+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Et(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Et(n[1])&&a.push(new Mt(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Mt(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(r=Nn(n[1]))&&a.push(new Mt(i+"[1]",n[1],"string expected, "+r+" found"));for(var s=2;s<n.length;s++)r=Nn(n[s]),"$type"===Et(n[1])?a=a.concat(ei({key:i+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new Mt(i+"["+s+"]",n[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var c=1;c<n.length;c++)a=a.concat(t({key:i+"["+c+"]",value:n[c],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Nn(n[1]),2!==n.length?a.push(new Mt(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new Mt(i+"[1]",n[1],"string expected, "+r+" found"));break;case"within":r=Nn(n[1]),2!==n.length?a.push(new Mt(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==r&&a.push(new Mt(i+"[1]",n[1],"object expected, "+r+" found"))}return a}(t)}function di(t,e){var n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var c=a.match(/^(.*)-transition$/);if("paint"===e&&c&&s[c[1]]&&s[c[1]].transition)return Ci({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});var l,u=t.valueSpec||s[a];if(!u)return[new Mt(n,o,'unknown property "'+a+'"')];if("string"===Nn(o)&&Ln(u)&&!u.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Mt(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new Mt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Bn(Lt(o))&&"identity"===Et(o.type)&&h.push(new Mt(n,o,'"text-font" does not support identity functions'))),h.concat(Ci({key:t.key,value:o,valueSpec:u,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function pi(t){return di(t,"paint")}function fi(t){return di(t,"layout")}function gi(t){var e=[],n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Mt(i,n,'either "type" or "ref" is required'));var a,s=Et(n.type),c=Et(n.ref);if(n.id)for(var l=Et(n.id),u=0;u<t.arrayIndex;u++){var h=r.layers[u];Et(h.id)===l&&e.push(new Mt(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new Mt(i,n[t],'"'+t+'" is prohibited for ref layers'))})),r.layers.forEach((function(t){Et(t.id)===c&&(a=t)})),a?a.ref?e.push(new Mt(i,n.ref,"ref cannot reference another ref layer")):s=Et(a.type):e.push(new Mt(i,n.ref,'ref layer "'+c+'" not found'));else if("background"!==s)if(n.source){var d=r.sources&&r.sources[n.source],p=d&&Et(d.type);d?"vector"===p&&"raster"===s?e.push(new Mt(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new Mt(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new Mt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&d.lineMetrics||e.push(new Mt(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Mt(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Mt(i,n.source,'source "'+n.source+'" not found'))}else e.push(new Mt(i,n,'missing required property "source"'));return e=e.concat(Yn({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ci({key:i+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:hi,layout:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return fi(kt({layerType:s},t))}}})},paint:function(t){return Yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return pi(kt({layerType:s},t))}}})}}}))}function mi(t){var e=t.value,n=t.key,i=Nn(e);return"string"!==i?[new Mt(n,e,"string expected, "+i+" found")]:[]}var vi={promoteId:function(t){var e=t.key,n=t.value;if("string"===Nn(n))return mi({key:e,value:n});var i=[];for(var r in n)i.push.apply(i,mi({key:e+"."+r,value:n[r]}));return i}};function yi(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new Mt(n,e,'"type" is required')];var o,a=Et(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Yn({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i,objectElementValidators:vi});case"geojson":if(o=Yn({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:vi}),e.cluster)for(var s in e.clusterProperties){var c=e.clusterProperties[s],l=c[0],u="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,ti({key:n+"."+s+".map",value:c[1],expressionContext:"cluster-map"})),o.push.apply(o,ti({key:n+"."+s+".reduce",value:u,expressionContext:"cluster-reduce"}))}return o;case"video":return Yn({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Yn({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Mt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function bi(t){var e=t.value,n=t.styleSpec,i=n.light,r=t.style,o=[],a=Nn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Mt("light",e,"object expected, "+a+" found")]);for(var s in e){var c=s.match(/^(.*)-transition$/);o=o.concat(c&&i[c[1]]&&i[c[1]].transition?Ci({key:s,value:e[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?Ci({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n}):[new Mt(s,e[s],'unknown property "'+s+'"')])}return o}var _i={"*":function(){return[]},array:qn,boolean:function(t){var e=t.value,n=t.key,i=Nn(e);return"boolean"!==i?[new Mt(n,e,"boolean expected, "+i+" found")]:[]},number:Jn,color:function(t){var e=t.key,n=t.value,i=Nn(n);return"string"!==i?[new Mt(e,n,"color expected, "+i+" found")]:null===qt(n)?[new Mt(e,n,'color expected, "'+n+'" found')]:[]},constants:St,enum:ei,filter:hi,function:Qn,layer:gi,object:Yn,source:yi,light:bi,string:mi,formatted:function(t){return 0===mi(t).length?[]:ti(t)},resolvedImage:function(t){return 0===mi(t).length?[]:ti(t)}};function Ci(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&Bn(Et(e))?Qn(t):n.expression&&Wn(Lt(e))?ti(t):n.type&&_i[n.type]?_i[n.type](t):Yn(kt({},t,{valueSpec:n.type?i[n.type]:n}))}function xi(t){var e=t.value,n=t.key,i=mi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new Mt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new Mt(n,e,'"glyphs" url must include a "{range}" token'))),i}function wi(t,e){void 0===e&&(e=Ot);var n=[];return n=n.concat(Ci({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:xi,"*":function(){return[]}}})),t.constants&&(n=n.concat(St({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ii(n)}function Ii(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Ai(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Ii(t.apply(this,e))}}wi.source=Ai(yi),wi.light=Ai(bi),wi.layer=Ai(gi),wi.filter=Ai(hi),wi.paintProperty=Ai(pi),wi.layoutProperty=Ai(fi);var Pi=wi,Oi=Pi.light,Mi=Pi.paintProperty,Si=Pi.layoutProperty;function ki(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1)t.fire(new At(new Error(r[i].message))),n=!0;return n}var Ei=Li;function Li(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var c=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],c),this.bboxes=r.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}Li.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Li.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Li.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},Li.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},Li.prototype._queryCell=function(t,e,n,i,r,o,a,s){var c=this.cells[r];if(null!==c)for(var l=this.keys,u=this.bboxes,h=0;h<c.length;h++){var d=c[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&n>=u[p+0]&&i>=u[p+1])?(a[d]=!0,o.push(l[d])):a[d]=!1}}},Li.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var c=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=c;d<=u;d++)for(var p=l;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,t,e,n,i,f,o,a,s))return}},Li.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Li.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Li.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var Ti=a.ImageData,Ri=a.ImageBitmap,Ni={};function Bi(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Ni[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var ji in Bi("Object",Object),Ei.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Ei.deserialize=function(t){return new Ei(t.buffer)},Bi("Grid",Ei),Bi("Color",Jt),Bi("Error",Error),Bi("ResolvedImage",ne),Bi("StylePropertyFunction",Xn),Bi("StyleExpression",Zn,{omit:["_evaluator"]}),Bi("ZoomDependentExpression",$n),Bi("ZoomConstantExpression",Un),Bi("CompoundExpression",ve,{omit:["_evaluate"]}),An)An[ji]._classRegistryKey||Bi("Expression_"+ji,An[ji]);function Di(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Fi(t){return Ri&&t instanceof Ri}function zi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Di(t)||Fi(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ti)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,o=t;r<o.length;r+=1)i.push(zi(o[r],e));return i}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var c=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Ni[s].omit.indexOf(l)>=0)){var u=t[l];c[l]=Ni[s].shallow.indexOf(l)>=0?u:zi(u,e)}t instanceof Error&&(c.message=t.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(c.$name=s),c}throw new Error("can't serialize object of type "+typeof t)}function Vi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Di(t)||Fi(t)||ArrayBuffer.isView(t)||t instanceof Ti)return t;if(Array.isArray(t))return t.map(Vi);if("object"==typeof t){var e=t.$name||"Object",n=Ni[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),r=0,o=Object.keys(t);r<o.length;r+=1){var a=o[r];if("$name"!==a){var s=t[a];i[a]=Ni[e].shallow.indexOf(a)>=0?s:Vi(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var Gi=function(){this.first=!0};Gi.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Zi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Wi(t){for(var e=0,n=t;e<n.length;e+=1)if(Hi(n[e].charCodeAt(0)))return!0;return!1}function Hi(t){return!(746!==t&&747!==t&&(t<4352||!(Zi["Bopomofo Extended"](t)||Zi.Bopomofo(t)||Zi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Zi["CJK Compatibility Ideographs"](t)||Zi["CJK Compatibility"](t)||Zi["CJK Radicals Supplement"](t)||Zi["CJK Strokes"](t)||!(!Zi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Zi["CJK Unified Ideographs Extension A"](t)||Zi["CJK Unified Ideographs"](t)||Zi["Enclosed CJK Letters and Months"](t)||Zi["Hangul Compatibility Jamo"](t)||Zi["Hangul Jamo Extended-A"](t)||Zi["Hangul Jamo Extended-B"](t)||Zi["Hangul Jamo"](t)||Zi["Hangul Syllables"](t)||Zi.Hiragana(t)||Zi["Ideographic Description Characters"](t)||Zi.Kanbun(t)||Zi["Kangxi Radicals"](t)||Zi["Katakana Phonetic Extensions"](t)||Zi.Katakana(t)&&12540!==t||!(!Zi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Zi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Zi["Unified Canadian Aboriginal Syllabics"](t)||Zi["Unified Canadian Aboriginal Syllabics Extended"](t)||Zi["Vertical Forms"](t)||Zi["Yijing Hexagram Symbols"](t)||Zi["Yi Syllables"](t)||Zi["Yi Radicals"](t))))}function Ui(t){return!(Hi(t)||function(t){return!!(Zi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Zi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Zi["Letterlike Symbols"](t)||Zi["Number Forms"](t)||Zi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Zi["Control Pictures"](t)&&9251!==t||Zi["Optical Character Recognition"](t)||Zi["Enclosed Alphanumerics"](t)||Zi["Geometric Shapes"](t)||Zi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Zi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Zi["CJK Symbols and Punctuation"](t)||Zi.Katakana(t)||Zi["Private Use Area"](t)||Zi["CJK Compatibility Forms"](t)||Zi["Small Form Variants"](t)||Zi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function $i(t){return t>=1424&&t<=2303||Zi["Arabic Presentation Forms-A"](t)||Zi["Arabic Presentation Forms-B"](t)}function Ki(t,e){return!(!e&&$i(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Zi.Khmer(t))}function Xi(t){for(var e=0,n=t;e<n.length;e+=1)if($i(n[e].charCodeAt(0)))return!0;return!1}var Yi=null,qi="unavailable",Ji=null,Qi=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(qi="error"),Yi&&Yi(t)};function tr(){er.fire(new It("pluginStateChange",{pluginStatus:qi,pluginURL:Ji}))}var er=new Pt,nr=function(){return qi},ir=function(){if("deferred"!==qi||!Ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qi="loading",tr(),Ji&&_t({url:Ji},(function(t){t?Qi(t):(qi="loaded",tr())}))},rr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===qi||null!=rr.applyArabicShaping},isLoading:function(){return"loading"===qi},setState:function(t){qi=t.pluginStatus,Ji=t.pluginURL},isParsed:function(){return null!=rr.applyArabicShaping&&null!=rr.processBidirectionalText&&null!=rr.processStyledBidirectionalText},getPluginURL:function(){return Ji}},or=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gi,this.transition={})};or.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Ki(i[n].charCodeAt(0),e))return!1;return!0}(t,rr.isLoaded())},or.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},or.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var ar=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Bn(t))return new Xn(t,e);if(Wn(t)){var n=Kn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Jt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};ar.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ar.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var sr=function(t){this.property=t,this.value=new ar(t,void 0)};sr.prototype.transitioned=function(t,e){return new lr(this.property,this.value,e,d({},t.transition,this.transition),t.now)},sr.prototype.untransitioned=function(){return new lr(this.property,this.value,null,{},0)};var cr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};cr.prototype.getValue=function(t){return C(this._values[t].value.value)},cr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new sr(this._values[t].property)),this._values[t].value=new ar(this._values[t].property,null===e?void 0:C(e))},cr.prototype.getTransition=function(t){return C(this._values[t].transition)},cr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new sr(this._values[t].property)),this._values[t].transition=C(e)||void 0},cr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);var o=this.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},cr.prototype.transitioned=function(t,e){for(var n=new ur(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},cr.prototype.untransitioned=function(){for(var t=new ur(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var lr=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};lr.prototype.possiblyEvaluate=function(t,e,n){var i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);var a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return r};var ur=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};ur.prototype.possiblyEvaluate=function(t,e,n){for(var i=new pr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i},ur.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var hr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};hr.prototype.getValue=function(t){return C(this._values[t].value)},hr.prototype.setValue=function(t,e){this._values[t]=new ar(this._values[t].property,null===e?void 0:C(e))},hr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},hr.prototype.possiblyEvaluate=function(t,e,n){for(var i=new pr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];i._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return i};var dr=function(t,e,n){this.property=t,this.value=e,this.parameters=n};dr.prototype.isConstant=function(){return"constant"===this.value.kind},dr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},dr.prototype.evaluate=function(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)};var pr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};pr.prototype.get=function(t){return this._values[t]};var fr=function(t){this.specification=t};fr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},fr.prototype.interpolate=function(t,e,n){var i=Ze[this.specification.type];return i?i(t,e,n):t};var gr=function(t,e){this.specification=t,this.overrides=e};gr.prototype.possiblyEvaluate=function(t,e,n,i){return new dr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)},gr.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new dr(this,{kind:"constant",value:void 0},t.parameters);var i=Ze[this.specification.type];return i?new dr(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},gr.prototype.evaluate=function(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)};var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0===t.value)return new dr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new dr(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new dr(this,{kind:"constant",value:s},e)}return new dr(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i,r,o){if("source"===t.kind){var a=t.evaluate(e,n,i,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(gr),vr=function(t){this.specification=t};vr.prototype.possiblyEvaluate=function(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new or(Math.floor(e.zoom-1),e)),t.expression.evaluate(new or(Math.floor(e.zoom),e)),t.expression.evaluate(new or(Math.floor(e.zoom+1),e)),e)}},vr.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},vr.prototype.interpolate=function(t){return t};var yr=function(t){this.specification=t};yr.prototype.possiblyEvaluate=function(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)},yr.prototype.interpolate=function(){return!1};var br=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new ar(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new sr(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};Bi("DataDrivenProperty",gr),Bi("DataConstantProperty",fr),Bi("CrossFadedDataDrivenProperty",mr),Bi("CrossFadedProperty",vr),Bi("ColorRampProperty",yr);var _r=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new hr(n.layout)),n.paint)){for(var i in this._transitionablePaint=new cr(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pr(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Si,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Mi,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],o=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||r||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,i,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&ki(this,t.call(Pi,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Ot,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof dr&&Ln(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Pt),Cr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},xr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},wr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ir(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map((function(t){var r=Cr[t.type].BYTES_PER_ELEMENT,o=n=Ar(n,Math.max(e,r)),a=t.components||1;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Ar(n,Math.max(i,e)),alignment:e}}function Ar(t,e){return Math.ceil(t/e)*e}wr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},wr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},wr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},wr.prototype.clear=function(){this.length=0},wr.prototype.resize=function(t){this.reserve(t),this.length=t},wr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},wr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}(wr);Pr.prototype.bytesPerElement=4,Bi("StructArrayLayout2i4",Pr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t},e}(wr);Or.prototype.bytesPerElement=8,Bi("StructArrayLayout4i8",Or);var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(wr);Mr.prototype.bytesPerElement=12,Bi("StructArrayLayout2i4i12",Mr);var Sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=4*t,c=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[c+4]=i,this.uint8[c+5]=r,this.uint8[c+6]=o,this.uint8[c+7]=a,t},e}(wr);Sr.prototype.bytesPerElement=8,Bi("StructArrayLayout2i4ub8",Sr);var kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}(wr);kr.prototype.bytesPerElement=8,Bi("StructArrayLayout2f8",kr);var Er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,c,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,c,l)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,c,l,u){var h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=c,this.uint16[h+8]=l,this.uint16[h+9]=u,t},e}(wr);Er.prototype.bytesPerElement=20,Bi("StructArrayLayout10ui20",Er);var Lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,c,l,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,o,a,s,c,l,u,h)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,c,l,u,h,d){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=c,this.int16[p+8]=l,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,t},e}(wr);Lr.prototype.bytesPerElement=24,Bi("StructArrayLayout4i4ui4i24",Lr);var Tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t},e}(wr);Tr.prototype.bytesPerElement=12,Bi("StructArrayLayout3f12",Tr);var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(wr);Rr.prototype.bytesPerElement=4,Bi("StructArrayLayout1ul4",Rr);var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,c){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,i,r,o,a,s,c)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,c,l){var u=10*t,h=5*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=c,this.uint16[u+9]=l,t},e}(wr);Nr.prototype.bytesPerElement=20,Bi("StructArrayLayout6i1ul2ui20",Nr);var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(wr);Br.prototype.bytesPerElement=12,Bi("StructArrayLayout2i2i2i12",Br);var jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)},e.prototype.emplace=function(t,e,n,i,r,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,t},e}(wr);jr.prototype.bytesPerElement=16,Bi("StructArrayLayout2f1f2i16",jr);var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t},e}(wr);Dr.prototype.bytesPerElement=12,Bi("StructArrayLayout2ub2f12",Dr);var Fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t},e}(wr);Fr.prototype.bytesPerElement=6,Bi("StructArrayLayout3ui6",Fr);var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v){var y=24*t,b=12*t,_=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=i,this.uint16[y+3]=r,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=s,this.uint16[y+10]=c,this.uint16[y+11]=l,this.uint16[y+12]=u,this.float32[b+7]=h,this.float32[b+8]=d,this.uint8[_+36]=p,this.uint8[_+37]=f,this.uint8[_+38]=g,this.uint32[b+10]=m,this.int16[y+22]=v,t},e}(wr);zr.prototype.bytesPerElement=48,Bi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",zr);var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O){var M=this.length;return this.resize(M+1),this.emplace(M,t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O,M){var S=34*t,k=17*t;return this.int16[S+0]=e,this.int16[S+1]=n,this.int16[S+2]=i,this.int16[S+3]=r,this.int16[S+4]=o,this.int16[S+5]=a,this.int16[S+6]=s,this.int16[S+7]=c,this.uint16[S+8]=l,this.uint16[S+9]=u,this.uint16[S+10]=h,this.uint16[S+11]=d,this.uint16[S+12]=p,this.uint16[S+13]=f,this.uint16[S+14]=g,this.uint16[S+15]=m,this.uint16[S+16]=v,this.uint16[S+17]=y,this.uint16[S+18]=b,this.uint16[S+19]=_,this.uint16[S+20]=C,this.uint16[S+21]=x,this.uint16[S+22]=w,this.uint32[k+12]=I,this.float32[k+13]=A,this.float32[k+14]=P,this.float32[k+15]=O,this.float32[k+16]=M,t},e}(wr);Vr.prototype.bytesPerElement=68,Bi("StructArrayLayout8i15ui1ul4f68",Vr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(wr);Gr.prototype.bytesPerElement=4,Bi("StructArrayLayout1f4",Gr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t},e}(wr);Zr.prototype.bytesPerElement=6,Bi("StructArrayLayout3i6",Zr);var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=n,this.uint16[r+3]=i,t},e}(wr);Wr.prototype.bytesPerElement=8,Bi("StructArrayLayout1ul2ui8",Wr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}(wr);Hr.prototype.bytesPerElement=4,Bi("StructArrayLayout2ui4",Hr);var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(wr);Ur.prototype.bytesPerElement=2,Bi("StructArrayLayout1ui2",Ur);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t},e}(wr);$r.prototype.bytesPerElement=16,Bi("StructArrayLayout4f16",$r);var Kr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(xr);Kr.prototype.size=20;var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Kr(this,t)},e}(Nr);Bi("CollisionBoxArray",Xr);var Yr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(xr);Yr.prototype.size=48;var qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Yr(this,t)},e}(zr);Bi("PlacedSymbolArray",qr);var Jr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(xr);Jr.prototype.size=68;var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Jr(this,t)},e}(Vr);Bi("SymbolInstanceArray",Qr);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Gr);Bi("GlyphOffsetArray",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Zr);Bi("SymbolLineVertexArray",eo);var no=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(xr);no.prototype.size=8;var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new no(this,t)},e}(Wr);Bi("FeatureIndexArray",io);var ro=Ir([{name:"a_pos",components:2,type:"Int16"}],4).members,oo=function(t){void 0===t&&(t=[]),this.segments=t};function ao(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}oo.prototype.prepareSegment=function(t,e,n,i){var r=this.segments[this.segments.length-1];return t>oo.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+oo.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>oo.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r},oo.prototype.get=function(){return this.segments},oo.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},oo.simpleSegment=function(t,e,n,i){return new oo([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])},oo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bi("SegmentVector",oo);var so=Ir([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),co=e((function(t){t.exports=function(t,e){var n,i,r,o,a,s,c,l;for(i=t.length-(n=3&t.length),r=e,a=3432918353,s=461845907,l=0;l<i;)c=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,r=27492+(65535&(o=5*(65535&(r=(r^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&t.charCodeAt(l+2))<<16;case 2:c^=(255&t.charCodeAt(l+1))<<8;case 1:r^=c=(65535&(c=(c=(65535&(c^=255&t.charCodeAt(l)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),lo=e((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),uo=co,ho=lo;uo.murmur3=co,uo.murmur2=ho;var po=function(){this.ids=[],this.positions=[],this.indexed=!1};po.prototype.add=function(t,e,n,i){this.ids.push(go(t)),this.positions.push(e,n,i)},po.prototype.getPositions=function(t){for(var e=go(t),n=0,i=this.ids.length-1;n<i;){var r=n+i>>1;this.ids[r]>=e?i=r:n=r+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},po.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,r){for(;i<r;){for(var o=e[i+r>>1],a=i-1,s=r+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;mo(e,a,s),mo(n,3*a,3*s),mo(n,3*a+1,3*s+1),mo(n,3*a+2,3*s+2)}s-i<r-s?(t(e,n,i,s),i=s+1):(t(e,n,s+1,r),r=s)}}(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}},po.deserialize=function(t){var e=new po;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var fo=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=fo?e:uo(String(t))}function mo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}Bi("FeaturePositionMap",po);var vo=function(t,e){this.gl=t.gl,this.location=e},yo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(vo),bo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(vo),_o=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(vo),Co=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(vo),xo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(vo),wo=function(t){function e(e,n){t.call(this,e,n),this.current=Jt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(vo),Io=new Float32Array(16),Ao=function(t){function e(e,n){t.call(this,e,n),this.current=Io}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(vo);function Po(t){return[ao(255*t.r,255*t.g),ao(255*t.b,255*t.a)]}var Oo=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};Oo.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},Oo.prototype.getBinding=function(t,e,n){return"color"===this.type?new wo(t,e):new bo(t,e)};var Mo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Mo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Mo.prototype.setUniform=function(t,e,n,i){var r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)},Mo.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new xo(t,e):new bo(t,e)};var So=function(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new i};So.prototype.populatePaintArray=function(t,e,n,i,r){var o=this.paintVertexArray.length,a=this.expression.evaluate(new or(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},So.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)},So.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var i=Po(n),r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},So.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},So.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ko=function(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};ko.prototype.populatePaintArray=function(t,e,n,i,r){var o=this.expression.evaluate(new or(this.zoom),e,{},i,[],r),a=this.expression.evaluate(new or(this.zoom+1),e,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},ko.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)},ko.prototype._setPaintValue=function(t,e,n,i){if("color"===this.type)for(var r=Po(n),o=Po(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,r[0],r[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}},ko.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ko.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ko.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=u(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)},ko.prototype.getBinding=function(t,e,n){return new bo(t,e)};var Eo=function(t,e,n,i,r,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r};Eo.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)},Eo.prototype.updatePaintArray=function(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)},Eo.prototype._setPaintValues=function(t,e,n,i){if(i&&n){var r=i[n.min],o=i[n.mid],a=i[n.max];if(r&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],o.pixelRatio,r.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Eo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,so.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,so.members,this.expression.isStateDependent))},Eo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lo=function(t,e,n){this.binders={},this._buffers=[];var i=[];for(var r in t.paint._values)if(n(r)){var o=t.paint.get(r);if(o instanceof dr&&Ln(o.property.specification)){var a=Ro(r,t.type),s=o.value,c=o.property.specification.type,l=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[r]=h?new Mo(s.value,a):new Oo(s.value,a,c),i.push("/u_"+r);else if("source"===s.kind||h){var d=No(r,c,"source");this.binders[r]=h?new Eo(s,c,l,e,d,t.id):new So(s,a,c,d),i.push("/a_"+r)}else{var p=No(r,c,"composite");this.binders[r]=new ko(s,a,c,l,e,p),i.push("/z_"+r)}}}this.cacheKey=i.sort().join("")};Lo.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof So||e instanceof ko?e.maxValue:0},Lo.prototype.populatePaintArrays=function(t,e,n,i,r){for(var o in this.binders){var a=this.binders[o];(a instanceof So||a instanceof ko||a instanceof Eo)&&a.populatePaintArray(t,e,n,i,r)}},Lo.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var i=this.binders[n];i instanceof Mo&&i.setConstantPatternPositions(t,e)}},Lo.prototype.updatePaintArrays=function(t,e,n,i,r){var o=!1;for(var a in t)for(var s=0,c=e.getPositions(a);s<c.length;s+=1){var l=c[s],u=n.feature(l.index);for(var h in this.binders){var d=this.binders[h];if((d instanceof So||d instanceof ko||d instanceof Eo)&&!0===d.expression.isStateDependent){var p=i.paint.get(h);d.expression=p.value,d.updatePaintArray(l.start,l.end,u,t[a],r),o=!0}}}return o},Lo.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof Oo||n instanceof Mo)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Lo.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof So||n instanceof ko)for(var i=0;i<n.paintVertexAttributes.length;i++)t.push(n.paintVertexAttributes[i].name);else if(n instanceof Eo)for(var r=0;r<so.members.length;r++)t.push(so.members[r].name)}return t},Lo.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Oo||n instanceof Mo||n instanceof ko)for(var i=0,r=n.uniformNames;i<r.length;i+=1)t.push(r[i])}return t},Lo.prototype.getPaintVertexBuffers=function(){return this._buffers},Lo.prototype.getUniforms=function(t,e){var n=[];for(var i in this.binders){var r=this.binders[i];if(r instanceof Oo||r instanceof Mo||r instanceof ko)for(var o=0,a=r.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var c=r.getBinding(t,e[s],s);n.push({name:s,property:i,binding:c})}}}return n},Lo.prototype.setUniforms=function(t,e,n,i){for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.name,c=a.property;this.binders[c].setUniform(a.binding,i,n.get(c),s)}},Lo.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Eo){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof So||n instanceof ko)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Lo.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof So||n instanceof ko||n instanceof Eo)&&n.upload(t)}this.updatePaintBuffers()},Lo.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof So||e instanceof ko||e instanceof Eo)&&e.destroy()}};var To=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,r=t;i<r.length;i+=1){var o=r[i];this.programConfigurations[o.id]=new Lo(o,e,n)}this.needsUpload=!1,this._featureMap=new po,this._bufferOffset=0};function Ro(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function No(t,e,n){var i={color:{source:kr,composite:$r},number:{source:Gr,composite:kr}},r=function(t){return{"line-pattern":{source:Er,composite:Er},"fill-pattern":{source:Er,composite:Er},"fill-extrusion-pattern":{source:Er,composite:Er}}[t]}(t);return r&&r[n]||i[e][n]}To.prototype.populatePaintArrays=function(t,e,n,i,r,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},To.prototype.updatePaintArrays=function(t,e,n,i){for(var r=0,o=n;r<o.length;r+=1){var a=o[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},To.prototype.get=function(t){return this.programConfigurations[t]},To.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},To.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Bi("ConstantBinder",Oo),Bi("CrossFadedConstantBinder",Mo),Bi("SourceExpressionBinder",So),Bi("CrossFadedCompositeBinder",Eo),Bi("CompositeExpressionBinder",ko),Bi("ProgramConfiguration",Lo,{omit:["_buffers"]}),Bi("ProgramConfigurationSet",To);var Bo=Math.pow(2,14)-1,jo=-Bo-1;function Do(t){for(var e=8192/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.length;o++){var a=r[o],s=Math.round(a.x*e),c=Math.round(a.y*e);a.x=u(s,jo,Bo),a.y=u(c,jo,Bo),(s<a.x||s>a.x+1||c<a.y||c>a.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Fo(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var zo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pr,this.indexArray=new Fr,this.segments=new oo,this.programConfigurations=new To(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Vo(t,e){for(var n=0;n<t.length;n++)if(Yo(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(Yo(t,e[i]))return!0;return!!Ho(t,e)}function Go(t,e,n){return!!Yo(t,e)||!!$o(e,t,n)}function Zo(t,e){if(1===t.length)return Xo(e,t[0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(Yo(t,i[r]))return!0;for(var o=0;o<t.length;o++)if(Xo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Ho(t,e[a]))return!0;return!1}function Wo(t,e,n){if(t.length>1){if(Ho(t,e))return!0;for(var i=0;i<e.length;i++)if($o(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if($o(t[r],e,n))return!0;return!1}function Ho(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],o=0;o<e.length-1;o++)if(Uo(i,r,e[o],e[o+1]))return!0;return!1}function Uo(t,e,n,i){return I(t,n,i)!==I(e,n,i)&&I(t,e,n)!==I(t,e,i)}function $o(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(Ko(t,e[r-1],e[r])<i)return!0;return!1}function Ko(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function Xo(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++)for(var s=0,c=(n=t[a]).length-1;s<n.length;c=s++)(i=n[s]).y>e.y!=(r=n[c]).y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o);return o}function Yo(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function qo(t,e,n){var i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;var o=I(t,e,n[0]);return o!==I(t,e,n[1])||o!==I(t,e,n[2])||o!==I(t,e,n[3])}function Jo(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Qo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ta(t,e,n,i,o){if(!e[0]&&!e[1])return t;var a=r.convert(e)._mult(o);"viewport"===n&&a._rotate(-i);for(var s=[],c=0;c<t.length;c++)s.push(t[c].sub(a));return s}zo.prototype.populate=function(t,e,n){var i=this.layers[0],r=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var c=s[a],l=c.feature,u=c.id,h=c.index,d=c.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,f={type:l.type,id:u,properties:l.properties,geometry:p?Do(l):[]};if(this.layers[0]._featureFilter.filter(new or(this.zoom),f,n)){p||(f.geometry=Do(l));var g=o?o.evaluate(f,{},n):void 0;r.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:d,index:h,geometry:f.geometry,patterns:{},sortKey:g})}}o&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,v=r;m<v.length;m+=1){var y=v[m],b=y.geometry,_=y.index,C=y.sourceLayerIndex,x=t[_].feature;this.addFeature(y,b,_,n),e.featureIndex.insert(x,b,_,C,this.index)}},zo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},zo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ro),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},zo.prototype.addFeature=function(t,e,n,i){for(var r=0,o=e;r<o.length;r+=1)for(var a=0,s=o[r];a<s.length;a+=1){var c=s[a],l=c.x,u=c.y;if(!(l<0||l>=8192||u<0||u>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),d=h.vertexLength;Fo(this.layoutVertexArray,l,u,-1,-1),Fo(this.layoutVertexArray,l,u,1,-1),Fo(this.layoutVertexArray,l,u,1,1),Fo(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)},Bi("CircleBucket",zo,{omit:["layers"]});var ea=new br({"circle-sort-key":new gr(Ot.layout_circle["circle-sort-key"])}),na={paint:new br({"circle-radius":new gr(Ot.paint_circle["circle-radius"]),"circle-color":new gr(Ot.paint_circle["circle-color"]),"circle-blur":new gr(Ot.paint_circle["circle-blur"]),"circle-opacity":new gr(Ot.paint_circle["circle-opacity"]),"circle-translate":new fr(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new fr(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fr(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fr(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gr(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gr(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gr(Ot.paint_circle["circle-stroke-opacity"])}),layout:ea},ia="undefined"!=typeof Float32Array?Float32Array:Array;function ra(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oa(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],_=n[1],C=n[2],x=n[3];return t[0]=b*i+_*s+C*h+x*g,t[1]=b*r+_*c+C*d+x*m,t[2]=b*o+_*l+C*p+x*v,t[3]=b*a+_*u+C*f+x*y,t[4]=(b=n[4])*i+(_=n[5])*s+(C=n[6])*h+(x=n[7])*g,t[5]=b*r+_*c+C*d+x*m,t[6]=b*o+_*l+C*p+x*v,t[7]=b*a+_*u+C*f+x*y,t[8]=(b=n[8])*i+(_=n[9])*s+(C=n[10])*h+(x=n[11])*g,t[9]=b*r+_*c+C*d+x*m,t[10]=b*o+_*l+C*p+x*v,t[11]=b*a+_*u+C*f+x*y,t[12]=(b=n[12])*i+(_=n[13])*s+(C=n[14])*h+(x=n[15])*g,t[13]=b*r+_*c+C*d+x*m,t[14]=b*o+_*l+C*p+x*v,t[15]=b*a+_*u+C*f+x*y,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var aa,sa=oa;function ca(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}aa=new ia(3),ia!=Float32Array&&(aa[0]=0,aa[1]=0,aa[2]=0),function(){var t=new ia(4);ia!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var la=(function(){var t=new ia(2);ia!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,na)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new zo(t)},e.prototype.queryRadius=function(t){var e=t;return Jo("circle-radius",this,e)+Jo("circle-stroke-width",this,e)+Qo(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a,s){for(var c=ta(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?c:function(t,e){return t.map((function(t){return ua(t,e)}))}(c,s),d=u?l*a:l,p=0,f=i;p<f.length;p+=1)for(var g=0,m=f[p];g<m.length;g+=1){var v=m[g],y=u?v:ua(v,s),b=d,_=ca([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),Go(h,y,b))return!0}return!1},e}(_r));function ua(t,e){var n=ca([],[t.x,t.y,0,1],e);return new r(n[0]/n[3],n[1]/n[3])}var ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(zo);function da(t,e,n,i){var r=e.width,o=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*o*n);return t.width=r,t.height=o,t.data=i,t}function pa(t,e,n){var i=e.width,r=e.height;if(i!==t.width||r!==t.height){var o=da({},{width:i,height:r},n);fa(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=o.data}}function fa(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,c=0;c<r.height;c++)for(var l=((n.y+c)*t.width+n.x)*o,u=((i.y+c)*e.width+i.x)*o,h=0;h<r.width*o;h++)s[u+h]=a[l+h];return e}Bi("HeatmapBucket",ha,{omit:["layers"]});var ga=function(t,e){da(this,t,1,e)};ga.prototype.resize=function(t){pa(this,t,1)},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(t,e,n,i,r){fa(t,e,n,i,r,1)};var ma=function(t,e){da(this,t,4,e)};ma.prototype.resize=function(t){pa(this,t,4)},ma.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},ma.prototype.clone=function(){return new ma({width:this.width,height:this.height},new Uint8Array(this.data))},ma.copy=function(t,e,n,i,r){fa(t,e,n,i,r,4)},Bi("AlphaImage",ga),Bi("RGBAImage",ma);var va={paint:new br({"heatmap-radius":new gr(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gr(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fr(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yr(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fr(Ot.paint_heatmap["heatmap-opacity"])})};function ya(t){var e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new ma({width:n,height:i}),o=function(n,i,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*a.r/a.a),r.data[n+i+1]=Math.floor(255*a.g/a.a),r.data[n+i+2]=Math.floor(255*a.b/a.a),r.data[n+i+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<i;++a,s+=4*n)for(var c=0,l=0;c<n;c++,l+=4){var u=c/(n-1),h=t.clips[a];o(s,l,h.start*(1-u)+h.end*u)}else for(var d=0,p=0;d<n;d++,p+=4)o(0,p,d/(n-1));return r}var ba=function(t){function e(e){t.call(this,e,va),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ha(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=ya({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(_r),_a={paint:new br({"hillshade-illumination-direction":new fr(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fr(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fr(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fr(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fr(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fr(Ot.paint_hillshade["hillshade-accent-color"])})},Ca=function(t){function e(e){t.call(this,e,_a)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(_r),xa=Ir([{name:"a_pos",components:2,type:"Int16"}],4).members,wa=Aa,Ia=Aa;function Aa(t,e,n){n=n||2;var i,r,o,a,s,c,l,u=e&&e.length,h=u?e[0]*n:t.length,d=Pa(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Pa(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(ja(a));for(s.sort(Ta),r=0;r<s.length;r++)Ra(s[r],n),n=Oa(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(c=t[f+1])<r&&(r=c),s>o&&(o=s),c>a&&(a=c);l=0!==(l=Math.max(o-i,a-r))?1/l:0}return Ma(d,p,n,i,r,l),p}function Pa(t,e,n,i,r){var o,a;if(r===Ya(t,e,n,i)>0)for(o=e;o<n;o+=i)a=$a(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=$a(o,t[o],t[o+1],a);return a&&Va(a,a.next)&&(Ka(a),a=a.next),a}function Oa(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Va(i,i.next)&&0!==za(i.prev,i,i.next))i=i.next;else{if(Ka(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ma(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Ba(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(t,i,r,o);for(var s,c,l=t;t.prev!==t.next;)if(s=t.prev,c=t.next,o?ka(t,i,r,o):Sa(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),Ka(t),t=c.next,l=c.next;else if((t=c)===l){a?1===a?Ma(t=Ea(Oa(t),e,n),e,n,i,r,o,2):2===a&&La(t,e,n,i,r,o):Ma(Oa(t),e,n,i,r,o,1);break}}}function Sa(t){var e=t.prev,n=t,i=t.next;if(za(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Da(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&za(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ka(t,e,n,i){var r=t.prev,o=t,a=t.next;if(za(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,l=Ba(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),u=Ba(s,c,e,n,i),h=t.prevZ,d=t.nextZ;h&&h.z>=l&&d&&d.z<=u;){if(h!==t.prev&&h!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&za(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&za(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&za(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&za(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ea(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Va(r,o)&&Ga(r,i,i.next,o)&&Ha(r,o)&&Ha(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Ka(i),Ka(i.next),i=t=o),i=i.next}while(i!==t);return Oa(i)}function La(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Fa(a,s)){var c=Ua(a,s);return a=Oa(a,a.next),c=Oa(c,c.next),Ma(a,e,n,i,r,o),void Ma(c,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function Ta(t,e){return t.x-e.x}function Ra(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var c,l=n,u=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&Da(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(r-i.x),Ha(i,t)&&(c<d||c===d&&(i.x>n.x||i.x===n.x&&Na(n,i)))&&(n=i,d=c)),i=i.next}while(i!==l);return n}(t,e)){var n=Ua(e,t);Oa(e,e.next),Oa(n,n.next)}}function Na(t,e){return za(t.prev,t,e.prev)<0&&za(e.next,t,t.next)<0}function Ba(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ja(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Da(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function Fa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ga(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ha(t,e)&&Ha(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(za(t.prev,t,e.prev)||za(t,e.prev,e))||Va(t,e)&&za(t.prev,t,t.next)>0&&za(e.prev,e,e.next)>0)}function za(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Va(t,e){return t.x===e.x&&t.y===e.y}function Ga(t,e,n,i){var r=Wa(za(t,e,n)),o=Wa(za(t,e,i)),a=Wa(za(n,i,t)),s=Wa(za(n,i,e));return r!==o&&a!==s||!(0!==r||!Za(t,n,e))||!(0!==o||!Za(t,i,e))||!(0!==a||!Za(n,t,i))||!(0!==s||!Za(n,e,i))}function Za(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Wa(t){return t>0?1:t<0?-1:0}function Ha(t,e){return za(t.prev,t,t.next)<0?za(t,e,t.next)>=0&&za(t,t.prev,e)>=0:za(t,e,t.prev)<0||za(t,t.next,e)<0}function Ua(t,e){var n=new Xa(t.i,t.x,t.y),i=new Xa(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function $a(t,e,n,i){var r=new Xa(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ka(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ya(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function qa(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*l/a+u)),Math.min(r,Math.floor(n+(a-s)*l/a+u)),o)}var h=e[n],d=i,p=r;for(Ja(e,i,n),o(e[r],h)>0&&Ja(e,i,r);d<p;){for(Ja(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;o(e[p],h)>0;)p--}0===o(e[i],h)?Ja(e,i,p):Ja(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||Qa)}function Ja(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Qa(t,e){return t<e?-1:t>e?1:0}function ts(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,o=[],a=0;a<n;a++){var s=A(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),e>1)for(var c=0;c<o.length;c++)o[c].length<=e||(qa(o[c],e,1,o[c].length-1,es),o[c]=o[c].slice(0,e));return o}function es(t,e){return e.area-t.area}function ns(t,e,n){for(var i=n.patternDependencies,r=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(r=!0);var c=s.constantOr(null);c&&(r=!0,i[c.to]=!0,i[c.from]=!0)}return r}function is(t,e,n,i,r){for(var o=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var c=s[a],l=c.paint.get(t+"-pattern").value;if("constant"!==l.kind){var u=l.evaluate({zoom:i-1},n,{},r.availableImages),h=l.evaluate({zoom:i},n,{},r.availableImages),d=l.evaluate({zoom:i+1},n,{},r.availableImages);h=h&&h.name?h.name:h,d=d&&d.name?d.name:d,o[u=u&&u.name?u.name:u]=!0,o[h]=!0,o[d]=!0,n.patterns[c.id]={min:u,mid:h,max:d}}}return n}Aa.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(Ya(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ya(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var c=0;for(a=0;a<i.length;a+=3){var l=i[a]*n,u=i[a+1]*n,h=i[a+2]*n;c+=Math.abs((t[l]-t[h])*(t[u+1]-t[l+1])-(t[l]-t[u])*(t[h+1]-t[l+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},wa.default=Ia;var rs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pr,this.indexArray=new Fr,this.indexArray2=new Hr,this.programConfigurations=new To(t.layers,t.zoom),this.segments=new oo,this.segments2=new oo,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};rs.prototype.populate=function(t,e,n){this.hasPattern=ns("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],c=s.feature,l=s.id,u=s.index,h=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p={type:c.type,id:l,properties:c.properties,geometry:d?Do(c):[]};if(this.layers[0]._featureFilter.filter(new or(this.zoom),p,n)){d||(p.geometry=Do(c));var f=i?i.evaluate(p,{},n,e.availableImages):void 0;r.push({id:l,properties:c.properties,type:c.type,sourceLayerIndex:h,index:u,geometry:p.geometry,patterns:{},sortKey:f})}}i&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,m=r;g<m.length;g+=1){var v=m[g],y=v.geometry,b=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var C=is("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(C)}else this.addFeature(v,y,b,n,{});e.featureIndex.insert(t[b].feature,y,b,_,this.index)}},rs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},rs.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.patternFeatures;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xa),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},rs.prototype.addFeature=function(t,e,n,i,r){for(var o=0,a=ts(e,500);o<a.length;o+=1){for(var s=a[o],c=0,l=0,u=s;l<u.length;l+=1)c+=u[l].length;for(var h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),d=h.vertexLength,p=[],f=[],g=0,m=s;g<m.length;g+=1){var v=m[g];if(0!==v.length){v!==s[0]&&f.push(p.length/2);var y=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),b=y.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(b+v.length-1,b),p.push(v[0].x),p.push(v[0].y);for(var _=1;_<v.length;_++)this.layoutVertexArray.emplaceBack(v[_].x,v[_].y),this.indexArray2.emplaceBack(b+_-1,b+_),p.push(v[_].x),p.push(v[_].y);y.vertexLength+=v.length,y.primitiveLength+=v.length}}for(var C=wa(p,f),x=0;x<C.length;x+=3)this.indexArray.emplaceBack(d+C[x],d+C[x+1],d+C[x+2]);h.vertexLength+=c,h.primitiveLength+=C.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},Bi("FillBucket",rs,{omit:["layers","patternFeatures"]});var os=new br({"fill-sort-key":new gr(Ot.layout_fill["fill-sort-key"])}),as={paint:new br({"fill-antialias":new fr(Ot.paint_fill["fill-antialias"]),"fill-opacity":new gr(Ot.paint_fill["fill-opacity"]),"fill-color":new gr(Ot.paint_fill["fill-color"]),"fill-outline-color":new gr(Ot.paint_fill["fill-outline-color"]),"fill-translate":new fr(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new fr(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new mr(Ot.paint_fill["fill-pattern"])}),layout:os},ss=function(t){function e(e){t.call(this,e,as)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new rs(t)},e.prototype.queryRadius=function(){return Qo(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){return Zo(ta(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(_r),cs=Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ls=us;function us(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(hs,this,e)}function hs(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function ds(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)i+=((n=t[a]).x-(e=t[r]).x)*(e.y+n.y);return i}us.types=["Unknown","Point","LineString","Polygon"],us.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,c=[];t.pos<n;){if(o<=0){var l=t.readVarint();i=7&l,o=l>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&c.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&c.push(e),c},us.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,c=1/0,l=-1/0;t.pos<e;){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<c&&(c=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,c,s,l]},us.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,c=this.loadGeometry(),l=us.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<c.length;i++)h[i]=c[i][0];u(c=h);break;case 2:for(i=0;i<c.length;i++)u(c[i]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=ds(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(c),i=0;i<c.length;i++)for(r=0;r<c[i].length;r++)u(c[i][r])}1===c.length?c=c[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:c},properties:this.properties};return"id"in this&&(d.id=this.id),d};var ps=fs;function fs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gs,this,e),this.length=this._features.length}function gs(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function ms(t,e,n){if(3===t){var i=new ps(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}fs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ls(this._pbf,e,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(ms,{},e)},VectorTileFeature:ls,VectorTileLayer:ps},ys=vs.VectorTileFeature.types,bs=Math.pow(2,13);function _s(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*bs)+a,r*bs*2,o*bs*2,Math.round(s))}var Cs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Mr,this.indexArray=new Fr,this.programConfigurations=new To(t.layers,t.zoom),this.segments=new oo,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function xs(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Cs.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=ns("fill-extrusion",this.layers,e);for(var i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.id,c=o.index,l=o.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,h={type:a.type,id:s,properties:a.properties,geometry:u?Do(a):[]};if(this.layers[0]._featureFilter.filter(new or(this.zoom),h,n)){var d={id:s,sourceLayerIndex:l,index:c,geometry:u?h.geometry:Do(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(is("fill-extrusion",this.layers,d,this.zoom,e)):this.addFeature(d,d.geometry,c,n,{}),e.featureIndex.insert(a,d.geometry,c,l,this.index,!0)}}},Cs.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.features;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},Cs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Cs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,cs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cs.prototype.addFeature=function(t,e,n,i,r){for(var o=0,a=ts(e,500);o<a.length;o+=1){for(var s=a[o],c=0,l=0,u=s;l<u.length;l+=1)c+=u[l].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=0,p=s;d<p.length;d+=1){var f=p[d];if(0!==f.length&&!((L=f).every((function(t){return t.x<0}))||L.every((function(t){return t.x>8192}))||L.every((function(t){return t.y<0}))||L.every((function(t){return t.y>8192}))))for(var g=0,m=0;m<f.length;m++){var v=f[m];if(m>=1){var y=f[m-1];if(!xs(v,y)){h.vertexLength+4>oo.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var b=v.sub(y)._perp()._unit(),_=y.dist(v);g+_>32768&&(g=0),_s(this.layoutVertexArray,v.x,v.y,b.x,b.y,0,0,g),_s(this.layoutVertexArray,v.x,v.y,b.x,b.y,0,1,g),_s(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,0,g+=_),_s(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,1,g);var C=h.vertexLength;this.indexArray.emplaceBack(C,C+2,C+1),this.indexArray.emplaceBack(C+1,C+2,C+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+c>oo.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray)),"Polygon"===ys[t.type]){for(var x=[],w=[],I=h.vertexLength,A=0,P=s;A<P.length;A+=1){var O=P[A];if(0!==O.length){O!==s[0]&&w.push(x.length/2);for(var M=0;M<O.length;M++){var S=O[M];_s(this.layoutVertexArray,S.x,S.y,0,0,1,1,0),x.push(S.x),x.push(S.y)}}}for(var k=wa(x,w),E=0;E<k.length;E+=3)this.indexArray.emplaceBack(I+k[E],I+k[E+2],I+k[E+1]);h.primitiveLength+=k.length/3,h.vertexLength+=c}}var L;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},Bi("FillExtrusionBucket",Cs,{omit:["layers","features"]});var ws={paint:new br({"fill-extrusion-opacity":new fr(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gr(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fr(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fr(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mr(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gr(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gr(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fr(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Is=function(t){function e(e){t.call(this,e,ws)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Cs(t)},e.prototype.queryRadius=function(){return Qo(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s,c){var l=ta(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),d=function(t,e,n,i){for(var o=[],a=0,s=t;a<s.length;a+=1){var c=s[a],l=[c.x,c.y,0,1];ca(l,l,e),o.push(new r(l[0]/l[3],l[1]/l[3]))}return o}(l,c),p=function(t,e,n,i){for(var o=[],a=[],s=i[8]*e,c=i[9]*e,l=i[10]*e,u=i[11]*e,h=i[8]*n,d=i[9]*n,p=i[10]*n,f=i[11]*n,g=0,m=t;g<m.length;g+=1){for(var v=[],y=[],b=0,_=m[g];b<_.length;b+=1){var C=_[b],x=C.x,w=C.y,I=i[0]*x+i[4]*w+i[12],A=i[1]*x+i[5]*w+i[13],P=i[2]*x+i[6]*w+i[14],O=i[3]*x+i[7]*w+i[15],M=P+l,S=O+u,k=I+h,E=A+d,L=P+p,T=O+f,R=new r((I+s)/S,(A+c)/S);R.z=M/S,v.push(R);var N=new r(k/T,E/T);N.z=L/T,y.push(N)}o.push(v),a.push(y)}return[o,a]}(i,h,u,c);return function(t,e,n){var i=1/0;Zo(n,e)&&(i=Ps(n,e[0]));for(var r=0;r<e.length;r++)for(var o=e[r],a=t[r],s=0;s<o.length-1;s++){var c=o[s],l=[c,o[s+1],a[s+1],a[s],c];Vo(n,l)&&(i=Math.min(i,Ps(n,l)))}return i!==1/0&&i}(p[0],p[1],d)},e}(_r);function As(t,e){return t.x*e.x+t.y*e.y}function Ps(t,e){if(1===t.length){for(var n,i=0,r=e[i++];!n||r.equals(n);)if(!(n=e[i++]))return 1/0;for(;i<e.length;i++){var o=e[i],a=t[0],s=n.sub(r),c=o.sub(r),l=a.sub(r),u=As(s,s),h=As(s,c),d=As(c,c),p=As(l,s),f=As(l,c),g=u*d-h*h,m=(d*p-h*f)/g,v=(u*f-h*p)/g,y=r.z*(1-m-v)+n.z*m+o.z*v;if(isFinite(y))return y}return 1/0}for(var b=1/0,_=0,C=e;_<C.length;_+=1)b=Math.min(b,C[_].z);return b}var Os=Ir([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ms=Ir([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ss=vs.VectorTileFeature.types,ks=Math.cos(Math.PI/180*37.5),Es=Math.pow(2,14)/.5,Ls=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Sr,this.layoutVertexArray2=new kr,this.indexArray=new Fr,this.programConfigurations=new To(t.layers,t.zoom),this.segments=new oo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ls.prototype.populate=function(t,e,n){this.hasPattern=ns("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],c=s.feature,l=s.id,u=s.index,h=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p={type:c.type,id:l,properties:c.properties,geometry:d?Do(c):[]};if(this.layers[0]._featureFilter.filter(new or(this.zoom),p,n)){d||(p.geometry=Do(c));var f=i?i.evaluate(p,{},n):void 0;r.push({id:l,properties:c.properties,type:c.type,sourceLayerIndex:h,index:u,geometry:p.geometry,patterns:{},sortKey:f})}}i&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,m=r;g<m.length;g+=1){var v=m[g],y=v.geometry,b=v.index,_=v.sourceLayerIndex;if(this.hasPattern){var C=is("line",this.layers,v,this.zoom,e);this.patternFeatures.push(C)}else this.addFeature(v,y,b,n,{});e.featureIndex.insert(t[b].feature,y,b,_,this.index)}},Ls.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ls.prototype.addFeatures=function(t,e,n){for(var i=0,r=this.patternFeatures;i<r.length;i+=1){var o=r[i];this.addFeature(o,o.geometry,o.index,e,n)}},Ls.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ls.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ls.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ms)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Os),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ls.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ls.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ls.prototype.addFeature=function(t,e,n,i,r){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),c=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var u=0,h=e;u<h.length;u+=1)this.addLine(h[u],t,a,s,c,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)},Ls.prototype.addLine=function(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ss[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var l=0;l<c-1&&t[l].equals(t[l+1]);)l++;if(!(c<(s?3:2))){"bevel"===n&&(r=1.05);var u,h=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),p=void 0,f=void 0,g=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=t[l].sub(u=t[c-2])._unit()._perp());for(var v=l;v<c;v++)if(!(f=v===c-1?s?t[l+1]:void 0:t[v+1])||!t[v].equals(f)){m&&(g=m),u&&(p=u),u=t[v],m=f?f.sub(u)._unit()._perp():g;var y=(g=g||m).add(m);0===y.x&&0===y.y||y._unit();var b=g.x*m.x+g.y*m.y,_=y.x*m.x+y.y*m.y,C=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),w=_<ks&&p&&f,I=g.x*m.y-g.y*m.x>0;if(w&&v>l){var A=u.dist(p);if(A>2*h){var P=u.sub(u.sub(p)._mult(h/A)._round());this.updateDistance(p,P),this.addCurrentVertex(P,g,0,0,d),p=P}}var O=p&&f,M=O?n:s?"butt":i;if(O&&"round"===M&&(C<o?M="miter":C<=2&&(M="fakeround")),"miter"===M&&C>r&&(M="bevel"),"bevel"===M&&(C>2&&(M="flipbevel"),C<r&&(M="miter")),p&&this.updateDistance(p,u),"miter"===M)y._mult(C),this.addCurrentVertex(u,y,0,0,d);else if("flipbevel"===M){if(C>100)y=m.mult(-1);else{var S=C*g.add(m).mag()/g.sub(m).mag();y._perp()._mult(S*(I?-1:1))}this.addCurrentVertex(u,y,0,0,d),this.addCurrentVertex(u,y.mult(-1),0,0,d)}else if("bevel"===M||"fakeround"===M){var k=-Math.sqrt(C*C-1),E=I?k:0,L=I?0:k;if(p&&this.addCurrentVertex(u,g,E,L,d),"fakeround"===M)for(var T=Math.round(180*x/Math.PI/20),R=1;R<T;R++){var N=R/T;if(.5!==N){var B=N-.5;N+=N*B*(N-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*B*B+(.848013+b*(.215638*b-1.06021)))}var j=m.sub(g)._mult(N)._add(g)._unit()._mult(I?-1:1);this.addHalfVertex(u,j.x,j.y,!1,I,0,d)}f&&this.addCurrentVertex(u,m,-E,-L,d)}else if("butt"===M)this.addCurrentVertex(u,y,0,0,d);else if("square"===M){var D=p?1:-1;this.addCurrentVertex(u,y,D,D,d)}else"round"===M&&(p&&(this.addCurrentVertex(u,g,0,0,d),this.addCurrentVertex(u,g,1,1,d,!0)),f&&(this.addCurrentVertex(u,m,-1,-1,d,!0),this.addCurrentVertex(u,m,0,0,d)));if(w&&v<c-1){var F=u.dist(f);if(F>2*h){var z=u.add(f.sub(u)._mult(h/F)._round());this.updateDistance(u,z),this.addCurrentVertex(z,m,0,0,d),u=z}}}}},Ls.prototype.addCurrentVertex=function(t,e,n,i,r,o){void 0===o&&(o=!1);var a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,r),this.addHalfVertex(t,a,s,o,!0,-i,r),this.distance>Es/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,i,r,o))},Ls.prototype.addHalfVertex=function(t,e,n,i,r,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Es-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(i?1:0),(t.y<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),r?this.e2=c:this.e1=c},Ls.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ls.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Bi("LineBucket",Ls,{omit:["layers","patternFeatures"]});var Ts=new br({"line-cap":new fr(Ot.layout_line["line-cap"]),"line-join":new gr(Ot.layout_line["line-join"]),"line-miter-limit":new fr(Ot.layout_line["line-miter-limit"]),"line-round-limit":new fr(Ot.layout_line["line-round-limit"]),"line-sort-key":new gr(Ot.layout_line["line-sort-key"])}),Rs={paint:new br({"line-opacity":new gr(Ot.paint_line["line-opacity"]),"line-color":new gr(Ot.paint_line["line-color"]),"line-translate":new fr(Ot.paint_line["line-translate"]),"line-translate-anchor":new fr(Ot.paint_line["line-translate-anchor"]),"line-width":new gr(Ot.paint_line["line-width"]),"line-gap-width":new gr(Ot.paint_line["line-gap-width"]),"line-offset":new gr(Ot.paint_line["line-offset"]),"line-blur":new gr(Ot.paint_line["line-blur"]),"line-dasharray":new vr(Ot.paint_line["line-dasharray"]),"line-pattern":new mr(Ot.paint_line["line-pattern"]),"line-gradient":new yr(Ot.paint_line["line-gradient"])}),layout:Ts},Ns=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new or(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,r){return n=d({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,r)},e}(gr))(Rs.paint.properties["line-width"].specification);Ns.useIntegerZoom=!0;var Bs=function(t){function e(e){t.call(this,e,Rs),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ve,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Ns.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ls(t)},e.prototype.queryRadius=function(t){var e=t,n=js(Jo("line-width",this,e),Jo("line-gap-width",this,e)),i=Jo("line-offset",this,e);return n/2+Math.abs(i)+Qo(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s){var c=ta(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*js(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(i=function(t,e){for(var n=[],i=new r(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],c=0;c<a.length;c++){var l=a[c],u=a[c+1],h=0===c?i:l.sub(a[c-1])._unit()._perp(),d=c===a.length-1?i:u.sub(l)._unit()._perp(),p=h._add(d)._unit();p._mult(1/(p.x*d.x+p.y*d.y)),s.push(p._mult(e)._add(l))}n.push(s)}return n}(i,u*s)),function(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.length>=3)for(var o=0;o<r.length;o++)if(Yo(t,r[o]))return!0;if(Wo(t,r,n))return!0}return!1}(c,i,l)},e.prototype.isTileClipped=function(){return!0},e}(_r);function js(t,e){return e>0?e+2*t:t}var Ds=Ir([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fs=Ir([{name:"a_projected_pos",components:3,type:"Float32"}],4),zs=(Ir([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ir([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Vs=(Ir([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gs=Ir([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zs(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),rr.applyArabicShaping&&(t=rr.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ir([{name:"triangle",components:3,type:"Uint16"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ir([{type:"Float32",name:"offsetX"}]),Ir([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ws={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Hs=function(t,e,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},Us=function(t,e,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*c-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*g},$s=Ks;function Ks(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Ks.Varint=0,Ks.Fixed64=1,Ks.Bytes=2,Ks.Fixed32=5;var Xs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ys(t){return t.type===Ks.Bytes?t.readVarint()+t.pos:t.pos+1}function qs(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Js(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Qs(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function tc(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ec(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function nc(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ic(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function rc(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function oc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function ac(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function sc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function cc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function lc(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function uc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function hc(t,e,n){1===t&&n.readMessage(dc,e)}function dc(t,e,n){if(3===t){var i=n.readMessage(pc,{}),r=i.width,o=i.height,a=i.left,s=i.top,c=i.advance;e.push({id:i.id,bitmap:new ga({width:r+6,height:o+6},i.bitmap),metrics:{width:r,height:o,left:a,top:s,advance:c}})}}function pc(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function fc(t){for(var e=0,n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,c=0,l=0,u=t;l<u.length;l+=1)for(var h=u[l],d=a.length-1;d>=0;d--){var p=a[d];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,c=Math.max(c,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===p.w&&h.h===p.h){var f=a.pop();d<a.length&&(a[d]=f)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(a.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}return{w:s,h:c,fill:e/(s*c)||0}}Ks.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=cc(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=uc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=cc(this.buf,this.pos)+4294967296*cc(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=cc(this.buf,this.pos)+4294967296*uc(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Hs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Hs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return qs(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return qs(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return qs(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return qs(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return qs(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return qs(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Xs?function(t,e,n){return Xs.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,c=t[r],l=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u>n)break;1===u?c<128&&(l=c):2===u?128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)<=127&&(l=null):3===u?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((l=(15&c)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=u}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Ks.Bytes)return t.push(this.readVarint(e));var n=Ys(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Ks.Bytes)return t.push(this.readSVarint());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Ks.Bytes)return t.push(this.readBoolean());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Ks.Bytes)return t.push(this.readFloat());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Ks.Bytes)return t.push(this.readDouble());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Ks.Bytes)return t.push(this.readFixed32());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Ks.Bytes)return t.push(this.readSFixed32());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Ks.Bytes)return t.push(this.readFixed64());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Ks.Bytes)return t.push(this.readSFixed64());var e=Ys(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ks.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ks.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ks.Fixed32)this.pos+=4;else{if(e!==Ks.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),lc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),lc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),lc(this.buf,-1&t,this.pos),lc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),lc(this.buf,-1&t,this.pos),lc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Js(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Us(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Us(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Js(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Ks.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,tc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ic,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ec,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,nc,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,rc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,oc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,ac,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,sc,e)},writeBytesField:function(t,e){this.writeTag(t,Ks.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ks.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ks.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ks.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ks.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ks.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ks.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ks.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ks.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ks.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gc=function(t,e){var n=e.pixelRatio,i=e.version,r=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=a,this.version=i},mc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mc.tlbr.get=function(){return this.tl.concat(this.br)},mc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gc.prototype,mc);var vc=function(t,e){var n={},i={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,n,r),this.addImages(e,i,r);var o=fc(r),a=new ma({width:o.w||1,height:o.h||1});for(var s in t){var c=t[s],l=n[s].paddedRect;ma.copy(c.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},c.data)}for(var u in e){var h=e[u],d=i[u].paddedRect,p=d.x+1,f=d.y+1,g=h.data.width,m=h.data.height;ma.copy(h.data,a,{x:0,y:0},{x:p,y:f},h.data),ma.copy(h.data,a,{x:0,y:m-1},{x:p,y:f-1},{width:g,height:1}),ma.copy(h.data,a,{x:0,y:0},{x:p,y:f+m},{width:g,height:1}),ma.copy(h.data,a,{x:g-1,y:0},{x:p-1,y:f},{width:1,height:m}),ma.copy(h.data,a,{x:0,y:0},{x:p+g,y:f},{width:1,height:m})}this.image=a,this.iconPositions=n,this.patternPositions=i};vc.prototype.addImages=function(t,e,n){for(var i in t){var r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new gc(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},vc.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},vc.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl;n.update(e.data,void 0,{x:i[0],y:i[1]})}},Bi("ImagePosition",gc),Bi("ImageAtlas",vc);var yc={horizontal:1,vertical:2,horizontalOnly:3},bc=function(){this.scale=1,this.fontStack="",this.imageName=null};bc.forText=function(t,e){var n=new bc;return n.scale=t||1,n.fontStack=e,n},bc.forImage=function(t){var e=new bc;return e.imageName=t,e};var _c=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Cc(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g){var m,v=_c.fromFeature(t,r);h===yc.vertical&&v.verticalizePunctuation();var y=rr.processBidirectionalText,b=rr.processStyledBidirectionalText;if(y&&1===v.sections.length){m=[];for(var _=0,C=y(v.toString(),Mc(v,l,o,e,i,p,f));_<C.length;_+=1){var x=C[_],w=new _c;w.text=x,w.sections=v.sections;for(var I=0;I<x.length;I++)w.sectionIndex.push(0);m.push(w)}}else if(b){m=[];for(var A=0,P=b(v.text,v.sectionIndex,Mc(v,l,o,e,i,p,f));A<P.length;A+=1){var O=P[A],M=new _c;M.text=O[0],M.sectionIndex=O[1],M.sections=v.sections,m.push(M)}}else m=function(t,e){for(var n=[],i=t.text,r=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(r,s)),r=s}return r<i.length&&n.push(t.substring(r,i.length)),n}(v,Mc(v,l,o,e,i,p,f));var S=[],k={positionedLines:S,text:v.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,i,r,o,a,s,c,l,u,h){for(var d=0,p=-17,f=0,g=0,m="right"===s?1:"left"===s?0:.5,v=0,y=0,b=r;y<b.length;y+=1){var _=b[y];_.trim();var C=_.getMaxScale(),x=24*(C-1),w={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=w;var I=w.positionedGlyphs,A=0;if(_.length()){for(var P=0;P<_.length();P++){var O=_.getSection(P),M=_.getSectionIndex(P),S=_.getCharCode(P),k=0,E=null,L=null,T=null,R=24,N=!(c===yc.horizontal||!u&&!Hi(S)||u&&(xc[S]||(W=S,Zi.Arabic(W)||Zi["Arabic Supplement"](W)||Zi["Arabic Extended-A"](W)||Zi["Arabic Presentation Forms-A"](W)||Zi["Arabic Presentation Forms-B"](W))));if(O.imageName){var B=i[O.imageName];if(!B)continue;T=O.imageName,t.iconsInText=t.iconsInText||!0,L=B.paddedRect;var j=B.displaySize;O.scale=24*O.scale/h,k=x+(24-j[1]*O.scale),R=(E={width:j[0],height:j[1],left:1,top:-3,advance:N?j[1]:j[0]}).advance;var D=N?j[0]*O.scale-24*C:j[1]*O.scale-24*C;D>0&&D>A&&(A=D)}else{var F=n[O.fontStack],z=F&&F[S];if(z&&z.rect)L=z.rect,E=z.metrics;else{var V=e[O.fontStack],G=V&&V[S];if(!G)continue;E=G.metrics}k=24*(C-O.scale)}N?(t.verticalizable=!0,I.push({glyph:S,imageName:T,x:d,y:p+k,vertical:N,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:E,rect:L}),d+=R*O.scale+l):(I.push({glyph:S,imageName:T,x:d,y:p+k,vertical:N,scale:O.scale,fontStack:O.fontStack,sectionIndex:M,metrics:E,rect:L}),d+=E.advance*O.scale+l)}0!==I.length&&(f=Math.max(d-l,f),kc(I,0,I.length-1,m,A)),d=0;var Z=o*C+A;w.lineOffset=Math.max(A,x),p+=Z,g=Math.max(Z,g),++v}else p+=o,++v}var W,H=p- -17,U=Sc(a),$=U.horizontalAlign,K=U.verticalAlign;(function(t,e,n,i,r,o,a,s,c){var l,u=(e-n)*r;l=o!==a?-s*i- -17:(-i*c+.5)*a;for(var h=0,d=t;h<d.length;h+=1)for(var p=0,f=d[h].positionedGlyphs;p<f.length;p+=1){var g=f[p];g.x+=u,g.y+=l}})(t.positionedLines,m,$,K,f,g,o,H,r.length),t.top+=-K*H,t.bottom=t.top+H,t.left+=-$*f,t.right=t.left+f}(k,e,n,i,m,a,s,c,h,l,d,g),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(S)&&k}_c.fromFeature=function(t,e){for(var n=new _c,i=0;i<t.sections.length;i++){var r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n},_c.prototype.length=function(){return this.text.length},_c.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},_c.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},_c.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},_c.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;e+=i&&Ui(i)&&!Ws[t[n+1]]||r&&Ui(r)&&!Ws[t[n-1]]||!Ws[t[n]]?t[n]:Ws[t[n]]}return e}(this.text)},_c.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&xc[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&xc[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},_c.prototype.substring=function(t,e){var n=new _c;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},_c.prototype.toString=function(){return this.text},_c.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},_c.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(bc.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(n)},_c.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(bc.forImage(e)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}else w("Can't add FormattedSection with an empty image.")},_c.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wc={};function Ic(t,e,n,i,r,o){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*24/o+r:0}var s=n[e.fontStack],c=s&&s[t];return c?c.metrics.advance*e.scale+r:0}function Ac(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function Pc(t,e,n){var i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function Oc(t,e,n,i,r,o){for(var a=null,s=Ac(e,n,r,o),c=0,l=i;c<l.length;c+=1){var u=l[c],h=Ac(e-u.x,n,r,o)+u.badness;h<=s&&(a=u,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Mc(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];for(var s,c=[],l=function(t,e,n,i,r,o){for(var a=0,s=0;s<t.length();s++){var c=t.getSection(s);a+=Ic(t.getCharCode(s),c,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),u=t.text.indexOf("\u200b")>=0,h=0,d=0;d<t.length();d++){var p=t.getSection(d),f=t.getCharCode(d);if(xc[f]||(h+=Ic(f,p,i,r,e,a)),d<t.length()-1){var g=!((s=f)<11904||!(Zi["Bopomofo Extended"](s)||Zi.Bopomofo(s)||Zi["CJK Compatibility Forms"](s)||Zi["CJK Compatibility Ideographs"](s)||Zi["CJK Compatibility"](s)||Zi["CJK Radicals Supplement"](s)||Zi["CJK Strokes"](s)||Zi["CJK Symbols and Punctuation"](s)||Zi["CJK Unified Ideographs Extension A"](s)||Zi["CJK Unified Ideographs"](s)||Zi["Enclosed CJK Letters and Months"](s)||Zi["Halfwidth and Fullwidth Forms"](s)||Zi.Hiragana(s)||Zi["Ideographic Description Characters"](s)||Zi["Kangxi Radicals"](s)||Zi["Katakana Phonetic Extensions"](s)||Zi.Katakana(s)||Zi["Vertical Forms"](s)||Zi["Yi Radicals"](s)||Zi["Yi Syllables"](s)));(wc[f]||g||p.imageName)&&c.push(Oc(d+1,h,l,c,Pc(f,t.getCharCode(d+1),g&&u),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Oc(t.length(),h,l,c,0,!0))}function Sc(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function kc(t,e,n,i,r){if(i||r)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*i,s=e;s<=n;s++)t[s].x-=a,t[s].y+=r}function Ec(t,e,n,i,r,o){var a,s=t.image;if(s.content){var c=s.content,l=s.pixelRatio||1;a=[c[0]/l,c[1]/l,s.displaySize[0]-c[2]/l,s.displaySize[1]-c[3]/l]}var u,h,d,p,f=e.left*o,g=e.right*o;"width"===n||"both"===n?(p=r[0]+f-i[3],h=r[0]+g+i[1]):h=(p=r[0]+(f+g-s.displaySize[0])/2)+s.displaySize[0];var m=e.top*o,v=e.bottom*o;return"height"===n||"both"===n?(u=r[1]+m-i[0],d=r[1]+v+i[2]):d=(u=r[1]+(m+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:u,right:h,bottom:d,left:p,collisionPadding:a}}wc[10]=!0,wc[32]=!0,wc[38]=!0,wc[40]=!0,wc[41]=!0,wc[43]=!0,wc[45]=!0,wc[47]=!0,wc[173]=!0,wc[183]=!0,wc[8203]=!0,wc[8208]=!0,wc[8211]=!0,wc[8231]=!0;var Lc=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);function Tc(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new or(t+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,r=n.interpolationType,o=0;o<i.length&&i[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[o],c=i[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:c,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:c,minSize:n.evaluate(new or(s)),maxSize:n.evaluate(new or(c)),interpolationType:r}}function Rc(t,e,n){var i=e.uSize,r=n.lowerSize;return"source"===t.kind?r/128:"composite"===t.kind?Ge(r/128,n.upperSize/128,e.uSizeT):i}function Nc(t,e){var n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,o=r?u(rn.interpolationFactor(r,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?i=Ge(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:i}}Bi("Anchor",Lc);var Bc=Object.freeze({__proto__:null,getSizeData:Tc,evaluateSizeForFeature:Rc,evaluateSizeForZoom:Nc,SIZE_PACK_FACTOR:128});function jc(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var c=[],l=0;s<n/2;){var u=t[a],h=t[a+1];if(!h)return!1;var d=t[a-1].angleTo(u)-u.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:s,angleDelta:d}),l+=d;s-c[0].distance>i;)l-=c.shift().angleDelta;if(l>r)return!1;a++,s+=u.dist(h)}return!0}function Dc(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Fc(t,e,n){return t?.6*e*n:0}function zc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Vc(t,e,n,i,r,o){for(var a=Fc(n,r,o),s=zc(n,i)*o,c=0,l=Dc(t)/2,u=0;u<t.length-1;u++){var h=t[u],d=t[u+1],p=h.dist(d);if(c+p>l){var f=(l-c)/p,g=Ge(h.x,d.x,f),m=Ge(h.y,d.y,f),v=new Lc(g,m,d.angleTo(h),u);return v._round(),!a||jc(t,v,s,a,e)?v:void 0}c+=p}}function Gc(t,e,n,i,r,o,a,s,c){var l=Fc(i,o,a),u=zc(i,r),h=u*a,d=0===t[0].x||t[0].x===c||0===t[0].y||t[0].y===c;return e-h<e/4&&(e=h+e/4),function t(e,n,i,r,o,a,s,c,l){for(var u=a/2,h=Dc(e),d=0,p=n-i,f=[],g=0;g<e.length-1;g++){for(var m=e[g],v=e[g+1],y=m.dist(v),b=v.angleTo(m);p+i<d+y;){var _=((p+=i)-d)/y,C=Ge(m.x,v.x,_),x=Ge(m.y,v.y,_);if(C>=0&&C<l&&x>=0&&x<l&&p-u>=0&&p+u<=h){var w=new Lc(C,x,b,g);w._round(),r&&!jc(e,w,a,r,o)||f.push(w)}}d+=y}return c||f.length||s||(f=t(e,d/2,i,r,o,a,s,!0,l)),f}(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,l,n,h,d,!1,c)}function Zc(t,e,n,i,o){for(var a=[],s=0;s<t.length;s++)for(var c=t[s],l=void 0,u=0;u<c.length-1;u++){var h=c[u],d=c[u+1];h.x<e&&d.x<e||(h.x<e?h=new r(e,h.y+(e-h.x)/(d.x-h.x)*(d.y-h.y))._round():d.x<e&&(d=new r(e,h.y+(e-h.x)/(d.x-h.x)*(d.y-h.y))._round()),h.y<n&&d.y<n||(h.y<n?h=new r(h.x+(n-h.y)/(d.y-h.y)*(d.x-h.x),n)._round():d.y<n&&(d=new r(h.x+(n-h.y)/(d.y-h.y)*(d.x-h.x),n)._round()),h.x>=i&&d.x>=i||(h.x>=i?h=new r(i,h.y+(i-h.x)/(d.x-h.x)*(d.y-h.y))._round():d.x>=i&&(d=new r(i,h.y+(i-h.x)/(d.x-h.x)*(d.y-h.y))._round()),h.y>=o&&d.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(d.y-h.y)*(d.x-h.x),o)._round():d.y>=o&&(d=new r(h.x+(o-h.y)/(d.y-h.y)*(d.x-h.x),o)._round()),l&&h.equals(l[l.length-1])||a.push(l=[h]),l.push(d)))))}return a}function Wc(t,e,n,i){var o=[],a=t.image,s=a.pixelRatio,c=a.paddedRect.w-2,l=a.paddedRect.h-2,u=t.right-t.left,h=t.bottom-t.top,d=a.stretchX||[[0,c]],p=a.stretchY||[[0,l]],f=function(t,e){return t+e[1]-e[0]},g=d.reduce(f,0),m=p.reduce(f,0),v=c-g,y=l-m,b=0,_=g,C=0,x=m,w=0,I=v,A=0,P=y;if(a.content&&i){var O=a.content;b=Hc(d,0,O[0]),C=Hc(p,0,O[1]),_=Hc(d,O[0],O[2]),x=Hc(p,O[1],O[3]),w=O[0]-b,A=O[1]-C,I=O[2]-O[0]-_,P=O[3]-O[1]-x}var M=function(i,o,c,l){var d=$c(i.stretch-b,_,u,t.left),p=Kc(i.fixed-w,I,i.stretch,g),f=$c(o.stretch-C,x,h,t.top),v=Kc(o.fixed-A,P,o.stretch,m),y=$c(c.stretch-b,_,u,t.left),O=Kc(c.fixed-w,I,c.stretch,g),M=$c(l.stretch-C,x,h,t.top),S=Kc(l.fixed-A,P,l.stretch,m),k=new r(d,f),E=new r(y,f),L=new r(y,M),T=new r(d,M),R=new r(p/s,v/s),N=new r(O/s,S/s),B=e*Math.PI/180;if(B){var j=Math.sin(B),D=Math.cos(B),F=[D,-j,j,D];k._matMult(F),E._matMult(F),T._matMult(F),L._matMult(F)}var z=i.stretch+i.fixed,V=o.stretch+o.fixed;return{tl:k,tr:E,bl:T,br:L,tex:{x:a.paddedRect.x+1+z,y:a.paddedRect.y+1+V,w:c.stretch+c.fixed-z,h:l.stretch+l.fixed-V},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:N,minFontScaleX:I/s/u,minFontScaleY:P/s/h,isSDF:n}};if(i&&(a.stretchX||a.stretchY))for(var S=Uc(d,v,g),k=Uc(p,y,m),E=0;E<S.length-1;E++)for(var L=S[E],T=S[E+1],R=0;R<k.length-1;R++)o.push(M(L,k[R],T,k[R+1]));else o.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:c+1},{fixed:0,stretch:l+1}));return o}function Hc(t,e,n){for(var i=0,r=0,o=t;r<o.length;r+=1){var a=o[r];i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return i}function Uc(t,e,n){for(var i=[{fixed:-1,stretch:0}],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a[0],c=a[1],l=i[i.length-1];i.push({fixed:s-l.stretch,stretch:l.stretch}),i.push({fixed:s-l.stretch,stretch:l.stretch+(c-s)})}return i.push({fixed:e+1,stretch:n}),i}function $c(t,e,n,i){return t/e*n+i}function Kc(t,e,n,i){return t-e*n/i}var Xc=function(t,e,n,i,o,a,s,c,l,u){if(this.boxStartIndex=t.length,l){var h=a.top,d=a.bottom,p=a.collisionPadding;p&&(h-=p[1],d+=p[3]);var f=d-h;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var g=a.top*s-c,m=a.bottom*s+c,v=a.left*s-c,y=a.right*s+c,b=a.collisionPadding;if(b&&(v-=b[0]*s,g-=b[1]*s,y+=b[2]*s,m+=b[3]*s),u){var _=new r(v,g),C=new r(y,g),x=new r(v,m),w=new r(y,m),I=u*Math.PI/180;_._rotate(I),C._rotate(I),x._rotate(I),w._rotate(I),v=Math.min(_.x,C.x,x.x,w.x),y=Math.max(_.x,C.x,x.x,w.x),g=Math.min(_.y,C.y,x.y,w.y),m=Math.max(_.y,C.y,x.y,w.y)}t.emplaceBack(e.x,e.y,v,g,y,m,n,i,o)}this.boxEndIndex=t.length},Yc=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=qc),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function qc(t,e){return t<e?-1:t>e?1:0}function Jc(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,c=t[0],l=0;l<c.length;l++){var u=c[l];(!l||u.x<i)&&(i=u.x),(!l||u.y<o)&&(o=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>s)&&(s=u.y)}var h=Math.min(a-i,s-o),d=h/2,p=new Yc([],Qc);if(0===h)return new r(i,o);for(var f=i;f<a;f+=h)for(var g=o;g<s;g+=h)p.push(new tl(f+d,g+d,d,t));for(var m=function(t){for(var e=0,n=0,i=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var c=r[o],l=r[s],u=c.x*l.y-l.x*c.y;n+=(c.x+l.x)*u,i+=(c.y+l.y)*u,e+=3*u}return new tl(n/e,i/e,0,t)}(t),v=p.length;p.length;){var y=p.pop();(y.d>m.d||!m.d)&&(m=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,v)),y.max-m.d<=e||(p.push(new tl(y.p.x-(d=y.h/2),y.p.y-d,d,t)),p.push(new tl(y.p.x+d,y.p.y-d,d,t)),p.push(new tl(y.p.x-d,y.p.y+d,d,t)),p.push(new tl(y.p.x+d,y.p.y+d,d,t)),v+=4)}return n&&(console.log("num probes: "+v),console.log("best distance: "+m.d)),m.p}function Qc(t,e){return e.max-t.max}function tl(t,e,n,i){this.p=new r(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,c=s-1;a<s;c=a++){var l=o[a],u=o[c];l.y>t.y!=u.y>t.y&&t.x<(u.x-l.x)*(t.y-l.y)/(u.y-l.y)+l.x&&(n=!n),i=Math.min(i,Ko(t,l,u))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Yc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Yc.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Yc.prototype.peek=function(){return this.data[0]},Yc.prototype._up=function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},Yc.prototype._down=function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r};var el=Number.POSITIVE_INFINITY;function nl(t,e){return e[1]!==el?function(t,e,n){var i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){var n=0,i=0;e<0&&(e=0);var r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function il(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rl(t,e,n,i,o,a,s,c,l,u,h,d,p,f,g){var m=function(t,e,n,i,o,a,s,c){for(var l=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[],h=0,d=e.positionedLines;h<d.length;h+=1)for(var p=d[h],f=0,g=p.positionedGlyphs;f<g.length;f+=1){var m=g[f];if(m.rect){var v=m.rect||{},y=4,b=!0,_=1,C=0,x=(o||c)&&m.vertical,w=m.metrics.advance*m.scale/2;if(c&&e.verticalizable&&(C=p.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var I=s[m.imageName];b=I.sdf,y=1/(_=I.pixelRatio)}var A=o?[m.x+w,m.y]:[0,0],P=o?[0,0]:[m.x+w+n[0],m.y+n[1]-C],O=[0,0];x&&(O=P,P=[0,0]);var M=(m.metrics.left-y)*m.scale-w+P[0],S=(-m.metrics.top-y)*m.scale+P[1],k=M+v.w*m.scale/_,E=S+v.h*m.scale/_,L=new r(M,S),T=new r(k,S),R=new r(M,E),N=new r(k,E);if(x){var B=new r(-w,w- -17),j=-Math.PI/2,D=12-w,F=new r(22-D,-(m.imageName?D:0)),z=new(Function.prototype.bind.apply(r,[null].concat(O)));L._rotateAround(j,B)._add(F)._add(z),T._rotateAround(j,B)._add(F)._add(z),R._rotateAround(j,B)._add(F)._add(z),N._rotateAround(j,B)._add(F)._add(z)}if(l){var V=Math.sin(l),G=Math.cos(l),Z=[G,-V,V,G];L._matMult(Z),T._matMult(Z),R._matMult(Z),N._matMult(Z)}var W=new r(0,0),H=new r(0,0);u.push({tl:L,tr:T,bl:R,br:N,tex:v,writingMode:e.writingMode,glyphOffset:A,sectionIndex:m.sectionIndex,isSDF:b,pixelOffsetTL:W,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return u}(0,n,c,o,a,s,i,t.allowVerticalPlacement),v=t.textSizeData,y=null;"source"===v.kind?(y=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===v.kind&&((y=[128*f.compositeTextSizes[0].evaluate(s,{},g),128*f.compositeTextSizes[1].evaluate(s,{},g)])[0]>32640||y[1]>32640)&&w(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,m,y,c,a,s,u,e,l.lineStartIndex,l.lineLength,p,g);for(var b=0,_=h;b<_.length;b+=1)d[_[b]]=t.text.placedSymbolArray.length-1;return 4*m.length}function ol(t){for(var e in t)return t[e];return null}function al(t,e,n,i){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<n)return!0}else r[e]=[];return r[e].push(i),!1}var sl=vs.VectorTileFeature.types,cl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ll(t,e,n,i,r,o,a,s,c,l,u,h,d){var p=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(c?1:0),f,16*l,16*u,256*h,256*d)}function ul(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function hl(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Xi(n[e].text))return!0;return!1}var dl=function(t){this.layoutVertexArray=new Lr,this.indexArray=new Fr,this.programConfigurations=t,this.segments=new oo,this.dynamicLayoutVertexArray=new Tr,this.opacityVertexArray=new Rr,this.placedSymbolArray=new qr};dl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},dl.prototype.upload=function(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ds.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,cl,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Bi("SymbolBuffers",dl);var pl=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new oo,this.collisionVertexArray=new Dr};pl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,zs.members,!0)},pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Bi("CollisionBuffers",pl);var fl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ra([]),this.placementViewportMatrix=ra([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tc(this.zoom,e["text-size"]),this.iconSizeData=Tc(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return yc[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};fl.prototype.createArrays=function(){this.text=new dl(new To(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new dl(new To(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new to,this.lineVertexArray=new eo,this.symbolInstances=new Qr},fl.prototype.calculateGlyphDependencies=function(t,e,n,i,r){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||i)&&r){var a=Ws[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},fl.prototype.populate=function(t,e,n){var i=this.layers[0],r=i.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof ee&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],c||l){for(var h=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,f=new or(this.zoom),g=0,m=t;g<m.length;g+=1){var v=m[g],y=v.feature,b=v.id,_=v.index,C=v.sourceLayerIndex,x=i._featureFilter.needGeometry,w={type:y.type,id:b,properties:y.properties,geometry:x?Do(y):[]};if(i._featureFilter.filter(f,w,n)){x||(w.geometry=Do(y));var I=void 0;if(c){var A=i.getValueAndResolveTokens("text-field",w,n,p),P=ee.factory(A);hl(P)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nr()||this.hasRTLText&&rr.isParsed())&&(I=Zs(P,i,w))}var O=void 0;if(l){var M=i.getValueAndResolveTokens("icon-image",w,n,p);O=M instanceof ne?M:ne.fromString(M)}if(I||O){var S=this.sortFeaturesByKey?u.evaluate(w,{},n):void 0,k={id:b,text:I,icon:O,index:_,sourceLayerIndex:C,geometry:Do(y),properties:y.properties,type:sl[y.type],sortKey:S};if(this.features.push(k),O&&(h[O.name]=!0),I){var E=o.evaluate(w,{},n).join(","),L="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yc.vertical)>=0;for(var T=0,R=I.sections;T<R.length;T+=1){var N=R[T];if(N.image)h[N.image.name]=!0;else{var B=Wi(I.toString()),j=N.fontStack||E,D=d[j]=d[j]||{};this.calculateGlyphDependencies(N.text,D,L,this.allowVerticalPlacement,B)}}}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},i=[],r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){var o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){var o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function c(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var l=0;l<t.length;l++){var u=t[l],h=u.geometry,d=u.text?u.text.toString():null;if(d){var p=c(d,h),f=c(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){var g=s(p,f,h),m=a(p,f,i[g].geometry);delete e[p],delete n[f],n[c(d,i[m].geometry,!0)]=m,i[g].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(l),e[p]=r-1,n[f]=r-1)}else o(l)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},fl.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},fl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},fl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},fl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},fl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},fl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},fl.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var c=0;c<e.length;c++){var l=o[c];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},fl.prototype.addSymbols=function(t,e,n,i,r,o,a,s,c,l,u,h){for(var d=t.indexArray,p=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,p,d,o.sortKey),g=this.glyphOffsetArray.length,m=f.vertexLength,v=this.allowVerticalPlacement&&a===yc.vertical?Math.PI/2:0,y=o.text&&o.text.sections,b=0;b<e.length;b++){var _=e[b],C=_.tl,x=_.tr,w=_.bl,I=_.br,A=_.tex,P=_.pixelOffsetTL,O=_.pixelOffsetBR,M=_.minFontScaleX,S=_.minFontScaleY,k=_.glyphOffset,E=_.isSDF,L=_.sectionIndex,T=f.vertexLength,R=k[1];ll(p,s.x,s.y,C.x,R+C.y,A.x,A.y,n,E,P.x,P.y,M,S),ll(p,s.x,s.y,x.x,R+x.y,A.x+A.w,A.y,n,E,O.x,P.y,M,S),ll(p,s.x,s.y,w.x,R+w.y,A.x,A.y+A.h,n,E,P.x,O.y,M,S),ll(p,s.x,s.y,I.x,R+I.y,A.x+A.w,A.y+A.h,n,E,O.x,O.y,M,S),ul(t.dynamicLayoutVertexArray,s,v),d.emplaceBack(T,T+1,T+2),d.emplaceBack(T+1,T+2,T+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(k[0]),b!==e.length-1&&L===e[b+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},h,y&&y[L])}t.placedSymbolArray.emplaceBack(s.x,s.y,g,this.glyphOffsetArray.length-g,m,c,l,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,u)},fl.prototype._addCollisionDebugVertex=function(t,e,n,i,r,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))},fl.prototype.addCollisionDebugVertices=function(t,e,n,i,o,a,s){var c=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),l=c.vertexLength,u=o.layoutVertexArray,h=o.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,h,a,d,p,new r(t,e)),this._addCollisionDebugVertex(u,h,a,d,p,new r(n,e)),this._addCollisionDebugVertex(u,h,a,d,p,new r(n,i)),this._addCollisionDebugVertex(u,h,a,d,p,new r(t,i)),c.vertexLength+=4;var f=o.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),c.primitiveLength+=4},fl.prototype.addDebugCollisionBoxes=function(t,e,n,i){for(var r=t;r<e;r++){var o=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,i?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},fl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pl(Br,Vs.members,Hr),this.iconCollisionBox=new pl(Br,Vs.members,Hr);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},fl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,r,o,a,s,c){for(var l={},u=e;u<n;u++){var h=t.get(u);l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}for(var d=i;d<r;d++){var p=t.get(d);l.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.verticalTextFeatureIndex=p.featureIndex;break}for(var f=o;f<a;f++){var g=t.get(f);l.iconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.iconFeatureIndex=g.featureIndex;break}for(var m=s;m<c;m++){var v=t.get(m);l.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},l.verticalIconFeatureIndex=v.featureIndex;break}return l},fl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},fl.prototype.hasTextData=function(){return this.text.segments.get().length>0},fl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},fl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},fl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},fl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},fl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs,r=n.vertexStartIndex;r<i;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)},fl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+n*s.anchorY)),r.push(s.featureIndex)}return o.sort((function(t,e){return i[t]-i[e]||r[e]-r[t]})),o},fl.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},fl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,i=this.symbolInstanceIndexes;n<i.length;n+=1){var r=this.symbolInstances.get(i[n]);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t,n,i){t>=0&&i.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Bi("SymbolBucket",fl,{omit:["layers","collisionBoxArray","features","compareText"]}),fl.MAX_GLYPHS=65535,fl.addDynamicAttributes=ul;var gl=new br({"symbol-placement":new fr(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new fr(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fr(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gr(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fr(Ot.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fr(Ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fr(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new fr(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fr(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new gr(Ot.layout_symbol["icon-size"]),"icon-text-fit":new fr(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fr(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new gr(Ot.layout_symbol["icon-image"]),"icon-rotate":new gr(Ot.layout_symbol["icon-rotate"]),"icon-padding":new fr(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new fr(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new gr(Ot.layout_symbol["icon-offset"]),"icon-anchor":new gr(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fr(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fr(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fr(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new gr(Ot.layout_symbol["text-field"]),"text-font":new gr(Ot.layout_symbol["text-font"]),"text-size":new gr(Ot.layout_symbol["text-size"]),"text-max-width":new gr(Ot.layout_symbol["text-max-width"]),"text-line-height":new fr(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new gr(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new gr(Ot.layout_symbol["text-justify"]),"text-radial-offset":new gr(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fr(Ot.layout_symbol["text-variable-anchor"]),"text-anchor":new gr(Ot.layout_symbol["text-anchor"]),"text-max-angle":new fr(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new fr(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new gr(Ot.layout_symbol["text-rotate"]),"text-padding":new fr(Ot.layout_symbol["text-padding"]),"text-keep-upright":new fr(Ot.layout_symbol["text-keep-upright"]),"text-transform":new gr(Ot.layout_symbol["text-transform"]),"text-offset":new gr(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new fr(Ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fr(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new fr(Ot.layout_symbol["text-optional"])}),ml={paint:new br({"icon-opacity":new gr(Ot.paint_symbol["icon-opacity"]),"icon-color":new gr(Ot.paint_symbol["icon-color"]),"icon-halo-color":new gr(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new gr(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gr(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new fr(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new fr(Ot.paint_symbol["icon-translate-anchor"]),"text-opacity":new gr(Ot.paint_symbol["text-opacity"]),"text-color":new gr(Ot.paint_symbol["text-color"],{runtimeType:Ft,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new gr(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new gr(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new gr(Ot.paint_symbol["text-halo-blur"]),"text-translate":new fr(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new fr(Ot.paint_symbol["text-translate-anchor"])}),layout:gl},vl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Nt,this.defaultValue=t};vl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},vl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return null},Bi("FormatSectionOverride",vl,{omit:["defaultValue"]});var yl=function(t){function e(e){t.call(this,e,ml)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var r=[],o=0,a=i;o<a.length;o+=1){var s=a[o];r.indexOf(s)<0&&r.push(s)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,i){var r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Wn(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,r)},e.prototype.createBucket=function(t){return new fl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=ml.paint.overridableProperties;t<n.length;t+=1){var i=n[t];if(e.hasPaintOverride(this.layout,i)){var r,o=this.paint.get(i),a=new vl(o),s=new Zn(a,o.property.specification);r="constant"===o.value.kind||"source"===o.value.kind?new Un("source",s):new $n("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new dr(o.property,r,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,i){return!(!this.layout||n.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),i=ml.paint.properties[e],r=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i.overrides&&i.overrides.hasOverride(n[e]))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof ee)o(n.value.value.sections);else if("source"===n.value.kind){var a=n.value;a._styleExpression&&function t(e){r||(e instanceof se&&oe(e.value)===Zt?o(e.value.sections):e instanceof he?o(e.sections):e.eachChild(t))}(a._styleExpression.expression)}return r},e}(_r),bl={paint:new br({"background-color":new fr(Ot.paint_background["background-color"]),"background-pattern":new vr(Ot.paint_background["background-pattern"]),"background-opacity":new fr(Ot.paint_background["background-opacity"])})},_l=function(t){function e(e){t.call(this,e,bl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_r),Cl={paint:new br({"raster-opacity":new fr(Ot.paint_raster["raster-opacity"]),"raster-hue-rotate":new fr(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fr(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fr(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new fr(Ot.paint_raster["raster-saturation"]),"raster-contrast":new fr(Ot.paint_raster["raster-contrast"]),"raster-resampling":new fr(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new fr(Ot.paint_raster["raster-fade-duration"])})},xl=function(t){function e(e){t.call(this,e,Cl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_r),wl=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(_r),Il={circle:la,heatmap:ba,hillshade:Ca,fill:ss,"fill-extrusion":Is,line:Bs,symbol:yl,background:_l,raster:xl},Al=a.HTMLImageElement,Pl=a.HTMLCanvasElement,Ol=a.HTMLVideoElement,Ml=a.ImageData,Sl=a.ImageBitmap,kl=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};kl.prototype.update=function(t,e,n){var i=t.width,r=t.height,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof Al||t instanceof Pl||t instanceof Ol||t instanceof Ml||Sl&&t instanceof Sl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var c=n||{x:0,y:0},l=c.x,u=c.y;t instanceof Al||t instanceof Pl||t instanceof Ol||t instanceof Ml||Sl&&t instanceof Sl?s.texSubImage2D(s.TEXTURE_2D,0,l,u,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,u,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},kl.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},kl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},kl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var El=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};El.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},El.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ll=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new El(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?t:a};function Tl(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Ll.prototype.send=function(t,e,n,i,r){var o=this;void 0===r&&(r=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=S(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:zi(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:o.mapId})}}},Ll.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var i=this.cancelCallbacks[n];delete this.cancelCallbacks[n],i&&i()}else P()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Ll.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Ll.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Vi(e.error)):i(null,Vi(e.data)))}else{var r=!1,o=S(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){r=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?zi(e):null,data:zi(i,o)},o)}:function(t){r=!0},s=null,c=Vi(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,c,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],c.source)[l[1]](c,a)}else a(new Error("Could not find function "+e.type));!r&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Ll.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Rl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Rl.prototype.setNorthEast=function(t){return this._ne=t instanceof Nl?new Nl(t.lng,t.lat):Nl.convert(t),this},Rl.prototype.setSouthWest=function(t){return this._sw=t instanceof Nl?new Nl(t.lng,t.lat):Nl.convert(t),this},Rl.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof Nl)e=t,n=t;else{if(!(t instanceof Rl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Rl.convert(t)):this.extend(Nl.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new Nl(e.lng,e.lat),this._ne=new Nl(n.lng,n.lat)),this},Rl.prototype.getCenter=function(){return new Nl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Rl.prototype.getSouthWest=function(){return this._sw},Rl.prototype.getNorthEast=function(){return this._ne},Rl.prototype.getNorthWest=function(){return new Nl(this.getWest(),this.getNorth())},Rl.prototype.getSouthEast=function(){return new Nl(this.getEast(),this.getSouth())},Rl.prototype.getWest=function(){return this._sw.lng},Rl.prototype.getSouth=function(){return this._sw.lat},Rl.prototype.getEast=function(){return this._ne.lng},Rl.prototype.getNorth=function(){return this._ne.lat},Rl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Rl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Rl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Rl.prototype.contains=function(t){var e=Nl.convert(t),n=e.lng,i=e.lat,r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r},Rl.convert=function(t){return!t||t instanceof Rl?t:new Rl(t)};var Nl=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Nl.prototype.wrap=function(){return new Nl(h(this.lng,-180,180),this.lat)},Nl.prototype.toArray=function(){return[this.lng,this.lat]},Nl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Nl.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))},Nl.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Rl(new Nl(this.lng-n,this.lat-e),new Nl(this.lng+n,this.lat+e))},Nl.convert=function(t){if(t instanceof Nl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Nl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Nl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bl=2*Math.PI*6371008.8;function jl(t){return Bl*Math.cos(t*Math.PI/180)}function Dl(t){return(180+t)/360}function Fl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function zl(t,e){return t/jl(e)}function Vl(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Gl=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Gl.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Nl.convert(t);return new Gl(Dl(n.lng),Fl(n.lat),zl(e,n.lat))},Gl.prototype.toLngLat=function(){return new Nl(360*this.x-180,Vl(this.y))},Gl.prototype.toAltitude=function(){return this.z*jl(Vl(this.y))},Gl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bl*(t=Vl(this.y),1/Math.cos(t*Math.PI/180));var t};var Zl=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Ul(0,t,t,e,n)};Zl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Zl.prototype.url=function(t,e){var n,i,r,o,a,s=(i=this.y,r=this.z,o=Tl(256*(n=this.x),256*(i=Math.pow(2,r)-i-1),r),a=Tl(256*(n+1),256*(i+1),r),o[0]+","+o[1]+","+a[0]+","+a[1]),c=function(t,e,n){for(var i,r="",o=t;o>0;o--)r+=(e&(i=1<<o-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",s)},Zl.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new r(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Zl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wl=function(t,e){this.wrap=t,this.canonical=e,this.key=Ul(t,e.z,e.z,e.x,e.y)},Hl=function(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Zl(n,+i,+r),this.key=Ul(e,t,n,i,r)};function Ul(t,e,n,i,r){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*r+i).toString(36)+n.toString(36)+e.toString(36)}Hl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Hl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Hl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Hl.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Ul(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Ul(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Hl.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Hl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Hl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Hl(e,this.wrap,e,n,i),new Hl(e,this.wrap,e,n+1,i),new Hl(e,this.wrap,e,n,i+1),new Hl(e,this.wrap,e,n+1,i+1)]},Hl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Hl.prototype.wrapped=function(){return new Hl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Hl.prototype.unwrapTo=function(t){return new Hl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Hl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Hl.prototype.toUnwrapped=function(){return new Wl(this.wrap,this.canonical)},Hl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Hl.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Gl(t.x-this.wrap,t.y))},Bi("CanonicalTileID",Zl),Bi("OverscaledTileID",Hl,{omit:["posMatrix"]});var $l=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var r=0;r<i;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(i,r)]=this.data[this._idx(i-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,i)]=this.data[this._idx(r,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};$l.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[i],n[i+1],n[i+2])},$l.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},$l.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},$l.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},$l.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},$l.prototype.getPixels=function(){return new ma({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},$l.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,c=-n*this.dim,l=o;l<a;l++)for(var u=i;u<r;u++)this.data[this._idx(u,l)]=t.data[this._idx(u+s,l+c)]},Bi("DEMData",$l);var Kl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Kl.prototype.encode=function(t){return this._stringToNumber[t]},Kl.prototype.decode=function(t){return this._numberToString[t]};var Xl=function(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r},Yl={geometry:{configurable:!0}};Yl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Yl.geometry.set=function(t){this._geometry=t},Xl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Xl.prototype,Yl);var ql=function(){this.state={},this.stateChanges={},this.deletedStates={}};ql.prototype.updateState=function(t,e,n){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},d(this.stateChanges[t][i],n),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==i&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var o in this.deletedStates[t][i]={},this.state[t][i])n[o]||(this.deletedStates[t][i][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},ql.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},ql.prototype.getState=function(t,e){var n=String(e),i=d({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][e];if(null===r)return{};for(var o in r)delete i[o]}return i},ql.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},ql.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),d(this.state[i][o],this.stateChanges[i][o]),r[o]=this.state[i][o];n[i]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var c in this.state[a])s[c]={},this.state[a][c]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var u=0,h=Object.keys(this.deletedStates[a][l]);u<h.length;u+=1)delete this.state[a][l][h[u]];s[l]=this.state[a][l]}n[a]=n[a]||{},d(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)};var Jl=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ei(8192,16,0),this.grid3D=new Ei(8192,16,0),this.featureIndexArray=new io,this.promoteId=e};function Ql(t,e,n,i,r){return b(t,(function(t,o){var a=e instanceof pr?e.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a}))}function tu(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),r=Math.max(r,s.y)}return{minX:e,minY:n,maxX:i,maxY:r}}function eu(t,e){return e-t}Jl.prototype.insert=function(t,e,n,i,r,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var s=o?this.grid3D:this.grid,c=0;c<e.length;c++){for(var l=e[c],u=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var d=l[h];u[0]=Math.min(u[0],d.x),u[1]=Math.min(u[1],d.y),u[2]=Math.max(u[2],d.x),u[3]=Math.max(u[3],d.y)}u[0]<8192&&u[1]<8192&&u[2]>=0&&u[3]>=0&&s.insert(a,u[0],u[1],u[2],u[3])}},Jl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new $s(this.rawTileData)).layers,this.sourceLayerCoder=new Kl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Jl.prototype.query=function(t,e,n,i){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,c=ri(a.filter),l=t.queryGeometry,u=t.queryPadding*s,h=tu(l),d=this.grid.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u),p=tu(t.cameraQueryGeometry),f=0,g=this.grid3D.query(p.minX-u,p.minY-u,p.maxX+u,p.maxY+u,(function(e,n,i,o){return function(t,e,n,i,o){for(var a=0,s=t;a<s.length;a+=1){var c=s[a];if(e<=c.x&&n<=c.y&&i>=c.x&&o>=c.y)return!0}var l=[new r(e,n),new r(e,o),new r(i,o),new r(i,n)];if(t.length>2)for(var u=0,h=l;u<h.length;u+=1)if(Yo(t,h[u]))return!0;for(var d=0;d<t.length-1;d++)if(qo(t[d],t[d+1],l))return!0;return!1}(t.cameraQueryGeometry,e-u,n-u,i+u,o+u)}));f<g.length;f+=1)d.push(g[f]);d.sort(eu);for(var m,v={},y=function(r){var u=d[r];if(u!==m){m=u;var h=o.featureIndexArray.get(u),p=null;o.loadMatchingFeature(v,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,c,a.layers,a.availableImages,e,n,i,(function(e,n,i){return p||(p=Do(e)),n.queryIntersectsFeature(l,e,i,p,o.z,t.transform,s,t.pixelPosMatrix)}))}},b=0;b<d.length;b++)y(b);return v},Jl.prototype.loadMatchingFeature=function(t,e,n,i,r,o,a,s,c,l,u){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(i);if(r.filter(new or(this.tileID.overscaledZ),p))for(var f=this.getId(p,d),g=0;g<h.length;g++){var m=h[g];if(!(o&&o.indexOf(m)<0)){var v=s[m];if(v){var y={};void 0!==f&&l&&(y=l.getState(v.sourceLayer||"_geojsonTileLayer",f));var b=c[m];b.paint=Ql(b.paint,v.paint,p,y,a),b.layout=Ql(b.layout,v.layout,p,y,a);var _=!u||u(p,v,y);if(_){var C=new Xl(p,this.z,this.x,this.y,f);C.layer=b;var x=t[m];void 0===x&&(x=t[m]=[]),x.push({featureIndex:i,feature:C,intersectionZ:_})}}}}}},Jl.prototype.lookupSymbolFeatures=function(t,e,n,i,r,o,a,s){var c={};this.loadVTLayers();for(var l=ri(r),u=0,h=t;u<h.length;u+=1)this.loadMatchingFeature(c,n,i,h[u],l,o,a,s,e);return c},Jl.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},Jl.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Bi("FeatureIndex",Jl,{omit:["rawTileData","sourceLayerCoder"]});var nu=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};nu.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<D.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},nu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},nu.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=function(){var t=o[r],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=i;a<s.length;a+=1)n[s[a].id]=t}},r=0,o=t;r<o.length;r+=1)i();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof fl){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof fl&&a.hasRTLText){this.hasRTLText=!0,rr.isLoading()||rr.isLoaded()||"deferred"!==nr()||ir();break}}for(var s in this.queryPadding=0,this.buckets){var c=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(c))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Xr},nu.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},nu.prototype.getBucket=function(t){return this.buckets[t.id]},nu.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kl(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kl(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},nu.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},nu.prototype.queryRenderedFeatures=function(t,e,n,i,r,o,a,s,c,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*c},t,e,n):{}},nu.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(o)for(var a=ri(e&&e.filter),s=this.tileID.canonical,c=s.z,l=s.x,u=s.y,h={z:c,x:l,y:u},d=0;d<o.length;d++){var p=o.feature(d);if(a.filter(new or(this.tileID.overscaledZ),p)){var f=n.getId(p,r),g=new Xl(p,c,l,u,f);g.tile=h,t.push(g)}}}},nu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},nu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},nu.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=O(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var o=this.expirationTime-e;o?this.expirationTime=i+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},nu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},nu.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets)if(e.style.hasLayer(i)){var r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var c=e&&e.style&&e.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(r)))}}}},nu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},nu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()},nu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},nu.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=D.now()+t},nu.prototype.setDependencies=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1)n[r[i]]=!0;this.dependencies[t]=n},nu.prototype.hasDependency=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=this.dependencies[i[n]];if(r)for(var o=0,a=e;o<a.length;o+=1)if(r[a[o]])return!0}return!1};var iu=a.performance,ru=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},iu.mark(this._marks.start)};ru.prototype.finish=function(){iu.mark(this._marks.end);var t=iu.getEntriesByName(this._marks.measure);return 0===t.length&&(iu.measure(this._marks.measure,this._marks.start,this._marks.end),t=iu.getEntriesByName(this._marks.measure),iu.clearMarks(this._marks.start),iu.clearMarks(this._marks.end),iu.clearMeasures(this._marks.measure)),t},t.Actor=Ll,t.AlphaImage=ga,t.CanonicalTileID=Zl,t.CollisionBoxArray=Xr,t.Color=Jt,t.DEMData=$l,t.DataConstantProperty=fr,t.DictionaryCoder=Kl,t.EXTENT=8192,t.ErrorEvent=At,t.EvaluationParameters=or,t.Event=It,t.Evented=Pt,t.FeatureIndex=Jl,t.FillBucket=rs,t.FillExtrusionBucket=Cs,t.ImageAtlas=vc,t.ImagePosition=gc,t.LineBucket=Ls,t.LngLat=Nl,t.LngLatBounds=Rl,t.MercatorCoordinate=Gl,t.ONE_EM=24,t.OverscaledTileID=Hl,t.Point=r,t.Point$1=r,t.Properties=br,t.Protobuf=$s,t.RGBAImage=ma,t.RequestManager=H,t.RequestPerformance=ru,t.ResourceType=ft,t.SegmentVector=oo,t.SourceFeatureState=ql,t.StructArrayLayout1ui2=Ur,t.StructArrayLayout2f1f2i16=jr,t.StructArrayLayout2i4=Pr,t.StructArrayLayout3ui6=Fr,t.StructArrayLayout4i8=Or,t.SymbolBucket=fl,t.Texture=kl,t.Tile=nu,t.Transitionable=cr,t.Uniform1f=bo,t.Uniform1i=yo,t.Uniform2f=_o,t.Uniform3f=Co,t.Uniform4f=xo,t.UniformColor=wo,t.UniformMatrix4f=Ao,t.UnwrappedTileID=Wl,t.ValidationError=Mt,t.WritingMode=yc,t.ZoomHistory=Gi,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=ul,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))},t.bezier=c,t.bindAll=v,t.browser=D,t.cacheEntryPossiblyAdded=function(t){++dt>ct&&(t.getActor().send("enforceCacheSizeLimit",st),dt=0)},t.clamp=u,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Zc,t.clone=function(t){var e=new ia(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=C,t.clone$2=function(t){var e=new ia(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Gs,t.config=F,t.create=function(){var t=new ia(16);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new ia(9);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new ia(4);return ia!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Hn,t.createLayout=Ir,t.createStyleLayer=function(t){return"custom"===t.type?new wl(t):new Il[t.type](t)},t.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],c=n[2];return t[0]=r*c-o*s,t[1]=o*a-i*c,t[2]=i*s-r*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=l,t.emitValidationErrors=ki,t.endsWith=y,t.enforceCacheSizeLimit=function(t){lt(),tt&&tt.then((function(e){e.keys().then((function(n){for(var i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Rc,t.evaluateSizeForZoom=Nc,t.evaluateVariableOffset=nl,t.evented=er,t.extend=d,t.featureFilter=ri,t.filterObject=_,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Sc,t.getAnchorJustification=il,t.getArrayBuffer=_t,t.getImage=function t(e,n){if(z.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),mt>=F.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return gt.push(i),i}mt++;var r=!1,o=function(){if(!r)for(r=!0,mt--;gt.length&&mt<F.MAX_PARALLEL_IMAGE_REQUESTS;){var e=gt.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},s=_t(e,(function(t,e,i,r){o(),t?n(t):e&&(pt()?function(t,e){var n=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(e,n):function(t,e,n,i){var r=new a.Image,o=a.URL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=n,r.expires=i,r.src=t.byteLength?o.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(e,n,i,r))}));return{cancel:function(){s.cancel(),o()}}},t.getJSON=function(t,e){return bt(d(t,{type:"json"}),e)},t.getRTLTextPluginStatus=nr,t.getReferrer=yt,t.getVideo=function(t,e){var n,i,r=a.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");n=t[o],i=void 0,(i=a.document.createElement("a")).href=n,(i.protocol!==a.document.location.protocol||i.host!==a.document.location.host)&&(r.crossOrigin="Anonymous"),s.src=t[o],r.appendChild(s)}return{cancel:function(){}}},t.identity=ra,t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],y=n*s-i*a,b=n*c-r*a,_=n*l-o*a,C=i*c-r*s,x=i*l-o*s,w=r*l-o*c,I=u*g-h*f,A=u*m-d*f,P=u*v-p*f,O=h*m-d*g,M=h*v-p*g,S=d*v-p*m,k=y*S-b*M+_*O+C*P-x*A+w*I;return k?(t[0]=(s*S-c*M+l*O)*(k=1/k),t[1]=(r*M-i*S-o*O)*k,t[2]=(g*w-m*x+v*C)*k,t[3]=(d*x-h*w-p*C)*k,t[4]=(c*P-a*S-l*A)*k,t[5]=(n*S-r*P+o*A)*k,t[6]=(m*_-f*w-v*b)*k,t[7]=(u*w-d*_+p*b)*k,t[8]=(a*M-s*P+l*I)*k,t[9]=(i*P-n*M-o*I)*k,t[10]=(f*x-g*_+v*y)*k,t[11]=(h*_-u*x-p*y)*k,t[12]=(s*A-a*O-c*I)*k,t[13]=(n*O-i*A+r*I)*k,t[14]=(g*b-f*C-m*y)*k,t[15]=(u*C-h*b+d*y)*k,t):null},t.isChar=Zi,t.isMapboxURL=U,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.makeRequest=bt,t.mapObject=b,t.mercatorXfromLng=Dl,t.mercatorYfromLat=Fl,t.mercatorZfromAltitude=zl,t.mul=sa,t.multiply=oa,t.mvt=vs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ge,t.offscreenCanvasSupported=pt,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),c=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*c,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new $s(t).readFields(hc,[])},t.pbf=$s,t.performSymbolLayout=function(t,e,n,i,r,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,c=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var u=t.textSizeData,h=u.maxZoom;l.compositeTextSizes=[c["text-size"].possiblyEvaluate(new or(u.minZoom),a),c["text-size"].possiblyEvaluate(new or(h),a)]}if("composite"===t.iconSizeData.kind){var d=t.iconSizeData,p=d.maxZoom;l.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new or(d.minZoom),a),c["icon-size"].possiblyEvaluate(new or(p),a)]}l.layoutTextSize=c["text-size"].possiblyEvaluate(new or(t.zoom+1),a),l.layoutIconSize=c["icon-size"].possiblyEvaluate(new or(t.zoom+1),a),l.textMaxSize=c["text-size"].possiblyEvaluate(new or(18));for(var f=24*s.get("text-line-height"),g="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),v=s.get("text-size"),y=function(){var o=_[b],c=s.get("text-font").evaluate(o,{},a).join(","),u=v.evaluate(o,{},a),h=l.layoutTextSize.evaluate(o,{},a),d=l.layoutIconSize.evaluate(o,{},a),p={horizontal:{},vertical:void 0},y=o.text,C=[0,0];if(y){var x=y.toString(),I=24*s.get("text-letter-spacing").evaluate(o,{},a),A=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i=n[e].charCodeAt(0),Zi.Arabic(i)||Zi["Arabic Supplement"](i)||Zi["Arabic Extended-A"](i)||Zi["Arabic Presentation Forms-A"](i)||Zi["Arabic Presentation Forms-B"](i))return!1;var i;return!0}(x)?I:0,P=s.get("text-anchor").evaluate(o,{},a),O=s.get("text-variable-anchor");if(!O){var M=s.get("text-radial-offset").evaluate(o,{},a);C=M?nl(P,[24*M,el]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var S=g?"center":s.get("text-justify").evaluate(o,{},a),k=s.get("symbol-placement"),E="point"===k?24*s.get("text-max-width").evaluate(o,{},a):0,L=function(){t.allowVerticalPlacement&&Wi(x)&&(p.vertical=Cc(y,e,n,r,c,E,f,P,"left",A,C,yc.vertical,!0,k,h,u))};if(!g&&O){for(var T="auto"===S?O.map((function(t){return il(t)})):[S],R=!1,N=0;N<T.length;N++){var B=T[N];if(!p.horizontal[B])if(R)p.horizontal[B]=p.horizontal[0];else{var j=Cc(y,e,n,r,c,E,f,"center",B,A,C,yc.horizontal,!1,k,h,u);j&&(p.horizontal[B]=j,R=1===j.positionedLines.length)}}L()}else{"auto"===S&&(S=il(P));var D=Cc(y,e,n,r,c,E,f,P,S,A,C,yc.horizontal,!1,k,h,u);D&&(p.horizontal[S]=D),L(),Wi(x)&&g&&m&&(p.vertical=Cc(y,e,n,r,c,E,f,P,S,A,C,yc.vertical,!1,k,h,u))}}var F=void 0,z=!1;if(o.icon&&o.icon.name){var V=i[o.icon.name];V&&(F=function(t,e,n){var i=Sc(n),r=e[0]-t.displaySize[0]*i.horizontalAlign,o=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:r,right:r+t.displaySize[0]}}(r[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),z=V.sdf,void 0===t.sdfIcons?t.sdfIcons=V.sdf:t.sdfIcons!==V.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(V.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var G=ol(p.horizontal)||p.vertical;t.iconsInText=!!G&&G.iconsInText,(G||F)&&function(t,e,n,i,r,o,a,s,c,l,u){var h=o.textMaxSize.evaluate(e,{});void 0===h&&(h=a);var d,p=t.layers[0].layout,f=p.get("icon-offset").evaluate(e,{},u),g=ol(n.horizontal),m=a/24,v=t.tilePixelRatio*m,y=t.tilePixelRatio*h/24,b=t.tilePixelRatio*s,_=t.tilePixelRatio*p.get("symbol-spacing"),C=p.get("text-padding")*t.tilePixelRatio,x=p.get("icon-padding")*t.tilePixelRatio,I=p.get("text-max-angle")/180*Math.PI,A="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),P="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),O=p.get("symbol-placement"),M=_/2,S=p.get("icon-text-fit");i&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(d=Ec(i,n.vertical,S,p.get("icon-text-fit-padding"),f,m)),g&&(i=Ec(i,g,S,p.get("icon-text-fit-padding"),f,m)));var k=function(s,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,I,A){var P,O,M,S,k,E=t.addToLineVertexArray(e,n),L=0,T=0,R=0,N=0,B=-1,j=-1,D={},F=uo(""),z=0,V=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(z=(P=s.layout.get("text-offset").evaluate(_,{},I).map((function(t){return 24*t})))[0],V=P[1]):(z=24*s.layout.get("text-radial-offset").evaluate(_,{},I),V=el),t.allowVerticalPlacement&&i.vertical){var G=s.layout.get("text-rotate").evaluate(_,{},I)+90;S=new Xc(c,e,l,u,h,i.vertical,d,p,f,G),a&&(k=new Xc(c,e,l,u,h,a,m,v,f,G))}if(r){var Z=s.layout.get("icon-rotate").evaluate(_,{}),W="none"!==s.layout.get("icon-text-fit"),H=Wc(r,Z,x,W),U=a?Wc(a,Z,x,W):void 0;M=new Xc(c,e,l,u,h,r,m,v,!1,Z),L=4*H.length;var $=t.iconSizeData,K=null;"source"===$.kind?(K=[128*s.layout.get("icon-size").evaluate(_,{})])[0]>32640&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===$.kind&&((K=[128*C.compositeIconSizes[0].evaluate(_,{},I),128*C.compositeIconSizes[1].evaluate(_,{},I)])[0]>32640||K[1]>32640)&&w(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,H,K,b,y,_,!1,e,E.lineStartIndex,E.lineLength,-1,I),B=t.icon.placedSymbolArray.length-1,U&&(T=4*U.length,t.addSymbols(t.icon,U,K,b,y,_,yc.vertical,e,E.lineStartIndex,E.lineLength,-1,I),j=t.icon.placedSymbolArray.length-1)}for(var X in i.horizontal){var Y=i.horizontal[X];if(!O){F=uo(Y.text);var q=s.layout.get("text-rotate").evaluate(_,{},I);O=new Xc(c,e,l,u,h,Y,d,p,f,q)}var J=1===Y.positionedLines.length;if(R+=rl(t,e,Y,o,s,f,_,g,E,i.vertical?yc.horizontal:yc.horizontalOnly,J?Object.keys(i.horizontal):[X],D,B,C,I),J)break}i.vertical&&(N+=rl(t,e,i.vertical,o,s,f,_,g,E,yc.vertical,["vertical"],D,j,C,I));var Q=O?O.boxStartIndex:t.collisionBoxArray.length,tt=O?O.boxEndIndex:t.collisionBoxArray.length,et=S?S.boxStartIndex:t.collisionBoxArray.length,nt=S?S.boxEndIndex:t.collisionBoxArray.length,it=M?M.boxStartIndex:t.collisionBoxArray.length,rt=M?M.boxEndIndex:t.collisionBoxArray.length,ot=k?k.boxStartIndex:t.collisionBoxArray.length,at=k?k.boxEndIndex:t.collisionBoxArray.length,st=-1,ct=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ct(O,st),st=ct(S,st),st=ct(M,st);var lt=(st=ct(k,st))>-1?1:0;lt&&(st*=A/24),t.glyphOffsetArray.length>=fl.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,D.right>=0?D.right:-1,D.center>=0?D.center:-1,D.left>=0?D.left:-1,D.vertical||-1,B,j,F,Q,tt,et,nt,it,rt,ot,at,l,R,N,L,T,lt,0,d,z,V,st)}(t,h,s,n,i,r,d,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,C,A,c,b,x,P,f,e,o,l,u,a)};if("line"===O)for(var E=0,L=Zc(e.geometry,0,0,8192,8192);E<L.length;E+=1)for(var T=L[E],R=0,N=Gc(T,_,I,n.vertical||g,i,24,y,t.overscaling,8192);R<N.length;R+=1){var B=N[R];g&&al(t,g.text,M,B)||k(T,B)}else if("line-center"===O)for(var j=0,D=e.geometry;j<D.length;j+=1){var F=D[j];if(F.length>1){var z=Vc(F,I,n.vertical||g,i,24,y);z&&k(F,z)}}else if("Polygon"===e.type)for(var V=0,G=ts(e.geometry,0);V<G.length;V+=1){var Z=G[V],W=Jc(Z,16);k(Z[0],new Lc(W.x,W.y,0))}else if("LineString"===e.type)for(var H=0,U=e.geometry;H<U.length;H+=1){var $=U[H];k($,new Lc($[0].x,$[0].y,0))}else if("Point"===e.type)for(var K=0,X=e.geometry;K<X.length;K+=1)for(var Y=0,q=X[K];Y<q.length;Y+=1){var J=q[Y];k([J],new Lc(J.x,J.y,0))}}(t,o,p,F,i,l,h,d,C,z,a)},b=0,_=t.features;b<_.length;b+=1)y();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=rr,t.polygonIntersectsPolygon=Vo,t.postMapLoadEvent=at,t.postTurnstileEvent=rt,t.potpack=fc,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Bi,t.registerForPluginStateChange=function(t){return t({pluginStatus:qi,pluginURL:Ji}),er.on("pluginStateChange",t),t},t.renderColorRamp=ya,t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=i*c+o*s,t[1]=r*c+a*s,t[2]=i*-s+o*c,t[3]=r*-s+a*c,t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+u*i,t[6]=s*r+h*i,t[7]=c*r+d*i,t[8]=l*r-o*i,t[9]=u*r-a*i,t[10]=h*r-s*i,t[11]=d*r-c*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],c=e[3],l=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+u*i,t[2]=s*r+h*i,t[3]=c*r+d*i,t[4]=l*r-o*i,t[5]=u*r-a*i,t[6]=h*r-s*i,t[7]=d*r-c*i,t},t.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){st=t,ct=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===qi||"loading"===qi||"loaded"===qi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ji=D.resolveURL(t),qi="deferred",Yi=e,tr(),n||ir()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=Ot,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Bc,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=ca,t.translate=function(t,e,n){var i,r,o,a,s,c,l,u,h,d,p,f,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*g+s*m+h*v+e[12],t[13]=r*g+c*m+d*v+e[13],t[14]=o*g+l*m+p*v+e[14],t[15]=a*g+u*m+f*v+e[15]),t},t.triggerPluginCompletionEvent=Qi,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Oi,t.validateStyle=Pi,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=vs,t.version="1.12.0",t.warnOnce=w,t.webpSupported=z,t.window=a,t.wrap=h})),i(0,(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,o=t;r<o.length;r+=1)i+=e(o[r])+",";return i+"]"}for(var a=Object.keys(t).sort(),s="{",c=0;c<a.length;c++)s+=JSON.stringify(a[c])+":"+e(t[a[c]])+",";return s+"}"}function n(n){for(var i="",r=0,o=t.refProperties;r<o.length;r+=1)i+="/"+e(n[o[r]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var r=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var c=this._layers[s.id]=t.createStyleLayer(s);c._featureFilter=t.featureFilter(c.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,u=i;l<u.length;l+=1){var h=u[l];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var d=0,p=function(t,e){for(var i={},r=0;r<t.length;r++){var o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);var a=i[o];a||(a=i[o]=[]),a.push(t[r])}var s=[];for(var c in i)s.push(i[c]);return s}(t.values(this._layerConfigs),this.keyCache);d<p.length;d+=1){var f=p[d].map((function(t){return r._layers[t.id]})),g=f[0];if("none"!==g.visibility){var m=g.source||"",v=this.familiesBySource[m];v||(v=this.familiesBySource[m]={});var y=g.sourceLayer||"_geojsonTileLayer",b=v[y];b||(b=v[y]=[]),b.push(f)}}};var r=function(e){var n={},i=[];for(var r in e){var o=e[r],a=n[r]={};for(var s in o){var c=o[+s];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var l={x:0,y:0,w:c.bitmap.width+2,h:c.bitmap.height+2};i.push(l),a[s]={rect:l,metrics:c.metrics}}}}var u=t.potpack(i),h=new t.AlphaImage({width:u.w||1,height:u.h||1});for(var d in e){var p=e[d];for(var f in p){var g=p[+f];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var m=n[d][f].rect;t.AlphaImage.copy(g.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},g.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",r);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,i){for(var r=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(r,i)}function s(e,n){var i=t.getArrayBuffer(e.request,(function(e,i,r,o){e?n(e):i&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:r,expires:o})}));return function(){i.cancel(),n()}}o.prototype.parse=function(e,n,i,o,s){var c=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];var h,d,p,f,g={},m={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},v=n.familiesBySource[this.source];for(var y in v){var b=e.layers[y];if(b){1===b.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=l.encode(y),C=[],x=0;x<b.length;x++){var w=b.feature(x),I=u.getId(w,y);C.push({feature:w,id:I,index:x,sourceLayerIndex:_})}for(var A=0,P=v[y];A<P.length;A+=1){var O=P[A],M=O[0];M.minzoom&&this.zoom<Math.floor(M.minzoom)||M.maxzoom&&this.zoom>=M.maxzoom||"none"!==M.visibility&&(a(O,this.zoom,i),(g[M.id]=M.createBucket({index:u.bucketLayerIDs.length,layers:O,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(C,m,this.tileID.canonical),u.bucketLayerIDs.push(O.map((function(t){return t.id}))))}}}var S=t.mapObject(m.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(S).length?o.send("getGlyphs",{uid:this.uid,stacks:S},(function(t,e){h||(h=t,d=e,L.call(c))})):d={};var k=Object.keys(m.iconDependencies);k.length?o.send("getImages",{icons:k,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,p=e,L.call(c))})):p={};var E=Object.keys(m.patternDependencies);function L(){if(h)return s(h);if(d&&p&&f){var e=new r(d),n=new t.ImageAtlas(p,f);for(var o in g){var c=g[o];c instanceof t.SymbolBucket?(a(c.layers,this.zoom,i),t.performSymbolLayout(c,d,e.positions,p,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):c.hasPattern&&(c instanceof t.LineBucket||c instanceof t.FillBucket||c instanceof t.FillExtrusionBucket)&&(a(c.layers,this.zoom,i),c.addFeatures(m,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:t.values(g).filter((function(t){return!t.isEmpty()})),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}E.length?o.send("getImages",{icons:E,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,f=e,L.call(c))})):f={},L.call(this)};var c=function(t,e,n,i){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||s,this.loading={},this.loaded={}};c.prototype.loadTile=function(e,n){var i=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[r]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete i.loading[r],e||!o)return s.status="done",i.loaded[r]=s,n(e);var c=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);var u={};if(a){var h=a.finish();h&&(u.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:c.slice(0)},i,l,u))})),i.loaded=i.loaded||{},i.loaded[r]=s}))},c.prototype.reloadTile=function(t,e){var n=this,i=this.loaded,r=t.uid,o=this;if(i&&i[r]){var a=i[r];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,r)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},c.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},c.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var l=t.window.ImageBitmap,u=function(){this.loaded={}};function h(t,e){if(0!==t.length){d(t[0],e);for(var n=1;n<t.length;n++)d(t[n],!e)}}function d(t,e){for(var n=0,i=0,r=t.length,o=r-1;i<r;o=i++)n+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);n>=0!=!!e&&t.reverse()}u.prototype.loadTile=function(e,n){var i=e.uid,r=e.encoding,o=e.rawImageData,a=l&&o instanceof l?this.getImageData(o):o,s=new t.DEMData(i,a,r);this.loaded=this.loaded||{},this.loaded[i]=s,n(null,s)},u.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},u.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var r=i[n];e.push([new t.Point$1(r[0],r[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var c=[],l=0,u=s[a];l<u.length;l+=1){var h=u[l];c.push(new t.Point$1(h[0],h[1]))}o.push(c)}return o},f.prototype.toGeoJSON=function(t,e,n){return p.call(this,t,e,n)};var g=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};g.prototype.feature=function(t){return new f(this._features[t])};var m=t.vectorTile.VectorTileFeature,v=y;function y(t,e){this.options=e||{},this.features=t,this.length=t.length}function b(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}y.prototype.feature=function(t){return new b(this.features[t],this.options.extent)},b.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.Point$1(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var c=a[s];e=Math.min(e,c.x),n=Math.max(n,c.x),i=Math.min(i,c.y),r=Math.max(r,c.y)}return[e,i,n,r]},b.prototype.toGeoJSON=m.prototype.toGeoJSON;var _=x,C=v;function x(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,w,t.layers[n])}(e,n),n.finish()}function w(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,I,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,S,o[n])}function I(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,A,t),e.writeVarintField(3,n.type),e.writeMessage(4,M,n)}function A(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var c=o[s];void 0===c&&(i.push(s),o[s]=c=i.length-1),e.writeVarint(c);var l=n.properties[s],u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(r.push(l),a[h]=d=r.length-1),e.writeVarint(d)}}function P(t,e){return(e<<3)+(7&t)}function O(t){return t<<1^t>>31}function M(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var c=n[s],l=1;1===i&&(l=c.length),e.writeVarint(P(1,l));for(var u=3===i?c.length-1:c.length,h=0;h<u;h++){1===h&&1!==i&&e.writeVarint(P(2,u-1));var d=c[h].x-r,p=c[h].y-o;e.writeVarint(O(d)),e.writeVarint(O(p)),r+=d,o+=p}3===i&&e.writeVarint(P(7,1))}}function S(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function k(t,e,n,i){E(t,n,i),E(e,2*n,2*i),E(e,2*n+1,2*i+1)}function E(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function L(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}_.fromVectorTileJs=x,_.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new v(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return x({layers:n})},_.GeoJSONWrapper=C;var T=function(t){return t[0]},R=function(t){return t[1]},N=function(t,e,n,i,r){void 0===e&&(e=T),void 0===n&&(n=R),void 0===i&&(i=64),void 0===r&&(r=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),c=0;c<t.length;c++)a[c]=c,s[2*c]=e(t[c]),s[2*c+1]=n(t[c]);!function t(e,n,i,r,o,a){if(!(o-r<=i)){var s=r+o>>1;!function t(e,n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,c=i-r+1,l=Math.log(s),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1);t(e,n,i,Math.max(r,Math.floor(i-c*u/s+h)),Math.min(o,Math.floor(i+(s-c)*u/s+h)),a)}var d=n[2*i+a],p=r,f=o;for(k(e,n,r,i),n[2*o+a]>d&&k(e,n,r,o);p<f;){for(k(e,n,p,f),p++,f--;n[2*p+a]<d;)p++;for(;n[2*f+a]>d;)f--}n[2*r+a]===d?k(e,n,r,f):k(e,n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(e,n,s,r,o,a%2),t(e,n,i,r,s-1,a+1),t(e,n,i,s+1,o,a+1)}}(a,s,i,0,a.length-1,0)};N.prototype.range=function(t,e,n,i){return function(t,e,n,i,r,o,a){for(var s,c,l=[0,t.length-1,0],u=[];l.length;){var h=l.pop(),d=l.pop(),p=l.pop();if(d-p<=a)for(var f=p;f<=d;f++)c=e[2*f+1],(s=e[2*f])>=n&&s<=r&&c>=i&&c<=o&&u.push(t[f]);else{var g=Math.floor((p+d)/2);c=e[2*g+1],(s=e[2*g])>=n&&s<=r&&c>=i&&c<=o&&u.push(t[g]);var m=(h+1)%2;(0===h?n<=s:i<=c)&&(l.push(p),l.push(g-1),l.push(m)),(0===h?r>=s:o>=c)&&(l.push(g+1),l.push(d),l.push(m))}}return u}(this.ids,this.coords,t,e,n,i,this.nodeSize)},N.prototype.within=function(t,e,n){return function(t,e,n,i,r,o){for(var a=[0,t.length-1,0],s=[],c=r*r;a.length;){var l=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o)for(var d=h;d<=u;d++)L(e[2*d],e[2*d+1],n,i)<=c&&s.push(t[d]);else{var p=Math.floor((h+u)/2),f=e[2*p],g=e[2*p+1];L(f,g,n,i)<=c&&s.push(t[p]);var m=(l+1)%2;(0===l?n-r<=f:i-r<=g)&&(a.push(h),a.push(p-1),a.push(m)),(0===l?n+r>=f:i+r>=g)&&(a.push(p+1),a.push(u),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var B={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},j=function(t){this.options=W(Object.create(B),t),this.trees=new Array(this.options.maxZoom+1)};function D(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function F(t,e){var n=t.geometry.coordinates,i=n[1];return{x:G(n[0]),y:Z(i),zoom:1/0,index:e,parentId:-1}}function z(t){return{type:"Feature",id:t.id,properties:V(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,i}function V(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return W(W({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function G(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function W(t,e){for(var n in e)t[n]=e[n];return t}function H(t){return t.x}function U(t){return t.y}function $(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var c=((t-n)*a+(e-i)*s)/(a*a+s*s);c>1?(n=r,i=o):c>0&&(n+=a*c,i+=s*c)}return(a=t-n)*a+(s=e-i)*s}function K(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)X(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)X(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)X(t,e[i][r])}(r),r}function X(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Y(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],c=e.id;if(n.promoteId?c=e.properties[n.promoteId]:n.generateId&&(c=i||0),"Point"===o)q(r,s);else if("MultiPoint"===o)for(var l=0;l<r.length;l++)q(r[l],s);else if("LineString"===o)J(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<r.length;l++)J(r[l],s=[],a,!1),t.push(K(c,"LineString",s,e.properties));return}Q(r,s,a,!1)}else if("Polygon"===o)Q(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)Y(t,{id:c,geometry:e.geometry.geometries[l],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<r.length;l++){var u=[];Q(r[l],u,a,!0),s.push(u)}}t.push(K(c,o,s,e.properties))}}function q(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function J(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var c=tt(t[s][0]),l=et(t[s][1]);e.push(c),e.push(l),e.push(0),s>0&&(a+=i?(r*l-c*o)/2:Math.sqrt(Math.pow(c-r,2)+Math.pow(l-o,2))),r=c,o=l}var u=e.length-3;e[2]=1,function t(e,n,i,r){for(var o,a=r,s=i-n>>1,c=i-n,l=e[n],u=e[n+1],h=e[i],d=e[i+1],p=n+3;p<i;p+=3){var f=$(e[p],e[p+1],l,u,h,d);if(f>a)o=p,a=f;else if(f===a){var g=Math.abs(p-s);g<c&&(o=p,c=g)}}a>r&&(o-n>3&&t(e,n,o,r),e[o+2]=a,i-o>3&&t(e,o,i,r))}(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Q(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];J(t[r],o,n,i),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var c=[],l=0;l<t.length;l++){var u=t[l],h=u.geometry,d=u.type,p=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(p>=n&&f<i)c.push(u);else if(!(f<n||p>=i)){var g=[];if("Point"===d||"MultiPoint"===d)it(h,g,n,i,r);else if("LineString"===d)rt(h,g,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)at(h,g,n,i,r,!1);else if("Polygon"===d)at(h,g,n,i,r,!0);else if("MultiPolygon"===d)for(var m=0;m<h.length;m++){var v=[];at(h[m],v,n,i,r,!0),v.length&&g.push(v)}if(g.length){if(s.lineMetrics&&"LineString"===d){for(m=0;m<g.length;m++)c.push(K(u.id,d,g[m],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===g.length?(d="LineString",g=g[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===g.length?"Point":"MultiPoint"),c.push(K(u.id,d,g,u.tags))}}}return c.length?c:null}function it(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function rt(t,e,n,i,r,o,a){for(var s,c,l=ot(t),u=0===r?ct:lt,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],g=t[d+2],m=t[d+3],v=t[d+4],y=0===r?p:f,b=0===r?m:v,_=!1;a&&(s=Math.sqrt(Math.pow(p-m,2)+Math.pow(f-v,2))),y<n?b>n&&(c=u(l,p,f,m,v,n),a&&(l.start=h+s*c)):y>i?b<i&&(c=u(l,p,f,m,v,i),a&&(l.start=h+s*c)):st(l,p,f,g),b<n&&y>=n&&(c=u(l,p,f,m,v,n),_=!0),b>i&&y<=i&&(c=u(l,p,f,m,v,i),_=!0),!o&&_&&(a&&(l.end=h+s*c),e.push(l),l=ot(t)),a&&(h+=s)}var C=t.length-3;p=t[C],f=t[C+1],g=t[C+2],(y=0===r?p:f)>=n&&y<=i&&st(l,p,f,g),C=l.length-3,o&&C>=3&&(l[C]!==l[0]||l[C+1]!==l[1])&&st(l,l[0],l[1],l[2]),l.length&&e.push(l)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,i,r,o){for(var a=0;a<t.length;a++)rt(t[a],e,n,i,r,o,!1)}function st(t,e,n,i){t.push(e),t.push(n),t.push(i)}function ct(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function lt(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function ut(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=ht(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(ht(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var c=[],l=0;l<o.geometry[s].length;l++)c.push(ht(o.geometry[s][l],e));r.push(c)}n.push(K(o.id,a,r,o.tags))}return n}function ht(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function dt(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var c=t.features[n],l=c.geometry,u=c.type;if(c.geometry=[],1===u)for(i=0;i<l.length;i+=2)c.geometry.push(pt(l[i],l[i+1],e,o,a,s));else for(i=0;i<l.length;i++){var h=[];for(r=0;r<l[i].length;r+=2)h.push(pt(l[i][r],l[i][r+1],e,o,a,s));c.geometry.push(h)}}return t.transformed=!0,t}function pt(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function ft(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,gt(a,t[s],o,r);var c=t[s].minX,l=t[s].minY,u=t[s].maxX,h=t[s].maxY;c<a.minX&&(a.minX=c),l<a.minY&&(a.minY=l),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function gt(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)mt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)mt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var c=0;c<r.length;c++){var l=r[c];for(s=0;s<l.length;s++)mt(a,l[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function mt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],c=0;c<e.length;c+=3)(0===i||e[c+2]>a)&&(n.numSimplified++,s.push(e[c]),s.push(e[c+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function vt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)Y(n,t.features[i],e,i);else Y(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=nt(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=ut(r,1).concat(i)),o&&(i=i.concat(ut(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yt(t,e,n){return 32*((1<<t)*n+e)+t}function bt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var r=new g(i.features),o=_(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}j.prototype.load=function(t){var e=this.options,n=e.log,i=e.minZoom,r=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],c=0;c<t.length;c++)t[c].geometry&&s.push(F(t[c],c));this.trees[r+1]=new N(s,H,U,o,Float32Array),n&&console.timeEnd(a);for(var l=r;l>=i;l--){var u=+Date.now();s=this._cluster(s,l),this.trees[l]=new N(s,H,U,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-u)}return n&&console.timeEnd("total time"),this},j.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){var a=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return a.concat(s)}for(var c=this.trees[this._limitZoom(e)],l=[],u=0,h=c.range(G(n),Z(o),G(r),Z(i));u<h.length;u+=1){var d=c.points[h[u]];l.push(d.numPoints?z(d):this.points[d.index])}return l},j.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var o=r.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],c=0,l=r.within(o.x,o.y,a);c<l.length;c+=1){var u=r.points[l[c]];u.parentId===t&&s.push(u.numPoints?z(u):this.points[u.index])}if(0===s.length)throw new Error(i);return s},j.prototype.getLeaves=function(t,e,n){var i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i},j.prototype.getTile=function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/r,c=(n+1+a)/r,l={features:[]};return this._addTileFeatures(i.range((e-a)/r,s,(e+1+a)/r,c),i.points,e,n,r,l),0===e&&this._addTileFeatures(i.range(1-a/r,s,1,c),i.points,r,n,r,l),e===r-1&&this._addTileFeatures(i.range(0,s,a/r,c),i.points,-1,n,r,l),l.features.length?l:null},j.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},j.prototype._appendLeaves=function(t,e,n,i,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],c=s.properties;if(c&&c.cluster?r+c.point_count<=i?r+=c.point_count:r=this._appendLeaves(t,c.cluster_id,n,i,r):r<i?r++:t.push(s),t.length===n)break}return r},j.prototype._addTileFeatures=function(t,e,n,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var c=e[s[a]],l=c.numPoints,u={type:1,geometry:[[Math.round(this.options.extent*(c.x*r-n)),Math.round(this.options.extent*(c.y*r-i))]],tags:l?V(c):this.points[c.index].properties},h=void 0;l?h=c.id:this.options.generateId?h=c.index:this.points[c.index].id&&(h=this.points[c.index].id),void 0!==h&&(u.id=h),o.features.push(u)}},j.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},j.prototype._cluster=function(t,e){for(var n=[],i=this.options,r=i.reduce,o=i.minPoints,a=i.radius/(i.extent*Math.pow(2,e)),s=0;s<t.length;s++){var c=t[s];if(!(c.zoom<=e)){c.zoom=e;for(var l=this.trees[e+1],u=l.within(c.x,c.y,a),h=c.numPoints||1,d=h,p=0,f=u;p<f.length;p+=1){var g=l.points[f[p]];g.zoom>e&&(d+=g.numPoints||1)}if(d>=o){for(var m=c.x*h,v=c.y*h,y=r&&h>1?this._map(c,!0):null,b=(s<<5)+(e+1)+this.points.length,_=0,C=u;_<C.length;_+=1){var x=l.points[C[_]];if(!(x.zoom<=e)){x.zoom=e;var w=x.numPoints||1;m+=x.x*w,v+=x.y*w,x.parentId=b,r&&(y||(y=this._map(c,!0)),r(y,this._map(x)))}}c.parentId=b,n.push(D(m/d,v/d,b,d,y))}else if(n.push(c),d>1)for(var I=0,A=u;I<A.length;I+=1){var P=l.points[A[I]];P.zoom<=e||(P.zoom=e,n.push(P))}}}return n},j.prototype._getOriginId=function(t){return t-this.points.length>>5},j.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},j.prototype._map=function(t,e){if(t.numPoints)return e?W({},t.properties):t.properties;var n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?W({},i):i},vt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],c=this.options,l=c.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=yt(e,n,i),d=this.tiles[h];if(!d&&(l>1&&console.time("creation"),d=this.tiles[h]=ft(t,e,n,i,c),this.tileCoords.push({z:e,x:n,y:i}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,r){if(e===c.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(o/f)||i!==Math.floor(a/f))continue}else if(e===c.indexMaxZoom||d.numPoints<=c.indexMaxPoints)continue;if(d.source=null,0!==t.length){l>1&&console.time("clipping");var g,m,v,y,b,_,C=.5*c.buffer/c.extent,x=.5-C,w=.5+C,I=1+C;g=m=v=y=null,b=nt(t,u,n-C,n+w,0,d.minX,d.maxX,c),_=nt(t,u,n+x,n+I,0,d.minX,d.maxX,c),t=null,b&&(g=nt(b,u,i-C,i+w,1,d.minY,d.maxY,c),m=nt(b,u,i+x,i+I,1,d.minY,d.maxY,c),b=null),_&&(v=nt(_,u,i-C,i+w,1,d.minY,d.maxY,c),y=nt(_,u,i+x,i+I,1,d.minY,d.maxY,c),_=null),l>1&&console.timeEnd("clipping"),s.push(g||[],e+1,2*n,2*i),s.push(m||[],e+1,2*n,2*i+1),s.push(v||[],e+1,2*n+1,2*i),s.push(y||[],e+1,2*n+1,2*i+1)}}},vt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=yt(t,e=(e%a+a)%a,n);if(this.tiles[s])return dt(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,l=t,u=e,h=n;!c&&l>0;)l--,u=Math.floor(u/2),h=Math.floor(h/2),c=this.tiles[yt(l,u,h)];return c&&c.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,u,h),o>1&&console.time("drilling down"),this.splitTile(c.source,l,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?dt(this.tiles[s],r):null):null};var _t=function(e){function n(t,n,i,r){e.call(this,t,n,i,bt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)h(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)h(e.coordinates[i],n);return e}(a,!0);try{if(i.filter){var s=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var c=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:c}}e._geoJSONIndex=i.cluster?new j(function(e){var n=e.superclusterOptions,i=e.clusterProperties;if(!i||!n)return n;for(var r={},o={},a={accumulated:null,zoom:0},s={properties:null},c=Object.keys(i),l=0,u=c;l<u.length;l+=1){var h=u[l],d=i[h],p=d[0],f=t.createExpression(d[1]),g=t.createExpression("string"==typeof p?[p,["accumulated"],["get",h]]:p);r[h]=f.value,o[h]=g.value}return n.map=function(t){s.properties=t;for(var e={},n=0,i=c;n<i.length;n+=1){var o=i[n];e[o]=r[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,i=c;n<i.length;n+=1){var r=i[n];a.accumulated=t[r],t[r]=o[r].evaluate(a,s)}},n}(i)).load(a.features):function(t,e){return new vt(t,e)}(a,i.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var l={};if(r){var u=r.finish();u&&(l.resourceTiming={},l.resourceTiming[i.source]=JSON.parse(JSON.stringify(u)))}n(null,l)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(c),Ct=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:_t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(t,e){this.referrer=e},Ct.prototype.setImages=function(t,e,n){for(var i in this.availableImages[t]=e,this.workerSources[t]){var r=this.workerSources[t][i];for(var o in r)r[o].availableImages=e}n()},Ct.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Ct.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Ct.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Ct.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Ct.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Ct.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Ct.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Ct.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ct.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},Ct.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Ct.prototype.syncRTLPluginState=function(e,n,i){try{t.plugin.setState(n);var r=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=r){this.self.importScripts(r);var o=t.plugin.isParsed();i(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+r),o)}}catch(t){i(t.toString())}},Ct.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Ct.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},Ct.prototype.getWorkerSource=function(t,e,n){var i=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,r){i.actor.send(e,n,r,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},Ct.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new u),this.demWorkerSources[t][e]},Ct.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ct(self)),Ct})),i(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[n=t&&t.failIfMajorPerformanceCaveat]&&(i[n]=function(t){var n=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t);if(!n)return!1;var i=n.createShader(n.VERTEX_SHADER);return!(!i||n.isContextLost())&&(n.shaderSource(i,"void main() {}"),n.compileShader(i),!0===n.getShaderParameter(i,n.COMPILE_STATUS))}(n)),i[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,i){var r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},i=t.window.document&&t.window.document.documentElement.style;function r(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var o,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){i&&a&&(o=i[a],i[a]="none")},n.enableDrag=function(){i&&a&&(i[a]=o)};var s=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var c=!1;try{var l=Object.defineProperty({},"passive",{get:function(){c=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){c=!1}n.addEventListener=function(t,e,n,i){void 0===i&&(i={}),t.addEventListener(e,n,"passive"in i&&c?i:i.capture)},n.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),t.removeEventListener(e,n,"passive"in i&&c?i:i.capture)};var u=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",u,!0)}),0)},n.mousePos=function(e,n){var i=e.getBoundingClientRect();return new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},n.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),r=[],o=0;o<n.length;o++)r.push(new t.Point(n[o].clientX-i.left-e.clientLeft,n[o].clientY-i.top-e.clientTop));return r},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var d=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1)this.images[r[i]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,i)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},o=new t.ImagePosition(r,i);this.patterns[e]={bin:r,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),r=i.w,o=i.h,a=this.atlasImage;for(var s in a.resize({width:r||1,height:o||1}),this.patterns){var c=this.patterns[s].bin,l=c.x+1,u=c.y+1,h=this.images[s].data,d=h.width,p=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:u},{width:d,height:p}),t.RGBAImage.copy(h,a,{x:0,y:p-1},{x:l,y:u-1},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:u+p},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:d-1,y:0},{x:l-1,y:u},{width:1,height:p}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l+d,y:u},{width:1,height:p})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var r=this.images[i];h(r)&&this.updateImage(i,r)}}},n}(t.Evented),p=m,f=m,g=1e20;function m(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(t,e,n,i,r,o,a){for(var s=0;s<e;s++){for(var c=0;c<n;c++)i[c]=t[c*e+s];for(y(i,r,o,a,n),c=0;c<n;c++)t[c*e+s]=r[c]}for(c=0;c<n;c++){for(s=0;s<e;s++)i[s]=t[c*e+s];for(y(i,r,o,a,e),s=0;s<e;s++)t[c*e+s]=Math.sqrt(r[s])}}function y(t,e,n,i,r){n[0]=0,i[0]=-g,i[1]=+g;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,i[a]=s,i[a+1]=+g}for(o=0,a=0;o<r;o++){for(;i[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?g:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?g:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)n[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return n},p.default=f;var b=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};b.prototype.setURL=function(t){this.url=t},b.prototype.getGlyphs=function(e,n){var i=this,r=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)r.push({stack:o,id:s[a]});t.asyncAll(r,(function(t,e){var n=t.stack,r=t.id,o=i.entries[n];o||(o=i.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[r];if(void 0===a){if(a=i._tinySDF(o,n,r))return o.glyphs[r]=a,void e(null,{stack:n,id:r,glyph:a});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:r,glyph:a});else{var c=o.requests[s];c||(c=o.requests[s]=[],b.loadGlyphRange(n,s,i.url,i.requestManager,(function(t,e){if(e){for(var n in e)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var r=0,a=c;r<a.length;r+=1)(0,a[r])(t,e);delete o.requests[s]}))),c.push((function(t,i){t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})}))}}else e(null,{stack:n,id:r,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.stack,c=a.id,l=a.glyph;(i[s]||(i[s]={}))[c]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,i)}}))},b.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},b.prototype._tinySDF=function(e,n,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new b.TinySDF(24,3,8,.25,r,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},b.loadGlyphRange=function(e,n,i,r,o){var a=256*n,s=a+255,c=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(c,(function(e,n){if(e)o(e);else if(n){for(var i={},r=0,a=t.parseGlyphPBF(n);r<a.length;r+=1){var s=a[r];i[s.id]=s}o(null,i)}}))},b.TinySDF=p;var _=function(){this.specification=t.styleSpec.light.position};_.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},_.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var C=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new _,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),x=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(C),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var i in e){var r=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),w=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};w.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},w.prototype.getDashRanges=function(t,e,n){var i=[],r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],c=1;c<t.length;c++){var l=t[c];i.push({left:r=s*n,right:o=(s+=l)*n,isDash:a=!a,zeroLength:0===l})}return i},w.prototype.addRoundDash=function(t,e,n){for(var i=e/2,r=-n;r<=n;r++)for(var o=this.width*(this.nextRow+n+r),a=0,s=t[a],c=0;c<this.width;c++){c/s.right>1&&(s=t[++a]);var l=Math.abs(c-s.left),u=Math.abs(c-s.right),h=Math.min(l,u),d=void 0,p=r/n*(i+1);if(s.isDash){var f=i-Math.abs(p);d=Math.sqrt(h*h+f*f)}else d=i-Math.sqrt(h*h+p*p);this.data[o+c]=Math.max(0,Math.min(255,d+128))}},w.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}var r=t[0],o=t[t.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);for(var a=this.width*this.nextRow,s=0,c=t[s],l=0;l<this.width;l++){l/c.right>1&&(c=t[++s]);var u=Math.abs(l-c.left),h=Math.abs(l-c.right),d=Math.min(u,h);this.data[a+l]=Math.max(0,Math.min(255,(c.isDash?d:-d)+128))}},w.prototype.addDash=function(e,n){var i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,c=this.getDashRanges(e,this.width,s);n?this.addRoundDash(c,s,i):this.addRegularDash(c)}var l={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,l},w.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var I=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),o=0;o<r.length;o++){var a=new e.Actor(r[o],i,this.id);a.name="Worker "+o,this.actors.push(a)}};function A(e,n,i){var r=function(r,o){if(r)return i(r);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),i(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}I.prototype.broadcast=function(e,n,i){t.asyncAll(this.actors,(function(t,i){t.send(e,n,i)}),i=i||function(){})},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},I.Actor=t.Actor;var P=function(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24};P.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},P.prototype.contains=function(e){var n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a};var O=function(e){function n(n,i,r,o){if(e.call(this),this.id=n,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new P(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},n.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),M=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new P(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var i=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),S=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,c={};return c[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(c[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(c[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),c},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(M),k=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(o),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(this.type+".loadData",i,(function(t,r){n._removed||r&&r.abandoned||(n._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[n.id]&&(n._resourceTiming=r.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:i.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var i=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,i.map.painter,"reloadTile"===r),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),E=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),L=function(e){function n(t,n,i,r){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,o){i._loaded=!0,r?i.fire(new t.ErrorEvent(r)):o&&(i.image=o,e&&(i.coordinates=e),n&&n(),i._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,i=1/0,r=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var c=s[a];n=Math.min(n,c.x),i=Math.min(i,c.y),r=Math.max(r,c.x),o=Math.max(o,c.y)}var l=Math.max(r-n,o-i),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,u);return new t.CanonicalTileID(u,Math.floor((n+r)/2*h),Math.floor((i+o)/2*h))}(i),this.minzoom=this.maxzoom=this.tileID.z;var r=i.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T=function(e){function n(t,n,i,r){e.call(this,t,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var i=0,r=n.urls;i<r.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(r[i],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,i){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(L),R=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[r];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(L),N={vector:O,raster:M,"raster-dem":S,geojson:k,video:T,image:L,canvas:R};function B(e,n){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function j(t,e,n,i,r,o){var a=function(t,e,n){if(t)for(var i=0,r=t;i<r.length;i+=1){var o=e[r[i]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),s=o.maxPitchScaleFactor(),c=t.tilesIn(i,s,a);c.sort(D);for(var l=[],u=0,h=c;u<h.length;u+=1){var d=h[u];l.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(e,n,t._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,r,o,s,B(t.transform,d.tileID))})}var p=function(t){for(var e={},n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.queryResults,s=o.wrappedTileID,c=n[s]=n[s]||{};for(var l in a)for(var u=a[l],h=c[l]=c[l]||{},d=e[l]=e[l]||[],p=0,f=u;p<f.length;p+=1){var g=f[p];h[g.featureIndex]||(h[g.featureIndex]=!0,d.push(g))}}return e}(l);for(var f in p)p[f].forEach((function(e){var n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return p}function D(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}var F=function(t,e){this.max=t,this.onRemove=e,this.reset()};F.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},F.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){i.remove(t,o)}),n)),this.data[r].push(o),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},F.prototype.has=function(t){return t.wrapped().key in this.data},F.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},F.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},F.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},F.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},F.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this},F.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},F.prototype.filter=function(t){var e=[];for(var n in this.data)for(var i=0,r=this.data[n];i<r.length;i+=1){var o=r[i];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var c=s[a];this.remove(c.value.tileID,c)}};var z=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};z.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},z.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},z.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var V={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},G=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};G.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},G.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},G.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},G.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[V[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},G.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Z=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Z.prototype.get=function(){return this.current},Z.prototype.set=function(t){},Z.prototype.getDefault=function(){return this.default},Z.prototype.setDefault=function(){this.set(this.default)};var W=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Z),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Z),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Z),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Z),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Z),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Z),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Z),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Z),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Z),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Z),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Z),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),rt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(Z),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Z),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Z),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Z),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Z),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Z),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Z),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Z),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Z),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Z),vt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Z),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Z),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),Ct=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(Z),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(Ct),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Ct),It=function(t,e,n,i){this.context=t,this.width=e,this.height=n;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new xt(t,r),i&&(this.depthAttachment=new wt(t,r))};It.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var At=function(t,e,n){this.func=t,this.mask=e,this.range=n};At.ReadOnly=!1,At.ReadWrite=!0,At.disabled=new At(519,At.ReadOnly,[0,1]);var Pt=function(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o};Pt.disabled=new Pt({func:519,mask:0},0,0,7680,7680,7680);var Ot=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ot.disabled=new Ot(Ot.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ot.unblended=new Ot(Ot.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ot.alphaBlended=new Ot([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Mt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Mt.disabled=new Mt(!1,1029,2305),Mt.backCCW=new Mt(!0,1029,2305);var St=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new W(this),this.clearDepth=new H(this),this.clearStencil=new U(this),this.colorMask=new $(this),this.depthMask=new K(this),this.stencilMask=new X(this),this.stencilFunc=new Y(this),this.stencilOp=new q(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new it(this),this.blendColor=new rt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ct(this),this.program=new lt(this),this.activeTexture=new ut(this),this.viewport=new ht(this),this.bindFramebuffer=new dt(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new gt(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new vt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new bt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};St.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(t,e){return new z(this,t,e)},St.prototype.createVertexBuffer=function(t,e,n){return new G(this,t,e,n)},St.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},St.prototype.createFramebuffer=function(t,e,n){return new It(this,t,e,n)},St.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},St.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},St.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Ot.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var kt=function(e){function n(n,i,r){var o=this;e.call(this),this.id=n,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,n,i,r){var o=new N[n.type](e,n,i,r);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,i,r,this),this._tiles={},this._cache=new F(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Et).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var r in this._tiles)this._isIdRenderable(r,e)&&i.push(this._tiles[r]);return e?i.sort((function(e,i){var r=e.tileID,o=i.tileID,a=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Et).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){var r=this.getTileByID(i);o(t,r),o(r,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var r in this._tiles){var o=this._tiles[r];if(!(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var c=a;c.overscaledZ>e;)if(t[(c=c.scaledTo(c.overscaledZ-1)).key]){i[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var i=t.overscaledZ-1;i>=e;i--){var r=t.scaledTo(i),o=this._getLoadedTile(r);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,i=Math.floor(e*n*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var i in this._tiles){var r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return i._source.hasTile(t)})))):r=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),c=this._updateRetainedTiles(r,o);if(Lt(this._source.type)){for(var l={},u={},h=0,d=Object.keys(c);h<d.length;h+=1){var p=d[h],f=c[p],g=this._tiles[p];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(f,a);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),u[p]=f}}for(var v in this._retainLoadedChildren(u,o,s,c),l)c[v]||(this._coveredTiles[v]=!0,c[v]=l[v])}for(var y in c)this._tiles[y].clearFadeHold();for(var b=0,_=t.keysDifference(this._tiles,c);b<_.length;b+=1){var C=_[b],x=this._tiles[C];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(C)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},c=0,l=t;c<l.length;c+=1){var u=l[c],h=this._addTile(u);i[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,a,i);for(var d=0,p=t;d<p.length;d+=1){var f=p[d],g=this._tiles[f.key];if(!g.hasData()){if(e+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],v=this.getTile(m);if(v&&v.hasData()){i[m.key]=m;continue}}else{var y=f.children(this._source.maxzoom);if(i[y[0].key]&&i[y[1].key]&&i[y[2].key]&&i[y[3].key])continue}for(var b=g.wasRequested(),_=f.overscaledZ-1;_>=o;--_){var C=f.scaledTo(_);if(r[C.key])break;if(r[C.key]=!0,!(g=this.getTile(C))&&b&&(g=this._addTile(C)),g&&(i[C.key]=C,b=g.wasRequested(),g.hasData()))break}}}return i},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,i=this._tiles[t].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);var r=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(r))break;i=r}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,i){var r=this,o=[],a=this.transform;if(!a)return o;for(var s=i?a.getCameraQueryGeometry(e):e,c=e.map((function(t){return a.pointCoordinate(t)})),l=s.map((function(t){return a.pointCoordinate(t)})),u=this.getIds(),h=1/0,d=1/0,p=-1/0,f=-1/0,g=0,m=l;g<m.length;g+=1){var v=m[g];h=Math.min(h,v.x),d=Math.min(d,v.y),p=Math.max(p,v.x),f=Math.max(f,v.y)}for(var y=function(e){var i=r._tiles[u[e]];if(!i.holdingForFade()){var s=i.tileID,g=Math.pow(2,a.zoom-i.tileID.overscaledZ),m=n*i.queryPadding*t.EXTENT/i.tileSize/g,v=[s.getTilePoint(new t.MercatorCoordinate(h,d)),s.getTilePoint(new t.MercatorCoordinate(p,f))];if(v[0].x-m<t.EXTENT&&v[0].y-m<t.EXTENT&&v[1].x+m>=0&&v[1].y+m>=0){var y=c.map((function(t){return s.getTilePoint(t)})),b=l.map((function(t){return s.getTilePoint(t)}));o.push({tile:i,tileID:s,queryGeometry:y,cameraQueryGeometry:b,scale:g})}}},b=0;b<u.length;b++)y(b);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,r=n;i<r.length;i+=1){var o=r[i];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var i=this._tiles[t];i&&i.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function Et(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Lt(t){return"raster"===t||"image"===t||"video"===t}function Tt(){return new t.window.Worker(Kr.workerUrl)}kt.maxOverzooming=10,kt.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",Nt=function(){this.active={}};Nt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Tt);return this.active[t]=!0,this.workers.slice()},Nt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Nt.prototype.isPreloaded=function(){return!!this.active[Rt]},Nt.prototype.numActive=function(){return Object.keys(this.active).length};var Bt,jt=Math.floor(t.browser.hardwareConcurrency/2);function Dt(){return Bt||(Bt=new Nt),Bt}function Ft(e,n){var i={};for(var r in e)"ref"!==r&&(i[r]=e[r]);return t.refProperties.forEach((function(t){t in n&&(i[t]=n[t])})),i}function zt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Ft(t[i],e[t[i].ref]));return t}Nt.workerCount=Math.max(Math.min(jt,6),1);var Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gt(t,e,n){n.push({command:Vt.addSource,args:[t,e[t]]})}function Zt(t,e,n){e.push({command:Vt.removeSource,args:[t]}),n[t]=!0}function Wt(t,e,n,i){Zt(t,n,i),Gt(t,e,n)}function Ht(e,n,i){var r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function Ut(e,n,i,r,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}))}function $t(t){return t.id}function Kt(t,e){return t[e.id]=e,t}var Xt=function(t,e){this.reset(t,e)};Xt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,i=this._distances[n],r=e*this.paddedLength+this.padding;i<r&&n<this._distances.length;)i=this._distances[++n];var o=n-1,a=this._distances[o],s=i-a,c=s>0?(r-a)/s:0;return this.points[o].mult(1-c).add(this.points[n].mult(c))};var Yt=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function qt(e,n,i,r,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Jt(e,n,i,r,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),i||t.rotateZ(a,a,-r.angle),a}return r.glCoordMatrix}function Qt(e,n){var i=[e.x,e.y,0,1];ue(i,i,n);var r=i[3];return{point:new t.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function te(t,e){return.5+t/e*.5}function ee(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function ne(e,n,i,r,o,a,s,c){var l=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(l,i.transform.zoom),h=[256/i.width*2+1,256/i.height*2+1],d=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();for(var p=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=i.transform.width/i.transform.height,m=!1,v=0;v<f.length;v++){var y=f.get(v);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!m)le(y.numGlyphs,d);else{m=!1;var b=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(b,b,n),ee(b,h)){var _=te(i.transform.cameraToCenterDistance,b[3]),C=t.evaluateSizeForFeature(l,u,y),x=s?C/_:C*_,w=new t.Point(y.anchorX,y.anchorY),I=Qt(w,o).point,A={},P=oe(y,x,!1,c,n,o,a,e.glyphOffsetArray,p,d,I,w,A,g);m=P.useVertical,(P.notEnoughRoom||m||P.needsFlipping&&oe(y,x,!0,c,n,o,a,e.glyphOffsetArray,p,d,I,w,A,g).notEnoughRoom)&&le(y.numGlyphs,d)}else le(y.numGlyphs,d)}}r?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function ie(t,e,n,i,r,o,a,s,c,l,u){var h=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(h-1),m=se(t*f,n,i,r,o,a,s.segment,d,p,c,l,u);if(!m)return null;var v=se(t*g,n,i,r,o,a,s.segment,d,p,c,l,u);return v?{first:m,last:v}:null}function re(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function oe(e,n,i,r,o,a,s,c,l,u,h,d,p,f){var g,m=n/24,v=e.lineOffsetX*m,y=e.lineOffsetY*m;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,C=e.lineStartIndex+e.lineLength,x=ie(m,c,v,y,i,h,d,e,l,a,p);if(!x)return{notEnoughRoom:!0};var w=Qt(x.first.point,s).point,I=Qt(x.last.point,s).point;if(r&&!i){var A=re(e.writingMode,w,I,f);if(A)return A}g=[x.first];for(var P=e.glyphStartIndex+1;P<b-1;P++)g.push(se(m*c.getoffsetX(P),v,y,i,h,d,e.segment,_,C,l,a,p));g.push(x.last)}else{if(r&&!i){var O=Qt(d,o).point,M=e.lineStartIndex+e.segment+1,S=new t.Point(l.getx(M),l.gety(M)),k=Qt(S,o),E=k.signedDistanceFromCamera>0?k.point:ae(d,S,O,1,o),L=re(e.writingMode,O,E,f);if(L)return L}var T=se(m*c.getoffsetX(e.glyphStartIndex),v,y,i,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,p);if(!T)return{notEnoughRoom:!0};g=[T]}for(var R=0,N=g;R<N.length;R+=1){var B=N[R];t.addDynamicAttributes(u,B.point,B.angle)}return{}}function ae(t,e,n,i,r){var o=Qt(t.add(t.sub(e)._unit()),r).point,a=n.sub(o);return n.add(a._mult(i/a.mag()))}function se(e,n,i,r,o,a,s,c,l,u,h,d){var p=r?e-n:e+n,f=p>0?1:-1,g=0;r&&(f*=-1,g=Math.PI),f<0&&(g+=Math.PI);for(var m=f>0?c+s:c+s+1,v=o,y=o,b=0,_=0,C=Math.abs(p),x=[];b+_<=C;){if((m+=f)<c||m>=l)return null;if(y=v,x.push(v),void 0===(v=d[m])){var w=new t.Point(u.getx(m),u.gety(m)),I=Qt(w,h);if(I.signedDistanceFromCamera>0)v=d[m]=I.point;else{var A=m-f;v=ae(0===b?a:new t.Point(u.getx(A),u.gety(A)),w,y,C-b+1,h)}}b+=_,_=y.dist(v)}var P=(C-b)/_,O=v.sub(y),M=O.mult(P)._add(y);M._add(O._unit()._perp()._mult(i*f));var S=g+Math.atan2(v.y-y.y,v.x-y.x);return x.push(M),{point:M,angle:S,path:x}}Yt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yt.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Yt.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Yt.prototype._insertBoxCell=function(t,e,n,i,r,o){this.boxCells[r].push(o)},Yt.prototype._insertCircleCell=function(t,e,n,i,r,o){this.circleCells[r].push(o)},Yt.prototype._query=function(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var c=0;c<this.circleKeys.length;c++){var l=this.circles[3*c],u=this.circles[3*c+1],h=this.circles[3*c+2];a.push({key:this.circleKeys[c],x1:l-h,y1:u-h,x2:l+h,y2:u+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a},Yt.prototype._queryCircle=function(t,e,n,i,r){var o=t-n,a=t+n,s=e-n,c=e+n;if(a<0||o>this.width||c<0||s>this.height)return!i&&[];var l=[];return this._forEachCell(o,s,a,c,this._queryCellCircle,l,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?l.length>0:l},Yt.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},Yt.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},Yt.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Yt.prototype._queryCell=function(t,e,n,i,r,o,a,s){var c=a.seenUids,l=this.boxCells[r];if(null!==l)for(var u=this.bboxes,h=0,d=l;h<d.length;h+=1){var p=d[h];if(!c.box[p]){c.box[p]=!0;var f=4*p;if(t<=u[f+2]&&e<=u[f+3]&&n>=u[f+0]&&i>=u[f+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:u[f],y1:u[f+1],x2:u[f+2],y2:u[f+3]})}}}var g=this.circleCells[r];if(null!==g)for(var m=this.circles,v=0,y=g;v<y.length;v+=1){var b=y[v];if(!c.circle[b]){c.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],t,e,n,i)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var C=m[_],x=m[_+1],w=m[_+2];o.push({key:this.circleKeys[b],x1:C-w,y1:x-w,x2:C+w,y2:x+w})}}}},Yt.prototype._queryCellCircle=function(t,e,n,i,r,o,a,s){var c=a.circle,l=a.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,d=0,p=u;d<p.length;d+=1){var f=p[d];if(!l.box[f]){l.box[f]=!0;var g=4*f;if(this._circleAndRectCollide(c.x,c.y,c.radius,h[g+0],h[g+1],h[g+2],h[g+3])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var v=this.circles,y=0,b=m;y<b.length;y+=1){var _=b[y];if(!l.circle[_]){l.circle[_]=!0;var C=3*_;if(this._circlesCollide(v[C],v[C+1],v[C+2],c.x,c.y,c.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},Yt.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var c=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),d=c;d<=u;d++)for(var p=l;p<=h;p++)if(r.call(this,t,e,n,i,this.xCellCount*p+d,o,a,s))return},Yt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Yt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Yt.prototype._circlesCollide=function(t,e,n,i,r,o){var a=i-t,s=r-e,c=n+o;return c*c>a*a+s*s},Yt.prototype._circleAndRectCollide=function(t,e,n,i,r,o,a){var s=(o-i)/2,c=Math.abs(t-(i+s));if(c>s+n)return!1;var l=(a-r)/2,u=Math.abs(e-(r+l));if(u>l+n)return!1;if(c<=s||u<=l)return!0;var h=c-s,d=u-l;return h*h+d*d<=n*n};var ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(ce,3*i)}}function ue(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}var he=function(t,e,n){void 0===e&&(e=new Yt(t.width+200,t.height+200,25)),void 0===n&&(n=new Yt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function de(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,n,i,r){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,c=t.y1*a+o.point.y,l=t.x2*a+o.point.x,u=t.y2*a+o.point.y;return!this.isInsideGrid(s,c,l,u)||!e&&this.grid.hitTest(s,c,l,u,r)?{box:[],offscreen:!1}:{box:[s,c,l,u],offscreen:this.isOffscreen(s,c,l,u)}},he.prototype.placeCollisionCircles=function(e,n,i,r,o,a,s,c,l,u,h,d,p){var f=[],g=new t.Point(n.anchorX,n.anchorY),m=Qt(g,a),v=te(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(u?o/v:o*v)/t.ONE_EM,b=Qt(g,s).point,_=ie(y,r,n.lineOffsetX*y,n.lineOffsetY*y,!1,b,g,n,i,s,{}),C=!1,x=!1,w=!0;if(_){for(var I=.5*d*v+p,A=new t.Point(-100,-100),P=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),O=new Xt,M=_.first,S=_.last,k=[],E=M.path.length-1;E>=1;E--)k.push(M.path[E]);for(var L=1;L<S.path.length;L++)k.push(S.path[L]);var T=2.5*I;if(c){var R=k.map((function(t){return Qt(t,c)}));k=R.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:R.map((function(t){return t.point}))}var N=[];if(k.length>0){for(var B=k[0].clone(),j=k[0].clone(),D=1;D<k.length;D++)B.x=Math.min(B.x,k[D].x),B.y=Math.min(B.y,k[D].y),j.x=Math.max(j.x,k[D].x),j.y=Math.max(j.y,k[D].y);N=B.x>=A.x&&j.x<=P.x&&B.y>=A.y&&j.y<=P.y?[k]:j.x<A.x||B.x>P.x||j.y<A.y||B.y>P.y?[]:t.clipLine([k],A.x,A.y,P.x,P.y)}for(var F=0,z=N;F<z.length;F+=1){var V;O.reset(z[F],.25*I),V=O.length<=.5*I?1:Math.ceil(O.paddedLength/T)+1;for(var G=0;G<V;G++){var Z=G/Math.max(V-1,1),W=O.lerp(Z),H=W.x+100,U=W.y+100;f.push(H,U,I,0);var $=H-I,K=U-I,X=H+I,Y=U+I;if(w=w&&this.isOffscreen($,K,X,Y),x=x||this.isInsideGrid($,K,X,Y),!e&&this.grid.hitTestCircle(H,U,I,h)&&(C=!0,!l))return{circles:[],offscreen:!1,collisionDetected:C}}}}return{circles:!l&&C||!x?[]:f,offscreen:w,collisionDetected:C}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,r=1/0,o=-1/0,a=-1/0,s=0,c=e;s<c.length;s+=1){var l=c[s],u=new t.Point(l.x+100,l.y+100);i=Math.min(i,u.x),r=Math.min(r,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y),n.push(u)}for(var h={},d={},p=0,f=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a));p<f.length;p+=1){var g=f[p],m=g.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var v=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(n,v)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===d[m.bucketInstanceId]&&(d[m.bucketInstanceId]=[]),d[m.bucketInstanceId].push(m.featureIndex))}}return d},he.prototype.insertCollisionBox=function(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var r=[n,i,0,1];return ue(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},he.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var pe=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};pe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fe=function(t,e,n,i,r){this.text=new pe(t?t.text:null,e,n,r),this.icon=new pe(t?t.icon:null,e,i,r)};fe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ge=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},me=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ve=function(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r},ye=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function be(e,n,i,r,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,c=-(a.verticalAlign-.5)*i,l=t.evaluateVariableOffset(e,r);return new t.Point(s+l[0]*o,c+l[1]*o)}function _e(e,n,i,r,o,a){var s=e.x1,c=e.x2,l=e.y1,u=e.y2,h=e.anchorPointX,d=e.anchorPointY,p=new t.Point(n,i);return r&&p._rotate(o?a:-a),{x1:s+p.x,y1:l+p.y,x2:c+p.x,y2:u+p.y,anchorPointX:h,anchorPointY:d}}ye.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Ce=function(t,e,n,i){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ye(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function xe(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}Ce.prototype.getBucketParts=function(e,n,i,r){var o=i.getBucket(n),a=i.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=i.collisionBoxArray,c=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),d="map"===c.get("text-pitch-alignment"),p="map"===c.get("text-rotation-alignment"),f=de(i,1,this.transform.zoom),g=qt(h,d,p,this.transform,f),m=null;if(d){var v=Jt(h,d,p,this.transform,f);m=t.multiply([],this.transform.labelPlaneMatrix,v)}this.retainedQueryData[o.bucketInstanceId]=new ve(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);var y={bucket:o,layout:c,posMatrix:h,textLabelPlaneMatrix:g,labelToScreenMatrix:m,scale:l,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(var b=0,_=o.sortKeyRanges;b<_.length;b+=1){var C=_[b];e.push({sortKey:C.sortKey,symbolInstanceStart:C.symbolInstanceStart,symbolInstanceEnd:C.symbolInstanceEnd,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},Ce.prototype.attemptAnchorPlacement=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f){var g,m=[h.textOffset0,h.textOffset1],v=be(t,n,i,m,r),y=this.collisionIndex.placeCollisionBox(_e(e,v.x,v.y,o,a,this.transform.angle),u,s,c,l.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(_e(f,v.x,v.y,o,a,this.transform.angle),u,s,c,l.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:n,height:i,anchor:t,textBoxScale:r,prevAnchor:g},this.markUsedJustification(d,t,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:v,placedGlyphBoxes:y}):void 0},Ce.prototype.placeLayerBucketPart=function(e,n,i){var r=this,o=e.parameters,a=o.bucket,s=o.layout,c=o.posMatrix,l=o.textLabelPlaneMatrix,u=o.labelToScreenMatrix,h=o.textPixelRatio,d=o.holdingForFade,p=o.collisionBoxArray,f=o.partiallyEvaluatedTextSize,g=o.collisionGroup,m=s.get("text-optional"),v=s.get("icon-optional"),y=s.get("text-allow-overlap"),b=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),C="map"===s.get("text-pitch-alignment"),x="none"!==s.get("icon-text-fit"),w="viewport-y"===s.get("symbol-z-order"),I=y&&(b||!a.hasIconData()||v),A=b&&(y||!a.hasTextData()||m);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var P=function(e,o){if(!n[e.crossTileID])if(d)r.placements[e.crossTileID]=new ge(!1,!1,!1);else{var p,w=!1,P=!1,O=!0,M=null,S={box:null,offscreen:null},k={box:null,offscreen:null},E=null,L=null,T=0,R=0,N=0;o.textFeatureIndex?T=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(T=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var B=o.textBox;if(B){var j=function(n){var i=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&r.prevPlacement){var o=r.prevPlacement.placedOrientations[e.crossTileID];o&&(r.placedOrientations[e.crossTileID]=o,r.markUsedOrientation(a,i=o,e))}return i},D=function(n,i){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var r=0,s=a.writingModes;r<s.length&&(s[r]===t.WritingMode.vertical?(S=i(),k=S):S=n(),!(S&&S.box&&S.box.length));r+=1);else S=n()};if(s.get("text-variable-anchor")){var F=s.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var z=r.prevPlacement.variableOffsets[e.crossTileID];F.indexOf(z.anchor)>0&&(F=F.filter((function(t){return t!==z.anchor}))).unshift(z.anchor)}var V=function(t,n,i){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,u=x&&!b?n:null,d={box:[],offscreen:!1},p=y?2*F.length:F.length,f=0;f<p;++f){var m=r.attemptAnchorPlacement(F[f%F.length],t,o,s,l,_,C,h,c,g,f>=F.length,e,a,i,u);if(m&&(d=m.placedGlyphBoxes)&&d.box&&d.box.length){w=!0,M=m.shift;break}}return d};D((function(){return V(B,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(S&&S.box&&S.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),S&&(w=S.box,O=S.offscreen);var G=j(S&&S.box);if(!w&&r.prevPlacement){var Z=r.prevPlacement.variableOffsets[e.crossTileID];Z&&(r.variableOffsets[e.crossTileID]=Z,r.markUsedJustification(a,Z.anchor,e,G))}}else{var W=function(t,n){var i=r.collisionIndex.placeCollisionBox(t,y,h,c,g.predicate);return i&&i.box&&i.box.length&&(r.markUsedOrientation(a,n,e),r.placedOrientations[e.crossTileID]=n),i};D((function(){return W(B,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?W(n,t.WritingMode.vertical):{box:null,offscreen:null}})),j(S&&S.box&&S.box.length)}}if(w=(p=S)&&p.box&&p.box.length>0,O=p&&p.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),U=t.evaluateSizeForFeature(a.textSizeData,f,H),$=s.get("text-padding");E=r.collisionIndex.placeCollisionCircles(y,H,a.lineVertexArray,a.glyphOffsetArray,U,c,l,u,i,C,g.predicate,e.collisionCircleDiameter,$),w=y||E.circles.length>0&&!E.collisionDetected,O=O&&E.offscreen}if(o.iconFeatureIndex&&(N=o.iconFeatureIndex),o.iconBox){var K=function(t){var e=x&&M?_e(t,M.x,M.y,_,C,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,b,h,c,g.predicate)};P=k&&k.box&&k.box.length&&o.verticalIconBox?(L=K(o.verticalIconBox)).box.length>0:(L=K(o.iconBox)).box.length>0,O=O&&L.offscreen}var X=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Y=v||0===e.numIconVertices;if(X||Y?Y?X||(P=P&&w):w=P&&w:P=w=P&&w,w&&p&&p.box&&r.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,k&&k.box&&R?R:T,g.ID),P&&L&&r.collisionIndex.insertCollisionBox(L.box,s.get("icon-ignore-placement"),a.bucketInstanceId,N,g.ID),E&&(w&&r.collisionIndex.insertCollisionCircles(E.circles,s.get("text-ignore-placement"),a.bucketInstanceId,T,g.ID),i)){var q=a.bucketInstanceId,J=r.collisionCircleArrays[q];void 0===J&&(J=r.collisionCircleArrays[q]=new me);for(var Q=0;Q<E.circles.length;Q+=4)J.circles.push(E.circles[Q+0]),J.circles.push(E.circles[Q+1]),J.circles.push(E.circles[Q+2]),J.circles.push(E.collisionDetected?1:0)}r.placements[e.crossTileID]=new ge(w||I,P||A,O||a.justReloaded),n[e.crossTileID]=!0}};if(w)for(var O=a.getSortedSymbolIndexes(this.transform.angle),M=O.length-1;M>=0;--M){var S=O[M];P(a.symbolInstances.get(S),a.collisionArrays[S])}else for(var k=e.symbolInstanceStart;k<e.symbolInstanceEnd;k++)P(a.symbolInstances.get(k),a.collisionArrays[k]);if(i&&a.bucketInstanceId in this.collisionCircleArrays){var E=this.collisionCircleArrays[a.bucketInstanceId];t.invert(E.invProjMatrix,c),E.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},Ce.prototype.markUsedJustification=function(e,n,i,r){var o;o=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var c=s[a];c>=0&&(e.text.placedSymbolArray.get(c).crossTileID=o>=0&&c!==o?0:i.crossTileID)}},Ce.prototype.markUsedOrientation=function(e,n,i){for(var r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)},Ce.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var c=this.placements[s],l=r[s];l?(this.opacities[s]=new fe(l,i,c.text,c.icon),n=n||c.text!==l.text.placed||c.icon!==l.icon.placed):(this.opacities[s]=new fe(null,i,c.text,c.icon,c.skipFade),n=n||c.text||c.icon)}for(var u in r){var h=r[u];if(!this.opacities[u]){var d=new fe(h,i,!1,!1);d.isHidden()||(this.opacities[u]=d,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Ce.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Ce.prototype.updateBucketOpacities=function(e,n,i){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new fe(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),c=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),u="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),d="none"!==o.get("icon-text-fit"),p=new fe(null,0,s&&(c||!e.hasIconData()||o.get("icon-optional")),c&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);for(var f=function(t,e,n){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)},g=function(i){var o=e.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,c=o.numVerticalGlyphVertices,g=o.crossTileID,m=r.opacities[g];n[g]?m=a:m||(r.opacities[g]=m=p),n[g]=!0;var v=o.numIconVertices>0,y=r.placedOrientations[o.crossTileID],b=y===t.WritingMode.vertical,_=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||c>0){var C=ke(m.text);f(e.text,s,b?Ee:C),f(e.text,c,_?Ee:C);var x=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||b?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=x||_?1:0);var w=r.variableOffsets[o.crossTileID];w&&r.markUsedJustification(e,w.anchor,o,y);var I=r.placedOrientations[o.crossTileID];I&&(r.markUsedJustification(e,"left",o,I),r.markUsedOrientation(e,I,o))}if(v){var A=ke(m.icon),P=!(d&&o.verticalPlacedIconSymbolIndex&&b);o.placedIconSymbolIndex>=0&&(f(e.icon,o.numIconVertices,P?A:Ee),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,o.numVerticalIconVertices,P?Ee:A),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var O=e.collisionArrays[i];if(O){var M=new t.Point(0,0);if(O.textBox||O.verticalTextBox){var S=!0;if(l){var k=r.variableOffsets[g];k?(M=be(k.anchor,k.width,k.height,k.textOffset,k.textBoxScale),u&&M._rotate(h?r.transform.angle:-r.transform.angle)):S=!1}O.textBox&&xe(e.textCollisionBox.collisionVertexArray,m.text.placed,!S||b,M.x,M.y),O.verticalTextBox&&xe(e.textCollisionBox.collisionVertexArray,m.text.placed,!S||_,M.x,M.y)}var E=Boolean(!_&&O.verticalIconBox);O.iconBox&&xe(e.iconCollisionBox.collisionVertexArray,m.icon.placed,E,d?M.x:0,d?M.y:0),O.verticalIconBox&&xe(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!E,d?M.x:0,d?M.y:0)}}},m=0;m<e.symbolInstances.length;m++)g(m);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var v=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=v.invProjMatrix,e.placementViewportMatrix=v.viewportMatrix,e.collisionCircleArray=v.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},Ce.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ce.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},Ce.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Ce.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},Ce.prototype.setStale=function(){this.stale=!0};var we=Math.pow(2,25),Ie=Math.pow(2,24),Ae=Math.pow(2,17),Pe=Math.pow(2,16),Oe=Math.pow(2,9),Me=Math.pow(2,8),Se=Math.pow(2,1);function ke(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*we+e*Ie+n*Ae+e*Pe+n*Oe+e*Me+n*Se+e}var Ee=0,Le=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Le.prototype.continuePlacement=function(t,e,n,i,r){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1};var Te=function(t,e,n,i,r,o,a){this.placement=new Ce(t,r,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};Te.prototype.isDone=function(){return this._done},Te.prototype.continuePlacement=function(e,n,i){for(var r=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],c=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=c)&&(!s.maxzoom||s.maxzoom>c)){if(this._inProgressLayer||(this._inProgressLayer=new Le(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Te.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t.EXTENT/2,Ne=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var r=e.get(i),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};Ne.prototype.getScaledCoordinates=function(e,n){var i=Re/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},Ne.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var o=t.get(r);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),c=0,l=a;c<l.length;c+=1){var u=l[c];if(Math.abs(u.coord.x-s.x)<=i&&Math.abs(u.coord.y-s.y)<=i&&!n[u.crossTileID]){n[u.crossTileID]=!0,o.crossTileID=u.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};je.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],r={};for(var o in i){var a=i[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[n]=r}this.lng=t},je.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var c=a[s];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,r)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=n.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ne(t,e.symbolInstances,e.bucketInstanceId),!0},je.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1)delete this.usedCrossTileIDs[t][r[i].crossTileID]},je.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e};var De=function(){this.layerIndexes={},this.crossTileIDs=new Be,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};De.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new je);var r=!1,o={};i.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var c=s[a],l=c.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(c.tileID,l,this.crossTileIDs)&&(r=!0),o[l.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r},De.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Fe=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},ze=t.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ve=t.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),Ge=function(){var e={},n=t.styleSpec.$version;for(var i in t.styleSpec.$root){var r,o=t.styleSpec.$root[i];o.required&&null!=(r="version"===i?n:"array"===o.type?[]:{})&&(e[i]=r)}return e}(),Ze=function(e){function n(i,r){var o=this;void 0===r&&(r={}),e.call(this),this.map=i,this.dispatcher=new I(Dt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new b(i._requestManager,r.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new De,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var i in a.sourceCaches)a.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in o._layers){var r=o._layers[i];r.source===n.id&&o._validateLayer(r)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){i._request=null,e?i.fire(new t.ErrorEvent(e)):n&&i._load(n,r)}))},n.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ge,!1)},n.prototype._load=function(e,n){if(!n||!Fe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=zt(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=r;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,i){var r,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",c=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){c=null,a||(a=t,r=e,u())})),l=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){l=null,a||(a=t,o=e,u())}));function u(){if(a)i(a);else if(r&&o){var e=t.browser.getImageData(o),n={};for(var s in r){var c=r[s],l=c.width,u=c.height,h=c.x,d=c.y,p=c.sdf,f=c.pixelRatio,g=c.stretchX,m=c.stretchY,v=c.content,y=new t.RGBAImage({width:l,height:u});t.RGBAImage.copy(e,y,{x:h,y:d},{x:0,y:0},{width:l,height:u}),n[s]={data:y,pixelRatio:f,sdf:p,stretchX:g,stretchY:m,content:v}}i(null,n)}}return{cancel:function(){c&&(c.cancel(),c=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,(function(e,i){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(i)for(var r in i)n.imageManager.addImage(r,i[r]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var r=this._layers[i[n]];"custom"!==r.type&&e.push(r.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var o in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var c in this.sourceCaches)this.sourceCaches[c].used=!1;for(var l=0,u=this._order;l<u.length;l+=1){var h=this._layers[u[l]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=zt(e.layers);var i=function(e,n){if(!e)return[{command:Vt.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Vt.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Vt.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Vt.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Vt.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Vt.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Vt.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Vt.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Vt.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Vt.setLight,args:[n.light]});var r={},o=[];!function(e,n,i,r){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Zt(o,i,r));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ht(e,n,o)?i.push({command:Vt.setGeoJSONSourceData,args:[o,n[o].data]}):Wt(o,n,i,r)):Gt(o,n,i))}(e.sources,n.sources,o,r);var a=[];e.layers&&e.layers.forEach((function(t){r[t.source]?i.push({command:Vt.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(o),function(e,n,i){n=n||[];var r,o,a,s,c,l,u,h=(e=e||[]).map($t),d=n.map($t),p=e.reduce(Kt,{}),f=n.reduce(Kt,{}),g=h.slice(),m=Object.create(null);for(r=0,o=0;r<h.length;r++)f.hasOwnProperty(a=h[r])?o++:(i.push({command:Vt.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(r=0,o=0;r<d.length;r++)g[g.length-1-r]!==(a=d[d.length-1-r])&&(p.hasOwnProperty(a)?(i.push({command:Vt.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,i.push({command:Vt.addLayer,args:[f[a],l=g[g.length-r]]}),g.splice(g.length-r,0,a),m[a]=!0);for(r=0;r<d.length;r++)if(s=p[a=d[r]],c=f[a],!m[a]&&!t.deepEqual(s,c))if(t.deepEqual(s.source,c.source)&&t.deepEqual(s["source-layer"],c["source-layer"])&&t.deepEqual(s.type,c.type)){for(u in Ut(s.layout,c.layout,i,a,null,Vt.setLayoutProperty),Ut(s.paint,c.paint,i,a,null,Vt.setPaintProperty),t.deepEqual(s.filter,c.filter)||i.push({command:Vt.setFilter,args:[a,c.filter]}),t.deepEqual(s.minzoom,c.minzoom)&&t.deepEqual(s.maxzoom,c.maxzoom)||i.push({command:Vt.setLayerZoomRange,args:[a,c.minzoom,c.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Ut(s[u],c[u],i,a,u.slice(6),Vt.setPaintProperty):t.deepEqual(s[u],c[u])||i.push({command:Vt.setLayerProperty,args:[a,u,c[u]]}));for(u in c)c.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Ut(s[u],c[u],i,a,u.slice(6),Vt.setPaintProperty):t.deepEqual(s[u],c[u])||i.push({command:Vt.setLayerProperty,args:[a,u,c[u]]}))}else i.push({command:Vt.removeLayer,args:[a]}),l=g[g.lastIndexOf(a)+1],i.push({command:Vt.addLayer,args:[c,l]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Vt.setStyle,args:[n]}]}return i}(this.serialize(),e).filter((function(t){return!(t.command in Ve)}));if(0===i.length)return!1;var r=i.filter((function(t){return!(t.command in ze)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,i){var r=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new kt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var o;if("custom"===e.type){if(Fe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n,null,i)||(r.filter=t.clone$1(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=e.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=this.sourceCaches[i];if(void 0!==r){var o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.sourceCaches[n];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},i={},r=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){i[a]=o;for(var s=0,c=t;s<c.length;s+=1){var l=c[s][a];if(l)for(var u=0,h=l;u<h.length;u+=1)r.push(h[u])}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],p=this._order.length-1;p>=0;p--){var f=this._order[p];if(n(f))for(var g=r.length-1;g>=0;g--){var m=r[g].feature;if(i[m.layer.id]<p)break;d.push(m),r.pop()}else for(var v=0,y=t;v<y.length;v+=1){var b=y[v][f];if(b)for(var _=0,C=b;_<C.length;_+=1)d.push(C[_].feature)}}return d},n.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],c=this._layers[s];if(!c)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[c.source]=!0}}var l=[];for(var u in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!r[u]||l.push(j(this.sourceCaches[u],this._layers,this._serializedLayers,e,n,i));return this.placement&&l.push(function(t,e,n,i,r,o,a){for(var s={},c=o.queryRenderedSymbols(i),l=[],u=0,h=Object.keys(c).map(Number);u<h.length;u+=1)l.push(a[h[u]]);l.sort(D);for(var d=function(){var n=f[p],i=n.featureIndex.lookupSymbolFeatures(c[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(var o in i){var a=s[o]=s[o]||[],l=i[o];l.sort((function(t,e){var i=n.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(var u=0,h=l;u<h.length;u+=1)a.push(h[u])}},p=0,f=l;p<f.length;p+=1)d();var g=function(e){s[e].forEach((function(i){var r=i.feature,o=n[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}))};for(var m in s)g(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],r={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(i,e))}return i}(i,n):[]},n.prototype.addSourceType=function(t,e,i){return n.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var i=this.light.getLight(),r=!1;for(var o in e)if(!t.deepEqual(e[o],i[o])){r=!0;break}if(r){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,i,r,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},r)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,i,r,o){void 0===o&&(o=!1);for(var a=!1,s=!1,c={},l=0,u=this._order;l<u.length;l+=1){var h=this._layers[u[l]];if("symbol"===h.type){if(!c[h.source]){var d=this.sourceCaches[h.source];c[h.source]=d.getRenderableIds(!0).map((function(t){return d.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var p=this.crossTileSymbolIndex.addLayer(h,c[h.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Te(e,this._order,o,n,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var f=0,g=this._order;f<g.length;f+=1){var m=this._layers[g[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,c[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,i){return t.makeRequest(n,i)},n}(t.Evented);Ze.getSourceType=function(t){return N[t]},Ze.setSourceType=function(t,e){N[t]=e},Ze.registerForPluginStateChange=t.registerForPluginStateChange;var We=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),He=yn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ue=yn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),$e=yn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ke=yn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xe=yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=yn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),qe=yn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Je=yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qe=yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tn=yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),en=yn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=yn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=yn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),an=yn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),cn=yn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ln=yn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),un=yn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),dn=yn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),fn=yn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),gn=yn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mn=yn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),vn=yn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,i,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,i,r){var o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = a_"+r+";\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = a_"+r+";\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"})),staticAttributes:i,staticUniforms:a}}var bn=Object.freeze({__proto__:null,prelude:He,background:Ue,backgroundPattern:$e,circle:Ke,clippingMask:Xe,heatmap:Ye,heatmapTexture:qe,collisionBox:Je,collisionCircle:Qe,debug:tn,fill:en,fillOutline:nn,fillOutlinePattern:rn,fillPattern:on,fillExtrusion:an,fillExtrusionPattern:sn,hillshadePrepare:cn,hillshade:ln,line:un,lineGradient:hn,linePattern:dn,lineSDF:pn,raster:fn,symbolIcon:gn,symbolSDF:mn,symbolTextAndIcon:vn}),_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Cn(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var i=t[n].split(" ");e.push(i.pop())}return e}_n.prototype.bind=function(t,e,n,i,r,o,a,s){this.context=t;for(var c=this.boundPaintVertexBuffers.length!==i.length,l=0;!c&&l<i.length;l++)this.boundPaintVertexBuffers[l]!==i[l]&&(c=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!c&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,n,i,r,o,a,s)},_n.prototype.freshBind=function(t,e,n,i,r,o,a){var s,c=t.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=c;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var d=0,p=n;d<p.length;d+=1)p[d].enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var f=0,g=n;f<g.length;f+=1){var m=g[f];m.bind(),m.setVertexAttribPointers(u,t,r)}o&&(o.bind(),o.setVertexAttribPointers(u,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),l.currentNumAttributes=c},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xn=function(t,e,n,i,r,o){var a=t.gl;this.program=a.createProgram();for(var s=Cn(n.staticAttributes),c=i?i.getBinderAttributes():[],l=s.concat(c),u=n.staticUniforms?Cn(n.staticUniforms):[],h=i?i.getBinderUniforms():[],d=[],p=0,f=u.concat(h);p<f.length;p+=1){var g=f[p];d.indexOf(g)<0&&d.push(g)}var m=i?i.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var v=m.concat(He.fragmentSource,n.fragmentSource).join("\n"),y=m.concat(He.vertexSource,n.vertexSource).join("\n"),b=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,v),a.compileShader(b),a.attachShader(this.program,b);var _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,y),a.compileShader(_),a.attachShader(this.program,_),this.attributes={};var C={};this.numAttributes=l.length;for(var x=0;x<this.numAttributes;x++)l[x]&&(a.bindAttribLocation(this.program,x,l[x]),this.attributes[l[x]]=x);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(b);for(var w=0;w<d.length;w++){var I=d[w];if(I&&!C[I]){var A=a.getUniformLocation(this.program,I);A&&(C[I]=A)}}this.fixedUniforms=r(t,C),this.binderUniforms=i?i.getUniforms(t,C):[]}}};function wn(t,e,n){var i=1/de(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}xn.prototype.draw=function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g){var m,v=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});for(var b=(m={},m[v.LINES]=2,m[v.TRIANGLES]=3,m[v.LINE_STRIP]=1,m)[e],_=0,C=u.get();_<C.length;_+=1){var x=C[_],w=x.vaos||(x.vaos={});(w[s]||(w[s]=new _n)).bind(t,this,c,p?p.getPaintVertexBuffers():[],l,x.vertexOffset,f,g),v.drawElements(e,x.primitiveLength*b,v.UNSIGNED_SHORT,x.primitiveOffset*b*2)}}};var In=function(e,n,i,r){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],c=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(c,-n.transform.angle),t.transformMat3(s,s,c);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+i,u_opacity:r}},An=function(e,n,i,r,o,a,s){return t.extend(In(e,n,i,r),wn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Pn=function(t){return{u_matrix:t}},On=function(e,n,i,r){return t.extend(Pn(e),wn(i,n,r))},Mn=function(t,e){return{u_matrix:t,u_world:e}},Sn=function(e,n,i,r,o){return t.extend(On(e,n,i,r),{u_world:o})},kn=function(e,n,i,r){var o,a,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var c=de(i,1,s.zoom);o=!0,a=[c,c]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},En=function(t,e,n){var i=de(n,1,e.zoom),r=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*r),e.pixelsToGLUnits[1]/(i*r)],u_overscale_factor:o}},Ln=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Tn=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},Rn=function(t){return{u_matrix:t}},Nn=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:de(e,1,n),u_intensity:i}},Bn=function(e,n,i){var r=e.transform;return{u_matrix:Vn(e,n,i),u_ratio:1/de(n,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},jn=function(e,n,i,r){return t.extend(Bn(e,n,i),{u_image:0,u_image_height:r})},Dn=function(e,n,i,r){var o=e.transform,a=zn(n,o);return{u_matrix:Vn(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/de(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Fn=function(e,n,i,r,o){var a=e.lineAtlas,s=zn(n,e.transform),c="round"===i.layout.get("line-cap"),l=a.getDash(r.from,c),u=a.getDash(r.to,c),h=l.width*o.fromScale,d=u.width*o.toScale;return t.extend(Bn(e,n,i),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/d,-u.height/2],u_sdfgamma:a.width/(256*Math.min(h,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:u.y,u_mix:o.t})};function zn(t,e){return 1/de(t,1,e.tileZoom)}function Vn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Gn=function(t,e,n,i,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Zn(r.paint.get("raster-hue-rotate"))};var o,a};function Zn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Wn,Hn=function(t,e,n,i,r,o,a,s,c,l){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+c,u_pitch_with_map:+i,u_texsize:l,u_texture:0}},Un=function(e,n,i,r,o,a,s,c,l,u,h){var d=o.transform;return t.extend(Hn(e,n,i,r,o,a,s,c,l,u),{u_gamma_scale:r?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},$n=function(e,n,i,r,o,a,s,c,l,u){return t.extend(Un(e,n,i,r,o,a,s,c,!0,l,!0),{u_texsize_icon:u,u_texture_icon:1})},Kn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Xn=function(e,n,i,r,o,a){return t.extend(function(t,e,n,i){var r=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,c=a.height,l=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=u*(i.tileID.canonical.x+i.tileID.wrap*l),d=u*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,c],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/de(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,a,i,o),{u_matrix:e,u_opacity:n})},Yn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function qn(e,n,i,r,o,a,s){for(var c=e.context,l=c.gl,u=e.useProgram("collisionBox"),h=[],d=0,p=0,f=0;f<r.length;f++){var g=r[f],m=n.getTile(g),v=m.getBucket(i);if(v){var y=g.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(g.posMatrix,m,o,a));var b=s?v.textCollisionBox:v.iconCollisionBox,_=v.collisionCircleArray;if(_.length>0){var C=t.create(),x=y;t.mul(C,v.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(C,C,v.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:x,invTransform:C}),p=d+=_.length/4}b&&u.draw(c,l.LINES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,En(y,e.transform,m),i.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,e.transform.zoom,null,null,b.collisionVertexBuffer)}}if(s&&h.length){var w=e.useProgram("collisionCircle"),I=new t.StructArrayLayout2f1f2i16;I.resize(4*d),I._trim();for(var A=0,P=0,O=h;P<O.length;P+=1)for(var M=O[P],S=0;S<M.circleArray.length/4;S++){var k=4*S,E=M.circleArray[k+0],L=M.circleArray[k+1],T=M.circleArray[k+2],R=M.circleArray[k+3];I.emplace(A++,E,L,T,R,0),I.emplace(A++,E,L,T,R,1),I.emplace(A++,E,L,T,R,2),I.emplace(A++,E,L,T,R,3)}(!Wn||Wn.length<2*d)&&(Wn=function(e){var n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(var r=0;r<n;r++){var o=6*r;i.uint16[o+0]=4*r+0,i.uint16[o+1]=4*r+1,i.uint16[o+2]=4*r+2,i.uint16[o+3]=4*r+2,i.uint16[o+4]=4*r+3,i.uint16[o+5]=4*r+0}return i}(d));for(var N=c.createIndexBuffer(Wn,!0),B=c.createVertexBuffer(I,t.collisionCircleLayout.members,!0),j=0,D=h;j<D.length;j+=1){var F=D[j],z=Ln(F.transform,F.invTransform,e.transform);w.draw(c,l.TRIANGLES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,z,i.id,B,N,t.SegmentVector.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,e.transform.zoom,null,null,null)}B.destroy(),N.destroy()}}var Jn=t.identity(new Float32Array(16));function Qn(e,n,i,r,o,a){var s=t.getAnchorAlignment(e),c=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*i,u=t.evaluateVariableOffset(e,r);return new t.Point((c/o+u[0])*a,(l/o+u[1])*a)}function ti(e,n,i,r,o,a,s,c,l,u,h){var d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,g={};p.clear();for(var m=0;m<d.length;m++){var v=d.get(m),y=v.hidden||!v.crossTileID||e.allowVerticalPlacement&&!v.placedOrientation?null:r[v.crossTileID];if(y){var b=new t.Point(v.anchorX,v.anchorY),_=Qt(b,i?c:s),C=te(a.cameraToCenterDistance,_.signedDistanceFromCamera),x=o.evaluateSizeForFeature(e.textSizeData,u,v)*C/t.ONE_EM;i&&(x*=e.tilePixelRatio/l);for(var w=Qn(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,x),I=i?Qt(b.add(w),s).point:_.point.add(n?w.rotate(-a.angle):w),A=e.allowVerticalPlacement&&v.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,P=0;P<v.numGlyphs;P++)t.addDynamicAttributes(p,I,A);h&&v.associatedIconIndex>=0&&(g[v.associatedIconIndex]={shiftedAnchor:I,angle:A})}else le(v.numGlyphs,p)}if(h){f.clear();for(var O=e.icon.placedSymbolArray,M=0;M<O.length;M++){var S=O.get(M);if(S.hidden)le(S.numGlyphs,f);else{var k=g[M];if(k)for(var E=0;E<S.numGlyphs;E++)t.addDynamicAttributes(f,k.shiftedAnchor,k.angle);else le(S.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function ei(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function ni(e,n,i,r,o,a,s,c,l,u,h,d){for(var p=e.context,f=p.gl,g=e.transform,m="map"===c,v="map"===l,y=m&&"point"!==i.layout.get("symbol-placement"),b=m&&!v&&!y,_=void 0!==i.layout.get("symbol-sort-key").constantOr(1),C=e.depthModeForSublayer(0,At.ReadOnly),x=i.layout.get("text-variable-anchor"),w=[],I=0,A=r;I<A.length;I+=1){var P=A[I],O=n.getTile(P),M=O.getBucket(i);if(M){var S=o?M.text:M.icon;if(S&&S.segments.get().length){var k=S.programConfigurations.get(i.id),E=o||M.sdfIcons,L=o?M.textSizeData:M.iconSizeData,T=v||0!==g.pitch,R=e.useProgram(ei(E,o,M),k),N=t.evaluateSizeForZoom(L,g.zoom),B=void 0,j=[0,0],D=void 0,F=void 0,z=null,V=void 0;if(o)D=O.glyphAtlasTexture,F=f.LINEAR,B=O.glyphAtlasTexture.size,M.iconsInText&&(j=O.imageAtlasTexture.size,z=O.imageAtlasTexture,V=T||e.options.rotating||e.options.zooming||"composite"===L.kind||"camera"===L.kind?f.LINEAR:f.NEAREST);else{var G=1!==i.layout.get("icon-size").constantOr(0)||M.iconsNeedLinear;D=O.imageAtlasTexture,F=E||e.options.rotating||e.options.zooming||G||T?f.LINEAR:f.NEAREST,B=O.imageAtlasTexture.size}var Z=de(O,1,e.transform.zoom),W=qt(P.posMatrix,v,m,e.transform,Z),H=Jt(P.posMatrix,v,m,e.transform,Z),U=x&&M.hasTextData(),$="none"!==i.layout.get("icon-text-fit")&&U&&M.hasIconData();y&&ne(M,P.posMatrix,e,o,W,H,v,u);var K=e.translatePosMatrix(P.posMatrix,O,a,s),X=y||o&&x||$?Jn:W,Y=e.translatePosMatrix(H,O,a,s,!0),q=E&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:R,buffers:S,uniformValues:E?M.iconsInText?$n(L.kind,N,b,v,e,K,X,Y,B,j):Un(L.kind,N,b,v,e,K,X,Y,o,B,!0):Hn(L.kind,N,b,v,e,K,X,Y,o,B),atlasTexture:D,atlasTextureIcon:z,atlasInterpolation:F,atlasInterpolationIcon:V,isSDF:E,hasHalo:q};if(_)for(var Q=0,tt=S.segments.get();Q<tt.length;Q+=1){var et=tt[Q];w.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:J})}else w.push({segments:S.segments,sortKey:0,state:J})}}}_&&w.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,it=w;nt<it.length;nt+=1){var rt=it[nt],ot=rt.state;if(p.activeTexture.set(f.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,f.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,ii(ot.buffers,rt.segments,i,e,ot.program,C,h,d,at)),at.u_is_halo=0}ii(ot.buffers,rt.segments,i,e,ot.program,C,h,d,ot.uniformValues)}}function ii(t,e,n,i,r,o,a,s,c){var l=i.context;r.draw(l,l.gl.TRIANGLES,o,a,s,Mt.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ri(t,e,n,i,r,o,a){var s,c,l,u,h,d=t.context.gl,p=n.paint.get("fill-pattern"),f=p&&p.constantOr(1),g=n.getCrossfadeParameters();a?(c=f&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=d.LINES):(c=f?"fillPattern":"fill",s=d.TRIANGLES);for(var m=0,v=i;m<v.length;m+=1){var y=v[m],b=e.getTile(y);if(!f||b.patternsLoaded()){var _=b.getBucket(n);if(_){var C=_.programConfigurations.get(n.id),x=t.useProgram(c,C);f&&(t.context.activeTexture.set(d.TEXTURE0),b.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),C.updatePaintBuffers(g));var w=p.constantOr(null);if(w&&b.imageAtlas){var I=b.imageAtlas,A=I.patternPositions[w.to.toString()],P=I.patternPositions[w.from.toString()];A&&P&&C.setConstantPatternPositions(A,P)}var O=t.translatePosMatrix(y.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){u=_.indexBuffer2,h=_.segments2;var M=[d.drawingBufferWidth,d.drawingBufferHeight];l="fillOutlinePattern"===c&&f?Sn(O,t,g,b,M):Mn(O,M)}else u=_.indexBuffer,h=_.segments,l=f?On(O,t,g,b):Pn(O);x.draw(t.context,s,r,t.stencilModeForClipping(y),o,Mt.disabled,l,n.id,_.layoutVertexBuffer,u,h,n.paint,t.transform.zoom,C)}}}}function oi(t,e,n,i,r,o,a){for(var s=t.context,c=s.gl,l=n.paint.get("fill-extrusion-pattern"),u=l.constantOr(1),h=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=0,f=i;p<f.length;p+=1){var g=f[p],m=e.getTile(g),v=m.getBucket(n);if(v){var y=v.programConfigurations.get(n.id),b=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",y);u&&(t.context.activeTexture.set(c.TEXTURE0),m.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),y.updatePaintBuffers(h));var _=l.constantOr(null);if(_&&m.imageAtlas){var C=m.imageAtlas,x=C.patternPositions[_.to.toString()],w=C.patternPositions[_.from.toString()];x&&w&&y.setConstantPatternPositions(x,w)}var I=t.translatePosMatrix(g.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),A=n.paint.get("fill-extrusion-vertical-gradient"),P=u?An(I,t,A,d,g,h,m):In(I,t,A,d);b.draw(s,s.gl.TRIANGLES,r,o,a,Mt.backCCW,P,n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,y)}}}function ai(e,n,i,r,o,a){var s=e.context,c=s.gl,l=n.fbo;if(l){var u=e.useProgram("hillshade");s.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,l.colorAttachment.get());var h=function(e,n,i){var r=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var c,l,u,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),h),u_image:0,u_latrange:(c=n.tileID,l=Math.pow(2,c.canonical.z),u=c.canonical.y,[new t.MercatorCoordinate(0,u/l).toLngLat().lat,new t.MercatorCoordinate(0,(u+1)/l).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}}(e,n,i);u.draw(s,c.TRIANGLES,r,o,a,Mt.disabled,h,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function si(e,n,i,r,o,a){var s=e.context,c=s.gl,l=n.dem;if(l&&l.data){var u=l.dim,h=l.stride,d=l.getPixels();if(s.activeTexture.set(c.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var p=n.demTexture;p.update(d,{premultiply:!1}),p.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,d,c.RGBA,{premultiply:!1}),n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);s.activeTexture.set(c.TEXTURE0);var f=n.fbo;if(!f){var g=new t.Texture(s,{width:u,height:u,data:null},c.RGBA);g.bind(c.LINEAR,c.CLAMP_TO_EDGE),(f=n.fbo=s.createFramebuffer(u,u,!0)).colorAttachment.set(g.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,c.TRIANGLES,r,o,a,Mt.disabled,function(e,n){var i=n.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,l),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ci(e,n,i,r,o){var a=r.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),c=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,u=i.getSource(),h=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.clamp(d?c:1-l,0,1);return e.refreshedUponExpiration&&c>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var li=new t.Color(1,0,0,1),ui=new t.Color(0,1,0,1),hi=new t.Color(0,0,1,1),di=new t.Color(1,0,1,1),pi=new t.Color(0,1,1,1);function fi(t,e,n,i){mi(t,0,e+n/2,t.transform.width,n,i)}function gi(t,e,n,i){mi(t,e-n/2,0,n,t.transform.height,i)}function mi(e,n,i,r,o,a){var s=e.context,c=s.gl;c.enable(c.SCISSOR_TEST),c.scissor(n*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),c.disable(c.SCISSOR_TEST)}function vi(e,n,i){var r=e.context,o=r.gl,a=i.posMatrix,s=e.useProgram("debug"),c=At.disabled,l=Pt.disabled,u=e.colorModeForRenderPass();r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,c,l,u,Mt.disabled,Tn(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=n.getTileByID(i.key).latestRawTileData,d=Math.floor((h&&h.byteLength||0)/1024),p=n.getTile(i).tileSize,f=512/Math.min(p,512)*(i.overscaledZ/e.transform.zoom)*.5,g=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(g+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,g+" "+d+"kb"),s.draw(r,o.TRIANGLES,c,l,Ot.alphaBlended,Mt.disabled,Tn(a,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var yi={symbol:function(e,n,i,r,o){if("translucent"===e.renderPass){var a=Pt.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){for(var c=n.transform,l="map"===o,u="map"===a,h=0,d=e;h<d.length;h+=1){var p=d[h],f=r.getTile(p),g=f.getBucket(i);if(g&&g.text&&g.text.segments.get().length){var m=t.evaluateSizeForZoom(g.textSizeData,c.zoom),v=de(f,1,n.transform.zoom),y=qt(p.posMatrix,u,l,n.transform,v),b="none"!==i.layout.get("icon-text-fit")&&g.hasIconData();if(m){var _=Math.pow(2,c.zoom-f.tileID.overscaledZ);ti(g,l,u,s,t.symbolSize,c,y,p.posMatrix,_,m,b)}}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&ni(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&ni(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(qn(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),qn(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),c=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,u=l.gl,h=e.depthModeForSublayer(0,At.ReadOnly),d=Pt.disabled,p=e.colorModeForRenderPass(),f=[],g=0;g<r.length;g++){var m=r[g],v=n.getTile(m),y=v.getBucket(i);if(y){var b=y.programConfigurations.get(i.id),_={programConfiguration:b,program:e.useProgram("circle",b),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:kn(e,m,v,i)};if(c)for(var C=0,x=y.segments.get();C<x.length;C+=1){var w=x[C];f.push({segments:new t.SegmentVector([w]),sortKey:w.sortKey,state:_})}else f.push({segments:y.segments,sortKey:0,state:_})}}c&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var I=0,A=f;I<A.length;I+=1){var P=A[I],O=P.state;O.program.draw(l,u.TRIANGLES,h,d,p,Mt.disabled,O.uniformValues,i.id,O.layoutVertexBuffer,O.indexBuffer,P.segments,i.paint,e.transform.zoom,O.programConfiguration)}}}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=Pt.disabled,c=new Ot([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){var r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,e,o,r)}}(o,e,i),o.clear({color:t.Color.transparent});for(var l=0;l<r.length;l++){var u=r[l];if(!n.hasRenderableParent(u)){var h=n.getTile(u),d=h.getBucket(i);if(d){var p=d.programConfigurations.get(i.id);e.useProgram("heatmap",p).draw(o,a.TRIANGLES,At.disabled,s,c,Mt.disabled,Nn(u.posMatrix,h,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,r=i.gl,o=n.heatmapFbo;if(o){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,At.disabled,Pt.disabled,e.colorModeForRenderPass(),Mt.disabled,function(e,n,i,r){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,At.ReadOnly),c=e.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),u=i.paint.get("line-pattern"),h=u.constantOr(1),d=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),f=h?"linePattern":l?"lineSDF":d?"lineGradient":"line",g=e.context,m=g.gl,v=!0,y=0,b=r;y<b.length;y+=1){var _=b[y],C=n.getTile(_);if(!h||C.patternsLoaded()){var x=C.getBucket(i);if(x){var w=x.programConfigurations.get(i.id),I=e.context.program.get(),A=e.useProgram(f,w),P=v||A.program!==I,O=u.constantOr(null);if(O&&C.imageAtlas){var M=C.imageAtlas,S=M.patternPositions[O.to.toString()],k=M.patternPositions[O.from.toString()];S&&k&&w.setConstantPatternPositions(S,k)}var E=h?Dn(e,C,i,p):l?Fn(e,C,i,l,p):d?jn(e,C,i,x.lineClipsArray.length):Bn(e,C,i);if(h)g.activeTexture.set(m.TEXTURE0),C.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),w.updatePaintBuffers(p);else if(l&&(P||e.lineAtlas.dirty))g.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(g);else if(d){var L=x.gradients[i.id],T=L.texture;if(i.gradientVersion!==L.version){var R=256;if(i.stepInterpolant){var N=n.getSource().maxzoom,B=_.canonical.z===N?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(x.maxLineLength/t.EXTENT*1024*B),256,g.maxTextureSize)}L.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:L.gradient||void 0,clips:x.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new t.Texture(g,L.gradient,m.RGBA),L.version=i.gradientVersion,T=L.texture}g.activeTexture.set(m.TEXTURE0),T.bind(i.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}A.draw(g,m.TRIANGLES,s,e.stencilModeForClipping(_),c,Mt.disabled,E,i.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,i.paint,e.transform.zoom,w,x.layoutVertexBuffer2),v=!1}}}}},fill:function(e,n,i,r){var o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),c=i.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?At.ReadWrite:At.ReadOnly);ri(e,n,i,r,u,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var h=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,At.ReadOnly);ri(e,n,i,r,h,s,!0)}}},"fill-extrusion":function(t,e,n,i){var r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var o=new At(t.context.gl.LEQUAL,At.ReadWrite,t.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))oi(t,e,n,i,o,Pt.disabled,Ot.disabled),oi(t,e,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();oi(t,e,n,i,o,Pt.disabled,a)}}},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,o=t.depthModeForSublayer(0,At.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i],c=s[0],l=0,u=s[1];l<u.length;l+=1){var h=u[l],d=e.getTile(h);d.needsHillshadePrepare&&"offscreen"===t.renderPass?si(t,d,n,o,Pt.disabled,a):"translucent"===t.renderPass&&ai(t,d,n,o,c[h.overscaledZ],a)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&i.length)for(var r=t.context,o=r.gl,a=e.getSource(),s=t.useProgram("raster"),c=t.colorModeForRenderPass(),l=a instanceof L?[{},i]:t.stencilConfigForOverlap(i),u=l[0],h=l[1],d=h[h.length-1].overscaledZ,p=!t.options.moving,f=0,g=h;f<g.length;f+=1){var m=g[f],v=t.depthModeForSublayer(m.overscaledZ-d,1===n.paint.get("raster-opacity")?At.ReadWrite:At.ReadOnly,o.LESS),y=e.getTile(m),b=t.transform.calculatePosMatrix(m.toUnwrapped(),p);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var _=e.findLoadedParent(m,0),C=ci(y,_,e,n,t.transform),x=void 0,w=void 0,I="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),y.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),_?(_.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,_.tileID.overscaledZ-y.tileID.overscaledZ),w=[y.tileID.canonical.x*x%1,y.tileID.canonical.y*x%1]):y.texture.bind(I,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var A=Gn(b,w||[0,0],x||1,C,n);a instanceof L?s.draw(r,o.TRIANGLES,v,Pt.disabled,c,Mt.disabled,A,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,v,u[m.overscaledZ],c,Mt.disabled,A,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var o=t.context,a=o.gl,s=t.transform,c=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var u=!l&&1===i.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var h=Pt.disabled,d=t.depthModeForSublayer(0,"opaque"===u?At.ReadWrite:At.ReadOnly),p=t.colorModeForRenderPass(),f=t.useProgram(l?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:c});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),v=0,y=g;v<y.length;v+=1){var b=y[v],_=t.transform.calculatePosMatrix(b.toUnwrapped()),C=l?Xn(_,r,t,l,{tileID:b,tileSize:c},m):Kn(_,r,i);f.draw(o,a.TRIANGLES,d,h,p,Mt.disabled,C,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)vi(t,e,n[i])},custom:function(t,e,n){var i=t.context,r=n.implementation;if("offscreen"===t.renderPass){var o=r.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(r,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(Pt.disabled);var a="3d"===r.renderingMode?new At(t.context.gl.LEQUAL,At.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,At.ReadOnly);i.setDepthMode(a),r.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},bi=function(t,e){this.context=new St(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=kt.maxUnderzooming+kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new De,this.gpuTimers={}};bi.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1)this.style._layers[r[i]].resize()},bi.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,We.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,We.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,E.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,We.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var c=this.context.gl;this.stencilClearMode=new Pt({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)},bi.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,At.disabled,this.stencilClearMode,Ot.disabled,Mt.disabled,Rn(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},bi.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,i=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Ot.disabled),n.setDepthMode(At.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],c=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(n,i.TRIANGLES,At.disabled,new Pt({func:i.ALWAYS,mask:0},c,255,i.KEEP,i.KEEP,i.REPLACE),Ot.disabled,Mt.disabled,Rn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},bi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Pt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},bi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Pt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},bi.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,i=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+r]=new Pt({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,i]}return[(e={},e[r]=Pt.disabled,e),i]},bi.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ot([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ot.unblended:Ot.alphaBlended},bi.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return At.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new At(n||this.context.gl.LEQUAL,e,[i,i])},bi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},bi.prototype.render=function(e,n){var i=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var r=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var c,l,u={},h={},d={};for(var p in o){var f=o[p];u[p]=f.getVisibleCoordinates(),h[p]=u[p].slice().reverse(),d[p]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var g=0;g<r.length;g++)if(this.style._layers[r[g]].is3D()){this.opaquePassCutoff=g;break}this.renderPass="offscreen";for(var m=0,v=r;m<v.length;m+=1){var y=this.style._layers[v[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=h[y.source];("custom"===y.type||b.length)&&this.renderLayer(this,o[y.source],y,b)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[r[this.currentLayer]],C=o[_.source],x=u[_.source];this._renderTileClippingMasks(_,x),this.renderLayer(this,C,_,x)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var w=this.style._layers[r[this.currentLayer]],I=o[w.source],A=("symbol"===w.type?d:h)[w.source];this._renderTileClippingMasks(w,u[w.source]),this.renderLayer(this,I,w,A)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(l&&l.id)&&(l=i.style.sourceCaches[t.source]),(!c||c.getSource().maxzoom<l.getSource().maxzoom)&&(c=l))})),c&&yi.debug(this,c,c.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;fi(t,t.transform.height-(e.top||0),3,li),fi(t,e.bottom||0,3,ui),gi(t,e.left||0,3,hi),gi(t,t.transform.width-(e.right||0),3,di);var n=t.transform.centerPoint;!function(t,e,n,i){mi(t,e-1,n-10,2,20,i),mi(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,pi)}(this),this.context.setDefault()},bi.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||i.length)&&(this.id=n.id,this.gpuTimingStart(n),yi[n.type](t,e,n,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},bi.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},bi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},bi.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},bi.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e},bi.prototype.translatePosMatrix=function(e,n,i,r,o){if(!i[0]&&!i[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),c=Math.cos(a);i=[i[0]*c-i[1]*s,i[0]*s+i[1]*c]}var l=[o?i[0]:de(n,i[0],this.transform.zoom),o?i[1]:de(n,i[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,l),u},bi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},bi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},bi.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},bi.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xn(this.context,t,bn[t],e,Yn[t],this._showOverdrawInspector)),this.cache[n]},bi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},bi.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},bi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},bi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _i=function(t,e){this.points=t,this.planes=e};_i.fromInvProjectionMatrix=function(e,n,i){var r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*r)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),i=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],n,i)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new _i(o,a)};var Ci=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Ci.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],i=t.clone$2(this.min),r=t.clone$2(this.max),o=0;o<n.length;o++)i[o]=n[o]?this.min[o]:this.center[o],r[o]=n[o]?this.center[o]:this.max[o];return r[2]=this.max[2],new Ci(i,r)},Ci.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},Ci.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},Ci.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,r=0;r<e.planes.length;r++){for(var o=e.planes[r],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(var c=0;c<3;c++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var d=e.points[h][c]-this.min[c];l=Math.min(l,d),u=Math.max(u,d)}if(u<0||l>this.max[c]-this.min[c])return 0}return 1};var xi=function(t,e,n,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i};xi.prototype.interpolate=function(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this},xi.prototype.getCenter=function(e,n){var i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(i,r)},xi.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},xi.prototype.clone=function(){return new xi(this.top,this.bottom,this.left,this.right)},xi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wi=function(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ii={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wi.prototype.clone=function(){var t=new wi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Ii.minZoom.get=function(){return this._minZoom},Ii.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Ii.maxZoom.get=function(){return this._maxZoom},Ii.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Ii.minPitch.get=function(){return this._minPitch},Ii.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Ii.maxPitch.get=function(){return this._maxPitch},Ii.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Ii.renderWorldCopies.get=function(){return this._renderWorldCopies},Ii.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Ii.worldSize.get=function(){return this.tileSize*this.scale},Ii.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ii.size.get=function(){return new t.Point(this.width,this.height)},Ii.bearing.get=function(){return-this.angle/Math.PI*180},Ii.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ii.pitch.get=function(){return this._pitch/Math.PI*180},Ii.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Ii.fov.get=function(){return this._fov/Math.PI*180},Ii.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Ii.zoom.get=function(){return this._zoom},Ii.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Ii.center.get=function(){return this._center},Ii.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Ii.padding.get=function(){return this._edgeInsets.toJSON()},Ii.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Ii.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wi.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},wi.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},wi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},wi.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),c=Math.floor(Math.max(i.x,r.x,o.x,a.x)),l=s-1;l<=c+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},wi.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*r.x,o*r.y,0],s=_i.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),c=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(c=n);var l=function(t){return{aabb:new Ci([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],h=[],d=n,p=e.reparseOverscaled?i:n;if(this._renderWorldCopies)for(var f=1;f<=3;f++)u.push(l(-f)),u.push(l(f));for(u.push(l(0));u.length>0;){var g=u.pop(),m=g.x,v=g.y,y=g.fullyVisible;if(!y){var b=g.aabb.intersects(s);if(0===b)continue;y=2===b}var _=g.aabb.distanceX(a),C=g.aabb.distanceY(a),x=Math.max(Math.abs(_),Math.abs(C));if(g.zoom===d||x>3+(1<<d-g.zoom)-2&&g.zoom>=c)h.push({tileID:new t.OverscaledTileID(g.zoom===d?p:g.zoom,g.wrap,g.zoom,m,v),distanceSq:t.sqrLen([a[0]-.5-m,a[1]-.5-v])});else for(var w=0;w<4;w++){var I=(m<<1)+w%2,A=(v<<1)+(w>>1);u.push({aabb:g.aabb.quadrant(w),zoom:g.zoom+1,x:I,y:A,wrap:g.wrap,fullyVisible:y})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},wi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Ii.unmodified.get=function(){return this._unmodified},wi.prototype.zoomScale=function(t){return Math.pow(2,t)},wi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},wi.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},wi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Ii.point.get=function(){return this.project(this.center)},wi.prototype.setLocationAtPoint=function(e,n){var i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},wi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},wi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},wi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},wi.prototype.coordinateLocation=function(t){return t.toLngLat()},wi.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var r=n[3],o=i[3],a=n[1]/r,s=i[1]/o,c=n[2]/r,l=i[2]/o,u=c===l?0:(0-c)/(l-c);return new t.MercatorCoordinate(t.number(n[0]/r,i[0]/o,u)/this.worldSize,t.number(a,s,u)/this.worldSize)},wi.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},wi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},wi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wi.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,c=t.identity(new Float64Array(16));return t.translate(c,c,[s*a,o.y*a,0]),t.scale(c,c,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(c,n?this.alignedProjMatrix:this.projMatrix,c),r[i]=new Float32Array(c),r[i]},wi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,r,o=-90,a=90,s=-180,c=180,l=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var d=this.lngRange;s=t.mercatorXfromLng(d[0])*this.worldSize,n=(c=t.mercatorXfromLng(d[1])*this.worldSize)-s<l.x?l.x/(c-s):0}var p=this.point,f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.Point(n?(c+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(f),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var g=p.y,m=l.y/2;g-m<o&&(r=o+m),g+m>a&&(r=a-m)}if(this.lngRange){var v=p.x,y=l.x/2;v-y<s&&(i=s+y),v+y>c&&(i=c-y)}void 0===i&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==i?i:p.x,void 0!==r?r:p.y))),this._unmodified=u,this._constraining=!1}},wi.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,i=this._fov*(.5+e.y/this.height),r=Math.sin(i)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-i,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,c=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),l=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,l,c),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-a,-s,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,d=this.height%2/2,p=Math.cos(this.angle),f=Math.sin(this.angle),g=a-Math.round(a)+p*h+f*d,m=s-Math.round(s)+p*d+f*h,v=new Float64Array(u);if(t.translate(v,v,[g>.5?g-1:g,m>.5?m-1:m,0]),this.alignedProjMatrix=v,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},wi.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},wi.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var i=n.x,r=n.y,o=n.x,a=n.y,s=0,c=e;s<c.length;s+=1){var l=c[s];i=Math.min(i,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(i,r),new t.Point(o,r),new t.Point(o,a),new t.Point(i,a),new t.Point(i,r)]},Object.defineProperties(wi.prototype,Ii);var Ai=function(e){var n,i,r,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),i=!1,r=null,o=function(){r=null,i&&(n(),r=setTimeout(o,300),i=!1)},function(){return i=!0,r||o(),r})};Ai.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ai.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ai.prototype.getHashString=function(e){var n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,c=this._map.getBearing(),l=this._map.getPitch(),u="";if(u+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(c||l)&&(u+="/"+Math.round(10*c)/10),l&&(u+="/"+Math.round(l)),this._hashName){var h=this._hashName,d=!1,p=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(d=!0,e+"="+u):t})).filter((function(t){return t}));return d||p.push(h+"="+u),"#"+p.join("&")}return"#"+u},Ai.prototype._getCurrentHash=function(){var e,n=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):i.split("/")},Ai.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Ai.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Pi={linearity:.3,easing:t.bezier(0,0,.3,1)},Oi=t.extend({deceleration:2500,maxSpeed:1400},Pi),Mi=t.extend({deceleration:20,maxSpeed:1400},Pi),Si=t.extend({deceleration:1e3,maxSpeed:360},Pi),ki=t.extend({deceleration:1e3,maxSpeed:90},Pi),Ei=function(t){this._map=t,this.clear()};function Li(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ti(e,n,i){var r=i.maxSpeed,o=i.linearity,a=i.deceleration,s=t.clamp(e*o/(n/1e3),-r,r),c=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*c,amount:s*(c/2)}}Ei.prototype.clear=function(){this._inertiaBuffer=[]},Ei.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Ei.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Ei.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},i=0,r=this._inertiaBuffer;i<r.length;i+=1){var o=r[i].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var c=Ti(n.pan.mag(),a,t.extend({},Oi,e||{}));s.offset=n.pan.mult(c.amount/n.pan.mag()),s.center=this._map.transform.center,Li(s,c)}if(n.zoom){var l=Ti(n.zoom,a,Mi);s.zoom=this._map.transform.zoom+l.amount,Li(s,l)}if(n.bearing){var u=Ti(n.bearing,a,Si);s.bearing=this._map.transform.bearing+t.clamp(u.amount,-179,179),Li(s,u)}if(n.pitch){var h=Ti(n.pitch,a,ki);s.pitch=this._map.transform.pitch+h.amount,Li(s,h)}if(s.zoom||s.bearing){var d=void 0===n.pinchAround?n.around:n.pinchAround;s.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Ri=function(e){function i(i,r,o,a){void 0===a&&(a={});var s=n.mousePos(r.getCanvasContainer(),o),c=r.unproject(s);e.call(this,i,t.extend({point:s,lngLat:c,originalEvent:o},a)),this._defaultPrevented=!1,this.target=r}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),Ni=function(e){function i(i,r,o){var a="touchend"===i?o.changedTouches:o.touches,s=n.touchPos(r.getCanvasContainer(),a),c=s.map((function(t){return r.unproject(t)})),l=s.reduce((function(t,e,n,i){return t.add(e.div(i.length))}),new t.Point(0,0)),u=r.unproject(l);e.call(this,i,{points:s,point:l,lngLats:c,lngLat:u,originalEvent:o}),this._defaultPrevented=!1}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),Bi=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),ji=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};ji.prototype.reset=function(){delete this._mousedownPos},ji.prototype.wheel=function(t){return this._firePreventable(new Bi(t.type,this._map,t))},ji.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Ri(t.type,this._map,t))},ji.prototype.mouseup=function(t){this._map.fire(new Ri(t.type,this._map,t))},ji.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Ri(t.type,this._map,t))},ji.prototype.dblclick=function(t){return this._firePreventable(new Ri(t.type,this._map,t))},ji.prototype.mouseover=function(t){this._map.fire(new Ri(t.type,this._map,t))},ji.prototype.mouseout=function(t){this._map.fire(new Ri(t.type,this._map,t))},ji.prototype.touchstart=function(t){return this._firePreventable(new Ni(t.type,this._map,t))},ji.prototype.touchmove=function(t){this._map.fire(new Ni(t.type,this._map,t))},ji.prototype.touchend=function(t){this._map.fire(new Ni(t.type,this._map,t))},ji.prototype.touchcancel=function(t){this._map.fire(new Ni(t.type,this._map,t))},ji.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var Di=function(t){this._map=t};Di.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Di.prototype.mousemove=function(t){this._map.fire(new Ri(t.type,this._map,t))},Di.prototype.mousedown=function(){this._delayContextMenu=!0},Di.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Di.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ri(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var Fi=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function zi(t,e){for(var n={},i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}Fi.prototype.isEnabled=function(){return!!this._enabled},Fi.prototype.isActive=function(){return!!this._active},Fi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fi.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Fi.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=i,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(r.x,i.x),a=Math.max(r.x,i.x),s=Math.min(r.y,i.y),c=Math.max(r.y,i.y);n.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=c-s+"px"}}},Fi.prototype.mouseupWindow=function(e,i){var r=this;if(this._active&&0===e.button){var o=this._startPos,a=i;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Fi.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Fi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Fi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Vi=function(t){this.reset(),this.numTouches=t.numTouches};Vi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Vi.prototype.touchstart=function(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),i=0,r=e;i<r.length;i+=1)n._add(r[i]);return n.div(e.length)}(n),this.touches=zi(i,n)))},Vi.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var i=zi(n,e);for(var r in this.touches){var o=i[r];(!o||o.dist(this.touches[r])>30)&&(this.aborted=!0)}}},Vi.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}};var Gi=function(t){this.singleTap=new Vi(t),this.numTaps=t.numTaps,this.reset()};Gi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Gi.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},Gi.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},Gi.prototype.touchend=function(t,e,n){var i=this.singleTap.touchend(t,e,n);if(i){var r=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(i)<30;if(r&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}};var Zi=function(){this._zoomIn=new Gi({numTouches:1,numTaps:2}),this._zoomOut=new Gi({numTouches:2,numTaps:1}),this.reset()};Zi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Zi.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},Zi.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},Zi.prototype.touchend=function(t,e,n){var i=this,r=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var Wi={0:1,2:2},Hi=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Hi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Hi.prototype._correctButton=function(t,e){return!1},Hi.prototype._move=function(t,e){return{}},Hi.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=n.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Hi.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=Wi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Hi.prototype.mouseupWindow=function(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Hi.prototype.enable=function(){this._enabled=!0},Hi.prototype.disable=function(){this._enabled=!1,this.reset()},Hi.prototype.isEnabled=function(){return this._enabled},Hi.prototype.isActive=function(){return this._active};var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Hi),$i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hi),Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hi),Xi=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Xi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Xi.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Xi.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},Xi.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Xi.prototype.touchcancel=function(){this.reset()},Xi.prototype._calculateTransform=function(e,n,i){i.length>0&&(this._active=!0);var r=zi(i,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var c in r){var l=r[c],u=this._touches[c];u&&(o._add(l),a._add(l.sub(u)),s++,r[c]=l)}if(this._touches=r,!(s<this._minTouches)&&a.mag()){var h=a.div(s);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:h}}},Xi.prototype.enable=function(){this._enabled=!0},Xi.prototype.disable=function(){this._enabled=!1,this.reset()},Xi.prototype.isEnabled=function(){return this._enabled},Xi.prototype.isActive=function(){return this._active};var Yi=function(){this.reset()};function qi(t,e,n){for(var i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function Ji(t,e){return Math.log(t/e)/Math.LN2}Yi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yi.prototype._start=function(t){},Yi.prototype._move=function(t,e,n){return{}},Yi.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Yi.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var i=this._firstTwoTouches,r=i[1],o=qi(n,e,i[0]),a=qi(n,e,r);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Yi.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var r=this._firstTwoTouches,o=r[1],a=qi(i,e,r[0]),s=qi(i,e,o);a&&s||(this._active&&n.suppressClick(),this.reset())}},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ji(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ji(this._distance,n),pinchAround:e}},e}(Yi);function tr(t,e){return 180*t.angleWith(e)/Math.PI}var er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=tr(t,this._startVector);return Math.abs(n)<e},e}(Yi);function nr(t){return Math.abs(t.y)>Math.abs(t.x)}var ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,nr(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var i=t.mag()>=2,r=e.mag()>=2;if(i||r){if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return nr(t)&&nr(e)&&o}},e}(Yi),rr={panStep:100,bearingStep:15,pitchStep:10},or=function(){var t=rr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function ar(t){return t*(2-t)}or.prototype.reset=function(){this._active=!1},or.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,i=0,r=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var c=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ar,zoom:n?Math.round(c)+n*(t.shiftKey?2:1):c,bearing:s.getBearing()+i*e._bearingStep,pitch:s.getPitch()+r*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},or.prototype.enable=function(){this._enabled=!0},or.prototype.disable=function(){this._enabled=!1,this.reset()},or.prototype.isEnabled=function(){return this._enabled},or.prototype.isActive=function(){return this._active};var sr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};sr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sr.prototype.isZooming=function(){return!!this._zooming},sr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sr.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},sr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sr.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var i=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sr.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*r))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,c=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&c&&l){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),d=l(h);a=t.number(c,s,d),h<1?this._frameId||(this._frameId=!0):u=!0}else a=s,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,r=(t.browser.now()-i.start)/i.duration,o=i.easing(r+.01)-i.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},sr.prototype.reset=function(){this._active=!1};var cr=function(t,e){this._clickZoom=t,this._tapZoom=e};cr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},cr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},cr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},cr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var lr=function(){this.reset()};lr.prototype.reset=function(){this._active=!1},lr.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},lr.prototype.enable=function(){this._enabled=!0},lr.prototype.disable=function(){this._enabled=!1,this.reset()},lr.prototype.isEnabled=function(){return this._enabled},lr.prototype.isActive=function(){return this._active};var ur=function(){this._tap=new Gi({numTouches:1,numTaps:1}),this.reset()};ur.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ur.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},ur.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)},ur.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},ur.prototype.touchcancel=function(){this.reset()},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var hr=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};hr.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var dr=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};dr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},dr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},dr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},dr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var pr=function(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0};pr.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},pr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},pr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},pr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},pr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},pr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fr=function(t){return t.zoom||t.drag||t.pitch||t.rotate},gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function mr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var vr=function(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ei(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],c=s[0];n.addEventListener(c,s[1],c===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};vr.prototype.destroy=function(){for(var e=0,i=this._listeners;e<i.length;e+=1){var r=i[e],o=r[0];n.removeEventListener(o,r[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},vr.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ji(e,t));var i=e.boxZoom=new Fi(e,t);this._add("boxZoom",i);var r=new Zi,o=new lr;e.doubleClickZoom=new cr(o,r),this._add("tapZoom",r),this._add("clickZoom",o);var a=new ur;this._add("tapDragZoom",a);var s=e.touchPitch=new ir;this._add("touchPitch",s);var c=new $i(t),l=new Ki(t);e.dragRotate=new dr(t,c,l),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var u=new Ui(t),h=new Xi(t);e.dragPan=new hr(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);var d=new er,p=new Qi;e.touchZoomRotate=new pr(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var f=e.scrollZoom=new sr(e,this);this._add("scrollZoom",f,["mousePan"]);var g=e.keyboard=new or;this._add("keyboard",g),this._add("blockableMapEvent",new Di(e));for(var m=0,v=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<v.length;m+=1){var y=v[m];t.interactive&&t[y]&&e[y].enable(t[y])}},vr.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},vr.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},vr.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},vr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},vr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},vr.prototype.isMoving=function(){return Boolean(fr(this._eventsInProgress))||this.isZooming()},vr.prototype._blockedByActive=function(t,e,n){for(var i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1},vr.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},vr.prototype._getMapTouches=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var r=i[n];this._el.contains(r.target)&&e.push(r)}return e},vr.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,c=s?n.touchPos(this._el,s):n.mousePos(this._el,t),l=0,u=this._handlers;l<u.length;l+=1){var h=u[l],d=h.handlerName,p=h.handler,f=h.allowed;if(p.isEnabled()){var g=void 0;this._blockedByActive(a,f,d)?p.reset():p[e||t.type]&&(g=p[e||t.type](t,c,s),this.mergeHandlerResult(r,o,g,d,i),g&&g.needsRenderFrame&&this._triggerRenderFrame()),(g||p.isActive())&&(a[d]=p)}}var m={};for(var v in this._previousActiveHandlers)a[v]||(m[v]=i);this._previousActiveHandlers=a,(Object.keys(m).length||mr(r))&&(this._changes.push([r,o,m]),this._triggerRenderFrame()),(Object.keys(a).length||mr(r))&&this._map._stop(!0),this._updatingCamera=!1;var y=r.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},vr.prototype.mergeHandlerResult=function(e,n,i,r,o){if(i){t.extend(e,i);var a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}},vr.prototype._applyChanges=function(){for(var e={},n={},i={},r=0,o=this._changes;r<o.length;r+=1){var a=o[r],s=a[0],c=a[1],l=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,c),t.extend(i,l)}this._updateMapTransform(e,n,i),this._changes=[]},vr.prototype._updateMapTransform=function(t,e,n){var i=this._map,r=i.transform;if(!mr(t))return this._fireEvents(e,n,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,c=t.pitchDelta,l=t.around,u=t.pinchAround;void 0!==u&&(l=u),i._stop(!0),l=l||i.transform.centerPoint;var h=r.pointLocation(o?l.sub(o):l);s&&(r.bearing+=s),c&&(r.pitch+=c),a&&(r.zoom+=a),r.setLocationAtPoint(h,l),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},vr.prototype._fireEvents=function(e,n,i){var r=this,o=fr(this._eventsInProgress),a=fr(e),s={};for(var c in e)this._eventsInProgress[c]||(s[c+"start"]=e[c].originalEvent),this._eventsInProgress[c]=e[c];for(var l in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(l,s[l]);for(var u in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(u,e[u].originalEvent);var h,d={};for(var p in this._eventsInProgress){var f=this._eventsInProgress[p],g=f.handlerName,m=f.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[p],d[p+"end"]=h=n[g]||m)}for(var v in d)this._fireEvent(v,d[v]);var y=fr(this._eventsInProgress);if(i&&(o||a)&&!y){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-r._bearingSnap<t&&t<r._bearingSnap};b?(_(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:h})):(this._map.fire(new t.Event("moveend",{originalEvent:h})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},vr.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},vr.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new gr("renderFrame",{timeStamp:e})),t._applyChanges()}))},vr.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yr=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,i,r){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}r.padding=t.extend(o,r.padding);var s=this.transform,c=s.padding,l=s.project(t.LngLat.convert(e)),u=s.project(t.LngLat.convert(n)),h=l.rotate(-i*Math.PI/180),d=u.rotate(-i*Math.PI/180),p=new t.Point(Math.max(h.x,d.x),Math.max(h.y,d.y)),f=new t.Point(Math.min(h.x,d.x),Math.min(h.y,d.y)),g=p.sub(f),m=(s.width-(c.left+c.right+r.padding.left+r.padding.right))/g.x,v=(s.height-(c.top+c.bottom+r.padding.top+r.padding.bottom))/g.y;if(!(v<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,v)),r.maxZoom),b=t.Point.convert(r.offset),_=new t.Point(b.x+(r.padding.left-r.padding.right)/2,b.y+(r.padding.top-r.padding.bottom)/2).mult(s.scale/s.zoomScale(y));return{center:s.unproject(l.add(u).div(2).sub(_)),zoom:y,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,r),r,o)},n.prototype._fitInternal=function(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),c=this.getPadding(),l="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:s,d="padding"in e?e.padding:r.padding,p=t.Point.convert(e.offset),f=r.centerPoint.add(p),g=r.pointLocation(f),m=t.LngLat.convert(e.center||g);this._normalizeCenter(m);var v,y,b=r.project(g),_=r.project(m).sub(b),C=r.zoomScale(l-o);e.around&&(v=t.LngLat.convert(e.around),y=r.locationPoint(v));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==o,this._rotating=this._rotating||a!==u,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((function(e){if(i._zooming&&(r.zoom=t.number(o,l,e)),i._rotating&&(r.bearing=t.number(a,u,e)),i._pitching&&(r.pitch=t.number(s,h,e)),i._padding&&(r.interpolatePadding(c,d,e),f=r.centerPoint.add(p)),v)r.setLocationAtPoint(v,y);else{var g=r.zoomScale(r.zoom-o),m=l>o?Math.min(2,C):Math.max(.5,C),x=Math.pow(m,1-e),w=r.unproject(b.add(_.mult(e*x)).mult(g));r.setLocationAtPoint(r.renderWorldCopies?w.wrap():w,f)}i._fireMoveEvents(n)}),(function(t){i._afterEase(n,t)}),e),this},n.prototype._prepareEase=function(e,n,i){void 0===i&&(i={}),this._moving=!0,n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),c=this.getPitch(),l=this.getPadding(),u="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,d="pitch"in e?+e.pitch:c,p="padding"in e?e.padding:o.padding,f=o.zoomScale(u-a),g=t.Point.convert(e.offset),m=o.centerPoint.add(g),v=o.pointLocation(m),y=t.LngLat.convert(e.center||v);this._normalizeCenter(y);var b=o.project(v),_=o.project(y).sub(b),C=e.curve,x=Math.max(o.width,o.height),w=x/f,I=_.mag();if("minZoom"in e){var A=t.clamp(Math.min(e.minZoom,a,u),o.minZoom,o.maxZoom),P=x/o.zoomScale(A-a);C=Math.sqrt(P/I*2)}var O=C*C;function M(t){var e=(w*w-x*x+(t?-1:1)*O*O*I*I)/(2*(t?w:x)*O*I);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}var E=M(0),L=function(t){return k(E)/k(E+C*t)},T=function(t){return x*((k(E)*(S(e=E+C*t)/k(e))-S(E))/O)/I;var e},R=(M(1)-E)/C;if(Math.abs(I)<1e-6||!isFinite(R)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var N=w<x?-1:1;R=Math.abs(Math.log(w/x))/C,T=function(){return 0},L=function(t){return Math.exp(N*C*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/C:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=d!==c,this._padding=!o.isPaddingEqual(p),this._prepareEase(n,!1),this._ease((function(e){var r=e*R,f=1/L(r);o.zoom=1===e?u:a+o.scaleZoom(f),i._rotating&&(o.bearing=t.number(s,h,e)),i._pitching&&(o.pitch=t.number(c,d,e)),i._padding&&(o.interpolatePadding(l,p,e),m=o.centerPoint.add(g));var v=1===e?y:o.unproject(b.add(_.mult(T(r))).mult(f));o.setLocationAtPoint(o.renderWorldCopies?v.wrap():v,m),i._fireMoveEvents(n)}),(function(){return i._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var i=this.handlers;i&&i.stop(!1)}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),br=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};br.prototype.getDefaultPosition=function(){return"bottom-right"},br.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},br.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},br.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=n.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},br.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},br.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i];if(r.used){var o=r.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},br.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var _r=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};_r.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_r.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_r.prototype.getDefaultPosition=function(){return"bottom-left"},_r.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},_r.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},_r.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Cr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Cr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Cr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},Cr.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,i=e;n<i.length;n+=1){var r=i[n];if(!r.cancelled&&(r.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Cr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xr={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},wr=t.window.HTMLImageElement,Ir=t.window.HTMLElement,Ar=t.window.ImageBitmap,Pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Or=function(i){function r(e){var n=this;if(null!=(e=t.extend({},Pr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new wi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(i.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Cr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},xr,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ir))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new vr(this,e),this._hash=e.hash&&new Ai("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new br({customAttribution:e.customAttribution})),this.addControl(new _r,e.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){n.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(r.__proto__=i),(r.prototype=Object.create(i&&i.prototype)).constructor=r;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},r.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],r=n[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(t,e,n){var i,r=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){var a=r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(r,new Ri(t,r,i.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){(r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(r,new Ri(t,r,i.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(r,new Ri(t,r,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(i={},i[t]=function(t){var i=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(r,t),delete t.features)},i)}},r.prototype.on=function(t,e,n){if(void 0===n)return i.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(o,r.delegates[o]);return this},r.prototype.once=function(t,e,n){if(void 0===n)return i.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in r.delegates)this.once(o,r.delegates[o]);return this},r.prototype.off=function(t,e,n){var r=this;return void 0===n?i.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var o=i[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var c in s.delegates)r.off(c,s.delegates[c]);return o.splice(a,1),r}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[r,new t.Point(o.x,r.y),o,new t.Point(r.x,o.y),r]}return this.style.queryRenderedFeatures(i,n,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ze(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ze(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(e,n){var i=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(o,(function(e,r){e?i.fire(new t.ErrorEvent(e)):r&&i._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},r.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,n,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var o=i.sdf;void 0===o&&(o=!1);var a=i.stretchX,s=i.stretchY,c=i.content;if(this._lazyInitEmptyStyle(),n instanceof wr||Ar&&n instanceof Ar){var l=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:r,stretchX:a,stretchY:s,content:c,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:r,stretchX:a,stretchY:s,content:c,sdf:o,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}},r.prototype.updateImage=function(e,n){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=n instanceof wr||Ar&&n instanceof Ar?t.browser.getImageData(n):n,o=r.width,a=r.height,s=r.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(n instanceof wr||Ar&&n instanceof Ar)),void this.style.updateImage(e,i))},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},r.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,n,i),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,n,i),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,r)}))},r.prototype._resizeCanvas=function(e,n){var i=t.browser.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},r.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(this.painter=new bi(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(e){var n,i=this,r=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,c=t.browser.now();this.style.zoomHistory.update(s,c);var l=new t.EvaluationParameters(s,{now:c,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=l.crossFadingFactor();1===u&&u===this._crossFadingFactor||(a=!0,this._crossFadingFactor=u),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-r;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),i.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var e=i.painter.queryGpuTimers(d);i.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Mr(this._canvasContainer),Mr(this._controlContainer),Mr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(r.prototype,o),r}(yr);function Mr(t){t.parentNode&&t.parentNode.removeChild(t)}var Sr={showCompass:!0,showZoom:!0,visualizePitch:!1},kr=function(e){var i=this;this.options=t.extend({},Sr,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};kr.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},kr.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},kr.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Er(this._map,this._compass,this.options.visualizePitch)),this._container},kr.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},kr.prototype._createButton=function(t,e){var i=n.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},kr.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var Er=function(e,i,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=i,this.mouseRotate=new $i({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Ki({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchmove",this.touchmove),n.addEventListener(i,"touchend",this.touchend),n.addEventListener(i,"touchcancel",this.reset)};function Lr(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){var r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(n);i.locationPoint(r).distSqr(n)<a?e=r:i.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Er.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()},Er.prototype.move=function(t,e){var n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}},Er.prototype.off=function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Er.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},Er.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},Er.prototype.mousemove=function(t){this.move(t,n.mousePos(this.element,t))},Er.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Er.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Er.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Er.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Er.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Tr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rr(t,e,n){var i=t.classList;for(var r in Tr)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+e)}var Nr,Br=function(e){function i(i,r){var o=this;if(e.call(this),(i instanceof t.window.HTMLElement||r)&&(i=t.extend({element:i},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var c=n.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<h.length;u+=1){var d=h[u],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",d.rx),p.setAttributeNS(null,"ry",d.ry),l.appendChild(p)}var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var g=n.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(g);var m=n.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var v=n.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(v);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var b=n.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var C=n.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),b.appendChild(_),b.appendChild(C),c.appendChild(l),c.appendChild(f),c.appendChild(m),c.appendChild(y),c.appendChild(b),a.appendChild(c),a.setAttributeNS(null,"height",41*this._scale+"px"),a.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Rr(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},i.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Tr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},i.prototype.getRotation=function(){return this._rotation},i.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},i.prototype.getRotationAlignment=function(){return this._rotationAlignment},i.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},i.prototype.getPitchAlignment=function(){return this._pitchAlignment},i}(t.Evented),jr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Dr=0,Fr=!1,zr=function(e){function i(n){e.call(this),this.options=t.extend({},jr,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Nr?i(Nr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){i(Nr="denied"!==t.state)})):i(Nr=!!t.window.navigator.geolocation),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dr=0,Fr=!1},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},i.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})},i.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},i.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),i=e.distanceTo(n),r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},i.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},i.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Fr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Br({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dr--,Fr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Dr>1?(e={maximumAge:6e5,timeout:0},Fr=!0):(e=this.options.positionOptions,Fr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),Vr={maxWidth:100,unit:"metric"},Gr=function(e){this.options=t.extend({},Vr,e),t.bindAll(["_onMove","setUnit"],this)};function Zr(t,e,n){var i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var c=3.2808*s;c>5280?Wr(e,i,c/5280,t._getUIString("ScaleControl.Miles")):Wr(e,i,c,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Wr(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Wr(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers")):Wr(e,i,s,t._getUIString("ScaleControl.Meters"))}function Wr(t,e,n,i){var r,o,a,s=(r=n,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(a=(a=r/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+i}Gr.prototype.getDefaultPosition=function(){return"bottom-left"},Gr.prototype._onMove=function(){Zr(this._map,this._container,this.options)},Gr.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Gr.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Gr.prototype.setUnit=function(t){this.options.unit=t,Zr(this._map,this._container,this.options)};var Hr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Hr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Hr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Hr.prototype._isFullscreen=function(){return this._fullscreen},Hr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Hr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ur={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},$r=function(e){function i(n){e.call(this),this.options=t.extend(Object.create(Ur),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},i.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},i.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},i.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},i.prototype._onMouseUp=function(t){this._update(t.point)},i.prototype._onMouseMove=function(t){this._update(t.point)},i.prototype._onDrag=function(t){this._update(t.point)},i.prototype._update=function(e){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var r=t.Point.convert(n);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,c=this._container.offsetWidth,l=this._container.offsetHeight;s=r.y+a.bottom.y<l?["top"]:r.y>this._map.transform.height-l?["bottom"]:[],r.x<c/2?s.push("left"):r.x>this._map.transform.width-c/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var u=r.add(a[o]).round();n.setTransform(this._container,Tr[o]+" translate("+u.x+"px,"+u.y+"px)"),Rr(this._container,o,"popup")}},i.prototype._onClose=function(){this.remove()},i}(t.Evented),Kr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Or,NavigationControl:kr,GeolocateControl:zr,AttributionControl:br,ScaleControl:Gr,FullscreenControl:Hr,Popup:$r,Marker:Br,Style:Ze,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Dt().acquire(Rt)},clearPrewarmedResources:function(){var t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Rt),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Nt.workerCount},set workerCount(t){Nt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Kr})),n}()},"5+WD":function(t,e,n){"use strict";n.d(e,"a",(function(){return Ct})),n.d(e,"b",(function(){return mt})),n.d(e,"c",(function(){return yt})),n.d(e,"d",(function(){return _t})),n.d(e,"e",(function(){return ft})),n.d(e,"f",(function(){return ut})),n.d(e,"g",(function(){return wt})),n.d(e,"h",(function(){return X})),n.d(e,"i",(function(){return Y}));var i=n("czwa"),r=n("TUlv"),o=n("zu60"),a=n("rrZM"),s=n("fXoL"),c=n("ofXK"),l=n("vxfF"),u=n("nLfN"),h=n("8LU1"),d=n("XNiG"),p=n("quSY"),f=n("l5mm"),g=n("eNwd"),m=n("HDdC"),v=n("VRyK"),y=n("1G5W"),b=n("JX91"),_=n("lJxs"),C=n("IzEk"),x=n("vkgz"),w=n("eIep"),I=n("cH1L");function A(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function P(t,e){var n=e?"":"none";A(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function O(t,e){var n=t.style;n.position=e?"":"fixed",n.top=n.opacity=e?"":"0",n.left=e?"":"-999em"}function M(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function S(t,e){return t.getPropertyValue(e).split(",").map((function(t){return t.trim()}))}function k(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function E(t,e,n){return n>=t.top&&n<=t.bottom&&e>=t.left&&e<=t.right}function L(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function T(t,e,n,i){var r=t.width*e,o=t.height*e;return i>t.top-o&&i<t.bottom+o&&n>t.left-r&&n<t.right+r}var R=function(){function t(e,n){Object(o.a)(this,t),this._document=e,this._viewportRuler=n,this.positions=new Map}return Object(a.a)(t,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(t){var e=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach((function(t){e.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:k(t)})}))}},{key:"handleScroll",value:function(t){var e=t.target,n=this.positions.get(e);if(!n)return null;var i,r,o=e===this._document?e.documentElement:e,a=n.scrollPosition;if(e===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,r=s.left}else i=e.scrollTop,r=e.scrollLeft;var c=a.top-i,l=a.left-r;return this.positions.forEach((function(t,n){t.clientRect&&e!==n&&o.contains(n)&&L(t.clientRect,c,l)})),a.top=i,a.left=r,{top:c,left:l}}}]),t}();function N(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(var r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?F(t,e):"input"!==i&&"select"!==i&&"textarea"!==i||D(t,e),B("canvas",t,e,F),B("input, textarea, select",t,e,D),e}function B(t,e,n,i){var r=e.querySelectorAll(t);if(r.length)for(var o=n.querySelectorAll(t),a=0;a<r.length;a++)i(r[a],o[a])}var j=0;function D(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name="mat-clone-".concat(e.name,"-").concat(j++))}function F(t,e){var n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(i){}}var z=Object(u.e)({passive:!0}),V=Object(u.e)({passive:!1}),G=function(){function t(e,n,i,r,a,s){var c=this;Object(o.a)(this,t),this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=a,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new d.a,this._pointerMoveSubscription=p.a.EMPTY,this._pointerUpSubscription=p.a.EMPTY,this._scrollSubscription=p.a.EMPTY,this._resizeSubscription=p.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new d.a,this.started=new d.a,this.released=new d.a,this.ended=new d.a,this.entered=new d.a,this.exited=new d.a,this.dropped=new d.a,this.moved=this._moveEvents,this._pointerDown=function(t){if(c.beforeStarted.next(),c._handles.length){var e=c._handles.find((function(e){var n=t.target;return!!n&&(n===e||e.contains(n))}));!e||c._disabledHandles.has(e)||c.disabled||c._initializeDragSequence(e,t)}else c.disabled||c._initializeDragSequence(c._rootElement,t)},this._pointerMove=function(t){t.preventDefault();var e=c._getPointerPositionOnPage(t);if(c._hasStartedDragging){c._boundaryElement&&(c._previewRect&&(c._previewRect.width||c._previewRect.height)||(c._previewRect=(c._preview||c._rootElement).getBoundingClientRect()));var n=c._getConstrainedPointerPosition(e);if(c._hasMoved=!0,c._lastKnownPointerPosition=e,c._updatePointerDirectionDelta(n),c._dropContainer)c._updateActiveDropContainer(n,e);else{var i=c._activeTransform;if(i.x=n.x-c._pickupPositionOnPage.x+c._passiveTransform.x,i.y=n.y-c._pickupPositionOnPage.y+c._passiveTransform.y,c._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&c._rootElement instanceof SVGElement){var r="translate(".concat(i.x," ").concat(i.y,")");c._rootElement.setAttribute("transform",r)}}c._moveEvents.observers.length&&c._ngZone.run((function(){c._moveEvents.next({source:c,pointerPosition:n,event:t,distance:c._getDragDistance(n),delta:c._pointerDirectionDelta})}))}else if(Math.abs(e.x-c._pickupPositionOnPage.x)+Math.abs(e.y-c._pickupPositionOnPage.y)>=c._config.dragStartThreshold){var o=Date.now()>=c._dragStartTime+c._getDragStartDelay(t),a=c._dropContainer;if(!o)return void c._endDragSequence(t);a&&(a.isDragging()||a.isReceiving())||(c._hasStartedDragging=!0,c._ngZone.run((function(){return c._startDragSequence(t)})))}},this._pointerUp=function(t){c._endDragSequence(t)},this.withRootElement(e),this._parentPositions=new R(i,a),s.registerDragItem(this)}return Object(a.a)(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(t){return this._handles=t.map((function(t){return Object(h.d)(t)})),this._handles.forEach((function(t){return P(t,!1)})),this._toggleNativeDragInteractions(),this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=this,n=Object(h.d)(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular((function(){n.addEventListener("mousedown",e._pointerDown,V),n.addEventListener("touchstart",e._pointerDown,z)})),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(h.d)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe((function(){return e._containInsideBoundaryOnResize()}))),this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&H(this._rootElement),H(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}},{key:"enableHandle",value:function(t){this._disabledHandles.delete(t)}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&H(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&H(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then((function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)}))):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run((function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})})),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){U(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var e,n=this._dropContainer;if(n){var i=this._rootElement,r=i.parentNode,o=this._preview=this._createPreviewElement(),a=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");r.insertBefore(s,i),O(i,!1),this._document.body.appendChild(r.replaceChild(a,i)),(e=this._document,e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body).appendChild(o),this.started.next({source:this}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(t,e){var n=this;e.stopPropagation();var i=this.isDragging(),r=U(e),o=!r&&0!==e.button,a=this._rootElement,s=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(i||o||s)){this._handles.length&&(this._rootElementTapHighlight=a.style.webkitTapHighlightColor||"",a.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe((function(t){n._updateOnScroll(t)})),this._boundaryElement&&(this._boundaryRect=k(this._boundaryElement));var c=this._previewTemplate;this._pickupPositionInElement=c&&c.template&&!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);var l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;O(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run((function(){var n=e._dropContainer,i=n.getItemIndex(e),r=e._getPointerPositionOnPage(t),o=e._getDragDistance(e._getPointerPositionOnPage(t)),a=n._isOverContainer(r.x,r.y);e.ended.next({source:e,distance:o}),e.dropped.next({item:e,currentIndex:i,previousIndex:e._initialIndex,container:n,previousContainer:e._initialContainer,isPointerOverContainer:a,distance:o}),n.drop(e,i,e._initialContainer,a,o,e._initialIndex),e._dropContainer=e._initialContainer}))}},{key:"_updateActiveDropContainer",value:function(t,e){var n=this,i=t.x,r=t.y,o=e.x,a=e.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,r);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,r)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run((function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,r,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})})),this._dropContainer._startScrollingIfNecessary(o,a),this._dropContainer._sortItem(this,i,r,this._pointerDirectionDelta),this._preview.style.transform=Z(i-this._pickupPositionInElement.x,r-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,i=e?e.template:null;if(i&&e){var r=e.matchSize?this._rootElement.getBoundingClientRect():null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),t=$(o,this._document),this._previewRef=o,e.matchSize?K(t,r):t.style.transform=Z(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement;K(t=N(a),a.getBoundingClientRect())}return A(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),P(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach((function(e){return t.classList.add(e)})):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Z(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=S(e,"transition-property"),i=n.find((function(t){return"transform"===t||"all"===t}));if(!i)return 0;var r=n.indexOf(i),o=S(e,"transition-duration"),a=S(e,"transition-delay");return M(o[r])+M(a[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular((function(){return new Promise((function(e){var i=function n(i){(!i||i.target===t._preview&&"transform"===i.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(r))},r=setTimeout(i,1.5*n);t._preview.addEventListener("transitionend",i)}))}))}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=$(this._placeholderRef,this._document)):t=N(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),i=t===this._rootElement?null:t,r=i?i.getBoundingClientRect():n,o=U(e)?e.targetTouches[0]:e,a=this._getViewportScrollPosition();return{x:r.left-n.left+(o.pageX-r.left-a.left),y:r.top-n.top+(o.pageY-r.top-a.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=this._getViewportScrollPosition(),n=U(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,i=n.pageX-e.left,r=n.pageY-e.top;if(this._ownerSVGElement){var o=this._ownerSVGElement.getScreenCTM();if(o){var a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=r,a.matrixTransform(o.inverse())}}return{x:i,y:r}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(t,this):t,i=n.x,r=n.y;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(i=this._pickupPositionOnPage.x),this._boundaryRect){var o=this._pickupPositionInElement,a=o.x,s=o.y,c=this._boundaryRect,l=this._previewRect,u=c.top+s,h=c.bottom-(l.height-s);i=W(i,c.left+a,c.right-(l.width-a)),r=W(r,u,h)}return{x:i,y:r}}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-r.x),a=Math.abs(n-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>r.x?1:-1,r.x=e),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,P(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,V),t.removeEventListener("touchstart",this._pointerDown,z)}},{key:"_applyRootElementTransform",value:function(t,e){var n=Z(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===r.width&&0===r.height)){var o=i.left-r.left,a=r.right-i.right,s=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),a>0&&(e-=a)):e=0,i.height>r.height?(s>0&&(n+=s),c>0&&(n-=c)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:U(t)?e.touch:e?e.mouse:0}},{key:"_updateOnScroll",value:function(t){var e=this._parentPositions.handleScroll(t);if(e){var n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&L(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(h.b)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}}]),t}();function Z(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function W(t,e,n){return Math.max(e,Math.min(n,t))}function H(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function U(t){return"t"===t.type[0]}function $(t,e){var n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];var i=e.createElement("div");return n.forEach((function(t){return i.appendChild(t)})),i}function K(t,e){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.transform=Z(e.left,e.top)}function X(t,e,n){var i=q(e,t.length-1),r=q(n,t.length-1);if(i!==r){for(var o=t[i],a=r<i?-1:1,s=i;s!==r;s+=a)t[s]=t[s+a];t[r]=o}}function Y(t,e,n,i){var r=q(n,t.length-1),o=q(i,e.length);t.length&&e.splice(o,0,t.splice(r,1)[0])}function q(t,e){return Math.max(0,Math.min(e,t))}var J=function(){function t(e,n,i,r,a){var s=this;Object(o.a)(this,t),this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=function(){return!0},this.beforeStarted=new d.a,this.entered=new d.a,this.exited=new d.a,this.dropped=new d.a,this.sorted=new d.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=p.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new d.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){s._stopScrolling(),Object(f.a)(0,g.b).pipe(Object(y.a)(s._stopScrollTimers)).subscribe((function(){var t=s._scrollNode;1===s._verticalScrollDirection?tt(t,-2):2===s._verticalScrollDirection&&tt(t,2),1===s._horizontalScrollDirection?et(t,-2):2===s._horizontalScrollDirection&&et(t,2)}))},this.element=Object(h.d)(e),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new R(i,a)}return Object(a.a)(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){var t=this,e=Object(h.d)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach((function(e){return e._startReceiving(t)})),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"enter",value:function(t,e,n,i){var r;this.start(),null==i?-1===(r=this.sortingDisabled?this._draggables.indexOf(t):-1)&&(r=this._getItemIndexFromPointerPosition(t,e,n)):r=i;var o=this._activeDraggables,a=o.indexOf(t),s=t.getPlaceholderElement(),c=o[r];if(c===t&&(c=o[r+1]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){var l=c.getRootElement();l.parentElement.insertBefore(s,l),o.splice(r,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){var u=o[0].getRootElement();u.parentNode.insertBefore(s,u),o.unshift(t)}else Object(h.d)(this.element).appendChild(s),o.push(t);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,i,r,o){this._reset(),null==o&&(o=n.getItemIndex(t)),this.dropped.next({item:t,currentIndex:e,previousIndex:o,container:this,previousContainer:n,isPointerOverContainer:i,distance:r})}},{key:"withItems",value:function(t){var e=this,n=this._draggables;return this._draggables=t,t.forEach((function(t){return t._withDropContainer(e)})),this.isDragging()&&(n.filter((function(t){return t.isDragging()})).every((function(e){return-1===t.indexOf(e)}))?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"withScrollableParents",value:function(t){var e=Object(h.d)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e].concat(Object(r.a)(t)):t.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(t){return this._isDragging?Q("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,(function(e){return e.drag===t})):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,i){if(!this.sortingDisabled&&T(this._clientRect,.05,e,n)){var r=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,n,i);if(!(-1===o&&r.length>0)){var a="horizontal"===this._orientation,s=Q(r,(function(e){return e.drag===t})),c=r[o],l=c.clientRect,u=s>o?1:-1,h=this._getItemOffsetPx(r[s].clientRect,l,u),d=this._getSiblingOffsetPx(s,r,u),p=r.slice();X(r,s,o),this.sorted.next({previousIndex:s,currentIndex:o,container:this,item:t}),r.forEach((function(e,n){if(p[n]!==e){var i=e.drag===t,r=i?h:d,o=i?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=r,a?(o.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),L(e.clientRect,0,r)):(o.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),L(e.clientRect,r,0))}})),this._previousSwap.overlaps=E(l,e,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(t,e){var n=this;if(!this.autoScrollDisabled){var r,o=0,a=0;if(this._parentPositions.positions.forEach((function(s,c){if(c!==n._document&&s.clientRect&&!r&&T(s.clientRect,.05,t,e)){var l=function(t,e,n,i){var r=nt(e,i),o=it(e,n),a=0,s=0;if(r){var c=t.scrollTop;1===r?c>0&&(a=1):t.scrollHeight-c>t.clientHeight&&(a=2)}if(o){var l=t.scrollLeft;1===o?l>0&&(s=1):t.scrollWidth-l>t.clientWidth&&(s=2)}return[a,s]}(c,s.clientRect,t,e),u=Object(i.a)(l,2);a=u[1],((o=u[0])||a)&&(r=c)}})),!o&&!a){var s=this._viewportRuler.getViewportSize(),c=s.width,l=s.height,u={width:c,height:l,top:0,right:c,bottom:l,left:0};o=nt(u,e),a=it(u,t),r=window}!r||o===this._verticalScrollDirection&&a===this._horizontalScrollDirection&&r===this._scrollNode||(this._verticalScrollDirection=o,this._horizontalScrollDirection=a,this._scrollNode=r,(o||a)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_cacheParentPositions",value:function(){var t=Object(h.d)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}},{key:"_cacheItemPositions",value:function(){var t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map((function(t){var e=t.getVisibleElement();return{drag:t,offset:0,clientRect:k(e)}})).sort((function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top}))}},{key:"_reset",value:function(){var t=this;this._isDragging=!1;var e=Object(h.d)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach((function(t){var e=t.getRootElement();e&&(e.style.transform="")})),this._siblings.forEach((function(e){return e._stopReceiving(t)})),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,r=e[t].clientRect,o=e[t+-1*n],a=r[i?"width":"height"]*n;if(o){var s=i?"left":"top",c=i?"right":"bottom";-1===n?a-=o.clientRect[s]-r[c]:a+=r[s]-o.clientRect[c]}return a}},{key:"_getItemOffsetPx",value:function(t,e,n){var i="horizontal"===this._orientation,r=i?e.left-t.left:e.top-t.top;return-1===n&&(r+=i?e.width-t.width:e.height-t.height),r}},{key:"_shouldEnterAsFirstChild",value:function(t,e){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var r=n[n.length-1].clientRect;return i?t>=r.right:e>=r.bottom}var o=n[0].clientRect;return i?t<=o.left:e<=o.top}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,i){var r=this,o="horizontal"===this._orientation;return Q(this._itemPositions,(function(a,s,c){var l=a.drag,u=a.clientRect;return l===t?c.length<2:(!i||l!==r._previousSwap.drag||!r._previousSwap.overlaps||(o?i.x:i.y)!==r._previousSwap.delta)&&(o?e>=Math.floor(u.left)&&e<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom))}))}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(t,e){return E(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find((function(i){return i._canReceive(t,e,n)}))}},{key:"_canReceive",value:function(t,e,n){if(!E(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var i=this._getShadowRoot().elementFromPoint(e,n);if(!i)return!1;var r=Object(h.d)(this.element);return i===r||r.contains(i)}},{key:"_startReceiving",value:function(t){var e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe((function(e){if(t.isDragging()){var n=t._parentPositions.handleScroll(e);n&&(t._itemPositions.forEach((function(t){L(t.clientRect,n.top,n.left)})),t._itemPositions.forEach((function(e){var n=e.drag;t._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})))}else t.isReceiving()&&t._cacheParentPositions()}))}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var t=Object(u.c)(Object(h.d)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}}]),t}();function Q(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function tt(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function et(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function nt(t,e){var n=t.top,i=t.bottom,r=.05*t.height;return e>=n-r&&e<=n+r?1:e>=i-r&&e<=i+r?2:0}function it(t,e){var n=t.left,i=t.right,r=.05*t.width;return e>=n-r&&e<=n+r?1:e>=i-r&&e<=i+r?2:0}var rt=Object(u.e)({passive:!1,capture:!0}),ot=function(){var t=function(){function t(e,n){var i=this;Object(o.a)(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new d.a,this.pointerUp=new d.a,this.scroll=new d.a,this._preventDefaultWhileDragging=function(t){i._activeDragInstances.size&&t.preventDefault()},this._persistentTouchmoveListener=function(t){i._activeDragInstances.size&&(t.preventDefault(),i.pointerMove.next(t))},this._document=n}return Object(a.a)(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular((function(){e._document.addEventListener("touchmove",e._persistentTouchmoveListener,rt)}))}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,rt)}},{key:"startDragging",value:function(t,e){var n=this;if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){var i=e.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:rt}),i||this._globalListeners.set("mousemove",{handler:function(t){return n.pointerMove.next(t)},options:rt}),this._ngZone.runOutsideAngular((function(){n._globalListeners.forEach((function(t,e){n._document.addEventListener(e,t.handler,t.options)}))}))}}},{key:"stopDragging",value:function(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(t){return this._activeDragInstances.has(t)}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach((function(e){return t.removeDragItem(e)})),this._dropInstances.forEach((function(e){return t.removeDropContainer(e)})),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach((function(e,n){t._document.removeEventListener(n,e.handler,e.options)})),this._globalListeners.clear()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](c.e))},t.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(c.e))},token:t,providedIn:"root"}),t}(),at={dragStartThreshold:5,pointerDirectionChangeThreshold:5},st=function(){var t=function(){function t(e,n,i,r){Object(o.a)(this,t),this._document=e,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=r}return Object(a.a)(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at;return new G(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new J(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](c.e),s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](l.e),s["\u0275\u0275inject"](ot))},t.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new t(Object(s["\u0275\u0275inject"])(c.e),Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(l.e),Object(s["\u0275\u0275inject"])(ot))},token:t,providedIn:"root"}),t}(),ct=new s.InjectionToken("CDK_DRAG_PARENT"),lt=new s.InjectionToken("CdkDropListGroup"),ut=function(){var t=function(){function t(){Object(o.a)(this,t),this._items=new Set,this._disabled=!1}return Object(a.a)(t,[{key:"ngOnDestroy",value:function(){this._items.clear()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(h.b)(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:lt,useExisting:t}])]}),t}(),ht=new s.InjectionToken("CDK_DRAG_CONFIG"),dt=0,pt=new s.InjectionToken("CdkDropList"),ft=function(){var t=function(){function t(e,n,i,r,a,c,l){var u=this;Object(o.a)(this,t),this.element=e,this._changeDetectorRef=i,this._dir=r,this._group=a,this._scrollDispatcher=c,this._destroyed=new d.a,this.connectedTo=[],this.id="cdk-drop-list-".concat(dt++),this.enterPredicate=function(){return!0},this.dropped=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.sorted=new s.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=function(t,e){return u.enterPredicate(t.data,e.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),a&&a._items.add(this)}return Object(a.a)(t,[{key:"addItem",value:function(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort((function(t,e){return t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}))}},{key:"ngOnDestroy",value:function(){var e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(e){var n=this;this._dir&&this._dir.change.pipe(Object(b.a)(this._dir.value),Object(y.a)(this._destroyed)).subscribe((function(t){return e.withDirection(t)})),e.beforeStarted.subscribe((function(){var i=Object(h.a)(n.connectedTo).map((function(e){return"string"==typeof e?t._dropLists.find((function(t){return t.id===e})):e}));if(n._group&&n._group._items.forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),!n._scrollableParentsResolved&&n._scrollDispatcher){var r=n._scrollDispatcher.getAncestorScrollContainers(n.element).map((function(t){return t.getElementRef().nativeElement}));n._dropListRef.withScrollableParents(r),n._scrollableParentsResolved=!0}e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.sortingDisabled=Object(h.b)(n.sortingDisabled),e.autoScrollDisabled=Object(h.b)(n.autoScrollDisabled),e.connectedTo(i.filter((function(t){return t&&t!==n})).map((function(t){return t._dropListRef}))).withOrientation(n.orientation)}))}},{key:"_handleEvents",value:function(t){var e=this;t.beforeStarted.subscribe((function(){e._syncItemsWithRef(),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:e,item:t.item.data,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:e,item:t.item.data}),e._changeDetectorRef.markForCheck()})),t.sorted.subscribe((function(t){e.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:e,item:t.item.data})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance}),e._changeDetectorRef.markForCheck()}))}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.draggingDisabled,i=t.sortingDisabled,r=t.listAutoScrollDisabled,o=t.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=r&&r,this.orientation=o||"vertical",e&&(this.lockAxis=e)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map((function(t){return t._dragRef})))}},{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(t){this._dropListRef.disabled=this._disabled=Object(h.b)(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](st),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](I.c,8),s["\u0275\u0275directiveInject"](lt,12),s["\u0275\u0275directiveInject"](l.c),s["\u0275\u0275directiveInject"](ht,8))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,e){2&t&&(s["\u0275\u0275hostProperty"]("id",e.id),s["\u0275\u0275classProp"]("cdk-drop-list-disabled",e.disabled)("cdk-drop-list-dragging",e._dropListRef.isDragging())("cdk-drop-list-receiving",e._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:lt,useValue:void 0},{provide:pt,useExisting:t}])]}),t._dropLists=[],t}(),gt=new s.InjectionToken("CdkDragHandle"),mt=function(){var t=function(){function t(e,n){Object(o.a)(this,t),this.element=e,this._stateChanges=new d.a,this._disabled=!1,this._parentDrag=n}return Object(a.a)(t,[{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(h.b)(t),this._stateChanges.next(this)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](ct,12))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[s["\u0275\u0275ProvidersFeature"]([{provide:gt,useExisting:t}])]}),t}(),vt=new s.InjectionToken("CdkDragPlaceholder"),yt=function(){var t=function t(e){Object(o.a)(this,t),this.templateRef=e};return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.TemplateRef))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[s["\u0275\u0275ProvidersFeature"]([{provide:vt,useExisting:t}])]}),t}(),bt=new s.InjectionToken("CdkDragPreview"),_t=function(){var t=function(){function t(e){Object(o.a)(this,t),this.templateRef=e,this._matchSize=!1}return Object(a.a)(t,[{key:"matchSize",get:function(){return this._matchSize},set:function(t){this._matchSize=Object(h.b)(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.TemplateRef))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"},features:[s["\u0275\u0275ProvidersFeature"]([{provide:bt,useExisting:t}])]}),t}(),Ct=function(){var t=function(){function t(e,n,i,r,a,c,l,u,h,p){var f=this;Object(o.a)(this,t),this.element=e,this.dropContainer=n,this._document=i,this._ngZone=r,this._viewContainerRef=a,this._dir=l,this._changeDetectorRef=h,this._selfHandle=p,this._destroyed=new d.a,this.started=new s.EventEmitter,this.released=new s.EventEmitter,this.ended=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.dropped=new s.EventEmitter,this.moved=new m.a((function(t){var e=f._dragRef.moved.pipe(Object(_.a)((function(t){return{source:f,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}}))).subscribe(t);return function(){e.unsubscribe()}})),this._dragRef=u.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:null==c?void 0:c.zIndex}),this._dragRef.data=this,c&&this._assignDefaults(c),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object(a.a)(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.pipe(Object(C.a)(1),Object(y.a)(this._destroyed)).subscribe((function(){t._updateRootElement(),t._handles.changes.pipe(Object(b.a)(t._handles),Object(x.a)((function(e){var n=e.filter((function(e){return e._parentDrag===t})).map((function(t){return t.element}));t._selfHandle&&t.rootElementSelector&&n.push(t.element),t._dragRef.withHandles(n)})),Object(w.a)((function(t){return v.a.apply(void 0,Object(r.a)(t.map((function(t){return t._stateChanges.pipe(Object(b.a)(t))}))))})),Object(y.a)(t._destroyed)).subscribe((function(e){var n=t._dragRef,i=e.element.nativeElement;e.disabled?n.disableHandle(i):n.enableHandle(i)})),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)}))}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?xt(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;return t?"string"==typeof t?xt(this.element.nativeElement,t):Object(h.d)(t):null}},{key:"_syncInputs",value:function(t){var e=this;t.beforeStarted.subscribe((function(){if(!t.isDragging()){var n=e._dir,i=e.dragStartDelay,r=e._placeholderTemplate?{template:e._placeholderTemplate.templateRef,context:e._placeholderTemplate.data,viewContainer:e._viewContainerRef}:null,o=e._previewTemplate?{template:e._previewTemplate.templateRef,context:e._previewTemplate.data,matchSize:e._previewTemplate.matchSize,viewContainer:e._viewContainerRef}:null;t.disabled=e.disabled,t.lockAxis=e.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(h.e)(i),t.constrainPosition=e.constrainPosition,t.previewClass=e.previewClass,t.withBoundaryElement(e._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o),n&&t.withDirection(n.value)}}))}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe((function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()})),t.released.subscribe((function(){e.released.emit({source:e})})),t.ended.subscribe((function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()})),t.entered.subscribe((function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})})),t.exited.subscribe((function(t){e.exited.emit({container:t.container.data,item:e})})),t.dropped.subscribe((function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})}))}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.dragStartDelay,i=t.constrainPosition,r=t.previewClass,o=t.boundaryElement,a=t.draggingDisabled,s=t.rootElementSelector;this.disabled=null!=a&&a,this.dragStartDelay=n||0,e&&(this.lockAxis=e),i&&(this.constrainPosition=i),r&&(this.previewClass=r),o&&(this.boundaryElement=o),s&&(this.rootElementSelector=s)}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(h.b)(t),this._dragRef.disabled=this._disabled}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](pt,12),s["\u0275\u0275directiveInject"](c.e),s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](s.ViewContainerRef),s["\u0275\u0275directiveInject"](ht,8),s["\u0275\u0275directiveInject"](I.c,8),s["\u0275\u0275directiveInject"](st),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](gt,10))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var i;1&t&&(s["\u0275\u0275contentQuery"](n,bt,!0),s["\u0275\u0275contentQuery"](n,vt,!0),s["\u0275\u0275contentQuery"](n,gt,!0)),2&t&&(s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._previewTemplate=i.first),s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._placeholderTemplate=i.first),s["\u0275\u0275queryRefresh"](i=s["\u0275\u0275loadQuery"]())&&(e._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&s["\u0275\u0275classProp"]("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:ct,useExisting:t}]),s["\u0275\u0275NgOnChangesFeature"]]}),t}();function xt(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var wt=function(){var t=function t(){Object(o.a)(this,t)};return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[st],imports:[l.b]}),t}()},"73jG":function(t,e,n){"use strict";var i=n("jLWS");t.exports=function(t){var e,n=t.type||i.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(o){e=t.body}else e=null;var r=t.message||null;r||("string"==typeof e?r=e:e&&"string"==typeof e.message?r=e.message:n===i.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},"8uiX":function(t,e,n){"use strict";n.r(e),n.d(e,"ObsModule",(function(){return lc}));var i=n("mrSG"),r=n("ofXK"),o=n("tyNb"),a=n("9OXO"),s=n("4ZJM"),c=n("WVt+"),l=n("jtHE"),u=n("LRne"),h=n("g+oh"),d=function(t){function e(e){var n=t.call(this,e)||this;return n.imgToLoad=[],n.glMarkersSources=[],n}return Object(i.c)(e,t),e.prototype.loadMapData=function(t,e,n,r,o){var a=this;try{return this.unsetLayers(n,e,o),t.reverse().map((function(t){if(null!=t.glSource&&null!=t.glLayers){var s=JSON.parse(t.glSource);"stations"===t.sourceType&&(a.loadStationImage(o,s),a.glMarkersSources.push(s)),e.push(s);var c=Object(i.a)({},s);delete c.id,o.addSource(s.id,c),JSON.parse(t.glLayers).map((function(e){t.isFixed||(void 0===e.layout?e.layout={visibility:"none"}:e.layout.visibility="none"),n.push(e),r.push(e.id),o.addLayer(e)}))}})),console.log(".6 events and img stations loaded"),t.reverse()}catch(s){console.error(s)}},e.prototype.loadStationImage=function(t,e){var n=this;e.data.features.map((function(e){n.imgToLoad.includes(e.properties.icon)||(n.imgToLoad.push(e.properties.icon),t.loadImage(e.properties.icon,(function(n,i){if(n)throw n;t.addImage(e.properties.icon,i)})))}))},e.prototype.unsetLayers=function(t,e,n){this.glMarkersSources=[],this.imgToLoad=[],t.map((function(t){n.getLayer(t.id)&&n.removeLayer(t.id)})),e.map((function(t){n.getSource(t.id)&&n.removeSource(t.id)}))},e}(h.a),p=n("EUYk"),f=n("fXoL"),g=n("aceb"),m=n("lWTH"),v=function(t){function e(e,n,i,r){var o=t.call(this,n)||this;return o._dialogService=e,o._accessChecker=i,o._authService=r,o.glSources=[],o.glLayers=[],o.glLayersNames=[],o.glMarkers=[],o.glApiLayers=[],o._map=new l.a(1),o.glMap$=o._map.asObservable(),o.gl_map=null,o.isEdidor=!1,o._lastLayer=new l.a(1),o.lastLayer$=o._lastLayer.asObservable(),o.lastClickedLayer=null,o._layersCounts=new l.a(1),o.layersCounts$=o._layersCounts.asObservable(),o.layersCounts={types:null,error:null},o.isLogged=!1,o.tooltip=new s.Popup,o._authService.getCurrentUser().subscribe((function(t){o.isLogged=!!t})),o}return Object(i.c)(e,t),e.prototype.setMap=function(t){var e=this;this.gl_map=t,this._map.next(t),this._map.complete(),console.log("IMpORTANT: Map Setted to local men"),this.setHandlers(),this._accessChecker.isGranted("Manage Layers","all").subscribe((function(t){e.isEdidor=t}))},e.prototype.getMap=function(){return this.glMap$},e.prototype.getLastClickedLayer=function(){return this.lastLayer$},e.prototype.setLayersCounts=function(t,e){this.layersCounts.types=t,this.layersCounts.error=e,this._layersCounts.next(this.layersCounts)},e.prototype.getLayersCounts=function(){return this.layersCounts$},e.prototype.setLastClickedLayer=function(t){this.lastClickedLayer=t,this._lastLayer.next(t)},e.prototype.loadlayers=function(t){this.loadMapData(t,this.glSources,this.glLayers,this.glLayersNames,this.gl_map),this.setSourceClickEvents(this.glLayers),this.initLayerCounts(t)},e.prototype.updateLayersCounts=function(t,e){var n={};if(Object.assign(n,this.layersCounts.types),!this.isLogged){var i=n.user.count,r=n.user.limit;if(!(i>0||0===i&&e>0))return alert("Ha ocurrido un Error. por favor actalice esta p\xe1gina, si persiste contacte a soporte."),!1;if(!(i<r||e<0))return this.setLayersCounts(this.layersCounts.types,{type:"user"}),!1;n.user.count=i+e}var o=n[t.type].count;return o>0||0===o&&e>0?o<n[t.type].limit||e<0?(n[t.type].count=o+e,this.setLayersCounts(n,null),!0):(this.setLayersCounts(this.layersCounts.types,t),!1):(alert("Ha ocurrido un Error. por favor actalice esta p\xe1gina, si persiste contacte a soporte."),!1)},e.prototype.initLayerCounts=function(t){var e={points:{count:0,limit:20},lines:{count:0,limit:15},polygons:{count:0,limit:10},raster:{count:0,limit:4},user:{count:0,limit:1}};t.filter((function(t){return!0===t.state})).some((function(t){var n=e[t.type].count;n<=e[t.type].limit&&(e[t.type].count=n+1,e.user.count=e.user.count+1,e.user.limit=e.user.limit+1)})),this.setLayersCounts(e,null)},e.prototype.setHandlers=function(){this.onStyleChange(this.glLayers,this.glSources)},e.prototype.getHandlers=function(){return[this.glLayers,this.glSources,this.glLayersNames]},e.prototype.deleteMapLayer=function(t){var e=this;this.getMap().subscribe({next:function(n){e.unsetLayers(JSON.parse(t.glLayers),[JSON.parse(t.glSource)],n)}})},e.prototype.toggleLayer=function(t,e){var n=this;return this.updateLayersCounts(t,e?1:-1)?(this.getMap().subscribe({next:function(i){n.glLayers.forEach((function(r,o){r.layer_id===t.id&&(e?(n.glLayers[o].layout.visibility="visible",i.setLayoutProperty(n.glLayers[o].id,"visibility","visible")):(n.glLayers[o].layout.visibility="none",i.setLayoutProperty(n.glLayers[o].id,"visibility","none")))}))}}),t.state=e,this.setLastClickedLayer(e?t:null),e):!e},e.prototype.changeLayerPos=function(t,e,n,i){var r=this;if(e!==t)if(i<=n){var o=JSON.parse(e.glLayers),a=o[o.length-1].id;(c=JSON.parse(t.glLayers)).map((function(t){return r.gl_map.moveLayer(t.id,a)}));var s=c[0].id;o.map((function(t){return r.gl_map.moveLayer(t.id,s)}))}else{var c,l=JSON.parse(e.glLayers)[0].id;(c=JSON.parse(t.glLayers)).map((function(t){return r.gl_map.moveLayer(t.id,l)}))}},e.prototype.uncheckLayers=function(t){var e=this;t.exclusions.map((function(t){e.glLayers.filter((function(t){return!0===t.state})).some((function(n){if(n.id===t)return e.toggleLayer(n,!1),!0}))})),this.toggleLayer(t,!0)},e.prototype.flyTo=function(t){var e=JSON.parse(t.glSource);this.gl_map.querySourceFeatures(e.id,{sourceLayer:"data",filter:["==","name","Montana"]})},e.prototype.onStyleChange=function(t,e){this.getMap().subscribe({next:function(n){n&&n.on("style.load",(function(r){e.map((function(t){var e=Object(i.a)({},t);delete e.id,delete e.convention,delete e.state,n.addSource(t.id,e),t.data&&t.data.features&&t.data.features.map((function(t){t.properties.icon&&n.loadImage(t.properties.icon,(function(e,i){if(e)throw e;n.addImage(t.properties.icon,i)}))}))})),t.map((function(t){n.addLayer(t)}))}))}})},e.prototype.onClick=function(t){var e=this._lastLayer,n=this.glLayers,i=this.glLayersNames,r=this._dialogService,o=this.tooltip;this.getMap().subscribe({next:function(s){var l=s;l.on("mouseleave",t.id,(function(){l.getCanvas().style.cursor=""})),l.on("mouseenter",t.id,(function(){l.getCanvas().style.cursor="pointer"})),l.on("click",t.id,(function(t){var s=l.queryRenderedFeatures([[t.point.x-5,t.point.y-5],[t.point.x+5,t.point.y+5]],{layers:i}),u=c.bbox(s[0]);if(l.fitBounds(u,{padding:20,curve:1,easing:function(t){return t},animate:!0,maxZoom:12,essential:!0}),s.length&&"stations"!==s[0].properties.type){var h='<div layout="column" layout-align="center"> <span class="icon-info"></span> <h6>Informaci\xf3n: </h6> <br>',d=["Shape_Leng","Shape_Area","OBJECTID","featureId"],p=s[0].properties;Object.keys(p).map((function(t){return{id:t,name:p[t]}})).map((function(t){-1===d.indexOf(t.id)&&(h=h+"<p>"+t.id+": "+t.name+"</p>")})),h+="</div>",o.setLngLat(t.lngLat).setHTML(h).addTo(l)}else r.open(a.a,{context:{_id:s[0].properties.id}});n.map((function(t){t.source===s[0].source&&e.next(t.layer_id)}))}))}})},e.prototype.setSourceClickEvents=function(t){var e=this;this.getMap().subscribe({next:function(n){t.map((function(t){e.onClick(t)}))}})},e.prototype.destroyMap=function(){var t=this;this.getMap().subscribe({next:function(e){t.glLayers.map((function(t){e&&e.getLayer(t.id)&&e.removeLayer(t.id)})),t.glSources.map((function(t){e&&e.getSource(t.id)&&e.removeSource(t.id)}))}}),this.glSources=[],this.glLayers=[],this.glLayersNames=[],this.glMarkers=[],this.gl_map=null,this.setMap(null),this.setLayersCounts({points:{count:0,limit:20},lines:{count:0,limit:15},polygons:{count:0,limit:10},raster:{count:0,limit:4},user:{count:0,limit:1}},null),this.lastClickedLayer=null},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](g.I),f["\u0275\u0275inject"](g.Rb),f["\u0275\u0275inject"](m.a),f["\u0275\u0275inject"](p.a))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(d),y=n("6vL+"),b=n("PqYM"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e}(h.a),C=n("w8jS"),x=n("vkgz"),w=n("JIr8"),I=n("lJxs"),A="layers",P=function(t){return"layers/"+t},O=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i._layers=new l.a(1),i.layers$=i._layers.asObservable(),i.layers=null,i}return Object(i.c)(e,t),e.prototype.setLayers=function(t){this.layers=t,this._layers.next(t)},e.prototype.getLayers=function(){return null!==this.layers?Object(u.a)(this.layers):this.layers$},e.prototype.deserialize=function(t){return t.isPublic=1===Number(t.isPublic),t.isFixed=1===Number(t.isFixed),t.state=t.isFixed,t.exclusions=t.exclusions?JSON.parse(t.exclusions):[],Object.assign(this,t),t},e.prototype.unsetLayer=function(t){this.getLayers().subscribe({next:function(e){var n=e.map((function(t){return t.id})).indexOf(t.id);e.splice(n,1)}})},e.prototype.pushLayer=function(t){this.getLayers().subscribe({next:function(e){e.push(t)}})},e.prototype.clean=function(){this.layers=null},e.prototype.updateStyleLayer=function(t){var e=this;return this._http.put(P(t.id),t).pipe(Object(x.a)((function(t){return e.log("updated Layer ")})))},e.prototype.updateLayerExclusions=function(t){var e,n=this;return this._http.put((e=t.id,"layers/exclusions/"+e),t).pipe(Object(x.a)((function(t){return n.log("updated Layer ")})))},e.prototype.getAll=function(){var t=this;return this._http.get(A).pipe(Object(x.a)((function(e){return t.log("Fetched Layers")})),Object(w.a)(this.handleError("getAll",[])),Object(I.a)((function(e){return e.map((function(e){return t.deserialize(e)}))})))},e.prototype.addLayer=function(t){var e=this;return this._http.postFormData(A,t,{reportProgress:!0,observe:"events"}).pipe(Object(x.a)((function(t){return e.log("create Layer ")})),Object(w.a)(this.handleError("addLayer")))},e.prototype.updateState=function(t){var e,n=this;return this._http.put((e=t.id,"layers/state/"+e),t).pipe(Object(x.a)((function(t){return n.log("updated Layer state ")})))},e.prototype.deleteLayer=function(t){var e=P("number"==typeof t?t:t.id);return this._http.delete(e).pipe(Object(w.a)(this.handleError("deleteLayer")))},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](C.a),f["\u0275\u0275inject"](g.Rb))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(_),M=function(){function t(){}return t.prototype.deserialize=function(t){return Object.assign(this,t),this},t}(),S="categories",k=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i._categories=new l.a(1),i.categories$=i._categories.asObservable(),i.categories=null,i}return Object(i.c)(e,t),e.prototype.setCategories=function(t){this._categories.next(t),this.categories=t},e.prototype.getCategories=function(){return null!=this.categories?Object(u.a)(this.categories):this.categories$},e.prototype.unsetCategory=function(t){this.getCategories().subscribe({next:function(e){var n=e.map((function(t){return t.id})).indexOf(t);e.splice(n,1)}})},e.prototype.pushCategory=function(t){this.getCategories().subscribe({next:function(e){e.push(t)}})},e.prototype.getAll=function(){var t=this;return this._http.get(S).pipe(Object(x.a)((function(e){return t.log("Fetched Categories")})),Object(w.a)(this.handleError("getAll",[])),Object(I.a)((function(t){return t.map((function(t){return(new M).deserialize(t)}))})))},e.prototype.addCategory=function(t){var e=this;return this._http.post(S,t).pipe(Object(x.a)((function(n){return e.log("create category id="+t.id)})),Object(w.a)(this.handleError("addCategory")),Object(I.a)((function(t){return(new M).deserialize(t)})),Object(I.a)((function(t){return e.pushCategory(t)})))},e.prototype.deleteCategory=function(t){var e=this,n=function(t){return"categories/"+t}(t);return this._http.delete(n).pipe(Object(w.a)(this.handleError("deleteCategory")),Object(x.a)((function(n){return e.unsetCategory(t)})))},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](C.a),f["\u0275\u0275inject"](g.Rb))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(h.a),E=n("2xcX"),L=n("5yrX"),T=n("uW9d"),R=n("DN7z"),N=n("rrZM"),B=n("zu60"),j=n("HDdC"),D=n("XNiG"),F=n("nYR2"),z=["stepHolder"],V=["stepContainer"];function G(t,e){if(1&t&&f["\u0275\u0275element"](0,"joyride-arrow",17),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275styleProp"]("top",n.arrowTopPosition,"px")("left",n.arrowLeftPosition,"px"),f["\u0275\u0275property"]("position",n.arrowPosition)}}function Z(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function W(t,e){if(1&t&&(f["\u0275\u0275text"](0),f["\u0275\u0275pipe"](1,"async")),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind1"](1,1,n.text)," ")}}function H(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function U(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",20),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](n.counter)}}function $(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",18),f["\u0275\u0275template"](1,H,1,0,"ng-container",9),f["\u0275\u0275template"](2,U,2,1,"ng-template",null,19,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275reference"](3),i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",i.customCounter?i.customCounter:n)("ngTemplateOutletContext",i.counterData)}}function K(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function X(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"joyride-button",24),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"async"),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("color",n.themeColor),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](2,2,n.prevText))}}function Y(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().prev()})),f["\u0275\u0275template"](1,K,1,0,"ng-container",22),f["\u0275\u0275template"](2,X,3,4,"ng-template",null,23,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275reference"](3),r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",r.customPrevButton?r.customPrevButton:i)}}function q(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function J(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"joyride-button",27),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"async"),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("color",n.themeColor),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](2,2,n.nextText))}}function Q(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",25),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().next()})),f["\u0275\u0275template"](1,q,1,0,"ng-container",22),f["\u0275\u0275template"](2,J,3,4,"ng-template",null,26,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275reference"](3),r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",r.customNextButton?r.customNextButton:i)}}function tt(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function et(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"joyride-button",30),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"async"),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("color",n.themeColor),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](2,2,n.doneText))}}function nt(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",28),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().close()})),f["\u0275\u0275template"](1,tt,1,0,"ng-container",22),f["\u0275\u0275template"](2,et,3,4,"ng-template",null,29,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275reference"](3),r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",r.customDoneButton?r.customDoneButton:i)}}var it,rt=function(t,e,n){return{"background-color":t,color:e,"border-color":n}},ot=["*"],at=function t(){Object(B.a)(this,t),this.title=new l.a,this.text=new l.a},st={prev:Object(u.a)("prev"),next:Object(u.a)("next"),done:Object(u.a)("done"),close:Object(u.a)(null)},ct=function(){var t=function(){function t(){Object(B.a)(this,t),this.themeColor="#3b5560",this.stepDefaultPosition="bottom",this.logsEnabled=!1,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}return Object(N.a)(t,[{key:"setOptions",value:function(t){this.stepsOrder=t.steps,this.stepDefaultPosition=t.stepDefaultPosition?t.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=void 0!==t.logsEnabled?t.logsEnabled:this.logsEnabled,this.showCounter=void 0!==t.showCounter?t.showCounter:this.showCounter,this.showPrevButton=void 0!==t.showPrevButton?t.showPrevButton:this.showPrevButton,this.themeColor=t.themeColor?t.themeColor:this.themeColor,this.firstStep=t.startWith,this.waitingTime=void 0!==t.waitingTime?t.waitingTime:1,this.setCustomText(void 0!==t.customTexts?t.customTexts:st)}},{key:"getBackdropColor",value:function(){return this.hexToRgb(this.themeColor)}},{key:"getThemeColor",value:function(){return this.themeColor}},{key:"getStepDefaultPosition",value:function(){return this.stepDefaultPosition}},{key:"getStepsOrder",value:function(){return this.stepsOrder}},{key:"getFirstStep",value:function(){return this.firstStep}},{key:"getWaitingTime",value:function(){return this.waitingTime}},{key:"areLogsEnabled",value:function(){return this.logsEnabled}},{key:"isCounterVisible",value:function(){return this.showCounter}},{key:"isPrevButtonVisible",value:function(){return this.showPrevButton}},{key:"getCustomTexts",value:function(){return this.customTexts}},{key:"setCustomText",value:function(t){var e,n,i;e=t.next?t.next:st.next,n=t.done?t.done:st.done,i=t.close?t.close:st.close,this.customTexts={prev:this.toObservable(t.prev?t.prev:st.prev),next:this.toObservable(e),done:this.toObservable(n),close:this.toObservable(i)}}},{key:"toObservable",value:function(t){return t instanceof j.a?t:Object(u.a)(t)}},{key:"hexToRgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,i){return e+e+n+n+i+i}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?"".concat(parseInt(e[1],16),", ").concat(parseInt(e[2],16),", ").concat(parseInt(e[3],16)):null}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),lt="ngx-joyride:::",ut=function(){var t=function(){function t(e){Object(B.a)(this,t),this.optionService=e}return Object(N.a)(t,[{key:"debug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.debug(lt+t,e)}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.info(lt+t,e)}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.warn(lt+t,e)}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.optionService.areLogsEnabled()&&console.error(lt+t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](ct))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),ht=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(B.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(E.a)(i),n.prototype),i}return n}(Object(R.a)(Error)),dt=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(B.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(E.a)(i),n.prototype),i}return n}(Object(R.a)(Error)),pt=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(B.a)(this,n),i=e.call(this,t),Object.setPrototypeOf(Object(E.a)(i),n.prototype),i}return n}(Object(R.a)(Error)),ft="@",gt=function(t){return t.NEXT="NEXT",t.PREV="PREV",t}({}),mt=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.stepOptions=e,this.logger=n,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new D.a}return Object(N.a)(t,[{key:"getFirstStepIndex",value:function(){var t=this.stepOptions.getFirstStep(),e=this.stepOptions.getStepsOrder().indexOf(t);return e<0&&(e=0,void 0!==t&&this.logger.warn("The step ".concat(t," does not exist. Check in your step list if it's present."))),e}},{key:"init",value:function(){var t=this;this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach((function(e){return t.steps.push({id:e,step:null})}))}},{key:"addStep",value:function(t){if(this.tempSteps.filter((function(e){return e.name===t.name})).length>0){var e=this.tempSteps.findIndex((function(e){return e.name===t.name}));this.tempSteps[e]=t}else this.logger.info("Adding step ".concat(t.name," to the steps list.")),this.tempSteps.push(t)}},{key:"get",value:function(t){if(t===gt.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new pt("The first or last step of the tour cannot be found!");var e=this.getStepName(this.steps[this.currentStepIndex].id),n=this.tempSteps.findIndex((function(t){return t.name===e})),i=this.tempSteps[n];return this.steps[this.currentStepIndex].step=i,null==i&&this.logger.warn("Step ".concat(this.steps[this.currentStepIndex].id," not found in the DOM. Check if it's hidden by *ngIf directive.")),i}},{key:"getStepRoute",value:function(t){var e;return(e=t===gt.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null)&&e.includes(ft)?e.split(ft)[1]:""}},{key:"updatePosition",value:function(t,e){var n=this.getStepIndex(t);this.steps[n].step?(this.steps[n].step.position=e,this.stepHasBeenModified.next(this.steps[n].step)):this.logger.warn("Trying to modify the position of ".concat(t," to ").concat(e,". Step not found!Is this step located in a different route?"))}},{key:"getStepNumber",value:function(t){return this.getStepIndex(t)+1}},{key:"getStepsCount",value:function(){return this.stepOptions.getStepsOrder().length}},{key:"getStepIndex",value:function(t){var e=this.steps.map((function(t){return t.id.includes(ft)?t.id.split(ft)[0]:t.id})).findIndex((function(e){return t===e}));if(-1===e)throw new ht("The step with name: ".concat(t," does not exist in the step list."));return e}},{key:"getStepName",value:function(t){return t&&t.includes(ft)?t.split(ft)[0]:t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](ct),f["\u0275\u0275inject"](ut))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),vt=function(){var t=function(){function t(e){Object(B.a)(this,t),this.platformId=e,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}return Object(N.a)(t,[{key:"getNativeWindow",value:function(){return Object(r.P)(this.platformId)?window:this.fakeWindow}},{key:"getNativeDocument",value:function(){return Object(r.P)(this.platformId)?document:this.fakeDocument}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.PLATFORM_ID))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),yt=function(){var t=function(){function t(){Object(B.a)(this,t)}return Object(N.a)(t,[{key:"setPrevButton",value:function(t){this._prevButton=t}},{key:"getPrevButton",value:function(){return this._prevButton}},{key:"setNextButton",value:function(t){this._nextButton=t}},{key:"getNextButton",value:function(){return this._nextButton}},{key:"setDoneButton",value:function(t){this._doneButton=t}},{key:"getDoneButton",value:function(){return this._doneButton}},{key:"setCounter",value:function(t){this._counter=t}},{key:"getCounter",value:function(){return this._counter}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),bt="NO_POSITION",_t=function(){var t=function(){function t(e,n,i,r,o,a){Object(B.a)(this,t),this.joyrideStepsContainer=e,this.viewContainerRef=n,this.domService=i,this.router=r,this.templateService=o,this.platformId=a,this.stepPosition=bt,this.prev=new f.EventEmitter,this.next=new f.EventEmitter,this.done=new f.EventEmitter,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new at}return Object(N.a)(t,[{key:"ngAfterViewInit",value:function(){if(Object(r.P)(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new ht("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.joyrideStepsContainer.addStep(this.step)}}},{key:"ngOnChanges",value:function(t){(t.title||t.text)&&this.setAsyncFields(this.step)}},{key:"isElementFixed",value:function(t){return"fixed"===this.windowRef.getComputedStyle(t.nativeElement).position}},{key:"setAsyncFields",value:function(t){this.title instanceof j.a?this.subscriptions.push(this.title.subscribe((function(e){t.title.next(e)}))):t.title.next(this.title),this.text instanceof j.a?this.subscriptions.push(this.text.subscribe((function(e){t.text.next(e)}))):t.text.next(this.text)}},{key:"isAncestorsFixed",value:function(t){if(!t||!t.parentElement)return!1;var e="fixed"===this.windowRef.getComputedStyle(t.parentElement).position;return"BODY"===t.nodeName?e:!!e||this.isAncestorsFixed(t.parentElement)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](mt),f["\u0275\u0275directiveInject"](f.ViewContainerRef),f["\u0275\u0275directiveInject"](vt),f["\u0275\u0275directiveInject"](o.c),f["\u0275\u0275directiveInject"](yt),f["\u0275\u0275directiveInject"](f.PLATFORM_ID))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["joyrideStep"],["","joyrideStep",""]],inputs:{stepPosition:"stepPosition",name:["joyrideStep","name"],nextStep:"nextStep",title:"title",text:"text",stepContent:"stepContent",stepContentParams:"stepContentParams",prevTemplate:"prevTemplate",nextTemplate:"nextTemplate",doneTemplate:"doneTemplate",counterTemplate:"counterTemplate"},outputs:{prev:"prev",next:"next",done:"done"},features:[f["\u0275\u0275NgOnChangesFeature"]]}),t}(),Ct=function(){var t=function(){function t(e){Object(B.a)(this,t),this.DOMService=e,this.setDocumentHeight(),document.elementsFromPoint||(document.elementsFromPoint=this.elementsFromPoint.bind(this))}return Object(N.a)(t,[{key:"getElementFixedTop",value:function(t){return t.nativeElement.getBoundingClientRect().top}},{key:"getElementFixedLeft",value:function(t){return t.nativeElement.getBoundingClientRect().left}},{key:"getElementAbsoluteTop",value:function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().top+e.y}},{key:"getElementAbsoluteLeft",value:function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().left+e.x}},{key:"setDocumentHeight",value:function(){this.documentHeight=this.calculateDocumentHeight()}},{key:"getDocumentHeight",value:function(){return this.documentHeight}},{key:"isParentScrollable",value:function(t){return this.getFirstScrollableParent(t.nativeElement)!==this.DOMService.getNativeDocument().body}},{key:"isElementBeyondOthers",value:function(t,e,n){var i=e?this.getElementFixedLeft(t):this.getElementAbsoluteLeft(t),r=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t),o=i+t.nativeElement.getBoundingClientRect().width-1,a=r+t.nativeElement.getBoundingClientRect().height-1,s=this.DOMService.getNativeDocument().elementsFromPoint(i,r),c=this.DOMService.getNativeDocument().elementsFromPoint(o,a);return 0===s.length&&0===c.length?1:this.getFirstElementWithoutKeyword(s,n)!==t.nativeElement||this.getFirstElementWithoutKeyword(c,n)!==t.nativeElement?2:3}},{key:"scrollIntoView",value:function(t,e){var n=this.getFirstScrollableParent(t.nativeElement),i=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t);n!==this.DOMService.getNativeDocument().body?n.scrollTo?n.scrollTo(0,i-150):n.scrollTop=i-150:this.DOMService.getNativeWindow().scrollTo(0,i-150)}},{key:"scrollToTheTop",value:function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)}},{key:"scrollToTheBottom",value:function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)}},{key:"getFirstScrollableParent",value:function(t){var e=this,n=/(auto|scroll|overlay)/,i=function(t,n){return e.DOMService.getNativeWindow().getComputedStyle(t,null).getPropertyValue(n)};return function t(r){return r&&r!==e.DOMService.getNativeDocument().body?function(t){return n.test(i(t,"overflow")+i(t,"overflow-y")+i(t,"overflow-x"))}(r)?r:t(r.parentNode):e.DOMService.getNativeDocument().body}(t)}},{key:"calculateDocumentHeight",value:function(){var t=this.DOMService.getNativeDocument();return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)}},{key:"getScrollOffsets",value:function(){var t=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=t.pageXOffset?{x:t.pageXOffset,y:t.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}}},{key:"elementsFromPoint",value:function(t,e){var n=[],i=void 0;do{var r=this.DOMService.getNativeDocument().elementFromPoint(t,e);r&&i!==r?(n.push(i=r),i.style.pointerEvents="none"):i=!1}while(i);return n.forEach((function(t){return t.style.pointerEvents="all"})),n}},{key:"getFirstElementWithoutKeyword",value:function(t,e){for(;t[0]&&t[0].classList.toString().includes(e);)t.shift();return t[0]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](vt))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),xt=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this.documentService=e,this.optionsService=n,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}return Object(N.a)(t,[{key:"setRenderer",value:function(){this.renderer=this.rendererFactory.createRenderer(null,null)}},{key:"draw",value:function(t){this.elementRef=t.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(t),this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+t.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color","rgba(".concat(this.optionsService.getBackdropColor(),", 0.7)")),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer}},{key:"remove",value:function(){this.removeLastBackdrop()}},{key:"redrawTarget",value:function(t){this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.targetAbsoluteTop=this.getTargetTotalTop(t),this.handleVerticalScroll(t),this.handleHorizontalScroll(t)}},{key:"getTargetTotalTop",value:function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)}},{key:"getTargetTotalLeft",value:function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)}},{key:"redraw",value:function(t,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(t)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(t))}},{key:"handleHorizontalScroll",value:function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)}},{key:"handleTargetPartialWidth",value:function(t){this.renderer.setStyle(this.leftBackdrop,"width","0px");var e=this.elementRef.element.nativeElement.offsetWidth+t;this.renderer.setStyle(this.targetBackdrop,"width",e>=0?e+"px":"0px")}},{key:"handleVerticalScroll",value:function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)}},{key:"handleTargetPartialHeight",value:function(t){this.renderer.setStyle(this.backdropTop,"height","0px");var e=this.elementRef.element.nativeElement.offsetHeight+t;this.renderer.setStyle(this.backdropMiddleContainer,"height",e>=0?e+"px":"0px")}},{key:"removeLastBackdrop",value:function(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)}},{key:"drawCurrentBackdrop",value:function(){this.renderer.appendChild(document.body,this.currentBackdropContainer)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](Ct),f["\u0275\u0275inject"](ct),f["\u0275\u0275inject"](f.RendererFactory2))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),wt=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.rendererFactory=e,this.DOMService=n,this.scrollEvent=new D.a,this.resizeEvent=new D.a,this.renderer=e.createRenderer(null,null)}return Object(N.a)(t,[{key:"startListeningScrollEvents",value:function(){var t=this;this.scrollUnlisten=this.renderer.listen("document","scroll",(function(e){t.scrollEvent.next({scrollX:t.DOMService.getNativeWindow().pageXOffset,scrollY:t.DOMService.getNativeWindow().pageYOffset})}))}},{key:"startListeningResizeEvents",value:function(){var t=this;this.resizeUnlisten=this.renderer.listen("window","resize",(function(e){t.resizeEvent.next(e)}))}},{key:"stopListeningScrollEvents",value:function(){this.scrollUnlisten()}},{key:"stopListeningResizeEvents",value:function(){this.resizeUnlisten()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.RendererFactory2),f["\u0275\u0275inject"](vt))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),It=function(){var t=function(){function t(e,n,i,r,o,a,s,c){Object(B.a)(this,t),this.injector=e,this.stepsContainerService=n,this.eventListenerService=i,this.documentService=r,this.renderer=o,this.logger=a,this.optionsService=s,this.templateService=c,this.stepWidth=200,this.stepHeight=200,this.showArrow=!0,this.arrowSize=kt,this.subscriptions=[]}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.joyrideStepService=this.injector.get(Et),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe((function(e){return t.checkRedraw(e)})),this.title&&this.title.subscribe((function(e){return t.checkRedraw(e)}))}},{key:"ngAfterViewInit",value:function(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");var t=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);t=this.adjustDimensions(t.width,t.height),this.stepWidth=t.width,this.stepHeight=t.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()}},{key:"checkRedraw",value:function(t){var e=this;null!=t&&setTimeout((function(){e.redrawStep()}),2)}},{key:"isCustomized",value:function(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()}},{key:"setCustomTexts",value:function(){var t=this.optionsService.getCustomTexts();this.prevText=t.prev,this.nextText=t.next,this.doneText=t.done}},{key:"drawStep",value:function(){var t=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",t),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===t?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===t?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()}},{key:"getCounter",value:function(){var t=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:t,total:e},t+"/"+e}},{key:"setCustomTemplates",value:function(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()}},{key:"prev",value:function(){this.joyrideStepService.prev()}},{key:"next",value:function(){this.joyrideStepService.next()}},{key:"close",value:function(){this.joyrideStepService.close()}},{key:"isFirstStep",value:function(){return 1===this.stepsContainerService.getStepNumber(this.step.name)}},{key:"isLastStep",value:function(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()}},{key:"setStepStyle",value:function(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter();break;default:this.setStyleBottom()}}},{key:"setStyleTop",value:function(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-St-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-St-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()}},{key:"setStyleRight",value:function(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+St,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+St,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()}},{key:"setStyleBottom",value:function(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+St,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+St,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()}},{key:"setStyleLeft",value:function(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-St,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-St,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()}},{key:"setStyleCenter",value:function(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform","translate(-".concat(this.stepWidth/2,"px, -").concat(this.stepHeight/2,"px)")),this.showArrow=!1}},{key:"adjustLeftPosition",value:function(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)}},{key:"adjustRightPosition",value:function(){var t=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>t){var e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-t),n=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-n}}},{key:"adjustTopPosition",value:function(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)}},{key:"adjustBottomPosition",value:function(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){var t=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=t-this.topPosition;this.topPosition=t,this.arrowTopPosition=this.arrowTopPosition-e}}},{key:"autofixTopPosition",value:function(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())}},{key:"autofixRightPosition",value:function(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()}},{key:"autofixBottomPosition",value:function(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()}},{key:"autofixLeftPosition",value:function(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()}},{key:"subscribeToResizeEvents",value:function(){var t=this;return this.eventListenerService.resizeEvent.subscribe((function(){t.redrawStep()}))}},{key:"redrawStep",value:function(){this.updateStepDimensions(),this.drawStep()}},{key:"getDimensionsByAspectRatio",value:function(t,e,n){var i=(t+e)/(1+n);return{width:i*n,height:i}}},{key:"adjustDimensions",value:function(t,e){var n=t,i=e;return t>400?i=t*e/(n=400):t<200&&(n=200,i=165.01650165016503),{width:n,height:i}}},{key:"updateStepDimensions",value:function(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.Injector),f["\u0275\u0275directiveInject"](mt),f["\u0275\u0275directiveInject"](wt),f["\u0275\u0275directiveInject"](Ct),f["\u0275\u0275directiveInject"](f.Renderer2),f["\u0275\u0275directiveInject"](ut),f["\u0275\u0275directiveInject"](ct),f["\u0275\u0275directiveInject"](yt))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-step"]],viewQuery:function(t,e){var n;1&t&&(f["\u0275\u0275staticViewQuery"](z,!0),f["\u0275\u0275staticViewQuery"](V,!0)),2&t&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.stepHolder=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.stepContainer=n.first))},inputs:{step:"step"},decls:21,vars:17,consts:[[1,"joyride-step__holder",3,"id"],["stepHolder",""],["class","joyride-step__arrow",3,"position","top","left",4,"ngIf"],[1,"joyride-step__container"],["stepContainer",""],[1,"joyride-step__close",3,"click"],[1,"joyride-step__header"],[1,"joyride-step__title"],[1,"joyride-step__body"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultContent",""],[1,"joyride-step__footer"],["class","joyride-step__counter-container",4,"ngIf"],[1,"joyride-step__buttons-container"],["class","joyride-step__prev-container joyride-step__button",3,"click",4,"ngIf"],["class","joyride-step__next-container joyride-step__button",3,"click",4,"ngIf","ngIfElse"],["doneButton",""],[1,"joyride-step__arrow",3,"position"],[1,"joyride-step__counter-container"],["defaultCounter",""],[1,"joyride-step__counter"],[1,"joyride-step__prev-container","joyride-step__button",3,"click"],[4,"ngTemplateOutlet"],["defaultPrevButton",""],[1,"joyride-step__prev-button",3,"color"],[1,"joyride-step__next-container","joyride-step__button",3,"click"],["defaulNextButton",""],[3,"color"],[1,"joyride-step__done-container","joyride-step__button",3,"click"],["defaultDoneButton",""],[1,"joyride-step__done-button",3,"color"]],template:function(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",0,1),f["\u0275\u0275template"](2,G,1,5,"joyride-arrow",2),f["\u0275\u0275elementStart"](3,"div",3,4),f["\u0275\u0275elementStart"](5,"joy-close-button",5),f["\u0275\u0275listener"]("click",(function(){return e.close()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",6),f["\u0275\u0275elementStart"](7,"div",7),f["\u0275\u0275text"](8),f["\u0275\u0275pipe"](9,"async"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"div",8),f["\u0275\u0275template"](11,Z,1,0,"ng-container",9),f["\u0275\u0275template"](12,W,2,3,"ng-template",null,10,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"div",11),f["\u0275\u0275template"](15,$,4,2,"div",12),f["\u0275\u0275elementStart"](16,"div",13),f["\u0275\u0275template"](17,Y,4,1,"div",14),f["\u0275\u0275template"](18,Q,4,1,"div",15),f["\u0275\u0275template"](19,nt,4,1,"ng-template",null,16,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275reference"](13),i=f["\u0275\u0275reference"](20);f["\u0275\u0275styleProp"]("top",e.topPosition,"px")("left",e.leftPosition,"px"),f["\u0275\u0275property"]("id","joyride-step-"+e.step.name),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.showArrow),f["\u0275\u0275advance"](5),f["\u0275\u0275styleProp"]("color",e.themeColor),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](9,15,e.title)),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngTemplateOutlet",e.customContent?e.customContent:n)("ngTemplateOutletContext",e.ctx),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",e.isCounterVisible),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.isPrevButtonVisible&&!e.isFirstStep()),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.isLastStep())("ngIfElse",i)}},directives:function(){return[r.v,Ot,r.C,At,Pt]},pipes:function(){return[r.b]},styles:[".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}"],encapsulation:2}),t}(),At=function(){var t=function t(){Object(B.a)(this,t),this.position="top"};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-arrow"]],inputs:{position:"position"},decls:1,vars:8,template:function(t,e){1&t&&f["\u0275\u0275element"](0,"div"),2&t&&f["\u0275\u0275classProp"]("joyride-arrow__top","top"==e.position)("joyride-arrow__bottom","bottom"==e.position)("joyride-arrow__left","left"==e.position)("joyride-arrow__right","right"==e.position)},styles:[".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #fff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #fff}.joyride-arrow__right{border-left:11px solid #fff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #fff;border-top:11px solid transparent;border-bottom:11px solid transparent}"],encapsulation:2}),t}(),Pt=function(){var t=function(){function t(){Object(B.a)(this,t),this.clicked=new f.EventEmitter}return Object(N.a)(t,[{key:"onClick",value:function(){this.clicked.emit()}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["joyride-button"]],inputs:{color:"color"},outputs:{clicked:"clicked"},ngContentSelectors:ot,decls:2,vars:5,consts:[[1,"joyride-button",3,"ngStyle","mouseleave","mouseover","click"]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275elementStart"](0,"button",0),f["\u0275\u0275listener"]("mouseleave",(function(){return e.hover=!1}))("mouseover",(function(){return e.hover=!0}))("click",(function(){return e.onClick()})),f["\u0275\u0275projection"](1),f["\u0275\u0275elementEnd"]()),2&t&&f["\u0275\u0275property"]("ngStyle",f["\u0275\u0275pureFunction3"](1,rt,e.hover?"#fff":e.color,e.hover?e.color:"#fff",e.hover?e.color:"transparent"))},directives:[r.y],styles:[".joyride-button[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid transparent;outline:0;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button[_ngcontent-%COMP%]:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}"]}),t}(),Ot=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["joy-close-button"]],decls:3,vars:0,consts:[["viewBox","0 0 25 25","xmlns","http://www.w3.org/2000/svg"],["x1","1","y1","24","x2","24","y2","1","stroke","black","stroke-width","3"],["x1","1","y1","1","x2","24","y2","24","stroke","black","stroke-width","3"]],template:function(t,e){1&t&&(f["\u0275\u0275namespaceSVG"](),f["\u0275\u0275elementStart"](0,"svg",0),f["\u0275\u0275element"](1,"line",1),f["\u0275\u0275element"](2,"line",2),f["\u0275\u0275elementEnd"]())},encapsulation:2}),t}(),Mt=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this.componentFactoryResolver=e,this.appRef=n,this.injector=i,this.refMap={}}return Object(N.a)(t,[{key:"draw",value:function(t){var e=this.componentFactoryResolver.resolveComponentFactory(It).create(this.injector);this.appRef.attachView(e.hostView),document.body.appendChild(e.hostView.rootNodes[0]);var n=e.instance;n.step=t,e.changeDetectorRef.detectChanges(),t.stepInstance=n,this.refMap[t.name]=e}},{key:"remove",value:function(t){this.appRef.detachView(this.refMap[t.name].hostView),this.refMap[t.name].destroy()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.ComponentFactoryResolver),f["\u0275\u0275inject"](f.ApplicationRef),f["\u0275\u0275inject"](f.Injector))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),St=15,kt=10,Et=function(){var t=function(){function t(e,n,i,r,o,a,s,c,u){Object(B.a)(this,t),this.backDropService=e,this.eventListener=n,this.stepsContainerService=i,this.documentService=r,this.DOMService=o,this.stepDrawerService=a,this.optionsService=s,this.router=c,this.logger=u,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new l.a,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}return Object(N.a)(t,[{key:"initViewportPositions",value:function(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20}},{key:"subscribeToScrollEvents",value:function(){var t=this;this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe((function(e){t.winTopPosition=e.scrollY,t.winBottomPosition=t.winTopPosition+t.DOMService.getNativeWindow().innerHeight-20,t.currentStep&&t.backDropService.redraw(t.currentStep,e)}))}},{key:"subscribeToResizeEvents",value:function(){var t=this;this.eventListener.resizeEvent.subscribe((function(){t.currentStep&&t.backDropService.redrawTarget(t.currentStep)}))}},{key:"drawStep",value:function(t){t.position=t.position===bt?this.optionsService.getStepDefaultPosition():t.position,this.stepDrawerService.draw(t)}},{key:"startTour",value:function(){return this.stepsObserver=new l.a,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(gt.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()}},{key:"close",value:function(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()}},{key:"prev",value:function(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(gt.PREV)}},{key:"next",value:function(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(gt.NEXT)}},{key:"navigateToStepPage",value:function(t){var e=this.stepsContainerService.getStepRoute(t);e&&this.router.navigate([e])}},{key:"subscribeToStepsUpdates",value:function(){var t=this;this.stepsContainerService.stepHasBeenModified.subscribe((function(e){t.currentStep&&t.currentStep.name===e.name&&(t.currentStep=e)}))}},{key:"tryShowStep",value:function(t){var e=this;this.navigateToStepPage(t);var n=this.optionsService.getWaitingTime();n>100&&this.backDropService.remove(),setTimeout((function(){try{e.showStep(t)}catch(n){if(n instanceof dt)e.tryShowStep(t);else{if(!(n instanceof pt))throw new Error(n);e.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),e.close()}}}),n)}},{key:"showStep",value:function(t){if(this.currentStep=this.stepsContainerService.get(t),null==this.currentStep)throw new dt("");this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible(),this.notifyStepClicked(t)}},{key:"notifyStepClicked",value:function(t){var e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:t};this.stepsObserver.next(e)}},{key:"notifyTourIsFinished",value:function(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()}},{key:"removeCurrentStep",value:function(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)}},{key:"scrollIfStepAndTargetAreNotVisible",value:function(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()}},{key:"scrollWhenTargetOrStepAreHiddenBottom",value:function(){var t=this.getMaxTargetAndStepBottomPosition();t>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winBottomPosition)}},{key:"scrollWhenTargetOrStepAreHiddenTop",value:function(){var t=this.getMaxTargetAndStepTopPosition();t<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winTopPosition)}},{key:"getMaxTargetAndStepBottomPosition",value:function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+kt+St:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(t+this.currentStep.stepInstance.targetHeight,t+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0}},{key:"getMaxTargetAndStepTopPosition",value:function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t-(this.currentStep.stepInstance.stepHeight+kt+St):"bottom"===this.currentStep.position?t:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(t,t+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0}},{key:"scrollIfElementBeyondOtherElements",value:function(){2===this.isElementBeyondOthers()&&this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element),2===this.isElementBeyondOthers()&&this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView()}},{key:"isElementBeyondOthers",value:function(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](xt),f["\u0275\u0275inject"](wt),f["\u0275\u0275inject"](mt),f["\u0275\u0275inject"](Ct),f["\u0275\u0275inject"](vt),f["\u0275\u0275inject"](Mt),f["\u0275\u0275inject"](ct),f["\u0275\u0275inject"](o.c),f["\u0275\u0275inject"](ut))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),Lt=function t(){Object(B.a)(this,t)},Tt=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this.platformId=e,this.stepService=n,this.optionsService=i,this.tourInProgress=!1}return Object(N.a)(t,[{key:"startTour",value:function(t){var e=this;return Object(r.P)(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,t&&this.optionsService.setOptions(t),this.tour$=this.stepService.startTour().pipe(Object(F.a)((function(){return e.tourInProgress=!1}))),this.tour$.subscribe()),this.tour$):Object(u.a)(new Lt)}},{key:"closeTour",value:function(){this.isTourInProgress()&&this.stepService.close()}},{key:"isTourInProgress",value:function(){return this.tourInProgress}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.PLATFORM_ID),f["\u0275\u0275inject"](Et),f["\u0275\u0275inject"](ct))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(),Rt=o.g.forChild([]),Nt=function(){var t=it=function(){function t(){Object(B.a)(this,t)}return Object(N.a)(t,null,[{key:"forRoot",value:function(){return{ngModule:it,providers:[Tt,Et,mt,xt,wt,Ct,ct,Mt,vt,ut,yt]}}},{key:"forChild",value:function(){return{ngModule:it,providers:[]}}}]),t}();return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.c,Rt]]}),t}(),Bt=n("3+dO"),jt=n("DeKK"),Dt=n.n(jt),Ft=n("NHP+"),zt=n("quSY"),Vt=n("xgIS"),Gt=n("VRyK"),Zt=n("SxV6"),Wt=n("eIep"),Ht=n("CqXF"),Ut=n("pLZG"),$t=n("JX91"),Kt=n("Kj3r"),Xt=n("1G5W"),Yt=n("IzEk"),qt=n("iFvi"),Jt=["content"],Qt=["*"],te=["container"];function ee(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}var ne=function(t){return{$implicit:t}};function ie(t,e){if(1&t&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mgl-marker",3),f["\u0275\u0275template"](2,ee,1,0,"ng-container",4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit,i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("feature",n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",i.clusterPointTpl)("ngTemplateOutletContext",f["\u0275\u0275pureFunction1"](3,ne,n))}}function re(t,e){1&t&&f["\u0275\u0275elementContainer"](0)}function oe(t,e){if(1&t&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mgl-marker",3),f["\u0275\u0275template"](2,re,1,0,"ng-container",4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit,i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("feature",n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngTemplateOutlet",i.pointTpl)("ngTemplateOutletContext",f["\u0275\u0275pureFunction1"](3,ne,n))}}function ae(t,e){if(1&t&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,ie,3,5,"ng-container",2),f["\u0275\u0275template"](2,oe,3,5,"ng-container",2),f["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.properties.cluster),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.properties.cluster)}}var se=function(){return{"circle-radius":0}},ce=new f.InjectionToken("MapboxApiKey"),le=function t(){Object(B.a)(this,t)},ue=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this.zone=e,this.MAPBOX_API_KEY=n,this.MglResizeEventEmitter=i,this.mapCreated=new Ft.a,this.mapLoaded=new Ft.a,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new zt.a,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}return Object(N.a)(t,[{key:"setup",value:function(t){var e=this;this.zone.onStable.pipe(Object(Zt.a)()).subscribe((function(){e.assign(s,"accessToken",t.accessToken||e.MAPBOX_API_KEY),t.customMapboxApiUrl&&e.assign(s,"config.API_URL",t.customMapboxApiUrl),e.createMap(t.mapOptions),e.hookEvents(t.mapEvents),e.mapEvents=t.mapEvents,e.mapCreated.next(void 0),e.mapCreated.complete()}))}},{key:"destroyMap",value:function(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}},{key:"updateMinZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMinZoom(t)}))}},{key:"updateMaxZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMaxZoom(t)}))}},{key:"updateScrollZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.scrollZoom.enable():e.mapInstance.scrollZoom.disable()}))}},{key:"updateDragRotate",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.dragRotate.enable():e.mapInstance.dragRotate.disable()}))}},{key:"updateTouchZoomRotate",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.touchZoomRotate.enable():e.mapInstance.touchZoomRotate.disable()}))}},{key:"updateDoubleClickZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.doubleClickZoom.enable():e.mapInstance.doubleClickZoom.disable()}))}},{key:"updateKeyboard",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.keyboard.enable():e.mapInstance.keyboard.disable()}))}},{key:"updateDragPan",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.dragPan.enable():e.mapInstance.dragPan.disable()}))}},{key:"updateBoxZoom",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){t?e.mapInstance.boxZoom.enable():e.mapInstance.boxZoom.disable()}))}},{key:"updateStyle",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setStyle(t)}))}},{key:"updateMaxBounds",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.setMaxBounds(t)}))}},{key:"changeCanvasCursor",value:function(t){this.mapInstance.getCanvasContainer().style.cursor=t}},{key:"queryRenderedFeatures",value:function(t,e){return this.mapInstance.queryRenderedFeatures(t,e)}},{key:"panTo",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.panTo(t,e)}))}},{key:"move",value:function(t,e,n,i,r,o){var a=this;return this.zone.runOutsideAngular((function(){a.mapInstance[t](Object.assign(Object.assign({},e),{zoom:n||a.mapInstance.getZoom(),center:i||a.mapInstance.getCenter(),bearing:r||a.mapInstance.getBearing(),pitch:o||a.mapInstance.getPitch()}))}))}},{key:"addLayer",value:function(t,e,n){var i=this;this.zone.runOutsideAngular((function(){Object.keys(t.layerOptions).forEach((function(e){void 0===t.layerOptions[e]&&delete t.layerOptions[e]})),i.mapInstance.addLayer(t.layerOptions,n),e&&(t.layerEvents.click.observers.length&&i.mapInstance.on("click",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.click.emit(e)}))})),t.layerEvents.mouseEnter.observers.length&&i.mapInstance.on("mouseenter",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseEnter.emit(e)}))})),t.layerEvents.mouseLeave.observers.length&&i.mapInstance.on("mouseleave",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseLeave.emit(e)}))})),t.layerEvents.mouseMove.observers.length&&i.mapInstance.on("mousemove",t.layerOptions.id,(function(e){i.zone.run((function(){t.layerEvents.mouseMove.emit(e)}))})))}))}},{key:"removeLayer",value:function(t){var e=this;this.zone.runOutsideAngular((function(){null!=e.mapInstance.getLayer(t)&&e.mapInstance.removeLayer(t)}))}},{key:"addMarker",value:function(t){var e=this,n={offset:t.markersOptions.offset,anchor:t.markersOptions.anchor,draggable:!!t.markersOptions.draggable,rotationAlignment:t.markersOptions.rotationAlignment,pitchAlignment:t.markersOptions.pitchAlignment};t.markersOptions.element.childNodes.length>0&&(n.element=t.markersOptions.element);var i=new s.Marker(n);return t.markersEvents.dragStart.observers.length&&i.on("dragstart",(function(n){return e.zone.run((function(){return t.markersEvents.dragStart.emit(n.target)}))})),t.markersEvents.drag.observers.length&&i.on("drag",(function(n){return e.zone.run((function(){return t.markersEvents.drag.emit(n.target)}))})),t.markersEvents.dragEnd.observers.length&&i.on("dragend",(function(n){return e.zone.run((function(){return t.markersEvents.dragEnd.emit(n.target)}))})),i.setLngLat(t.markersOptions.feature?t.markersOptions.feature.geometry.coordinates:t.markersOptions.lngLat),this.zone.runOutsideAngular((function(){return i.addTo(e.mapInstance),i}))}},{key:"removeMarker",value:function(t){this.markersToRemove.push(t)}},{key:"createPopup",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(t.popupOptions).forEach((function(e){return void 0===t.popupOptions[e]&&delete t.popupOptions[e]}));var i=new s.Popup(t.popupOptions);return i.setDOMContent(e),t.popupEvents.close.observers.length&&i.on("close",(function(){n.zone.run((function(){t.popupEvents.close.emit()}))})),t.popupEvents.open.observers.length&&i.on("open",(function(){n.zone.run((function(){t.popupEvents.open.emit()}))})),i}))}},{key:"addPopupToMap",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.zone.runOutsideAngular((function(){i&&t._listeners&&delete t._listeners.open,t.setLngLat(e),t.addTo(n.mapInstance)}))}},{key:"addPopupToMarker",value:function(t,e){return this.zone.runOutsideAngular((function(){t.setPopup(e)}))}},{key:"removePopupFromMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&t._listeners&&delete t._listeners.close,this.popupsToRemove.push(t)}},{key:"removePopupFromMarker",value:function(t){return this.zone.runOutsideAngular((function(){t.setPopup(void 0)}))}},{key:"addControl",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.addControl(t,e)}))}},{key:"removeControl",value:function(t){var e=this;return this.zone.runOutsideAngular((function(){e.mapInstance.removeControl(t)}))}},{key:"loadAndAddImage",value:function(t,e,n){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function i(){var r=this;return Dt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.zone.runOutsideAngular((function(){return new Promise((function(i,o){r.mapInstance.loadImage(e,(function(e,a){e?o(e):(r.addImage(t,a,n),i())}))}))})));case 1:case"end":return i.stop()}}),i,this)})))}},{key:"addImage",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.addImage(t,e,n)}))}},{key:"removeImage",value:function(t){this.imageIdsToRemove.push(t)}},{key:"addSource",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]})),n.mapInstance.addSource(t,e)}))}},{key:"getSource",value:function(t){return this.mapInstance.getSource(t)}},{key:"removeSource",value:function(t){var e=this;this.zone.runOutsideAngular((function(){e.findLayersBySourceId(t).forEach((function(t){return e.mapInstance.removeLayer(t.id)})),e.mapInstance.removeSource(t)}))}},{key:"setAllLayerPaintProperty",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(i){n.mapInstance.setPaintProperty(t,i,e[i])}))}))}},{key:"setAllLayerLayoutProperty",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){Object.keys(e).forEach((function(i){n.mapInstance.setLayoutProperty(t,i,e[i])}))}))}},{key:"setLayerFilter",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.setFilter(t,e)}))}},{key:"setLayerBefore",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.moveLayer(t,e)}))}},{key:"setLayerZoomRange",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.setLayerZoomRange(t,e||0,n||20)}))}},{key:"fitBounds",value:function(t,e){var n=this;return this.zone.runOutsideAngular((function(){n.mapInstance.fitBounds(t,e)}))}},{key:"fitScreenCoordinates",value:function(t,e,n){var i=this;return this.zone.runOutsideAngular((function(){i.mapInstance.fitScreenCoordinates(t[0],t[1],e,n)}))}},{key:"applyChanges",value:function(){var t=this;this.zone.runOutsideAngular((function(){t.removeMarkers(),t.removePopups(),t.removeImages()}))}},{key:"createMap",value:function(t){var e=this;f.NgZone.assertNotInAngularZone(),Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),this.mapInstance=new s.Map(t),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(t.style);var n=this.zone.onMicrotaskEmpty.subscribe((function(){return e.applyChanges()}));if(this.MglResizeEventEmitter){var i=this.MglResizeEventEmitter.resizeEvent.subscribe((function(){e.mapInstance.resize()}));this.subscription.add(i)}this.subscription.add(n)}},{key:"removeMarkers",value:function(){var t,e=Object(Bt.a)(this.markersToRemove);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(n){e.e(n)}finally{e.f()}this.markersToRemove=[]}},{key:"removePopups",value:function(){var t,e=Object(Bt.a)(this.popupsToRemove);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(n){e.e(n)}finally{e.f()}this.popupsToRemove=[]}},{key:"removeImages",value:function(){var t,e=Object(Bt.a)(this.imageIdsToRemove);try{for(e.s();!(t=e.n()).done;)this.mapInstance.removeImage(t.value)}catch(n){e.e(n)}finally{e.f()}this.imageIdsToRemove=[]}},{key:"findLayersBySourceId",value:function(t){var e=this.mapInstance.getStyle().layers;return null==e?[]:e.filter((function(e){return e.source===t}))}},{key:"hookEvents",value:function(t){var e=this;this.mapInstance.on("load",(function(){e.mapLoaded.next(void 0),e.mapLoaded.complete(),e.zone.run((function(){return t.load.emit(e.mapInstance)}))})),t.resize.observers.length&&this.mapInstance.on("resize",(function(){return e.zone.run((function(){return t.resize.emit()}))})),t.remove.observers.length&&this.mapInstance.on("remove",(function(){return e.zone.run((function(){return t.remove.emit()}))})),t.mouseDown.observers.length&&this.mapInstance.on("mousedown",(function(n){return e.zone.run((function(){return t.mouseDown.emit(n)}))})),t.mouseUp.observers.length&&this.mapInstance.on("mouseup",(function(n){return e.zone.run((function(){return t.mouseUp.emit(n)}))})),t.mouseMove.observers.length&&this.mapInstance.on("mousemove",(function(n){return e.zone.run((function(){return t.mouseMove.emit(n)}))})),t.click.observers.length&&this.mapInstance.on("click",(function(n){return e.zone.run((function(){return t.click.emit(n)}))})),t.dblClick.observers.length&&this.mapInstance.on("dblclick",(function(n){return e.zone.run((function(){return t.dblClick.emit(n)}))})),t.mouseEnter.observers.length&&this.mapInstance.on("mouseenter",(function(n){return e.zone.run((function(){return t.mouseEnter.emit(n)}))})),t.mouseLeave.observers.length&&this.mapInstance.on("mouseleave",(function(n){return e.zone.run((function(){return t.mouseLeave.emit(n)}))})),t.mouseOver.observers.length&&this.mapInstance.on("mouseover",(function(n){return e.zone.run((function(){return t.mouseOver.emit(n)}))})),t.mouseOut.observers.length&&this.mapInstance.on("mouseout",(function(n){return e.zone.run((function(){return t.mouseOut.emit(n)}))})),t.contextMenu.observers.length&&this.mapInstance.on("contextmenu",(function(n){return e.zone.run((function(){return t.contextMenu.emit(n)}))})),t.touchStart.observers.length&&this.mapInstance.on("touchstart",(function(n){return e.zone.run((function(){return t.touchStart.emit(n)}))})),t.touchEnd.observers.length&&this.mapInstance.on("touchend",(function(n){return e.zone.run((function(){return t.touchEnd.emit(n)}))})),t.touchMove.observers.length&&this.mapInstance.on("touchmove",(function(n){return e.zone.run((function(){return t.touchMove.emit(n)}))})),t.touchCancel.observers.length&&this.mapInstance.on("touchcancel",(function(n){return e.zone.run((function(){return t.touchCancel.emit(n)}))})),t.wheel.observers.length&&this.mapInstance.on("wheel",(function(n){return e.zone.run((function(){return t.wheel.emit(n)}))})),t.moveStart.observers.length&&this.mapInstance.on("movestart",(function(n){return e.zone.run((function(){return t.moveStart.emit(n)}))})),t.move.observers.length&&this.mapInstance.on("move",(function(n){return e.zone.run((function(){return t.move.emit(n)}))})),t.moveEnd.observers.length&&this.mapInstance.on("moveend",(function(n){return e.zone.run((function(){return t.moveEnd.emit(n)}))})),t.dragStart.observers.length&&this.mapInstance.on("dragstart",(function(n){return e.zone.run((function(){return t.dragStart.emit(n)}))})),t.drag.observers.length&&this.mapInstance.on("drag",(function(n){return e.zone.run((function(){return t.drag.emit(n)}))})),t.dragEnd.observers.length&&this.mapInstance.on("dragend",(function(n){return e.zone.run((function(){return t.dragEnd.emit(n)}))})),t.zoomStart.observers.length&&this.mapInstance.on("zoomstart",(function(n){return e.zone.run((function(){return t.zoomStart.emit(n)}))})),t.zoomEvt.observers.length&&this.mapInstance.on("zoom",(function(n){return e.zone.run((function(){return t.zoomEvt.emit(n)}))})),t.zoomEnd.observers.length&&this.mapInstance.on("zoomend",(function(n){return e.zone.run((function(){return t.zoomEnd.emit(n)}))})),t.rotateStart.observers.length&&this.mapInstance.on("rotatestart",(function(n){return e.zone.run((function(){return t.rotateStart.emit(n)}))})),t.rotate.observers.length&&this.mapInstance.on("rotate",(function(n){return e.zone.run((function(){return t.rotate.emit(n)}))})),t.rotateEnd.observers.length&&this.mapInstance.on("rotateend",(function(n){return e.zone.run((function(){return t.rotateEnd.emit(n)}))})),t.pitchStart.observers.length&&this.mapInstance.on("pitchstart",(function(n){return e.zone.run((function(){return t.pitchStart.emit(n)}))})),t.pitchEvt.observers.length&&this.mapInstance.on("pitch",(function(n){return e.zone.run((function(){return t.pitchEvt.emit(n)}))})),t.pitchEnd.observers.length&&this.mapInstance.on("pitchend",(function(n){return e.zone.run((function(){return t.pitchEnd.emit(n)}))})),t.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",(function(n){return e.zone.run((function(){return t.boxZoomStart.emit(n)}))})),t.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",(function(n){return e.zone.run((function(){return t.boxZoomEnd.emit(n)}))})),t.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",(function(n){return e.zone.run((function(){return t.boxZoomCancel.emit(n)}))})),t.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",(function(){return e.zone.run((function(){return t.webGlContextLost.emit()}))})),t.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",(function(){return e.zone.run((function(){return t.webGlContextRestored.emit()}))})),t.render.observers.length&&this.mapInstance.on("render",(function(){return e.zone.run((function(){return t.render.emit()}))})),t.error.observers.length&&this.mapInstance.on("error",(function(n){return e.zone.run((function(){return t.error.emit(n)}))})),t.data.observers.length&&this.mapInstance.on("data",(function(n){return e.zone.run((function(){return t.data.emit(n)}))})),t.styleData.observers.length&&this.mapInstance.on("styledata",(function(n){return e.zone.run((function(){return t.styleData.emit(n)}))})),t.sourceData.observers.length&&this.mapInstance.on("sourcedata",(function(n){return e.zone.run((function(){return t.sourceData.emit(n)}))})),t.dataLoading.observers.length&&this.mapInstance.on("dataloading",(function(n){return e.zone.run((function(){return t.dataLoading.emit(n)}))})),t.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",(function(n){return e.zone.run((function(){return t.styleDataLoading.emit(n)}))})),t.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",(function(n){return e.zone.run((function(){return t.sourceDataLoading.emit(n)}))})),t.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",(function(n){return e.zone.run((function(){return t.styleImageMissing.emit(n)}))})),t.idle.observers.length&&this.mapInstance.on("idle",(function(){return e.zone.run((function(){return t.idle.emit()}))}))}},{key:"assign",value:function(t,e,n){if("string"==typeof e&&(e=e.split(".")),e.length>1){var i=e.shift();this.assign(t[i]="[object Object]"===Object.prototype.toString.call(t[i])?t[i]:{},e,n)}else t[e[0]]=n}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.NgZone),f["\u0275\u0275inject"](ce,8),f["\u0275\u0275inject"](le,8))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),he=function(){function t(e){Object(B.a)(this,t),this.container=e}return Object(N.a)(t,[{key:"onAdd",value:function(){return this.container}},{key:"onRemove",value:function(){return this.container.parentNode.removeChild(this.container)}},{key:"getDefaultPosition",value:function(){return"top-right"}}]),t}(),de=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.controlAdded=!1}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.content.nativeElement.childNodes.length&&(this.control=new he(this.content.nativeElement),this.MapService.mapCreated$.subscribe((function(){t.MapService.addControl(t.control,t.position),t.controlAdded=!0})))}},{key:"ngOnDestroy",value:function(){this.controlAdded&&this.MapService.removeControl(this.control)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-control"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](Jt,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.content=n.first)},inputs:{position:"position"},ngContentSelectors:Qt,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275elementStart"](0,"div",0,1),f["\u0275\u0275projection"](2),f["\u0275\u0275elementEnd"]())},encapsulation:2,changeDetection:0}),t}(),pe=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.compact&&(e.compact=t.compact),void 0!==t.customAttribution&&(e.customAttribution=t.customAttribution),t.ControlComponent.control=new s.AttributionControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](de,1))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),t}(),fe=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");t.ControlComponent.control=new s.FullscreenControl({container:t.container}),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](de,1))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglFullscreen",""]],inputs:{container:"container"}}),t}(),ge=new f.InjectionToken("MapboxApiKey"),me=function(){var t=function(){function t(e,n,i,r){Object(B.a)(this,t),this.MapService=e,this.zone=n,this.ControlComponent=i,this.MAPBOX_GEOCODER_API_KEY=r,this.clear=new f.EventEmitter,this.loading=new f.EventEmitter,this.results=new f.EventEmitter,this.result=new f.EventEmitter,this.error=new f.EventEmitter}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={proximity:t.proximity,countries:t.countries,placeholder:t.placeholder,zoom:t.zoom,bbox:t.bbox,types:t.types,flyTo:t.flyTo,minLength:t.minLength,limit:t.limit,language:t.language,filter:t.filter,localGeocoder:t.localGeocoder,accessToken:t.accessToken||t.MAPBOX_GEOCODER_API_KEY};Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),t.geocoder=new qt(e),t.hookEvents(t),t.addControl()})),this.searchInput&&this.MapService.mapLoaded$.subscribe((function(){t.geocoder.query(t.searchInput)}))}},{key:"ngOnChanges",value:function(t){this.geocoder&&(t.proximity&&!t.proximity.isFirstChange()&&this.geocoder.setProximity(t.proximity.currentValue),t.searchInput&&this.geocoder.query(this.searchInput))}},{key:"addControl",value:function(){this.ControlComponent.control=this.geocoder,this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)}},{key:"hookEvents",value:function(t){var e=this;t.results.observers.length&&this.geocoder.on("results",(function(n){return e.zone.run((function(){return t.results.emit(n)}))})),t.result.observers.length&&this.geocoder.on("result",(function(n){e.lastResultId!==n.result.id&&(e.lastResultId=n.result.id,e.zone.run((function(){return t.result.emit(n)})))})),t.error.observers.length&&this.geocoder.on("error",(function(n){return e.zone.run((function(){return t.error.emit(n)}))})),t.loading.observers.length&&this.geocoder.on("loading",(function(n){return e.zone.run((function(){return t.loading.emit(n)}))})),t.clear.observers.length&&this.geocoder.on("clear",(function(){return e.zone.run((function(){return t.clear.emit()}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](de,1),f["\u0275\u0275directiveInject"](ge,8))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglGeocoder",""]],inputs:{countries:"countries",placeholder:"placeholder",zoom:"zoom",bbox:"bbox",types:"types",flyTo:"flyTo",minLength:"minLength",limit:"limit",language:"language",accessToken:"accessToken",filter:"filter",localGeocoder:"localGeocoder",proximity:"proximity",searchInput:"searchInput"},outputs:{clear:"clear",loading:"loading",results:"results",result:"result",error:"error"},features:[f["\u0275\u0275NgOnChangesFeature"]]}),t}(),ve=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.ControlComponent=n,this.geolocate=new f.EventEmitter}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={positionOptions:t.positionOptions,fitBoundsOptions:t.fitBoundsOptions,trackUserLocation:t.trackUserLocation,showUserLocation:t.showUserLocation};Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),t.ControlComponent.control=new s.GeolocateControl(e),t.ControlComponent.control.on("geolocate",(function(e){return t.geolocate.emit(e)})),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](de,1))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),t}(),ye=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.showCompass&&(e.showCompass=t.showCompass),void 0!==t.showZoom&&(e.showZoom=t.showZoom),t.ControlComponent.control=new s.NavigationControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](de,1))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),t}(),be=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.ControlComponent=n}return Object(N.a)(t,[{key:"ngOnChanges",value:function(t){t.unit&&!t.unit.isFirstChange()&&this.ControlComponent.control.setUnit(t.unit.currentValue)}},{key:"ngAfterContentInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){if(t.ControlComponent.control)throw new Error("Another control is already set for this control");var e={};void 0!==t.maxWidth&&(e.maxWidth=t.maxWidth),void 0!==t.unit&&(e.unit=t.unit),t.ControlComponent.control=new s.ScaleControl(e),t.MapService.addControl(t.ControlComponent.control,t.ControlComponent.position)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](de,1))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[f["\u0275\u0275NgOnChangesFeature"]]}),t}(),_e=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.click=new f.EventEmitter,this.mouseEnter=new f.EventEmitter,this.mouseLeave=new f.EventEmitter,this.mouseMove=new f.EventEmitter,this.layerAdded=!1}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.sub=this.MapService.mapLoaded$.pipe(Object(Wt.a)((function(){return Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ht.a)(!1),Object(Ut.a)((function(){return!t.MapService.mapInstance.getLayer(t.id)})),Object($t.a)(!0))}))).subscribe((function(e){return t.init(e)}))}},{key:"ngOnChanges",value:function(t){this.layerAdded&&(t.paint&&!t.paint.isFirstChange()&&this.MapService.setAllLayerPaintProperty(this.id,t.paint.currentValue),t.layout&&!t.layout.isFirstChange()&&this.MapService.setAllLayerLayoutProperty(this.id,t.layout.currentValue),t.filter&&!t.filter.isFirstChange()&&this.MapService.setLayerFilter(this.id,t.filter.currentValue),t.before&&!t.before.isFirstChange()&&this.MapService.setLayerBefore(this.id,t.before.currentValue),(t.minzoom&&!t.minzoom.isFirstChange()||t.maxzoom&&!t.maxzoom.isFirstChange())&&this.MapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}},{key:"ngOnDestroy",value:function(){this.layerAdded&&this.MapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}},{key:"init",value:function(t){this.MapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{click:this.click,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove}},t,this.before),this.layerAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{click:"click",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t}(),Ce=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.dragStart=new f.EventEmitter,this.drag=new f.EventEmitter,this.dragEnd=new f.EventEmitter}return Object(N.a)(t,[{key:"ngOnInit",value:function(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}},{key:"ngOnChanges",value:function(t){t.lngLat&&!t.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),t.feature&&!t.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),t.draggable&&!t.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),t.popupShown&&!t.popupShown.isFirstChange()&&(t.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.MapService.mapInstance):this.markerInstance.getPopup().remove()),t.pitchAlignment&&!t.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(t.pitchAlignment.currentValue),t.rotationAlignment&&!t.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(t.rotationAlignment.currentValue)}},{key:"ngAfterViewInit",value:function(){var t=this;this.MapService.mapCreated$.subscribe((function(){t.markerInstance=t.MapService.addMarker({markersOptions:{offset:t.offset,anchor:t.anchor,pitchAlignment:t.pitchAlignment,rotationAlignment:t.rotationAlignment,draggable:!!t.draggable,element:t.content.nativeElement,feature:t.feature,lngLat:t.lngLat},markersEvents:{dragStart:t.dragStart,drag:t.drag,dragEnd:t.dragEnd}})}))}},{key:"ngOnDestroy",value:function(){this.MapService.removeMarker(this.markerInstance),this.markerInstance=void 0}},{key:"togglePopup",value:function(){this.markerInstance.togglePopup()}},{key:"updateCoordinates",value:function(t){this.markerInstance.setLngLat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-marker"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](Jt,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.content=n.first)},inputs:{offset:"offset",anchor:"anchor",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd"},features:[f["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:Qt,decls:3,vars:2,consts:[["content",""]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275elementStart"](0,"div",null,0),f["\u0275\u0275projection"](2),f["\u0275\u0275elementEnd"]()),2&t&&f["\u0275\u0275classMap"](e.className)},encapsulation:2,changeDetection:0}),t}(),xe=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.zone=n,this.updateFeatureData=new D.a,this.sub=new zt.a,this.sourceAdded=!1,this.featureIdCounter=0}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.data||(this.data={type:"FeatureCollection",features:[]});var e=this.MapService.mapLoaded$.subscribe((function(){t.init();var e=Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ut.a)((function(){return!t.MapService.mapInstance.getSource(t.id)}))).subscribe((function(){t.init()}));t.sub.add(e)}));this.sub.add(e)}},{key:"ngOnChanges",value:function(t){this.sourceAdded&&((t.maxzoom&&!t.maxzoom.isFirstChange()||t.minzoom&&!t.minzoom.isFirstChange()||t.buffer&&!t.buffer.isFirstChange()||t.tolerance&&!t.tolerance.isFirstChange()||t.generateId&&!t.generateId.isFirstChange()||t.cluster&&!t.cluster.isFirstChange()||t.clusterRadius&&!t.clusterRadius.isFirstChange()||t.clusterMaxZoom&&!t.clusterMaxZoom.isFirstChange()||t.clusterProperties&&!t.clusterProperties.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),t.data&&!t.data.isFirstChange()&&this.MapService.getSource(this.id).setData(this.data))}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sourceAdded&&this.MapService.removeSource(this.id)}},{key:"getClusterExpansionZoom",value:function(t){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function e(){var n,r=this;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.MapService.getSource(this.id),e.abrupt("return",this.zone.run((function(){return Object(i.b)(r,void 0,void 0,Dt.a.mark((function e(){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){n.getClusterExpansionZoom(t,(function(t,n){t?i(t):e(n)}))})));case 1:case"end":return e.stop()}}),e)})))})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getClusterChildren",value:function(t){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function e(){var n,r=this;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.MapService.getSource(this.id),e.abrupt("return",this.zone.run((function(){return Object(i.b)(r,void 0,void 0,Dt.a.mark((function e(){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){n.getClusterChildren(t,(function(t,n){t?i(t):e(n)}))})));case 1:case"end":return e.stop()}}),e)})))})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getClusterLeaves",value:function(t,e,n){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function r(){var o,a=this;return Dt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=this.MapService.getSource(this.id),r.abrupt("return",this.zone.run((function(){return Object(i.b)(a,void 0,void 0,Dt.a.mark((function i(){return Dt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise((function(i,r){o.getClusterLeaves(t,e,n,(function(t,e){t?r(t):i(e)}))})));case 1:case"end":return i.stop()}}),i)})))})));case 2:case"end":return r.stop()}}),r,this)})))}},{key:"_addFeature",value:function(t){this.data.features.push(t),this.updateFeatureData.next()}},{key:"_removeFeature",value:function(t){var e=this.data,n=e.features.indexOf(t);n>-1&&e.features.splice(n,1),this.updateFeatureData.next()}},{key:"_getNewFeatureId",value:function(){return++this.featureIdCounter}},{key:"init",value:function(){var t=this;this.MapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,minzoom:this.minzoom,buffer:this.buffer,tolerance:this.tolerance,generateId:this.generateId,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterProperties:this.clusterProperties});var e=this.updateFeatureData.pipe(Object(Kt.a)(0)).subscribe((function(){t.MapService.getSource(t.id).setData(t.data)}));this.sub.add(e),this.sourceAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](f.NgZone))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-geojson-source"]],inputs:{data:"data",id:"id",minzoom:"minzoom",maxzoom:"maxzoom",buffer:"buffer",tolerance:"tolerance",generateId:"generateId",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterProperties:"clusterProperties"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),we=function(){var t=function(){function t(e){Object(B.a)(this,t),this.GeoJSONSourceComponent=e,this.type="Feature"}return Object(N.a)(t,[{key:"ngOnInit",value:function(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}},{key:"ngOnDestroy",value:function(){this.GeoJSONSourceComponent._removeFeature(this.feature)}},{key:"updateCoordinates",value:function(t){this.feature.geometry.coordinates=t,this.GeoJSONSourceComponent.updateFeatureData.next()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](Object(f.forwardRef)((function(){return xe}))))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),Ie=function(){var t=function(){function t(e,n,i,r){Object(B.a)(this,t),this.MapService=e,this.NgZone=n,this.FeatureComponent=i,this.MarkerComponent=r,this.dragStart=new f.EventEmitter,this.dragEnd=new f.EventEmitter,this.drag=new f.EventEmitter,this.destroyed$=new l.a(1)}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t,e,n;if(this.MarkerComponent){console.warn("[ngx-mapbox-gl] mglDraggable on Marker is deprecated, use draggable input instead");var i=this.MarkerComponent.content.nativeElement;1===i.children.length&&(i=i.children[0]),t=Object(Vt.a)(i,"mouseenter"),e=Object(Vt.a)(i,"mouseleave"),n=this.MarkerComponent.updateCoordinates.bind(this.MarkerComponent)}else{if(!this.FeatureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(t=this.layer.mouseEnter,e=this.layer.mouseLeave,n=this.FeatureComponent.updateCoordinates.bind(this.FeatureComponent),"Point"!==this.FeatureComponent.geometry.type)throw new Error("mglDraggable only support point feature")}this.handleDraggable(t,e,n)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(void 0),this.destroyed$.complete()}},{key:"handleDraggable",value:function(t,e,n){var i=this,r=!1,o=!1;this.MapService.mapCreated$.subscribe((function(){var a=Object(Vt.a)(i.MapService.mapInstance,"mouseup"),s=t.pipe(Object(Xt.a)(i.destroyed$),Object(Ut.a)((function(){return!r})),Object(Ut.a)((function(t){return i.filterFeature(t)})),Object(x.a)((function(){o=!0,i.MapService.changeCanvasCursor("move"),i.MapService.updateDragPan(!1)})),Object(Wt.a)((function(){return Object(Vt.a)(i.MapService.mapInstance,"mousedown").pipe(Object(Xt.a)(e))}))),c=s.pipe(Object(Wt.a)((function(){return Object(Vt.a)(i.MapService.mapInstance,"mousemove").pipe(Object(Xt.a)(a))}))),l=s.pipe(Object(Wt.a)((function(){return a.pipe(Object(Yt.a)(1))})));s.subscribe((function(t){r=!0,i.dragStart.observers.length&&i.NgZone.run((function(){return i.dragStart.emit(t)}))})),c.subscribe((function(t){n([t.lngLat.lng,t.lngLat.lat]),i.drag.observers.length&&i.NgZone.run((function(){return i.drag.emit(t)}))})),l.subscribe((function(t){r=!1,i.dragEnd.observers.length&&i.NgZone.run((function(){return i.dragEnd.emit(t)})),o||(i.MapService.changeCanvasCursor(""),i.MapService.updateDragPan(!0))})),e.pipe(Object(Xt.a)(i.destroyed$),Object(x.a)((function(){return o=!1})),Object(Ut.a)((function(){return!r}))).subscribe((function(){i.MapService.changeCanvasCursor(""),i.MapService.updateDragPan(!0)}))}))}},{key:"filterFeature",value:function(t){return!(this.FeatureComponent&&this.layer&&!this.MapService.queryRenderedFeatures(t.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.FeatureComponent.id]]})[0])}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](we,9),f["\u0275\u0275directiveInject"](Ce,9))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"}}),t}(),Ae=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this.MapService=e,this.zone=n,this.error=new f.EventEmitter,this.loaded=new f.EventEmitter,this.isAdded=!1,this.isAdding=!1}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.sub=this.MapService.mapLoaded$.pipe(Object(Wt.a)((function(){return Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object($t.a)(void 0),Object(Ut.a)((function(){return!t.isAdding&&!t.MapService.mapInstance.hasImage(t.id)})))}))).subscribe((function(){return t.init()}))}},{key:"ngOnChanges",value:function(t){(t.data&&!t.data.isFirstChange()||t.options&&!t.options.isFirstChange()||t.url&&!t.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.isAdded&&this.MapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}},{key:"init",value:function(){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function t(){var e=this;return Dt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isAdding=!0,!this.data){t.next=7;break}this.MapService.addImage(this.id,this.data,this.options),this.isAdded=!0,this.isAdding=!1,t.next=19;break;case 7:if(!this.url){t.next=19;break}return t.prev=8,t.next=11,this.MapService.loadAndAddImage(this.id,this.url,this.options);case 11:this.isAdded=!0,this.isAdding=!1,this.zone.run((function(){e.loaded.emit()})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),this.zone.run((function(){e.error.emit(t.t0)}));case 19:case"end":return t.stop()}}),t,this,[[8,16]])})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](f.NgZone))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{error:"error",loaded:"loaded"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t}(),Pe=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.movingMethod="flyTo",this.resize=new f.EventEmitter,this.remove=new f.EventEmitter,this.mouseDown=new f.EventEmitter,this.mouseUp=new f.EventEmitter,this.mouseMove=new f.EventEmitter,this.click=new f.EventEmitter,this.dblClick=new f.EventEmitter,this.mouseEnter=new f.EventEmitter,this.mouseLeave=new f.EventEmitter,this.mouseOver=new f.EventEmitter,this.mouseOut=new f.EventEmitter,this.contextMenu=new f.EventEmitter,this.touchStart=new f.EventEmitter,this.touchEnd=new f.EventEmitter,this.touchMove=new f.EventEmitter,this.touchCancel=new f.EventEmitter,this.wheel=new f.EventEmitter,this.moveStart=new f.EventEmitter,this.move=new f.EventEmitter,this.moveEnd=new f.EventEmitter,this.dragStart=new f.EventEmitter,this.drag=new f.EventEmitter,this.dragEnd=new f.EventEmitter,this.zoomStart=new f.EventEmitter,this.zoomEvt=new f.EventEmitter,this.zoomEnd=new f.EventEmitter,this.rotateStart=new f.EventEmitter,this.rotate=new f.EventEmitter,this.rotateEnd=new f.EventEmitter,this.pitchStart=new f.EventEmitter,this.pitchEvt=new f.EventEmitter,this.pitchEnd=new f.EventEmitter,this.boxZoomStart=new f.EventEmitter,this.boxZoomEnd=new f.EventEmitter,this.boxZoomCancel=new f.EventEmitter,this.webGlContextLost=new f.EventEmitter,this.webGlContextRestored=new f.EventEmitter,this.load=new f.EventEmitter,this.idle=new f.EventEmitter,this.render=new f.EventEmitter,this.error=new f.EventEmitter,this.data=new f.EventEmitter,this.styleData=new f.EventEmitter,this.sourceData=new f.EventEmitter,this.dataLoading=new f.EventEmitter,this.styleDataLoading=new f.EventEmitter,this.sourceDataLoading=new f.EventEmitter,this.styleImageMissing=new f.EventEmitter}return Object(N.a)(t,[{key:"ngAfterViewInit",value:function(){this.MapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{container:this.mapContainer.nativeElement,minZoom:this.minZoom,maxZoom:this.maxZoom,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,classes:this.classes,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.MapService.changeCanvasCursor(this.cursorStyle)}},{key:"ngOnDestroy",value:function(){this.MapService.destroyMap()}},{key:"ngOnChanges",value:function(t){return Object(i.b)(this,void 0,void 0,Dt.a.mark((function e(){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.MapService.mapCreated$.toPromise();case 2:t.cursorStyle&&!t.cursorStyle.isFirstChange()&&this.MapService.changeCanvasCursor(t.cursorStyle.currentValue),t.minZoom&&!t.minZoom.isFirstChange()&&this.MapService.updateMinZoom(t.minZoom.currentValue),t.maxZoom&&!t.maxZoom.isFirstChange()&&this.MapService.updateMaxZoom(t.maxZoom.currentValue),t.scrollZoom&&!t.scrollZoom.isFirstChange()&&this.MapService.updateScrollZoom(t.scrollZoom.currentValue),t.dragRotate&&!t.dragRotate.isFirstChange()&&this.MapService.updateDragRotate(t.dragRotate.currentValue),t.touchZoomRotate&&!t.touchZoomRotate.isFirstChange()&&this.MapService.updateTouchZoomRotate(t.touchZoomRotate.currentValue),t.doubleClickZoom&&!t.doubleClickZoom.isFirstChange()&&this.MapService.updateDoubleClickZoom(t.doubleClickZoom.currentValue),t.keyboard&&!t.keyboard.isFirstChange()&&this.MapService.updateKeyboard(t.keyboard.currentValue),t.dragPan&&!t.dragPan.isFirstChange()&&this.MapService.updateDragPan(t.dragPan.currentValue),t.boxZoom&&!t.boxZoom.isFirstChange()&&this.MapService.updateBoxZoom(t.boxZoom.currentValue),t.style&&!t.style.isFirstChange()&&this.MapService.updateStyle(t.style.currentValue),t.maxBounds&&!t.maxBounds.isFirstChange()&&this.MapService.updateMaxBounds(t.maxBounds.currentValue),t.fitBounds&&t.fitBounds.currentValue&&!t.fitBounds.isFirstChange()&&this.MapService.fitBounds(t.fitBounds.currentValue,this.fitBoundsOptions),t.fitScreenCoordinates&&t.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&t.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.MapService.fitScreenCoordinates(t.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!t.center||t.center.isFirstChange()||t.zoom||t.bearing||t.pitch?(t.center&&!t.center.isFirstChange()||t.zoom&&!t.zoom.isFirstChange()||t.bearing&&!t.bearing.isFirstChange()&&!t.fitScreenCoordinates||t.pitch&&!t.pitch.isFirstChange())&&this.MapService.move(this.movingMethod,this.movingOptions,t.zoom&&this.zoom?this.zoom[0]:void 0,t.center?this.center:void 0,t.bearing&&this.bearing?this.bearing[0]:void 0,t.pitch&&this.pitch?this.pitch[0]:void 0):this.MapService.panTo(this.center,this.panToOptions);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"mapInstance",get:function(){return this.MapService.mapInstance}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-map"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](te,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.mapContainer=n.first)},inputs:{movingMethod:"movingMethod",accessToken:"accessToken",customMapboxApiUrl:"customMapboxApiUrl",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",classes:"classes",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",renderWorldCopies:"renderWorldCopies",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",load:"load",idle:"idle",render:"render",error:"error",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[f["\u0275\u0275ProvidersFeature"]([ue]),f["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&f["\u0275\u0275element"](0,"div",null,0)},styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      div[_ngcontent-%COMP%] {\n        height: 100%;\n        width: 100%;\n      }"],changeDetection:0}),t}(),Oe=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["ng-template","mglPoint",""]]}),t}(),Me=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["ng-template","mglClusterPoint",""]]}),t}(),Se=0,ke=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this.MapService=e,this.ChangeDetectorRef=n,this.zone=i,this.layerId="mgl-markers-for-clusters-".concat(Se++),this.sub=new zt.a}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this,e=this.MapService.mapCreated$.pipe(Object(Wt.a)((function(){return Object(Vt.a)(t.MapService.mapInstance,"data").pipe(Object(Ut.a)((function(e){return e.sourceId===t.source&&"metadata"!==e.sourceDataType&&t.MapService.mapInstance.isSourceLoaded(t.source)})))})),Object(Wt.a)((function(){return Object(Gt.a)(Object(Vt.a)(t.MapService.mapInstance,"move"),Object(Vt.a)(t.MapService.mapInstance,"moveend")).pipe(Object($t.a)(void 0))}))).subscribe((function(){t.zone.run((function(){t.updateCluster()}))}));this.sub.add(e)}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"trackByClusterPoint",value:function(t,e){return e.id}},{key:"updateCluster",value:function(){var t={layers:[this.layerId]};this.pointTpl||(t.filter=["==","cluster",!0]),this.clusterPoints=this.MapService.mapInstance.queryRenderedFeatures(t),this.ChangeDetectorRef.markForCheck()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue),f["\u0275\u0275directiveInject"](f.ChangeDetectorRef),f["\u0275\u0275directiveInject"](f.NgZone))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(t,e,n){var i;1&t&&(f["\u0275\u0275contentQuery"](n,Oe,!0,f.TemplateRef),f["\u0275\u0275contentQuery"](n,Me,!0,f.TemplateRef)),2&t&&(f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e.pointTpl=i.first),f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e.clusterPointTpl=i.first))},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(f["\u0275\u0275element"](0,"mgl-layer",0),f["\u0275\u0275template"](1,ae,3,2,"ng-container",1)),2&t&&(f["\u0275\u0275property"]("id",e.layerId)("source",e.source)("paint",f["\u0275\u0275pureFunction0"](5,se)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.clusterPoints)("ngForTrackBy",e.trackByClusterPoint))},directives:[_e,r.u,r.v,Ce,r.C],encapsulation:2,changeDetection:0}),t}(),Ee=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.close=new f.EventEmitter,this.open=new f.EventEmitter}return Object(N.a)(t,[{key:"ngOnInit",value:function(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}},{key:"ngOnChanges",value:function(t){if(t.lngLat&&!t.lngLat.isFirstChange()||t.feature&&!t.feature.isFirstChange()){var e=t.lngLat?this.lngLat:this.feature.geometry.coordinates;this.MapService.removePopupFromMap(this.popupInstance,!0);var n=this.createPopup();this.MapService.addPopupToMap(n,e,this.popupInstance.isOpen()),this.popupInstance=n}if(t.marker&&!t.marker.isFirstChange()){var i=t.marker.previousValue;i.markerInstance&&this.MapService.removePopupFromMarker(i.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.MapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}}},{key:"ngAfterViewInit",value:function(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}},{key:"ngOnDestroy",value:function(){this.popupInstance&&(this.lngLat||this.feature?this.MapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.MapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}},{key:"createPopup",value:function(){return this.MapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{open:this.open,close:this.close}},this.content.nativeElement)}},{key:"addPopup",value:function(t){var e=this;this.MapService.mapCreated$.subscribe((function(){if(e.lngLat||e.feature)e.MapService.addPopupToMap(t,e.lngLat?e.lngLat:e.feature.geometry.coordinates);else{if(!e.marker||!e.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");e.MapService.addPopupToMarker(e.marker.markerInstance,t)}}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-popup"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](Jt,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.content=n.first)},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",anchor:"anchor",offset:"offset",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker"},outputs:{close:"close",open:"open"},features:[f["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:Qt,decls:3,vars:0,consts:[["content",""]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275elementStart"](0,"div",null,0),f["\u0275\u0275projection"](2),f["\u0275\u0275elementEnd"]())},encapsulation:2,changeDetection:0}),t}(),Le=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.sourceAdded=!1,this.sub=new zt.a}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this,e=this.MapService.mapLoaded$.subscribe((function(){t.init();var e=Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ut.a)((function(){return!t.MapService.mapInstance.getSource(t.id)}))).subscribe((function(){t.init()}));t.sub.add(e)}));this.sub.add(e)}},{key:"ngOnChanges",value:function(t){this.sourceAdded&&(t.coordinates&&!t.coordinates.isFirstChange()||t.canvas&&!t.canvas.isFirstChange()||t.animate&&!t.animate.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sourceAdded&&this.MapService.removeSource(this.id)}},{key:"init",value:function(){this.MapService.addSource(this.id,{type:"canvas",coordinates:this.coordinates,canvas:this.canvas,animate:this.animate}),this.sourceAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-canvas-source"]],inputs:{id:"id",coordinates:"coordinates",canvas:"canvas",animate:"animate"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),Te=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this;this.sub=this.MapService.mapLoaded$.subscribe((function(){return t.init()}))}},{key:"ngOnChanges",value:function(t){void 0!==this.sourceId&&this.MapService.getSource(this.sourceId).updateImage({url:void 0===t.url?void 0:this.url,coordinates:void 0===t.coordinates?void 0:this.coordinates})}},{key:"ngOnDestroy",value:function(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&this.MapService.removeSource(this.sourceId)}},{key:"init",value:function(){this.MapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),Re=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.type="raster",this.sourceAdded=!1,this.sub=new zt.a}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this,e=this.MapService.mapLoaded$.subscribe((function(){t.init();var e=Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ut.a)((function(){return!t.MapService.mapInstance.getSource(t.id)}))).subscribe((function(){t.init()}));t.sub.add(e)}));this.sub.add(e)}},{key:"ngOnChanges",value:function(t){this.sourceAdded&&(t.url&&!t.url.isFirstChange()||t.tiles&&!t.tiles.isFirstChange()||t.bounds&&!t.bounds.isFirstChange()||t.minzoom&&!t.minzoom.isFirstChange()||t.maxzoom&&!t.maxzoom.isFirstChange()||t.tileSize&&!t.tileSize.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sourceAdded&&this.MapService.removeSource(this.id)}},{key:"init",value:function(){this.MapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize}),this.sourceAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-raster-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),Ne=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.type="vector",this.sourceAdded=!1,this.sub=new zt.a}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this,e=this.MapService.mapLoaded$.subscribe((function(){t.init();var e=Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ut.a)((function(){return!t.MapService.mapInstance.getSource(t.id)}))).subscribe((function(){t.init()}));t.sub.add(e)}));this.sub.add(e)}},{key:"ngOnChanges",value:function(t){this.sourceAdded&&(t.url&&!t.url.isFirstChange()||t.tiles&&!t.tiles.isFirstChange()||t.minzoom&&!t.minzoom.isFirstChange()||t.maxzoom&&!t.maxzoom.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sourceAdded&&this.MapService.removeSource(this.id)}},{key:"init",value:function(){this.MapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,minzoom:this.minzoom,maxzoom:this.maxzoom}),this.sourceAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",minzoom:"minzoom",maxzoom:"maxzoom"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),Be=function(){var t=function(){function t(e){Object(B.a)(this,t),this.MapService=e,this.sourceAdded=!1,this.sub=new zt.a}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this,e=this.MapService.mapLoaded$.subscribe((function(){t.init();var e=Object(Vt.a)(t.MapService.mapInstance,"styledata").pipe(Object(Ut.a)((function(){return!t.MapService.mapInstance.getSource(t.id)}))).subscribe((function(){t.init()}));t.sub.add(e)}));this.sub.add(e)}},{key:"ngOnChanges",value:function(t){this.sourceAdded&&(t.urls&&!t.urls.isFirstChange()||t.coordinates&&!t.coordinates.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sourceAdded&&this.MapService.removeSource(this.id)}},{key:"init",value:function(){this.MapService.addSource(this.id,{type:"video",urls:this.urls,coordinates:this.coordinates}),this.sourceAdded=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](ue))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mgl-video-source"]],inputs:{id:"id",urls:"urls",coordinates:"coordinates"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}(),je=function(){var t=function(){function t(){Object(B.a)(this,t)}return Object(N.a)(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:ce,useValue:e.accessToken},{provide:ge,useValue:e.geocoderAccessToken||e.accessToken}]}}}]),t}();return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.c]]}),t}();function De(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",47),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().rotateMap()})),f["\u0275\u0275elementEnd"]()}}function Fe(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",48),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().rotateMap()})),f["\u0275\u0275elementEnd"]()}}function ze(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",49),f["\u0275\u0275elementStart"](1,"nb-radio-group",50),f["\u0275\u0275elementStart"](2,"nb-radio",51),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("colombia-19")})),f["\u0275\u0275text"](3,"street2s"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"nb-radio",52),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("basic-v8")})),f["\u0275\u0275text"](5,"streets"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"nb-radio",53),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("light-v10")})),f["\u0275\u0275text"](7,"light"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"nb-radio",54),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("dark-v10")})),f["\u0275\u0275text"](9,"dark"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"nb-radio",55),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("satellite-v9")})),f["\u0275\u0275text"](11,"satellite"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"nb-radio",56),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().changeStyle("outdoors-v11")})),f["\u0275\u0275text"](13,"outdoors"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function Ve(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"p",64),f["\u0275\u0275elementStart"](1,"b"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("Esta ventana cerrar\xe1 en ",n.timeLeft," seg.")}}function Ge(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-card",57),f["\u0275\u0275elementStart"](1,"nb-card-header",58),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3,"."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"nb-card-body"),f["\u0275\u0275elementStart"](5,"div",59),f["\u0275\u0275elementStart"](6,"span"),f["\u0275\u0275element"](7,"img",60),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"nb-icon",61),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().openPopover(!1)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](9,' Bienvenido al observatorio del R\xedo Magdalena. Si desea iniciar una vista guiada, por favor de clic en "iniciar" '),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"nb-card-footer",59),f["\u0275\u0275template"](11,Ve,3,1,"p",62),f["\u0275\u0275elementStart"](12,"a",63),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().startJoyRade()})),f["\u0275\u0275text"](13,"Iniciar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](11),f["\u0275\u0275property"]("ngIf",i.timeLeft>0)}}function Ze(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",65),f["\u0275\u0275elementStart"](1,"p",66),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div",67),f["\u0275\u0275elementStart"](4,"div",68),f["\u0275\u0275element"](5,"div",69),f["\u0275\u0275elementStart"](6,"div",70),f["\u0275\u0275elementStart"](7,"div"),f["\u0275\u0275elementStart"](8,"video",71),f["\u0275\u0275elementStart"](9,"p"),f["\u0275\u0275text"](10,"Your browser doesn't support HTML5 video. Here is a"),f["\u0275\u0275elementStart"](11,"a",72),f["\u0275\u0275text"](12,"link to the video"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](13," instead."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=e.text,i=e.video;f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](n),f["\u0275\u0275advance"](6),f["\u0275\u0275propertyInterpolate1"]("src","assets/video/",i,"",f["\u0275\u0275sanitizeUrl"]),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("href","assets/video/",i,"",f["\u0275\u0275sanitizeUrl"])}}var We=function(t,e){return[t,e]},He=function(t){return[t,13.11676]},Ue=function(){return[9]},$e=function(t){return[t,8]},Ke=function(){return[0]},Xe=function(){return{text:"Finalmente En esta secci\xf3n puedes seguirnos en redes sociales."}},Ye=function(t){return{"placeholder-joyride":t}},qe=function(){return{text:"Adicionalmente, arriba puedes encontrar informaci\xf3n legal, patrocinadores, Colaboradores, Desarrolladores entre otros.",video:"info.mp4"}},Je=function(){return{text:"En esta Secci\xf3n puede activar, desactivar u organizar capas una vez se ha registrado",video:"izquierda.mp4"}},Qe=function(){return{text:"Aqu\xed puedes encontrar marcadores y capas activas, da clic sobre ellos para acceder a m\xe1s informaci\xf3n",video:"centro2.mp4"}},tn=function(){return{text:"En esta secci\xf3n puedes encontrar las convenciones de las capas y controles del mapa.",video:"conv.mp4"}},en=function(){function t(t,e,n,i,r,o,a,s,c){var l=this;this._auth=t,this.router=e,this._glMapService=n,this._toastrService=i,this._dialogService=r,this._layoutService=o,this.joyrideService=a,this._layerService=s,this._categoryService=c,this.can=!1,this.showStyles=!1,this.isLogged=!1,this.isRotated=!0,this.styleUrl="https://obsriomagdalena.uninorte.edu.co/tileserver/styles/colombia-style/style.json",this.lastPitch=0,this.lastBearing=0,this.onJoy=!1,this.timeLeft=9,this.isPopOpen=!1,this.mapLoading=!0,this.index=0,this.optionsMap={path:"assets/lottie/map-placeholder.json"},o.changeLayouType("no-header"),t.getCurrentUser().subscribe({next:function(t){l.user=t,l.isLogged=!0,l.can=!0}})}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.subscribe$&&this.subscribe$.unsubscribe(),this._layoutService.changeLayouType("normal"),this._glMapService.destroyMap(),this._layerService.setLayers(null),this.openPopover(!1),this.pauseTimer()},t.prototype.changeStyle=function(t){this.styleUrl="colombia-19"===t?"https://obsriomagdalena.uninorte.edu.co/tileserver/styles/colombia-style/style.json":"mapbox://styles/mapbox/"+t},t.prototype.onLoad=function(t){var e=this;this.openPopover(!1),this.pauseTimer(),this.isPopOpen=!1;var n=Object(b.a)(8e3),i=Object(b.a)(9e3);this.subscribe$=n.subscribe((function(t){e.startTimer(),e.openPopover(!0),e.subscribe2$=i.subscribe((function(t){e.openPopover(!1),e.pauseTimer()}))})),this.gl_map=t,console.log("1. Visor: Setting map from visor"),this._glMapService.setMap(this.gl_map),console.log("1.2. Visor: Loading first time layers from visor"),this._layerService.getAll().subscribe({next:function(t){console.log("1.3. Visor: Loaded layers from db SET"),e._layerService.setLayers(t),console.log("1.4. Visor: load layers to map"),e._glMapService.loadlayers(t)},error:function(t){console.error(t)}}),this._categoryService.getAll().subscribe({next:function(t){t&&(e._categoryService.setCategories(t),console.log("1.4. Visor: load categories"))},error:function(t){e._categoryService.showToast("top rigth","danger",t)}}),this.gl_map.resize(),setTimeout((function(){e.gl_map.flyTo({center:[-74.9,10],zoom:10,bearing:-12,pitch:60,essential:!0,speed:.6,curve:1,easing:function(t){return t}})}),3e3)},t.prototype.startTimer=function(){var t=this;this.interval=setInterval((function(){t.timeLeft>0&&t.timeLeft--}),1e3)},t.prototype.pauseTimer=function(){clearInterval(this.interval)},t.prototype.rotateMap=function(){var t=0,e=0;return 0===this.gl_map.getPitch()&&0===this.gl_map.getBearing()?(t=this.lastPitch,e=this.lastBearing,this.isRotated=!0):(this.lastPitch=this.gl_map.getPitch(),this.lastBearing=this.gl_map.getBearing(),t=0,e=0,this.isRotated=!1),this.gl_map.flyTo({bearing:e,pitch:t,essential:!0,speed:.2,curve:1,easing:function(t){return t}}),this.isRotated},t.prototype.openWindow=function(t){this._dialogService.open(a.a,{context:{_marker:t}})},t.prototype.startJoyRade=function(){var t=this;this.onJoy=!0,this.openPopover(!1),this.joyrideService.startTour({steps:["firstStep","secondStep","thirdStep","fourthStep","fifthStep","sixthStep"]}).subscribe((function(t){}),(function(e){t.onJoy=!1}),(function(){t.onJoy=!1}))},t.prototype.openPopover=function(t){this.isLogged||(t?this.popover.show():this.popover.hide())},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.prototype.animationCreated=function(t,e){this.animationItem=t,this.animationItem.setSpeed(e)},t.prototype.stop=function(){var t=this;this.ngZone.runOutsideAngular((function(){return t.animationItem.stop()}))},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](p.a),f["\u0275\u0275directiveInject"](o.c),f["\u0275\u0275directiveInject"](v),f["\u0275\u0275directiveInject"](g.Rb),f["\u0275\u0275directiveInject"](g.I),f["\u0275\u0275directiveInject"](y.a),f["\u0275\u0275directiveInject"](Tt),f["\u0275\u0275directiveInject"](O),f["\u0275\u0275directiveInject"](k))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-mapbox"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275viewQuery"](g.lb,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.popover=n.first)},decls:56,vars:45,consts:[[1,"mbxmap"],[1,"layout-fill",3,"preserveDrawingBuffer","attributionControl","maxBounds","zoom","center","pitch","bearing","load"],["mglGeocoder","","position","top-right",3,"searchInput"],["mglFullscreen","","position","top-right","showUserLocation","true"],["mglNavigation","","position","top-right"],["mglScale","","position","bottom-left","unit","metric"],["mglAttribution","","position","bottom-right","customAttribution","OBSRIOMAGDALENA - Plataforma de Monitoreo del R\xedo Magdalena"],["mglGeolocate","","position","top-right","showUserLocation","true"],["position","top-right",1,"mapboxgl-ctrl-group"],[1,"mapboxgl-ctrl-group"],["type","button","title","Layers","aria-label","Layers",3,"click"],["icon","map-outline",1,"mapboxgl-ctrl-icon"],["type","button","title","Layers","aria-label","Layers"],["class"," mapboxgl-ctrl-icon","icon","2d","pack","obs-icons",3,"click",4,"ngIf"],["class","   mapboxgl-ctrl-icon","icon","3d","pack","obs-icons",3,"click",4,"ngIf"],["id","menu",4,"ngIf"],["id","redes",1,"d-flex","justify-content-md-end","align-items-end","flex-column"],["id","logos-sm"],["href","#"],["src","assets/img/favicon.png","alt","OBS",1,"logo-obs-sm",2,"border-radius","3px"],["href","https://www.uninorte.edu.co/","target","_blank"],["src","assets/img/LogoUninorte.png","alt","uninorte",1,"logo-uninorte-sm"],["stepPosition","top","title","Redes sociales","joyrideStep","sixthStep",1,"socialnetwork",3,"stepContent","stepContentParams"],[3,"click"],["class","fade-in"],["templateRef",""],["nbPopoverPlacement","left","nbPopoverTrigger","noop",3,"nbPopover"],["src","assets/img/tutorial.png"],["href","https://www.instagram.com/obsriomagdalena/","target","_blank"],["src","assets/img/instagram.png"],["flex",""],["href","https://www.youtube.com/channel/UCYIPAkNxbPptJPtAmG_WO7Q?view_as=subscriber","target","_blank"],["src","assets/img/youtube.png"],["href","https://twitter.com/obsriomagdalena","target","_blank"],["src","assets/img/twitter.png"],["href","https://www.uninorte.edu.co/web/observatorio-del-rio-magdalena","target","_blank"],["src","assets/img/web.png"],["href","mailto:obsriomagdalena@uninorte.edu.co"],["src","assets/img/contact.png"],["href","https://www.uninorte.edu.co/web/ideha","target","_blank",1,"info-sm"],["title","Plataforma OBS R\xedo Magdalena","text","La plataforma esta organizada en 3 secciones principales","joyrideStep","firstStep","stepPosition","center",1,"d-flex","flex-column",3,"ngClass"],["id","top","stepPosition","right","title","Informaci\xf3n","joyrideStep","fifthStep",1,"col-sm-6",3,"stepContent","stepContentParams"],["id","center",1,"row"],["stepPosition","right","title","1. Secci\xf3n Izquierda","joyrideStep","secondStep",1,"col-sm-3",3,"stepContent","stepContentParams"],["stepPosition","center","title","2. Secci\xf3n Central","joyrideStep","thirdStep",1,"col-sm-6",3,"stepContent","stepContentParams"],["stepPosition","left","title","3. Secci\xf3n Derecha","joyrideStep","fourthStep",1,"col-sm-3",3,"stepContent","stepContentParams"],["customContent",""],["icon","2d","pack","obs-icons",1,"mapboxgl-ctrl-icon",3,"click"],["icon","3d","pack","obs-icons",1,"mapboxgl-ctrl-icon",3,"click"],["id","menu"],[1,"d-flex","flex-wrap"],["id","colombia-v19","value","https://obsriomagdalena.uninorte.edu.co/tileserver/styles/colombia-style/style.json",1,"d-flex",3,"click"],["id","streets-v11","value","mapbox://styles/mapbox/basic-v8",1,"d-flex",3,"click"],["id","light-v10","value","mapbox://styles/mapbox/light-v10",1,"d-flex",3,"click"],["id","dark-v10","value","mapbox://styles/mapbox/dark-v10",1,"d-flex",3,"click"],["id","outdoors-v11","value","mapbox://styles/mapbox/satellite-v9",1,"d-flex",3,"click"],["id","satellite-v9","value","mapbox://styles/mapbox/outdoors-v11",1,"d-flex",3,"click"],[1,"shadow","mb-0","welcome-popover","fade-in",2,"max-width","300px","max-height","300px"],["status","info",1,"d-flex","justify-content-between","header-bg-step1"],[1,"d-flex","justify-content-between"],["width","20","src","assets/img/favicon.png"],["icon","close",3,"click"],["style","font-size: 10px;",4,"ngIf"],["nbButton","","status","info",3,"click"],[2,"font-size","10px"],[1,"d-flex","flex-column"],[2,"max-width","350px"],[1,"mt-3","d-flex","justify-content-center","wmax600"],[1,"",2,"overflow","hidden","height","100%","width","calc(100% - 36px)"],[1,"loading","absolute","z0"],[1,"relative","d-flex","justify-content-center"],["autoplay","","loop","","muted","","width","100%","type","video/mp4","title","Show an animated image (GIF) anywhere on the map.",1,"block","mx-auto",3,"src"],[3,"href"]],template:function(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"mgl-map",1),f["\u0275\u0275listener"]("load",(function(t){return e.onLoad(t)})),f["\u0275\u0275element"](2,"mgl-control",2),f["\u0275\u0275element"](3,"mgl-control",3),f["\u0275\u0275element"](4,"mgl-control",4),f["\u0275\u0275element"](5,"mgl-control",5),f["\u0275\u0275element"](6,"mgl-control",6),f["\u0275\u0275element"](7,"mgl-control",7),f["\u0275\u0275elementStart"](8,"mgl-control",8),f["\u0275\u0275elementStart"](9,"div",9),f["\u0275\u0275elementStart"](10,"button",10),f["\u0275\u0275listener"]("click",(function(){return e.showStyles=!e.showStyles})),f["\u0275\u0275element"](11,"nb-icon",11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"mgl-control",8),f["\u0275\u0275elementStart"](13,"div",9),f["\u0275\u0275elementStart"](14,"button",12),f["\u0275\u0275template"](15,De,1,0,"nb-icon",13),f["\u0275\u0275template"](16,Fe,1,0,"nb-icon",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](17,ze,14,0,"div",15),f["\u0275\u0275elementStart"](18,"div",16),f["\u0275\u0275elementStart"](19,"div",17),f["\u0275\u0275elementStart"](20,"a",18),f["\u0275\u0275element"](21,"img",19),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](22,"a",20),f["\u0275\u0275element"](23,"img",21),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](24,"ul",22),f["\u0275\u0275elementStart"](25,"li",23),f["\u0275\u0275listener"]("click",(function(){return e.isPopOpen=!e.isPopOpen,e.openPopover(e.isPopOpen)})),f["\u0275\u0275template"](26,Ge,14,1,"ng-template",24,25,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](28,"a",26),f["\u0275\u0275element"](29,"img",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](30,"li"),f["\u0275\u0275elementStart"](31,"a",28),f["\u0275\u0275element"](32,"img",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](33,"li",30),f["\u0275\u0275elementStart"](34,"a",31),f["\u0275\u0275element"](35,"img",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](36,"li",30),f["\u0275\u0275elementStart"](37,"a",33),f["\u0275\u0275element"](38,"img",34),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](39,"li",30),f["\u0275\u0275elementStart"](40,"a",35),f["\u0275\u0275element"](41,"img",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](42,"li",30),f["\u0275\u0275elementStart"](43,"a",37),f["\u0275\u0275element"](44,"img",38),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](45,"a",39),f["\u0275\u0275elementStart"](46,"p"),f["\u0275\u0275text"](47,"Instituto de Estudios Hidr\xe1ulicos y Ambientales - IDEHA"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](48,"div",40),f["\u0275\u0275element"](49,"div",41),f["\u0275\u0275elementStart"](50,"div",42),f["\u0275\u0275element"](51,"div",43),f["\u0275\u0275element"](52,"div",44),f["\u0275\u0275element"](53,"div",45),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](54,Ze,14,3,"ng-template",null,46,f["\u0275\u0275templateRefExtractor"])),2&t){var n=f["\u0275\u0275reference"](27),i=f["\u0275\u0275reference"](55);f["\u0275\u0275advance"](1),f["\u0275\u0275styleMap"](e.styleUrl),f["\u0275\u0275property"]("preserveDrawingBuffer",!0)("attributionControl",!1)("maxBounds",f["\u0275\u0275pureFunction2"](30,We,f["\u0275\u0275pureFunction2"](25,We,-79.68074,-4.230484),f["\u0275\u0275pureFunction1"](28,He,-66.86983)))("zoom",f["\u0275\u0275pureFunction0"](33,Ue))("center",f["\u0275\u0275pureFunction1"](34,$e,-74))("pitch",f["\u0275\u0275pureFunction0"](36,Ke))("bearing",f["\u0275\u0275pureFunction0"](37,Ke)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("searchInput",""),f["\u0275\u0275advance"](13),f["\u0275\u0275property"]("ngIf",e.isRotated),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.isRotated),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.showStyles),f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("stepContent",i)("stepContentParams",f["\u0275\u0275pureFunction0"](38,Xe)),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("nbPopover",n),f["\u0275\u0275advance"](20),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](39,Ye,!0===e.onJoy)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("stepContent",i)("stepContentParams",f["\u0275\u0275pureFunction0"](41,qe)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("stepContent",i)("stepContentParams",f["\u0275\u0275pureFunction0"](42,Je)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("stepContent",i)("stepContentParams",f["\u0275\u0275pureFunction0"](43,Qe)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("stepContent",i)("stepContentParams",f["\u0275\u0275pureFunction0"](44,tn))}},directives:[Pe,de,me,fe,ye,be,pe,ve,g.M,r.v,_t,g.lb,r.s,g.rb,g.qb,g.w,g.z,g.v,g.x,g.s],styles:[".mapboxgl-map[_ngcontent-%COMP%]{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.mapboxgl-map[_ngcontent-%COMP%]:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary[_ngcontent-%COMP%]{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive[_ngcontent-%COMP%], .mapboxgl-ctrl-group[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer[_ngcontent-%COMP%]{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive[_ngcontent-%COMP%]:active, .mapboxgl-ctrl-group[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-drag-pan[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan[_ngcontent-%COMP%], .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan[_ngcontent-%COMP%]   .mapboxgl-canvas[_ngcontent-%COMP%]{touch-action:none}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%], .mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%], .mapboxgl-ctrl-top-left[_ngcontent-%COMP%], .mapboxgl-ctrl-top-right[_ngcontent-%COMP%]{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%]{top:0;left:0}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%]{top:0;right:0}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%]{right:0;bottom:0}.mapboxgl-ctrl[_ngcontent-%COMP%]{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%]   .mapboxgl-ctrl[_ngcontent-%COMP%]{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group[_ngcontent-%COMP%]{border-radius:4px;background:#fff}.mapboxgl-ctrl-group[_ngcontent-%COMP%]:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group[_ngcontent-%COMP%]:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-top:1px solid #ddd}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-color:transparent}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-top:1px solid ButtonText}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{opacity:.25}.mapboxgl-ctrl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:only-child{border-radius:inherit}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-out[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-zoom-in[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-fullscreen[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-shrink[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-compass[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl[_ngcontent-%COMP%]   button.mapboxgl-ctrl-geolocate[_ngcontent-%COMP%]:disabled   .mapboxgl-ctrl-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact[_ngcontent-%COMP%]{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]{min-height:20px;padding:0;margin:10px;position:relative;background-color:#fff;border-radius:3px 12px 12px 3px}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover{padding:2px 24px 2px 4px;visibility:visible;margin-top:6px}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover, .mapboxgl-ctrl-top-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover{padding:2px 4px 2px 24px;border-radius:12px 3px 3px 12px}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]   .mapboxgl-ctrl-attrib-inner[_ngcontent-%COMP%]{display:none}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:hover   .mapboxgl-ctrl-attrib-inner[_ngcontent-%COMP%]{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{content:\"\";cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px}.mapboxgl-ctrl-bottom-right[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{bottom:0;right:0}.mapboxgl-ctrl-top-right[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{top:0;right:0}.mapboxgl-ctrl-top-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{top:0;left:0}.mapboxgl-ctrl-bottom-left[_ngcontent-%COMP%] > .mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact[_ngcontent-%COMP%]:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib[_ngcontent-%COMP%]   .mapbox-improve-map[_ngcontent-%COMP%]{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty[_ngcontent-%COMP%]{display:none}.mapboxgl-ctrl-scale[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top[_ngcontent-%COMP%], .mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%], .mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]{flex-direction:column}.mapboxgl-popup-anchor-bottom[_ngcontent-%COMP%], .mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%], .mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]{flex-direction:column-reverse}.mapboxgl-popup-anchor-left[_ngcontent-%COMP%]{flex-direction:row}.mapboxgl-popup-anchor-right[_ngcontent-%COMP%]{flex-direction:row-reverse}.mapboxgl-popup-tip[_ngcontent-%COMP%]{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right[_ngcontent-%COMP%]   .mapboxgl-popup-tip[_ngcontent-%COMP%]{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right[_ngcontent-%COMP%]   .mapboxgl-popup-content[_ngcontent-%COMP%]{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:none}.mapboxgl-popup-track-pointer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map[_ngcontent-%COMP%]:hover   .mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:flex}.mapboxgl-map[_ngcontent-%COMP%]:active   .mapboxgl-popup-track-pointer[_ngcontent-%COMP%]{display:none}.mapboxgl-marker[_ngcontent-%COMP%]{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot[_ngcontent-%COMP%], .mapboxgl-user-location-dot[_ngcontent-%COMP%]:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot[_ngcontent-%COMP%]:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot[_ngcontent-%COMP%]:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale[_ngcontent-%COMP%]{background-color:#aaa}.mapboxgl-user-location-dot-stale[_ngcontent-%COMP%]:after{display:none}.mapboxgl-user-location-accuracy-circle[_ngcontent-%COMP%]{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair[_ngcontent-%COMP%], .mapboxgl-crosshair[_ngcontent-%COMP%]   .mapboxgl-interactive[_ngcontent-%COMP%], .mapboxgl-crosshair[_ngcontent-%COMP%]   .mapboxgl-interactive[_ngcontent-%COMP%]:active{cursor:crosshair}.mapboxgl-boxzoom[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map[_ngcontent-%COMP%]{display:none}}.mat-badge-content[_ngcontent-%COMP%]{font-weight:600;font-size:12px;font-family:Roboto,Helvetica Neue,sans-serif}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:9px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:24px}.mat-h1[_ngcontent-%COMP%], .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 15px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 calc(14px * .83)/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 calc(14px * .67)/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-body-2[_ngcontent-%COMP%], .mat-body-strong[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-caption[_ngcontent-%COMP%], .mat-small[_ngcontent-%COMP%]{font:400 12px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-display-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-4[_ngcontent-%COMP%]{font:300 112px/112px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-3[_ngcontent-%COMP%]{font:400 56px/56px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-2[_ngcontent-%COMP%]{font:400 45px/48px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font:400 34px/40px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-button[_ngcontent-%COMP%], .mat-fab[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-button-toggle[_ngcontent-%COMP%], .mat-card[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}.mat-card-content[_ngcontent-%COMP%], .mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px}.mat-checkbox[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:24px}.mat-chip[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%], .mat-chip[_ngcontent-%COMP%]   .mat-chip-trailing-icon.mat-icon[_ngcontent-%COMP%]{font-size:18px}.mat-table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-header-cell[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.mat-calendar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-calendar-body[_ngcontent-%COMP%]{font-size:13px}.mat-calendar-body-label[_ngcontent-%COMP%], .mat-calendar-period-button[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-calendar-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.mat-dialog-title[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-expansion-panel-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field[_ngcontent-%COMP%]{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.34375em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:150%;line-height:1.125}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:1.5em;width:1.5em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:1.125em;line-height:1.125}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-label[_ngcontent-%COMP%]{top:1.34375em}.mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.34375em}.mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);-ms-transform:translateY(-1.28125em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);-ms-transform:translateY(-1.28124em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);-ms-transform:translateY(-1.28123em) scale(.75);width:133.3333533333%}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.28125em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.25em 0 .75em}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:1em 0}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-footer[_ngcontent-%COMP%], .mat-grid-tile-header[_ngcontent-%COMP%]{font-size:14px}.mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%], .mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}input.mat-input-element[_ngcontent-%COMP%]{margin-top:-.0625em}.mat-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:400}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px}.mat-radio-button[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-select-trigger[_ngcontent-%COMP%]{height:1.125em}.mat-slide-toggle-content[_ngcontent-%COMP%], .mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-step-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.mat-step-sub-label-error[_ngcontent-%COMP%]{font-weight:400}.mat-step-label-error[_ngcontent-%COMP%]{font-size:14px}.mat-step-label-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-tab-group[_ngcontent-%COMP%], .mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-toolbar[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0}.mat-tooltip[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset[_ngcontent-%COMP%]{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%], .mat-list-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:16px}.mat-optgroup-label[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-simple-snackbar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px}.mat-simple-snackbar-action[_ngcontent-%COMP%]{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-nested-tree-node[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale(0)}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}@media screen and (-ms-high-contrast:active){.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}@-webkit-keyframes cdk-text-field-autofill-start{}@keyframes cdk-text-field-autofill-start{}@-webkit-keyframes cdk-text-field-autofill-end{}@keyframes cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{-webkit-animation:cdk-text-field-autofill-start 0s 1ms;animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){-webkit-animation:cdk-text-field-autofill-end 0s 1ms;animation:cdk-text-field-autofill-end 0s 1ms}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}.mat-focus-indicator[_ngcontent-%COMP%], .mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-ripple-element[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.mat-option[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-option.mat-active[_ngcontent-%COMP%], .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-multiple):not(.mat-option-disabled), .mat-option[_ngcontent-%COMP%]:focus:not(.mat-option-disabled), .mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04)}.mat-option.mat-active[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-primary[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#3f51b5}.mat-accent[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#ff4081}.mat-warn[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-disabled){color:#f44336}.mat-optgroup-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-optgroup-disabled[_ngcontent-%COMP%]   .mat-optgroup-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-pseudo-checkbox[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-pseudo-checkbox[_ngcontent-%COMP%]:after{color:#fafafa}.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%]{color:#b0b0b0}.mat-primary[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#3f51b5}.mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%], .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#ff4081}.mat-warn[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled[_ngcontent-%COMP%]{background:#b0b0b0}.mat-app-background[_ngcontent-%COMP%]{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-elevation-z0[_ngcontent-%COMP%]{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-elevation-z1[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-elevation-z2[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-elevation-z3[_ngcontent-%COMP%]{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-elevation-z4[_ngcontent-%COMP%]{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-elevation-z5[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.mat-elevation-z6[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-elevation-z7[_ngcontent-%COMP%]{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-elevation-z9[_ngcontent-%COMP%]{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.mat-elevation-z10[_ngcontent-%COMP%]{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.mat-elevation-z11[_ngcontent-%COMP%]{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.mat-elevation-z12[_ngcontent-%COMP%]{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-elevation-z13[_ngcontent-%COMP%]{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.mat-elevation-z14[_ngcontent-%COMP%]{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.mat-elevation-z15[_ngcontent-%COMP%]{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.mat-elevation-z16[_ngcontent-%COMP%]{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-elevation-z17[_ngcontent-%COMP%]{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.mat-elevation-z18[_ngcontent-%COMP%]{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.mat-elevation-z19[_ngcontent-%COMP%]{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.mat-elevation-z20[_ngcontent-%COMP%]{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.mat-elevation-z21[_ngcontent-%COMP%]{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.mat-elevation-z22[_ngcontent-%COMP%]{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.mat-elevation-z23[_ngcontent-%COMP%]{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.mat-elevation-z24[_ngcontent-%COMP%]{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mat-theme-loaded-marker[_ngcontent-%COMP%]{display:none}.mat-autocomplete-panel[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-autocomplete-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-active):not(:hover){background:#fff}.mat-autocomplete-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-active):not(:hover):not(.mat-option-disabled){color:rgba(0,0,0,.87)}.mat-badge-content[_ngcontent-%COMP%]{color:#fff;background:#3f51b5}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{outline:1px solid;border-radius:0}.mat-badge-accent[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{background:#ff4081;color:#fff}.mat-badge-warn[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{color:#fff;background:#f44336}.mat-badge[_ngcontent-%COMP%]{position:relative}.mat-badge-hidden[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{display:none}.mat-badge-disabled[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{background:#b9b9b9;color:rgba(0,0,0,.38)}.mat-badge-content[_ngcontent-%COMP%]{position:absolute;text-align:center;display:inline-block;border-radius:50%;transition:transform .2s ease-in-out;transform:scale(.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;pointer-events:none}.mat-badge-content._mat-animation-noopable[_ngcontent-%COMP%], .ng-animate-disabled[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{transition:none}.mat-badge-content.mat-badge-active[_ngcontent-%COMP%]{transform:none}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:16px;height:16px;line-height:16px}.mat-badge-small.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-8px}.mat-badge-small.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-8px}.mat-badge-small.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-16px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-16px}.mat-badge-small.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-16px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-16px}.mat-badge-small.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-8px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-8px}.mat-badge-small.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-8px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-small.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-8px}.mat-badge-medium[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:22px;height:22px;line-height:22px}.mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-11px}.mat-badge-medium.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-11px}.mat-badge-medium.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-22px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-22px}.mat-badge-medium.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-22px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-22px}.mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-11px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-11px}.mat-badge-medium.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-11px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-11px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}.mat-badge-large.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-14px}.mat-badge-large.mat-badge-below[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{bottom:-14px}.mat-badge-large.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-28px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-28px}.mat-badge-large.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-28px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-28px}.mat-badge-large.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-14px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:auto;right:-14px}.mat-badge-large.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:-14px}[dir=rtl][_ngcontent-%COMP%]   .mat-badge-large.mat-badge-overlap.mat-badge-after[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{right:auto;left:-14px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12);background:#fff;color:rgba(0,0,0,.87)}.mat-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]{color:inherit;background:transparent}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]{color:#3f51b5}.mat-button.mat-accent[_ngcontent-%COMP%], .mat-icon-button.mat-accent[_ngcontent-%COMP%], .mat-stroked-button.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-button.mat-warn[_ngcontent-%COMP%], .mat-icon-button.mat-warn[_ngcontent-%COMP%], .mat-stroked-button.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-icon-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-stroked-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-accent[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#ff4081}.mat-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-warn[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:#f44336}.mat-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-icon-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .mat-stroked-button.mat-button-disabled[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background-color:transparent}.mat-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{opacity:.1;background-color:currentColor}.mat-button-focus-overlay[_ngcontent-%COMP%]{background:#000}.mat-stroked-button[_ngcontent-%COMP%]:not(.mat-button-disabled){border-color:rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);background-color:#fff}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-fab.mat-primary[_ngcontent-%COMP%], .mat-fab.mat-warn[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]{color:#fff}.mat-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081}.mat-fab.mat-warn[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]{background-color:#f44336}.mat-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-flat-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-mini-fab.mat-warn.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-accent.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-primary.mat-button-disabled[_ngcontent-%COMP%], .mat-raised-button.mat-warn.mat-button-disabled[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-fab.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-fab.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-fab.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-flat-button.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-mini-fab.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-raised-button.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-flat-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-stroked-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-raised-button[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-raised-button[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-mini-fab[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]), .mat-mini-fab[_ngcontent-%COMP%]:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]), .mat-mini-fab.mat-button-disabled[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-button-toggle-group[_ngcontent-%COMP%], .mat-button-toggle-standalone[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%], .mat-button-toggle-standalone.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{box-shadow:none}.mat-button-toggle[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-button-toggle[_ngcontent-%COMP%]   .mat-button-toggle-focus-overlay[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);background:#fff}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle-focus-overlay[_ngcontent-%COMP%]{background-color:#000}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.12)}[dir=rtl][_ngcontent-%COMP%]   .mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:none;border-right:1px solid rgba(0,0,0,.12)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%] + .mat-button-toggle[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:1px solid rgba(0,0,0,.12)}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#e0e0e0;color:rgba(0,0,0,.54)}.mat-button-toggle-checked.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-button-toggle-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);background-color:#eee}.mat-button-toggle-disabled.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{background:#fff}.mat-button-toggle-disabled.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#bdbdbd}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%], .mat-button-toggle-standalone.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12)}.mat-button-toggle-appearance-standard[_ngcontent-%COMP%]   .mat-button-toggle-label-content[_ngcontent-%COMP%]{line-height:48px}.mat-card[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-card.mat-card-flat[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-card-subtitle[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-checkbox-frame[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.54)}.mat-checkbox-checkmark[_ngcontent-%COMP%]{fill:#fafafa}.mat-checkbox-checkmark-path[_ngcontent-%COMP%]{stroke:#fafafa!important}.mat-checkbox-mixedmark[_ngcontent-%COMP%]{background-color:#fafafa}.mat-checkbox-checked.mat-primary[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-primary[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#ff4081}.mat-checkbox-checked.mat-warn[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate.mat-warn[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-disabled.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#b0b0b0}.mat-checkbox-disabled[_ngcontent-%COMP%]:not(.mat-checkbox-checked)   .mat-checkbox-frame[_ngcontent-%COMP%]{border-color:#b0b0b0}.mat-checkbox-disabled[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-checkbox[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-primary   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-primary   .mat-ripple-element[_ngcontent-%COMP%]{background:#3f51b5}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-accent   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-accent   .mat-ripple-element[_ngcontent-%COMP%]{background:#ff4081}.mat-checkbox-checked[_ngcontent-%COMP%]:not(.mat-checkbox-disabled).mat-warn   .mat-ripple-element[_ngcontent-%COMP%], .mat-checkbox[_ngcontent-%COMP%]:active:not(.mat-checkbox-disabled).mat-warn   .mat-ripple-element[_ngcontent-%COMP%]{background:#f44336}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]{background-color:#e0e0e0;color:rgba(0,0,0,.87)}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);opacity:.4}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:not(.mat-chip-disabled):active{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:not(.mat-chip-disabled)   .mat-chip-remove[_ngcontent-%COMP%]:hover{opacity:.54}.mat-chip.mat-standard-chip.mat-chip-disabled[_ngcontent-%COMP%]{opacity:.4}.mat-chip.mat-standard-chip[_ngcontent-%COMP%]:after{background:#000}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]   .mat-chip-remove[_ngcontent-%COMP%]{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1)}.mat-table[_ngcontent-%COMP%]{background:#fff}.mat-table-sticky[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], [mat-footer-row][_ngcontent-%COMP%], [mat-header-row][_ngcontent-%COMP%], [mat-row][_ngcontent-%COMP%], mat-footer-row[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{background:inherit}mat-footer-row[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-color:rgba(0,0,0,.12)}.mat-header-cell[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-calendar-arrow[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.54)}.mat-datepicker-content[_ngcontent-%COMP%]   .mat-calendar-next-button[_ngcontent-%COMP%], .mat-datepicker-content[_ngcontent-%COMP%]   .mat-calendar-previous-button[_ngcontent-%COMP%], .mat-datepicker-toggle[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-calendar-table-header[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-calendar-table-header-divider[_ngcontent-%COMP%]:after{background:rgba(0,0,0,.12)}.mat-calendar-body-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-calendar-body-cell-content[_ngcontent-%COMP%], .mat-date-range-input-separator[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);border-color:transparent}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical), .mat-form-field-disabled[_ngcontent-%COMP%]   .mat-date-range-input-separator[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.cdk-keyboard-focused[_ngcontent-%COMP%]   .mat-calendar-body-active[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical), .cdk-program-focused[_ngcontent-%COMP%]   .mat-calendar-body-active[_ngcontent-%COMP%] > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical), .mat-calendar-body-cell[_ngcontent-%COMP%]:not(.mat-calendar-body-disabled):hover > .mat-calendar-body-cell-content[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:rgba(0,0,0,.04)}.mat-calendar-body-in-preview[_ngcontent-%COMP%]{color:rgba(0,0,0,.24)}.mat-calendar-body-today[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:rgba(0,0,0,.38)}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-today[_ngcontent-%COMP%]:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:rgba(0,0,0,.18)}.mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(63,81,181,.2)}.mat-calendar-body-comparison-identical[_ngcontent-%COMP%], .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(63,81,181,.2) 50%,rgba(249,171,0,.2) 0)}.mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(63,81,181,.2) 50%,rgba(249,171,0,.2) 0)}.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after, .mat-calendar-body-in-range[_ngcontent-%COMP%] > .mat-calendar-body-comparison-identical[_ngcontent-%COMP%]{background:#a8dab5}.mat-calendar-body-comparison-identical.mat-calendar-body-selected[_ngcontent-%COMP%], .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.4)}.mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content[_ngcontent-%COMP%]{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);background-color:#fff;color:rgba(0,0,0,.87)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(255,64,129,.2)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-identical[_ngcontent-%COMP%], .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(255,64,129,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(255,64,129,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after, .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%] > .mat-calendar-body-comparison-identical[_ngcontent-%COMP%]{background:#a8dab5}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-comparison-identical.mat-calendar-body-selected[_ngcontent-%COMP%], .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.4)}.mat-datepicker-content.mat-accent[_ngcontent-%COMP%]   .mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%]:before{background:rgba(244,67,54,.2)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-identical[_ngcontent-%COMP%], .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%]:before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,rgba(244,67,54,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-end[_ngcontent-%COMP%]:before, .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   [dir=rtl][_ngcontent-%COMP%]   .mat-calendar-body-comparison-bridge-start[_ngcontent-%COMP%]:before{background:linear-gradient(270deg,rgba(244,67,54,.2) 50%,rgba(249,171,0,.2) 0)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range[_ngcontent-%COMP%]:after, .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-range[_ngcontent-%COMP%] > .mat-calendar-body-comparison-identical[_ngcontent-%COMP%]{background:#a8dab5}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-comparison-identical.mat-calendar-body-selected[_ngcontent-%COMP%], .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-in-comparison-range[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background:#46a35e}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-disabled[_ngcontent-%COMP%] > .mat-calendar-body-selected[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.4)}.mat-datepicker-content.mat-warn[_ngcontent-%COMP%]   .mat-calendar-body-today.mat-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content-touch[_ngcontent-%COMP%]{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-datepicker-toggle-active[_ngcontent-%COMP%]{color:#3f51b5}.mat-datepicker-toggle-active.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-datepicker-toggle-active.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-date-range-input-inner[disabled][_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-dialog-container[_ngcontent-%COMP%]{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background:#fff;color:rgba(0,0,0,.87)}.mat-divider[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-divider-vertical[_ngcontent-%COMP%]{border-right-color:rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{background:#fff;color:rgba(0,0,0,.87)}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-action-row[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:rgba(0,0,0,.04)}@media(hover:none){.mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded):not([aria-disabled=true])   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background:#fff}}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-expansion-indicator[_ngcontent-%COMP%]:after, .mat-expansion-panel-header-description[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{color:inherit}.mat-expansion-panel-header[_ngcontent-%COMP%]{height:48px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:64px}.mat-form-field-label[_ngcontent-%COMP%], .mat-hint[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-label.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-focused[_ngcontent-%COMP%]   .mat-form-field-required-marker[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field-ripple[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.87)}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-accent[_ngcontent-%COMP%]{background-color:#ff4081}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-warn[_ngcontent-%COMP%]{background-color:#f44336}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid)   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#3f51b5}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid).mat-accent   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#ff4081}.mat-form-field-type-mat-native-select.mat-focused[_ngcontent-%COMP%]:not(.mat-form-field-invalid).mat-warn   .mat-form-field-infix[_ngcontent-%COMP%]:after, .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label.mat-accent[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]   .mat-form-field-required-marker[_ngcontent-%COMP%]{color:#f44336}.mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-ripple.mat-accent[_ngcontent-%COMP%]{background-color:#f44336}.mat-error[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-legacy.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-standard[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-standard.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.04)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.02)}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-form-field-appearance-fill.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]:before{background-color:transparent}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:rgba(0,0,0,.12)}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field-appearance-outline.mat-focused.mat-accent[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field-appearance-outline.mat-focused.mat-warn[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-form-field-appearance-outline.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:rgba(0,0,0,.06)}.mat-icon.mat-primary[_ngcontent-%COMP%]{color:#3f51b5}.mat-icon.mat-accent[_ngcontent-%COMP%]{color:#ff4081}.mat-icon.mat-warn[_ngcontent-%COMP%]{color:#f44336}.mat-form-field-type-mat-native-select[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:rgba(0,0,0,.54)}.mat-form-field-type-mat-native-select.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after, .mat-input-element[_ngcontent-%COMP%]:disabled{color:rgba(0,0,0,.38)}.mat-input-element[_ngcontent-%COMP%]{caret-color:#3f51b5}.mat-input-element[_ngcontent-%COMP%]::-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]::-webkit-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-form-field.mat-accent[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#ff4081}.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .mat-form-field.mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#f44336}.mat-form-field-type-mat-native-select.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]:after{color:#f44336}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-list-item-disabled[_ngcontent-%COMP%]{background-color:#eee}.mat-action-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:focus, .mat-action-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover, .mat-list-option[_ngcontent-%COMP%]:focus, .mat-list-option[_ngcontent-%COMP%]:hover, .mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:focus, .mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.04)}.mat-list-single-selected-option[_ngcontent-%COMP%], .mat-list-single-selected-option[_ngcontent-%COMP%]:focus, .mat-list-single-selected-option[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.12)}.mat-menu-panel[_ngcontent-%COMP%]{background:#fff}.mat-menu-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-menu-item[_ngcontent-%COMP%]{background:transparent;color:rgba(0,0,0,.87)}.mat-menu-item[disabled][_ngcontent-%COMP%], .mat-menu-item[disabled][_ngcontent-%COMP%]:after{color:rgba(0,0,0,.38)}.mat-menu-item-submenu-trigger[_ngcontent-%COMP%]:after, .mat-menu-item[_ngcontent-%COMP%]   .mat-icon-no-color[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-menu-item-highlighted[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item.cdk-keyboard-focused[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item.cdk-program-focused[_ngcontent-%COMP%]:not([disabled]), .mat-menu-item[_ngcontent-%COMP%]:hover:not([disabled]){background:rgba(0,0,0,.04)}.mat-paginator[_ngcontent-%COMP%]{background:#fff}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-paginator-decrement[_ngcontent-%COMP%], .mat-paginator-increment[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.54);border-right:2px solid rgba(0,0,0,.54)}.mat-paginator-first[_ngcontent-%COMP%], .mat-paginator-last[_ngcontent-%COMP%]{border-top:2px solid rgba(0,0,0,.54)}.mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-decrement[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-first[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-increment[_ngcontent-%COMP%], .mat-icon-button[disabled][_ngcontent-%COMP%]   .mat-paginator-last[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-paginator-container[_ngcontent-%COMP%]{min-height:56px}.mat-progress-bar-background[_ngcontent-%COMP%]{fill:#c5cae9}.mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#c5cae9}.mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#3f51b5}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-background[_ngcontent-%COMP%]{fill:#ff80ab}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#ff80ab}.mat-progress-bar.mat-accent[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#ff4081}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-background[_ngcontent-%COMP%]{fill:#ffcdd2}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-buffer[_ngcontent-%COMP%]{background-color:#ffcdd2}.mat-progress-bar.mat-warn[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#f44336}.mat-progress-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#3f51b5}.mat-progress-spinner.mat-accent[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-accent[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#ff4081}.mat-progress-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#f44336}.mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.54)}.mat-radio-button.mat-primary.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#3f51b5}.mat-radio-button.mat-primary.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-primary[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-primary[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-primary[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#ff4081}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#ff4081}.mat-radio-button.mat-warn.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#f44336}.mat-radio-button.mat-warn.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-warn[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-warn[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-warn[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#f44336}.mat-radio-button.mat-radio-disabled.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%], .mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%], .mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-radio-button.mat-radio-disabled[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-radio-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-select-value[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-select-placeholder[_ngcontent-%COMP%]{color:rgba(0,0,0,.42)}.mat-select-disabled[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-select-arrow[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-select-panel[_ngcontent-%COMP%]{background:#fff}.mat-select-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-select-panel[_ngcontent-%COMP%]   .mat-option.mat-selected[_ngcontent-%COMP%]:not(.mat-option-multiple){background:rgba(0,0,0,.12)}.mat-form-field.mat-focused.mat-primary[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#3f51b5}.mat-form-field.mat-focused.mat-accent[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#ff4081}.mat-form-field.mat-focused.mat-warn[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]   .mat-select.mat-select-invalid[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#f44336}.mat-form-field[_ngcontent-%COMP%]   .mat-select.mat-select-disabled[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-drawer-container[_ngcontent-%COMP%]{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-drawer[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-drawer[_ngcontent-%COMP%], .mat-drawer.mat-drawer-push[_ngcontent-%COMP%]{background-color:#fff}.mat-drawer[_ngcontent-%COMP%]:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-drawer-side[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.12)}.mat-drawer-side.mat-drawer-end[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .mat-drawer-side[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.12);border-right:none}[dir=rtl][_ngcontent-%COMP%]   .mat-drawer-side.mat-drawer-end[_ngcontent-%COMP%]{border-left:none;border-right:1px solid rgba(0,0,0,.12)}.mat-drawer-backdrop.mat-drawer-shown[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6)}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#ff4081}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.54)}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ff4081}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.54)}.mat-slide-toggle.mat-primary.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-thumb[_ngcontent-%COMP%]{background-color:#f44336}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.54)}.mat-slide-toggle.mat-warn.mat-checked[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#f44336}.mat-slide-toggle[_ngcontent-%COMP%]:not(.mat-checked)   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000}.mat-slide-toggle-thumb[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);background-color:#fafafa}.mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-primary[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-primary[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-primary[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(63,81,181,.2)}.mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#ff4081}.mat-accent[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-accent[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(255,64,129,.2)}.mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-warn[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#f44336}.mat-warn[_ngcontent-%COMP%]   .mat-slider-thumb-label-text[_ngcontent-%COMP%]{color:#fff}.mat-warn[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.2)}.cdk-focused[_ngcontent-%COMP%]   .mat-slider-track-background[_ngcontent-%COMP%], .mat-slider[_ngcontent-%COMP%]:hover   .mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.38)}.mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-track-background[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%], .mat-slider-disabled[_ngcontent-%COMP%]:hover   .mat-slider-track-background[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-slider-min-value[_ngcontent-%COMP%]   .mat-slider-focus-ring[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.12)}.mat-slider-min-value.mat-slider-thumb-label-showing[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value.mat-slider-thumb-label-showing[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.87)}.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused[_ngcontent-%COMP%]   .mat-slider-thumb-label[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.26)}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing)   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.26);background-color:transparent}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing).cdk-focused   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing):hover   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing).cdk-focused.mat-slider-disabled   .mat-slider-thumb[_ngcontent-%COMP%], .mat-slider-min-value[_ngcontent-%COMP%]:not(.mat-slider-thumb-label-showing):hover.mat-slider-disabled   .mat-slider-thumb[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.26)}.mat-slider-has-ticks[_ngcontent-%COMP%]   .mat-slider-wrapper[_ngcontent-%COMP%]:after{border-color:rgba(0,0,0,.7)}.mat-slider-horizontal[_ngcontent-%COMP%]   .mat-slider-ticks[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(90deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent);background-image:-moz-repeating-linear-gradient(.0001deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent)}.mat-slider-vertical[_ngcontent-%COMP%]   .mat-slider-ticks[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(180deg,rgba(0,0,0,.7),rgba(0,0,0,.7) 2px,transparent 0,transparent)}.mat-step-header.cdk-keyboard-focused[_ngcontent-%COMP%], .mat-step-header.cdk-program-focused[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.04)}@media(hover:none){.mat-step-header[_ngcontent-%COMP%]:hover{background:none}}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-optional[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.54);color:#fff}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-selected[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-done[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-edit[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-error[_ngcontent-%COMP%]{background-color:transparent;color:#f44336}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label.mat-step-label-active[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-step-header[_ngcontent-%COMP%]   .mat-step-label.mat-step-label-error[_ngcontent-%COMP%]{color:#f44336}.mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{background-color:#fff}.mat-stepper-vertical-line[_ngcontent-%COMP%]:before{border-left-color:rgba(0,0,0,.12)}.mat-horizontal-stepper-header[_ngcontent-%COMP%]:after, .mat-horizontal-stepper-header[_ngcontent-%COMP%]:before, .mat-stepper-horizontal-line[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.12)}.mat-horizontal-stepper-header[_ngcontent-%COMP%]{height:72px}.mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%], .mat-vertical-stepper-header[_ngcontent-%COMP%]{padding:24px}.mat-stepper-vertical-line[_ngcontent-%COMP%]:before{top:-16px;bottom:-16px}.mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%]:after, .mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-horizontal-stepper-header[_ngcontent-%COMP%]:before, .mat-stepper-label-position-bottom[_ngcontent-%COMP%]   .mat-stepper-horizontal-line[_ngcontent-%COMP%]{top:36px}.mat-sort-header-arrow[_ngcontent-%COMP%]{color:#757575}.mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-nav-bar[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12);border-bottom:none}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.87)}.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.38)}.mat-tab-group[class*=mat-background-][_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[class*=mat-background-][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(197,202,233,.3)}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,128,171,.3)}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#ff4081}.mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#f44336}.mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(197,202,233,.3)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#3f51b5}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,128,171,.3)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#ff4081}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-links[_ngcontent-%COMP%]{background-color:#f44336}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.4)}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.12)}.mat-toolbar[_ngcontent-%COMP%]{background:#f5f5f5;color:rgba(0,0,0,.87)}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background:#3f51b5;color:#fff}.mat-toolbar.mat-accent[_ngcontent-%COMP%]{background:#ff4081;color:#fff}.mat-toolbar.mat-warn[_ngcontent-%COMP%]{background:#f44336;color:#fff}.mat-toolbar[_ngcontent-%COMP%]   .mat-focused[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:currentColor}.mat-toolbar[_ngcontent-%COMP%]   .mat-focused[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:inherit}.mat-toolbar[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:currentColor}.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:64px}.mat-toolbar-row[_ngcontent-%COMP%], .mat-toolbar-single-row[_ngcontent-%COMP%]{height:64px}@media(max-width:599px){.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:56px}.mat-toolbar-row[_ngcontent-%COMP%], .mat-toolbar-single-row[_ngcontent-%COMP%]{height:56px}}.mat-tooltip[_ngcontent-%COMP%]{background:rgba(97,97,97,.9)}.mat-tree[_ngcontent-%COMP%]{background:#fff}.mat-nested-tree-node[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}.mat-tree-node[_ngcontent-%COMP%]{min-height:48px}.mat-snack-bar-container[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.7);background:#323232;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-simple-snackbar-action[_ngcontent-%COMP%]{color:#ff4081}.nb-theme-default   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-default   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-dark   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-cosmic   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-corporate   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-corporate   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-material-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-material-dark   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-material-light   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-material-light   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}.nb-theme-obsrio   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.nb-theme-obsrio   [_nghost-%COMP%]     nb-icon svg{width:100%!important;height:100%!important}@-webkit-keyframes ani{0%{background-position:0 -5vw}to{background-position:100vw -5vw}}@keyframes ani{0%{background-position:0 -5vw}to{background-position:100vw -5vw}}.header-bg-step1[_ngcontent-%COMP%]{-webkit-animation:ani 25s linear infinite;animation:ani 25s linear infinite;background-image:url(/plataforma/assets/img/land3.jpg);background-repeat:repeat-x;background-size:cover;height:100px;background-color:transparent;background-position:50%}.marker[_ngcontent-%COMP%]{height:35px;width:35px;background-size:contain;cursor:pointer;background-repeat:no-repeat}.marker-name[_ngcontent-%COMP%]{font-family:Open Sans,Roboto,sans-serif;color:#424242;position:absolute;left:100%;text-shadow:-2px 1px 3px #fff;cursor:pointer;width:150px}#menu[_ngcontent-%COMP%]{-webkit-animation:fade .5s;animation:fade .5s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes fade{0%{opacity:0}to{opacity:1}}.mbxmap[_nghost-%COMP%], .mbxmap   [_nghost-%COMP%]{position:relative;height:100%;width:100%}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}#menu[_ngcontent-%COMP%], mgl-map[_ngcontent-%COMP%]{position:absolute}#menu[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.9411764705882353);padding:5px;font-family:Open Sans,sans-serif;bottom:7em;border-radius:9px;right:7px}#redes[_ngcontent-%COMP%]{position:absolute;right:1%;bottom:1%!important}#redes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;margin-left:5px}.socialnetwork[_ngcontent-%COMP%]{opacity:.8;overflow:hidden;margin:0}.socialnetwork[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;margin-left:10px}.socialnetwork[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:.9}@media (min-width:576px){#logos-sm[_ngcontent-%COMP%]{display:none}}@media (max-width:767.98px){#logos[_ngcontent-%COMP%]{display:none}.logo[_ngcontent-%COMP%]{display:none!important}#redes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;margin-left:5px}#redes[_ngcontent-%COMP%]{width:100%;bottom:10px;z-index:2}.info-sm[_ngcontent-%COMP%]{display:none}.socialnetwork[_ngcontent-%COMP%]{opacity:.8;overflow:auto hidden;margin:0;justify-content:center;padding:0;bottom:10px;width:50px;position:absolute;right:0;transform:scale(.8)}#logos-sm[_ngcontent-%COMP%]{display:flex;bottom:4.5em;z-index:4;position:absolute;place-items:center;margin-left:.3em;left:0}#logos-sm[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:.4em}img.logo-obs-sm[_ngcontent-%COMP%]{width:1em}img.logo-uninorte-sm[_ngcontent-%COMP%]{width:5em!important}}.example-container[_ngcontent-%COMP%]{align-items:stretch;align-self:stretch;justify-content:stretch;height:90vh}.example-container[_ngcontent-%COMP%], mat-drawer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.placeholder-joyride[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;left:0;width:100%;height:100%}.placeholder-joyride[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{height:9vh;right:0;position:absolute}.placeholder-joyride[_ngcontent-%COMP%]   #center[_ngcontent-%COMP%]{height:100vh}.wmax600[_ngcontent-%COMP%]{max-width:500px!important;margin:0 auto}.welcome-popover[_ngcontent-%COMP%]{bottom:0}.fade-in[_ngcontent-%COMP%]{opacity:1;-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.7s;animation-duration:.7s;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0,1,.5,1)}  .joyride-step__holder{opacity:1;-webkit-animation-name:fadeInOpacity;animation-name:fadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.4s;animation-duration:.4s}  .backdrop-left,   .backdrop-right{opacity:1;-webkit-animation-name:fadeInOpacity;animation-name:fadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-duration:.2s;animation-duration:.2s}@-webkit-keyframes slideUp{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}"]}),t}(),nn=n("Vxv7"),rn=n("FuD7"),on=n("vC38"),an=n("kJCe"),sn=n("mgFL");function cn(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"ngx-one-column-no-header-layout"),f["\u0275\u0275element"](1,"nb-menu",2),f["\u0275\u0275element"](2,"router-outlet"),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("items",n.menu)}}function ln(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"ngx-one-column-layout"),f["\u0275\u0275element"](1,"nb-menu",2),f["\u0275\u0275element"](2,"router-outlet"),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("items",n.menu)}}var un=function(){function t(t,e,n,i){this.accessChecker=t,this.menuService=e,this.route=n,this.ls=i,this.showHeader=!1,this.menu=rn.a,this.destroy$=new D.a,e.setMenuItemVisibility(this.menu)}return t.prototype.ngOnInit=function(){var t=this;this.ls.onChangeLayoutType().pipe(Object(I.a)((function(t){return t})),Object(Xt.a)(this.destroy$)).subscribe((function(e){t.showHeader="no-header"!==e.type}))},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.prototype.toggle=function(){this.showHeader=!this.showHeader},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](m.a),f["\u0275\u0275directiveInject"](nn.a),f["\u0275\u0275directiveInject"](o.a),f["\u0275\u0275directiveInject"](on.b))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-obs"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noHeader",""],[3,"items"]],template:function(t,e){if(1&t&&(f["\u0275\u0275template"](0,cn,3,1,"ngx-one-column-no-header-layout",0),f["\u0275\u0275template"](1,ln,3,1,"ng-template",null,1,f["\u0275\u0275templateRefExtractor"])),2&t){var n=f["\u0275\u0275reference"](2);f["\u0275\u0275property"]("ngIf",!e.showHeader)("ngIfElse",n)}},directives:[r.v,an.a,g.eb,o.h,sn.a],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-default   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-dark   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-cosmic   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-corporate   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-material-dark   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-material-dark   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}.nb-theme-material-light   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-material-light   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-obsrio   [_nghost-%COMP%]   .columns[_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .columns   [_nghost-%COMP%]   nb-layout-column[_ngcontent-%COMP%], .nb-theme-obsrio   [_nghost-%COMP%]   -shadowcsshost   nb-layout-column[_ngcontent-%COMP%]{padding:0!important}"]}),t}(),hn=n("R0Ic"),dn=(n("VcZd"),function(){function t(t){this.ngZone=t,this.assets={printing:"assets/lottie/printing.json",printing2:"assets/lottie/creating-doc.json","loading-layers":"assets/lottie/layers_placeholder.json","loading-station":"assets/lottie/map-placeholder.json","layers-btn":"assets/lottie/layers-btn.json"}}return t.prototype.getOptions=function(t,e){return void 0===e&&(e={}),e.path=this.assets[t],e},t.prototype.animationCreated=function(t,e){var n=this;void 0===e&&(e={}),this.animationItem=t,e.speed&&this.animationItem.setSpeed(e.speed),e.playSegments&&this.ngZone.runOutsideAngular((function(){return n.animationItem.playSegments(e.playSegments)}))},t.prototype.stop=function(t,e){var n=this;void 0===e&&(e={}),this.ngZone.runOutsideAngular((function(){return n.animationItem.stop()}))},t.prototype.opened=function(t,e){var n=this;void 0===e&&(e={}),this.ngZone.runOutsideAngular((function(){return n.animationItem.playSegments(e.playSegments)}))},t.prototype.closed=function(t,e){var n=this;void 0===e&&(e={}),this.ngZone.runOutsideAngular((function(){return n.animationItem.playSegments(e.playSegments)}))},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275inject"](f.NgZone))},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()),pn=n("XhcP"),fn=n("5+WD"),gn=n("QJFE"),mn=["layersLimitSwal"];function vn(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",15),f["\u0275\u0275elementStart"](1,"div",16),f["\u0275\u0275elementStart"](2,"div",17),f["\u0275\u0275element"](3,"img",18),f["\u0275\u0275elementStart"](4,"div",19),f["\u0275\u0275elementStart"](5,"p",20),f["\u0275\u0275text"](6,"Registrese aqu\xed"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"p",21),f["\u0275\u0275text"](8,"para eliminar este limite."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div",22),f["\u0275\u0275elementStart"](10,"div",19),f["\u0275\u0275elementStart"](11,"p",23),f["\u0275\u0275text"](12,"Activas"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"p",24),f["\u0275\u0275text"](14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"span",25),f["\u0275\u0275text"](16,"/"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"div",26),f["\u0275\u0275elementStart"](18,"p",24),f["\u0275\u0275text"](19,"Limite"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](20,"p",24),f["\u0275\u0275text"](21),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](22,"div"),f["\u0275\u0275text"](23,"-"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](14),f["\u0275\u0275textInterpolate"](null==n.layerCounts?null:n.layerCounts.user.count),f["\u0275\u0275advance"](7),f["\u0275\u0275textInterpolate"](null==n.layerCounts?null:n.layerCounts.user.limit)}}function yn(t,e){1&t&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"p"),f["\u0275\u0275text"](2,"Por favor registrese aqu\xed, o desactive las capas actuales."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"a",29),f["\u0275\u0275element"](4,"img",30),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]())}function bn(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",27),f["\u0275\u0275elementStart"](1,"strong"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,yn,5,0,"ng-container",28),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](n.swalText),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.isLogged)}}var _n=function(){function t(t,e){var n=this;this._glMapService=t,this._authService=e,this.swalText="",this.layerCounts=null,this.maxLayers=0,this.totalActivesLayers=0,this._authService.getCurrentUser().subscribe((function(t){n.isLogged=!!t}))}return t.prototype.ngOnInit=function(){var t=this;this.map$=this._glMapService.getLayersCounts(),this.map$.subscribe({next:function(e){null===e.error?t.layerCounts=e.types:"user"===e.error.type?(t.swalText='Has Llegado al limite de capas para usuarios no registrados"" (M\xe1ximo. '+t.layerCounts[e.error.type].limit+").",setTimeout((function(){t.layersLimitSwal.fire()})),t.layerCounts=e.types):(t.swalText='Ha llegado al limite de capas tipo "'+e.error.type+'" simultaneas: (M\xe1ximo. '+t.layerCounts[e.error.type].limit+").",setTimeout((function(){t.layersLimitSwal.fire()})),t.layerCounts=e.types)},error:function(t){console.error(t)}})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](v),f["\u0275\u0275directiveInject"](p.a))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layers-type-counts"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275viewQuery"](mn,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.layersLimitSwal=n.first)},decls:33,vars:10,consts:[["class","d-flex flex-column justify-content-center   mb-4",4,"ngIf"],["id","stats",1,"d-flex","justify-content-center"],["nbTooltip","points","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["status","info","icon","pin-outline"],[1,"d-flex"],[1,"stat-limit"],["nbTooltip","line","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","lines","pack","obs-icons",1,"obs-icons"],["nbTooltip","Polygon","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","polygons","pack","obs-icons",1,"obs-icons"],["nbTooltip","Raster","nbTooltipStatus","info",1,"stat-item","d-flex","flex-column","justify-content-center"],["icon","raster","pack","obs-icons",1,"obs-icons"],["title","Limite alcanzado","icon","info",3,"showCancelButton"],["layersLimitSwal",""],["class","alert ",4,"swalPortal"],[1,"d-flex","flex-column","justify-content-center","mb-4"],["routerLink","auth/register","shape","round",1,"d-flex","justify-content-between"],[1,"d-flex","align-self-center","register-limit","justify-content-between","shadow-sm"],["src","assets/img/register.png","width","50","height","auto"],[1,"d-flex","flex-column"],[1,"align-self-center","text-white"],[1,"align-self-center","subtext","caption","text-white"],[1,"global-limits","d-flex","align-self-center"],[1,"align-self-center","text-white","caption-2","global-stat-item"],[1,"align-self-center","text-white","caption-2"],[1,"ml-1"],[1,"caption-2","d-flex","flex-column","ml-1"],[1,"alert"],[4,"ngIf"],["routerLink","auth/register","nbButton","","ghost",""],["src","assets/img/register.png","width","200","alt","registro"]],template:function(t,e){1&t&&(f["\u0275\u0275template"](0,vn,24,2,"div",0),f["\u0275\u0275elementStart"](1,"nb-actions",1),f["\u0275\u0275elementStart"](2,"nb-action",2),f["\u0275\u0275element"](3,"nb-icon",3),f["\u0275\u0275elementStart"](4,"div",4),f["\u0275\u0275elementStart"](5,"span"),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"span",5),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"nb-action",6),f["\u0275\u0275element"](10,"nb-icon",7),f["\u0275\u0275elementStart"](11,"div",4),f["\u0275\u0275elementStart"](12,"span"),f["\u0275\u0275text"](13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"span",5),f["\u0275\u0275text"](15),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"nb-action",8),f["\u0275\u0275element"](17,"nb-icon",9),f["\u0275\u0275elementStart"](18,"div",4),f["\u0275\u0275elementStart"](19,"span"),f["\u0275\u0275text"](20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](21,"span",5),f["\u0275\u0275text"](22),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](23,"nb-action",10),f["\u0275\u0275element"](24,"nb-icon",11),f["\u0275\u0275elementStart"](25,"div",4),f["\u0275\u0275elementStart"](26,"span"),f["\u0275\u0275text"](27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](28,"span",5),f["\u0275\u0275text"](29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](30,"swal",12,13),f["\u0275\u0275template"](32,bn,4,2,"div",14),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275property"]("ngIf",!e.isLogged),f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](null==e.layerCounts?null:e.layerCounts.points.count),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("/",null==e.layerCounts?null:e.layerCounts.points.limit,""),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](null==e.layerCounts?null:e.layerCounts.lines.count),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("/",null==e.layerCounts?null:e.layerCounts.lines.limit,""),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](null==e.layerCounts?null:e.layerCounts.polygons.count),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("/",null==e.layerCounts?null:e.layerCounts.polygons.limit,""),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](null==e.layerCounts?null:e.layerCounts.raster.count),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("/",null==e.layerCounts?null:e.layerCounts.raster.limit,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("showCancelButton",!1))},directives:[r.v,g.l,g.k,g.Ub,g.M,gn.a,gn.c,o.d,o.f,g.s],styles:[".nb-theme-default   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-default   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-default   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-default   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-default   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-default   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-default   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-default   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-default   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-dark   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-cosmic   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#b18aff}.nb-theme-cosmic   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-cosmic   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-cosmic   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-cosmic   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-cosmic   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-cosmic   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-corporate   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-corporate   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-corporate   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-corporate   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-corporate   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-corporate   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-corporate   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-corporate   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-corporate   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-material-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#f24681}.nb-theme-material-dark   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-material-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-material-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-material-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-material-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-material-dark   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-material-light   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-light   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-light   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#903df4}.nb-theme-material-light   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-material-light   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-material-light   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-material-light   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-material-light   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-material-light   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.nb-theme-obsrio   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#669493}.nb-theme-obsrio   [_nghost-%COMP%]   .global-limits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}.nb-theme-obsrio   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.1)}.nb-theme-obsrio   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]{transition:all .5s ease-in-out;border-radius:50px 0 0 50px;border:4px solid #fff;color:#fff;background-color:#91d5e2;height:50px;margin:0;position:absolute;top:0;left:-40px;width:120%;padding:0 5px}.nb-theme-obsrio   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}.nb-theme-obsrio   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:9px}.nb-theme-obsrio   [_nghost-%COMP%]   .register-limit[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}"]}),t}();function Cn(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",21)}function xn(t,e){if(1&t&&f["\u0275\u0275element"](0,"nb-icon",22),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("icon",null==n.activeLayers?null:n.activeLayers.type)}}function wn(t,e){if(1&t&&f["\u0275\u0275element"](0,"img",23),2&t){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("src",null==n.activeLayers?null:n.activeLayers.convention,f["\u0275\u0275sanitizeUrl"])}}function In(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-card",5),f["\u0275\u0275elementStart"](1,"nb-card-header",6),f["\u0275\u0275elementStart"](2,"p"),f["\u0275\u0275text"](3,"CONVENCIONES"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",7),f["\u0275\u0275elementStart"](5,"div",8),f["\u0275\u0275namespaceSVG"](),f["\u0275\u0275elementStart"](6,"svg",9),f["\u0275\u0275element"](7,"path",10),f["\u0275\u0275element"](8,"path",11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275namespaceHTML"](),f["\u0275\u0275elementStart"](9,"nb-icon",12),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().toggleConventions()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"nb-card-body",13),f["\u0275\u0275element"](11,"ngx-layers-type-counts"),f["\u0275\u0275elementStart"](12,"div",14),f["\u0275\u0275elementStart"](13,"div",15),f["\u0275\u0275elementStart"](14,"div",16),f["\u0275\u0275elementStart"](15,"p",17),f["\u0275\u0275template"](16,Cn,1,0,"nb-icon",18),f["\u0275\u0275template"](17,xn,1,1,"ng-template",null,19,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](19,"b"),f["\u0275\u0275text"](20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](21,wn,1,1,"img",20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275reference"](18),r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](16),f["\u0275\u0275property"]("ngIf","points"==(null==r.activeLayers?null:r.activeLayers.type))("ngIfElse",i),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](null==r.activeLayers?null:r.activeLayers.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null!==(null==r.activeLayers?null:r.activeLayers.convention))}}var An=function(){function t(t,e,n){this._toastrService=t,this._glMapService=e,this._layerService=n,this.isLogged=[],this.loading=!1,this.closeConv=!0,this.state="rotated",this.index=0}return t.prototype.ngOnInit=function(){this.retrieveData()},t.prototype.retrieveData=function(){var t=this;this._glMapService.getLastClickedLayer().subscribe({next:function(e){t.closeConv=!1,"number"==typeof e?t.layers.some((function(n){if(n.id===e)return t.activeLayers=n,!0})):t.activeLayers=e},error:function(t){console.error(t)}}),this._layerService.getLayers().subscribe({next:function(e){t.layers=e},error:function(t){console.error(t)}})},t.prototype.toggleConventions=function(){this.closeConv=!this.closeConv,this.rotate()},t.prototype.rotate=function(){this.state="default"===this.state?"rotated":"default"},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](g.Rb),f["\u0275\u0275directiveInject"](v),f["\u0275\u0275directiveInject"](O))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-conventions"]],inputs:{isLogged:"isLogged"},decls:5,vars:2,consts:[["id","conventions","cdkDrag",""],["id","fab-conventions","nbTooltip","Ver Convenciones","nbTooltipStatus","primary",3,"click"],["shape","semi-round","status","control","nbButton",""],["icon","arrow-ios-forward-outline"],["style","opacity: 1; overflow:visible;    max-height: 70vh; max-width: 17em;","class","p-1",4,"ngIf"],[1,"p-1",2,"opacity","1","overflow","visible","max-height","70vh","max-width","17em"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["icon","close",3,"click"],["id","conventions-items"],[1,"example-list"],[1,"conv-item","d-flex","flex-column","example-box"],[1,"mb-1"],[1,"layer-name","mb-0"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline",4,"ngIf","ngIfElse"],["iconTypes",""],["style","margin-top:1em","width","100%","alt","Source convention",3,"src",4,"ngIf"],["nbTooltip","point","nbTooltipStatus","info","icon","pin-outline"],["pack","obs-icons",1,"obs-icons",3,"icon"],["width","100%","alt","Source convention",2,"margin-top","1em",3,"src"]],template:function(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275listener"]("click",(function(){return e.toggleConventions()})),f["\u0275\u0275elementStart"](2,"a",2),f["\u0275\u0275element"](3,"nb-icon",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,In,22,4,"nb-card",4),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("@rotatedState",e.state),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.closeConv))},directives:[fn.a,g.Ub,g.s,g.M,r.v,g.w,g.z,fn.b,g.v,_n],styles:[".nb-theme-default   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-default   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-default   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-default   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}@-webkit-keyframes fade{0%{opacity:0;right:0}to{opacity:1;right:45px}}.nb-theme-default   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-default   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-default   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-default   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-default   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-default   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-default   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-default   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-default   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-default   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-dark   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-dark   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-dark   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-dark   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-dark   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-dark   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-dark   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-cosmic   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-cosmic   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-cosmic   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-cosmic   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#b18aff}.nb-theme-cosmic   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-cosmic   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-cosmic   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-cosmic   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-cosmic   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-cosmic   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-corporate   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-corporate   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-corporate   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-corporate   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-corporate   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-corporate   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#598bff}.nb-theme-corporate   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-corporate   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #f2f8ff!important}.nb-theme-corporate   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-corporate   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-corporate   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-corporate   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-material-dark   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-material-dark   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-material-dark   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-dark   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#f24681}.nb-theme-material-dark   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-material-dark   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #ccf7fe!important}.nb-theme-material-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-material-dark   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-dark   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-material-dark   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-material-light   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-material-light   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-material-light   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}.nb-theme-material-light   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-material-light   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-material-light   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#903df4}.nb-theme-material-light   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-material-light   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #ccf7fe!important}.nb-theme-material-light   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-material-light   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-light   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-material-light   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{position:absolute;right:45px!important;top:114px;justify-content:center}.nb-theme-obsrio   [_nghost-%COMP%]   #fab-conventions[_ngcontent-%COMP%]{position:absolute;top:9px;left:-45px}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-name[_ngcontent-%COMP%]{font-size:1em;margin-bottom:.3em}.nb-theme-obsrio   [_nghost-%COMP%]   #conventions[_ngcontent-%COMP%]{opacity:0;right:0;-webkit-animation:fade 1.25s forwards;animation:fade 1.25s forwards;-webkit-animation-delay:7s;animation-delay:7s}@keyframes fade{0%{opacity:0;right:0}to{opacity:1;right:45px}}.nb-theme-obsrio   [_nghost-%COMP%]   #stats[_ngcontent-%COMP%]{margin:0 0 1em}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:0}.nb-theme-obsrio   [_nghost-%COMP%]   .stat-limit[_ngcontent-%COMP%]{font-size:.7em;top:2px;left:1px;position:relative;color:#669493}.nb-theme-obsrio   [_nghost-%COMP%]   #conventions-items[_ngcontent-%COMP%]{overflow:visible}.nb-theme-obsrio   [_nghost-%COMP%]   .conv-item[_ngcontent-%COMP%]{border-top:1px solid #e4fcfb!important}.nb-theme-obsrio   [_nghost-%COMP%]     .obs-icons svg{max-width:19px!important;margin-left:1px;padding:11px 0 0}.nb-theme-obsrio   [_nghost-%COMP%]     #surface1 path{fill:#6db9d0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .example-list[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]{cursor:move}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .example-box[_ngcontent-%COMP%]:last-child{border:none}.nb-theme-obsrio   [_nghost-%COMP%]   .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],data:{animation:[Object(hn.n)("rotatedState",[Object(hn.k)("default",Object(hn.l)({transform:"rotate(0)"})),Object(hn.k)("rotated",Object(hn.l)({transform:"rotate(-180deg)"})),Object(hn.m)("rotated => default",Object(hn.e)("300ms ease-out")),Object(hn.m)("default => rotated",Object(hn.e)("300ms ease-in"))])]}}),t}(),Pn=n("DPnb"),On=n("3Pt+"),Mn=n("tk/3"),Sn=n("3PWe"),kn=["jsonEditorContainer"],En=function t(){Object(B.a)(this,t),this.enableSort=!0,this.enableTransform=!0,this.escapeUnicode=!1,this.expandAll=!1,this.sortObjectKeys=!1,this.history=!0,this.mode="tree",this.search=!0,this.indentation=2},Ln=function(){var t=function(){function t(){Object(B.a)(this,t),this.id="angjsoneditor"+Math.floor(1e6*Math.random()),this.disabled=!1,this.isFocused=!1,this.optionsChanged=!1,this._data={},this.options=new En,this.debug=!1,this.change=new f.EventEmitter,this.jsonChange=new f.EventEmitter,this.onTouched=function(){},this.onChangeModel=function(t){}}return Object(N.a)(t,[{key:"ngOnInit",value:function(){var t=this.options;!this.optionsChanged&&this.editor&&(t=this.editor.options),!this.options.onChangeJSON&&this.jsonChange&&(this.options.onChangeJSON=this.onChangeJSON.bind(this)),!this.options.onChange&&this.change&&(this.options.onChange=this.onChange.bind(this));var e=Object.assign({},t);delete e.expandAll,this.debug&&console.log(e,this._data),this.jsonEditorContainer.nativeElement||console.error("Can't find the ElementRef reference for jsoneditor)"),"text"!==e.mode&&"code"!==e.mode||(e.onChangeJSON=null),this.editor=new Sn(this.jsonEditorContainer.nativeElement,e,this._data),this.options.expandAll&&this.editor.expandAll()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"writeValue",value:function(t){this.data=t}},{key:"registerOnChange",value:function(t){this.onChangeModel=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"onChange",value:function(t){if(this.editor)try{var e=this.editor.get();this.onChangeModel(e),this.change.emit(e)}catch(t){this.debug&&console.log(t)}}},{key:"onChangeJSON",value:function(t){if(this.editor)try{this.jsonChange.emit(this.editor.get())}catch(t){this.debug&&console.log(t)}}},{key:"collapseAll",value:function(){this.editor.collapseAll()}},{key:"expandAll",value:function(){this.editor.expandAll()}},{key:"focus",value:function(){this.editor.focus()}},{key:"get",value:function(){return this.editor.get()}},{key:"getMode",value:function(){return this.editor.getMode()}},{key:"getName",value:function(){return this.editor.getName()}},{key:"getText",value:function(){return this.editor.getText()}},{key:"set",value:function(t){this.editor.set(t)}},{key:"setMode",value:function(t){this.editor.setMode(t)}},{key:"setName",value:function(t){this.editor.setName(t)}},{key:"setSelection",value:function(t,e){this.editor.setSelection(t,e)}},{key:"getSelection",value:function(){return this.editor.getSelection()}},{key:"getValidateSchema",value:function(){return this.editor.validateSchema}},{key:"setSchema",value:function(t,e){this.editor.setSchema(t,e)}},{key:"search",value:function(t){this.editor.search(t)}},{key:"setOptions",value:function(t){this.editor&&this.editor.destroy(),this.optionsChanged=!0,this.options=t,this.ngOnInit()}},{key:"update",value:function(t){this.editor.update(t)}},{key:"destroy",value:function(){this.editor.destroy()}},{key:"isValidJson",value:function(){try{return JSON.parse(this.getText()),!0}catch(Rr){return!1}}},{key:"data",set:function(t){this._data=t,this.editor&&(this.editor.destroy(),this.ngOnInit())}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["json-editor"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](kn,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.jsonEditorContainer=n.first)},inputs:{options:"options",debug:"debug",data:"data"},outputs:{change:"change",jsonChange:"jsonChange"},features:[f["\u0275\u0275ProvidersFeature"]([{provide:On.q,useExisting:Object(f.forwardRef)((function(){return t})),multi:!0}])],decls:2,vars:1,consts:[[3,"id"],["jsonEditorContainer",""]],template:function(t,e){1&t&&f["\u0275\u0275element"](0,"div",0,1),2&t&&f["\u0275\u0275property"]("id",e.id)},encapsulation:2,changeDetection:0}),t}(),Tn=function(){var t=function(){function t(){Object(B.a)(this,t)}return Object(N.a)(t,null,[{key:"forRoot",value:function(){return{ngModule:t,providers:[]}}}]),t}();return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[r.c,On.m]]}),t}();function Rn(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-checkbox",4),f["\u0275\u0275listener"]("checkedChange",(function(t){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](2).onChange(t,e)})),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]().$implicit,r=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("checked",r.isChecked(i)),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",i.id,". ",i.name,"")}}function Nn(t,e){if(1&t&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Rn,2,3,"nb-checkbox",3),f["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.id!==i._layer.id)}}function Bn(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"h6"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div",2),f["\u0275\u0275template"](4,Nn,2,1,"ng-container",1),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](n.name),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",n.layers)}}var jn=function(){function t(t,e){this._catService=t,this._layerService=e}return t.prototype.ngOnDestroy=function(){this.cat$.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;this.cat$=this._catService.getAll().subscribe({next:function(e){t.categories=e}})},t.prototype.onChange=function(t,e){var n=this;if(t)this._layer.exclusions.push(e.id);else{var i=0;this._layer.exclusions.forEach((function(t){t!==e.id?i++:n._layer.exclusions.splice(i,1)}))}},t.prototype.updateLayerExclusions=function(){var t=this;try{this._layer.exclusions?this._layerService.updateLayerExclusions(this._layer).subscribe({next:function(e){e?t._layerService.showToast("top rigth","success","Agregado correctamente"):t._layerService.showToast("top rigth","danger","presenta errores")},error:function(e){t._layerService.showToast("top rigth","danger",e.message)}}):this._layerService.showToast("top rigth","danger","La estructura presenta errores")}catch(e){this._layerService.showToast("top rigth","danger",e)}},t.prototype.isChecked=function(t){return this._layer.exclusions.indexOf(t.id)>=0},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](k),f["\u0275\u0275directiveInject"](O))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layer-exclusions"]],inputs:{_layer:"_layer"},decls:5,vars:2,consts:[[1,"exclude"],[4,"ngFor","ngForOf"],[1,"cat-layers"],["class","ml-2",3,"checked","checkedChange",4,"ngIf"],[1,"ml-2",3,"checked","checkedChange"]],template:function(t,e){1&t&&(f["\u0275\u0275text"](0,"Selecciones las capas que no deben activarse al mismo tiempo que la capa: "),f["\u0275\u0275elementStart"](1,"b"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div",0),f["\u0275\u0275template"](4,Bn,5,2,"div",1),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](e._layer.name),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.categories))},directives:[r.u,r.v,g.B],styles:[""]}),t}(),Dn=function(){function t(t,e,n,i){this._fb=t,this._catService=e,this._toastrService=n,this._dialog=i,this.loading=!1,this.index=0}return t.prototype.ngOnInit=function(){var t,e,n,i;this.form=this._fb.group({id:[(null===(t=this._cat)||void 0===t?void 0:t.id)||""],name:[(null===(e=this._cat)||void 0===e?void 0:e.name)||"",On.F.required],public_desc:[(null===(n=this._cat)||void 0===n?void 0:n.public_desc)||"",On.F.required],state:[!0,On.F.required],category_id:[(null===(i=this._cat)||void 0===i?void 0:i.category_id)||1,On.F.required]})},t.prototype.onSubmit=function(){var t=this;this.loading=!0,this._catService.addCategory(this.form.value).subscribe({next:function(e){t.loading=!1,t.showToast("top rigth","success","Agregado correctamente"),t._dialog.close(e)},error:function(e){t.loading=!1,t.showToast("top rigth","danger",e)}})},t.prototype.close=function(){this._dialog.close()},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](On.g),f["\u0275\u0275directiveInject"](k),f["\u0275\u0275directiveInject"](g.Rb),f["\u0275\u0275directiveInject"](g.H))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-category-edit"]],inputs:{_cat:"_cat"},decls:20,vars:4,consts:[["id","category_form",3,"formGroup"],["id","category-editor","status","control",3,"nbSpinner"],[1,"d-flex","justify-content-between"],["formControlName","state","labelPosition","start"],[1,"paragraph"],[3,"category_id","selected"],["formControlName","name","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre"],["formControlName","public_desc","nbInput","","fullWidth","","placeholder","Descripci\xf3n","shape","semi-round"],["size","small","fullWidth",""],["icon","close-square-outline",3,"click"],["type","submit","icon","save-outline",1,"success",3,"disabled","click"]],template:function(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"form",0),f["\u0275\u0275elementStart"](1,"nb-card",1),f["\u0275\u0275elementStart"](2,"nb-card-header",2),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4,"Categoria"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"nb-toggle",3),f["\u0275\u0275text"](6,"Visible?"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"nb-card-body"),f["\u0275\u0275elementStart"](8,"p",4),f["\u0275\u0275text"](9,"A continuaci\xf3n puede crear una categorias y sub-categorias, en la cual puede agregar capas."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"ngx-category-select",5),f["\u0275\u0275listener"]("selected",(function(t){return e.form.get("category_id").setValue(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](11,"input",6),f["\u0275\u0275element"](12,"textarea",7),f["\u0275\u0275element"](13,"div"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"nb-card-footer"),f["\u0275\u0275elementStart"](15,"nb-actions",8),f["\u0275\u0275elementStart"](16,"nb-action",9),f["\u0275\u0275listener"]("click",(function(){return e.close()})),f["\u0275\u0275text"](17,"Cancelar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"nb-action",10),f["\u0275\u0275listener"]("click",(function(){return e.onSubmit()})),f["\u0275\u0275text"](19,"Guardar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275property"]("formGroup",e.form),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("nbSpinner",e.loading),f["\u0275\u0275advance"](9),f["\u0275\u0275property"]("category_id",e.form.get("category_id").value),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("disabled",!e.form.valid))},styles:["#category_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-default   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-default   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-dark   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-cosmic   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-cosmic   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-corporate   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-corporate   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-material-dark   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-material-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-material-light   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-material-light   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}.nb-theme-obsrio   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:500px}.nb-theme-obsrio   [_nghost-%COMP%]     nb-action.success nb-icon{color:#418e11!important}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]   #category-editor[_ngcontent-%COMP%]{width:100%}}"]}),t}();function Fn(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",13),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](),f["\u0275\u0275reference"](7).fire()})),f["\u0275\u0275element"](1,"nb-icon",14),f["\u0275\u0275elementEnd"]()}}var zn=function(){return{confirmButtonText:"Borrar"}};function Vn(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-option",3),f["\u0275\u0275elementStart"](1,"div",5),f["\u0275\u0275elementStart"](2,"div",6),f["\u0275\u0275elementStart"](3,"button",7),f["\u0275\u0275elementStart"](4,"nb-icon",8),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2).editCategory()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](5,Fn,2,0,"button",9),f["\u0275\u0275elementStart"](6,"swal",10,11),f["\u0275\u0275listener"]("confirm",(function(){f["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index;return f["\u0275\u0275nextContext"](2).deleteCategory(t,i)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"nb-user",12),f["\u0275\u0275text"](9," > "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;f["\u0275\u0275property"]("value",i.id),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngIf",(null==i.layers?null:i.layers.length)<=0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",f["\u0275\u0275pureFunction0"](7,zn)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("name",i.name)("picture",i.icon)}}function Gn(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-select",2),f["\u0275\u0275listener"]("selectedChange",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().onSelectCat(t)}))("selectedChange",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().category_id=t})),f["\u0275\u0275elementStart"](1,"nb-option",3),f["\u0275\u0275text"](2,"Ninguna"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,Vn,10,8,"nb-option",4),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("selected",i.category_id),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",0),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",i.categories)}}function Zn(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",15),f["\u0275\u0275elementStart"](1,"a",16),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().addCategory()})),f["\u0275\u0275element"](2,"nb-icon",17),f["\u0275\u0275text"](3," Categor\xeda "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}var Wn=function(){return["Manage Categories","all"]},Hn=function(){function t(t,e){this._categoryService=t,this._dialogService=e,this.selected=new f.EventEmitter,this.category_id="0",this.loading=!1,this.categories=[]}return t.prototype.ngOnInit=function(){this.retrieveData()},t.prototype.retrieveData=function(){var t=this;this.loading=!0,this._categoryService.getCategories().subscribe({next:function(e){t.loading=!1,e&&(t.categories=e)},error:function(e){t._categoryService.showToast("top rigth","danger",e)}})},t.prototype.addCategory=function(){this._dialogService.open(Dn).onClose.subscribe((function(t){}))},t.prototype.editCategory=function(t,e){t&&this._dialogService.open(Dn,{context:{_cat:t}}).onClose.subscribe((function(t){}))},t.prototype.deleteCategory=function(t,e){var n=this;this.loading=!0,this._categoryService.deleteCategory(t.id).subscribe((function(e){e?n._categoryService.showToast("top right","success","Borrado "+t.name):n._categoryService.showToast("top right","warning","No se pudo borrar "+e)}))},t.prototype.onSelectCat=function(t){this.selected.emit(t)},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](k),f["\u0275\u0275directiveInject"](g.I))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-category-select"]],inputs:{category_id:"category_id"},outputs:{selected:"selected"},decls:2,vars:4,consts:[["shape","semi-round","hero","","status","info","fullWidth","","placeholder","Seleccione Categor\xeda",3,"selected","selectedChange",4,"nbIsGranted"],["class","d-flex justify-content-end py-2 px-2 ml-1",4,"nbIsGranted"],["shape","semi-round","hero","","status","info","fullWidth","","placeholder","Seleccione Categor\xeda",3,"selected","selectedChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-start"],[1,"layer-options"],["outline","","status","info","nbButton",""],["icon","edit-2-outline","pack","eva",1,"d-flex",3,"click"],["outline","","ghost","","nbButton","",3,"click",4,"ngIf"],["title","Desea Borrar esta Categor\xeda?","text","Esta acci\xf3n no se  podr\xe1 deshacer","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],[1,"category-user",3,"name","picture"],["outline","","ghost","","nbButton","",3,"click"],["icon","trash-2-outline","pack","eva",1,"d-flex"],[1,"d-flex","justify-content-end","py-2","px-2","ml-1"],["nbButton","","shape","round","size","tiny","status","success","status","control",1,"shadow",3,"click"],["icon","plus-outline"]],template:function(t,e){1&t&&(f["\u0275\u0275template"](0,Gn,4,3,"nb-select",0),f["\u0275\u0275template"](1,Zn,4,0,"div",1)),2&t&&(f["\u0275\u0275property"]("nbIsGranted",f["\u0275\u0275pureFunction0"](2,Wn)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("nbIsGranted",f["\u0275\u0275pureFunction0"](3,Wn)))},directives:[m.c,g.vb,g.ib,r.u,g.s,g.M,r.v,gn.a,g.Xb],styles:[""]}),t}(),Un=n("kvL/"),$n=n("DqeK"),Kn=["swalComp"],Xn=["exclusionsComp"];function Yn(t,e){1&t&&f["\u0275\u0275text"](0,"Tipo de Fuente")}function qn(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",52)}function Jn(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",53)}var Qn=function(t){return{"layer-option-selected":t}};function ti(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-card",43),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=e.$implicit;return f["\u0275\u0275nextContext"]().setSourceType(t.type)})),f["\u0275\u0275elementStart"](1,"nb-card-body",44),f["\u0275\u0275elementStart"](2,"div",45),f["\u0275\u0275element"](3,"img",46),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",47),f["\u0275\u0275elementStart"](5,"h2",48),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](7,qn,1,0,"nb-icon",49),f["\u0275\u0275template"](8,Jn,1,0,"nb-icon",50),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](9,"p",51),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](6,Qn,r.isSelected(i.type))),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("src",i.img,f["\u0275\u0275sanitizeUrl"]),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",i.title,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",r.isSelected(i.type)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!r.isSelected(i.type)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",i.desc,f["\u0275\u0275sanitizeHtml"])}}function ei(t,e){1&t&&f["\u0275\u0275text"](0,"Informaci\xf3n")}function ni(t,e){1&t&&f["\u0275\u0275text"](0,"Tipo")}function ii(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"nb-radio",54),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;f["\u0275\u0275property"]("value",n.value),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function ri(t,e){1&t&&f["\u0275\u0275text"](0,"Guardar")}function oi(t,e){if(1&t&&f["\u0275\u0275element"](0,"nb-progress-bar",54),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("value",n.progress)}}function ai(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",55),f["\u0275\u0275text"](1," Actual: "),f["\u0275\u0275element"](2,"img",56),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("src",n._layer.convention,f["\u0275\u0275sanitizeUrl"])}}function si(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",57),f["\u0275\u0275listener"]("removed",(function(){f["\u0275\u0275restoreView"](n);var t=e.$implicit;return f["\u0275\u0275nextContext"]().onRemoveFileConvention(t)})),f["\u0275\u0275element"](1,"ngx-dropzone-label"),f["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;f["\u0275\u0275property"]("removable",!0)("file",i)}}function ci(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-tab",58),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275elementStart"](2,"p"),f["\u0275\u0275text"](3," MapBox Styles Guide: "),f["\u0275\u0275elementStart"](4,"strong"),f["\u0275\u0275elementStart"](5,"a",59),f["\u0275\u0275text"](6," MBStyle "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](7,". "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"json-editor",60),f["\u0275\u0275listener"]("change",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().updateMap(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("options",i.editorOptions)}}function li(t,e){if(1&t&&f["\u0275\u0275element"](0,"nb-progress-bar",54),2&t){var n=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("value",n.progress)}}function ui(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ngx-dropzone-preview",67),f["\u0275\u0275listener"]("removed",(function(){f["\u0275\u0275restoreView"](n);var t=e.$implicit;return f["\u0275\u0275nextContext"](3).onRemoveFile(t)})),f["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),f["\u0275\u0275element"](2,"nb-icon",68),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;f["\u0275\u0275property"]("removable",!0),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",i.name," ")}}function hi(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275template"](1,li,1,1,"nb-progress-bar",31),f["\u0275\u0275elementStart"](2,"ngx-dropzone",65),f["\u0275\u0275listener"]("change",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2).onSelectFile(t)})),f["\u0275\u0275elementStart"](3,"ngx-dropzone-label"),f["\u0275\u0275element"](4,"nb-icon",34),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,ui,4,2,"ngx-dropzone-preview",66),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",i.progress>0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("multiple",!1)("accept",i.acceptedFiles),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" Agrega el Archivo de tipo: ",i.acceptedFiles," "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",i.files)}}function di(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"h3",48),f["\u0275\u0275text"](2,"Ingresa la url que contiene el Archivo"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"input",69),f["\u0275\u0275elementEnd"]())}function pi(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"h3",48),f["\u0275\u0275text"](2,"Ingresa la url de la API REST"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"input",69),f["\u0275\u0275elementEnd"]())}function fi(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"h3",48),f["\u0275\u0275text"](2,"Selecciona una tip\xf3 de estaci\xf3n"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nb-card",70),f["\u0275\u0275elementStart"](4,"ngx-stations-group-select",71),f["\u0275\u0275listener"]("selected",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2).stations_group=t})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("group",i.stations_group)}}function gi(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"div",72),f["\u0275\u0275elementStart"](1,"h3",48),f["\u0275\u0275text"](2,"Selecciona una Opci\xf3n"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function mi(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",61),f["\u0275\u0275template"](1,hi,7,5,"div",62),f["\u0275\u0275template"](2,di,4,0,"div",63),f["\u0275\u0275template"](3,pi,4,0,"div",63),f["\u0275\u0275template"](4,fi,5,1,"div",63),f["\u0275\u0275template"](5,gi,3,0,"div",64),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("nbSpinner",n.loading)("ngSwitch",n.form.get("sourceType").value),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngSwitchCase","url"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngSwitchCase","api"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngSwitchCase","stations"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngSwitchCase","")}}function vi(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-action",73),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().checkSubmit()})),f["\u0275\u0275text"](1,"Guardar"),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("disabled",!i.form.valid||i.loading)}}function yi(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-action"),f["\u0275\u0275elementStart"](1,"button",74),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().updateLayerStyle()})),f["\u0275\u0275element"](2,"nb-icon",75),f["\u0275\u0275text"](3," Guardar Estilos "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function bi(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-action"),f["\u0275\u0275elementStart"](1,"button",76),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().updateLayerExclusions()})),f["\u0275\u0275element"](2,"nb-icon",75),f["\u0275\u0275text"](3," Guardar Exclusiones "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}var _i=function(t){return{hide_tabs:t}},Ci=function(){return{confirmButtonText:"Continuar, Agregar Capa"}},xi=function(){function t(t,e,n,i,r){var o=this;this._fb=t,this._toastrService=e,this._layerService=n,this._dialog=i,this._glMapService=r,this._layer=null,this.stations_group="",this.options=[{value:"points",label:"Puntos"},{value:"lines",label:"Lineas"},{value:"polygons",label:"Polygonos"},{value:"raster",label:"Raster"}],this.file_types=[{title:"Raster",type:"raster",desc:"Archivo tiff o rar que contenga informaci\xf3n sobre la capa.",img:"assets/img/icons/raster.png",acceptedFiles:".zip,.rar"},{title:"Shape",type:"shape",desc:"Archivo rar que contenga todos los archivos relacionados al shape",img:"assets/img/icons/shape.png",acceptedFiles:".zip,.rar"},{title:"Estaci\xf3nes",type:"stations",desc:"Agrupa las estaciones creadas en la plataforma",img:"assets/img/icons/stations.png",acceptedFiles:""},{title:"Geojson",type:"geojson",desc:"Archivo que contenga informaci\xf3n en formato Geojson, ejemplos en <a href='http://geojson.xyz/' target='_blank'>geojson.xyz</a>",img:"assets/img/icons/geojson.png",acceptedFiles:".geojson"},{title:"URL",type:"url",desc:"<b>URL</b> que contenga informaci\xf3n en formato Geojson, ejemplos en <a href='http://geojson.xyz/' target='_blank'>geojson.xyz</a>",img:"assets/img/icons/url.png",acceptedFiles:""},{title:"API",type:"api",desc:"API de libre acceso o con credenciales, que contenga minimo: Lat, Lon",img:"assets/img/icons/api.png",acceptedFiles:""}],this.loading=!1,this.tab="layers",this.category_id=null,this.files=[],this.filesConv=[],this.acceptedFiles="*",this.showDocBox=!0,this.index=0,r.getMap().subscribe({next:function(t){o.gl_map=t}})}return t.prototype.ngOnInit=function(){var t,e,n,i,r,o,a,s,c,l,u,h,d,p=(null===(t=this._layer)||void 0===t?void 0:t.glLayers)?JSON.parse(this._layer.glLayers):{};this.form=this._fb.group({id:[(null===(e=this._layer)||void 0===e?void 0:e.id)||""],category_id:[(null===(i=null===(n=this._layer)||void 0===n?void 0:n.category)||void 0===i?void 0:i.id)||this.category_id,On.F.required],state:[(null===(r=this._layer)||void 0===r?void 0:r.state)||!0,On.F.required],name:[(null===(o=this._layer)||void 0===o?void 0:o.name)||"",On.F.required],desc:[(null===(a=this._layer)||void 0===a?void 0:a.desc)||"",On.F.required],type:[(null===(s=this._layer)||void 0===s?void 0:s.type)||"points",On.F.required],sourceType:[(null===(c=this._layer)||void 0===c?void 0:c.sourceType)||"",On.F.required],source:[(null===(l=this._layer)||void 0===l?void 0:l.source)||""],glSource:[(null===(u=this._layer)||void 0===u?void 0:u.glSource)||""],glLayer:[p||null],file:[(null===(h=this._layer)||void 0===h?void 0:h.file)||""]}),"stations"==(null===(d=this._layer)||void 0===d?void 0:d.sourceType)&&(this.stations_group=this._layer.source),this.editorOptions=new En,this.editorOptions.modes=["code"],this.editorOptions.mode="code"},t.prototype.isValidSubmit=function(){try{if(this.form.valid)return!0}catch(t){return!1}return!1},t.prototype.checkSubmit=function(){0===this.filesConv.length?this.swalComp.fire():this.onSubmit()},t.prototype.updateLayerExclusions=function(){this.exclusionsComp.updateLayerExclusions()},t.prototype.changeTab=function(t){this.tab=t.tabTitle},t.prototype.updateLayerStyle=function(){var t=this;try{this.editor.isValidJson()?(this._layer.glLayers=JSON.stringify(this.form.get("glLayer").value),this._layerService.updateStyleLayer(this._layer).subscribe({next:function(e){e?(t.showToast("top rigth","success","Agregado correctamente"),JSON.parse(e.glLayers).map((function(e){t.gl_map.removeLayer(e.id),t.gl_map.addLayer(e)}))):t.showToast("top rigth","danger","presenta errores")},error:function(e){t.showToast("top rigth","danger",e.message)}})):this.showToast("top rigth","danger","La estructura presenta errores")}catch(e){this.showToast("top rigth","danger",e)}},t.prototype.updateMap=function(t){var e=this;this.form.get("glLayer").value.map((function(t){e.gl_map.removeLayer(t.id),e.gl_map.addLayer(t)}))},t.prototype.resetStyleEdit=function(){var t=this;JSON.parse(this._layer.glLayers).map((function(e){t.gl_map.removeLayer(e.id),t.gl_map.addLayer(e)}))},t.prototype.onSubmit=function(){var t=this;if(this.isValidSubmit()){var e=this.toFormData(this.form);this.files.length>0&&e.append("file",this.files[0]),this.filesConv.length>0&&e.append("fileConv",this.filesConv[0]),"stations"===e.get("sourceType")&&e.append("stations_group",this.stations_group),this.loading=!0,this._layerService.addLayer(e).subscribe({next:function(e){e.type===Mn.e.UploadProgress&&(t.progress=Math.round(100*e.loaded/e.total)),e.type===Mn.e.Response&&(t.form.reset(),t.showToast("top rigth","success","Agregado correctamente"),t._dialog.close(e.body.layer),t.loading=!1,t.progress=0,location.reload())},error:function(e){t.showToast("top rigth","danger",e),t.loading=!1,t.progress=0}})}else alert("Debe llenar los campos obligatorios.")},t.prototype.toFormData=function(t){for(var e=new FormData,n=t.value,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];e.append(o,n[o])}return e},t.prototype.setSourceType=function(t){this.form.get("sourceType").setValue(t),"geojson"===t&&(this.acceptedFiles=".geojson"),"raster"!==t&&"shape"!==t||(this.acceptedFiles=".zip,.rar"),this.showDocBox=!0},t.prototype.isSelected=function(t){return t===this.form.get("sourceType").value},t.prototype.close=function(){this._dialog.close()},t.prototype.onSelectFile=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.prototype.onRemoveFile=function(t){this.files.splice(this.files.indexOf(t),1),this.form.patchValue({source:""})},t.prototype.onSelectConvention=function(t){var e;(e=this.filesConv).push.apply(e,t.addedFiles)},t.prototype.onRemoveFileConvention=function(t){this.filesConv.splice(this.filesConv.indexOf(t),1),this.form.patchValue({sourceConv:""})},t.prototype.readFile=function(t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return[2,new Promise((function(e,n){var i=new FileReader;if(i.onload=function(t){return e(t.target.result)},i.onerror=function(e){return console.error("FileReader failed on file "+t.name+"."),n(null)},!t)return console.error("No file to read."),n(null);i.readAsDataURL(t)}))]}))}))},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](On.g),f["\u0275\u0275directiveInject"](g.Rb),f["\u0275\u0275directiveInject"](O),f["\u0275\u0275directiveInject"](g.H),f["\u0275\u0275directiveInject"](v))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layer-edit"]],viewQuery:function(t,e){var n;1&t&&(f["\u0275\u0275viewQuery"](Kn,!0),f["\u0275\u0275viewQuery"](Xn,!0),f["\u0275\u0275viewQuery"](Ln,!0)),2&t&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.swalComp=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.exclusionsComp=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.editor=n.first))},inputs:{_layer:"_layer"},decls:78,vars:25,consts:[["id","layers_form","cdkDrag","",3,"formGroup"],["id","edit-layer-card","accent","info","status","info",1,"shadow"],[1,"d-flex","justify-content-between","info"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["formControlName","state","labelPosition","start"],["icon","close-square-outline",3,"click"],["fullWidth","",1,"layer-edit-tab",3,"ngClass","changeTab"],["tabTitle","Layer","tabIcon","options-outline","responsive",""],["orientation","horizontal",1,"col-sm-12"],[3,"label"],["labelTrhee",""],["name","type","status","info",1,"layer-options","d-flex","flex-wrap","justify-content-center","pt-4","mt-0"],["class","shadow-sm layer-option align-self-center ml-3","nbButton","",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","step-cont","rol-btn"],["nbButton","","nbStepperNext","",3,"click"],["labelOne",""],[3,"category_id","selected"],["formControlName","name","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre",1,"mt-2"],["formControlName","desc","nbInput","","fullWidth","","placeholder","Descripci\xf3n","shape","semi-round",1,"mt-2"],[1,"row","d-flex","justify-content-end","step-control-btn"],["nbButton","","nbStepperPrevious",""],["nbButton","","nbStepperNext",""],["labelTwo",""],[1,"d-flex","flex-wrap","justify-content-center","m-3"],["formControlName","type",1,"row","mx-0","justify-content-between"],[3,"value",4,"ngFor","ngForOf"],["labelFour",""],["nbSpinnerStatus","danger",1,"selected-option",3,"nbSpinner"],[3,"value",4,"ngIf"],["class","col-sm-12",4,"ngIf"],["accept","image/*",3,"multiple","change"],["icon","cloud-upload"],["class","mt-2","ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["tabTitle","Estilos","tabIcon","color-palette-outline","responsive","",4,"ngIf"],["class","selected-option","nbSpinnerStatus","danger",3,"nbSpinner","ngSwitch",4,"ngIf"],["size","small","fullWidth",""],["type","submit","class","success","icon","save-outline",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["title","Desea agregar esta capa sin convenci\xf3nes?","text","Las podr\xe1 agregar posteriormente.","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],["nbButton","",1,"shadow-sm","layer-option","align-self-center","ml-3",3,"ngClass","click"],[1,"d-flex","flex-column"],[1,"radio-image","d-flex","justify-content-center","shadow-sm"],[3,"src"],[1,"d-flex","justify-content-between"],[1,"subtitle"],["icon","checkmark-circle-outline",4,"ngIf"],["icon","radio-button-off-outline",4,"ngIf"],[1,"paragraph",3,"innerHTML"],["icon","checkmark-circle-outline"],["icon","radio-button-off-outline"],[3,"value"],[1,"col-sm-12"],["width","150","alt","convecion",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],1,"mt-2",3,"removable","file","removed"],["tabTitle","Estilos","tabIcon","color-palette-outline","responsive",""],["href","https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/","target","_blank"],["formControlName","glLayer",1,"col-md-12",2,"width","600px","height","600px",3,"options","change"],["nbSpinnerStatus","danger",1,"selected-option",3,"nbSpinner","ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["class","d-flex justify-content-center",4,"ngSwitchCase"],[3,"multiple","accept","change"],["class","mt-2",3,"removable","removed",4,"ngFor","ngForOf"],[1,"mt-2",3,"removable","removed"],["icon","file-text"],["formControlName","source","type","text","nbInput","","fullWidth","","shape","semi-round","placeholder","Nombre"],[1,"d-flex","justify-content-center","m-0"],[3,"group","selected"],[1,"d-flex","justify-content-center"],["type","submit","icon","save-outline",1,"success",3,"disabled","click"],["hero","","fullWidth","","nbButton","","type","submit","status","info",3,"click"],["icon","sync-outline"],["hero","","fullWidth","","nbButton","","type","submit","status","success",3,"click"]],template:function(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"form",0),f["\u0275\u0275elementStart"](1,"nb-card",1),f["\u0275\u0275elementStart"](2,"nb-card-header",2),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4,"Agregar Capa "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"nb-actions"),f["\u0275\u0275elementStart"](6,"nb-action"),f["\u0275\u0275elementStart"](7,"div",3),f["\u0275\u0275namespaceSVG"](),f["\u0275\u0275elementStart"](8,"svg",4),f["\u0275\u0275element"](9,"path",5),f["\u0275\u0275element"](10,"path",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275namespaceHTML"](),f["\u0275\u0275elementStart"](11,"nb-action"),f["\u0275\u0275elementStart"](12,"nb-toggle",7),f["\u0275\u0275text"](13,"Visible?"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"nb-action",8),f["\u0275\u0275listener"]("click",(function(){return e.close()})),f["\u0275\u0275text"](15,"Cancelar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"nb-card-body"),f["\u0275\u0275elementStart"](17,"nb-tabset",9),f["\u0275\u0275listener"]("changeTab",(function(t){return e.changeTab(t)})),f["\u0275\u0275elementStart"](18,"nb-tab",10),f["\u0275\u0275elementStart"](19,"nb-stepper",11),f["\u0275\u0275elementStart"](20,"nb-step",12),f["\u0275\u0275template"](21,Yn,1,0,"ng-template",null,13,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](23,"div",14),f["\u0275\u0275template"](24,ti,10,8,"nb-card",15),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"div",16),f["\u0275\u0275elementStart"](26,"button",17),f["\u0275\u0275listener"]("click",(function(){return e.showDocBox=!1})),f["\u0275\u0275text"](27,"Siguiente"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](28,"nb-step",12),f["\u0275\u0275template"](29,ei,1,0,"ng-template",null,18,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](31,"ngx-category-select",19),f["\u0275\u0275listener"]("selected",(function(t){return e.form.get("category_id").setValue(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](32,"input",20),f["\u0275\u0275element"](33,"textarea",21),f["\u0275\u0275elementStart"](34,"div",22),f["\u0275\u0275elementStart"](35,"button",23),f["\u0275\u0275text"](36,"Atr\xe1s"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](37,"button",24),f["\u0275\u0275text"](38,"Siguiente"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](39,"nb-step",12),f["\u0275\u0275template"](40,ni,1,0,"ng-template",null,25,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](42,"p"),f["\u0275\u0275text"](43,"Tipo:"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](44,"div",26),f["\u0275\u0275elementStart"](45,"nb-radio-group",27),f["\u0275\u0275template"](46,ii,2,2,"nb-radio",28),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](47,"div",22),f["\u0275\u0275elementStart"](48,"button",23),f["\u0275\u0275text"](49,"Atr\xe1s"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](50,"button",24),f["\u0275\u0275text"](51,"Siguiente"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](52,"nb-step",12),f["\u0275\u0275template"](53,ri,1,0,"ng-template",null,29,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementStart"](55,"p"),f["\u0275\u0275text"](56,"Convenci\xf3nes de la capa"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](57,"div",30),f["\u0275\u0275elementStart"](58,"div"),f["\u0275\u0275template"](59,oi,1,1,"nb-progress-bar",31),f["\u0275\u0275template"](60,ai,3,1,"div",32),f["\u0275\u0275elementStart"](61,"ngx-dropzone",33),f["\u0275\u0275listener"]("change",(function(t){return e.onSelectConvention(t)})),f["\u0275\u0275elementStart"](62,"ngx-dropzone-label"),f["\u0275\u0275element"](63,"nb-icon",34),f["\u0275\u0275text"](64," Agrega una Imagen que contenga las convenciones de la capa "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](65,si,2,2,"ngx-dropzone-image-preview",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](66,"div",22),f["\u0275\u0275elementStart"](67,"button",23),f["\u0275\u0275text"](68,"Atr\xe1s"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](69,ci,9,1,"nb-tab",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](70,"nb-card-footer"),f["\u0275\u0275template"](71,mi,6,6,"div",37),f["\u0275\u0275elementStart"](72,"nb-actions",38),f["\u0275\u0275template"](73,vi,2,1,"nb-action",39),f["\u0275\u0275template"](74,yi,4,0,"nb-action",40),f["\u0275\u0275template"](75,bi,4,0,"nb-action",40),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](76,"swal",41,42),f["\u0275\u0275listener"]("confirm",(function(){return e.onSubmit()})),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275reference"](22),i=f["\u0275\u0275reference"](30),r=f["\u0275\u0275reference"](41),o=f["\u0275\u0275reference"](54);f["\u0275\u0275property"]("formGroup",e.form),f["\u0275\u0275advance"](17),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](22,_i,null===e._layer)),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("label",n),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngForOf",e.file_types),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("label",i),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("category_id",e.form.get("category_id").value),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("label",r),f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("ngForOf",e.options),f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("label",o),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("nbSpinner",e.loading),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.progress>0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==e._layer?null:e._layer.convention),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("multiple",!1),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngForOf",e.filesConv),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",e._layer),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.showDocBox),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf","Layer"==e.tab||"Convenci\xf3nes"==e.tab),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","Estilos"==e.tab),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","Exclusi\xf3nes"==e.tab),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",f["\u0275\u0275pureFunction0"](24,Ci))}},directives:[On.H,On.t,fn.a,On.k,g.w,g.z,g.l,g.k,fn.b,g.Sb,On.s,On.j,g.v,g.Mb,r.s,g.Lb,g.Fb,g.Eb,r.u,g.s,g.Hb,Hn,On.c,g.Q,g.Ib,g.rb,g.Cb,r.v,Un.a,Un.g,g.M,g.x,gn.a,g.qb,g.ob,Un.b,Ln,r.z,r.B,r.A,Un.d,$n.a],styles:['.jsoneditor[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:auto;border:none;box-shadow:none}.jsoneditor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:auto}.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0;display:table-cell;text-align:left;vertical-align:inherit;border-radius:inherit}.jsoneditor[_ngcontent-%COMP%]{color:#1a1a1a;border:thin solid #3883fa;box-sizing:border-box;width:100%;height:100%;position:relative;padding:0;line-height:100%}div.jsoneditor-default[_ngcontent-%COMP%], div.jsoneditor-field[_ngcontent-%COMP%], div.jsoneditor-readonly[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%]{border:1px solid transparent;min-height:16px;min-width:32px;padding:2px;margin:1px;word-wrap:break-word;float:left}div.jsoneditor-field[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}div.jsoneditor-value[_ngcontent-%COMP%]{word-break:break-word}div.jsoneditor-value.jsoneditor-empty[_ngcontent-%COMP%]:after{content:"value"}div.jsoneditor-value.jsoneditor-string[_ngcontent-%COMP%]{color:#006000}div.jsoneditor-value.jsoneditor-number[_ngcontent-%COMP%]{color:#ee422e}div.jsoneditor-value.jsoneditor-boolean[_ngcontent-%COMP%]{color:#ff8c00}div.jsoneditor-value.jsoneditor-null[_ngcontent-%COMP%]{color:#004ed0}div.jsoneditor-value.jsoneditor-invalid[_ngcontent-%COMP%]{color:#000}div.jsoneditor-readonly[_ngcontent-%COMP%]{min-width:16px;color:grey}div.jsoneditor-empty[_ngcontent-%COMP%]{border-color:#d3d3d3;border-style:dashed;border-radius:2px}div.jsoneditor-field.jsoneditor-empty[_ngcontent-%COMP%]:after{content:"field"}div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}div.jsoneditor[_ngcontent-%COMP%]   td.jsoneditor-separator[_ngcontent-%COMP%]{padding:3px 0;vertical-align:top;color:grey}div.jsoneditor[_ngcontent-%COMP%]   td.jsoneditor-tree[_ngcontent-%COMP%]{vertical-align:top}div.jsoneditor[_ngcontent-%COMP%]   div.jsoneditor-anchor[_ngcontent-%COMP%]{cursor:pointer}div.jsoneditor[_ngcontent-%COMP%]   div.jsoneditor-anchor[_ngcontent-%COMP%]   .picker_wrapper.popup.popup_bottom[_ngcontent-%COMP%]{top:28px;left:-10px}div.jsoneditor.busy[_ngcontent-%COMP%]   pre.jsoneditor-preview[_ngcontent-%COMP%]{background:#f5f5f5;color:grey}div.jsoneditor.busy[_ngcontent-%COMP%]   div.jsoneditor-busy[_ngcontent-%COMP%]{display:inherit}div.jsoneditor[_ngcontent-%COMP%]   code.jsoneditor-preview[_ngcontent-%COMP%]{background:0 0}div.jsoneditor.jsoneditor-mode-preview[_ngcontent-%COMP%]   pre.jsoneditor-preview[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;overflow:auto;padding:2px;margin:0;white-space:pre-wrap;word-break:break-all}div.jsoneditor-default[_ngcontent-%COMP%]{color:grey;padding-left:10px}div.jsoneditor-tree[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-button[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;margin:0;border:none;cursor:pointer;background:transparent url(jsoneditor-icons.15f2789dd231f36d43a4.svg)}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-button[_ngcontent-%COMP%]:focus{background-color:#f5f5f5;outline:1px solid #e5e5e5}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-collapsed[_ngcontent-%COMP%]{background-position:0 -48px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-expanded[_ngcontent-%COMP%]{background-position:0 -72px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]{background-position:-48px -72px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-invisible[_ngcontent-%COMP%]{visibility:hidden;background:0 0}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -72px -72px;cursor:move}div.jsoneditor-tree[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:0}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]{display:inline-block;padding:3px 4px;margin:2px 0;background-color:#e5e5e5;border-radius:3px;color:grey;font-family:arial,sans-serif;font-size:10pt}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:grey}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-color[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;margin:4px;border:1px solid grey;cursor:pointer}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-date[_ngcontent-%COMP%]{background:#a1a1a1;color:#fff;font-family:arial,sans-serif;border-radius:3px;display:inline-block;padding:3px;margin:0 3px}div.jsoneditor-tree[_ngcontent-%COMP%]   table.jsoneditor-tree[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0;width:100%}div.jsoneditor-tree[_ngcontent-%COMP%]   .jsoneditor-button.jsoneditor-schema-error[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;margin:0 4px 0 0;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px}div.jsoneditor-outer[_ngcontent-%COMP%]{position:static;width:100%;height:100%;margin:0;padding:0;box-sizing:border-box}div.jsoneditor-outer.has-nav-bar[_ngcontent-%COMP%]{margin-top:-26px;padding-top:26px}div.jsoneditor-outer.has-nav-bar.has-main-menu-bar[_ngcontent-%COMP%]{margin-top:-61px;padding-top:61px}div.jsoneditor-outer.has-status-bar[_ngcontent-%COMP%]{margin-bottom:-26px;padding-bottom:26px}div.jsoneditor-outer.has-main-menu-bar[_ngcontent-%COMP%]{margin-top:-35px;padding-top:35px}div.jsoneditor-busy[_ngcontent-%COMP%]{position:absolute;top:15%;left:0;box-sizing:border-box;width:100%;text-align:center;display:none}div.jsoneditor-busy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#ffffab;border:1px solid #fe0;border-radius:3px;padding:5px 15px;box-shadow:0 0 5px rgba(0,0,0,.4)}div.jsoneditor-field.jsoneditor-empty[_ngcontent-%COMP%]:after, div.jsoneditor-value.jsoneditor-empty[_ngcontent-%COMP%]:after{pointer-events:none;color:#d3d3d3;font-size:8pt}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]{color:#006000;text-decoration:underline}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]{display:inline-block;padding:2px;margin:2px}a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]:focus, a.jsoneditor-value.jsoneditor-url[_ngcontent-%COMP%]:hover{color:#ee422e}div.jsoneditor-field.jsoneditor-highlight[_ngcontent-%COMP%], div.jsoneditor-field[contenteditable=true][_ngcontent-%COMP%]:focus, div.jsoneditor-field[contenteditable=true][_ngcontent-%COMP%]:hover, div.jsoneditor-value.jsoneditor-highlight[_ngcontent-%COMP%], div.jsoneditor-value[contenteditable=true][_ngcontent-%COMP%]:focus, div.jsoneditor-value[contenteditable=true][_ngcontent-%COMP%]:hover{background-color:#ffffab;border:1px solid #fe0;border-radius:2px}div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%], div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%]:focus, div.jsoneditor-field.jsoneditor-highlight-active[_ngcontent-%COMP%]:hover, div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%]:focus, div.jsoneditor-value.jsoneditor-highlight-active[_ngcontent-%COMP%]:hover{background-color:#fe0;border:1px solid #ffc700;border-radius:2px}div.jsoneditor-value.jsoneditor-array[_ngcontent-%COMP%], div.jsoneditor-value.jsoneditor-object[_ngcontent-%COMP%]{min-width:16px}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button.jsoneditor-selected[_ngcontent-%COMP%], div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]:hover, tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%]{background-position:-48px -48px}div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   div.jsoneditor-show-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ee422e}.ace-jsoneditor[_ngcontent-%COMP%], textarea.jsoneditor-text[_ngcontent-%COMP%]{min-height:150px}textarea.jsoneditor-text[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;box-sizing:border-box;outline-width:0;border:none;background-color:#fff;resize:none}tr.jsoneditor-highlight[_ngcontent-%COMP%], tr.jsoneditor-selected[_ngcontent-%COMP%]{background-color:#d3d3d3}tr.jsoneditor-selected[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%], tr.jsoneditor-selected[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{visibility:hidden}tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-contextmenu-button[_ngcontent-%COMP%], tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{visibility:visible}div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]:focus, div.jsoneditor-tree[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]:hover, tr.jsoneditor-selected.jsoneditor-first[_ngcontent-%COMP%]   button.jsoneditor-dragarea[_ngcontent-%COMP%]{background-position:-72px -48px}div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;margin:0}.jsoneditor-popover[_ngcontent-%COMP%], .jsoneditor-schema-error[_ngcontent-%COMP%], div.jsoneditor-field[_ngcontent-%COMP%], div.jsoneditor-value[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], div.jsoneditor[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], pre.jsoneditor-preview[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt;color:#1a1a1a}.jsoneditor-schema-error[_ngcontent-%COMP%]{cursor:default;display:inline-block;height:24px;line-height:24px;position:relative;text-align:center;width:24px}.jsoneditor-popover[_ngcontent-%COMP%]{background-color:#4c4c4c;border-radius:3px;box-shadow:0 0 5px rgba(0,0,0,.4);color:#fff;padding:7px 10px;position:absolute;cursor:auto;width:200px}.jsoneditor-popover.jsoneditor-above[_ngcontent-%COMP%]{bottom:32px;left:-98px}.jsoneditor-popover.jsoneditor-above[_ngcontent-%COMP%]:before{border-top:7px solid #4c4c4c;bottom:-7px}.jsoneditor-popover.jsoneditor-below[_ngcontent-%COMP%]{top:32px;left:-98px}.jsoneditor-popover.jsoneditor-below[_ngcontent-%COMP%]:before{border-bottom:7px solid #4c4c4c;top:-7px}.jsoneditor-popover.jsoneditor-left[_ngcontent-%COMP%]{top:-7px;right:32px}.jsoneditor-popover.jsoneditor-left[_ngcontent-%COMP%]:before{border-left:7px solid #4c4c4c;border-top:7px solid transparent;border-bottom:7px solid transparent;content:"";top:19px;right:-14px;left:inherit;margin-left:inherit;margin-top:-7px;position:absolute}.jsoneditor-popover.jsoneditor-right[_ngcontent-%COMP%]{top:-7px;left:32px}.jsoneditor-popover.jsoneditor-right[_ngcontent-%COMP%]:before{border-right:7px solid #4c4c4c;border-top:7px solid transparent;border-bottom:7px solid transparent;content:"";top:19px;left:-14px;margin-left:inherit;margin-top:-7px;position:absolute}.jsoneditor-popover[_ngcontent-%COMP%]:before{border-right:7px solid transparent;border-left:7px solid transparent;content:"";display:block;left:50%;margin-left:-7px;position:absolute}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr.jump-to-line[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.jsoneditor-schema-error[_ngcontent-%COMP%]:focus   .jsoneditor-popover[_ngcontent-%COMP%], .jsoneditor-schema-error[_ngcontent-%COMP%]:hover   .jsoneditor-popover[_ngcontent-%COMP%]{display:block;-webkit-animation:fade-in .3s linear 1,move-up .3s linear 1;animation:fade-in .3s linear 1,move-up .3s linear 1}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-validation-errors-container[_ngcontent-%COMP%]{max-height:130px;overflow-y:auto}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-validation-errors[_ngcontent-%COMP%]{width:100%;overflow:hidden}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors[_ngcontent-%COMP%]{position:absolute;margin:auto;bottom:31px;left:calc(50% - 92px);color:grey;background-color:#ebebeb;padding:7px 15px;border-radius:8px}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:opacity 2s linear}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-additional-errors.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s 2s,opacity 2s linear}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-top:1px solid #ffc700}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 6px;vertical-align:middle}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;white-space:normal}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#ffffab}.jsoneditor[_ngcontent-%COMP%]   .jsoneditor-text-errors[_ngcontent-%COMP%]   tr.parse-error[_ngcontent-%COMP%]{background-color:rgba(238,46,46,.4392156862745098)}.jsoneditor-text-errors[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{border:none;width:24px;height:24px;padding:0;margin:0 4px 0 0;cursor:pointer}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px}.jsoneditor-text-errors[_ngcontent-%COMP%]   tr.parse-error[_ngcontent-%COMP%]   .jsoneditor-schema-error[_ngcontent-%COMP%]{background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -25px 0}.fadein[_ngcontent-%COMP%]{-webkit-animation:fadein .3s;animation:fadein .3s;-moz-animation:fadein .3s;-o-animation:fadein .3s}@-webkit-keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes fadein{0%{opacity:0}to{opacity:1}}.jsoneditor-contextmenu-root[_ngcontent-%COMP%]{position:relative;width:0;height:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]{position:absolute;box-sizing:content-box;z-index:1}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]{position:relative;left:0;top:0;width:128px;height:auto;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);list-style:none;margin:0;padding:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:0 4px 0 0;margin:0;width:128px;height:auto;border:none;cursor:pointer;color:#4d4d4d;background:0 0;font-size:10pt;font-family:arial,sans-serif;box-sizing:border-box;text-align:left}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{padding:0;border:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button.jsoneditor-default[_ngcontent-%COMP%]{width:96px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button.jsoneditor-expand[_ngcontent-%COMP%]{float:right;width:32px;height:24px;border-left:1px solid #e5e5e5}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{overflow:hidden}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;position:relative;left:-10px;top:0;border:none;box-shadow:inset 0 0 10px hsla(0,0%,50.2%,.5);padding:0 10px;transition:all .3s ease-out}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{margin-left:24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-left:24px;-webkit-animation:all 1s ease-in-out;animation:all 1s ease-in-out}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .jsoneditor-expand[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:24px;height:24px;padding:0;margin:0 4px 0 0;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) 0 -72px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:24px;height:24px;border:none;padding:0;margin:0;background-image:url(jsoneditor-icons.15f2789dd231f36d43a4.svg)}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-text[_ngcontent-%COMP%]{padding:4px 0 4px 24px;word-wrap:break-word}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-text.jsoneditor-right-margin[_ngcontent-%COMP%]{padding-right:24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-separator[_ngcontent-%COMP%]{height:0;border-top:1px solid #e5e5e5;padding-top:5px;margin-top:5px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-remove[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-24px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-append[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-insert[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:0 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-duplicate[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-48px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-sort-asc[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-168px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-sort-desc[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-192px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-transform[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-216px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-extract[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:0 -24px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-string[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-144px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-auto[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-120px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-object[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-72px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-array[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-position:-96px 0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   button.jsoneditor-type-modes[_ngcontent-%COMP%]   .jsoneditor-icon[_ngcontent-%COMP%]{background-image:none;width:6px}.jsoneditor-contextmenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{box-sizing:content-box;position:relative}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1a1a1a;background-color:#f5f5f5;outline:0}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%], .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.jsoneditor-selected[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ee422e}.jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .jsoneditor-contextmenu[_ngcontent-%COMP%]   .jsoneditor-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.jsoneditor-modal[_ngcontent-%COMP%]{max-width:95%;border-radius:2px!important;padding:45px 15px 15px!important;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);color:#4d4d4d;line-height:1.3em}.jsoneditor-modal.jsoneditor-modal-transform[_ngcontent-%COMP%]{width:600px!important}.jsoneditor-modal[_ngcontent-%COMP%]   .pico-modal-header[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;padding:0 10px;height:30px;line-height:30px;font-family:arial,sans-serif;font-size:11pt;background:#3883fa;color:#fff}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 0}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.jsoneditor-modal-input[_ngcontent-%COMP%]{text-align:right;padding-right:0;white-space:nowrap}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.jsoneditor-modal-actions[_ngcontent-%COMP%]{padding-top:15px}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.jsoneditor-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:0}.jsoneditor-modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3883fa}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-block[_ngcontent-%COMP%]{margin-bottom:10px}.jsoneditor-modal[_ngcontent-%COMP%]   .pico-close[_ngcontent-%COMP%]{background:0 0!important;font-size:24px!important;top:7px!important;right:7px!important;color:#fff}.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px}.jsoneditor-modal[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{cursor:inherit}.jsoneditor-modal[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background:#d3d3d3;color:grey}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-select-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-select-wrapper[_ngcontent-%COMP%]:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #666;position:absolute;right:8px;top:14px;pointer-events:none}.jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:3px 24px 3px 10px;min-width:180px;max-width:350px;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:0;text-overflow:"";font-size:10pt;line-height:1.5em}.jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 10px;margin:0;border-radius:0;border-left-style:none}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input.jsoneditor-button-first[_ngcontent-%COMP%]{border-top-left-radius:3px;border-bottom-left-radius:3px;border-left-style:solid}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group[_ngcontent-%COMP%]   input.jsoneditor-button-last[_ngcontent-%COMP%]{border-top-right-radius:3px;border-bottom-right-radius:3px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview[_ngcontent-%COMP%]{background:#f5f5f5;height:200px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview.jsoneditor-error[_ngcontent-%COMP%]{color:#ee422e}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard[_ngcontent-%COMP%]{line-height:1.2em;width:100%;padding:0;border-radius:3px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-label[_ngcontent-%COMP%]{font-weight:700;color:#1e90ff;margin-top:20px;margin-bottom:5px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-wizard-label[_ngcontent-%COMP%]{font-style:italic;margin:4px 0 2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-inline[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding-top:2px;padding-bottom:2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-inline[_ngcontent-%COMP%]:not(:last-child){padding-right:2px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-field[_ngcontent-%COMP%]{width:180px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-relation[_ngcontent-%COMP%]{width:100px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-filter-value[_ngcontent-%COMP%]{min-width:180px;flex:1}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-sort-field[_ngcontent-%COMP%]{width:170px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-sort-order[_ngcontent-%COMP%]{width:150px}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-jmespath-select-fields[_ngcontent-%COMP%]{width:100%}.jsoneditor-modal[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:#d3d3d3;padding:4px 28px 4px 8px}.jsoneditor-modal[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]   .selectr-tag[_ngcontent-%COMP%]{background-color:#3883fa;border-radius:5px}.jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;vertical-align:middle;font-weight:400;color:#4d4d4d;border-spacing:0;border-collapse:collapse}.jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#fff;border:1px solid #d3d3d3;color:#4d4d4d;border-radius:3px;padding:4px}.jsoneditor-modal[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:10.5pt;font-family:arial,sans-serif}.jsoneditor-modal[_ngcontent-%COMP%]   #query[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-transform-preview[_ngcontent-%COMP%]{font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt;width:100%;box-sizing:border-box}.jsoneditor-modal[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f5f5f5;padding:4px 20px}.jsoneditor-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}.jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group.jsoneditor-button-group-value-asc[_ngcontent-%COMP%]   input.jsoneditor-button-asc[_ngcontent-%COMP%], .jsoneditor-modal[_ngcontent-%COMP%]   .jsoneditor-button-group.jsoneditor-button-group-value-desc[_ngcontent-%COMP%]   input.jsoneditor-button-desc[_ngcontent-%COMP%]{background:#3883fa;border-color:#3883fa;color:#fff}.jsoneditor-menu[_ngcontent-%COMP%]{width:100%;height:35px;padding:2px;margin:0;box-sizing:border-box;color:#fff;background-color:#3883fa;border-bottom:1px solid #3883fa}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:26px;height:26px;margin:2px;padding:0;border-radius:2px;border:1px solid transparent;background:transparent url(jsoneditor-icons.15f2789dd231f36d43a4.svg);color:#fff;opacity:.8;font-family:arial,sans-serif;font-size:10pt;float:left}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,100%,.2);border:1px solid hsla(0,0%,100%,.4)}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active, .jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus{background-color:hsla(0,0%,100%,.3)}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled, .jsoneditor-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{opacity:.5;background-color:transparent;border:none}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-collapse-all[_ngcontent-%COMP%]{background-position:0 -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-expand-all[_ngcontent-%COMP%]{background-position:0 -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%]{background-position:-120px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%]{background-position:-144px -96px}.jsoneditor.jsoneditor-mode-form[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-form[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-view[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-sort[_ngcontent-%COMP%], .jsoneditor.jsoneditor-mode-view[_ngcontent-%COMP%] > .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-transform[_ngcontent-%COMP%]{display:none}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-undo[_ngcontent-%COMP%]{background-position:-24px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-undo[_ngcontent-%COMP%]:disabled{background-position:-24px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-redo[_ngcontent-%COMP%]{background-position:-48px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-redo[_ngcontent-%COMP%]:disabled{background-position:-48px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-compact[_ngcontent-%COMP%]{background-position:-72px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-format[_ngcontent-%COMP%]{background-position:-72px -120px}.jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-repair[_ngcontent-%COMP%]{background-position:-96px -96px}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%]{display:inline-block;float:left}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-image:none;width:auto;padding-left:6px;padding-right:6px}.jsoneditor-menu[_ngcontent-%COMP%] > .jsoneditor-modes[_ngcontent-%COMP%] > button.jsoneditor-separator[_ngcontent-%COMP%], .jsoneditor-menu[_ngcontent-%COMP%] > button.jsoneditor-separator[_ngcontent-%COMP%]{margin-left:10px}.jsoneditor-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:arial,sans-serif;font-size:10pt;color:#fff;opacity:.8;vertical-align:middle}.jsoneditor-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.jsoneditor-menu[_ngcontent-%COMP%]   a.jsoneditor-poweredBy[_ngcontent-%COMP%]{font-size:8pt;position:absolute;right:0;top:0;padding:10px}.jsoneditor-search[_ngcontent-%COMP%]{font-family:arial,sans-serif;position:absolute;right:4px;top:4px;border-collapse:collapse;border-spacing:0;display:flex}.jsoneditor-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#1a1a1a;width:120px;border:none;outline:0;margin:1px;line-height:20px}.jsoneditor-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:16px;height:24px;padding:0;margin:0;border:none;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg);vertical-align:top}.jsoneditor-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-refresh[_ngcontent-%COMP%]{width:18px;background-position:-99px -73px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-next[_ngcontent-%COMP%]{cursor:pointer;background-position:-124px -73px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-next[_ngcontent-%COMP%]:hover{background-position:-124px -49px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-previous[_ngcontent-%COMP%]{cursor:pointer;background-position:-148px -73px;margin-right:2px}.jsoneditor-search[_ngcontent-%COMP%]   button.jsoneditor-previous[_ngcontent-%COMP%]:hover{background-position:-148px -49px}.jsoneditor-results[_ngcontent-%COMP%]{font-family:arial,sans-serif;color:#fff;padding-right:5px;line-height:26px}.jsoneditor-frame[_ngcontent-%COMP%]{border:1px solid transparent;background-color:#fff;padding:0 2px;margin:0}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3);border:1px solid #d3d3d3;overflow-x:hidden;overflow-y:auto;cursor:default;margin:0;padding:5px;text-align:left;outline:0;font-family:dejavu sans mono,droid sans mono,consolas,monaco,lucida console,courier new,courier,monospace,sans-serif;font-size:10pt}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#333}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.dropdown[_ngcontent-%COMP%]   .item.hover[_ngcontent-%COMP%]{background-color:#ddd}.jsoneditor[_ngcontent-%COMP%]   .autocomplete.hint[_ngcontent-%COMP%]{color:#aaa;top:4px;left:4px}.jsoneditor-treepath[_ngcontent-%COMP%]{padding:0 5px;overflow:hidden;white-space:nowrap;outline:0}.jsoneditor-treepath.show-all[_ngcontent-%COMP%]{word-wrap:break-word;white-space:normal;position:absolute;background-color:#ebebeb;z-index:1;box-shadow:2px 2px 12px hsla(0,0%,50.2%,.3)}.jsoneditor-treepath.show-all[_ngcontent-%COMP%]   span.jsoneditor-treepath-show-all-btn[_ngcontent-%COMP%]{display:none}.jsoneditor-treepath[_ngcontent-%COMP%]   div.jsoneditor-contextmenu-root[_ngcontent-%COMP%]{position:absolute;left:0}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-show-all-btn[_ngcontent-%COMP%]{position:absolute;background-color:#ebebeb;left:0;height:20px;padding:0 3px;cursor:pointer}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-element[_ngcontent-%COMP%]{margin:1px;font-family:arial,sans-serif;font-size:10pt}.jsoneditor-treepath[_ngcontent-%COMP%]   .jsoneditor-treepath-seperator[_ngcontent-%COMP%]{margin:2px;font-size:9pt;font-family:arial,sans-serif}.jsoneditor-treepath[_ngcontent-%COMP%]   span.jsoneditor-treepath-element[_ngcontent-%COMP%]:hover, .jsoneditor-treepath[_ngcontent-%COMP%]   span.jsoneditor-treepath-seperator[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.jsoneditor-statusbar[_ngcontent-%COMP%]{line-height:26px;height:26px;color:grey;background-color:#ebebeb;border-top:1px solid #d3d3d3;box-sizing:border-box;font-size:10pt}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-val[_ngcontent-%COMP%]{margin-right:12px}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-count[_ngcontent-%COMP%]{margin-left:4px}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-validation-error-icon[_ngcontent-%COMP%]{float:right;width:24px;height:24px;padding:0;margin-top:1px;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -168px -48px;cursor:pointer}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-validation-error-count[_ngcontent-%COMP%]{float:right;margin:0 4px 0 0;cursor:pointer}.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-parse-error-icon[_ngcontent-%COMP%]{float:right;width:24px;height:24px;padding:0;margin:1px;background:url(jsoneditor-icons.15f2789dd231f36d43a4.svg) -25px 0}.jsoneditor-statusbar[_ngcontent-%COMP%]   .jsoneditor-array-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}div.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-curserinfo-label[_ngcontent-%COMP%], div.jsoneditor-statusbar[_ngcontent-%COMP%] > .jsoneditor-size-info[_ngcontent-%COMP%]{margin:0 4px}.jsoneditor-navigation-bar[_ngcontent-%COMP%]{width:100%;height:26px;line-height:26px;padding:0;margin:0;border-bottom:1px solid #d3d3d3;box-sizing:border-box;color:grey;background-color:#ebebeb;overflow:hidden;font-family:arial,sans-serif;font-size:10pt}\n.selectr-container[_ngcontent-%COMP%]{position:relative}.selectr-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.selectr-hidden[_ngcontent-%COMP%]{position:absolute;overflow:hidden;clip:rect(0,0,0,0);width:1px;height:1px;margin:-1px;padding:0;border:0}.selectr-visible[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;z-index:11}.selectr-desktop.multiple[_ngcontent-%COMP%]   .selectr-visible[_ngcontent-%COMP%]{display:none}.selectr-desktop.multiple.native-open[_ngcontent-%COMP%]   .selectr-visible[_ngcontent-%COMP%]{top:100%;min-height:200px!important;height:auto;opacity:1;display:block}.selectr-container.multiple.selectr-mobile[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{z-index:0}.selectr-selected[_ngcontent-%COMP%]{position:relative;z-index:1;box-sizing:border-box;width:100%;padding:7px 28px 7px 14px;cursor:pointer;border:1px solid #999;border-radius:3px;background-color:#fff}.selectr-selected[_ngcontent-%COMP%]:before{position:absolute;top:50%;right:10px;width:0;height:0;content:"";transform:rotate(0) translate3d(0,-50%,0);border-color:#6c7a86 transparent transparent;border-style:solid;border-width:4px 4px 0}.selectr-container.native-open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:before, .selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:before{border-color:transparent transparent #6c7a86;border-style:solid;border-width:0 4px 4px}.selectr-label[_ngcontent-%COMP%]{display:none;overflow:hidden;width:100%;white-space:nowrap;text-overflow:ellipsis}.selectr-placeholder[_ngcontent-%COMP%]{color:#6c7a86}.selectr-tags[_ngcontent-%COMP%]{margin:0;padding:0;white-space:normal}.has-selected[_ngcontent-%COMP%]   .selectr-tags[_ngcontent-%COMP%]{margin:0 0 -2px}.selectr-tag[_ngcontent-%COMP%]{list-style:none;position:relative;float:left;padding:2px 25px 2px 8px;margin:0 2px 2px 0;cursor:default;color:#fff;border:none;border-radius:10px;background:#acb7bf none repeat scroll 0 0}.selectr-container.multiple.has-selected[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{padding:5px 28px 5px 5px}.selectr-options-container[_ngcontent-%COMP%]{position:absolute;z-index:10000;top:calc(100% - 1px);left:0;display:none;box-sizing:border-box;width:100%;border:1px solid #999;border-top:0 solid transparent;border-radius:0 0 3px 3px;background-color:#fff}.selectr-container.open[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%]{display:block}.selectr-input-container[_ngcontent-%COMP%]{position:relative;display:none}.selectr-clear[_ngcontent-%COMP%], .selectr-input-clear[_ngcontent-%COMP%], .selectr-tag-remove[_ngcontent-%COMP%]{position:absolute;top:50%;right:22px;width:20px;height:20px;padding:0;cursor:pointer;transform:translate3d(0,-50%,0);border:none;background-color:transparent;z-index:11}.selectr-clear[_ngcontent-%COMP%], .selectr-input-clear[_ngcontent-%COMP%]{display:none}.selectr-container.has-selected[_ngcontent-%COMP%]   .selectr-clear[_ngcontent-%COMP%], .selectr-input-container.active[_ngcontent-%COMP%]   .selectr-input-clear[_ngcontent-%COMP%]{display:block}.selectr-selected[_ngcontent-%COMP%]   .selectr-tag-remove[_ngcontent-%COMP%]{right:2px}.selectr-clear[_ngcontent-%COMP%]:after, .selectr-clear[_ngcontent-%COMP%]:before, .selectr-input-clear[_ngcontent-%COMP%]:after, .selectr-input-clear[_ngcontent-%COMP%]:before, .selectr-tag-remove[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:before{position:absolute;top:5px;left:9px;width:2px;height:10px;content:" ";background-color:#6c7a86}.selectr-tag-remove[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:before{top:4px;width:3px;height:12px;background-color:#fff}.selectr-clear[_ngcontent-%COMP%]:before, .selectr-input-clear[_ngcontent-%COMP%]:before, .selectr-tag-remove[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.selectr-clear[_ngcontent-%COMP%]:after, .selectr-input-clear[_ngcontent-%COMP%]:after, .selectr-tag-remove[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.selectr-input-container.active[_ngcontent-%COMP%], .selectr-input-container.active[_ngcontent-%COMP%]   .selectr-clear[_ngcontent-%COMP%]{display:block}.selectr-input[_ngcontent-%COMP%]{top:5px;left:5px;box-sizing:border-box;width:calc(100% - 30px);margin:10px 15px;padding:7px 30px 7px 9px;border:1px solid #999;border-radius:3px}.selectr-notice[_ngcontent-%COMP%]{display:none;box-sizing:border-box;width:100%;padding:8px 16px;border-top:1px solid #999;border-radius:0 0 3px 3px;background-color:#fff}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-notice[_ngcontent-%COMP%]{display:block}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}.selectr-options[_ngcontent-%COMP%]{position:relative;top:calc(100% + 2px);display:none;overflow-x:auto;overflow-y:scroll;max-height:200px;margin:0;padding:0}.selectr-container.notice[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%], .selectr-container.open[_ngcontent-%COMP%]   .selectr-input-container[_ngcontent-%COMP%], .selectr-container.open[_ngcontent-%COMP%]   .selectr-options[_ngcontent-%COMP%]{display:block}.selectr-option[_ngcontent-%COMP%]{position:relative;display:block;padding:5px 20px;list-style:outside none none;cursor:pointer;font-weight:400}.selectr-options.optgroups[_ngcontent-%COMP%] > .selectr-option[_ngcontent-%COMP%]{padding-left:25px}.selectr-optgroup[_ngcontent-%COMP%]{font-weight:700;padding:0}.selectr-optgroup--label[_ngcontent-%COMP%]{font-weight:700;margin-top:10px;padding:5px 15px}.selectr-match[_ngcontent-%COMP%]{text-decoration:underline}.selectr-option.selected[_ngcontent-%COMP%]{background-color:#ddd}.selectr-option.active[_ngcontent-%COMP%]{color:#fff;background-color:#5897fb}.selectr-option.disabled[_ngcontent-%COMP%]{opacity:.4}.selectr-option.excluded[_ngcontent-%COMP%]{display:none}.selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:#999 #999 transparent;border-radius:3px 3px 0 0}.selectr-container.open[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:after{transform:rotate(180deg) translate3d(0,50%,0)}.selectr-disabled[_ngcontent-%COMP%]{opacity:.6}.has-selected[_ngcontent-%COMP%]   .selectr-placeholder[_ngcontent-%COMP%], .selectr-empty[_ngcontent-%COMP%]{display:none}.has-selected[_ngcontent-%COMP%]   .selectr-label[_ngcontent-%COMP%]{display:block}.taggable[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{padding:4px 28px 4px 4px}.taggable[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]:after{display:table;content:" ";clear:both}.taggable[_ngcontent-%COMP%]   .selectr-label[_ngcontent-%COMP%]{width:auto}.taggable[_ngcontent-%COMP%]   .selectr-tags[_ngcontent-%COMP%]{float:left;display:block}.taggable[_ngcontent-%COMP%]   .selectr-placeholder[_ngcontent-%COMP%]{display:none}.input-tag[_ngcontent-%COMP%]{float:left;min-width:90px;width:auto}.selectr-tag-input[_ngcontent-%COMP%]{border:none;padding:3px 10px;width:100%;font-family:inherit;font-weight:inherit;font-size:inherit}.selectr-input-container.loading[_ngcontent-%COMP%]:after{position:absolute;top:50%;right:20px;width:20px;height:20px;content:"";transform:translate3d(0,-50%,0);transform-origin:50% 0 0;-webkit-animation:spin .5s linear 0s infinite normal forwards running;animation:spin .5s linear 0s infinite normal forwards running;border:3px solid #ddd;border-top-color:#aaa;border-radius:50%}@-webkit-keyframes spin{0%{transform:rotate(0) translate3d(0,-50%,0)}to{transform:rotate(1turn) translate3d(0,-50%,0)}}@keyframes spin{0%{transform:rotate(0) translate3d(0,-50%,0)}to{transform:rotate(1turn) translate3d(0,-50%,0)}}.selectr-container.open.inverted[_ngcontent-%COMP%]   .selectr-selected[_ngcontent-%COMP%]{border-color:transparent #999 #999;border-radius:0 0 3px 3px}.selectr-container.inverted[_ngcontent-%COMP%]   .selectr-options-container[_ngcontent-%COMP%]{border-width:1px 1px 0;border-color:#999 #999 transparent;border-radius:3px 3px 0 0;background-color:#fff;top:auto;bottom:calc(100% - 1px)}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c7a86;opacity:1}.selectr-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#6c7a86;opacity:1}\n.nb-theme-default   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-default   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-default   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-default   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-default   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-default   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-default   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-default   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-default   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-default   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-default   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-default   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-default   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-default   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-default   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-default   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-default   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-default   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-default   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-default   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-default   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-default   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-default   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-default   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-dark   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-dark   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-dark   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-dark   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-dark   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-dark   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-dark   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-dark   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-dark   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-dark   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-dark   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-dark   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-dark   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-dark   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-dark   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-cosmic   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-cosmic   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-cosmic   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-cosmic   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-cosmic   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-cosmic   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-cosmic   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-cosmic   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-cosmic   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-cosmic   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-cosmic   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-cosmic   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-cosmic   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-cosmic   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-cosmic   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-cosmic   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-corporate   [_nghost-%COMP%]     nb-action.success nb-icon{color:#00d68f!important}.nb-theme-corporate   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-corporate   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-corporate   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-corporate   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-corporate   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-corporate   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-corporate   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-corporate   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-corporate   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-corporate   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-corporate   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-corporate   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-corporate   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-corporate   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-corporate   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-corporate   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-corporate   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-corporate   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-corporate   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-corporate   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-corporate   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-corporate   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-corporate   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-material-dark   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-dark   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-material-dark   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-material-dark   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-material-dark   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-material-dark   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-material-dark   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-material-dark   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-material-dark   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-material-dark   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-material-dark   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-material-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-material-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-material-dark   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-material-dark   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-material-light   [_nghost-%COMP%]     nb-action.success nb-icon{color:#60af20!important}.nb-theme-material-light   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-material-light   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-material-light   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-material-light   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-material-light   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-material-light   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-material-light   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-material-light   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-material-light   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-material-light   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-material-light   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-material-light   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-material-light   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-material-light   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-material-light   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-material-light   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-material-light   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-material-light   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-material-light   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-material-light   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-material-light   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-material-light   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-material-light   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}.nb-theme-obsrio   [_nghost-%COMP%]     nb-action.success nb-icon{color:#418e11!important}.nb-theme-obsrio   [_nghost-%COMP%]     .step-content{height:100%;position:relative}.nb-theme-obsrio   [_nghost-%COMP%]     nb-tabset{height:100%}.nb-theme-obsrio   [_nghost-%COMP%]     nb-tab{padding:0;height:100%}.nb-theme-obsrio   [_nghost-%COMP%]     .hide_tabs .tabset, .nb-theme-obsrio   [_nghost-%COMP%]     nb-stepper .header{display:none!important}.nb-theme-obsrio   [_nghost-%COMP%]     div.jsoneditor-mode-code{height:500px}.nb-theme-obsrio   [_nghost-%COMP%]     textarea.jsoneditor-text{min-height:650px}.nb-theme-obsrio   [_nghost-%COMP%]     .opt-popover{padding:1em!important}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone{height:150px}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .text, .nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio label{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     .radio-icon nb-radio .radio-image{width:150px}.nb-theme-obsrio   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:90%}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-options[_ngcontent-%COMP%]{overflow:auto;overflow-y:visible;max-width:800px}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]{padding:0;overflow-y:visible;max-width:230px;min-width:230px;max-height:170px;min-height:170px}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:visible}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-option-selected[_ngcontent-%COMP%]{background:#e0eafc;background:linear-gradient(90deg,#cfdef3,#e0eafc)}.nb-theme-obsrio   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]{background-color:#fff;border-radius:50%;min-width:50px;max-width:50px;max-height:50px;min-height:50px;position:absolute;top:-36px;left:10px}.nb-theme-obsrio   [_nghost-%COMP%]   .radio-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto;width:55%;height:auto}.nb-theme-obsrio   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{margin:0;height:100vh}.nb-theme-obsrio   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.7em}.nb-theme-obsrio   [_nghost-%COMP%]   .selected-option[_ngcontent-%COMP%]{min-width:200px}.nb-theme-obsrio   [_nghost-%COMP%]   #layers_form[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   #edit-layer-card[_ngcontent-%COMP%]{max-width:100vw;background-color:#f8f8f8}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]{height:100%}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-edit-tab[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding:0;height:100%}']}),t}(),wi=n("FKr1"),Ii=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function Ai(){Ii.console&&"function"==typeof Ii.console.log&&Ii.console.log.apply(Ii.console,arguments)}var Pi={log:Ai,warn:function(t){Ii.console&&("function"==typeof Ii.console.warn?Ii.console.warn.apply(Ii.console,arguments):Ai.call(null,arguments))},error:function(t){Ii.console&&("function"==typeof Ii.console.error?Ii.console.error.apply(Ii.console,arguments):Ai(t))}};function Oi(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Li(i.response,e,n)},i.onerror=function(){Pi.error("could not download file")},i.send()}function Mi(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function Si(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(Pi){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ki,Ei,Li=Ii.saveAs||("object"!=typeof window||window!==Ii?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Ii.URL||Ii.webkitURL,r=document.createElement("a");r.download=e=e||t.name||"download",r.rel="noopener","string"==typeof t?(r.href=t,r.origin!==location.origin?Mi(r.href)?Oi(t,e,n):Si(r,r.target="_blank"):Si(r)):(r.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(r.href)}),4e4),setTimeout((function(){Si(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(Mi(t))Oi(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){Si(i)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(Pi.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return Oi(t,e,n);var r="application/octet-stream"===t.type,o=/constructor/i.test(Ii.HTMLElement)||Ii.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&o)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},s.readAsDataURL(t)}else{var c=Ii.URL||Ii.webkitURL,l=c.createObjectURL(t);i?i.location=l:location.href=l,i=null,setTimeout((function(){c.revokeObjectURL(l)}),4e4)}});function Ti(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].process,o=n[i].re.exec(t);o&&(e=r(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}function Ri(t){if("object"!=typeof t)throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!i],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[n]){var a=e[n][o];try{a[0].apply(t,i)}catch(t){Ii.console&&Pi.error("jsPDF PubSub Error",t.message,t)}a[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ni(t){if(!(this instanceof Ni))return new Ni(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Bi(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ji(t,e,n,i,r){if(!(this instanceof ji))return new ji(t,e,n,i,r);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Bi.call(this,i,r)}function Di(t,e,n,i,r){if(!(this instanceof Di))return new Di(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Bi.call(this,i,r)}function Fi(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],a=[],s=1,c=16,l="S";"object"==typeof(t=t||{})&&(n=t.orientation,i=t.unit||i,r=t.format||r,o=t.compress||t.compressPdf||o,s="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(c=t.floatPrecision),l=t.defaultPathOperation||"S"),a=t.filters||(!0===o?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var u=t.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=Ri;var p="1.3",f=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(t){p=t};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return g};var m=d.__private__.getPageFormat=function(t){return g[t]};r=r||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},y=v.COMPAT;function b(){this.saveGraphicsState(),Y(new kt(ht,0,0,-ht,0,Cn()*ht).toString()+" cm"),this.setFontSize(this.getFontSize()/ht),l="n",y=v.ADVANCED}function _(){this.restoreGraphicsState(),l="S",y=v.COMPAT}d.advancedAPI=function(t){var e=y===v.COMPAT;return e&&b.call(this),"function"!=typeof t||(t(this),e&&_.call(this)),this},d.compatAPI=function(t){var e=y===v.ADVANCED;return e&&_.call(this),"function"!=typeof t||(t(this),e&&b.call(this)),this},d.isAdvancedAPI=function(){return y===v.ADVANCED};var C,x=function(t){if(y!==v.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},w=d.roundToPrecision=d.__private__.roundToPrecision=function(t,n){var i=e||n;if(isNaN(t)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(i).replace(/0+$/,"")};C=d.hpf=d.__private__.hpf="number"==typeof c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return w(t,c)}:"smart"===c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return w(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return w(t,16)};var I=d.f2=d.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return w(t,2)},A=d.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return w(t,3)},P=d.scale=d.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return y===v.COMPAT?t*ht:y===v.ADVANCED?t:void 0},O=function(t){return y===v.COMPAT?Cn()-t:y===v.ADVANCED?t:void 0},M=function(t){return P(O(t))};d.__private__.setPrecision=d.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var S,k="00000000000000000000000000000000",E=d.__private__.getFileId=function(){return k},L=d.__private__.setFileId=function(t){return k=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():k.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join("")};d.setFileId=function(t){return L(t),this},d.getFileId=function(){return E()};var T=d.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",i=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),o=[n,D(i),"'",D(r),"'"].join("");return["D:",t.getFullYear(),D(t.getMonth()+1),D(t.getDate()),D(t.getHours()),D(t.getMinutes()),D(t.getSeconds()),o].join("")},R=d.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,i=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),a=parseInt(t.substr(14,2),10);return new Date(e,n,i,r,o,a,0)},N=d.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=T(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return S=e},B=d.__private__.getCreationDate=function(t){var e=S;return"jsDate"===t&&(e=R(S)),e};d.setCreationDate=function(t){return N(t),this},d.getCreationDate=function(t){return B(t)};var j,D=d.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},F=d.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},z=0,V=[],G=[],Z=0,W=[],H=[],U=!1,$=G,K=function(){z=0,Z=0,G=[],V=[],W=[],Dt=Nt(),Ft=Nt()};d.__private__.setCustomOutputDestination=function(t){U=!0,$=t};var X=function(t){U||($=t)};d.__private__.resetCustomOutputDestination=function(){U=!1,$=G};var Y=d.__private__.out=function(t){return t=t.toString(),Z+=t.length+1,$.push(t),$},q=d.__private__.write=function(t){return Y(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},J=d.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n);e--;)i[e]=t.charCodeAt(e);return n},Q=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Q};var tt=t.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(t){return tt=y===v.ADVANCED?t/ht:t,this};var et,nt=d.__private__.getFontSize=d.getFontSize=function(){return y===v.COMPAT?tt:tt*ht},it=t.R2L||!1;d.__private__.setR2L=d.setR2L=function(t){return it=t,this},d.__private__.getR2L=d.getR2L=function(){return it};var rt,ot=d.__private__.setZoomMode=function(t){if(/^\d*\.?\d*%$/.test(t))et=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');et=t}else et=parseInt(t,10)};d.__private__.getZoomMode=function(){return et};var at,st=d.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');rt=t};d.__private__.getPageMode=function(){return rt};var ct=d.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');at=t};d.__private__.getLayoutMode=function(){return at},d.__private__.setDisplayMode=d.setDisplayMode=function(t,e,n){return ot(t),ct(e),st(n),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(t){if(-1===Object.keys(lt).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[t]},d.__private__.getDocumentProperties=function(){return lt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(t){for(var e in lt)lt.hasOwnProperty(e)&&t[e]&&(lt[e]=t[e]);return this},d.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(lt).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[t]=e};var ut,ht,dt,pt,ft,gt={},mt={},vt=[],yt={},bt={},_t={},Ct={},xt=null,wt=0,It=[],At=new Ri(d),Pt=t.hotfixes||[],Ot={},Mt={},St=[],kt=function t(e,n,i,r,o,a){if(!(this instanceof t))return new t(e,n,i,r,o,a);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[e,n,i,r,o,a]};Object.defineProperty(kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(kt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),kt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(t)},kt.prototype.multiply=function(t){return new kt(t.sx*this.sx+t.shy*this.shx,t.sx*this.shy+t.shy*this.sy,t.shx*this.sx+t.sy*this.shx,t.shx*this.shy+t.sy*this.sy,t.tx*this.sx+t.ty*this.shx+this.tx,t.tx*this.shy+t.ty*this.sy+this.ty)},kt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,a=Math.sqrt(t*t+e*e),s=(t/=a)*n+(e/=a)*i;n-=t*s,i-=e*s;var c=Math.sqrt(n*n+i*i);return s/=c,t*(i/=c)<e*(n/=c)&&(t=-t,e=-e,s=-s,a=-a),{scale:new kt(a,0,0,c,0,0),translate:new kt(1,0,0,1,r,o),rotate:new kt(t,e,-e,t,0,0),skew:new kt(1,0,s,1,0,0)}},kt.prototype.toString=function(t){return this.join(" ")},kt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,a=1/(t*i-e*n),s=i*a,c=-e*a,l=-n*a,u=t*a;return new kt(s,c,l,u,-s*r-l*o,-c*r-u*o)},kt.prototype.applyToPoint=function(t){return new pn(t.x*this.sx+t.y*this.shx+this.tx,t.x*this.shy+t.y*this.sy+this.ty)},kt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new pn(t.x+t.w,t.y+t.h));return new fn(e.x,e.y,n.x-e.x,n.y-e.y)},kt.prototype.clone=function(){return new kt(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},d.Matrix=kt;var Et=d.matrixMult=function(t,e){return e.multiply(t)},Lt=new kt(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Lt;var Tt=function(t,e){if(!bt[t]){var n=(e instanceof ji?"Sh":"P")+(Object.keys(yt).length+1).toString(10);e.id=n,bt[t]=n,yt[n]=e,At.publish("addPattern",e)}};d.ShadingPattern=ji,d.TilingPattern=Di,d.addShadingPattern=function(t,e){return x("addShadingPattern()"),Tt(t,e),this},d.beginTilingPattern=function(t){x("beginTilingPattern()"),mn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},d.endTilingPattern=function(t,e){x("endTilingPattern()"),e.stream=H[j].join("\n"),Tt(t,e),At.publish("endTilingPattern",e),St.pop().restore()};var Rt=d.__private__.newObject=function(){var t=Nt();return Bt(t,!0),t},Nt=d.__private__.newObjectDeferred=function(){return z++,V[z]=function(){return Z},z},Bt=function(t,e){return e="boolean"==typeof e&&e,V[t]=Z,e&&Y(t+" 0 obj"),t},jt=d.__private__.newAdditionalObject=function(){var t={objId:Nt(),content:""};return W.push(t),t},Dt=Nt(),Ft=Nt(),zt=d.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return i},Vt=d.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,i=t.ch2,r=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new Ti(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,i=c>>8&255,r=255&c}if(void 0===i||void 0===o&&n===i&&i===r)if("string"==typeof n)e=n+" "+a[0];else switch(t.precision){case 2:e=I(n/255)+" "+a[0];break;case 3:default:e=A(n/255)+" "+a[0]}else if(void 0===o||"object"==typeof o){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,i,r,a[1]].join(" ");else switch(t.precision){case 2:e=[I(n/255),I(i/255),I(r/255),a[1]].join(" ");break;default:case 3:e=[A(n/255),A(i/255),A(r/255),a[1]].join(" ")}}else if("string"==typeof n)e=[n,i,r,o,a[2]].join(" ");else switch(t.precision){case 2:e=[I(n),I(i),I(r),I(o),a[2]].join(" ");break;case 3:default:e=[A(n),A(i),A(r),A(o),a[2]].join(" ")}return e},Gt=d.__private__.getFilters=function(){return a},Zt=d.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||Gt(),i=t.alreadyAppliedFilters||[],r=t.addLength1||!1,o=e.length,a={};!0===n&&(n=["FlateEncode"]);var s=t.additionalKeyValues||[],c=(a=void 0!==Fi.API.processDataByFilters?Fi.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==a.data.length&&(s.push({key:"Length",value:a.data.length}),!0===r&&s.push({key:"Length1",value:o})),0!=c.length)if(c.split("/").length-1==1)s.push({key:"Filter",value:c});else{s.push({key:"Filter",value:"["+c+"]"});for(var l=0;l<s.length;l+=1)if("DecodeParms"===s[l].key){for(var u=[],h=0;h<a.reverseChain.split("/").length-1;h+=1)u.push("null");u.push(s[l].value),s[l].value="["+u.join(" ")+"]"}}Y("<<");for(var d=0;d<s.length;d++)Y("/"+s[d].key+" "+s[d].value);Y(">>"),0!==a.data.length&&(Y("stream"),Y(a.data),Y("endstream"))},Wt=d.__private__.putPage=function(t){var e=t.number,n=t.data,i=t.objId,r=t.contentsObjId;Bt(i,!0),Y("<</Type /Page"),Y("/Parent "+t.rootDictionaryObjId+" 0 R"),Y("/Resources "+t.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(C(t.mediaBox.bottomLeftX))+" "+parseFloat(C(t.mediaBox.bottomLeftY))+" "+C(t.mediaBox.topRightX)+" "+C(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Y("/CropBox ["+C(t.cropBox.bottomLeftX)+" "+C(t.cropBox.bottomLeftY)+" "+C(t.cropBox.topRightX)+" "+C(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Y("/BleedBox ["+C(t.bleedBox.bottomLeftX)+" "+C(t.bleedBox.bottomLeftY)+" "+C(t.bleedBox.topRightX)+" "+C(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Y("/TrimBox ["+C(t.trimBox.bottomLeftX)+" "+C(t.trimBox.bottomLeftY)+" "+C(t.trimBox.topRightX)+" "+C(t.trimBox.topRightY)+"]"),null!==t.artBox&&Y("/ArtBox ["+C(t.artBox.bottomLeftX)+" "+C(t.artBox.bottomLeftY)+" "+C(t.artBox.topRightX)+" "+C(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Y("/UserUnit "+t.userUnit),At.publish("putPage",{objId:i,pageContext:It[e],pageNumber:e,page:n}),Y("/Contents "+r+" 0 R"),Y(">>"),Y("endobj");var o=n.join("\n");return y===v.ADVANCED&&(o+="\nQ"),Bt(r,!0),Zt({data:o,filters:Gt()}),Y("endobj"),i},Ht=d.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=wt;t++)It[t].objId=Nt(),It[t].contentsObjId=Nt();for(t=1;t<=wt;t++)n.push(Wt({number:t,data:H[t],objId:It[t].objId,contentsObjId:It[t].contentsObjId,mediaBox:It[t].mediaBox,cropBox:It[t].cropBox,bleedBox:It[t].bleedBox,trimBox:It[t].trimBox,artBox:It[t].artBox,userUnit:It[t].userUnit,rootDictionaryObjId:Dt,resourceDictionaryObjId:Ft}));Bt(Dt,!0),Y("<</Type /Pages");var i="/Kids [";for(e=0;e<wt;e++)i+=n[e]+" 0 R ";Y(i+"]"),Y("/Count "+wt),Y(">>"),Y("endobj"),At.publish("postPutPages")},Ut=function(t){var e=function(t,e){return-1!==t.indexOf(" ")?"("+ge(t,e)+")":ge(t,e)};At.publish("putFont",{font:t,out:Y,newObject:Rt,putStream:Zt,pdfEscapeWithNeededParanthesis:e}),!0!==t.isAlreadyPutted&&(t.objectNumber=Rt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+e(t.postScriptName)),Y("/Subtype /Type1"),"string"==typeof t.encoding&&Y("/Encoding /"+t.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},$t=function(){for(var t in gt)gt.hasOwnProperty(t)&&(!1===u||!0===u&&h.hasOwnProperty(t))&&Ut(gt[t])},Kt=function(t){t.objectNumber=Rt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[C(t.x),C(t.y),C(t.x+t.width),C(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");Zt({data:n,additionalKeyValues:e}),Y("endobj")},Xt=function(){for(var t in Ot)Ot.hasOwnProperty(t)&&Kt(Ot[t])},Yt=function(t,e){var n,i=[],r=1/(e-1);for(n=0;n<1;n+=r)i.push(n);i.push(1),0!=t[0].offset&&t.unshift({offset:0,color:t[0].color}),1!=t[t.length-1].offset&&t.push({offset:1,color:t[t.length-1].color});for(var o="",a=0,s=0;s<i.length;s++){for(n=i[s];n>t[a+1].offset;)a++;var c=t[a].offset,l=(n-c)/(t[a+1].offset-c),u=t[a].color,h=t[a+1].color;o+=F(Math.round((1-l)*u[0]+l*h[0]).toString(16))+F(Math.round((1-l)*u[1]+l*h[1]).toString(16))+F(Math.round((1-l)*u[2]+l*h[2]).toString(16))}return o.trim()},qt=function(t,e){e||(e=21);var n=Rt(),i=Yt(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zt({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"]}),Y("endobj"),t.objectNumber=Rt(),Y("<< /ShadingType "+t.type),Y("/ColorSpace /DeviceRGB");var o="/Coords ["+C(parseFloat(t.coords[0]))+" "+C(parseFloat(t.coords[1]))+" ";o+=2===t.type?C(parseFloat(t.coords[2]))+" "+C(parseFloat(t.coords[3])):C(parseFloat(t.coords[2]))+" "+C(parseFloat(t.coords[3]))+" "+C(parseFloat(t.coords[4]))+" "+C(parseFloat(t.coords[5])),Y(o+="]"),t.matrix&&Y("/Matrix ["+t.matrix.toString()+"]"),Y("/Function "+n+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Jt=function(t,e){var n=Nt(),i=Rt();e.push({resourcesOid:n,objectOid:i}),t.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(C).join(" ")+"]"}),r.push({key:"XStep",value:C(t.xStep)}),r.push({key:"YStep",value:C(t.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),Zt({data:t.stream,additionalKeyValues:r}),Y("endobj")},Qt=function(t){var e;for(e in yt)yt.hasOwnProperty(e)&&(yt[e]instanceof ji?qt(yt[e]):yt[e]instanceof Di&&Jt(yt[e],t))},te=function(t){for(var e in t.objectNumber=Rt(),Y("<<"),t)switch(e){case"opacity":Y("/ca "+I(t[e]));break;case"stroke-opacity":Y("/CA "+I(t[e]))}Y(">>"),Y("endobj")},ee=function(){var t;for(t in _t)_t.hasOwnProperty(t)&&te(_t[t])},ne=function(){for(var t in Y("/XObject <<"),Ot)Ot.hasOwnProperty(t)&&Ot[t].objectNumber>=0&&Y("/"+t+" "+Ot[t].objectNumber+" 0 R");At.publish("putXobjectDict"),Y(">>")},ie=function(){for(var t in Y("/Font <<"),gt)gt.hasOwnProperty(t)&&(!1===u||!0===u&&h.hasOwnProperty(t))&&Y("/"+t+" "+gt[t].objectNumber+" 0 R");Y(">>")},re=function(){if(Object.keys(yt).length>0){for(var t in Y("/Shading <<"),yt)yt.hasOwnProperty(t)&&yt[t]instanceof ji&&yt[t].objectNumber>=0&&Y("/"+t+" "+yt[t].objectNumber+" 0 R");At.publish("putShadingPatternDict"),Y(">>")}},oe=function(t){if(Object.keys(yt).length>0){for(var e in Y("/Pattern <<"),yt)yt.hasOwnProperty(e)&&yt[e]instanceof d.TilingPattern&&yt[e].objectNumber>=0&&yt[e].objectNumber<t&&Y("/"+e+" "+yt[e].objectNumber+" 0 R");At.publish("putTilingPatternDict"),Y(">>")}},ae=function(){if(Object.keys(_t).length>0){var t;for(t in Y("/ExtGState <<"),_t)_t.hasOwnProperty(t)&&_t[t].objectNumber>=0&&Y("/"+t+" "+_t[t].objectNumber+" 0 R");At.publish("putGStateDict"),Y(">>")}},se=function(t){Bt(t.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ie(),re(),oe(t.objectOid),ae(),ne(),Y(">>"),Y("endobj")},ce=function(){var t=[];$t(),ee(),Xt(),Qt(t),At.publish("putResources"),t.forEach(se),se({resourcesOid:Ft,objectOid:Number.MAX_SAFE_INTEGER}),At.publish("postPutResources")},le=function(){At.publish("putAdditionalObjects");for(var t=0;t<W.length;t++){var e=W[t];Bt(e.objId,!0),Y(e.content),Y("endobj")}At.publish("postPutAdditionalObjects")},ue=function(t){mt[t.fontName]=mt[t.fontName]||{},mt[t.fontName][t.fontStyle]=t.id},he=function(t,e,n,i,r){var o={id:"F"+(Object.keys(gt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return At.publish("addFont",{font:o,instance:this}),gt[o.id]=o,ue(o),o.id},de=function(t){for(var e=0,n=Q.length;e<n;e++){var i=he.call(this,t[e][0],t[e][1],t[e][2],Q[e][3],!0);!1===u&&(h[i]=!0);var r=t[e][0].split("-");ue({id:i,fontName:r[0],fontStyle:r[1]||""})}At.publish("addFonts",{fonts:gt,dictionary:mt})},pe=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!Ii.console)throw new Error(n);Ii.console.error(n,t),Ii.alert&&alert(n)}},t.foo.bar=t,t.foo},fe=function(t,e){var n,i,r,o,a,s,c,l,u;if(r=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&gt[ut].metadata&&gt[ut].metadata[r]&&gt[ut].metadata[r].encoding&&(o=gt[ut].metadata[r].encoding,!a&&gt[ut].encoding&&(a=gt[ut].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(c=!1,s=[],n=0,i=t.length;n<i;n++)(l=a[t.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(t[n]),s[n].charCodeAt(0)>>8&&(c=!0);t=s.join("")}for(n=t.length;void 0===c&&0!==n;)t.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return t;for(s=e.noBOM?[]:[254,255],n=0,i=t.length;n<i;n++){if((u=(l=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(l-(u<<8))}return String.fromCharCode.apply(void 0,s)},ge=d.__private__.pdfEscape=d.pdfEscape=function(t,e){return fe(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},me=d.__private__.beginPage=function(t){H[++wt]=[],It[wt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},be(wt),X(H[j])},ve=function(t,e){var i,o,a;switch(n=e||n,"string"==typeof t&&(i=m(t.toLowerCase()),Array.isArray(i)&&(o=i[0],a=i[1])),Array.isArray(t)&&(o=t[0]*ht,a=t[1]*ht),isNaN(o)&&(o=r[0],a=r[1]),(o>14400||a>14400)&&(Pi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),r=[o,a],n.substr(0,1)){case"l":a>o&&(r=[a,o]);break;case"p":o>a&&(r=[a,o])}me(r),Xe(Ke),Y(rn),0!==un&&Y(un+" J"),0!==hn&&Y(hn+" j"),At.publish("addPage",{pageNumber:wt})},ye=function(t){t>0&&t<=wt&&(H.splice(t,1),It.splice(t,1),wt--,j>wt&&(j=wt),this.setPage(j))},be=function(t){t>0&&t<=wt&&(j=t)},_e=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return H.length-1},Ce=function(t,e,n){var i,r=void 0;return n=n||{},e=void 0!==e?e:gt[ut].fontStyle,i=(t=void 0!==t?t:gt[ut].fontName).toLowerCase(),void 0!==mt[i]&&void 0!==mt[i][e]?r=mt[i][e]:void 0!==mt[t]&&void 0!==mt[t][e]?r=mt[t][e]:!1===n.disableWarning&&Pi.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=mt.times[e])&&(r=mt.times.normal),r},xe=d.__private__.putInfo=function(){for(var t in Rt(),Y("<<"),Y("/Producer (jsPDF "+Fi.version+")"),lt)lt.hasOwnProperty(t)&&lt[t]&&Y("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+ge(lt[t])+")");Y("/CreationDate ("+S+")"),Y(">>"),Y("endobj")},we=d.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Dt;switch(Rt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+e+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+et;"%"===n.substr(n.length-1)&&(et=parseInt(et)/100),"number"==typeof et&&Y("/OpenAction [3 0 R /XYZ null null "+I(et)+"]")}switch(at||(at="continuous"),at){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}rt&&Y("/PageMode /"+rt),At.publish("putCatalog"),Y(">>"),Y("endobj")},Ie=d.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(z+1)),Y("/Root "+z+" 0 R"),Y("/Info "+(z-1)+" 0 R"),Y("/ID [ <"+k+"> <"+k+"> ]"),Y(">>")},Ae=d.__private__.putHeader=function(){Y("%PDF-"+p),Y("%\xba\xdf\xac\xe0")},Pe=d.__private__.putXRef=function(){var t="0000000000";Y("xref"),Y("0 "+(z+1)),Y("0000000000 65535 f ");for(var e=1;e<=z;e++)Y("function"==typeof V[e]?(t+V[e]()).slice(-10)+" 00000 n ":void 0!==V[e]?(t+V[e]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},Oe=d.__private__.buildDocument=function(){K(),X(G),At.publish("buildDocument"),Ae(),Ht(),le(),ce(),xe(),we();var t=Z;return Pe(),Ie(),Y("startxref"),Y(""+t),Y("%%EOF"),X(H[j]),G.join("\n")},Me=d.__private__.getBlob=function(t){return new Blob([J(t)],{type:"application/pdf"})},Se=d.output=d.__private__.output=pe((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Oe();case"save":d.save(e.filename);break;case"arraybuffer":return J(Oe());case"blob":return Me(Oe());case"bloburi":case"bloburl":if(void 0!==Ii.URL&&"function"==typeof Ii.URL.createObjectURL)return Ii.URL&&Ii.URL.createObjectURL(Me(Oe()))||void 0;Pi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=Oe();try{n=Ei(i)}catch(Tr){n=Ei(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Ii)){var r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+(e.pdfObjectUrl||"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js")+'"><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",o=Ii.open();return null!==o&&o.document.write(r),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Ii)){var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',s=Ii.open();if(null!==s){s.document.write(a);var c=this;s.document.documentElement.querySelector("#pdfViewer").onload=function(){s.document.title=e.filename,s.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return s}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Ii))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',u=Ii.open();if(null!==u&&(u.document.write(l),u.document.title=e.filename),u||"undefined"==typeof safari)return u;break;case"datauri":case"dataurl":return Ii.document.location.href=this.output("datauristring",e);default:return null}})),ke=function(t){return!0===Array.isArray(Pt)&&Pt.indexOf(t)>-1};switch(i){case"pt":ht=1;break;case"mm":ht=72/25.4;break;case"cm":ht=72/2.54;break;case"in":ht=72;break;case"px":ht=1==ke("px_scaling")?.75:96/72;break;case"pc":case"em":ht=12;break;case"ex":ht=6;break;default:throw new Error("Invalid unit: "+i)}N(),L();var Ee=d.__private__.getPageInfo=d.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[t].objId,pageNumber:t,pageContext:It[t]}},Le=d.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in It)if(It[e].objId===t)break;return Ee(e)},Te=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:It[j].objId,pageNumber:j,pageContext:It[j]}};d.addPage=function(){return ve.apply(this,arguments),this},d.setPage=function(){return be.apply(this,arguments),X.call(this,H[j]),this},d.insertPage=function(t){return this.addPage(),this.movePage(j,t),this},d.movePage=function(t,e){var n,i;if(t>e){n=H[t],i=It[t];for(var r=t;r>e;r--)H[r]=H[r-1],It[r]=It[r-1];H[e]=n,It[e]=i,this.setPage(e)}else if(t<e){n=H[t],i=It[t];for(var o=t;o<e;o++)H[o]=H[o+1],It[o]=It[o+1];H[e]=n,It[e]=i,this.setPage(e)}return this},d.deletePage=function(){return ye.apply(this,arguments),this},d.__private__.text=d.text=function(t,e,n,i,r){var o,a,s,c,l,u,d,p,f=(i=i||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var g=n;n=e,e=t,t=g}if(arguments[3]instanceof kt==0?(s=arguments[4],c=arguments[5],"object"==typeof(d=arguments[3])&&null!==d||("string"==typeof s&&(c=s,s=null),"string"==typeof d&&(c=d,d=null),"number"==typeof d&&(s=d,d=null),i={flags:d,angle:s,align:c})):(x("The transform parameter of text() with a Matrix value"),p=r),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return f;var m="",b=!1,_="number"==typeof i.lineHeightFactor?i.lineHeightFactor:$e,w=f.internal.scaleFactor;function I(t){return t=t.split("\t").join(Array(i.TabLen||9).join(" ")),ge(t,d)}function A(t){for(var e,n=t.concat(),i=[],r=n.length;r--;)"string"==typeof(e=n.shift())?i.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?i.push(e[0]):i.push([e[0],e[1],e[2]]);return i}function O(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var i,r,o=t.concat(),a=[],s=o.length;s--;)"string"==typeof(i=o.shift())?a.push(e(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=e(i[0],i[1],i[2]),a.push([r[0],r[1],r[2]]));n=a}return n}var M=!1,S=!0;if("string"==typeof t)M=!0;else if(Array.isArray(t)){var k=t.concat();a=[];for(var E,L=k.length;L--;)("string"!=typeof(E=k.shift())||Array.isArray(E)&&"string"!=typeof E[0])&&(S=!1);M=S}if(!1===M)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var T=tt/f.internal.scaleFactor,R=T*($e-1);switch(i.baseline){case"bottom":n-=R;break;case"top":n+=T-R;break;case"hanging":n+=T-2*R;break;case"middle":n+=T/2-R}if((u=i.maxWidth||0)>0&&("string"==typeof t?t=f.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=f.splitTextToSize(t.join(" "),u))),At.publish("preProcessText",o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ge,activeFontKey:ut,fonts:gt,activeFontSize:tt}}),t=o.text,s=(i=o.options).angle,p instanceof kt==0&&s&&"number"==typeof s){s*=Math.PI/180,0===i.rotationDirection&&(s=-s),y===v.ADVANCED&&(s=-s);var N=Math.cos(s),B=Math.sin(s);p=new kt(N,B,-B,N,0,0)}else s&&s instanceof kt&&(p=s);y!==v.ADVANCED||p||(p=Lt),void 0!==(l=i.charSpace||cn)&&(m+=C(P(l))+" Tc\n",this.setCharSpace(this.getCharSpace()||0));var j=-1,D=void 0!==i.renderingMode?i.renderingMode:i.stroke,F=f.internal.getCurrentPageInfo().pageContext;switch(D){case 0:case!1:case"fill":j=0;break;case 1:case!0:case"stroke":j=1;break;case 2:case"fillThenStroke":j=2;break;case 3:case"invisible":j=3;break;case 4:case"fillAndAddForClipping":j=4;break;case 5:case"strokeAndAddPathForClipping":j=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":j=6;break;case 7:case"addToPathForClipping":j=7}var z=void 0!==F.usedRenderingMode?F.usedRenderingMode:-1;-1!==j?m+=j+" Tr\n":-1!==z&&(m+="0 Tr\n"),-1!==j&&(F.usedRenderingMode=j),c=i.align||"left";var V,G=tt*_,Z=f.internal.pageSize.getWidth(),W=gt[ut];l=i.charSpace||cn,u=i.maxWidth||0,d={};var H=[];if("[object Array]"===Object.prototype.toString.call(t)){var U;a=A(t),"left"!==c&&(V=a.map((function(t){return f.getStringUnitWidth(t,{font:W,charSpace:l,fontSize:tt,doKerning:!1})*tt/w})));var $,K=0;if("right"===c){e-=V[0],t=[],L=a.length;for(var X=0;X<L;X++)0===X?($=Qe(e),U=tn(n)):($=P(K-V[X]),U=-G),t.push([a[X],$,U]),K=V[X]}else if("center"===c){e-=V[0]/2,t=[],L=a.length;for(var q=0;q<L;q++)0===q?($=Qe(e),U=tn(n)):($=P((K-V[q])/2),U=-G),t.push([a[q],$,U]),K=V[q]}else if("left"===c){t=[],L=a.length;for(var J=0;J<L;J++)t.push(a[J])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],L=a.length,u=0!==u?u:Z;for(var Q=0;Q<L;Q++)U=0===Q?tn(n):-G,$=0===Q?Qe(e):0,Q<L-1&&H.push(C(P((u-V[Q])/(a[Q].split(" ").length-1)))),t.push([a[Q],$,U])}}var et="boolean"==typeof i.R2L?i.R2L:it;!0===et&&(t=O(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),At.publish("postProcessText",o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ge,activeFontKey:ut,fonts:gt,activeFontSize:tt}}),t=o.text,b=o.mutex.isHex||!1;var nt=gt[ut].encoding;"WinAnsiEncoding"!==nt&&"StandardEncoding"!==nt||(t=O(t,(function(t,e,n){return[I(t),e,n]}))),a=A(t),t=[];for(var rt,ot,at,st=0,ct=1,lt=Array.isArray(a[0])?ct:st,ht="",dt=function(t,e,n){var r="";return n instanceof kt?(n="number"==typeof i.angle?Et(n,new kt(1,0,0,1,t,e)):Et(new kt(1,0,0,1,t,e),n),y===v.ADVANCED&&(n=Et(new kt(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=C(t)+" "+C(e)+" Td\n",r},pt=0;pt<a.length;pt++){switch(ht="",lt){case ct:at=(b?"<":"(")+a[pt][0]+(b?">":")"),rt=parseFloat(a[pt][1]),ot=parseFloat(a[pt][2]);break;case st:at=(b?"<":"(")+a[pt]+(b?">":")"),rt=Qe(e),ot=tn(n)}void 0!==H&&void 0!==H[pt]&&(ht=H[pt]+" Tw\n"),0===pt?t.push(ht+dt(rt,ot,p)+at):lt===st?t.push(ht+at):lt===ct&&t.push(ht+dt(rt,ot,p)+at)}t=t.join(lt===st?" Tj\nT* ":" Tj\n"),t+=" Tj\n";var ft="BT\n/";return ft+=ut+" "+tt+" Tf\n",ft+=C(tt*_)+" TL\n",ft+=an+"\n",ft+=m,ft+=t,Y(ft+="ET"),h[ut]=!0,f};var Re=d.__private__.clip=d.clip=function(t){return Y("evenodd"===t?"W*":"W"),this};d.clipEvenOdd=function(){return Re("evenodd")},d.__private__.discardPath=d.discardPath=function(){return Y("n"),this};var Ne=d.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(t){return Ne(t)&&(l=t),this};var Be=d.__private__.getStyle=d.getStyle=function(t){var e=l;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},je=d.close=function(){return Y("h"),this};d.stroke=function(){return Y("S"),this},d.fill=function(t){return De("f",t),this},d.fillEvenOdd=function(t){return De("f*",t),this},d.fillStroke=function(t){return De("B",t),this},d.fillStrokeEvenOdd=function(t){return De("B*",t),this};var De=function(t,e){"object"==typeof e?Ve(e,t):Y(t)},Fe=function(t){null===t||y===v.ADVANCED&&void 0===t||(t=Be(t),Y(t))};function ze(t,e,n,i,r){var o=new Di(e||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);o.stream=this.stream;var a=t+"$$"+this.cloneIndex+++"$$";return Tt(a,o),o}var Ve=function(t,e){var n=bt[t.key],i=yt[n];if(i instanceof ji)Y("q"),Y(Ge(e)),i.gState&&d.setGState(i.gState),Y(t.matrix.toString()+" cm"),Y("/"+n+" sh"),Y("Q");else if(i instanceof Di){var r=new kt(1,0,0,-1,0,Cn());t.matrix&&(r=r.multiply(t.matrix||Lt),n=ze.call(i,t.key,t.boundingBox,t.xStep,t.yStep,r).id),Y("q"),Y("/Pattern cs"),Y("/"+n+" scn"),i.gState&&d.setGState(i.gState),Y(e),Y("Q")}},Ge=function(t){switch(t){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ze=d.moveTo=function(t,e){return Y(C(P(t))+" "+C(M(e))+" m"),this},We=d.lineTo=function(t,e){return Y(C(P(t))+" "+C(M(e))+" l"),this},He=d.curveTo=function(t,e,n,i,r,o){return Y([C(P(t)),C(M(e)),C(P(n)),C(M(i)),C(P(r)),C(M(o)),"c"].join(" ")),this};d.__private__.line=d.line=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Ne(r))throw new Error("Invalid arguments passed to jsPDF.line");return y===v.COMPAT?this.lines([[n-t,i-e]],t,e,[1,1],r||"S"):this.lines([[n-t,i-e]],t,e,[1,1]).stroke()},d.__private__.lines=d.lines=function(t,e,n,i,r,o){var a,s,c,l,u,h,d,p;if("number"==typeof t&&(p=n,n=e,e=t,t=p),i=i||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(i)||!Ne(r)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ze(e,n),a=i[0],s=i[1],l=t.length,h=e,d=n,c=0;c<l;c++)2===(u=t[c]).length?We(h=u[0]*a+h,d=u[1]*s+d):He(u[0]*a+h,u[1]*s+d,u[2]*a+h,u[3]*s+d,h=u[4]*a+h,d=u[5]*s+d);return o&&je(),Fe(r),this},d.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.c;switch(n.op){case"m":Ze(i[0],i[1]);break;case"l":We(i[0],i[1]);break;case"c":He.apply(this,i);break;case"h":je()}}return this},d.__private__.rect=d.rect=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Ne(r))throw new Error("Invalid arguments passed to jsPDF.rect");return y===v.COMPAT&&(i=-i),Y([C(P(t)),C(M(e)),C(P(n)),C(P(i)),"re"].join(" ")),Fe(r),this},d.__private__.triangle=d.triangle=function(t,e,n,i,r,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Ne(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,i-e],[r-n,o-i],[t-r,e-o]],t,e,[1,1],a,!0),this},d.__private__.roundedRect=d.roundedRect=function(t,e,n,i,r,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Ne(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),o=Math.min(o,.5*i),this.lines([[n-2*r,0],[r*s,0,r,o-o*s,r,o],[0,i-2*o],[0,o*s,-r*s,o,-r,o],[2*r-n,0],[-r*s,0,-r,-o*s,-r,-o],[0,2*o-i],[0,-o*s,r*s,-o,r,-o]],t+r,e,[1,1],a,!0),this},d.__private__.ellipse=d.ellipse=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Ne(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*i;return Ze(t+n,e),He(t+n,e-a,t+o,e-i,t,e-i),He(t-o,e-i,t-n,e-a,t-n,e),He(t-n,e+a,t-o,e+i,t,e+i),He(t+o,e+i,t+n,e+a,t+n,e),Fe(r),this},d.__private__.circle=d.circle=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||!Ne(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,i)},d.setFont=function(t,e){return ut=Ce(t,e,{disableWarning:!1}),this};var Ue=d.__private__.getFont=d.getFont=function(){return gt[Ce.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var t,e,n={};for(t in mt)if(mt.hasOwnProperty(t))for(e in n[t]=[],mt[t])mt[t].hasOwnProperty(e)&&n[t].push(e);return n},d.addFont=function(t,e,n,i){return he.call(this,t,e,n,i=i||"Identity-H")};var $e,Ke=t.lineWidth||.200025,Xe=d.__private__.setLineWidth=d.setLineWidth=function(t){return Y(C(P(t))+" w"),this};d.__private__.setLineDash=Fi.API.setLineDash=Fi.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return C(P(t))})).join(" "),e=C(P(e)),Y("["+t+"] "+e+" d"),this};var Ye=d.__private__.getLineHeight=d.getLineHeight=function(){return tt*$e};d.__private__.getLineHeight=d.getLineHeight=function(){return tt*$e};var qe=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&($e=t),this},Je=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return $e};qe(t.lineHeight);var Qe=d.__private__.getHorizontalCoordinate=function(t){return P(t)},tn=d.__private__.getVerticalCoordinate=function(t){return y===v.ADVANCED?t:It[j].mediaBox.topRightY-It[j].mediaBox.bottomLeftY-P(t)},en=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(t){return C(Qe(t))},nn=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(t){return C(tn(t))},rn=t.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return zt(rn)},d.__private__.setStrokeColor=d.setDrawColor=function(t,e,n,i){return rn=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),Y(rn),this};var on=t.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return zt(on)},d.__private__.setFillColor=d.setFillColor=function(t,e,n,i){return on=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),Y(on),this};var an=t.textColor||"0 g",sn=d.__private__.getTextColor=d.getTextColor=function(){return zt(an)};d.__private__.setTextColor=d.setTextColor=function(t,e,n,i){return an=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var cn=t.charSpace,ln=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(cn||0)};d.__private__.setCharSpace=d.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cn=t,this};var un=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(t){var e=d.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return un=e,Y(e+" J"),this};var hn=0;d.__private__.setLineJoin=d.setLineJoin=function(t){var e=d.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hn=e,Y(e+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(C(P(t))+" M"),this},d.GState=Ni,d.setGState=function(t){(t="string"==typeof t?_t[Ct[t]]:dn(null,t)).equals(xt)||(Y("/"+t.id+" gs"),xt=t)};var dn=function(t,e){if(!t||!Ct[t]){var n=!1;for(var i in _t)if(_t.hasOwnProperty(i)&&_t[i].equals(e)){n=!0;break}if(n)e=_t[i];else{var r="GS"+(Object.keys(_t).length+1).toString(10);_t[r]=e,e.id=r}return t&&(Ct[t]=e.id),At.publish("addGState",e),e}};d.addGState=function(t,e){return dn(t,e),this},d.saveGraphicsState=function(){return Y("q"),vt.push({key:ut,size:tt,color:an}),this},d.restoreGraphicsState=function(){Y("Q");var t=vt.pop();return ut=t.key,tt=t.size,an=t.color,xt=null,this},d.setCurrentTransformationMatrix=function(t){return Y(t.toString()+" cm"),this},d.comment=function(t){return Y("#"+t),this};var pn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},fn=function(t,e,n,i){pn.call(this,t,e),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var o=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},gn=function(){this.page=wt,this.currentPage=j,this.pages=H.slice(0),this.pagesContext=It.slice(0),this.x=dt,this.y=pt,this.matrix=ft,this.width=bn(j),this.height=Cn(j),this.outputDestination=$,this.id="",this.objectNumber=-1};gn.prototype.restore=function(){wt=this.page,It=this.pagesContext,H=this.pages,dt=this.x,pt=this.y,ft=this.matrix,_n(j=this.currentPage,this.width),xn(j,this.height),$=this.outputDestination};var mn=function(t,e,n,i,r){St.push(new gn),wt=j=0,H=[],dt=t,pt=e,ft=r,me([n,i])},vn=function(t){if(!Mt[t]){var e=new gn,n="Xo"+(Object.keys(Ot).length+1).toString(10);e.id=n,Mt[t]=n,Ot[n]=e,At.publish("addFormObject",e),St.pop().restore()}};for(var yn in d.beginFormObject=function(t,e,n,i,r){return mn(t,e,n,i,r),this},d.endFormObject=function(t){return vn(t),this},d.doFormObject=function(t,e){var n=Ot[Mt[t]];return Y("q"),Y(e.toString()+" cm"),Y("/"+n.id+" Do"),Y("Q"),this},d.getFormObject=function(t){var e=Ot[Mt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},d.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(Li(Me(Oe()),t),"function"==typeof Li.unload&&Ii.setTimeout&&setTimeout(Li.unload,911),this):new Promise((function(e,n){try{var i=Li(Me(Oe()),t);"function"==typeof Li.unload&&Ii.setTimeout&&setTimeout(Li.unload,911),e(i)}catch(Tr){n(Tr.message)}}))},Fi.API)Fi.API.hasOwnProperty(yn)&&("events"===yn&&Fi.API.events.length?function(t,e){var n,i;for(i=e.length-1;-1!==i;i--)t.subscribe.apply(t,[e[i][0]].concat("function"==typeof(n=e[i][1])?[n]:n))}(At,Fi.API.events):d[yn]=Fi.API[yn]);var bn=d.getPageWidth=function(t){return(It[t=t||j].mediaBox.topRightX-It[t].mediaBox.bottomLeftX)/ht},_n=d.setPageWidth=function(t,e){It[t].mediaBox.topRightX=e*ht+It[t].mediaBox.bottomLeftX},Cn=d.getPageHeight=function(t){return(It[t=t||j].mediaBox.topRightY-It[t].mediaBox.bottomLeftY)/ht},xn=d.setPageHeight=function(t,e){It[t].mediaBox.topRightY=e*ht+It[t].mediaBox.bottomLeftY};return d.internal={pdfEscape:ge,getStyle:Be,getFont:Ue,getFontSize:nt,getCharSpace:ln,getTextColor:sn,getLineHeight:Ye,getLineHeightFactor:Je,write:q,getHorizontalCoordinate:Qe,getVerticalCoordinate:tn,getCoordinateString:en,getVerticalCoordinateString:nn,collections:{},newObject:Rt,newAdditionalObject:jt,newObjectDeferred:Nt,newObjectDeferredBegin:Bt,getFilters:Gt,putStream:Zt,events:At,scaleFactor:ht,pageSize:{getWidth:function(){return bn(j)},setWidth:function(t){_n(j,t)},getHeight:function(){return Cn(j)},setHeight:function(t){xn(j,t)}},output:Se,getNumberOfPages:_e,pages:H,out:Y,f2:I,f3:A,getPageInfo:Ee,getPageInfoByObjId:Le,getCurrentPageInfo:Te,getPDFVersion:f,Point:pn,Rectangle:fn,Matrix:kt,hasHotfix:ke},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return bn(j)},set:function(t){_n(j,t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return Cn(j)},set:function(t){xn(j,t)},enumerable:!0,configurable:!0}),de.call(d,Q),ut="F1",ve(r,n),At.publish("initialized"),d}ki=Ii.atob,Ei=Ii.btoa,Ni.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||typeof t!=typeof this)return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return 0===i},Fi.API={events:[]},Fi.version="2.1.1";var zi,Vi=Fi.API,Gi=1,Zi=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wi=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hi=function(t){return t.toFixed(2)},Ui=function(t){return t.toFixed(5)};Vi.__acroform__={};var $i=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Ki=function(t){return t*Gi},Xi=function(t){var e=new yr,n=Lr.internal.getHeight(t)||0,i=Lr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Hi(i)),Number(Hi(n))],e},Yi=Vi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},qi=Vi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Ji=Vi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},Qi=Vi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ji(t,e-1)},tr=Vi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Yi(t,e-1)},er=Vi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qi(t,e-1)},nr=Vi.__acroform__.calculateCoordinates=function(t){var e=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,i=t[0],r=t[1],o=t[2],a=t[3],s={};return s.lowerLeft_X=e(i)||0,s.lowerLeft_Y=n(r+a)||0,s.upperRight_X=e(i+o)||0,s.upperRight_Y=n(r)||0,[Number(Hi(s.lowerLeft_X)),Number(Hi(s.lowerLeft_Y)),Number(Hi(s.upperRight_X)),Number(Hi(s.upperRight_Y))]},ir=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=rr(t,t.V||t.DV),i=zi.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(zi.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Hi(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=new Xi(t);return r.stream=e.join("\n"),r}},rr=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),o=n,a=Lr.internal.getHeight(t)||0;a=a<0?-a:a;var s=Lr.internal.getWidth(t)||0;s=s<0?-s:s;var c=function(e,n,i){return e+1<r.length&&or(n+" "+r[e+1],t,i).width<=s-4};o++;t:for(;o>0;){e="",o--;var l,u,h=or("3",t,o).height,d=t.multiline?a-o:(a-h)/2,p=d+=2,f=0,g=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+or(e,t,o=12).width+", FieldWidth:"+s+"\n";break}var m="",v=0;for(var y in r)if(r.hasOwnProperty(y)){m=" "==(m+=r[y]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var b=parseInt(y),_=c(b,m,o),C=y>=r.length-1;if(_&&!C){m+=" ";continue}if(_||C){if(C)g=b;else if(t.multiline&&(h+2)*(v+2)+2>a)continue t}else{if(!t.multiline)continue t;if((h+2)*(v+2)+2>a)continue t;g=b}for(var x="",w=f;w<=g;w++)x+=r[w]+" ";switch(x=" "==x.substr(x.length-1)?x.substr(0,x.length-1):x,u=or(x,t,o).width,t.textAlign){case"right":l=s-u-2;break;case"center":l=(s-u)/2;break;case"left":default:l=2}e+=Hi(l)+" "+Hi(p)+" Td\n",e+="("+Zi(x)+") Tj\n",e+=-Hi(l)+" 0 Td\n",p=-(o+2),u=0,f=g+1,v++,m=""}break}return i.text=e,i.fontSize=o,i},or=function(t,e,n){var i=zi.internal.getFont(e.fontName,e.fontStyle),r=zi.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:zi.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},ar={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},sr=function(){zi.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=zi.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.objId=void 0,n.hasAnnotation&&lr.call(zi,n)}},cr=function(t){zi.internal.acroformPlugin.printedOut&&(zi.internal.acroformPlugin.printedOut=!1,zi.internal.acroformPlugin.acroFormDictionaryRoot=null),zi.internal.acroformPlugin.acroFormDictionaryRoot||fr.call(zi),zi.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)},lr=function(t){var e={type:"reference",object:t};void 0===zi.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===e.type&&t.object===e.object}))&&zi.internal.getPageInfo(t.page).pageContext.annotations.push(e)},ur=function(){if(void 0===zi.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");zi.internal.write("/AcroForm "+zi.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")},hr=function(){zi.internal.events.unsubscribe(zi.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete zi.internal.acroformPlugin.acroFormDictionaryRoot._eventID,zi.internal.acroformPlugin.printedOut=!0},dr=function(t){var e=!t;for(var n in t||(zi.internal.newObjectDeferredBegin(zi.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),zi.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||zi.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(n)){var i=t[n],r=[],o=i.Rect;if(i.Rect&&(i.Rect=nr.call(this,i.Rect)),zi.internal.newObjectDeferredBegin(i.objId,!0),i.DA=Lr.createDefaultAppearanceStream(i),"object"==typeof i&&"function"==typeof i.getKeyValueListForStream&&(r=i.getKeyValueListForStream()),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var a=ir.call(this,i);r.push({key:"AP",value:"<</N "+a+">>"}),zi.internal.acroformPlugin.xForms.push(a)}if(i.appearanceStreamContent){var s="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var l=i.appearanceStreamContent[c];if(s+="/"+c+" ",s+="<<",Object.keys(l).length>=1||Array.isArray(l)){for(var n in l)if(l.hasOwnProperty(n)){var u=l[n];"function"==typeof u&&(u=u.call(this,i)),s+="/"+n+" "+u+" ",zi.internal.acroformPlugin.xForms.indexOf(u)>=0||zi.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=l)&&(u=u.call(this,i)),s+="/"+n+" "+u,zi.internal.acroformPlugin.xForms.indexOf(u)>=0||zi.internal.acroformPlugin.xForms.push(u);s+=">>"}r.push({key:"AP",value:"<<\n"+s+">>"})}zi.internal.putStream({additionalKeyValues:r}),zi.internal.out("endobj")}e&&pr.call(this,zi.internal.acroformPlugin.xForms)},pr=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=e,i=t[e];zi.internal.newObjectDeferredBegin(i&&i.objId,!0),"object"==typeof i&&"function"==typeof i.putStream&&i.putStream(),delete t[n]}},fr=function(){if(void 0!==this.internal&&(void 0===this.internal.acroformPlugin||!1===this.internal.acroformPlugin.isInitialized)){if(zi=this,_r.FieldNum=0,this.internal.acroformPlugin=JSON.parse(JSON.stringify(ar)),this.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gi=zi.internal.scaleFactor,zi.internal.acroformPlugin.acroFormDictionaryRoot=new br,zi.internal.acroformPlugin.acroFormDictionaryRoot._eventID=zi.internal.events.subscribe("postPutResources",hr),zi.internal.events.subscribe("buildDocument",sr),zi.internal.events.subscribe("putCatalog",ur),zi.internal.events.subscribe("postPutPages",dr),zi.internal.acroformPlugin.isInitialized=!0}},gr=Vi.__acroform__.arrayToPdfArray=function(t){if(Array.isArray(t)){for(var e="[",n=0;n<t.length;n++)switch(0!==n&&(e+=" "),typeof t[n]){case"boolean":case"number":case"object":e+=t[n].toString();break;case"string":"/"!==t[n].substr(0,1)?e+="("+Zi(t[n].toString())+")":e+=t[n].toString()}return e+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mr=function(t){return(t=t||"").toString(),"("+Zi(t)+")"},vr=function(){var t;Object.defineProperty(this,"objId",{configurable:!0,get:function(){return t||(t=zi.internal.newObjectDeferred()),t},set:function(e){t=e}})};vr.prototype.toString=function(){return this.objId+" 0 R"},vr.prototype.putStream=function(){var t=this.getKeyValueListForStream();zi.internal.putStream({data:this.stream,additionalKeyValues:t}),zi.internal.out("endobj")},vr.prototype.getKeyValueListForStream=function(){return function(t){var e=[],n=Object.getOwnPropertyNames(t).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)}));for(var i in n)if(!1===Object.getOwnPropertyDescriptor(t,n[i]).configurable){var r=n[i],o=t[r];o&&(Array.isArray(o)?e.push({key:r,value:gr(o)}):o instanceof vr?e.push({key:r,value:o.objId+" 0 R"}):"function"!=typeof o&&e.push({key:r,value:o}))}return e}(this)};var yr=function(){vr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writeable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writeable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writeable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,writeable:!0,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writeable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};$i(yr,vr);var br=function(){vr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t)return"("+t+")"},set:function(e){t=e}})};$i(br,vr);var _r=function t(){vr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(e,3))},set:function(t){this.F=!0===Boolean(t)?tr(e,3):er(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(t){i=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(t){i[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(t){i[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(t){i[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(t){i[3]=t}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Mr)return;o="FieldObject"+t.FieldNum++}return"("+Zi(o)+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/Gi:l},set:function(t){l=t}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Mr||this instanceof kr))return mr(h)},set:function(t){t=t.toString(),h=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Ar==0?mr(d):d},set:function(t){t=t.toString(),d=this instanceof Ar==0?"("===t.substr(0,1)?Wi(t.substr(1,t.length-2)):Wi(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ar==1?Wi(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof Ar==1?"/"+t:t}});var p=null;Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ar==0?mr(p):p},set:function(t){t=t.toString(),p=this instanceof Ar==0?"("===t.substr(0,1)?Wi(t.substr(1,t.length-2)):Wi(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ar==1?Wi(p.substr(1,p.length-1)):p},set:function(t){t=t.toString(),p=this instanceof Ar==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,writeable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writeable:!0,get:function(){if(f)return f},set:function(t){f=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,1))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,1):er(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,2))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,2):er(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,3))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,3):er(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');m=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(m){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};$i(_r,vr);var Cr=function(){_r.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return gr(e)},set:function(t){var n,i;i=[],"string"==typeof(n=t)&&(i=function(t,e,n){n||(n=1);for(var i,r=[];i=e.exec(t);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,18))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,18):er(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,19))},set:function(t){!0===this.combo&&(this.Ff=!0===Boolean(t)?tr(this.Ff,19):er(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=tr(this.Ff,20),e.sort()):this.Ff=er(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,22))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,22):er(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,23):er(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,27))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,27):er(this.Ff,27)}}),this.hasAppearanceStream=!1};$i(Cr,_r);var xr=function(){Cr.call(this),this.fontName="helvetica",this.combo=!1};$i(xr,Cr);var wr=function(){xr.call(this),this.combo=!0};$i(wr,xr);var Ir=function(){wr.call(this),this.edit=!0};$i(Ir,wr);var Ar=function(){_r.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,15))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,15):er(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,16))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,16):er(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,17))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,17):er(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,26):er(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){if(0!==Object.keys(e).length){var t,n=[];for(t in n.push("<<"),e)n.push("/"+t+" ("+e[t]+")");return n.push(">>"),n.join("\n")}},set:function(t){"object"==typeof t&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};$i(Ar,_r);var Pr=function(){Ar.call(this),this.pushButton=!0};$i(Pr,Ar);var Or=function(){Ar.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};$i(Or,Ar);var Mr=function(){var t,e;_r.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t,e=[];for(t in e.push("<<"),i)e.push("/"+t+" ("+i[t]+")");return e.push(">>"),e.join("\n")},set:function(t){"object"==typeof t&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$i(Mr,_r),Or.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Or.prototype.createOption=function(t){var e=new Mr;return e.Parent=this,e.optionName=t,this.Kids.push(e),Nr.call(this,e),e};var Sr=function(){Ar.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lr.CheckBox.createAppearanceStream()};$i(Sr,Ar);var kr=function(){_r.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,13))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,13):er(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,21))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,21):er(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,23):er(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,24))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,24):er(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,25))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,25):er(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,26):er(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$i(kr,_r);var Er=function(){kr.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Qi(this.Ff,14))},set:function(t){this.Ff=!0===Boolean(t)?tr(this.Ff,14):er(this.Ff,14)}}),this.password=!0};$i(Er,kr);var Lr={CheckBox:{createAppearanceStream:function(){return{N:{On:Lr.CheckBox.YesNormal},D:{On:Lr.CheckBox.YesPushDown,Off:Lr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=new Xi(t),n=[],i=zi.internal.getFont(t.fontName,t.fontStyle).id,r=zi.__private__.encodeColorString(t.color),o=rr(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Hi(Lr.internal.getWidth(t))+" "+Hi(Lr.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Hi(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=new Xi(t),n=zi.internal.getFont(t.fontName,t.fontStyle).id,i=zi.__private__.encodeColorString(t.color),r=[],o=Lr.internal.getHeight(t),a=Lr.internal.getWidth(t),s=rr(t,t.caption);return r.push("1 g"),r.push("0 0 "+Hi(a)+" "+Hi(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Hi(a-1)+" "+Hi(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Hi(s.fontSize)+" Tf "+i),r.push(s.text),r.push("ET"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=new Xi(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Hi(Lr.internal.getWidth(t))+" "+Hi(Lr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Lr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Lr.RadioButton.Circle.YesNormal,e.D[t]=Lr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=new Xi(t),n=[],i=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((i*Lr.internal.Bezier_C).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ui(Lr.internal.getWidth(t)/2)+" "+Ui(Lr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=new Xi(t),n=[],i=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4,r=(i=Number((.9*i).toFixed(5)),Number((2*i).toFixed(5))),o=Number((r*Lr.internal.Bezier_C).toFixed(5)),a=Number((i*Lr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ui(Lr.internal.getWidth(t)/2)+" "+Ui(Lr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ui(Lr.internal.getWidth(t)/2)+" "+Ui(Lr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=new Xi(t),n=[],i=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*Lr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ui(Lr.internal.getWidth(t)/2)+" "+Ui(Lr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Lr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Lr.RadioButton.Cross.YesNormal,e.D[t]=Lr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=new Xi(t),n=[],i=Lr.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Hi(Lr.internal.getWidth(t)-2)+" "+Hi(Lr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Hi(i.x1.x)+" "+Hi(i.x1.y)+" m"),n.push(Hi(i.x2.x)+" "+Hi(i.x2.y)+" l"),n.push(Hi(i.x4.x)+" "+Hi(i.x4.y)+" m"),n.push(Hi(i.x3.x)+" "+Hi(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=new Xi(t),n=Lr.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Hi(Lr.internal.getWidth(t))+" "+Hi(Lr.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Hi(Lr.internal.getWidth(t)-2)+" "+Hi(Lr.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Hi(n.x1.x)+" "+Hi(n.x1.y)+" m"),i.push(Hi(n.x2.x)+" "+Hi(n.x2.y)+" l"),i.push(Hi(n.x4.x)+" "+Hi(n.x4.y)+" m"),i.push(Hi(n.x3.x)+" "+Hi(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=new Xi(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Hi(Lr.internal.getWidth(t))+" "+Hi(Lr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=zi.internal.getFont(t.fontName,t.fontStyle).id,n=zi.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Lr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Lr.internal.getWidth(t),n=Lr.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},Lr.internal.getWidth=function(t){var e=0;return"object"==typeof t&&(e=Ki(t.Rect[2])),e},Lr.internal.getHeight=function(t){var e=0;return"object"==typeof t&&(e=Ki(t.Rect[3])),e};var Tr,Rr,Nr=Vi.addField=function(t){if(fr.call(this),!(t instanceof _r))throw new Error("Invalid argument passed to jsPDF.addField.");return cr.call(this,t),t.page=zi.internal.getCurrentPageInfo().pageNumber,this};Vi.AcroFormChoiceField=Cr,Vi.AcroFormListBox=xr,Vi.AcroFormComboBox=wr,Vi.AcroFormEditBox=Ir,Vi.AcroFormButton=Ar,Vi.AcroFormPushButton=Pr,Vi.AcroFormRadioButton=Or,Vi.AcroFormCheckBox=Sr,Vi.AcroFormTextField=kr,Vi.AcroFormPasswordField=Er,Vi.AcroFormAppearance=Lr,Vi.AcroForm={ChoiceField:Cr,ListBox:xr,ComboBox:wr,EditBox:Ir,Button:Ar,PushButton:Pr,RadioButton:Or,CheckBox:Sr,TextField:kr,PasswordField:Er,Appearance:Lr},Fi.AcroForm={ChoiceField:Cr,ListBox:xr,ComboBox:wr,EditBox:Ir,Button:Ar,PushButton:Pr,RadioButton:Or,CheckBox:Sr,TextField:kr,PasswordField:Er,Appearance:Lr},function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(t,i){var r,o;i=i||e;var a,s,c,l=e;if(x(t))for(c in n)for(a=n[c],r=0;r<a.length;r+=1){for(s=!0,o=0;o<a[r].length;o+=1)if(void 0!==a[r][o]&&a[r][o]!==t[o]){s=!1;break}if(!0===s){l=c;break}}else for(c in n)for(a=n[c],r=0;r<a.length;r+=1){for(s=!0,o=0;o<a[r].length;o+=1)if(void 0!==a[r][o]&&a[r][o]!==t.charCodeAt(o)){s=!1;break}if(!0===s){l=c;break}}return l===e&&i!==e&&(l=i),l},r=function t(e){for(var n=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===m.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===m.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var a="",s=0,c=e.transparency.length;s<c;s++)a+=e.transparency[s]+" "+e.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}if(void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"}),i({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:void 0!==e.filter?["/"+e.filter]:void 0}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var l={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:"/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,data:e.sMask};"filter"in e&&(l.filter=e.filter),t.call(this,l)}e.colorSpace===m.INDEXED&&(this.internal.newObject(),i({data:I(new Uint8Array(e.palette))}),n("endobj"))},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var i in e)n("/I"+(t=e[i]).index,t.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var t=this.internal.collections.addImage_images;return s.call(this),t},l=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(e){return"function"==typeof t["process"+e.toUpperCase()]},h=function(t){return"object"==typeof t&&1===t.nodeType},d=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(0===i.indexOf("data:image/"))return ki(unescape(i).split("base64,").pop());var r=t.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;case"JPEG":case"JPG":default:o="image/jpeg"}return ki(e.toDataURL(o,1).split("base64,").pop())}},p=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},f=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},g=function(t,e,n,i,r,o){var a=f.call(this,n,i,r),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=a[0],i=a[1],u[r.index]=r,o){o*=Math.PI/180;var h=Math.cos(o),d=Math.sin(o),p=function(t){return t.toFixed(4)},g=[p(h),p(d),p(-1*d),p(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(t),l(e+i),"cm"].join(" ")),this.internal.write(g.join(" ")),this.internal.write([s(n),"0","0",s(i),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(i),s(t),l(e+i),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},m=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(t){var e,n,i=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;else if(x(t))for(n=t.byteLength/2,e=0;e<n;e++)i=(i<<5)-i+t[e],i|=0;return i},b=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},_=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var i=/^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(e[0]);Array.isArray(i)&&(n={mimeType:i[1],charset:i[2],data:e[1]})}return n},C=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return C()&&t instanceof ArrayBuffer};var x=t.__addimage__.isArrayBufferView=function(t){return C()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},w=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},I=t.__addimage__.arrayBufferToBinaryString=function(t){try{return ki(Ei(String.fromCharCode.apply(null,t)))}catch(e){if("undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.reduce)return new Uint8Array(t).reduce((function(t,e){return t.push(String.fromCharCode(e)),t}),[]).join("")}};t.addImage=function(){var t,n,i,r,o,a,c,l,u;if("number"==typeof arguments[1]?(n=e,i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[4],c=arguments[5],l=arguments[6],u=arguments[7]):(n=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],a=arguments[5],c=arguments[6],l=arguments[7],u=arguments[8]),"object"==typeof(t=arguments[0])&&!h(t)&&"imageData"in t){var d=t;t=d.imageData,n=d.format||n||e,i=d.x||i||0,r=d.y||r||0,o=d.w||d.width||o,a=d.h||d.height||a,c=d.alias||c,l=d.compression||l,u=d.rotation||d.angle||u}var p=this.internal.getFilters();if(void 0===l&&-1!==p.indexOf("FlateEncode")&&(l="SLOW"),isNaN(i)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var f=A.call(this,t,n,c,l);return g.call(this,i,r,o,a,f,u),this};var A=function(n,r,o,a){var s,c,f;if("string"==typeof n&&i(n)===e){n=unescape(n);var g=P(n,!1);(""!==g||void 0!==(g=t.loadFile(n,!0)))&&(n=g)}if(h(n)&&(n=d(n,r)),r=i(n,r),!u(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(f=o)||0===f.length)&&(o=function(t){return"string"==typeof t||x(t)?y(t):null}(n)),(s=p.call(this,o))||(C()&&(n instanceof Uint8Array||(c=n,n=w(n))),s=this["process"+r.toUpperCase()](n,l.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:v.NONE}(a),c)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},P=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var i,r="";if("string"==typeof t){i=null!==(n=_(t))?n.data:t;try{r=ki(i)}catch(t){if(e)throw b(i)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};t.getImageProperties=function(n){var r,o,a="";if(h(n)&&(n=d(n)),"string"==typeof n&&i(n)===e&&(""===(a=P(n,!1))&&(a=t.loadFile(n)||""),n=a),o=i(n),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!C()||n instanceof Uint8Array||(n=w(n)),!(r=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=o,r}}(Fi.API),Tr=Fi.API,Rr=function(t){if(void 0!==t&&""!=t)return!0},Fi.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Tr.events.push(["putPage",function(t){for(var e,n,i,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),s=t.pageContext.annotations,c=!1,l=0;l<s.length&&!c;l++)switch((e=s[l]).type){case"link":(Rr(e.options.url)||Rr(e.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<s.length;u++)switch((e=s[u]).type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var h=this.internal.newAdditionalObject(),d=this.internal.newAdditionalObject(),p=e.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+r(e.bounds.x)+" "+o(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y)+"] ")+"/Contents ("+e.contents+")",i+=" /Popup "+d.objId+" 0 R",i+=" /P "+a.objId+" 0 R",h.content=i+=" /T ("+p+") >>";var f=h.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+r(e.bounds.x+30)+" "+o(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w+30)+" "+o(e.bounds.y)+"] ")+" /Parent "+f,e.open&&(i+=" /Open true"),d.content=i+=" >>",this.internal.write(h.objId,"0 R",d.objId,"0 R");break;case"freetext":i="<</Type /Annot /Subtype /FreeText "+(n="/Rect ["+r(e.bounds.x)+" "+o(e.bounds.y)+" "+r(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y+e.bounds.h)+"] ")+"/Contents ("+e.contents+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+(e.color||"#000000")+")",i+=" /Border [0 0 0]",this.internal.write(i+=" >>");break;case"link":if(e.options.name){var g=this.annotations._nameMap[e.options.name];e.options.pageNumber=g.page,e.options.top=g.y}else e.options.top||(e.options.top=0);if(n="/Rect ["+r(e.x)+" "+o(e.y)+" "+r(e.x+e.w)+" "+o(e.y+e.h)+"] ",i="",e.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+e.options.url+") >>";else if(e.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,i+=" /FitV "+e.options.left+"]";break;case"XYZ":default:var m=o(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),i+=" /XYZ "+e.options.left+" "+m+" "+e.options.zoom+"]"}""!=i&&this.internal.write(i+=" >>")}this.internal.write("]")}}]),Tr.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},Tr.link=function(t,e,n,i,r){this.internal.getCurrentPageInfo().pageContext.annotations.push({x:t,y:e,w:n,h:i,options:r,type:"link"})},Tr.textWithLink=function(t,e,n,i){var r=this.getTextWidth(t),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,n,i),this.link(e,(n+=.2*o)-o,r,o,i),r},Tr.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},a=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},s=t.__arabicParser__.isArabicEndLetter=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(t){return a(t)&&r.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var l=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return a(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,i=n,r="",o=0;for(e=0;e<t.length;e+=1)void 0!==i[t.charCodeAt(e)]?(o++,"number"==typeof(i=i[t.charCodeAt(e)])&&(r+=String.fromCharCode(i),i=n,o=0),e===t.length-1&&(i=n,r+=t.charAt(e-(o-1)),e-=o-1,o=0)):(i=n,r+=t.charAt(e-o),e-=o,o=0);return r};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==i[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return a(t)?!1===o(t)?-1:!l(t)||!a(e)&&!a(n)||!a(n)&&s(e)||s(t)&&!a(e)||s(t)&&c(e)||s(t)&&s(e)?0:u(t)&&a(e)&&!s(e)&&a(n)&&l(n)?3:s(t)||!a(n)?1:2:-1},p=function(t){var n=0,i=0,r=0,o="",s="",c="",l=(t=t||"").split("\\s+"),u=[];for(n=0;n<l.length;n+=1){for(u.push(""),i=0;i<l[n].length;i+=1)s=l[n][i-1],c=l[n][i+1],a(o=l[n][i])?(r=d(o,s,c),u[n]+=-1!==r?String.fromCharCode(e[o.charCodeAt(0)][r]):o):u[n]+=o;u[n]=h(u[n])}return u.join(" ")},f=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var i=0;for(n=[],i=0;i<e.length;i+=1)Array.isArray(e[i])?n.push([p(e[i][0]),e[i][1],e[i][2]]):n.push([p(e[i])]);t=n}else t=p(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",f])}(Fi.API),Fi.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(t){i=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Fi.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(t){a=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){i.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),r=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,a=0,s=0,c=0;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var l=e.maxWidth;l>0?"string"==typeof t?t=this.splitTextToSize(t,l):"[object Array]"===Object.prototype.toString.call(t)&&(t=this.splitTextToSize(t.join(" "),l)):t=Array.isArray(t)?t:[t];for(var u=0;u<t.length;u++)a<(c=this.getStringUnitWidth(t[u],{font:r})*n)&&(a=c);return 0!==a&&(s=t.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||e,c=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===t.lineNumber?(t.x=(r.x||0)+(r.width||0),t.y=r.y||0):r.y+r.height+t.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=s.top,l&&c&&(this.printHeaderRow(t.lineNumber,!0),t.y+=c[0].height)):t.y=r.y+r.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-a,t.y+a,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+a,{align:"center",baseline:"top",maxWidth:t.width-a-a}):this.text(t.text,t.x+a,t.y+a,{align:"left",baseline:"top",maxWidth:t.width-a-a})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,c,l,u){if(i.call(this),!c)throw new Error("No data for PDF table.");var h,d,p,f,g=[],m=[],v=[],y={},b={},_=[],C=[],x=(u=u||{}).autoSize||!1,w=!1!==u.printHeaders,I=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,A=u.margins||Object.assign({width:this.getPageWidth()},e),P="number"==typeof u.padding?u.padding:3,O=u.headerBackgroundColor||"#c8c8c8";if(r.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=O,this.setFontSize(I),null==l)m=g=Object.keys(c[0]),v=g.map((function(){return"left"}));else if(Array.isArray(l)&&"object"==typeof l[0])for(g=l.map((function(t){return t.name})),m=l.map((function(t){return t.prompt||t.name||""})),v=g.map((function(t){return t.align||"left"})),h=0;h<l.length;h+=1)b[l[h].name]=l[h].width*(19.049976/25.4);else Array.isArray(l)&&"string"==typeof l[0]&&(m=g=l,v=g.map((function(){return"left"})));if(x)for(h=0;h<g.length;h+=1){for(y[f=g[h]]=c.map((function(t){return t[f]})),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(m[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=y[f],this.setFont(void 0,"normal"),p=0;p<d.length;p+=1)_.push(this.getTextDimensions(d[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[f]=Math.max.apply(null,_)+P+P,_=[]}if(w){var M={};for(h=0;h<g.length;h+=1)M[g[h]]={},M[g[h]].text=m[h],M[g[h]].align=v[h];var S=s.call(this,M,b);C=g.map((function(e){return new o(t,n,b[e],S,M[e].text,void 0,M[e].align)})),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var k=l.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(h=0;h<c.length;h+=1){var E=s.call(this,c[h],b);for(p=0;p<g.length;p+=1)a.call(this,new o(t,n,b[g[p]],E,c[h][g[p]],h+2,k[g[p]]))}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var s=function(t,e){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(e){return[e,t[e]]})).map((function(t){var e=t[0],n=t[1];return"object"==typeof n?[e,n.text]:[e,n]})).map((function(t){return this.splitTextToSize(t[1],e[t[0]]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*i/r+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){i.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var c=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1)r=this.internal.__cell__.tableHeaderRow[l].clone(),e&&(r.y=this.internal.__cell__.margins.top||0,c.push(r)),r.lineNumber=t,this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,r);c.length>0&&this.setTableHeaderRow(c),this.setFont(void 0,"normal"),n=!1}}(Fi.API),function(t){var e,n,i,r,o,a,s,c,l,u=function(t){return this.isStrokeTransparent=(t=t||{}).isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new c,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new a,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new a,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var h=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(t){a=Boolean(t)}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(t){s=t}});var c=[];Object.defineProperty(this,"pageBreaks",{get:function(){return c},set:function(t){c=t}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(t){t instanceof u&&(l=t)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(t){l.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=d(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=d(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(e.r,e.g,e.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],i=e[3],r=e[4],o=e[6],a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===a?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var s="";("bold"===i||parseInt(i,10)>=700||"bold"===n)&&(s="bold"),"italic"===n&&(s+="italic"),0===s.length&&(s="normal");for(var c="",l=o.replace(/"|'/g,"").split(/\s*,\s*/),u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<l.length;h++){if(void 0!==this.pdf.internal.getFont(l[h],s,{noFallback:!0,disableWarning:!0})){c=l[h];break}if("bolditalic"===s&&void 0!==this.pdf.internal.getFont(l[h],"bold",{noFallback:!0,disableWarning:!0}))c=l[h],s="bold";else if(void 0!==this.pdf.internal.getFont(l[h],"normal",{noFallback:!0,disableWarning:!0})){c=l[h],s="normal";break}}if(""===c)for(var d=0;d<l.length;d++)if(u[l[d]]){c=u[l[d]];break}this.pdf.setFont(c=""===c?"Times":c,s)}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw Pi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(t,e)},h.prototype.closePath=function(){var t=new a(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"==typeof this.path[e+1]&&"number"==typeof this.path[e+1].x){t=new a(this.path[e+1].x,this.path[e+1].y),this.path.push({type:"lt",x:t.x,y:t.y});break}"object"==typeof this.path[e+2]&&"number"==typeof this.path[e+2].x&&this.path.push(JSON.parse(JSON.stringify(this.path[e+2]))),this.path.push({type:"close"}),this.ctx.lastPoint=new a(t.x,t.y)},h.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw Pi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(t,e,n,i){if(isNaN(n)||isNaN(i)||isNaN(t)||isNaN(e))throw Pi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new a(n,i)),o=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:r.x,y:r.y}),this.ctx.lastPoint=new a(r.x,r.y)},h.prototype.bezierCurveTo=function(t,e,n,i,r,o){if(isNaN(r)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw Pi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(r,o)),c=this.ctx.transform.applyToPoint(new a(t,e)),l=this.ctx.transform.applyToPoint(new a(n,i));this.path.push({type:"bct",x1:c.x,y1:c.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},h.prototype.arc=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r))throw Pi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(t,e));t=s.x,e=s.y;var c=this.ctx.transform.applyToPoint(new a(0,n)),l=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:i,endAngle:r,counterclockwise:o})},h.prototype.arcTo=function(t,e,n,i,r){throw new Error("arcTo not implemented.")},h.prototype.rect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw Pi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},h.prototype.fillRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw Pi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},h.prototype.strokeRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw Pi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(t,e,n,i),this.stroke())},h.prototype.clearRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw Pi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,i))},h.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},h.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(t){var e,n,i,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,i=0,r=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=parseFloat(o[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var a=new Ti(t);t=a.ok?a.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,i=t.substring(3,4),i+=i):(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:e,g:n,b:i,a:r,style:t}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw Pi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!p.call(this)){n=C.call(this,n);var r=L(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;P.call(this,{text:t,x:e,y:n,scale:o,angle:r,align:this.textAlign,maxWidth:i})}},h.prototype.strokeText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw Pi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){i=isNaN(i)?void 0:i,n=C.call(this,n);var r=L(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;P.call(this,{text:t,x:e,y:n,scale:o,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},h.prototype.measureText=function(t){if("string"!=typeof t)throw Pi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,i=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*i/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:r*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw Pi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(t){if(isNaN(t))throw Pi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new c(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},h.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw Pi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o))throw Pi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new c(t,e,n,i,r,o);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(t,e,n,i,r,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,o=isNaN(o)?0:o,this.ctx.transform=new c(t,e,n,i,r,o)},h.prototype.drawImage=function(t,e,n,i,r,o,a,l,u){var h=this.pdf.getImageProperties(t),d=1,p=1,f=1,m=1;void 0!==i&&void 0!==l&&(f=l/i,m=u/r,d=h.width/i*l/i,p=h.height/r*u/r),void 0===o&&(o=e,a=n,e=0,n=0),void 0!==i&&void 0===l&&(l=i,u=r),void 0===i&&void 0===l&&(l=h.width,u=h.height);for(var b,C=this.ctx.transform.decompose(),x=L(C.rotate.shx),w=new c,I=(w=(w=(w=w.multiply(C.translate)).multiply(C.skew)).multiply(C.scale)).applyToRectangle(new s(o-e*f,a-n*m,i*d,r*p)),A=g.call(this,I),P=[],O=0;O<A.length;O+=1)-1===P.indexOf(A[O])&&P.push(A[O]);if(y(P),this.autoPaging)for(var M=P[P.length-1],S=P[0];S<M+1;S++){if(this.pdf.setPage(S),0!==this.ctx.clip_path.length){var k=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX,-1*this.pdf.internal.pageSize.height*(S-1)+this.posY),_.call(this,"fill",!0),this.path=k}var E=JSON.parse(JSON.stringify(I));E=v([E],this.posX,-1*this.pdf.internal.pageSize.height*(S-1)+this.posY)[0],this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,x)}else this.pdf.addImage(t,"JPEG",I.x,I.y,I.w,I.h,null,null,x)};var g=function(t,e,n){var i=[];switch(e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height,t.type){default:case"mt":case"lt":i.push(Math.floor((t.y+this.posY)/n)+1);break;case"arc":i.push(Math.floor((t.y+this.posY-t.radius)/n)+1),i.push(Math.floor((t.y+this.posY+t.radius)/n)+1);break;case"qct":var r=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);i.push(Math.floor(r.y/n)+1),i.push(Math.floor((r.y+r.h)/n)+1);break;case"bct":var o=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);i.push(Math.floor(o.y/n)+1),i.push(Math.floor((o.y+o.h)/n)+1);break;case"rect":i.push(Math.floor((t.y+this.posY)/n)+1),i.push(Math.floor((t.y+t.h+this.posY)/n)+1)}for(var a=0;a<i.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<i[a];)m.call(this);return i},m=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=o},v=function(t,e,n){for(var i=0;i<t.length;i++)switch(t[i].type){case"bct":t[i].x2+=e,t[i].y2+=n;case"qct":t[i].x1+=e,t[i].y1+=n;case"mt":case"lt":case"arc":default:t[i].x+=e,t[i].y+=n}return t},y=function(t){return t.sort((function(t,e){return t-e}))},b=function(t,e){for(var n,i,r=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,c=s*this.ctx.transform.scaleX,l=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],p=0;p<h.length;p++)if(void 0!==h[p].x)for(var f=g.call(this,h[p]),b=0;b<f.length;b+=1)-1===d.indexOf(f[b])&&d.push(f[b]);for(var C=0;C<d.length;C++)for(;this.pdf.internal.getNumberOfPages()<d[C];)m.call(this);if(y(d),this.autoPaging)for(var x=d[d.length-1],w=d[0];w<x+1;w++){if(this.pdf.setPage(w),this.fillStyle=r,this.strokeStyle=o,this.lineCap=a,this.lineWidth=c,this.lineJoin=l,0!==this.ctx.clip_path.length){var I=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX,-1*this.pdf.internal.pageSize.height*(w-1)+this.posY),_.call(this,t,!0),this.path=I}i=JSON.parse(JSON.stringify(u)),this.path=v(i,this.posX,-1*this.pdf.internal.pageSize.height*(w-1)+this.posY),!1!==e&&0!==w||_.call(this,t,e),this.lineWidth=s}else this.lineWidth=c,_.call(this,t,e),this.lineWidth=s;this.path=u},_=function(t,e){if(("stroke"!==t||e||!f.call(this))&&("stroke"===t||e||!p.call(this))){for(var n,i,r=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:s,deltas:[],abs:[]});break;case"lt":var c=r.length;if(!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],c>0))for(;c>=0;c--)if(!0!==r[c-1].close&&!0!==r[c-1].begin){r[c-1].deltas.push(n),r[c-1].abs.push(s);break}break;case"bct":r[r.length-1].deltas.push(n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y]);break;case"qct":r[r.length-1].deltas.push(n=[o[a-1].x+2/3*(s.x1-o[a-1].x)-o[a-1].x,o[a-1].y+2/3*(s.y1-o[a-1].y)-o[a-1].y,s.x+2/3*(s.x1-s.x)-o[a-1].x,s.y+2/3*(s.y1-s.y)-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y]);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(s)}}i=e?null:"stroke"===t?"stroke":"fill";for(var l=0;l<r.length;l++){if(r[l].arc){for(var u=r[l].abs,h=0;h<u.length;h++){var d=u[h];"arc"===d.type?x.call(this,d.x,d.y,d.radius,d.startAngle,d.endAngle,d.counterclockwise,void 0,e):O.call(this,d.x,d.y)}w.call(this,i),this.pdf.internal.out("h")}r[l].arc||!0===r[l].close||!0===r[l].begin||M.call(this,r[l].deltas,r[l].start.x,r[l].start.y)}i&&w.call(this,i),e&&I.call(this)}},C=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}};h.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(t,e,n,i,r,o,a,s){for(var c=k.call(this,n,i,r,o),l=0;l<c.length;l++){var u=c[l];0===l&&A.call(this,u.x1+t,u.y1+e),S.call(this,t,e,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}s?I.call(this):w.call(this,a)},w=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(t,e){this.pdf.internal.out(n(t)+" "+i(e)+" m")},P=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.ctx.transform.applyToPoint(new a(t.x,t.y)),i=this.ctx.transform.decompose(),r=new c;r=(r=(r=r.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var o,l,u,h=this.pdf.getTextDimensions(t.text),d=this.ctx.transform.applyToRectangle(new s(t.x,t.y,h.w,h.h)),p=r.applyToRectangle(new s(t.x,t.y-h.h,h.w,h.h)),f=g.call(this,p),m=[],b=0;b<f.length;b+=1)-1===m.indexOf(f[b])&&m.push(f[b]);if(y(m),!0===this.autoPaging)for(var C=m[m.length-1],x=m[0];x<C+1;x++){if(this.pdf.setPage(x),0!==this.ctx.clip_path.length){var w=this.path;o=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(o,this.posX,-1*this.pdf.internal.pageSize.height*(x-1)+this.posY),_.call(this,"fill",!0),this.path=w}var I=JSON.parse(JSON.stringify(d));I=v([I],this.posX,-1*this.pdf.internal.pageSize.height*(x-1)+this.posY)[0],t.scale>=.01&&(l=this.pdf.internal.getFontSize(),this.pdf.setFontSize(l*t.scale),this.lineWidth=(u=this.lineWidth)*t.scale),this.pdf.text(t.text,I.x,I.y,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(l),this.lineWidth=u)}else t.scale>=.01&&(l=this.pdf.internal.getFontSize(),this.pdf.setFontSize(l*t.scale),this.lineWidth=(u=this.lineWidth)*t.scale),this.pdf.text(t.text,n.x+this.posX,n.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(l),this.lineWidth=u)},O=function(t,e,r,o){o=o||0,this.pdf.internal.out(n(t+(r=r||0))+" "+i(e+o)+" l")},M=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},S=function(t,n,i,a,s,c,l,u){this.pdf.internal.out([e(r(i+t)),e(o(a+n)),e(r(s+t)),e(o(c+n)),e(r(l+t)),e(o(u+n)),"c"].join(" "))},k=function(t,e,n,i){for(var r=2*Math.PI,o=Math.PI/2;e>n;)e-=r;var a=Math.abs(n-e);a<r&&i&&(a=r-a);for(var s=[],c=i?-1:1,l=e;a>1e-5;){var u=l+c*Math.min(a,o);s.push(E.call(this,t,l,u)),a-=Math.abs(u-l),l=u}return s},E=function(t,e,n){var i=(n-e)/2,r=t*Math.cos(i),o=t*Math.sin(i),a=r,s=-o,c=a*a+s*s,l=c+a*r+s*o,u=4/3*(Math.sqrt(2*c*l)-l)/(a*o-s*r),h=a-u*s,d=s+u*a,p=h,f=-d,g=i+e,m=Math.cos(g),v=Math.sin(g);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*m-d*v,y2:h*v+d*m,x3:p*m-f*v,y3:p*v+f*m,x4:t*Math.cos(n),y4:t*Math.sin(n)}},L=function(t){return 180*t/Math.PI},T=function(t,e,n,i,r,o){var a=t+.5*(n-t),c=e+.5*(i-e),l=r+.5*(n-r),u=o+.5*(i-o),h=Math.min(t,r,a,l),d=Math.max(t,r,a,l),p=Math.min(e,o,c,u),f=Math.max(e,o,c,u);return new s(h,p,d-h,f-p)},R=function(t,e,n,i,r,o,a,c){var l,u,h,d,p,f,g,m,v,y,b,_,C,x,w=n-t,I=i-e,A=r-n,P=o-i,O=a-r,M=c-o;for(u=0;u<41;u++)v=(g=(h=t+(l=u/40)*w)+l*((p=n+l*A)-h))+l*(p+l*(r+l*O-p)-g),y=(m=(d=e+l*I)+l*((f=i+l*P)-d))+l*(f+l*(o+l*M-f)-m),0==u?(b=v,_=y,C=v,x=y):(b=Math.min(b,v),_=Math.min(_,y),C=Math.max(C,v),x=Math.max(x,y));return new s(Math.round(b),Math.round(_),Math.round(C-b),Math.round(x-_))}}(Fi.API);var Br=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function jr(){var t=this;function e(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.build_tree=function(n){var i,r,o,a=t.dyn_tree,s=t.stat_desc.static_tree,c=t.stat_desc.elems,l=-1;for(n.heap_len=0,n.heap_max=573,i=0;i<c;i++)0!==a[2*i]?(n.heap[++n.heap_len]=l=i,n.depth[i]=0):a[2*i+1]=0;for(;n.heap_len<2;)a[2*(o=n.heap[++n.heap_len]=l<2?++l:0)]=1,n.depth[o]=0,n.opt_len--,s&&(n.static_len-=s[2*o+1]);for(t.max_code=l,i=Math.floor(n.heap_len/2);i>=1;i--)n.pqdownheap(a,i);o=c;do{i=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(a,1),r=n.heap[1],n.heap[--n.heap_max]=i,n.heap[--n.heap_max]=r,a[2*o]=a[2*i]+a[2*r],n.depth[o]=Math.max(n.depth[i],n.depth[r])+1,a[2*i+1]=a[2*r+1]=o,n.heap[1]=o++,n.pqdownheap(a,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){var n,i,r,o,a,s,c=t.dyn_tree,l=t.stat_desc.static_tree,u=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length,p=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(i=e.heap[n])+1]+1]+1)>d&&(o=d,p++),c[2*i+1]=o,i>t.max_code||(e.bl_count[o]++,a=0,i>=h&&(a=u[i-h]),e.opt_len+=(s=c[2*i])*(o+a),l&&(e.static_len+=s*(l[2*i+1]+a)));if(0!==p){do{for(o=d-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[d]--,p-=2}while(p>0);for(o=d;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>t.max_code||(c[2*r+1]!==o&&(e.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(n),function(t,n,i){var r,o,a,s=[],c=0;for(r=1;r<=15;r++)s[r]=c=c+i[r-1]<<1;for(o=0;o<=n;o++)0!==(a=t[2*o+1])&&(t[2*o]=e(s[a]++,a))}(a,t.max_code,n.bl_count)}}function Dr(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r}function Fr(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}jr._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],jr.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],jr.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],jr.d_code=function(t){return t<256?Br[t]:Br[256+(t>>>7)]},jr.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],jr.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],jr.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],jr.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dr.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],Dr.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],Dr.static_l_desc=new Dr(Dr.static_ltree,jr.extra_lbits,257,286,15),Dr.static_d_desc=new Dr(Dr.static_dtree,jr.extra_dbits,0,30,15),Dr.static_bl_desc=new Dr(null,jr.extra_blbits,0,19,7);var zr,Vr,Gr,Zr=[new Fr(0,0,0,0,0),new Fr(4,4,8,4,1),new Fr(4,5,16,8,1),new Fr(4,6,32,32,1),new Fr(4,4,16,16,2),new Fr(8,16,32,32,2),new Fr(8,16,128,128,2),new Fr(8,32,128,256,2),new Fr(32,128,258,1024,2),new Fr(32,258,258,4096,2)],Wr=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function Hr(t,e,n,i){var r=t[2*e],o=t[2*n];return r<o||r===o&&i[e]<=i[n]}function Ur(){var t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O,M,S,k,E,L,T,R,N,B,j,D,F,z,V=this,G=new jr,Z=new jr,W=new jr;function H(){var t;for(t=0;t<286;t++)k[2*t]=0;for(t=0;t<30;t++)E[2*t]=0;for(t=0;t<19;t++)L[2*t]=0;k[512]=1,V.opt_len=V.static_len=0,N=j=0}function U(t,e){var n,i,r=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)i=o,o=t[2*(n+1)+1],++a<s&&i===o||(a<c?L[2*i]+=a:0!==i?(i!==r&&L[2*i]++,L[32]++):a<=10?L[34]++:L[36]++,a=0,r=i,0===o?(s=138,c=3):i===o?(s=6,c=3):(s=7,c=4))}function $(t){V.pending_buf[V.pending++]=t}function K(t){$(255&t),$(t>>>8&255)}function X(t,e){var n,i=e;z>16-i?(K(F|=(n=t)<<z&65535),F=n>>>16-z,z+=i-16):(F|=t<<z&65535,z+=i)}function Y(t,e){var n=2*t;X(65535&e[n],65535&e[n+1])}function q(t,e){var n,i,r=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),n=0;n<=e;n++)if(i=o,o=t[2*(n+1)+1],!(++a<s&&i===o)){if(a<c)do{Y(i,L)}while(0!=--a);else 0!==i?(i!==r&&(Y(i,L),a--),Y(16,L),X(a-3,2)):a<=10?(Y(17,L),X(a-3,3)):(Y(18,L),X(a-11,7));a=0,r=i,0===o?(s=138,c=3):i===o?(s=6,c=3):(s=7,c=4)}}function J(){16===z?(K(F),F=0,z=0):z>=8&&($(255&F),F>>>=8,z-=8)}function Q(t,e){var n,i,r;if(V.pending_buf[B+2*N]=t>>>8&255,V.pending_buf[B+2*N+1]=255&t,V.pending_buf[T+N]=255&e,N++,0===t?k[2*e]++:(j++,t--,k[2*(jr._length_code[e]+256+1)]++,E[2*jr.d_code(t)]++),0==(8191&N)&&P>2){for(n=8*N,i=_-m,r=0;r<30;r++)n+=E[2*r]*(5+jr.extra_dbits[r]);if(n>>>=3,j<Math.floor(N/2)&&n<Math.floor(i/2))return!0}return N===R-1}function tt(t,e){var n,i,r,o,a=0;if(0!==N)do{n=V.pending_buf[B+2*a]<<8&65280|255&V.pending_buf[B+2*a+1],i=255&V.pending_buf[T+a],a++,0===n?Y(i,t):(Y((r=jr._length_code[i])+256+1,t),0!==(o=jr.extra_lbits[r])&&X(i-=jr.base_length[r],o),n--,Y(r=jr.d_code(n),e),0!==(o=jr.extra_dbits[r])&&X(n-=jr.base_dist[r],o))}while(a<N);Y(256,t),D=t[513]}function et(){z>8?K(F):z>0&&$(255&F),F=0,z=0}function nt(t,e,n){X(0+(n?1:0),3),function(t,e,n){et(),D=8,K(e),K(~e),V.pending_buf.set(s.subarray(t,t+e),V.pending),V.pending+=e}(t,e)}function it(e){(function(t,e,n){var i,r,o=0;P>0?(G.build_tree(V),Z.build_tree(V),o=function(){var t;for(U(k,G.max_code),U(E,Z.max_code),W.build_tree(V),t=18;t>=3&&0===L[2*jr.bl_order[t]+1];t--);return V.opt_len+=3*(t+1)+5+5+4,t}(),(r=V.static_len+3+7>>>3)<=(i=V.opt_len+3+7>>>3)&&(i=r)):i=r=e+5,e+4<=i&&-1!==t?nt(t,e,n):r===i?(X(2+(n?1:0),3),tt(Dr.static_ltree,Dr.static_dtree)):(X(4+(n?1:0),3),function(t,e,n){var i;for(X(t-257,5),X(e-1,5),X(n-4,4),i=0;i<n;i++)X(L[2*jr.bl_order[i]+1],3);q(k,t-1),q(E,e-1)}(G.max_code+1,Z.max_code+1,o+1),tt(k,E)),H(),n&&et()})(m>=0?m:-1,_-m,e),m=_,t.flush_pending()}function rt(){var e,n,i,o;do{if(0==(o=c-x-_)&&0===_&&0===x)o=r;else if(-1===o)o--;else if(_>=r+r-262){s.set(s.subarray(r,r+r),0),C-=r,_-=r,m-=r,i=e=d;do{n=65535&u[--i],u[i]=n>=r?n-r:0}while(0!=--e);i=e=r;do{n=65535&l[--i],l[i]=n>=r?n-r:0}while(0!=--e);o+=r}if(0===t.avail_in)return;e=t.read_buf(s,_+x,o),(x+=e)>=3&&(h=((h=255&s[_])<<g^255&s[_+1])&f)}while(x<262&&0!==t.avail_in)}function ot(t){var e,n,i=I,o=_,c=w,u=_>r-262?_-(r-262):0,h=S,d=a,p=_+258,f=s[o+c-1],g=s[o+c];w>=M&&(i>>=2),h>x&&(h=x);do{if(s[(e=t)+c]===g&&s[e+c-1]===f&&s[e]===s[o]&&s[++e]===s[o+1]){o+=2,e++;do{}while(s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&s[++o]===s[++e]&&o<p);if(n=258-(p-o),o=p-258,n>c){if(C=t,c=n,n>=h)break;f=s[o+c-1],g=s[o+c]}}}while((t=65535&l[t&d])>u&&0!=--i);return c<=x?c:x}function at(t){return t.total_in=t.total_out=0,t.msg=null,V.pending=0,V.pending_out=0,e=113,i=0,G.dyn_tree=k,G.stat_desc=Dr.static_l_desc,Z.dyn_tree=E,Z.stat_desc=Dr.static_d_desc,W.dyn_tree=L,W.stat_desc=Dr.static_bl_desc,F=0,z=0,D=8,H(),function(){var t;for(c=2*r,u[d-1]=0,t=0;t<d-1;t++)u[t]=0;A=Zr[P].max_lazy,M=Zr[P].good_length,S=Zr[P].nice_length,I=Zr[P].max_chain,_=0,m=0,x=0,v=w=2,b=0,h=0}(),0}V.depth=[],V.bl_count=[],V.heap=[],k=[],E=[],L=[],V.pqdownheap=function(t,e){for(var n=V.heap,i=n[e],r=e<<1;r<=V.heap_len&&(r<V.heap_len&&Hr(t,n[r+1],n[r],V.depth)&&r++,!Hr(t,i,n[r],V.depth));)n[e]=n[r],e=r,r<<=1;n[e]=i},V.deflateInit=function(t,e,i,c,h,m){return c||(c=8),h||(h=8),m||(m=0),t.msg=null,-1===e&&(e=6),h<1||h>9||8!==c||i<9||i>15||e<0||e>9||m<0||m>2?-2:(t.dstate=V,a=(r=1<<(o=i))-1,f=(d=1<<(p=h+7))-1,g=Math.floor((p+3-1)/3),s=new Uint8Array(2*r),l=[],u=[],R=1<<h+6,V.pending_buf=new Uint8Array(4*R),n=4*R,B=Math.floor(R/2),T=3*R,P=e,O=m,at(t))},V.deflateEnd=function(){return 42!==e&&113!==e&&666!==e?-2:(V.pending_buf=null,u=null,l=null,s=null,V.dstate=null,113===e?-3:0)},V.deflateParams=function(t,e,n){var i=0;return-1===e&&(e=6),e<0||e>9||n<0||n>2?-2:(Zr[P].func!==Zr[e].func&&0!==t.total_in&&(i=t.deflate(1)),P!==e&&(A=Zr[P=e].max_lazy,M=Zr[P].good_length,S=Zr[P].nice_length,I=Zr[P].max_chain),O=n,i)},V.deflateSetDictionary=function(t,n,i){var o,c=i,d=0;if(!n||42!==e)return-2;if(c<3)return 0;for(c>r-262&&(d=i-(c=r-262)),s.set(n.subarray(d,d+c),0),_=c,m=c,h=((h=255&s[0])<<g^255&s[1])&f,o=0;o<=c-3;o++)l[o&a]=u[h=(h<<g^255&s[o+2])&f],u[h]=o;return 0},V.deflate=function(c,p){var I,M,S,k,E,L;if(p>4||p<0)return-2;if(!c.next_out||!c.next_in&&0!==c.avail_in||666===e&&4!==p)return c.msg=Wr[4],-2;if(0===c.avail_out)return c.msg=Wr[7],-5;if(t=c,k=i,i=p,42===e&&(M=8+(o-8<<4)<<8,(S=(P-1&255)>>1)>3&&(S=3),M|=S<<6,0!==_&&(M|=32),e=113,$((L=M+=31-M%31)>>8&255),$(255&L)),0!==V.pending){if(t.flush_pending(),0===t.avail_out)return i=-1,0}else if(0===t.avail_in&&p<=k&&4!==p)return t.msg=Wr[7],-5;if(666===e&&0!==t.avail_in)return c.msg=Wr[7],-5;if(0!==t.avail_in||0!==x||0!==p&&666!==e){switch(E=-1,Zr[P].func){case 0:E=function(e){var i,o=65535;for(o>n-5&&(o=n-5);;){if(x<=1){if(rt(),0===x&&0===e)return 0;if(0===x)break}if(_+=x,x=0,i=m+o,(0===_||_>=i)&&(x=_-i,_=i,it(!1),0===t.avail_out))return 0;if(_-m>=r-262&&(it(!1),0===t.avail_out))return 0}return it(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(p);break;case 1:E=function(e){for(var n,i=0;;){if(x<262){if(rt(),x<262&&0===e)return 0;if(0===x)break}if(x>=3&&(i=65535&u[h=(h<<g^255&s[_+2])&f],l[_&a]=u[h],u[h]=_),0!==i&&(_-i&65535)<=r-262&&2!==O&&(v=ot(i)),v>=3)if(n=Q(_-C,v-3),x-=v,v<=A&&x>=3){v--;do{_++,i=65535&u[h=(h<<g^255&s[_+2])&f],l[_&a]=u[h],u[h]=_}while(0!=--v);_++}else _+=v,v=0,h=((h=255&s[_])<<g^255&s[_+1])&f;else n=Q(0,255&s[_]),x--,_++;if(n&&(it(!1),0===t.avail_out))return 0}return it(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(p);break;case 2:E=function(e){for(var n,i,o=0;;){if(x<262){if(rt(),x<262&&0===e)return 0;if(0===x)break}if(x>=3&&(o=65535&u[h=(h<<g^255&s[_+2])&f],l[_&a]=u[h],u[h]=_),w=v,y=C,v=2,0!==o&&w<A&&(_-o&65535)<=r-262&&(2!==O&&(v=ot(o)),v<=5&&(1===O||3===v&&_-C>4096)&&(v=2)),w>=3&&v<=w){i=_+x-3,n=Q(_-1-y,w-3),x-=w-1,w-=2;do{++_<=i&&(o=65535&u[h=(h<<g^255&s[_+2])&f],l[_&a]=u[h],u[h]=_)}while(0!=--w);if(b=0,v=2,_++,n&&(it(!1),0===t.avail_out))return 0}else if(0!==b){if((n=Q(0,255&s[_-1]))&&it(!1),_++,x--,0===t.avail_out)return 0}else b=1,_++,x--}return 0!==b&&(n=Q(0,255&s[_-1]),b=0),it(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(p)}if(2!==E&&3!==E||(e=666),0===E||2===E)return 0===t.avail_out&&(i=-1),0;if(1===E){if(1===p)X(2,3),Y(256,Dr.static_ltree),J(),1+D+10-z<9&&(X(2,3),Y(256,Dr.static_ltree),J()),D=7;else if(nt(0,0,!1),3===p)for(I=0;I<d;I++)u[I]=0;if(t.flush_pending(),0===t.avail_out)return i=-1,0}}return 4!==p?0:1}}function $r(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}function Kr(t){var e=new $r,n=new Uint8Array(512),i=t?t.level:-1;void 0===i&&(i=-1),e.deflateInit(i),e.next_out=n,this.append=function(t,i){var r,o=[],a=0,s=0,c=0;if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.deflate(0))throw new Error("deflating: "+e.msg);e.next_out_index&&o.push(512===e.next_out_index?new Uint8Array(n):new Uint8Array(n.subarray(0,e.next_out_index))),c+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!==a&&(i(e.next_in_index),a=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return r=new Uint8Array(c),o.forEach((function(t){r.set(t,s),s+=t.length})),r}},this.flush=function(){var t,i,r=[],o=0,a=0;do{if(e.next_out_index=0,e.avail_out=512,1!==(t=e.deflate(4))&&0!==t)throw new Error("deflating: "+e.msg);512-e.avail_out>0&&r.push(new Uint8Array(n.subarray(0,e.next_out_index))),a+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),i=new Uint8Array(a),r.forEach((function(t){i.set(t,o),o+=t.length})),i}}$r.prototype={deflateInit:function(t,e){return this.dstate=new Ur,e||(e=15),this.dstate.deflateInit(this,t,e)},deflate:function(t){return this.dstate?this.dstate.deflate(this,t):-2},deflateEnd:function(){if(!this.dstate)return-2;var t=this.dstate.deflateEnd();return this.dstate=null,t},deflateParams:function(t,e){return this.dstate?this.dstate.deflateParams(this,t,e):-2},deflateSetDictionary:function(t,e){return this.dstate?this.dstate.deflateSetDictionary(this,t,e):-2},read_buf:function(t,e,n){var i=this.avail_in;return i>n&&(i=n),0===i?0:(this.avail_in-=i,t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+i),e),this.next_in_index+=i,this.total_in+=i,i)},flush_pending:function(){var t=this.dstate.pending;t>this.avail_out&&(t=this.avail_out),0!==t&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+t),this.next_out_index),this.next_out_index+=t,this.dstate.pending_out+=t,this.total_out+=t,this.avail_out-=t,this.dstate.pending-=t,0===this.dstate.pending&&(this.dstate.pending_out=0))}},function(t){var e=function(t){var e,n,i,r,o,a,s,c,l,u;for(/[^\x00-\xFF]/.test(t),n=[],i=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r>i;i+=4)0!==(o=(t.charCodeAt(i)<<24)+(t.charCodeAt(i+1)<<16)+(t.charCodeAt(i+2)<<8)+t.charCodeAt(i+3))?(a=(o=((o=((o=((o=(o-(u=o%85))/85)-(l=o%85))/85)-(c=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,c+33,l+33,u+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,i,r,o,a=String,s="length",c=255,l="charCodeAt",u="slice",h="replace";for(t[u](-2),t=t[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),i=[],r=0,o=(t+=e="uuuuu"[u](t[s]%5||5))[s];o>r;r+=5)n=52200625*(t[l](r)-33)+614125*(t[l](r+1)-33)+7225*(t[l](r+2)-33)+85*(t[l](r+3)-33)+(t[l](r+4)-33),i.push(c&n>>24,c&n>>16,c&n>>8,c&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(i,e[s]),a.fromCharCode.apply(a,i)},i=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",i=0;i<t.length;i+=2)n+=String.fromCharCode("0x"+(t[i]+t[i+1]));return n},r=function(e){for(var n,i,r,o,a,s=[],c=e.length;c--;)s[c]=e.charCodeAt(c);return n=t.adler32cs.from(e),r=e=(i=new Kr(6)).append(new Uint8Array(s)),o=i.flush(),(a=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r),0),a.set(new Uint8Array(o),r.byteLength),e=a,(s=new Uint8Array(e.byteLength+6)).set(new Uint8Array([120,156])),s.set(e,2),s.set(new Uint8Array([255&n,n>>8&255,n>>16&255,n>>24&255]),e.byteLength+2),s.reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var a=0,s=t||"",c=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=e(s),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=i(s),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=r(s),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:c.reverse().join(" ")}}}(Fi.API),function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(t,e,n){var i=new XMLHttpRequest,r=0,o=function(t){var e=t.length,n=[],i=String.fromCharCode;for(r=0;r<e;r+=1)n.push(i(255&t.charCodeAt(r)));return n.join("")};if(i.open("GET",t,!e),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(i.onload=function(){n(200===i.status?o(this.responseText):void 0)}),i.send(null),e&&200===i.status)return o(i.responseText)}(t,e,n)}catch(t){}return i}(t,e,n)},t.loadImageFile=t.loadFile}(Fi.API),function(t){function e(){return(Ii.html2canvas?Promise.resolve(Ii.html2canvas):n.e(16).then(n.t.bind(null,"wOnQ",7))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}function i(){return(Ii.DOMPurify?Promise.resolve(Ii.DOMPurify):n.e(15).then(n.t.bind(null,"wMS7",7))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var r=function(t){var e=typeof t;return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},o=function(t,e){var n=document.createElement(t);for(var i in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[i]=e.style[i];return n},a=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),i=t.convert(Promise.resolve(),n);return(i=i.setProgress(1,t,1,[t])).set(e)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(t,e){return t.__proto__=e||a.prototype,t},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(r(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(i).then((function(e){return this.set({src:o("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(t(r,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value),i.addEventListener("load",(function(){i.scrollTop=e.scrollTop,i.scrollLeft=e.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then((function(t){var e=this.opt.jsPDF,n=Object.assign({async:!0,allowTaint:!0,scale:1,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);return delete n.onrendered,e.context2d.autoPaging=!0,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,n.windowHeight=n.windowHeight||0,n.windowHeight=0==n.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):n.windowHeight,t(this.prop.container,n)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},a.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},a.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},a.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(t){if("object"!==r(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in a.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},a.prototype.get=function(t,e){return this.then((function(){var n=t in a.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},a.prototype.setMargin=function(t){return this.then((function(){switch(r(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},a.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Fi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},a.prototype.setProgress=function(t,e,n,i){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(t,e,n,i){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},a.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},a.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),r=n.call(i,t,e);return a.convert(r,this.__proto__)},a.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},a.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},a.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return a.convert(e,this)},a.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},a.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Fi.getPageSize=function(t,e,n){if("object"==typeof t){var i=t;t=i.orientation,e=i.unit||e,n=i.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var r,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+e}var s,c=0,l=0;if(a.hasOwnProperty(o))c=a[o][1]/r,l=a[o][0]/r;else try{c=n[1],l=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",l>c&&(s=l,l=c,c=s);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",c>l&&(s=l,l=c,c=s)}return{width:l,height:c,unit:e,k:r,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this;var n=new a(e);return e.worker?n:n.from(t).doCallback()}}(Fi.API),Fi.API.addJS=function(t){return Gr=t,this.internal.events.subscribe("postPutResources",(function(){zr=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zr+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Vr=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Gr+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==zr&&void 0!==Vr&&this.internal.out("/Names <</JavaScript "+zr+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var o=i[r],a=n.exec(o);null!=a&&t.internal.newObjectDeferredBegin(a[1],!1),t.internal.write(o)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,c=[];for(r=0;r<s;r++){var l=t.internal.newObject();c.push(l);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var i={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<e.children.length;i++){var r=e.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var o=this.count=this.count_r({count:0},r);if(o>0&&this.line("/Count "+o),r.options&&r.options.pageNumber){var a=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<e.children.length;s++)this.renderItems(e.children[s])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(Fi.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,i,r,o,a){var s,c=this.decode.DCT_DECODE,l=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=o||t)?new Uint8Array(t):t,(s=function(t){for(var n,i=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,o={width:0,height:0,numcomponents:1},a=4;a<r;a+=2){if(-1!==e.indexOf(t.charCodeAt((a+=i)+1))){n=256*t.charCodeAt(a+5)+t.charCodeAt(a+6),o={width:256*t.charCodeAt(a+7)+t.charCodeAt(a+8),height:n,numcomponents:t.charCodeAt(a+9)};break}i=256*t.charCodeAt(a+2)+t.charCodeAt(a+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}l={data:t,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:c,index:n,alias:i}}return l}}(Fi.API);var Xr,Yr,qr,Jr,Qr,to=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var i=512;i<t;)i<<=1;for(var r=new Uint8Array(i),o=0;o<n;++o)r[o]=e[o];return this.buffer=r},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();var i=this.bufferLength;n>i&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var i=t+e;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),eo=("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()).FlateStream=function(){if("undefined"!=typeof Uint32Array){var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],r=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(a.prototype=Object.create(to.prototype)).getBits=function(t){for(var e,n=this.codeSize,i=this.codeBuf,r=this.bytes,a=this.bytesPos;n<t;)void 0===(e=r[a++])&&o("Bad encoding in flate stream"),i|=e<<n,n+=8;return e=i&(1<<t)-1,this.codeBuf=i>>t,this.codeSize=n-=t,this.bytesPos=a,e},a.prototype.getCode=function(t){for(var e=t[0],n=t[1],i=this.codeSize,r=this.codeBuf,a=this.bytes,s=this.bytesPos;i<n;){var c;void 0===(c=a[s++])&&o("Bad encoding in flate stream"),r|=c<<i,i+=8}var l=e[r&(1<<n)-1],u=l>>16,h=65535&l;return(0==i||i<u||0==u)&&o("Bad encoding in flate stream"),this.codeBuf=r>>u,this.codeSize=i-u,this.bytesPos=s,h},a.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,i=0;i<e;++i)t[i]>n&&(n=t[i]);for(var r=1<<n,o=new Uint32Array(r),a=1,s=0,c=2;a<=n;++a,s<<=1,c<<=1)for(var l=0;l<e;++l)if(t[l]==a){var u=0,h=s;for(i=0;i<a;++i)u=u<<1|1&h,h>>=1;for(i=u;i<r;i+=c)o[i]=a<<16|l;++s}return[o,n]},a.prototype.readBlock=function(){function a(t,e,n,i,r){for(var o=t.getBits(n)+i;o-- >0;)e[f++]=r}var s=this.getBits(3);if(1&s&&(this.eof=!0),0!=(s>>=1)){var c,l;if(1==s)c=i,l=r;else if(2==s){for(var u=this.getBits(5)+257,h=this.getBits(5)+1,d=this.getBits(4)+4,p=Array(t.length),f=0;f<d;)p[t[f++]]=this.getBits(3);for(var g=this.generateHuffmanTable(p),m=0,v=(f=0,u+h),y=new Array(v);f<v;){var b=this.getCode(g);16==b?a(this,y,2,3,m):17==b?a(this,y,3,3,m=0):18==b?a(this,y,7,11,m=0):y[f++]=m=b}c=this.generateHuffmanTable(y.slice(0,u)),l=this.generateHuffmanTable(y.slice(u,v))}else o("Unknown block type in flate stream");for(var _=(L=this.buffer)?L.length:0,C=this.bufferLength;;){var x=this.getCode(c);if(x<256)C+1>=_&&(_=(L=this.ensureBuffer(C+1)).length),L[C++]=x;else{if(256==x)return void(this.bufferLength=C);var w=(x=e[x-=257])>>16;w>0&&(w=this.getBits(w)),m=(65535&x)+w,x=this.getCode(l),(w=(x=n[x])>>16)>0&&(w=this.getBits(w));var I=(65535&x)+w;C+m>=_&&(_=(L=this.ensureBuffer(C+m)).length);for(var A=0;A<m;++A,++C)L[C]=L[C-I]}}}else{var P,O=this.bytes,M=this.bytesPos;void 0===(P=O[M++])&&o("Bad block header in flate stream");var S=P;void 0===(P=O[M++])&&o("Bad block header in flate stream"),S|=P<<8,void 0===(P=O[M++])&&o("Bad block header in flate stream");var k=P;void 0===(P=O[M++])&&o("Bad block header in flate stream"),(k|=P<<8)!=(65535&~S)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var E=this.bufferLength,L=this.ensureBuffer(E+S),T=E+S;this.bufferLength=T;for(var R=E;R<T;++R){if(void 0===(P=O[M++])){this.eof=!0;break}L[R]=P}this.bytesPos=M}},a}function o(t){throw new Error(t)}function a(t){var e=0,n=t[e++],i=t[e++];-1!=n&&-1!=i||o("Invalid header in flate stream"),8!=(15&n)&&o("Unknown compression method in flate stream"),((n<<8)+i)%31!=0&&o("Bad FCHECK in flate stream"),32&i&&o("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,to.call(this)}}(),no=function(){var t,e,n;function i(t){var e,n,i,r,o,a,s,c,l,u,h,d,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),c=(function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*r/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,h=0;0<=e?h<e:h>e;0<=e?++h:--h)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((l=n-this.transparency.indexed.length)>0)for(d=0;0<=l?d<l:d>l;0<=l?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(u=this.read(e)).indexOf(0),s=String.fromCharCode.apply(String,u.slice(0,a)),this.text[s]=String.fromCharCode.apply(String,u.slice(a+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),i=0,r=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,a,s,c){var l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O,M,S=Math.ceil((r.width-o)/s),k=Math.ceil((r.height-a)/c),E=r.width==S&&r.height==k;for(C=e*S,b=E?n:new Uint8Array(C*k),f=t.length,_=0,u=0;_<k&&i<f;){switch(t[i++]){case 0:for(d=I=0;I<C;d=I+=1)b[u++]=t[i++];break;case 1:for(d=A=0;A<C;d=A+=1)l=t[i++],p=d<e?0:b[u-e],b[u++]=(l+p)%256;break;case 2:for(d=P=0;P<C;d=P+=1)l=t[i++],h=(d-d%e)/e,b[u++]=((x=_&&b[(_-1)*C+h*e+d%e])+l)%256;break;case 3:for(d=O=0;O<C;d=O+=1)l=t[i++],h=(d-d%e)/e,p=d<e?0:b[u-e],x=_&&b[(_-1)*C+h*e+d%e],b[u++]=(l+Math.floor((p+x)/2))%256;break;case 4:for(d=M=0;M<C;d=M+=1)l=t[i++],h=(d-d%e)/e,0===_?x=w=0:(x=b[(_-1)*C+h*e+d%e],w=h&&b[(_-1)*C+(h-1)*e+d%e]),g=(p=d<e?0:b[u-e])+x-w,m=Math.abs(g-p),v=Math.abs(g-x),y=Math.abs(g-w),b[u++]=(l+(m<=v&&m<=y?p:v<=y?x:w))%256;break;default:throw new Error("Invalid filter algorithm: "+t[i-1])}if(!E){var L=((a+_*c)*r.width+o)*e,T=_*C;for(d=0;d<S;d+=1){for(var R=0;R<e;R+=1)n[L++]=b[T++];L+=(s-1)*e}}_++}}return t=(t=new eo(t)).getBytes(),1==r.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},i.prototype.decodePalette=function(){var t,e,n,i,r,o,a,s,c;for(n=this.palette,o=this.transparency.indexed||[],r=new Uint8Array((o.length||0)+n.length),i=0,t=0,e=a=0,s=n.length;a<s;e=a+=3)r[i++]=n[e],r[i++]=n[e+1],r[i++]=n[e+2],r[i++]=null!=(c=o[t++])?c:255;return r},i.prototype.copyToImageData=function(t,e){var n,i,r,o,a,s,c,l,u,h,d;if(i=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),i=4,n=!0),l=(r=t.data||t).length,a=u||e,o=s=0,1===i)for(;o<l;)c=u?4*e[o/4]:s,h=a[c++],r[o++]=h,r[o++]=h,r[o++]=h,r[o++]=n?a[c++]:255,s=c;else for(;o<l;)c=u?4*e[o/4]:s,r[o++]=a[c++],r[o++]=a[c++],r[o++]=a[c++],r[o++]=n?a[c++]:255,s=c},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var r=function(){if("[object Window]"===Object.prototype.toString.call(Ii)){try{e=Ii.document.createElement("canvas"),n=e.getContext("2d")}catch(Tr){return!1}return!0}return!1};return r(),t=function(t){var i;if(!0===r())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(e){var n,i,r,o,a,s,c,l;if(this.animation){for(l=[],i=a=0,s=(c=this.animation.frames).length;a<s;i=++a)r=e.createImageData((n=c[i]).width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,o),n.imageData=r,l.push(n.image=t(r));return l}},i.prototype.renderFrame=function(t,e){var n,i,r;return n=(i=this.animation.frames)[e],r=i[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(t){var e,n,i,r,o,a,s=this;return n=0,r=(a=this.animation).numFrames,i=a.frames,o=a.numPlays,(e=function(){var a,c;if(a=n++%r,c=i[a],s.renderFrame(t,a),r>1&&n/r<o)return s.animation._timeout=setTimeout(e,c.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},i}();function io(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],o=1<<1+(7&r);e++,e++;var a=null,s=null;r>>7&&(a=e,s=o,e+=3*o);var c=!0,l=[],u=0,h=null,d=0,p=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var f=t[e++];u=t[e++]|t[e++]<<8,h=t[e++],0==(1&f)&&(h=null),d=f>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++],_=b>>6&1,C=1<<1+(7&b),x=a,w=s,I=!1;b>>7&&(I=!0,x=e,w=C,e+=3*C);var A=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(0===P)break;e+=P}l.push({x:g,y:m,width:v,height:y,has_local_palette:I,palette_offset:x,palette_size:w,data_offset:A,data_length:e-A,transparent_index:h,interlaced:!!_,delay:u,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=l.length)throw new Error("Frame index out of range.");return l[t]},this.decodeAndBlitFrameBGRA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,a=new Uint8Array(o);ro(t,r.data_offset,a,o);var s=r.palette_offset,c=r.transparent_index;null===c&&(c=256);var l=r.width,u=n-l,h=l,d=4*(r.y*n+r.x),p=4*((r.y+r.height)*n+r.x),f=d,g=4*u;!0===r.interlaced&&(g+=4*n*7);for(var m=8,v=0,y=a.length;v<y;++v){var b=a[v];if(0===h&&(h=l,(f+=g)>=p&&(g=4*u+4*n*(m-1),f=d+(l+u)*(m<<1),m>>=1)),b===c)f+=4;else{var _=t[s+3*b],C=t[s+3*b+1];i[f++]=t[s+3*b+2],i[f++]=C,i[f++]=_,i[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,a=new Uint8Array(o);ro(t,r.data_offset,a,o);var s=r.palette_offset,c=r.transparent_index;null===c&&(c=256);var l=r.width,u=n-l,h=l,d=4*(r.y*n+r.x),p=4*((r.y+r.height)*n+r.x),f=d,g=4*u;!0===r.interlaced&&(g+=4*n*7);for(var m=8,v=0,y=a.length;v<y;++v){var b=a[v];if(0===h&&(h=l,(f+=g)>=p&&(g=4*u+4*n*(m-1),f=d+(l+u)*(m<<1),m>>=1)),b===c)f+=4;else{var _=t[s+3*b+1],C=t[s+3*b+2];i[f++]=t[s+3*b],i[f++]=_,i[f++]=C,i[f++]=255}--h}}}function ro(t,e,n,i){for(var r=t[e++],o=1<<r,a=o+1,s=a+1,c=r+1,l=(1<<c)-1,u=0,h=0,d=0,p=t[e++],f=new Int32Array(4096),g=null;;){for(;u<16&&0!==p;)h|=t[e++]<<u,u+=8,1===p?p=t[e++]:--p;if(u<c)break;var m=h&l;if(h>>=c,u-=c,m!==o){if(m===a)break;for(var v=m<s?m:g,y=0,b=v;b>o;)b=f[b]>>8,++y;var _=b;if(d+y+(v!==m?1:0)>i)return void Pi.log("Warning, gif stream longer than expected.");n[d++]=_;var C=d+=y;for(v!==m&&(n[d++]=_),b=v;y--;)n[--C]=255&(b=f[b]),b>>=8;null!==g&&s<4096&&(f[s++]=g<<8|_,s>=l+1&&c<12&&(++c,l=l<<1|1)),g=m}else s=a+1,l=(1<<(c=r+1))-1,g=null}return d!==i&&Pi.log("Warning, gif stream shorter than expected."),n}function oo(t){var e,n,i,r,o,a=Math.floor,s=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),p=new Array(64),f=new Array(64),g=[],m=0,v=7,y=new Array(64),b=new Array(64),_=new Array(64),C=new Array(256),x=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],E=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(t,e){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=o,i++,n++;n*=2}return r}function T(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(m|=1<<v),n--,--v<0&&(255==m?(R(255),R(0)):R(m),v=7,m=0)}function R(t){g.push(t)}function N(t){R(t>>8&255),R(255&t)}function B(t,e,n,i,r){for(var o,a=r[0],s=r[240],c=function(t,e){var n,i,r,o,a,s,c,l,u,h,d=0;for(u=0;u<8;++u){var f=(n=t[d])+(l=t[d+7]),g=n-l,m=(i=t[d+1])+(c=t[d+6]),v=i-c,y=(r=t[d+2])+(s=t[d+5]),b=r-s,_=(o=t[d+3])+(a=t[d+4]),C=o-a,x=f+_,w=f-_,I=m+y,A=m-y;t[d]=x+I,t[d+4]=x-I;var P=.707106781*(A+w);t[d+2]=w+P,t[d+6]=w-P;var O=.382683433*((x=C+b)-(A=v+g)),M=.5411961*x+O,S=1.306562965*A+O,k=.707106781*(I=b+v),E=g+k,L=g-k;t[d+5]=L+M,t[d+3]=L-M,t[d+1]=E+S,t[d+7]=E-S,d+=8}for(d=0,u=0;u<8;++u){var T=(n=t[d])+(l=t[d+56]),R=n-l,N=(i=t[d+8])+(c=t[d+48]),B=i-c,j=(r=t[d+16])+(s=t[d+40]),D=r-s,F=(o=t[d+24])+(a=t[d+32]),z=o-a,V=T+F,G=T-F,Z=N+j,W=N-j;t[d]=V+Z,t[d+32]=V-Z;var H=.707106781*(W+G);t[d+16]=G+H,t[d+48]=G-H;var U=.382683433*((V=z+D)-(W=B+R)),$=.5411961*V+U,K=1.306562965*W+U,X=.707106781*(Z=D+B),Y=R+X,q=R-X;t[d+40]=q+$,t[d+24]=q-$,t[d+8]=Y+K,t[d+56]=Y-K,d++}for(u=0;u<64;++u)p[u]=(h=t[u]*e[u])>0?h+.5|0:h-.5|0;return p}(t,e),l=0;l<64;++l)f[w[l]]=c[l];var u=f[0]-n;n=f[0],0==u?T(i[0]):(T(i[d[o=32767+u]]),T(h[o]));for(var g=63;g>0&&0==f[g];)g--;if(0==g)return T(a),n;for(var m,v=1;v<=g;){for(var y=v;0==f[v]&&v<=g;)++v;var b=v-y;if(b>=16){m=b>>4;for(var _=1;_<=m;++_)T(s);b&=15}T(r[(b<<4)+d[o=32767+f[v]]]),T(h[o]),v++}return 63!=g&&T(a),n}function j(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=a((e[n]*t+50)/100);i=Math.min(Math.max(i,1),255),s[w[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=a((r[o]*t+50)/100);h=Math.min(Math.max(h,1),255),c[w[o]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var g=0;g<8;g++)l[p]=1/(s[w[p]]*d[f]*d[g]*8),u[p]=1/(c[w[p]]*d[f]*d[g]*8),p++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&j(o),g=new Array,m=0,v=7,N(65496),N(65504),N(16),R(74),R(70),R(73),R(70),R(0),R(1),R(1),R(0),N(1),N(1),R(0),R(0),function(){N(65499),N(132),R(0);for(var t=0;t<64;t++)R(s[t]);R(1);for(var e=0;e<64;e++)R(c[e])}(),function(t,e){N(65472),N(17),R(8),N(e),N(t),R(3),R(1),R(17),R(0),R(2),R(17),R(1),R(3),R(17),R(1)}(t.width,t.height),function(){N(65476),N(418),R(0);for(var t=0;t<16;t++)R(I[t+1]);for(var e=0;e<=11;e++)R(A[e]);R(16);for(var n=0;n<16;n++)R(P[n+1]);for(var i=0;i<=161;i++)R(O[i]);R(1);for(var r=0;r<16;r++)R(M[r+1]);for(var o=0;o<=11;o++)R(S[o]);R(17);for(var a=0;a<16;a++)R(k[a+1]);for(var s=0;s<=161;s++)R(E[s])}(),N(65498),N(12),R(3),R(1),R(0),R(2),R(17),R(3),R(17),R(0),R(63),R(0);var a=0,h=0,d=0;m=0,v=7,this.encode.displayName="_encode_";for(var p,f,C,w,L,D,F,z,V,G=t.data,Z=t.height,W=4*t.width,H=0;H<Z;){for(p=0;p<W;){for(L=W*H+p,F=-1,z=0,V=0;V<64;V++)D=L+(z=V>>3)*W+(F=4*(7&V)),H+z>=Z&&(D-=W*(H+1+z-Z)),p+F>=W&&(D-=p+F-W+4),f=G[D++],C=G[D++],w=G[D++],y[V]=(x[f]+x[C+256>>0]+x[w+512>>0]>>16)-128,b[V]=(x[f+768>>0]+x[C+1024>>0]+x[w+1280>>0]>>16)-128,_[V]=(x[f+1280>>0]+x[C+1536>>0]+x[w+1792>>0]>>16)-128;a=B(y,l,a,e,i),h=B(b,u,h,n,r),d=B(_,u,d,n,r),p+=32}H+=8}if(v>=0){var U=[];U[1]=v+1,U[0]=(1<<v+1)-1,T(U)}return N(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)C[e]=t(e)}(),e=L(I,A),n=L(M,S),i=L(P,O),r=L(k,E),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),j(t)}function ao(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function so(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var i=0;4>i;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}function i(t,e,n,i,r){for(var o=0;o<r;o++)t[e+o]=n[i+o]}function r(t,e,n,i){for(var r=0;r<i;r++)t[e+r]=n}function o(t){return new Int32Array(t)}function a(t,e){for(var n=[],i=0;i<t;i++)n.push(new e);return n}function s(t,e){var n=[];return function t(n,i,r){for(var o=r[i],a=0;a<o&&(n.push(r.length>i+1?[]:new e),!(r.length<i+1));a++)t(n[a],i+1,r)}(n,0,t),n}function c(t,e){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(t[e++]);return n}function l(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function u(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new(so=function(){var t=this;function c(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function l(t,n,i,r,o){e(!(r%i));do{t[n+(r-=i)]=o}while(0<r)}function u(t,n,i,r,a){if(e(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(t,n,i,r,a,s){var u,d,p=n,f=1<<i,g=o(16),m=o(16);for(e(0!=a),e(null!=r),e(null!=t),e(0<i),d=0;d<a;++d){if(15<r[d])return 0;++g[r[d]]}if(g[0]==a)return 0;for(m[1]=0,u=1;15>u;++u){if(g[u]>1<<u)return 0;m[u+1]=m[u]+g[u]}for(d=0;d<a;++d)u=r[d],0<r[d]&&(s[m[u]++]=d);if(1==m[15])return(r=new h).g=0,r.value=s[0],l(t,p,1,f,r),f;var v,y=-1,b=f-1,_=0,C=1,x=1,w=1<<i;for(d=0,u=1,a=2;u<=i;++u,a<<=1){if(C+=x<<=1,0>(x-=g[u]))return 0;for(;0<g[u];--g[u])(r=new h).g=u,r.value=s[d++],l(t,p+_,a,w,r),_=c(_,u)}for(u=i+1,a=2;15>=u;++u,a<<=1){if(C+=x<<=1,0>(x-=g[u]))return 0;for(;0<g[u];--g[u]){if(r=new h,(_&b)!=y){for(p+=w,v=1<<(y=u)-i;15>y&&!(0>=(v-=g[y]));)++y,v<<=1;f+=w=1<<(v=y-i),t[n+(y=_&b)].g=v+i,t[n+y].value=p-n-y}r.g=u-i,r.value=s[d++],l(t,p+(_>>i),a,w,r),_=c(_,u)}}return C!=2*m[15]-1?0:f}(t,n,i,r,a,s)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function p(){this.G=a(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Fn,d)}function f(t,n,i,r){e(null!=t),e(null!=n),e(2147483648>r),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=i,t.Jd=n,t.Yc=i+r,t.Zc=4<=r?i+r-4+1:i,P(t)}function g(t,e){for(var n=0;0<e--;)n|=M(t,128)<<e;return n}function m(t,e){var n=g(t,e);return O(t)?-n:n}function v(t,n,i,r){var o,a=0;for(e(null!=t),e(null!=n),e(4294967288>r),t.Sb=r,t.Ra=0,t.u=0,t.h=0,4<r&&(r=4),o=0;o<r;++o)a+=n[i+o]<<8*o;t.Ra=a,t.bb=r,t.oa=n,t.pa=i}function y(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gn-8>>>0,++t.bb,t.u-=8;w(t)&&(t.h=1,t.u=0)}function b(t,n){if(e(0<=n),!t.h&&n<=Vn){var i=x(t)&zn[n];return t.u+=n,y(t),i}return t.h=1,t.u=0}function _(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(t){return t.Ra>>>(t.u&Gn-1)>>>0}function w(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Gn}function I(t,e){t.u=e,t.h=w(t)}function A(t){t.u>=Zn&&(e(t.u>=Zn),y(t))}function P(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function O(t){return g(t,1)}function M(t,e){var n=t.Ca;0>t.b&&P(t);var i=t.b,r=n*e>>>8,o=(t.I>>>i>r)+0;for(o?(n-=r,t.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return t.b-=i=7^r+Wn[i],t.Ca=(n<<i)-1,o}function S(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function k(t,e){return t[e+0]<<0|t[e+1]<<8}function E(t,e){return k(t,e)|t[e+2]<<16}function L(t,e){return k(t,e)|k(t,e+2)<<16}function T(t,n){var i=1<<n;return e(null!=t),e(0<n),t.X=o(i),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function R(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),i(n.X,0,t.X,0,1<<n.Xa)}function N(){this.X=[],this.Xa=this.Mb=0}function B(t,n,i,r){e(null!=i),e(null!=r);var o=i[0],a=r[0];return 0==o&&(o=(t*a+n/2)/n),0==a&&(a=(n*o+t/2)/t),0>=o||0>=a?0:(i[0]=o,r[0]=a,1)}function j(t,e){return t+(1<<e)-1>>>e}function D(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function F(e,n){t[n]=function(n,i,r,o,a,s,c){var l;for(l=0;l<a;++l){var u=t[e](s[c+l-1],r,o+l);s[c+l]=D(n[i+l],u)}}}function z(){this.ud=this.hd=this.jd=0}function V(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function G(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function Z(t,e){return G(t+(t-e+.5>>1))}function W(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function H(t,e,n,i,r,o,a){for(i=o[a-1],n=0;n<r;++n)o[a+n]=i=D(t[e+n],i)}function U(t,e,n,i,r){var o;for(o=0;o<n;++o){var a=t[e+o],s=a>>8&255,c=16711935&(c=(c=16711935&a)+((s<<16)+s));i[r+o]=(4278255360&a)+c>>>0}}function $(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function K(t,e,n,i,r,o){var a;for(a=0;a<i;++a){var s=e[n+a],c=s>>>8,l=s,u=255&(u=(u=s>>>16)+((t.jd<<24>>24)*(c<<24>>24)>>>5));l=255&(l=(l+=(t.hd<<24>>24)*(c<<24>>24)>>>5)+((t.ud<<24>>24)*(u<<24>>24)>>>5)),r[o+a]=(4278255360&s)+(u<<16)+l}}function X(e,n,i,r,o){t[n]=function(t,e,n,i,a,s,c,l,u){for(i=c;i<l;++i)for(c=0;c<u;++c)a[s++]=o(n[r(t[e++])])},t[e]=function(e,n,a,s,c,l,u){var h=8>>e.b,d=e.Ea,p=e.K[0],f=e.w;if(8>h)for(e=(1<<e.b)-1,f=(1<<h)-1;n<a;++n){var g,m=0;for(g=0;g<d;++g)g&e||(m=r(s[c++])),l[u++]=o(p[m&f]),m>>=h}else t["VP8LMapColor"+i](s,c,p,f,l,u,n,a,d)}}function Y(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255}}function q(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255,i[r++]=o>>24&255}}function J(t,e,n,i,r){for(n=e+n;e<n;){var o=(a=t[e++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;i[r++]=o,i[r++]=a}}function Q(t,e,n,i,r){for(n=e+n;e<n;){var o=(a=t[e++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;i[r++]=o,i[r++]=a}}function tt(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>0&255,i[r++]=o>>8&255,i[r++]=o>>16&255}}function et(t,e,n,r,o,a){if(0==a)for(n=e+n;e<n;)S(r,((a=t[e++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else i(r,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function it(t){return t==Zi||t==Wi||t==Hi||t==Ui}function rt(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function at(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new ot,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ut(t,e){var n=t.T,r=e.ba.f.RGBA,o=r.eb,a=r.fb+t.ka*r.A,s=vr[e.ba.S],c=t.y,l=t.O,u=t.f,h=t.N,d=t.ea,p=t.W,f=e.cc,g=e.dc,m=e.Mc,v=e.Nc,y=t.ka,b=t.ka+t.T,_=t.U,C=_+1>>1;for(0==y?s(c,l,null,null,u,h,d,p,u,h,d,p,o,a,null,null,_):(s(e.ec,e.fc,c,l,f,g,m,v,u,h,d,p,o,a-r.A,o,a,_),++n);y+2<b;y+=2)s(c,(l+=2*t.fa)-t.fa,c,l,f=u,g=h,m=d,v=p,u,h+=t.Rc,d,p+=t.Rc,o,(a+=2*r.A)-r.A,o,a,_);return l+=t.fa,t.j+b<t.o?(i(e.ec,e.fc,c,l,_),i(e.cc,e.dc,u,h,C),i(e.Mc,e.Nc,d,p,C),n--):1&b||s(c,l,null,null,u,h,d,p,u,h,d,p,o,a+r.A,null,null,_),n}function ht(t,n,i){var r=t.F,o=[t.J];if(null!=r){var a=t.U,s=n.ba.S,c=s==zi||s==Hi;n=n.ba.f.RGBA;var l=[0],u=t.ka;l[0]=t.T,t.Kb&&(0==u?--l[0]:(--u,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(l[0]=t.o-t.j-u));var h=n.eb;t=Ai(r,o[0],t.width,a,l,h,(u=n.fb+u*n.A)+(c?0:3),n.A),e(i==l),t&&it(s)&&wi(h,u,c,a,l,n.A)}return 0}function dt(t){var e=t.ma,n=e.ba.S,i=11>n,r=n==ji||n==Fi||n==zi||n==Vi||12==n||it(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Bn(e.Oa,t,r?11:12))return 0;if(r&&it(n)&&bn(),t.da)alert("todo:use_scaling");else{if(i){if(e.Ib=lt,t.Kb){if(e.memory=o(t.U+2*(n=t.U+1>>1)),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ut,bn()}}else alert("todo:EmitYUV");r&&(e.Jb=ht,i&&vn())}if(i&&!Er){for(t=0;256>t;++t)Lr[t]=89858*(t-128)+Pr>>Ar,Nr[t]=-22014*(t-128)+Pr,Rr[t]=-45773*(t-128),Tr[t]=113618*(t-128)+Pr>>Ar;for(t=Or;t<Mr;++t)Br[t-Or]=Ht(e=76283*(t-16)+Pr>>Ar,255),jr[t-Or]=Ht(e+8>>4,15);Er=1}return 1}function pt(t){var n=t.ma,i=t.U,r=t.T;return e(!(1&t.ka)),0>=i||0>=r?0:(i=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,i),n.Dc+=i,1)}function ft(t){t.ma.memory=null}function gt(t,e,n,i){return 47!=b(t,8)?0:(e[0]=b(t,14)+1,n[0]=b(t,14)+1,i[0]=b(t,1),0!=b(t,3)?0:!t.h)}function mt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+b(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Ji[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function yt(t,e,n){var i=x(n),r=t[e+=255&i].g-8;return 0<r&&(I(n,n.u+8),i=x(n),e+=t[e].value,e+=i&(1<<r)-1),I(n,n.u+t[e].g),t[e].value}function bt(t,n,i){return i.g+=t.g,i.value+=t.value<<n>>>0,e(8>=i.g),t.g}function _t(t,n,i){var r=t.xc;return e((n=0==r?0:t.vc[t.md*(i>>r)+(n>>r)])<t.Wb),t.Ya[n]}function Ct(t,n,r,o){var a=t.ab,s=t.c*n,c=t.C;n=c+n;var l=r,u=o;for(o=t.Ta,r=t.Ua;0<a--;){var h=t.gc[a],d=c,p=n,f=l,g=u,m=(u=o,l=r,h.Ea);switch(e(d<p),e(p<=h.nc),h.hc){case 2:$n(f,g,(p-d)*m,u,l);break;case 0:var v=d,y=p,b=u,_=l,C=(P=h).Ea;0==v&&(Hn(f,g,null,null,1,b,_),H(f,g+1,0,0,C-1,b,_+1),g+=C,_+=C,++v);for(var x=1<<P.b,w=x-1,I=j(C,P.b),A=P.K,P=P.w+(v>>P.b)*I;v<y;){var O=A,M=P,S=1;for(Un(f,g,b,_-C,1,b,_);S<C;){var k=(S&~w)+x;k>C&&(k=C),(0,Jn[O[M++]>>8&15])(f,g+ +S,b,_+S-C,k-S,b,_+S),S=k}g+=C,_+=C,++v&w||(P+=I)}p!=h.nc&&i(u,l-m,u,l+(p-d-1)*m,m);break;case 1:for(m=f,y=g,C=(f=h.Ea)-(_=f&~(b=(g=1<<h.b)-1)),v=j(f,h.b),x=h.K,h=h.w+(d>>h.b)*v;d<p;){for(w=x,I=h,A=new z,P=y+_,O=y+f;y<P;)$(w[I++],A),Qn(A,m,y,g,u,l),y+=g,l+=g;y<O&&($(w[I++],A),Qn(A,m,y,C,u,l),y+=C,l+=C),++d&b||(h+=v)}break;case 3:if(f==u&&g==l&&0<h.b){for(y=u,f=m=l+(p-d)*m-(_=(p-d)*j(h.Ea,h.b)),g=u,b=l,v=[],_=(C=_)-1;0<=_;--_)v[_]=g[b+_];for(_=C-1;0<=_;--_)y[f+_]=v[_];Kn(h,d,p,u,m,u,l)}else Kn(h,d,p,f,g,u,l)}l=o,u=r}u!=r&&i(o,r,l,u,s)}function xt(t,n){var i=t.V,r=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(16>=o),0<o){var a=t.l,s=t.Ta,c=t.Ua,l=a.width;if(Ct(t,o,i,r),o=c=[c],e((i=t.C)<(r=n)),e(a.v<a.va),r>a.o&&(r=a.o),i<a.j){var u=a.j-i;i=a.j,o[0]+=u*l}if(i>=r?i=0:(o[0]+=4*a.v,a.ka=i-a.j,a.U=a.va-a.v,a.T=r-i,i=1),i){if(c=c[0],11>(i=t.ca).S){var h=i.f.RGBA,d=(r=i.S,o=a.U,a=a.T,u=h.eb,h.A),p=a;for(h=h.fb+t.Ma*h.A;0<p--;){var f=s,g=c,m=o,v=u,y=h;switch(r){case Bi:ti(f,g,m,v,y);break;case ji:ei(f,g,m,v,y);break;case Zi:ei(f,g,m,v,y),wi(v,y,0,m,1,0);break;case Di:ri(f,g,m,v,y);break;case Fi:et(f,g,m,v,y,1);break;case Wi:et(f,g,m,v,y,1),wi(v,y,0,m,1,0);break;case zi:et(f,g,m,v,y,0);break;case Hi:et(f,g,m,v,y,0),wi(v,y,1,m,1,0);break;case Vi:ni(f,g,m,v,y);break;case Ui:ni(f,g,m,v,y),Ii(v,y,m,1,0);break;case Gi:ii(f,g,m,v,y);break;default:e(0)}c+=l,h+=d}t.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=i.height)}}t.C=n,e(t.C<=t.i)}function wt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,i=t.Ya[e].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function It(t,n,i,r,o,a){if(0!=t.Z){var s=t.qd,c=t.rd;for(e(null!=mr[t.Z]);n<i;++n)mr[t.Z](s,c,r,o,r,o,a),s=r,c=o,o+=a;t.qd=s,t.rd=c}}function At(t,n){var i=t.l.ma,r=0==i.Z||1==i.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(n<=t.l.o),n>r){var o=t.l.width,a=i.ca,s=i.tb+o*r,c=t.V,l=t.Ba+t.c*r,u=t.gc;e(1==t.ab),e(3==u[0].hc),Yn(u[0],r,n,c,l,a,s),It(i,r,n,a,s,o)}t.C=t.Ma=n}function Pt(t,n,i,r,o,a,s){var c=t.$/r,l=t.$%r,u=t.m,h=t.s,d=i+t.$,p=d;o=i+r*o;var f=i+r*a,g=280+h.ua,m=t.Pb?c:16777216,v=0<h.ua?h.Wa:null,y=h.wc,b=d<f?_t(h,l,c):null;e(t.C<a),e(f<=o);var _=!1;t:for(;;){for(;_||d<f;){var C=0;if(c>=m){var P=d-i;e((m=t).Pb),m.wd=m.m,m.xd=P,0<m.s.ua&&R(m.s.Wa,m.s.vb),m=c+tr}if(l&y||(b=_t(h,l,c)),e(null!=b),b.Qb&&(n[d]=b.qb,_=!0),!_)if(A(u),b.jc){P=n;var O=d,M=b.pd[x(C=u)&Fn-1];e(b.jc),256>M.g?(I(C,C.u+M.g),P[O]=M.value,C=0):(I(C,C.u+M.g-256),e(256<=M.value),C=M.value),0==C&&(_=!0)}else C=yt(b.G[0],b.H[0],u);if(u.h)break;if(_||256>C){if(!_)if(b.nd)n[d]=(b.qb|C<<8)>>>0;else{if(A(u),_=yt(b.G[1],b.H[1],u),A(u),P=yt(b.G[2],b.H[2],u),O=yt(b.G[3],b.H[3],u),u.h)break;n[d]=(O<<24|_<<16|C<<8|P)>>>0}if(_=!1,++d,++l>=r&&(l=0,++c,null!=s&&c<=a&&!(c%16)&&s(t,c),null!=v))for(;p<d;)C=n[p++],v.X[(506832829*C&4294967295)>>>v.Mb]=C}else if(280>C){if(C=mt(C-256,u),P=yt(b.G[4],b.H[4],u),A(u),P=vt(r,P=mt(P,u)),u.h)break;if(d-i<P||o-d<C)break t;for(O=0;O<C;++O)n[d+O]=n[d+O-P];for(d+=C,l+=C;l>=r;)l-=r,++c,null!=s&&c<=a&&!(c%16)&&s(t,c);if(e(d<=o),l&y&&(b=_t(h,l,c)),null!=v)for(;p<d;)C=n[p++],v.X[(506832829*C&4294967295)>>>v.Mb]=C}else{if(!(C<g))break t;for(_=C-280,e(null!=v);p<d;)C=n[p++],v.X[(506832829*C&4294967295)>>>v.Mb]=C;C=d,e(!(_>>>(P=v).Xa)),n[C]=P.X[_],_=!0}_||e(u.h==w(u))}if(t.Pb&&u.h&&d<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&R(t.s.vb,t.s.Wa);else{if(u.h)break t;null!=s&&s(t,c>a?a:c),t.a=0,t.$=d-i}return 1}return t.a=3,0}function Ot(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function Mt(){var e=new sn;return null==e?null:(e.a=0,e.xb=gr,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),$n=U,Qn=K,ti=Y,ei=q,ni=J,ii=Q,ri=tt,t.VP8LMapColor32b=Xn,t.VP8LMapColor8b=qn,e)}function St(t,n,i,s,c){var l=1,d=[t],f=[n],g=s.m,m=s.s,v=null,y=0;t:for(;;){if(i)for(;l&&b(g,1);){var _=d,C=f,w=s,P=1,O=w.m,M=w.gc[w.ab],S=b(O,2);if(w.Oc&1<<S)l=0;else{switch(w.Oc|=1<<S,M.hc=S,M.Ea=_[0],M.nc=C[0],M.K=[null],++w.ab,e(4>=w.ab),S){case 0:case 1:M.b=b(O,3)+2,P=St(j(M.Ea,M.b),j(M.nc,M.b),0,w,M.K),M.K=M.K[0];break;case 3:var k,E=b(O,8)+1,L=16<E?0:4<E?1:2<E?2:3;if(_[0]=j(M.Ea,L),M.b=L,k=P=St(E,1,0,w,M.K)){var R,N=E,B=M,F=1<<(8>>B.b),z=o(F);if(null==z)k=0;else{var V=B.K[0],G=B.w;for(z[0]=B.K[0][0],R=1;R<1*N;++R)z[R]=D(V[G+R],z[R-1]);for(;R<4*F;++R)z[R]=0;B.K[0]=null,B.K[0]=z,k=1}}P=k;break;case 2:break;default:e(0)}l=P}}if(d=d[0],f=f[0],l&&b(g,1)&&!(l=1<=(y=b(g,4))&&11>=y)){s.a=3;break t}var Z;if(Z=l)e:{var W,H,U,$=s,K=d,X=f,Y=y,q=i,J=$.m,Q=$.s,tt=[null],et=1,nt=0,it=Qi[Y];n:for(;;){if(q&&b(J,1)){var rt=b(J,3)+2,ot=j(K,rt),at=j(X,rt),st=ot*at;if(!St(ot,at,0,$,tt))break n;for(tt=tt[0],Q.xc=rt,W=0;W<st;++W){var ct=tt[W]>>8&65535;tt[W]=ct,ct>=et&&(et=ct+1)}}if(J.h)break n;for(H=0;5>H;++H){var lt=Xi[H];!H&&0<Y&&(lt+=1<<Y),nt<lt&&(nt=lt)}var ut=a(et*it,h),ht=et,dt=a(ht,p);if(null==dt)var pt=null;else e(65536>=ht),pt=dt;var ft=o(nt);if(null==pt||null==ft||null==ut){$.a=1;break n}var gt=ut;for(W=U=0;W<et;++W){var mt=pt[W],vt=mt.G,yt=mt.H,_t=0,Ct=1,xt=0;for(H=0;5>H;++H){lt=Xi[H],vt[H]=gt,yt[H]=U,!H&&0<Y&&(lt+=1<<Y);i:{var wt,It=lt,At=$,Mt=ft,kt=gt,Et=U,Lt=0,Tt=At.m,Rt=b(Tt,1);if(r(Mt,0,0,It),Rt){var Nt=b(Tt,1)+1,Bt=b(Tt,1),jt=b(Tt,0==Bt?1:8);Mt[jt]=1,2==Nt&&(Mt[jt=b(Tt,8)]=1);var Dt=1}else{var Ft=o(19),zt=b(Tt,4)+4;if(19<zt){At.a=3;var Vt=0;break i}for(wt=0;wt<zt;++wt)Ft[qi[wt]]=b(Tt,3);var Gt=void 0,Zt=void 0,Wt=At,Ht=Ft,Ut=It,$t=Mt,Kt=0,Xt=Wt.m,Yt=8,qt=a(128,h);r:for(;u(qt,0,7,Ht,19);){if(b(Xt,1)){var Jt=2+2*b(Xt,3);if((Gt=2+b(Xt,Jt))>Ut)break r}else Gt=Ut;for(Zt=0;Zt<Ut&&Gt--;){A(Xt);var Qt=qt[0+(127&x(Xt))];I(Xt,Xt.u+Qt.g);var te=Qt.value;if(16>te)$t[Zt++]=te,0!=te&&(Yt=te);else{var ee=16==te,ne=te-16,ie=Ki[ne],re=b(Xt,$i[ne])+ie;if(Zt+re>Ut)break r;for(var oe=ee?Yt:0;0<re--;)$t[Zt++]=oe}}Kt=1;break r}Kt||(Wt.a=3),Dt=Kt}(Dt=Dt&&!Tt.h)&&(Lt=u(kt,Et,8,Mt,It)),Dt&&0!=Lt?Vt=Lt:(At.a=3,Vt=0)}if(0==Vt)break n;if(Ct&&1==Yi[H]&&(Ct=0==gt[U].g),_t+=gt[U].g,U+=Vt,3>=H){var ae,se=ft[0];for(ae=1;ae<lt;++ae)ft[ae]>se&&(se=ft[ae]);xt+=se}}if(mt.nd=Ct,mt.Qb=0,Ct&&(mt.qb=(vt[3][yt[3]+0].value<<24|vt[1][yt[1]+0].value<<16|vt[2][yt[2]+0].value)>>>0,0==_t&&256>vt[0][yt[0]+0].value&&(mt.Qb=1,mt.qb+=vt[0][yt[0]+0].value<<8)),mt.jc=!mt.Qb&&6>xt,mt.jc){var ce,le=mt;for(ce=0;ce<Fn;++ce){var ue=ce,he=le.pd[ue],de=le.G[0][le.H[0]+ue];256<=de.value?(he.g=de.g+256,he.value=de.value):(he.g=0,he.value=0,ue>>=bt(de,8,he),ue>>=bt(le.G[1][le.H[1]+ue],16,he),ue>>=bt(le.G[2][le.H[2]+ue],0,he),bt(le.G[3][le.H[3]+ue],24,he))}}}Q.vc=tt,Q.Wb=et,Q.Ya=pt,Q.yc=ut,Z=1;break e}Z=0}if(!(l=Z)){s.a=3;break t}if(0<y){if(m.ua=1<<y,!T(m.Wa,y)){s.a=1,l=0;break t}}else m.ua=0;var pe=s,fe=d,ge=f,me=pe.s,ve=me.xc;if(pe.c=fe,pe.i=ge,me.md=j(fe,ve),me.wc=0==ve?-1:(1<<ve)-1,i){s.xb=fr;break t}if(null==(v=o(d*f))){s.a=1,l=0;break t}l=(l=Pt(s,v,0,d,f,f,null))&&!g.h;break t}return l?(null!=c?c[0]=v:(e(null==v),e(i)),s.$=0,i||Ot(m)):Ot(m),l}function kt(t,n){var i=t.c*t.i,r=i+n+16*n;return e(t.c<=n),t.V=o(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+i+n,1)}function Et(t,n){var i=t.C,r=n-i,o=t.V,a=t.Ba+t.c*i;for(e(n<=t.l.o);0<r;){var s=16<r?16:r,c=t.l.ma,l=t.l.width,u=l*s,h=c.ca,d=c.tb+l*i,p=t.Ta,f=t.Ua;Ct(t,s,o,a),Pi(p,f,h,d,u),It(c,i,i+s,h,d,l),r-=s,o+=s*t.c,i+=s}e(i==n),t.C=t.Ma=n}function Lt(){this.ub=this.yd=this.td=this.Rb=0}function Tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Nt(){this.Yb=function(){var t=[];return function t(e,n,i){for(var r=i[n],o=0;o<r&&(e.push(i.length>n+1?[]:0),!(i.length<n+1));o++)t(e[o],n+1,i)}(t,0,[3,11]),t}()}function Bt(){this.jb=o(3),this.Wc=s([4,8],Nt),this.Xc=s([4,17],Nt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Dt(){this.ld=this.La=this.dd=this.tc=0}function Ft(){this.Na=this.la=0}function zt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dt),this.Y=0,this.ya=Array(new Vt),this.aa=0,this.l=new Ut}function Zt(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Wt(){this.cb=this.a=0,this.sc="",this.m=new _,this.Od=new Lt,this.Kc=new Tt,this.ed=new jt,this.Qa=new Rt,this.Ic=this.$c=this.Aa=0,this.D=new Gt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,_),this.ia=0,this.pb=a(4,zt),this.Pa=new Bt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zt),this.Hd=0,this.rb=Array(new Ft),this.sb=0,this.wa=Array(new Dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vt),this.L=this.aa=0,this.gd=s([4,2],Dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ht(t,e){return 0>t?0:t>e?e:t}function Ut(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $t(){var t=new Wt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ir||(ir=qt)),t}function Kt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Xt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Yt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Kt(t,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,o=n.w,a=n.ha;if(4>a)return Kt(t,7,"Truncated header.");var s=i[o+0]|i[o+1]<<8|i[o+2]<<16,c=t.Od;if(c.Rb=!(1&s),c.td=s>>1&7,c.yd=s>>4&1,c.ub=s>>5,3<c.td)return Kt(t,3,"Incorrect keyframe parameters.");if(!c.yd)return Kt(t,4,"Frame not displayable.");o+=3,a-=3;var l=t.Kc;if(c.Rb){if(7>a)return Kt(t,7,"cannot parse picture header");if(!Xt(i,o,a))return Kt(t,3,"Bad code word");l.c=16383&(i[o+4]<<8|i[o+3]),l.Td=i[o+4]>>6,l.i=16383&(i[o+6]<<8|i[o+5]),l.Ud=i[o+6]>>6,o+=7,a-=7,t.za=l.c+15>>4,t.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((s=t.Pa).jb,0,255,s.jb.length),e(null!=(s=t.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,r(s.Zb,0,0,s.Zb.length),r(s.Lb,0,0,s.Lb)}if(c.ub>a)return Kt(t,7,"bad partition length");f(s=t.m,i,o,c.ub),o+=c.ub,a-=c.ub,c.Rb&&(l.Ld=O(s),l.Kd=O(s)),l=t.Qa;var u,h=t.Pa;if(e(null!=s),e(null!=l),l.Cb=O(s),l.Cb){if(l.Bb=O(s),O(s)){for(l.Fb=O(s),u=0;4>u;++u)l.Zb[u]=O(s)?m(s,7):0;for(u=0;4>u;++u)l.Lb[u]=O(s)?m(s,6):0}if(l.Bb)for(u=0;3>u;++u)h.jb[u]=O(s)?g(s,8):255}else l.Bb=0;if(s.Ka)return Kt(t,3,"cannot parse segment header");if((l=t.ed).zd=O(s),l.Tb=g(s,6),l.wb=g(s,3),l.Pc=O(s),l.Pc&&O(s)){for(h=0;4>h;++h)O(s)&&(l.vd[h]=m(s,6));for(h=0;4>h;++h)O(s)&&(l.od[h]=m(s,6))}if(t.L=0==l.Tb?0:l.zd?1:2,s.Ka)return Kt(t,3,"cannot parse filter header");var d=a;if(a=u=o,o=u+d,l=d,t.Xb=(1<<g(t.m,2))-1,d<3*(h=t.Xb))i=7;else{for(u+=3*h,l-=3*h,d=0;d<h;++d){var p=i[a+0]|i[a+1]<<8|i[a+2]<<16;p>l&&(p=l),f(t.Jc[+d],i,u,p),u+=p,l-=p,a+=3}f(t.Jc[+h],i,u,l),i=u<o?0:5}if(0!=i)return Kt(t,i,"cannot parse partitions");for(i=g(u=t.m,7),a=O(u)?m(u,4):0,o=O(u)?m(u,4):0,l=O(u)?m(u,4):0,h=O(u)?m(u,4):0,u=O(u)?m(u,4):0,d=t.Qa,p=0;4>p;++p){if(d.Cb){var v=d.Zb[p];d.Fb||(v+=i)}else{if(0<p){t.pb[p]=t.pb[0];continue}v=i}var y=t.pb[p];y.Sc[0]=er[Ht(v+a,127)],y.Sc[1]=nr[Ht(v+0,127)],y.Eb[0]=2*er[Ht(v+o,127)],y.Eb[1]=101581*nr[Ht(v+l,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=er[Ht(v+h,117)],y.Qc[1]=nr[Ht(v+u,127)],y.lc=v+u}if(!c.Rb)return Kt(t,4,"Not a key frame.");for(O(s),c=t.Pa,i=0;4>i;++i){for(a=0;8>a;++a)for(o=0;3>o;++o)for(l=0;11>l;++l)h=M(s,lr[i][a][o][l])?g(s,8):sr[i][a][o][l],c.Wc[i][a].Yb[o][l]=h;for(a=0;17>a;++a)c.Xc[i][a]=c.Wc[i][ur[a]]}return t.kc=O(s),t.kc&&(t.Bd=g(s,8)),t.cb=1}function qt(t,e,n,i,r,o,a){var s=e[r].Yb[n];for(n=0;16>r;++r){if(!M(t,s[n+0]))return r;for(;!M(t,s[n+1]);)if(s=e[++r].Yb[0],n=0,16==r)return 16;var c=e[r+1].Yb;if(M(t,s[n+2])){var l=t,u=0;if(M(l,(d=s)[(h=n)+3]))if(M(l,d[h+6])){for(s=0,h=2*(u=M(l,d[h+8]))+(d=M(l,d[h+9+u])),u=0,d=rr[h];d[s];++s)u+=u+M(l,d[s]);u+=3+(8<<h)}else M(l,d[h+7])?(u=7+2*M(l,165),u+=M(l,145)):u=5+M(l,159);else u=M(l,d[h+4])?3+M(l,d[h+5]):2;s=c[2]}else u=1,s=c[1];c=a+or[r],0>(l=t).b&&P(l);var h,d=l.b,p=(h=l.Ca>>1)-(l.I>>d)>>31;--l.b,l.Ca+=p,l.Ca|=1,l.I-=(h+1&p)<<d,o[c]=((u^p)-p)*i[(0<r)+0]}return 16}function Jt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function Qt(t,n){if(null==t)return 0;if(null==n)return Kt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Yt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var s=Fr[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-s>>4,t.zb=n.j-s>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+s>>4,t.Hb=n.va+15+s>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var c=t.ed;for(s=0;4>s;++s){var l;if(t.Qa.Cb){var u=t.Qa.Lb[s];t.Qa.Fb||(u+=c.Tb)}else u=c.Tb;for(l=0;1>=l;++l){var h=t.gd[s][l],d=u;if(c.Pc&&(d+=c.vd[0],l&&(d+=c.od[0])),0<(d=0>d?0:63<d?63:d)){var p=d;0<c.wb&&(p=4<c.wb?p>>2:p>>1)>9-c.wb&&(p=9-c.wb),1>p&&(p=1),h.dd=p,h.tc=2*d+p,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=l}}}s=0}else Kt(t,6,"Frame setup failed"),s=t.a;if(s=0==s){if(s){t.$c=0,0<t.Aa||(t.Ic=Vr);t:{c=4*(p=t.za);var f=32*p,g=p+1,m=0<t.L?p*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*p;if((h=c+832+(l=3*(16*(s=t.Ic)+Fr[t.L])/2*f)+(u=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)s=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){s=Kt(t,1,"no memory during frame initialization.");break t}t.Vb=h}d=t.Fc,t.Ac=h=t.Ec,t.Bc=d,d+=c,t.Gd=a(f,Zt),t.Hd=0,t.rb=a(g+1,Ft),t.sb=1,t.wa=m?a(m,Dt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=p),e(!0),t.oc=h,t.pc=d,d+=832,t.ya=a(v,Vt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=p),t.R=16*p,t.B=8*p,p=(f=Fr[t.L])*t.R,f=f/2*t.B,t.sa=h,t.ta=d+p,t.qa=t.sa,t.ra=t.ta+16*s*t.R+f,t.Ha=t.qa,t.Ia=t.ra+8*s*t.B+f,t.$c=0,d+=l,t.mb=u?h:null,t.nb=u?d:null,e(d+u<=t.Fc+t.Vb),Jt(t),r(t.Ac,t.Bc,0,c),s=1}}if(s){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Ei){for(s=-255;255>=s;++s)Oi[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Mi[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Si[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)ki[255+s]=0>s?0:255<s?255:s;Ei=1}oi=le,ai=oe,ci=ae,li=se,ui=ce,si=re,hi=Ke,di=Xe,pi=Je,fi=Qe,gi=Ye,mi=qe,vi=tn,yi=en,bi=Ge,_i=Ze,Ci=We,xi=He,dr[0]=Ie,dr[1]=he,dr[2]=xe,dr[3]=we,dr[4]=Ae,dr[5]=Oe,dr[6]=Pe,dr[7]=Me,dr[8]=ke,dr[9]=Se,hr[0]=ve,hr[1]=pe,hr[2]=fe,hr[3]=ge,hr[4]=ye,hr[5]=be,hr[6]=_e,pr[0]=Re,pr[1]=de,pr[2]=Ee,pr[3]=Le,pr[4]=Be,pr[5]=Ne,pr[6]=je,s=1}else s=0}s&&(s=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var a,s=t.Jc[t.M&t.Xb],c=t.m,l=t;for(a=0;a<l.za;++a){var u=c,h=l,d=h.Ac,p=h.Bc+4*a,f=h.zc,g=h.ya[h.aa+a];if(g.$b=h.Qa.Bb?M(u,h.Pa.jb[0])?2+M(u,h.Pa.jb[2]):M(u,h.Pa.jb[1]):0,h.kc&&(g.Ad=M(u,h.Bd)),g.Za=!M(u,145)+0,g.Za){var m=g.Ob,v=0;for(h=0;4>h;++h){var y,b=f[0+h];for(y=0;4>y;++y){for(var _=ar[M(u,(b=cr[d[p+y]][b])[0])];0<_;)_=ar[2*_+M(u,b[_])];d[p+y]=b=-_}i(m,v,d,p,4),v+=4,f[0+h]=b}}else b=M(u,156)?M(u,128)?1:3:M(u,163)?2:0,g.Ob[0]=b,r(d,p,b,4),r(f,0,b,4);g.Dd=M(u,142)?M(u,114)?M(u,183)?1:3:2:0}if(l.m.Ka)return Kt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(l=s,u=(c=t).rb[c.sb-1],d=c.rb[c.sb+c.ja],a=c.ya[c.aa+c.ja],p=c.kc?a.Ad:0)u.la=d.la=0,a.Za||(u.Na=d.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var C,x;if(u=d,d=l,p=c.Pa.Xc,g=c.pb[(f=c.ya[c.aa+c.ja]).$b],v=c.rb[c.sb-1],b=y=0,r(h=f.ad,m=0,0,384),f.Za)var w=0,I=p[3];else{_=o(16);var A=u.Na+v.Na;if(A=ir(d,p[1],A,g.Eb,0,_,0),u.Na=v.Na=(0<A)+0,1<A)oi(_,0,h,m);else{var P=_[0]+3>>3;for(_=0;256>_;_+=16)h[m+_]=P}w=1,I=p[0]}var O=15&u.la,S=15&v.la;for(_=0;4>_;++_){var k=1&S;for(P=x=0;4>P;++P)O=O>>1|(k=(A=ir(d,I,A=k+(1&O),g.Sc,w,h,m))>w)<<7,x=x<<2|(3<A?3:1<A?2:0!=h[m+0]),m+=16;O>>=4,S=S>>1|k<<7,y=(y<<8|x)>>>0}for(I=O,w=S>>4,C=0;4>C;C+=2){for(x=0,O=u.la>>4+C,S=v.la>>4+C,_=0;2>_;++_){for(k=1&S,P=0;2>P;++P)O=O>>1|(k=0<(A=ir(d,p[2],A=k+(1&O),g.Qc,0,h,m)))<<3,x=x<<2|(3<A?3:1<A?2:0!=h[m+0]),m+=16;O>>=2,S=S>>1|k<<5}b|=x<<4*C,I|=O<<4<<C,w|=(240&S)<<C}u.la=I,v.la=w,f.Hc=y,f.Gc=b,f.ia=43690&b?0:g.ia,p=!(y|b)}if(0<c.L&&(c.wa[c.Y+c.ja]=c.gd[a.$b][a.Za],c.wa[c.Y+c.ja].La|=!p),l.Ka)return Kt(t,7,"Premature end-of-file encountered.")}if(Jt(t),c=n,l=1,a=(s=t).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)t:{if(a.M=s.M,a.uc=u,Rn(s,a),l=1,a=(x=s.D).Nb,u=(b=Fr[s.L])*s.R,p=s.sa,f=s.ta-u+(_=16*a*s.R),g=s.qa,h=s.ra-(d=b/2*s.B)+(P=8*a*s.B),m=s.Ha,v=s.Ia-d+P,S=0==(O=x.M),y=O>=s.Va-1,2==s.Aa&&Rn(s,x),x.uc)for(k=(A=s).D.M,e(A.D.uc),x=A.yb;x<A.Hb;++x){I=k;var E=(L=(V=A).D).Nb,L=L.wa[L.Y+(w=x)],T=V.sa,R=V.ta+16*E*(C=V.R)+16*w,N=L.dd,B=L.tc;if(0!=B)if(e(3<=B),1==V.L)0<w&&_i(T,R,C,B+4),L.La&&xi(T,R,C,B),0<I&&bi(T,R,C,B+4),L.La&&Ci(T,R,C,B);else{var j=V.B,D=V.qa,F=V.ra+8*E*j+8*w,z=V.Ha,V=V.Ia+8*E*j+8*w;E=L.ld,0<w&&(di(T,R,C,B+4,N,E),fi(D,F,z,V,j,B+4,N,E)),L.La&&(mi(T,R,C,B,N,E),yi(D,F,z,V,j,B,N,E)),0<I&&(hi(T,R,C,B+4,N,E),pi(D,F,z,V,j,B+4,N,E)),L.La&&(gi(T,R,C,B,N,E),vi(D,F,z,V,j,B,N,E))}}if(s.ia&&alert("todo:DitherRow"),null!=c.put){if(x=16*O,O=16*(O+1),S?(c.y=s.sa,c.O=s.ta+_,c.f=s.qa,c.N=s.ra+P,c.ea=s.Ha,c.W=s.Ia+P):(x-=b,c.y=p,c.O=f,c.f=g,c.N=h,c.ea=m,c.W=v),y||(O-=b),O>c.o&&(O=c.o),c.F=null,c.J=null,null!=s.Fa&&0<s.Fa.length&&x<O&&(c.J=dn(s,c,x,O-x),c.F=s.mb,null==c.F&&0==c.F.length)){l=Kt(s,3,"Could not decode alpha data.");break t}x<c.j&&(b=c.j-x,x=c.j,e(!(1&b)),c.O+=s.R*b,c.N+=s.B*(b>>1),c.W+=s.B*(b>>1),null!=c.F&&(c.J+=c.width*b)),x<O&&(c.O+=c.v,c.N+=c.v>>1,c.W+=c.v>>1,null!=c.F&&(c.J+=c.v),c.ka=x-c.j,c.U=c.va-c.v,c.T=O-x,l=c.put(c))}a+1!=s.Ic||y||(i(s.sa,s.ta-u,p,f+16*s.R,u),i(s.qa,s.ra-d,g,h+8*s.B,d),i(s.Ha,s.Ia-d,m,v+8*s.B,d))}if(!l)return Kt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),s&=1}return s?(t.cb=0,s):0}function te(t,e,n,i,r){t[e+n+32*i]=-256&(r=t[e+n+32*i]+(r>>3))?0>r?0:255:r}function ee(t,e,n,i,r,o){te(t,e,0,n,i+r),te(t,e,1,n,i+o),te(t,e,2,n,i-o),te(t,e,3,n,i-r)}function ne(t){return(20091*t>>16)+t}function ie(t,e,n,i){var r,a=0,s=o(16);for(r=0;4>r;++r){var c=t[e+0]+t[e+8],l=t[e+0]-t[e+8],u=(35468*t[e+4]>>16)-ne(t[e+12]),h=ne(t[e+4])+(35468*t[e+12]>>16);s[a+0]=c+h,s[a+1]=l+u,s[a+2]=l-u,s[a+3]=c-h,a+=4,e++}for(r=a=0;4>r;++r)c=(t=s[a+0]+4)+s[a+8],l=t-s[a+8],u=(35468*s[a+4]>>16)-ne(s[a+12]),te(n,i,0,0,c+(h=ne(s[a+4])+(35468*s[a+12]>>16))),te(n,i,1,0,l+u),te(n,i,2,0,l-u),te(n,i,3,0,c-h),a++,i+=32}function re(t,e,n,i){var r=t[e+0]+4,o=35468*t[e+4]>>16,a=ne(t[e+4]),s=35468*t[e+1]>>16;ee(n,i,0,r+a,t=ne(t[e+1]),s),ee(n,i,1,r+o,t,s),ee(n,i,2,r-o,t,s),ee(n,i,3,r-a,t,s)}function oe(t,e,n,i,r){ie(t,e,n,i),r&&ie(t,e+16,n,i+4)}function ae(t,e,n,i){ai(t,e+0,n,i,1),ai(t,e+32,n,i+128,1)}function se(t,e,n,i){var r;for(t=t[e+0]+4,r=0;4>r;++r)for(e=0;4>e;++e)te(n,i,e,r,t)}function ce(t,e,n,i){t[e+0]&&li(t,e+0,n,i),t[e+16]&&li(t,e+16,n,i+4),t[e+32]&&li(t,e+32,n,i+128),t[e+48]&&li(t,e+48,n,i+128+4)}function le(t,e,n,i){var r,a=o(16);for(r=0;4>r;++r){var s=t[e+0+r]+t[e+12+r],c=t[e+4+r]+t[e+8+r],l=t[e+4+r]-t[e+8+r],u=t[e+0+r]-t[e+12+r];a[0+r]=s+c,a[8+r]=s-c,a[4+r]=u+l,a[12+r]=u-l}for(r=0;4>r;++r)s=(t=a[0+4*r]+3)+a[3+4*r],l=a[1+4*r]-a[2+4*r],u=t-a[3+4*r],n[i+0]=s+(c=a[1+4*r]+a[2+4*r])>>3,n[i+16]=u+l>>3,n[i+32]=s-c>>3,n[i+48]=u-l>>3,i+=64}function ue(t,e,n){var i,r=e-32,o=Ri,a=255-t[r-1];for(i=0;i<n;++i){var s,c=o,l=a+t[e-1];for(s=0;s<n;++s)t[e+s]=c[l+t[r+s]];e+=32}}function he(t,e){ue(t,e,4)}function de(t,e){ue(t,e,8)}function pe(t,e){ue(t,e,16)}function fe(t,e){var n;for(n=0;16>n;++n)i(t,e+32*n,t,e-32,16)}function ge(t,e){var n;for(n=16;0<n;--n)r(t,e,t[e-1],16),e+=32}function me(t,e,n){var i;for(i=0;16>i;++i)r(e,n+32*i,t,16)}function ve(t,e){var n,i=16;for(n=0;16>n;++n)i+=t[e-1+32*n]+t[e+n-32];me(i>>5,t,e)}function ye(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e-1+32*n];me(i>>4,t,e)}function be(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e+n-32];me(i>>4,t,e)}function _e(t,e){me(128,t,e)}function Ce(t,e,n){return t+2*e+n+2>>2}function xe(t,e){var n,r=e-32;for(r=new Uint8Array([Ce(t[r-1],t[r+0],t[r+1]),Ce(t[r+0],t[r+1],t[r+2]),Ce(t[r+1],t[r+2],t[r+3]),Ce(t[r+2],t[r+3],t[r+4])]),n=0;4>n;++n)i(t,e+32*n,r,0,r.length)}function we(t,e){var n=t[e-1],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];S(t,e+0,16843009*Ce(t[e-1-32],n,i)),S(t,e+32,16843009*Ce(n,i,r)),S(t,e+64,16843009*Ce(i,r,o)),S(t,e+96,16843009*Ce(r,o,o))}function Ie(t,e){var n,i=4;for(n=0;4>n;++n)i+=t[e+n-32]+t[e-1+32*n];for(i>>=3,n=0;4>n;++n)r(t,e+32*n,i,4)}function Ae(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],c=t[e+2-32],l=t[e+3-32];t[e+0+96]=Ce(i,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=Ce(n,i,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=Ce(o,n,i),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=Ce(a,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=Ce(s,a,o),t[e+3+32]=t[e+2+0]=Ce(c,s,a),t[e+3+0]=Ce(l,c,s)}function Pe(t,e){var n=t[e+1-32],i=t[e+2-32],r=t[e+3-32],o=t[e+4-32],a=t[e+5-32],s=t[e+6-32],c=t[e+7-32];t[e+0+0]=Ce(t[e+0-32],n,i),t[e+1+0]=t[e+0+32]=Ce(n,i,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=Ce(i,r,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=Ce(r,o,a),t[e+3+32]=t[e+2+64]=t[e+1+96]=Ce(o,a,s),t[e+3+64]=t[e+2+96]=Ce(a,s,c),t[e+3+96]=Ce(s,c,c)}function Oe(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],c=t[e+2-32],l=t[e+3-32];t[e+0+0]=t[e+1+64]=o+a+1>>1,t[e+1+0]=t[e+2+64]=a+s+1>>1,t[e+2+0]=t[e+3+64]=s+c+1>>1,t[e+3+0]=c+l+1>>1,t[e+0+96]=Ce(r,i,n),t[e+0+64]=Ce(i,n,o),t[e+0+32]=t[e+1+96]=Ce(n,o,a),t[e+1+32]=t[e+2+96]=Ce(o,a,s),t[e+2+32]=t[e+3+96]=Ce(a,s,c),t[e+3+32]=Ce(s,c,l)}function Me(t,e){var n=t[e+0-32],i=t[e+1-32],r=t[e+2-32],o=t[e+3-32],a=t[e+4-32],s=t[e+5-32],c=t[e+6-32],l=t[e+7-32];t[e+0+0]=n+i+1>>1,t[e+1+0]=t[e+0+64]=i+r+1>>1,t[e+2+0]=t[e+1+64]=r+o+1>>1,t[e+3+0]=t[e+2+64]=o+a+1>>1,t[e+0+32]=Ce(n,i,r),t[e+1+32]=t[e+0+96]=Ce(i,r,o),t[e+2+32]=t[e+1+96]=Ce(r,o,a),t[e+3+32]=t[e+2+96]=Ce(o,a,s),t[e+3+64]=Ce(a,s,c),t[e+3+96]=Ce(s,c,l)}function Se(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+i+1>>1,t[e+2+0]=t[e+0+32]=i+r+1>>1,t[e+2+32]=t[e+0+64]=r+o+1>>1,t[e+1+0]=Ce(n,i,r),t[e+3+0]=t[e+1+32]=Ce(i,r,o),t[e+3+32]=t[e+1+64]=Ce(r,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function ke(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96],a=t[e-1-32],s=t[e+0-32],c=t[e+1-32],l=t[e+2-32];t[e+0+0]=t[e+2+32]=n+a+1>>1,t[e+0+32]=t[e+2+64]=i+n+1>>1,t[e+0+64]=t[e+2+96]=r+i+1>>1,t[e+0+96]=o+r+1>>1,t[e+3+0]=Ce(s,c,l),t[e+2+0]=Ce(a,s,c),t[e+1+0]=t[e+3+32]=Ce(n,a,s),t[e+1+32]=t[e+3+64]=Ce(i,n,a),t[e+1+64]=t[e+3+96]=Ce(r,i,n),t[e+1+96]=Ce(o,r,i)}function Ee(t,e){var n;for(n=0;8>n;++n)i(t,e+32*n,t,e-32,8)}function Le(t,e){var n;for(n=0;8>n;++n)r(t,e,t[e-1],8),e+=32}function Te(t,e,n){var i;for(i=0;8>i;++i)r(e,n+32*i,t,8)}function Re(t,e){var n,i=8;for(n=0;8>n;++n)i+=t[e+n-32]+t[e-1+32*n];Te(i>>4,t,e)}function Ne(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e+n-32];Te(i>>3,t,e)}function Be(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e-1+32*n];Te(i>>3,t,e)}function je(t,e){Te(128,t,e)}function De(t,e,n){var i=t[e-n],r=t[e+0],o=3*(r-i)+Li[1020+t[e-2*n]-t[e+n]],a=Ti[112+(o+4>>3)];t[e-n]=Ri[255+i+Ti[112+(o+3>>3)]],t[e+0]=Ri[255+r-a]}function Fe(t,e,n,i){return Ni[255+t[e-2*n]-t[e-n]]>i||Ni[255+t[e+n]-t[e+0]]>i}function ze(t,e,n,i){return 4*Ni[255+t[e-n]-t[e+0]]+Ni[255+t[e-2*n]-t[e+n]]<=i}function Ve(t,e,n,i,r){var o=t[e-3*n],a=t[e-2*n],s=t[e-n],c=t[e+0],l=t[e+n],u=t[e+2*n];return 4*Ni[255+s-c]+Ni[255+a-l]>i?0:Ni[255+t[e-4*n]-o]<=r&&Ni[255+o-a]<=r&&Ni[255+a-s]<=r&&Ni[255+t[e+3*n]-u]<=r&&Ni[255+u-l]<=r&&Ni[255+l-c]<=r}function Ge(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)ze(t,e+i,n,r)&&De(t,e+i,n)}function Ze(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)ze(t,e+i*n,1,r)&&De(t,e+i*n,1)}function We(t,e,n,i){var r;for(r=3;0<r;--r)Ge(t,e+=4*n,n,i)}function He(t,e,n,i){var r;for(r=3;0<r;--r)Ze(t,e+=4,n,i)}function Ue(t,e,n,i,r,o,a,s){for(o=2*o+1;0<r--;){if(Ve(t,e,n,o,a))if(Fe(t,e,n,s))De(t,e,n);else{var c=t,l=e,u=n,h=c[l-2*u],d=c[l-u],p=c[l+0],f=c[l+u],g=c[l+2*u],m=27*(y=Li[1020+3*(p-d)+Li[1020+h-f]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;c[l-3*u]=Ri[255+c[l-3*u]+y],c[l-2*u]=Ri[255+h+v],c[l-u]=Ri[255+d+m],c[l+0]=Ri[255+p-m],c[l+u]=Ri[255+f-v],c[l+2*u]=Ri[255+g-y]}e+=i}}function $e(t,e,n,i,r,o,a,s){for(o=2*o+1;0<r--;){if(Ve(t,e,n,o,a))if(Fe(t,e,n,s))De(t,e,n);else{var c=t,l=e,u=n,h=c[l-u],d=c[l+0],p=c[l+u],f=Ti[112+(4+(g=3*(d-h))>>3)],g=Ti[112+(g+3>>3)],m=f+1>>1;c[l-2*u]=Ri[255+c[l-2*u]+m],c[l-u]=Ri[255+h+g],c[l+0]=Ri[255+d-f],c[l+u]=Ri[255+p-m]}e+=i}}function Ke(t,e,n,i,r,o){Ue(t,e,n,1,16,i,r,o)}function Xe(t,e,n,i,r,o){Ue(t,e,1,n,16,i,r,o)}function Ye(t,e,n,i,r,o){var a;for(a=3;0<a;--a)$e(t,e+=4*n,n,1,16,i,r,o)}function qe(t,e,n,i,r,o){var a;for(a=3;0<a;--a)$e(t,e+=4,1,n,16,i,r,o)}function Je(t,e,n,i,r,o,a,s){Ue(t,e,r,1,8,o,a,s),Ue(n,i,r,1,8,o,a,s)}function Qe(t,e,n,i,r,o,a,s){Ue(t,e,1,r,8,o,a,s),Ue(n,i,1,r,8,o,a,s)}function tn(t,e,n,i,r,o,a,s){$e(t,e+4*r,r,1,8,o,a,s),$e(n,i+4*r,r,1,8,o,a,s)}function en(t,e,n,i,r,o,a,s){$e(t,e+4,1,r,8,o,a,s),$e(n,i+4,1,r,8,o,a,s)}function nn(){this.ba=new at,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ct,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new N,this.vb=new N,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new h}function sn(){this.xb=this.a=0,this.l=new Ut,this.ca=new at,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,on),this.Oc=0}function cn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ut,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(t,e,n,i,r,o,a){for(t=null==t?0:t[e+0],e=0;e<a;++e)r[o+e]=t+n[i+e]&255,t=r[o+e]}function un(t,e,n,i,r,o,a){var s;if(null==t)ln(null,null,n,i,r,o,a);else for(s=0;s<a;++s)r[o+s]=t[e+s]+n[i+s]&255}function hn(t,e,n,i,r,o,a){if(null==t)ln(null,null,n,i,r,o,a);else{var s,c=t[e+0],l=c,u=c;for(s=0;s<a;++s)l=u+(c=t[e+s])-l,u=n[i+s]+(-256&l?0>l?0:255:l)&255,l=c,r[o+s]=u}}function dn(t,n,r,a){var s=n.width,c=n.o;if(e(null!=t&&null!=n),0>r||0>=a||r+a>c)return null;if(!t.Cc){if(null==t.ga){var l;if(t.ga=new cn,(l=null==t.ga)||(l=n.width*n.o,e(0==t.Gb.length),t.Gb=o(l),t.Uc=0,null==t.Gb?l=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,l=1),l=!l),!l){var u=t.Fa,h=t.P,d=t.qc,p=t.mb,f=t.nb,g=h+1,m=d-1,y=(l=t.ga).l;if(e(null!=u&&null!=p&&null!=n),mr[0]=null,mr[1]=ln,mr[2]=un,mr[3]=hn,l.ca=p,l.tb=f,l.c=n.width,l.i=n.height,e(0<l.c&&0<l.i),1>=d)n=0;else if(l.$a=u[h+0]>>0&3,l.Z=u[h+0]>>2&3,l.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||h)n=0;else if(y.put=pt,y.ac=dt,y.bc=ft,y.ma=l,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,l.$a)t:{e(1==l.$a),n=Mt();e:for(;;){if(null==n){n=0;break t}if(e(null!=l),l.mc=n,n.c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,v(n.m,u,g,m),!St(l.c,l.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&wt(n.s)?(l.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(l.ic=0,n=kt(n,l.c)),!n)break e;n=1;break t}l.mc=null,n=0}else n=m>=l.c*l.i;l=!n}if(l)return null;1!=t.ga.Lc?t.Ga=0:a=c-r}e(null!=t.ga),e(r+a<=c);t:{if(n=(u=t.ga).c,c=u.l.o,0==u.$a){if(g=t.rc,m=t.Vc,y=t.Fa,d=t.mb,p=t.nb+r*n,e((h=t.P+1+r*n)<=t.P+t.qc),0!=u.Z)for(e(null!=mr[u.Z]),l=0;l<a;++l)mr[u.Z](g,m,y,h,d,p,n),g=d,m=p,p+=n,h+=n;else for(l=0;l<a;++l)i(d,p,y,h,n),g=d,m=p,p+=n,h+=n;t.rc=g,t.Vc=m}else{if(e(null!=u.mc),n=r+a,e(null!=(l=u.mc)),e(n<=l.i),l.C>=n)n=1;else if(u.ic||vn(),u.ic){u=l.V,g=l.Ba;var b=l.i,_=(y=1,h=l.$/(m=l.c),d=l.$%m,p=l.m,f=l.s,l.$),C=m*b,x=m*n,I=f.wc,P=_<x?_t(f,d,h):null;e(_<=C),e(n<=b),e(wt(f));e:for(;;){for(;!p.h&&_<x;){if(d&I||(P=_t(f,d,h)),e(null!=P),A(p),256>(b=yt(P.G[0],P.H[0],p)))u[g+_]=b,++_,++d>=m&&(d=0,++h<=n&&!(h%16)&&At(l,h));else{if(!(280>b)){y=0;break e}b=mt(b-256,p);var O,M=yt(P.G[4],P.H[4],p);if(A(p),!(_>=(M=vt(m,M=mt(M,p)))&&C-_>=b)){y=0;break e}for(O=0;O<b;++O)u[g+_+O]=u[g+_+O-M];for(_+=b,d+=b;d>=m;)d-=m,++h<=n&&!(h%16)&&At(l,h);_<x&&d&I&&(P=_t(f,d,h))}e(p.h==w(p))}At(l,h>n?n:h);break e}!y||p.h&&_<C?(y=0,l.a=p.h?5:3):l.$=_,n=y}else n=Pt(l,l.V,l.Ba,l.c,l.i,n,Et);if(!n){a=0;break t}}r+a>=c&&(t.Cc=1),a=1}if(!a)return null;if(t.Cc&&(null!=(a=t.ga)&&(a.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*s}function pn(t,e,n,i,r,o){for(;0<r--;){var a,s=t,c=e+(n?1:0),l=t,u=e+(n?0:3);for(a=0;a<i;++a){var h=l[u+4*a];255!=h&&(s[c+4*a+0]=s[c+4*a+0]*(h*=32897)>>23,s[c+4*a+1]=s[c+4*a+1]*h>>23,s[c+4*a+2]=s[c+4*a+2]*h>>23)}e+=o}}function fn(t,e,n,i,r){for(;0<i--;){var o;for(o=0;o<n;++o){var a=t[e+2*o+0],s=15&(l=t[e+2*o+1]),c=4369*s,l=(240&l|l>>4)*c>>16;t[e+2*o+0]=(240&a|a>>4)*c>>16&240|(15&a|a<<4)*c>>16>>4&15,t[e+2*o+1]=240&l|s}e+=r}}function gn(t,e,n,i,r,o,a,s){var c,l,u=255;for(l=0;l<r;++l){for(c=0;c<i;++c){var h=t[e+c];o[a+4*c]=h,u&=h}e+=n,a+=s}return 255!=u}function mn(t,e,n,i,r){var o;for(o=0;o<r;++o)n[i+o]=t[e+o]>>8}function vn(){wi=pn,Ii=fn,Ai=gn,Pi=mn}function yn(n,i,r){t[n]=function(t,n,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b){var _,C=b-1>>1,x=s[c+0]|l[u+0]<<16,w=h[d+0]|p[f+0]<<16;e(null!=t);var I=3*x+w+131074>>2;for(i(t[n+0],255&I,I>>16,g,m),null!=o&&i(o[a+0],255&(I=3*w+x+131074>>2),I>>16,v,y),_=1;_<=C;++_){var A=s[c+_]|l[u+_]<<16,P=h[d+_]|p[f+_]<<16,O=x+A+w+P+524296,M=O+2*(A+w)>>3;I=M+x>>1,x=(O=O+2*(x+P)>>3)+A>>1,i(t[n+2*_-1],255&I,I>>16,g,m+(2*_-1)*r),i(t[n+2*_-0],255&x,x>>16,g,m+(2*_-0)*r),null!=o&&(x=M+P>>1,i(o[a+2*_-1],255&(I=O+w>>1),I>>16,v,y+(2*_-1)*r),i(o[a+2*_+0],255&x,x>>16,v,y+(2*_+0)*r)),x=A,w=P}1&b||(i(t[n+b-1],255&(I=3*x+w+131074>>2),I>>16,g,m+(b-1)*r),null!=o&&i(o[a+b-1],255&(I=3*w+x+131074>>2),I>>16,v,y+(b-1)*r))}}function bn(){vr[Bi]=yr,vr[ji]=_r,vr[Di]=br,vr[Fi]=Cr,vr[zi]=xr,vr[Vi]=wr,vr[Gi]=Ir,vr[Zi]=_r,vr[Wi]=Cr,vr[Hi]=xr,vr[Ui]=wr}function _n(t){return t&~kr?0>t?0:255:t>>Sr}function Cn(t,e){return _n((19077*t>>8)+(26149*e>>8)-14234)}function xn(t,e,n){return _n((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function wn(t,e){return _n((19077*t>>8)+(33050*e>>8)-17685)}function In(t,e,n,i,r){i[r+0]=Cn(t,n),i[r+1]=xn(t,e,n),i[r+2]=wn(t,e)}function An(t,e,n,i,r){i[r+0]=wn(t,e),i[r+1]=xn(t,e,n),i[r+2]=Cn(t,n)}function Pn(t,e,n,i,r){var o=xn(t,e,n);e=o<<3&224|wn(t,e)>>3,i[r+0]=248&Cn(t,n)|o>>5,i[r+1]=e}function On(t,e,n,i,r){var o=240&wn(t,e)|15;i[r+0]=240&Cn(t,n)|xn(t,e,n)>>4,i[r+1]=o}function Mn(t,e,n,i,r){i[r+0]=255,In(t,e,n,i,r+1)}function Sn(t,e,n,i,r){An(t,e,n,i,r),i[r+3]=255}function kn(t,e,n,i,r){In(t,e,n,i,r),i[r+3]=255}function Ht(t,e){return 0>t?0:t>e?e:t}function En(e,n,i){t[e]=function(t,e,r,o,a,s,c,l,u){for(var h=l+(-2&u)*i;l!=h;)n(t[e+0],r[o+0],a[s+0],c,l),n(t[e+1],r[o+0],a[s+0],c,l+i),e+=2,++o,++s,l+=2*i;1&u&&n(t[e+0],r[o+0],a[s+0],c,l)}}function Ln(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Tn(t,e,n,i,r){switch(t>>>30){case 3:ai(e,n,i,r,0);break;case 2:si(e,n,i,r);break;case 1:li(e,n,i,r)}}function Rn(t,e){var n,o,a=e.M,s=e.Nb,c=t.oc,l=t.pc+40,u=t.oc,h=t.pc+584,d=t.oc,p=t.pc+600;for(n=0;16>n;++n)c[l+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,d[p+32*n-1]=129;for(0<a?c[l-1-32]=u[h-1-32]=d[p-1-32]=129:(r(c,l-32-1,127,21),r(u,h-32-1,127,9),r(d,p-32-1,127,9)),o=0;o<t.za;++o){var f=e.ya[e.aa+o];if(0<o){for(n=-1;16>n;++n)i(c,l+32*n-4,c,l+32*n+12,4);for(n=-1;8>n;++n)i(u,h+32*n-4,u,h+32*n+4,4),i(d,p+32*n-4,d,p+32*n+4,4)}var g=t.Gd,m=t.Hd+o,v=f.ad,y=f.Hc;if(0<a&&(i(c,l-32,g[m].y,0,16),i(u,h-32,g[m].f,0,8),i(d,p-32,g[m].ea,0,8)),f.Za){var b=c,_=l-32+16;for(0<a&&(o>=t.za-1?r(b,_,g[m].y[15],4):i(b,_,g[m+1].y,0,4)),n=0;4>n;n++)b[_+128+n]=b[_+256+n]=b[_+384+n]=b[_+0+n];for(n=0;16>n;++n,y<<=2)dr[f.Ob[n]](b=c,_=l+Dr[n]),Tn(y,v,16*+n,b,_)}else if(b=Ln(o,a,f.Ob[0]),hr[b](c,l),0!=y)for(n=0;16>n;++n,y<<=2)Tn(y,v,16*+n,c,l+Dr[n]);for(n=f.Gc,b=Ln(o,a,f.Dd),pr[b](u,h),pr[b](d,p),y=v,b=u,_=h,255&(f=n>>0)&&(170&f?ci(y,256,b,_):ui(y,256,b,_)),f=d,y=p,255&(n>>=8)&&(170&n?ci(v,320,f,y):ui(v,320,f,y)),a<t.Ub-1&&(i(g[m].y,0,c,l+480,16),i(g[m].f,0,u,h+224,8),i(g[m].ea,0,d,p+224,8)),g=t.sa,m=t.ta+16*o+16*s*t.R,v=t.qa,f=t.ra+8*o+(n=8*s*t.B),y=t.Ha,b=t.Ia+8*o+n,n=0;16>n;++n)i(g,m+n*t.R,c,l+32*n,16);for(n=0;8>n;++n)i(v,f+n*t.B,u,h+32*n,8),i(y,b+n*t.B,d,p+32*n,8)}}function Nn(t,i,r,o,a,s,c,l,u){var h=[0],d=[0],p=0,f=null!=u?u.kd:0,g=null!=u?u:new rn;if(null==t||12>r)return 7;g.data=t,g.w=i,g.ha=r,i=[i],r=[r],g.gb=[g.gb];t:{var m=i,y=r,b=g.gb;if(e(null!=t),e(null!=y),e(null!=b),b[0]=0,12<=y[0]&&!n(t,m[0],"RIFF")){if(n(t,m[0]+8,"WEBP")){b=3;break t}var _=L(t,m[0]+4);if(12>_||4294967286<_){b=3;break t}if(f&&_>y[0]-8){b=7;break t}b[0]=_,m[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(_=0<g.gb[0],r=r[0];;){t:{var x=t;y=i,b=r;var w=h,I=d,A=m=[0];if((M=p=[p])[0]=0,8>b[0])b=7;else{if(!n(x,y[0],"VP8X")){if(10!=L(x,y[0]+4)){b=3;break t}if(18>b[0]){b=7;break t}var P=L(x,y[0]+8),O=1+E(x,y[0]+12);if(2147483648<=O*(x=1+E(x,y[0]+15))){b=3;break t}null!=A&&(A[0]=P),null!=w&&(w[0]=O),null!=I&&(I[0]=x),y[0]+=18,b[0]-=18,M[0]=1}b=0}}if(p=p[0],0!=b)return b;if(y=!!(2&(m=m[0])),!_&&p)return 3;if(null!=s&&(s[0]=!!(16&m)),null!=c&&(c[0]=y),null!=l&&(l[0]=0),c=h[0],m=d[0],p&&y&&null==u){b=0;break}if(4>r){b=7;break}if(_&&p||!_&&!p&&!n(t,i[0],"ALPH")){r=[r],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];t:{b=i,_=r;var M=g.gb;w=g.na,I=g.P,A=g.Sa,O=22,e(null!=(P=t)),e(null!=_),x=b[0];var S=_[0];for(e(null!=w),e(null!=A),w[0]=null,I[0]=null,A[0]=0;;){if(b[0]=x,_[0]=S,8>S){b=7;break t}var k=L(P,x+4);if(4294967286<k){b=3;break t}var T=8+k+1&-2;if(O+=T,0<M&&O>M){b=3;break t}if(!n(P,x,"VP8 ")||!n(P,x,"VP8L")){b=0;break t}if(S[0]<T){b=7;break t}n(P,x,"ALPH")||(w[0]=P,I[0]=x+8,A[0]=k),x+=T,S-=T}}if(r=r[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=b)break}r=[r],g.Ja=[g.Ja],g.xa=[g.xa];t:if(M=t,b=i,_=r,w=g.gb[0],I=g.Ja,A=g.xa,P=b[0],x=!n(M,P,"VP8 "),O=!n(M,P,"VP8L"),e(null!=M),e(null!=_),e(null!=I),e(null!=A),8>_[0])b=7;else{if(x||O){if(M=L(M,P+4),12<=w&&M>w-12){b=3;break t}if(f&&M>_[0]-8){b=7;break t}I[0]=M,b[0]+=8,_[0]-=8,A[0]=O}else A[0]=5<=_[0]&&47==M[P+0]&&!(M[P+4]>>5),I[0]=_[0];b=0}if(r=r[0],g.Ja=g.Ja[0],g.xa=g.xa[0],i=i[0],0!=b)break;if(4294967286<g.Ja)return 3;if(null==l||y||(l[0]=g.xa?2:1),c=[c],m=[m],g.xa){if(5>r){b=7;break}l=c,f=m,y=s,null==t||5>r?t=0:5<=r&&47==t[i+0]&&!(t[i+4]>>5)?(_=[0],M=[0],w=[0],v(I=new C,t,i,r),gt(I,_,M,w)?(null!=l&&(l[0]=_[0]),null!=f&&(f[0]=M[0]),null!=y&&(y[0]=w[0]),t=1):t=0):t=0}else{if(10>r){b=7;break}l=m,null==t||10>r||!Xt(t,i+3,r-3)?t=0:(f=t[i+0]|t[i+1]<<8|t[i+2]<<16,y=16383&(t[i+7]<<8|t[i+6]),t=16383&(t[i+9]<<8|t[i+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=g.Ja||!y||!t?t=0:(c&&(c[0]=y),l&&(l[0]=t),t=1))}if(!t)return 3;if(c=c[0],m=m[0],p&&(h[0]!=c||d[0]!=m))return 3;null!=u&&(u[0]=g,u.offset=i-u.w,e(4294967286>i-u.w),e(u.offset==u.ha-r));break}return 0==b||7==b&&p&&null==u?(null!=s&&(s[0]|=null!=g.na&&0<g.na.length),null!=o&&(o[0]=c),null!=a&&(a[0]=m),0):b}function Bn(t,e,n){var i=e.width,r=e.height,o=0,a=0,s=i,c=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(s=t.cd,c=t.bd,o=t.v,a=t.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=c||o+s>i||a+c>r))return 0;if(e.v=o,e.j=a,e.va=o+s,e.o=a+c,e.U=s,e.T=c,e.da=null!=t&&0<t.da,e.da){if(!B(s,c,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*i/4&&e.hb<3*r/4,e.Kb=0),1}function jn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else(e=t.f.kb).O+=((t=t.height)-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Dn(t,e,n,i){if(null==i||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var r=n.cd,a=n.bd,s=-2&n.v,c=-2&n.j;if(0>s||0>c||0>=r||0>=a||s+r>t||c+a>e)return 2;t=r,e=a}if(n.da){if(!B(t,e,r=[n.ib],a=[n.hb]))return 2;t=r[0],e=a[0]}}i.width=t,i.height=e;t:{var l=i.width,u=i.height;if(t=i.S,0>=l||0>=u||!(t>=Bi&&13>t))t=2;else{if(0>=i.Rd&&null==i.sd){s=a=r=e=0;var h=(c=l*Gr[t])*u;if(11>t||(a=(u+1)/2*(e=(l+1)/2),12==t&&(s=(r=l)*u)),null==(u=o(h+2*a+s))){t=1;break t}i.sd=u,11>t?((l=i.f.RGBA).eb=u,l.fb=0,l.A=c,l.size=h):((l=i.f.kb).y=u,l.O=0,l.fa=c,l.Fd=h,l.f=u,l.N=0+h,l.Ab=e,l.Cd=a,l.ea=u,l.W=0+h+a,l.Db=e,l.Ed=a,12==t&&(l.F=u,l.J=0+h+2*a),l.Tc=s,l.lb=r)}if(e=1,a=i.width,s=i.height,(r=i.S)>=Bi&&13>r)if(11>r)t=i.f.RGBA,e&=(c=Math.abs(t.A))*(s-1)+a<=t.size,e&=c>=a*Gr[r],e&=null!=t.eb;else{t=i.f.kb,c=(a+1)/2,h=(s+1)/2,l=Math.abs(t.fa),u=Math.abs(t.Ab);var d=Math.abs(t.Db),p=Math.abs(t.lb);e&=l*(s-1)+a<=t.Fd,e&=u*(h-1)+c<=t.Cd,e=(e&=d*(h-1)+c<=t.Ed)&l>=a&u>=c&d>=c,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=p>=a,e&=p*(s-1)+a<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=jn(i)),t}var Fn=64,zn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vn=24,Gn=32,Zn=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];F("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return V(V(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return V(t,e[n-1])},t.Predictor7=function(t,e,n){return V(t,e[n+0])},t.Predictor8=function(t,e,n){return V(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return V(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return V(V(t,e[n-1]),V(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var i=e[n+0];return 0>=W(i>>24&255,t>>24&255,(e=e[n-1])>>24&255)+W(i>>16&255,t>>16&255,e>>16&255)+W(i>>8&255,t>>8&255,e>>8&255)+W(255&i,255&t,255&e)?i:t},t.Predictor12=function(t,e,n){var i=e[n+0];return(G((t>>24&255)+(i>>24&255)-((e=e[n-1])>>24&255))<<24|G((t>>16&255)+(i>>16&255)-(e>>16&255))<<16|G((t>>8&255)+(i>>8&255)-(e>>8&255))<<8|G((255&t)+(255&i)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var i=e[n-1];return(Z((t=V(t,e[n+0]))>>24&255,i>>24&255)<<24|Z(t>>16&255,i>>16&255)<<16|Z(t>>8&255,i>>8&255)<<8|Z(t>>0&255,i>>0&255))>>>0};var Hn=t.PredictorAdd0;t.PredictorAdd1=H,F("Predictor2","PredictorAdd2"),F("Predictor3","PredictorAdd3"),F("Predictor4","PredictorAdd4"),F("Predictor5","PredictorAdd5"),F("Predictor6","PredictorAdd6"),F("Predictor7","PredictorAdd7"),F("Predictor8","PredictorAdd8"),F("Predictor9","PredictorAdd9"),F("Predictor10","PredictorAdd10"),F("Predictor11","PredictorAdd11"),F("Predictor12","PredictorAdd12"),F("Predictor13","PredictorAdd13");var Un=t.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var $n,Kn=t.ColorIndexInverseTransform,Xn=t.MapARGB,Yn=t.VP8LColorIndexInverseTransformAlpha,qn=t.MapAlpha,Jn=t.VP8LPredictorsAdd=[];Jn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,ti,ei,ni,ii,ri,oi,ai,si,ci,li,ui,hi,di,pi,fi,gi,mi,vi,yi,bi,_i,Ci,xi,wi,Ii,Ai,Pi,Oi=o(511),Mi=o(2041),Si=o(225),ki=o(767),Ei=0,Li=Mi,Ti=Si,Ri=ki,Ni=Oi,Bi=0,ji=1,Di=2,Fi=3,zi=4,Vi=5,Gi=6,Zi=7,Wi=8,Hi=9,Ui=10,$i=[2,3,7],Ki=[3,3,11],Xi=[280,256,256,256,40],Yi=[0,1,1,1,0],qi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ji=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],or=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ar=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ur=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hr=[],dr=[],pr=[],fr=1,gr=2,mr=[],vr=[];yn("UpsampleRgbLinePair",In,3),yn("UpsampleBgrLinePair",An,3),yn("UpsampleRgbaLinePair",kn,4),yn("UpsampleBgraLinePair",Sn,4),yn("UpsampleArgbLinePair",Mn,4),yn("UpsampleRgba4444LinePair",On,2),yn("UpsampleRgb565LinePair",Pn,2);var yr=t.UpsampleRgbLinePair,br=t.UpsampleBgrLinePair,_r=t.UpsampleRgbaLinePair,Cr=t.UpsampleBgraLinePair,xr=t.UpsampleArgbLinePair,wr=t.UpsampleRgba4444LinePair,Ir=t.UpsampleRgb565LinePair,Ar=16,Pr=1<<Ar-1,Or=-227,Mr=482,Sr=6,kr=(256<<Sr)-1,Er=0,Lr=o(256),Tr=o(256),Rr=o(256),Nr=o(256),Br=o(Mr-Or),jr=o(Mr-Or);En("YuvToRgbRow",In,3),En("YuvToBgrRow",An,3),En("YuvToRgbaRow",kn,4),En("YuvToBgraRow",Sn,4),En("YuvToArgbRow",Mn,4),En("YuvToRgba4444Row",On,2),En("YuvToRgb565Row",Pn,2);var Dr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fr=[0,2,8],zr=[8,7,6,4,4,2,2,2,1,1,1,1],Vr=1;this.WebPDecodeRGBA=function(t,n,i,r,o){var a=ji,s=new nn,c=new at;s.ba=c,c.S=a,c.width=[c.width],c.height=[c.height];var l=c.width,u=c.height,h=new st;if(null==h||null==t)var d=2;else e(null!=h),d=Nn(t,n,i,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=d?l=0:(null!=l&&(l[0]=h.width[0]),null!=u&&(u[0]=h.height[0]),l=1),l){c.width=c.width[0],c.height=c.height[0],null!=r&&(r[0]=c.width),null!=o&&(o[0]=c.height);t:{if(r=new Ut,(o=new rn).data=t,o.w=n,o.ha=i,o.kd=1,n=[0],e(null!=o),(0==(t=Nn(o.data,o.w,o.ha,null,null,null,n,null,o))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=s),r.data=o.data,r.w=o.w+o.offset,r.ha=o.ha-o.offset,r.put=pt,r.ac=dt,r.bc=ft,r.ma=s,o.xa){if(null==(t=Mt())){s=1;break t}if(function(t,n){var i=[0],r=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!gt(t.m,i,r,o)){t.a=3;break e}if(t.xb=gr,n.width=i[0],n.height=r[0],!St(i[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,r)){if(r=0==(n=Dn(r.width,r.height,s.Oa,s.ba))){e:{r=t;n:for(;;){if(null==r){r=0;break e}if(e(null!=r.s.yc),e(null!=r.s.Ya),e(0<r.s.Wb),e(null!=(i=r.l)),e(null!=(o=i.ma)),0!=r.xb){if(r.ca=o.ba,r.tb=o.tb,e(null!=r.ca),!Bn(o.Oa,i,Fi)){r.a=2;break n}if(!kt(r,i.width))break n;if(i.da)break n;if((i.da||it(r.ca.S))&&vn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&vn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!T(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!Pt(r,r.V,r.Ba,r.c,r.i,i.o,xt))break n;o.Dc=r.Ma,r=1;break e}e(0!=r.a),r=0}r=!r}r&&(n=t.a)}else n=t.a}else{if(null==(t=new $t)){s=1;break t}if(t.Fa=o.na,t.P=o.P,t.qc=o.Sa,Yt(t,r)){if(0==(n=Dn(r.width,r.height,s.Oa,s.ba))){if(t.Aa=0,i=s.Oa,e(null!=(o=t)),null!=i){if(0<(l=0>(l=i.Md)?0:100<l?255:255*l/100)){for(u=h=0;4>u;++u)12>(d=o.pb[u]).lc&&(d.ia=l*zr[0>d.lc?0:d.lc]>>3),h|=d.ia;h&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=i.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}Qt(t,r)||(n=t.a)}}else n=t.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=jn(s.ba))}s=n}a=0!=s?null:11>a?c.f.RGBA.eb:c.f.kb.y}else a=null;return a};var Gr=[3,4,3,4,4,2,2,4,4,4,2,1,1]});var h=[0],d=[0],p=[],f=new so,g=t,m=function(t,e){var n={},i=0,r=!1,o=0,a=0;if(n.frames=[],!function(t,e,n,i){for(var r=0;r<4;r++)if(t[e+r]!="RIFF".charCodeAt(r))return!0;return!1}(t,e)){var s,h;for(u(t,e+=4),e+=8;e<t.length;){var d=c(t,e),p=u(t,e+=4);e+=4;var f=p+(1&p);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(v=n.frames[i]).src_off=r?a:e-8,v.src_size=o+p+8,i++,r&&(r=!1,o=0,a=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var g=e+4;v.canvas_width=1+l(t,g),v.canvas_height=1+l(t,g+=3),g+=3;break;case"ALPH":r=!0,o=f+8,a=e-8;break;case"ANIM":(v=n.header).bgcolor=u(t,e),v.loop_count=(s=t)[(h=g=e+4)+0]<<0|s[h+1]<<8,g+=2;break;case"ANMF":var m,v;(v=n.frames[i]={}).offset_x=2*l(t,e),v.offset_y=2*l(t,e+=3),v.width=1+l(t,e+=3),v.height=1+l(t,e+=3),v.duration=l(t,e+=3),e+=3,m=t[e++],v.dispose=1&m,v.blend=m>>1&1}"ANMF"!=d&&(e+=f)}return n}}(g,0);m.response=g,m.rgbaoutput=!0,m.dataurl=!1;var v=m.header?m.header:null,y=m.frames?m.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],d=[v.canvas_width];for(var b=0;b<y.length&&0!=y[b].blend;b++);}var _=y[0],C=f.WebPDecodeRGBA(g,_.src_off,_.src_size,d,h);_.rgba=C,_.imgwidth=d[0],_.imgheight=h[0];for(var x=0;x<d[0]*h[0]*4;x++)p[x]=C[x];return this.width=d,this.height=h,this.data=p,this}!function(t){var e=function(e,r,l,u){var h=5,d=a;switch(u){case t.image_compression.FAST:h=3,d=o;break;case t.image_compression.MEDIUM:h=6,d=s;break;case t.image_compression.SLOW:h=9,d=c}e=i(e,r,l,d);var p=new Uint8Array(n(h)),f=Fi.API.adler32cs.fromBuffer(e.buffer),g=new Kr(h),m=g.append(e),v=g.flush(),y=p.length+m.length+v.length,b=new Uint8Array(y+4);return b.set(p),b.set(m,p.length),b.set(v,p.length+m.length),b[y++]=f>>>24&255,b[y++]=f>>>16&255,b[y++]=f>>>8&255,b[y++]=255&f,t.__addimage__.arrayBufferToBinaryString(b)},n=function(t){var e=30720;return e|=Math.min(3,(t-1&255)>>1)<<6,e|=0,[120,255&(e+=31-e%31)]},i=function(t,e,n,i){for(var r,o,a,s=t.length/e,c=new Uint8Array(t.length+s),l=u(),d=0;d<s;d+=1){if(r=t.subarray(a=d*e,a+e),i)c.set(i(r,n,o),a+d);else{for(var p,f=l.length,g=[];p<f;p+=1)g[p]=l[p](r,n,o);var m=h(g.concat());c.set(g[m],a+d)}o=r}return c},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},o=function(t,e){var n=[],i=t.length;n[0]=1;for(var r=0;r<i;r+=1)n[r+1]=t[r]-(t[r-e]||0)+256&255;return n},a=function(t,e,n){var i=[],r=t.length;i[0]=2;for(var o=0;o<r;o+=1)i[o+1]=t[o]-(n&&n[o]||0)+256&255;return i},s=function(t,e,n){var i=[],r=t.length;i[0]=3;for(var o=0;o<r;o+=1)i[o+1]=t[o]+256-((t[o-e]||0)+(n&&n[o]||0)>>>1)&255;return i},c=function(t,e,n){var i,r=[],o=t.length;r[0]=4;for(var a=0;a<o;a+=1)i=l(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0),r[a+1]=t[a]-i+256&255;return r},l=function(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),o=Math.abs(t+e-n-n);return i<=r&&i<=o?t:r<=o?e:n},u=function(){return[r,o,a,s,c]},h=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(n,i,r,o){var a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(c=new no(n)).imgData,s=c.bits,a=c.colorSpace,u=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits){f=(p=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,m=new Uint8Array(f*c.colors),g=new Uint8Array(f);var w,I=c.pixelBitlength-c.bits;for(b=0,_=0;b<f;b++){for(y=p[b],w=0;w<I;)m[_++]=y>>>w&255,w+=c.bits;g[b]=y>>>w&255}}if(16===c.bits){f=(p=new Uint32Array(c.decodePixels().buffer)).length,m=new Uint8Array(f*(32/c.pixelBitlength)*c.colors),g=new Uint8Array(f*(32/c.pixelBitlength)),v=c.colors>1,b=0,_=0;for(var A=0;b<f;)y=p[b++],m[_++]=y>>>0&255,v&&(m[_++]=y>>>16&255,y=p[b++],m[_++]=y>>>0&255),g[A++]=y>>>16&255;s=8}o!==t.image_compression.NONE?(n=e(m,c.width*c.colors,c.colors,o),d=e(g,c.width,1,o)):(n=m,d=g,C=void 0)}if(3===c.colorType&&(a=this.color_spaces.INDEXED,h=c.palette,c.transparency.indexed)){var P=c.transparency.indexed,O=0;for(b=0,f=P.length;b<f;++b)O+=P[b];if((O/=255)==f-1&&-1!==P.indexOf(0))l=[P.indexOf(0)];else if(O!==f){for(p=c.decodePixels(),g=new Uint8Array(p.length),b=0,f=p.length;b<f;b++)g[b]=P[p[b]];d=e(g,c.width,1)}}var M=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return C===this.decode.FLATE_DECODE&&(x="/Predictor "+M+" "),x+="/Colors "+u+" /BitsPerComponent "+s+" /Columns "+c.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:r,data:n,index:i,filter:C,decodeParameters:x,transparency:l,palette:h,sMask:d,predictor:M,width:c.width,height:c.height,bitsPerComponent:s,colorSpace:a}}}}(Fi.API),function(t){t.processGIF89A=function(e,n,i,r){var o=new io(e),a=o.width,s=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:a,height:s},u=new oo(100).encode(l,100);return t.processJPEG.call(this,u,n,i,r)},t.processGIF87A=t.processGIF89A}(Fi.API),ao.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ao.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[t]()}catch(t){Pi.log("bit decode error:"+t)}},ao.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*r*4,s=0;s<8&&8*r+s<this.width;s++){var c=this.palette[o>>7-s&1];this.data[a+4*s]=c.blue,this.data[a+4*s+1]=c.green,this.data[a+4*s+2]=c.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},ao.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var o=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*r*4,s=15&o,c=this.palette[o>>4];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*r+1>=this.width)break;this.data[a+4]=(c=this.palette[s]).blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==e&&(this.pos+=4-e)}},ao.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var a=this.palette[r];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},ao.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,c=o>>15?255:0,l=i*this.width*4+4*r;this.data[l]=(o>>10&e)/e*255|0,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=c}this.pos+=t}},ao.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,c=(a>>5&n)/n*255|0,l=r*this.width*4+4*o;this.data[l]=(a>>11)/e*255|0,this.data[l+1]=c,this.data[l+2]=s,this.data[l+3]=255}this.pos+=t}},ao.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},ao.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=a}},ao.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,r){var o=new ao(e,!1),a=o.width,s=o.height,c={data:o.getData(),width:a,height:s},l=new oo(100).encode(c,100);return t.processJPEG.call(this,l,n,i,r)}}(Fi.API),so.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,r){var o=new so(e,!1),a=o.width,s=o.height,c={data:o.getData(),width:a,height:s},l=new oo(100).encode(c,100);return t.processJPEG.call(this,l,n,i,r)}}(Fi.API),Fi.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"FYRO Macedonian",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Yr=(Xr=Fi.API).getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:r.metadata.Unicode.widths,c=s.fof?s.fof:1,l=e.kerning?e.kerning:r.metadata.Unicode.kerning,u=l.fof?l.fof:1,h=!1!==e.doKerning,d=0,p=t.length,f=0,g=s[0]||c,m=[];for(n=0;n<p;n++)i=t.charCodeAt(n),"function"==typeof r.metadata.widthOfString?m.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+a*(1e3/o)||0)/1e3):(d=h&&"object"==typeof l[i]&&!isNaN(parseInt(l[i][f],10))?l[i][f]/u:0,m.push((s[i]||g)/c+d)),f=i;return m},qr=Xr.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Xr.processArabic&&(t=Xr.processArabic(t)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(t,n,r)/n:Yr.apply(this,arguments).reduce((function(t,e){return t+e}),0)},Jr=function(t,e,n,i){for(var r=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<n;)s+=e[o],o++;r.push(t.slice(0,o));var c=o;for(s=0;o!==a;)s+e[o]>i&&(r.push(t.slice(c,o)),s=0,c=o),s+=e[o],o++;return c!==o&&r.push(t.slice(c,o)),r},Qr=function(t,e,n){n||(n={});var i,r,o,a,s,c,l=[],u=[l],h=n.textIndent||0,d=0,p=0,f=t.split(" "),g=Yr.apply(this,[" ",n])[0];if(c=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var m=Array(c).join(" "),v=[];f.map((function(t){(t=t.split(/\s*\n/)).length>1?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),f=v,c=qr.apply(this,[m,n])}for(o=0,a=f.length;o<a;o++){var y=0;if(i=f[o],c&&"\n"==i[0]&&(i=i.substr(1),y=1),h+d+(p=(r=Yr.apply(this,[i,n])).reduce((function(t,e){return t+e}),0))>e||y){if(p>e){for(s=Jr.apply(this,[i,r,e-(h+d),e]),l.push(s.shift()),l=[s.pop()];s.length;)u.push([s.shift()]);p=r.slice(i.length-(l[0]?l[0].length:0)).reduce((function(t,e){return t+e}),0)}else l=[i];u.push(l),h=p+c,d=g}else l.push(i),h+=d+p,d=g}return u.map(c?function(t,e){return(e?m:"")+t.join(" ")}:function(t){return t.join(" ")})},Xr.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var s,c,l=[];for(s=0,c=i.length;s<c;s++)l=l.concat(Qr.apply(this,[i[s],a,o]));return l},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var o=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,r,s,c=["{"];for(var l in t){if(e=t[l],isNaN(parseInt(l,10))?n="'"+l+"'":(l=parseInt(l,10),n=(n=o(l).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof e)e<0?(r=o(e).slice(3),s="-"):(r=o(e).slice(2),s=""),r=s+r.slice(0,-1)+i[r.slice(-1)];else{if("object"!=typeof e)throw new Error("Don't know what to do with value type "+typeof e+".");r=a(e)}c.push(n+r)}return c.push("}"),c.join("")},s=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,i,r,o,a={},s=1,c=a,l=[],u="",h="",d=t.length-1,p=1;p<d;p+=1)"'"==(o=t[p])?e?(r=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(l.push([c,r]),c={},r=void 0):"}"==o?((i=l.pop())[0][i[1]]=c,r=void 0,c=i[0]):"-"==o?s=-1:void 0===r?n.hasOwnProperty(o)?(u+=n[o],r=parseInt(u,16)*s,s=1,u=""):u+=o:n.hasOwnProperty(o)?(h+=n[o],c[r]=parseInt(h,16)*s,s=1,r=void 0,h=""):h+=o;return a},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=u.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var i=l.Unicode[e.postScriptName];i&&(e.metadata.Unicode.encoding=i,e.encoding=i.codePages[0])}])}(Fi.API),function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(i=!1===o.existsFileInVFS(r.postScriptName)?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,i){i=/^\x00\x01\x00\x00/.test(i)?e(i):e(ki(i)),n.metadata=t.API.TTFFont.open(i),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,i)}}])}(Fi),function(t){function e(){return(Ii.canvg?Promise.resolve(Ii.canvg):n.e(8).then(n.bind(null,"DXPr"))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}Fi.API.addSvgAsImage=function(t,n,i,r,o,a,s,c){if(isNaN(n)||isNaN(i))throw Pi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Pi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=o;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then((function(e){return e.Canvg.fromString(u,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){d.addImage(l.toDataURL("image/jpeg",1),n,i,r,o,s,c)}))}}(),Fi.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},Fi.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),c=[],l=0,u=0,h=0;function d(t,e){var n,i=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var p=s.length;for(h=0;h<p;h+=1)n[s[h]].value=n[s[h]].defaultValue,n[s[h]].explicitSet=!1}if("object"==typeof t)for(r in t)if(o=t[r],d(s,r)&&void 0!==o){if("boolean"===n[r].type&&"boolean"==typeof o)n[r].value=o;else if("name"===n[r].type&&d(n[r].valueSet,o))n[r].value=o;else if("integer"===n[r].type&&Number.isInteger(o))n[r].value=o;else if("array"===n[r].type){for(l=0;l<o.length;l+=1)if(i=!0,1===o[l].length&&"number"==typeof o[l][0])c.push(String(o[l]-1));else if(o[l].length>1){for(u=0;u<o[l].length;u+=1)"number"!=typeof o[l][u]&&(i=!1);!0===i&&c.push([o[l][0]-1,o[l][1]-1].join(" "))}n[r].value="["+c.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&e.push("name"===n[t].type?"/"+t+" /"+n[t].value:"/"+t+" "+n[t].value);0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+i.length+r.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(e+n+i+r+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Fi.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,i=e.metadata.Unicode.widths,r=["","0","00","000","0000"],o=[""],a=0,s=t.length;a<s;++a){if(n=e.metadata.characterToGlyph(t.charCodeAt(a)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(a),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(r[4-n.length],n)}return o.join("")},i=function(t){var e,n,i,r,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],a=0,s=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;a<s;a++)e=n[a],i.length>=100&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),null!=t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),i.push("<"+e+"><"+r+">"));return i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,o=e.newObject,a=e.putStream,s=e.pdfEscapeWithNeededParanthesis;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var c=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),u="",h=0;h<l.length;h++)u+=String.fromCharCode(l[h]);var d=o();a({data:u,addLength1:!0}),r("endobj");var p=o();a({data:i(n.metadata.toUnicode),addLength1:!0}),r("endobj");var f=o();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+s(n.fontName)),r("/FontFile2 "+d+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var g=o();r("<<"),r("/Type /Font"),r("/BaseFont /"+s(n.fontName)),r("/FontDescriptor "+f+" 0 R"),r("/W "+t.API.PDFObject.convert(c)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=o(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+p+" 0 R"),r("/BaseFont /"+s(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+g+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,o=e.newObject,a=e.putStream,s=e.pdfEscapeWithNeededParanthesis;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var c=n.metadata.rawData,l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u]);var h=o();a({data:l,addLength1:!0}),r("endobj");var d=o();a({data:i(n.metadata.toUnicode),addLength1:!0}),r("endobj");var p=o();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+h+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+s(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=o();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+n.fontName+"/FontDescriptor "+p+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]);var r=function(t){var e,i=t.text||"",r=t.x,o=t.y,a=t.options||{},s=t.mutex||{},c=s.pdfEscape,l=s.activeFontKey,u=s.fonts,h=l,d="",p=0,f="",g=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:i,x:r,y:o,options:a,mutex:s};for(f=i,h=l,Array.isArray(i)&&(f=i[0]),p=0;p<f.length;p+=1)u[h].metadata.hasOwnProperty("cmap")&&(e=u[h].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),e||f[p].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?d+=f[p]:d+="";var m="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===g?m=c(d,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(m=n(d,u[h])),s.isHex=!0,{text:m,x:r,y:o,options:a,mutex:s}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],i={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([r(Object.assign({},i,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(r(Object.assign({},i,{text:e[o]})).text);t.text=n}else t.text=r(Object.assign({},i,{text:e})).text}])}(Fi),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Fi.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,i,r,o,a,s,c,l=e,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,v=0;this.__bidiEngine__={};var y=function(t){var e=t.charCodeAt(),n=e>>8,i=p[n];return void 0!==i?l[256*i+(255&e)]:252===n||253===n?"AL":g.test(n)?"L":8===n?"R":"N"},b=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},_=function(t,e,a,s){var c,l,u,h,d=e[s];switch(d){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":d="N";break;case"CS":s<1||s+1>=e.length||"EN"!==(c=a[s-1])&&"AN"!==c||"EN"!==(l=e[s+1])&&"AN"!==l?d="N":m&&(l="AN"),d=l===c?l:"N";break;case"ES":d="EN"===(c=s>0?a[s-1]:"B")&&s+1<e.length&&"EN"===e[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){d="EN";break}if(m){d="N";break}for(u=s+1,h=e.length;u<h&&"ET"===e[u];)u++;d=u<h&&"EN"===e[u]?"EN":"N";break;case"NSM":if(r&&!o){for(h=e.length,u=s+1;u<h&&"NSM"===e[u];)u++;if(u<h){var p=t[s];if(c=e[u],(p>=1425&&p<=2303||64286===p)&&("R"===c||"AL"===c)){d="R";break}}}d=s<1||"B"===(c=e[s-1])?"N":a[s-1];break;case"B":m=!1,n=!0,d=v;break;case"S":i=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":d="N"}return d},C=function(t,e,n){var i=t.split("");return n&&x(i,n,{hiLevel:v}),i.reverse(),e&&e.reverse(),i.join("")},x=function(t,e,r){var o,a,s,c,l,p=-1,f=t.length,g=0,b=[],C=v?h:u,x=[];for(m=!1,n=!1,i=!1,a=0;a<f;a++)x[a]=y(t[a]);for(s=0;s<f;s++){if(l=g,b[s]=_(t,x,b,s),o=240&(g=C[l][d[b[s]]]),e[s]=c=C[g&=15][5],o>0)if(16===o){for(a=p;a<s;a++)e[a]=1;p=-1}else p=-1;if(C[g][6])-1===p&&(p=s);else if(p>-1){for(a=p;a<s;a++)e[a]=c;p=-1}"B"===x[s]&&(e[s]=0),r.hiLevel|=c}i&&function(t,e,n){for(var i=0;i<n;i++)if("S"===t[i]){e[i]=v;for(var r=i-1;r>=0&&"WS"===t[r];r--)e[r]=v}}(x,e,f)},w=function(t,e,i,r,o){if(!(o.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(i&&i.reverse());for(var a,s,c,l,u=e.length,h=0;h<u;){if(r[h]>=t){for(c=h+1;c<u&&r[c]>=t;)c++;for(l=h,s=c-1;l<s;l++,s--)a=e[l],e[l]=e[s],e[s]=a,i&&(a=i[l],i[l]=i[s],i[s]=a);h=c}h++}}},I=function(t,e,n){var i=t.split(""),r={hiLevel:v};return n||(n=[]),x(i,n,r),function(t,e,n){if(0!==n.hiLevel&&c)for(var i,r=0;r<t.length;r++)1===e[r]&&(i=f.indexOf(t[r]))>=0&&(t[r]=f[i+1])}(i,n,r),w(2,i,e,n,r),w(1,i,e,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=b(t)),void 0===s&&(s=b(t))}(t,e),r||!a||s)if(r&&a&&o^s)v=o?1:0,t=C(t,e,n);else if(!r&&a&&s)v=o?1:0,t=I(t,e,n),t=C(t,e);else if(!r||o||a||s){if(r&&!a&&o^s)t=C(t,e),o?(v=0,t=I(t,e,n)):(v=1,t=I(t,e,n),t=C(t,e));else if(r&&o&&!a&&s)v=1,t=I(t,e,n),t=C(t,e);else if(!r&&!a&&o^s){var i=c;o?(v=1,t=I(t,e,n),v=0,c=!1,t=I(t,e,n),c=i):(v=0,t=I(t,e,n),t=C(t,e),v=1,c=!1,t=I(t,e,n),c=i,t=C(t,e))}}else v=0,t=I(t,e,n);else v=o?1:0,t=I(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,a=t.isOutputVisual,o=t.isInputRtl,s=t.isOutputRtl,c=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,i=t.options||{},r=[];if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(r=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?r.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):r.push([n.doBidiReorder(e[o])]);t.text=r}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(Fi),Fi.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new lo(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new So(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new uo(this.contents),this.head=new fo(this),this.name=new Co(this),this.cmap=new mo(this),this.toUnicode={},this.hhea=new vo(this),this.maxp=new xo(this),this.hmtx=new wo(this),this.post=new bo(this),this.os2=new yo(this),this.loca=new Mo(this),this.glyf=new Ao(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.bbox).length;t<e;t++)i.push(Math.round(n[t]*this.scaleFactor));return i}).call(this),this.stemV=0,this.post.exists?(e=255&(n=this.post.italic_angle),0!=(32768&(t=n>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var i,r,o,a;for(o=0,r=0,a=(t=""+t).length;0<=a?r<a:r>a;r=0<=a?++r:--r)i=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){return null==e&&(e=!1),(this.ascender+(e?this.lineGap:0)-this.decender)/1e3*t},t}();var co,lo=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,i,r,o,a,s;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*r+65536*o+256*a+s},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)i.push(this.writeByte(t[e]));return i},t}(),uo=function(){var t;function e(t){var e,n,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,i,r,o,a,s,c,l,u,h,d,p;for(p in h=Object.keys(e).length,a=Math.log(2),l=16*Math.floor(Math.log(h)/a),r=Math.floor(l/a),c=16*h-l,(i=new lo).writeInt(this.scalarType),i.writeShort(h),i.writeShort(l),i.writeShort(r),i.writeShort(c),s=i.pos+16*h,o=null,d=[],e)for(u=e[p],i.writeString(p),i.writeInt(t(u)),i.writeInt(s),i.writeInt(u.length),d=d.concat(u),"head"===p&&(o=s),s+=u.length;s%4;)d.push(0),s++;return i.write(d),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(t){var e,n,i,r;for(t=Io.call(t);t.length%4;)t.push(0);for(i=new lo(t),n=0,e=0,r=t.length;e<r;e=e+=4)n+=i.readUInt32();return 4294967295&n},e}(),ho={}.hasOwnProperty,po=function(t,e){for(var n in e)ho.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};co=function(){function t(t){var e;this.file=t,this.exists=!!(e=this.file.directory.tables[this.tag]),e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var fo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new lo).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),go=function(){function t(t,e){var n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=t.readByte();break;case 4:for(d=t.readUInt16(),h=d/2,t.pos+=6,r=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,f=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),c=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),i=(this.length-t.pos+this.offset)/2,a=function(){var e,n;for(n=[],s=e=0;0<=i?e<i:e>i;s=0<=i?++e:--e)n.push(t.readUInt16());return n}(),s=m=0,y=r.length;m<y;s=++m)for(g=r[s],n=v=p=f[s];p<=g?v<=g:v>=g;n=p<=g?++v:--v)0===l[s]?o=n+c[s]:0!==(o=a[l[s]/2+(n-p)-(h-s)]||0)&&(o+=c[s]),this.codeMap[n]=65535&o}t.pos=u}return t.encode=function(t,e){var n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,_,C,x,w,I,A,P,O,M,S,k,E,L,T,R,N,B,j,D,F,z,V,G,Z,W,H,U;switch(M=new lo,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(f=0,g=function(){var t=[];for(p=0;p<256;++p)t.push(0);return t}(),v={0:0},r={},S=0,T=o.length;S<T;S++)null==v[Z=t[i=o[S]]]&&(v[Z]=++f),r[i]={old:t[i],new:v[t[i]]},g[i]=v[t[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(g),{charMap:r,subtable:M.data,maxGlyphID:f+1};case"unicode":for(P=[],u=[],y=0,v={},n={},m=c=null,k=0,R=o.length;k<R;k++)null==v[b=t[i=o[k]]]&&(v[b]=++y),n[i]={old:b,new:v[b]},a=v[b]-i,null!=m&&a===c||(m&&u.push(m),P.push(i),c=a),m=i;for(m&&u.push(m),u.push(65535),P.push(65535),I=2*(w=P.length),x=2*Math.pow(Math.log(w)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,C=2*w-x,s=[],_=[],d=[],p=E=0,N=P.length;E<N;p=++E){if(l=u[p],65535===(A=P[p])){s.push(0),_.push(0);break}if(A-(O=n[A].new)>=32768)for(s.push(0),_.push(2*(d.length+w-p)),i=L=A;A<=l?L<=l:L>=l;i=A<=l?++L:--L)d.push(n[i].new);else s.push(O-A),_.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*w+2*d.length),M.writeUInt16(0),M.writeUInt16(I),M.writeUInt16(x),M.writeUInt16(h),M.writeUInt16(C),V=0,B=u.length;V<B;V++)M.writeUInt16(i=u[V]);for(M.writeUInt16(0),G=0,j=P.length;G<j;G++)M.writeUInt16(i=P[G]);for(W=0,D=s.length;W<D;W++)M.writeUInt16(a=s[W]);for(H=0,F=_.length;H<F;H++)M.writeUInt16(_[H]);for(U=0,z=d.length;U<z;U++)M.writeUInt16(f=d[U]);return{charMap:n,subtable:M.data,maxGlyphID:y+1}}},t}(),mo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new go(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,i;return null==e&&(e="macroman"),n=go.encode(t,e),(i=new lo).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),vo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),yo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),bo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=(function(){var e,n,i;for(i=[],r=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;r=0<=n?++e:--e)i.push(t.readUInt32());return i}).call(this)}},e}(),_o=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Co=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,i,r,o,a,s,c,l,u,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(s={},r=l=0,u=n.length;l<u;r=++l)t.pos=(i=n[r]).offset,c=t.readString(i.length),o=new _o(c,i),null==s[h=i.nameID]&&(s[h]=[]),s[i.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),xo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),wo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,i,r,o,a;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],e=n=0;0<=i?n<i:n>i;e=0<=i?++n:--n)r.push(t.readInt16());return r}(),this.widths=(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.metrics).length;t<e;t++)i.push(n[t].advance);return i}).call(this),n=this.widths[this.widths.length-1],a=[],e=r=0;0<=i?r<i:r>i;e=0<=i?++r:--r)a.push(this.widths.push(n));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Io=[].slice,Ao=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,i,r,o,a,s,c,l,u;return t in this.cache?this.cache[t]:(e=this.file.contents,n=(r=this.file.loca).indexOf(t),0===(i=r.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,o=(a=new lo(e.read(i))).readShort(),c=a.readShort(),u=a.readShort(),s=a.readShort(),l=a.readShort(),this.cache[t]=-1===o?new Oo(a,c,u,s,l):new Po(a,o,c,u,s,l),this.cache[t]))},e.prototype.encode=function(t,e,n){var i,r,o,a,s;for(o=[],r=[],a=0,s=e.length;a<s;a++)i=t[e[a]],r.push(o.length),i&&(o=o.concat(i.encode(n)));return r.push(o.length),{table:o,offsets:r}},e}(),Po=function(){function t(t,e,n,i,r,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Oo=function(){function t(t,e,n,i,r){var o,a;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new lo(Io.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),Mo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return po(e,co),e.prototype.tag="loca",e.prototype.parse=function(t){var e;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?(function(){var n,i;for(i=[],e=0,n=this.length;e<n;e+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],e=0,n=this.length;e<n;e+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<n.length;++o)if(n[o]=i,r<e.length&&e[r]==o){++r,n[o]=i;var a=this.offsets[o+1]-this.offsets[o];a>0&&(i+=a)}for(var s=new Array(4*n.length),c=0;c<n.length;++c)s[4*c+3]=255&n[c],s[4*c+2]=(65280&n[c])>>8,s[4*c+1]=(16711680&n[c])>>16,s[4*c]=(4278190080&n[c])>>24;return s},e}(),So=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,i;for(e in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)t[e]=n[i[e]];return t},t.prototype.glyphsFor=function(t){var e,n,i,r,o,a,s;for(i={},o=0,a=t.length;o<a;o++)i[r=t[o]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(null!=(n=i[r])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(r in s=this.glyphsFor(e))i[r]=n=s[r];return i},t.prototype.encode=function(t,e){var n,i,r,o,a,s,c,l,u,h,d,p,f,g;for(i in n=mo.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},g=n.charMap)h[(a=g[i]).old]=a.new;for(d in u=n.maxGlyphID,o)d in h||(h[d]=u++);return c=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(h),l=Object.keys(c).sort((function(t,e){return t-e})),p=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)n.push(c[l[t]]);return n}(),r=this.font.glyf.encode(o,p,h),s=this.font.loca.encode(r.offsets,p),f={cmap:this.font.cmap.raw(),glyf:r.table,loca:s,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},t}();Fi.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var i,r;if(Array.isArray(n))return"["+function(){var t,i,r;for(r=[],t=0,i=n.length;t<i;t++)r.push(e.convert(n[t]));return r}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in r=["<<"],n)r.push("/"+i+" "+e.convert(n[i]));return r.push(">>"),r.join("\n")}return""+n},e}(),function(t,e){t.API.adler32cs=function(){var t,e,n,i,r,o="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,a=null,s=function(){if(!o)return function(){return!1};try{var t={};"function"==typeof t.Buffer&&(a=t.Buffer)}catch(o){}return function(t){return t instanceof ArrayBuffer||null!==a&&t instanceof a}}(),c=null!==a?function(t){return new a(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},l=function(t,e){for(var n=65535&t,i=t>>>16,r=0,o=e.length;r<o;r++)i=(i+(n=(n+(255&e.charCodeAt(r)))%65521))%65521;return(i<<16|n)>>>0},u=function(t,e){for(var n=65535&t,i=t>>>16,r=0,o=e.length;r<o;r++)i=(i+(n=(n+e[r])%65521))%65521;return(i<<16|n)>>>0},h={},d=h.Adler32=((r=(i=function(t){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null===t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t>>>0}).prototype={}).constructor=i,i.from=((t=function(t){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null===t)throw new Error("First argument needs to be a string.");this.checksum=l(1,t.toString())}).prototype=r,t),i.fromUtf8=((e=function(t){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null===t)throw new Error("First argument needs to be a string.");var e=c(t.toString());this.checksum=l(1,e)}).prototype=r,e),o&&(i.fromBuffer=((n=function(t){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!s(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=u(1,e)}).prototype=r,n)),r.update=function(t){if(null===t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=l(this.checksum,t)},r.updateUtf8=function(t){if(null===t)throw new Error("First argument needs to be a string.");var e=c(t.toString());return this.checksum=l(this.checksum,e)},o&&(r.updateBuffer=function(t){if(!s(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=u(this.checksum,e)}),r.clone=function(){return new d(this.checksum)},i);return h.from=function(t){if(null===t)throw new Error("First argument needs to be a string.");return l(1,t.toString())},h.fromUtf8=function(t){if(null===t)throw new Error("First argument needs to be a string.");var e=c(t.toString());return l(1,e)},o&&(h.fromBuffer=function(t){if(!s(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return u(1,e)}),h}()}(Fi);var ko=function(){function t(){this.lMargin=55,this.rMargin=55,this.pdfInMM=816}return t.prototype.downloadMapPDF=function(t,e){var n=this;return e.getMap().subscribe((function(e){var i=new Fi("l","px","letter",!0),r=i.internal.pageSize.getWidth(),o=i.internal.pageSize.getHeight();n.header(i,r,o),i.setFontSize(22),i.text("Observatorio del R\xedo Magdalena",r/2,65,{align:"center"}),i.setFontSize(10),i.text("Fecha: "+(new Date).toLocaleString(),r/2,75,{align:"center"}),i.setFontSize(12),i.text("CATEGOR\xcdA: "+t.category.name,20,90,{align:"left"}),i.text("TITULO: "+t.name,20,100,{align:"left"});var a=i.splitTextToSize("DESCRIPCI\xd3N: "+t.desc,r-50);i.text(a,20,110);var s=e.getCanvas().toDataURL("image/PNG"),c=i.getImageProperties(s),l=i.internal.pageSize.getWidth()-40;i.addImage(s,"PNG",20,140,l,c.height*r/c.width,""),n.setConvention(i,t,r,o),n.footer(i,r,o),i.save((new Date).toLocaleString()+"_OBSR\xedo_Magdalena.pdf")})),!0},t.prototype.footer=function(t,e,n){t.setFontSize(10),t.line(15,n-20,e,n-20),t.text("Observatorio del R\xedo Magdalena - Universidad del Norte.\n      Todos los Derechos Reservados 2020",e/2,n-10,{align:"center"})},t.prototype.header=function(t,e,n){var i=new Image;i.src="assets/img/LogoUninorte.png",t.addImage(i,"png",10,10,100,31,"uni");var r=new Image;r.src="assets/img/logo.png",t.addImage(r,"png",e-90,10,80,29,"obs"),t.line(15,45,e-15,45)},t.prototype.setConvention=function(t,e,n,i){if(e.convention){var r=new Image;r.src=e.convention,t.getImageProperties(r),t.addImage(r,"PNG",10,150,100,100,"conv")}},t.\u0275prov=f["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),Eo=n("czwa"),Lo=n("TUlv"),To=n("u47x"),Ro=n("8LU1"),No=n("FtGj"),Bo=n("7Hc7"),jo=n("3E0/"),Do=n("+rOU"),Fo=n("rDax"),zo=n("nLfN"),Vo=n("vxfF"),Go=n("cH1L"),Zo=["mat-menu-item",""],Wo=["*"];function Ho(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275listener"]("keydown",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]()._handleKeydown(t)}))("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().closed.emit("click")}))("@transformMenu.start",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]()._onAnimationStart(t)}))("@transformMenu.done",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]()._onAnimationDone(t)})),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275projection"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("id",i.panelId)("ngClass",i._classList)("@transformMenu",i._panelAnimationState),f["\u0275\u0275attribute"]("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby||null)("aria-describedby",i.ariaDescribedby||null)}}var Uo={transformMenu:Object(hn.n)("transformMenu",[Object(hn.k)("void",Object(hn.l)({opacity:0,transform:"scale(0.8)"})),Object(hn.m)("void => enter",Object(hn.f)([Object(hn.h)(".mat-menu-content, .mat-mdc-menu-content",Object(hn.e)("100ms linear",Object(hn.l)({opacity:1}))),Object(hn.e)("120ms cubic-bezier(0, 0, 0.2, 1)",Object(hn.l)({transform:"scale(1)"}))])),Object(hn.m)("* => void",Object(hn.e)("100ms 25ms linear",Object(hn.l)({opacity:0})))]),fadeInItems:Object(hn.n)("fadeInItems",[Object(hn.k)("showing",Object(hn.l)({opacity:1})),Object(hn.m)("void => *",[Object(hn.l)({opacity:0}),Object(hn.e)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},$o=new f.InjectionToken("MatMenuContent"),Ko=function(){var t=function(){function t(e,n,i,r,o,a,s){Object(B.a)(this,t),this._template=e,this._componentFactoryResolver=n,this._appRef=i,this._injector=r,this._viewContainerRef=o,this._document=a,this._changeDetectorRef=s,this._attached=new D.a}return Object(N.a)(t,[{key:"attach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._portal||(this._portal=new Do.g(this._template,this._viewContainerRef)),this.detach(),this._outlet||(this._outlet=new Do.d(this._document.createElement("div"),this._componentFactoryResolver,this._appRef,this._injector));var e=this._template.elementRef.nativeElement;e.parentNode.insertBefore(this._outlet.outletElement,e),this._changeDetectorRef&&this._changeDetectorRef.markForCheck(),this._portal.attach(this._outlet,t),this._attached.next()}},{key:"detach",value:function(){this._portal.isAttached&&this._portal.detach()}},{key:"ngOnDestroy",value:function(){this._outlet&&this._outlet.dispose()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.TemplateRef),f["\u0275\u0275directiveInject"](f.ComponentFactoryResolver),f["\u0275\u0275directiveInject"](f.ApplicationRef),f["\u0275\u0275directiveInject"](f.Injector),f["\u0275\u0275directiveInject"](f.ViewContainerRef),f["\u0275\u0275directiveInject"](r.e),f["\u0275\u0275directiveInject"](f.ChangeDetectorRef))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["ng-template","matMenuContent",""]],features:[f["\u0275\u0275ProvidersFeature"]([{provide:$o,useExisting:t}])]}),t}(),Xo=new f.InjectionToken("MAT_MENU_PANEL"),Yo=function t(){Object(B.a)(this,t)},qo=Object(wi.e)(Object(wi.f)(Yo)),Jo=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i,r,o){var a;return Object(B.a)(this,n),(a=e.call(this))._elementRef=t,a._focusMonitor=r,a._parentMenu=o,a.role="menuitem",a._hovered=new D.a,a._focused=new D.a,a._highlighted=!1,a._triggersSubmenu=!1,o&&o.addItem&&o.addItem(Object(E.a)(a)),a}return Object(N.a)(n,[{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}},{key:"ngAfterViewInit",value:function(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){for(var t,e,n=this._elementRef.nativeElement.cloneNode(!0),i=n.querySelectorAll("mat-icon, .material-icons"),r=0;r<i.length;r++){var o=i[r];null===(t=o.parentNode)||void 0===t||t.removeChild(o)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}]),n}(qo);return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](r.e),f["\u0275\u0275directiveInject"](To.e),f["\u0275\u0275directiveInject"](Xo,8))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&f["\u0275\u0275listener"]("click",(function(t){return e._checkDisabled(t)}))("mouseenter",(function(){return e._handleMouseEnter()})),2&t&&(f["\u0275\u0275attribute"]("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),f["\u0275\u0275classProp"]("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[f["\u0275\u0275InheritDefinitionFeature"]],attrs:Zo,ngContentSelectors:Wo,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275projection"](0),f["\u0275\u0275element"](1,"div",0)),2&t&&(f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[wi.b],encapsulation:2,changeDetection:0}),t}(),Qo=new f.InjectionToken("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),ta=0,ea=function(){var t=function(){function t(e,n,i){Object(B.a)(this,t),this._elementRef=e,this._ngZone=n,this._defaultOptions=i,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new f.QueryList,this._tabSubscription=zt.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new D.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new f.EventEmitter,this.close=this.closed,this.panelId="mat-menu-panel-".concat(ta++)}return Object(N.a)(t,[{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var t=this;this._updateDirectDescendants(),this._keyManager=new To.d(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe((function(){return t.closed.emit("tab")})),this._directDescendantItems.changes.pipe(Object($t.a)(this._directDescendantItems),Object(Wt.a)((function(t){return Gt.a.apply(void 0,Object(Lo.a)(t.map((function(t){return t._focused}))))}))).subscribe((function(e){return t._keyManager.updateActiveItem(e)}))}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(Object($t.a)(this._directDescendantItems),Object(Wt.a)((function(t){return Gt.a.apply(void 0,Object(Lo.a)(t.map((function(t){return t._hovered}))))})))}},{key:"addItem",value:function(t){}},{key:"removeItem",value:function(t){}},{key:"_handleKeydown",value:function(t){var e=t.keyCode,n=this._keyManager;switch(e){case No.e:Object(No.o)(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case No.g:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case No.i:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:e!==No.l&&e!==No.b||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}},{key:"focusFirstItem",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program";this.lazyContent?this._ngZone.onStable.pipe(Object(Yt.a)(1)).subscribe((function(){return t._focusFirstItem(e)})):this._focusFirstItem(e)}},{key:"_focusFirstItem",value:function(t){var e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length)for(var n=this._directDescendantItems.first._getHostElement().parentElement;n;){if("menu"===n.getAttribute("role")){n.focus();break}n=n.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(t){var e=Math.min(4+t,24),n="mat-elevation-z".concat(e),i=Object.keys(this._classList).find((function(t){return t.startsWith("mat-elevation-z")}));i&&i!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[n]=!0,this._previousElevation=n)}},{key:"setPositionClasses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(t){this._animationDone.next(t),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var t=this;this._allItems.changes.pipe(Object($t.a)(this._allItems)).subscribe((function(e){t._directDescendantItems.reset(e.filter((function(e){return e._parentMenu===t}))),t._directDescendantItems.notifyOnChanges()}))}},{key:"xPosition",get:function(){return this._xPosition},set:function(t){this._xPosition=t,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(t){this._yPosition=t,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=Object(Ro.b)(t)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=Object(Ro.b)(t)}},{key:"panelClass",set:function(t){var e=this,n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach((function(t){e._classList[t]=!1})),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach((function(t){e._classList[t]=!0})),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(t){this.panelClass=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](Qo))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,contentQueries:function(t,e,n){var i;1&t&&(f["\u0275\u0275contentQuery"](n,$o,!0),f["\u0275\u0275contentQuery"](n,Jo,!0),f["\u0275\u0275contentQuery"](n,Jo,!1)),2&t&&(f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e.lazyContent=i.first),f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e._allItems=i),f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e.items=i))},viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275viewQuery"](f.TemplateRef,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.templateRef=n.first)},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t}(),na=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return n}(ea);return t.\u0275fac=function(e){return ia(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,features:[f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),ia=f["\u0275\u0275getInheritedFactory"](na),ra=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i,r){return Object(B.a)(this,n),e.call(this,t,i,r)}return n}(na);return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](Qo))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-menu"]],exportAs:["matMenu"],features:[f["\u0275\u0275ProvidersFeature"]([{provide:Xo,useExisting:na},{provide:na,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:Wo,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275template"](0,Ho,3,6,"ng-template"))},directives:[r.s],styles:['.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Uo.transformMenu,Uo.fadeInItems]},changeDetection:0}),t}(),oa=new f.InjectionToken("mat-menu-scroll-strategy"),aa={provide:oa,deps:[Fo.d],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},sa=Object(zo.e)({passive:!0}),ca=function(){var t=function(){function t(e,n,i,r,o,a,s,c){var l=this;Object(B.a)(this,t),this._overlay=e,this._element=n,this._viewContainerRef=i,this._parentMenu=o,this._menuItemInstance=a,this._dir=s,this._focusMonitor=c,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=zt.a.EMPTY,this._hoverSubscription=zt.a.EMPTY,this._menuCloseSubscription=zt.a.EMPTY,this._handleTouchStart=function(){return l._openedBy="touch"},this._openedBy=null,this.restoreFocus=!0,this.menuOpened=new f.EventEmitter,this.onMenuOpen=this.menuOpened,this.menuClosed=new f.EventEmitter,this.onMenuClose=this.menuClosed,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,sa),a&&(a._triggersSubmenu=this.triggersSubmenu()),this._scrollStrategy=r}return Object(N.a)(t,[{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,sa),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var t=this;if(!this._menuOpen){this._checkMenu();var e=this._createOverlay(),n=e.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe((function(){return t.closeMenu()})),this._initMenu(),this.menu instanceof na&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}},{key:"_destroyMenu",value:function(){var t=this;if(this._overlayRef&&this.menuOpen){var e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this._restoreFocus(),e instanceof na?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(Object(Ut.a)((function(t){return"void"===t.toState})),Object(Yt.a)(1),Object(Xt.a)(e.lazyContent._attached)).subscribe({next:function(){return e.lazyContent.detach()},complete:function(){return t._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach())}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedBy||"program")}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}},{key:"_restoreFocus",value:function(){this.restoreFocus&&(this._openedBy?this.triggersSubmenu()||this.focus(this._openedBy):this.focus()),this._openedBy=null}},{key:"_setIsMenuOpen",value:function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}},{key:"_checkMenu",value:function(){}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new Fo.e({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(t){var e=this;this.menu.setPositionClasses&&t.positionChanges.subscribe((function(t){e.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")}))}},{key:"_setPosition",value:function(t){var e="before"===this.menu.xPosition?["end","start"]:["start","end"],n=Object(Eo.a)(e,2),i=n[0],r=n[1],o="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],a=Object(Eo.a)(o,2),s=a[0],c=a[1],l=s,u=c,h=i,d=r,p=0;this.triggersSubmenu()?(d=i="before"===this.menu.xPosition?"start":"end",r=h="end"===i?"start":"end",p="bottom"===s?8:-8):this.menu.overlapTrigger||(l="top"===s?"bottom":"top",u="top"===c?"bottom":"top"),t.withPositions([{originX:i,originY:l,overlayX:h,overlayY:s,offsetY:p},{originX:r,originY:l,overlayX:d,overlayY:s,offsetY:p},{originX:i,originY:u,overlayX:h,overlayY:c,offsetY:-p},{originX:r,originY:u,overlayX:d,overlayY:c,offsetY:-p}])}},{key:"_menuClosingActions",value:function(){var t=this,e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),i=this._parentMenu?this._parentMenu.closed:Object(u.a)(),r=this._parentMenu?this._parentMenu._hovered().pipe(Object(Ut.a)((function(e){return e!==t._menuItemInstance})),Object(Ut.a)((function(){return t._menuOpen}))):Object(u.a)();return Object(Gt.a)(e,i,r,n)}},{key:"_handleMousedown",value:function(t){Object(To.j)(t)||(this._openedBy=0===t.button?"mouse":null,this.triggersSubmenu()&&t.preventDefault())}},{key:"_handleKeydown",value:function(t){var e=t.keyCode;this.triggersSubmenu()&&(e===No.i&&"ltr"===this.dir||e===No.g&&"rtl"===this.dir)&&this.openMenu()}},{key:"_handleClick",value:function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var t=this;this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(Object(Ut.a)((function(e){return e===t._menuItemInstance&&!e.disabled})),Object(jo.a)(0,Bo.b)).subscribe((function(){t._openedBy="mouse",t.menu instanceof na&&t.menu._isAnimating?t.menu._animationDone.pipe(Object(Yt.a)(1),Object(jo.a)(0,Bo.b),Object(Xt.a)(t._parentMenu._hovered())).subscribe((function(){return t.openMenu()})):t.openMenu()})))}},{key:"_getPortal",value:function(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new Do.g(this.menu.templateRef,this._viewContainerRef)),this._portal}},{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(t){this.menu=t}},{key:"menu",get:function(){return this._menu},set:function(t){var e=this;t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe((function(t){e._destroyMenu(),"click"!==t&&"tab"!==t||!e._parentMenu||e._parentMenu.closed.emit(t)}))))}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](Fo.d),f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](f.ViewContainerRef),f["\u0275\u0275directiveInject"](oa),f["\u0275\u0275directiveInject"](na,8),f["\u0275\u0275directiveInject"](Jo,10),f["\u0275\u0275directiveInject"](Go.c,8),f["\u0275\u0275directiveInject"](To.e))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&f["\u0275\u0275listener"]("mousedown",(function(t){return e._handleMousedown(t)}))("keydown",(function(t){return e._handleKeydown(t)}))("click",(function(t){return e._handleClick(t)})),2&t&&f["\u0275\u0275attribute"]("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t}(),la=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[aa],imports:[wi.a]}),t}(),ua=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[aa],imports:[[r.c,wi.a,wi.c,Fo.g,la],Vo.b,wi.a,la]}),t}();function ha(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",null==n.layer.category.parent||null==n.layer.category.parent.parent?null:n.layer.category.parent.parent.name," >- ")}}function da(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",null==n.layer.category.parent?null:n.layer.category.parent.name," - ")}}function pa(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.layer.category.name," ")}}function fa(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"a",24),f["\u0275\u0275element"](1,"nb-icon",25),f["\u0275\u0275elementEnd"]()),2&t){f["\u0275\u0275nextContext"]();var n=f["\u0275\u0275reference"](18);f["\u0275\u0275property"]("matMenuTriggerFor",n)}}function ga(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",26),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().fixLayerToggle()})),f["\u0275\u0275element"](1,"nb-icon",27),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3,"Iniciar Oculto"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function ma(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",28),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().fixLayerToggle()})),f["\u0275\u0275element"](1,"nb-icon",29),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3,"Iniciar Visible"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function va(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",30),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().publicLayer()})),f["\u0275\u0275element"](1,"nb-icon",31),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3,"Volver Privado"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function ya(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",32),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().publicLayer()})),f["\u0275\u0275element"](1,"nb-icon",33),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3,"Publicar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}var ba=function(){return["Manage Categories","all"]},_a=function(){return{confirmButtonText:"Borrar"}},Ca=function(){function t(t,e,n,i,r,o){this._dialogService=t,this._glMapService=e,this._layerService=n,this._pdfService=i,this._lottieSrv=r,this.ngZone=o,this.can=!1,this.stateChange=new f.EventEmitter,this.layerEdited=new f.EventEmitter,this.onCantPrint=new f.EventEmitter,this.loading=!1,this.options=this._lottieSrv.getOptions("printing",{loop:!1,initialSegment:[10,30]}),this.isPrinting=!1}return t.prototype.ngOnInit=function(){},t.prototype.editLayer=function(){this._dialogService.open(xi,{hasBackdrop:!1,closeOnBackdropClick:!1,context:{_layer:this.layer}}).onClose.subscribe((function(t){}))},t.prototype.deleteLayer=function(){var t=this;this.loading=!0,this._layerService.deleteLayer(this.layer).subscribe((function(e){t._glMapService.deleteMapLayer(t.layer),t._layerService.unsetLayer(t.layer),t._layerService.showToast("top right","success","Ha borrado Correctamente: "+t.layer.name),t.loading=!1}))},t.prototype.layerToggle=function(t,e,n){this._glMapService.toggleLayer(t,e),n.preventDefault()},t.prototype.fixLayerToggle=function(){var t=this;this.layer.isFixed=!this.layer.isFixed,this._layerService.updateState(this.layer).subscribe({next:function(e){e&&t._layerService.showToast("top right","success","Fijado correctamente")},error:function(e){t._layerService.showToast("top right","danger","Error al fijar"),t.layer.isFixed=!t.layer.isFixed}})},t.prototype.publicLayer=function(){var t=this;this.layer.isPublic=!this.layer.isPublic,this._layerService.updateState(this.layer).subscribe({next:function(e){e&&t._layerService.showToast("top right","success","Publicado correctamente")},error:function(e){t._layerService.showToast("top right","danger","Error al Publicar"),t.layer.isPublic=!t.layer.isPublic}})},t.prototype.animationCreated=function(t){this.printingAnimation=t},t.prototype.opened=function(){var t=this;this.ngZone.runOutsideAngular((function(){return t.printingAnimation.playSegments([10,160])}))},t.prototype.checkPrint=function(){var t=this;this.can?(this.isPrinting=!0,this.opened(),setTimeout((function(){t._pdfService.downloadMapPDF(t.layer,t._glMapService)})),this.isPrinting=!1):this.onCantPrint.emit()},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](g.I),f["\u0275\u0275directiveInject"](v),f["\u0275\u0275directiveInject"](O),f["\u0275\u0275directiveInject"](ko),f["\u0275\u0275directiveInject"](dn),f["\u0275\u0275directiveInject"](f.NgZone))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layer-item"]],inputs:{layer:"layer",can:"can"},outputs:{stateChange:"stateChange",layerEdited:"layerEdited",onCantPrint:"onCantPrint"},decls:32,vars:15,consts:[["id"," d-flex flex-column layer-item p-2 m-2 "],[1,"col-12","mb-2","pr-1","mt-2"],[1,"d-flex","justify-content-between"],[1,"d-flex"],[1,"label","text-info"],[4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"d-flex","mr-2","crop","align-self-center"],[1,"mx-0","my-0","align-self-center","print-anim",3,"options","click","animationCreated"],["class","options-btn","nbButton","","shape","round","ghost","","size","small","ghost","","nbContextMenuTag","layer-menu",3,"matMenuTriggerFor",4,"nbIsGranted"],[1,"col-12","mb-4"],[1,"layer-description"],[3,"innerHTML"],["title","Desea Borrar esta Capa?","text","Esta acci\xf3n no se  podr\xe1 deshacer","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],[1,"layers-options-menu","shadow","p-0","m-0","bg-white","rounded"],["menu","matMenu"],["mat-menu-item","",3,"click"],["icon","edit-2-outline"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa Inicia visible.","nbTooltipStatus","warning",3,"click",4,"ngIf"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa inicia oculta.","nbTooltipStatus","primary",3,"click",4,"ngIf"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa es p\xfablica","nbTooltipStatus","primary","status","warning",3,"click",4,"ngIf"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la capa es privada","nbTooltipStatus","warning","status","success",3,"click",4,"ngIf"],["status","danger","icon","trash-outline",1,"mr-2"],["nbButton","","shape","round","ghost","","size","small","ghost","","nbContextMenuTag","layer-menu",1,"options-btn",3,"matMenuTriggerFor"],["icon","ellipsis-v","pack","fa",1,"align-self-center"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa Inicia visible.","nbTooltipStatus","warning",3,"click"],["status","primary","icon","eye-off",1,"mr-2"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa inicia oculta.","nbTooltipStatus","primary",3,"click"],["status","primary","icon","eye",1,"mr-2"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la Capa es p\xfablica","nbTooltipStatus","primary","status","warning",3,"click"],["icon","unlock",1,"mr-2"],["mat-menu-item","","nbTooltipPlacement","right","nbTooltip","Actualmente la capa es privada","nbTooltipStatus","warning","status","success",3,"click"],["icon","globe-2",1,"mr-2"]],template:function(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275elementStart"](2,"div",2),f["\u0275\u0275elementStart"](3,"div",3),f["\u0275\u0275elementStart"](4,"div",4),f["\u0275\u0275template"](5,ha,2,1,"span",5),f["\u0275\u0275template"](6,da,2,1,"span",5),f["\u0275\u0275template"](7,pa,2,1,"span",5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",6),f["\u0275\u0275elementStart"](9,"div",7),f["\u0275\u0275elementStart"](10,"ng-lottie",8),f["\u0275\u0275listener"]("click",(function(){return e.checkPrint()}))("animationCreated",(function(t){return e.animationCreated(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](11,fa,2,1,"a",9),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"div",10),f["\u0275\u0275elementStart"](13,"div",11),f["\u0275\u0275element"](14,"div",12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"swal",13,14),f["\u0275\u0275listener"]("confirm",(function(){return e.deleteLayer()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"mat-menu",15,16),f["\u0275\u0275elementStart"](19,"button",17),f["\u0275\u0275listener"]("click",(function(){return e.editLayer()})),f["\u0275\u0275element"](20,"nb-icon",18),f["\u0275\u0275elementStart"](21,"span"),f["\u0275\u0275text"](22,"Editar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](23,ga,4,0,"button",19),f["\u0275\u0275template"](24,ma,4,0,"button",20),f["\u0275\u0275template"](25,va,4,0,"button",21),f["\u0275\u0275template"](26,ya,4,0,"button",22),f["\u0275\u0275elementStart"](27,"button",17),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275reference"](16).fire()})),f["\u0275\u0275element"](28,"nb-icon",23),f["\u0275\u0275elementStart"](29,"span"),f["\u0275\u0275text"](30,"Eliminar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](31,"nb-action")}2&t&&(f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngIf",null==e.layer.category.parent||null==e.layer.category.parent.parent?null:e.layer.category.parent.parent.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==e.layer.category.parent?null:e.layer.category.parent.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.layer.category.name),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("options",e.options),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("nbIsGranted",f["\u0275\u0275pureFunction0"](13,ba)),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("innerHTML",e.layer.desc,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",f["\u0275\u0275pureFunction0"](14,_a)),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("ngIf",e.layer.isFixed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.layer.isFixed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.layer.isPublic),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.layer.isPublic))},directives:[r.v,Pn.b,m.c,gn.a,ra,Jo,g.M,g.k,g.s,ca,g.Ub],styles:[".nb-theme-default   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-default   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-default   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-dark   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-dark   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-cosmic   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-cosmic   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-corporate   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-corporate   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-material-dark   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-material-dark   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-material-light   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-material-light   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   .layers-options-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   .print-anim[_ngcontent-%COMP%]{overflow:hidden;transform:scale(6);width:30px;height:30px}.nb-theme-obsrio   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]:hover{cursor:pointer}.nb-theme-obsrio   [_nghost-%COMP%]   .crop[_ngcontent-%COMP%]{transition:.3s;width:24px;height:24px;max-width:24px;max-height:24px;overflow:hidden}"]}),t}(),xa=["infoSwal"];function wa(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ng-lottie",8),f["\u0275\u0275listener"]("animationCreated",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().animationCreated(t)})),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("options",i.options)}}function Ia(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",9),f["\u0275\u0275elementStart"](1,"a",10),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().addLayer()})),f["\u0275\u0275element"](2,"nb-icon",11),f["\u0275\u0275text"](3," Capa "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function Aa(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",37),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).toggleCategoryFolder(t)})),f["\u0275\u0275elementEnd"]()}}function Pa(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",38),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).toggleCategoryFolder(t)})),f["\u0275\u0275elementEnd"]()}}function Oa(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",34),f["\u0275\u0275template"](1,Aa,1,0,"nb-icon",35),f["\u0275\u0275template"](2,Pa,1,0,"nb-icon",36),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.isCatCollapsed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.isCatCollapsed),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.category.name," ")}}function Ma(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",39),f["\u0275\u0275element"](1,"img",40),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275styleProp"]("margin-left",i.getMargin(null==n.category||null==n.category.parent?null:n.category.parent.parent)),f["\u0275\u0275property"]("nbTooltip",null==n.category||null==n.category.parent||null==n.category.parent.parent?null:n.category.parent.parent.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("src",null==n.category||null==n.category.parent||null==n.category.parent.parent?null:n.category.parent.parent.icon,f["\u0275\u0275sanitizeUrl"])}}function Sa(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",39),f["\u0275\u0275element"](1,"img",40),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275styleProp"]("margin-left",i.getMargin(null==n.category?null:n.category.parent)),f["\u0275\u0275property"]("nbTooltip",null==n.category||null==n.category.parent?null:n.category.parent.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("src",null==n.category||null==n.category.parent?null:n.category.parent.icon,f["\u0275\u0275sanitizeUrl"])}}var ka=function(t){return{lactive:t}};function Ea(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",41),f["\u0275\u0275element"](1,"img",40),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275styleProp"]("margin-left",i.getMargin(n.category)),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](5,ka,n.state))("nbTooltip",null==n.category?null:n.category.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("src",n.category.icon,f["\u0275\u0275sanitizeUrl"])}}function La(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",47)}function Ta(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",48)}function Ra(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",49)}function Na(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",50)}function Ba(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"div",42),f["\u0275\u0275template"](1,La,1,0,"nb-icon",43),f["\u0275\u0275template"](2,Ta,1,0,"nb-icon",44),f["\u0275\u0275template"](3,Ra,1,0,"nb-icon",45),f["\u0275\u0275template"](4,Na,1,0,"nb-icon",46),f["\u0275\u0275elementEnd"]()),2&t){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.isPublic),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.isPublic),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.isFixed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.isFixed)}}function ja(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",51)}function Da(t,e){1&t&&f["\u0275\u0275element"](0,"nb-icon",52)}function Fa(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",53),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().$implicit;return t.isCollapsed=!t.isCollapsed})),f["\u0275\u0275elementEnd"]()}}function za(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-icon",54),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275nextContext"]().$implicit;return t.isCollapsed=!t.isCollapsed})),f["\u0275\u0275elementEnd"]()}}var Va=function(t,e){return{"hide-item":t,cat_title:e}},Ga=function(t){return{"top-title":t}},Za=function(t){return{"hide-item":t}},Wa=function(){return["Manage Layers","all"]};function Ha(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-accordion-item",14),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=e.$implicit;return f["\u0275\u0275nextContext"](2).showConvention(t)})),f["\u0275\u0275elementStart"](1,"nb-accordion-item-header",15),f["\u0275\u0275template"](2,Oa,4,3,"div",16),f["\u0275\u0275elementStart"](3,"div",17),f["\u0275\u0275elementStart"](4,"div",18),f["\u0275\u0275template"](5,Ma,2,4,"div",19),f["\u0275\u0275template"](6,Sa,2,4,"div",19),f["\u0275\u0275template"](7,Ea,2,7,"div",20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",21),f["\u0275\u0275elementStart"](9,"div",22),f["\u0275\u0275elementStart"](10,"div",23),f["\u0275\u0275template"](11,Ba,5,4,"div",24),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"div",25),f["\u0275\u0275elementStart"](13,"p",26),f["\u0275\u0275text"](14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"div",22),f["\u0275\u0275elementStart"](16,"div",27),f["\u0275\u0275listener"]("click",(function(t){f["\u0275\u0275restoreView"](n);var i=e.$implicit;return f["\u0275\u0275nextContext"](2).layerToggle(i,!i.state,t)})),f["\u0275\u0275template"](17,ja,1,0,"nb-icon",28),f["\u0275\u0275template"](18,Da,1,0,"nb-icon",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](19,Fa,1,0,"nb-icon",30),f["\u0275\u0275template"](20,za,1,0,"nb-icon",31),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](21,"nb-accordion-item-body",32),f["\u0275\u0275elementStart"](22,"ngx-layer-item",33),f["\u0275\u0275listener"]("onCantPrint",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2),f["\u0275\u0275reference"](7).fire()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.index,o=f["\u0275\u0275nextContext"](2);f["\u0275\u0275styleProp"]("margin-left",o.getMargin2(i.category,r)),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction2"](19,Va,i.category.isCollapsed,o.canSetTitle(r)))("collapsed",!i.isCollapsed)("ngClass",f["\u0275\u0275pureFunction1"](22,Ga,o.canSetTitle(r))),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",o.canSetTitle(r)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](24,Za,i.isCatCollapsed)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",null==i.category||null==i.category.parent||null==i.category.parent.parent?null:i.category.parent.parent.icon),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==i.category||null==i.category.parent?null:i.category.parent.icon),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",i.category.icon),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("nbIsGranted",f["\u0275\u0275pureFunction0"](26,Wa)),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](i.name),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",i.state),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!i.state),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",i.isCollapsed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!i.isCollapsed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](27,Za,i.isCatCollapsed)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("can",o.can)("layer",i)}}function Ua(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"nb-accordion",12),f["\u0275\u0275listener"]("cdkDropListDropped",(function(t){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().drop(t)})),f["\u0275\u0275template"](1,Ha,23,29,"nb-accordion-item",13),f["\u0275\u0275elementEnd"]()}if(2&t){var i=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("cdkDropListData",i.layers),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",i.layers)("ngForTrackBy",i.trackByFn)}}var $a=function(){function t(t,e,n,i,r,o){var a=this;this._glMapService=t,this._dialogService=e,this._layerService=n,this._accessChecker=i,this.router=r,this._lottieSrv=o,this.loading=!1,this.can=!1,this.options=this._lottieSrv.getOptions("loading-layers"),i.isGranted("Donwload Station PDF","all").subscribe({next:function(t){a.can=!!t}})}return t.prototype.ngOnDestroy=function(){},t.prototype.ngOnInit=function(){console.log("3. Layer-list: after view init"),this.retrieveData()},t.prototype.ngAfterViewInit=function(){},t.prototype.retrieveData=function(){var t=this;this.loading=!0,this.layers$=this._layerService.getLayers(),this._glMapService.getMap().subscribe({next:function(e){var n;console.log("3.1 Layer-list: loaded MAP"),t.gl_map=e,n=t._glMapService.getHandlers(),t.glLayers=n[0],t.glSources=n[1],t.glLayersNames=n[2]},error:function(t){console.error(t)}}),this.layers$.subscribe({next:function(e){console.log(".........3.2 Layer-list: LAYER DATA"),t.layers=e,t.loading=!1},error:function(t){console.error(t)}})},t.prototype.addLayer=function(){this._dialogService.open(xi,{closeOnBackdropClick:!1}).onClose.subscribe((function(t){}))},t.prototype.showConvention=function(t){this._glMapService.setLastClickedLayer(t)},t.prototype.canShowLayer=function(t,e){var n=this;return!e||!t.exclusions.some((function(t){return n.activeLayers.map((function(t){return t.id})).indexOf(t)>=0}))},t.prototype.layerToggle=function(t,e,n){this._glMapService.toggleLayer(t,e),n.preventDefault()},t.prototype.uncheckLayers=function(){},t.prototype.animationCreated=function(t){this._lottieSrv.animationCreated(t,[0,120])},t.prototype.drop=function(t){t.previousContainer===t.container?(this._glMapService.changeLayerPos(t.container.data[t.previousIndex],t.container.data[t.currentIndex],t.previousIndex,t.currentIndex),Object(fn.h)(t.container.data,t.previousIndex,t.currentIndex)):t.container.data.length>0?(this._glMapService.changeLayerPos(t.previousContainer.data[t.previousIndex],t.container.data[t.currentIndex],t.previousIndex,t.currentIndex),Object(fn.i)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)):Object(fn.i)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.prototype.toggleCategoryFolder=function(t){this.layers.map((function(e){var n,i,r,o,a,s;e.id!==t.id&&(e.category_id===t.category_id&&(e.category.isCollapsed=!e.category.isCollapsed),(null===(i=null===(n=e.category)||void 0===n?void 0:n.parent)||void 0===i?void 0:i.parent)&&(null===(o=null===(r=e.category)||void 0===r?void 0:r.parent)||void 0===o?void 0:o.parent.id)===t.category_id&&(e.category.isCollapsed=!e.category.isCollapsed),(null===(a=e.category)||void 0===a?void 0:a.parent)&&(null===(s=e.category)||void 0===s?void 0:s.parent.id)===t.category_id&&(e.category.isCollapsed=!e.category.isCollapsed))})),t.isCatCollapsed=!t.isCatCollapsed},t.prototype.getMargin=function(t){var e;return(null===(e=t.parent)||void 0===e?void 0:e.parent)?"16px":(null==t?void 0:t.parent)?"8px":t?"0px":void 0},t.prototype.getMargin2=function(t,e){var n,i;return(null===(n=this.layers[e].category.parent)||void 0===n?void 0:n.parent)?"70px":(null===(i=this.layers[e].category)||void 0===i?void 0:i.parent)?"40px":this.layers[e].category?"10px":void 0},t.prototype.canSetTitle=function(t){return 0===t||this.layers[t-1].category_id!==this.layers[t].category_id},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](v),f["\u0275\u0275directiveInject"](g.I),f["\u0275\u0275directiveInject"](O),f["\u0275\u0275directiveInject"](m.a),f["\u0275\u0275directiveInject"](o.c),f["\u0275\u0275directiveInject"](dn))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layers-list"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275viewQuery"](xa,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e.infoSwal=n.first)},decls:8,vars:8,consts:[["class","mx-auto",3,"options","animationCreated",4,"ngIf"],["id","editor-options",1,"d-flex","justify-content-end"],["class","d-flex justify-content-end py-2 px-2",4,"nbIsGranted"],["style","overflow: auto;","id","layer-list","cdkDropList","",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["title","Desactivar?","text","Una o m\xe1s capas deben ser desactivadas para Activar esta capa.","icon","question",3,"showCancelButton","focusCancel","confirm"],["canShowSwal",""],["title","A\xfan no te has registrado?","text","Si deseas ver m\xe1s capas y descargar resportes, por favor registrate o ingresa a la plataforma con tu usuario.","icon","info","cancelButtonText","<i class='fa fa-sign-in'>\n</i> Ingresar","confirmButtonText","\n<i class='fa fa-plus' aria-hidden='true'></i> Quiero Registrarme.",3,"showCancelButton","focusCancel","confirm","cancel"],["infoSwal",""],[1,"mx-auto",3,"options","animationCreated"],[1,"d-flex","justify-content-end","py-2","px-2"],["nbButton","","shape","round","size","tiny","status","success","status","control",1,"shadow",3,"click"],["icon","plus-outline"],["id","layer-list","cdkDropList","",2,"overflow","auto",3,"cdkDropListData","cdkDropListDropped"],["disabled","true","class","layers-list card ","cdkDrag","","matRipple","",3,"ngClass","collapsed","margin-left","click",4,"ngFor","ngForOf","ngForTrackBy"],["disabled","true","cdkDrag","","matRipple","",1,"layers-list","card",3,"ngClass","collapsed","click"],[1,"d-flex","justify-content-start"],["class","cat-name d-flex justify-content-start",4,"ngIf"],[1,"d-flex","justify-content-between","flex-fill",3,"ngClass"],[1,"category-images","d-flex","flex-column","justify-content-center","algins-items-center","shadow-sm"],["nbTooltipStatus","control","status","control","class","type-image category-image align-self-center ",3,"nbTooltip","margin-left",4,"ngIf"],["nbTooltipStatus","control","status","control","class","type-image category-image align-self-center ",3,"ngClass","nbTooltip","margin-left",4,"ngIf"],[1,"d-flex","justify-content-between","flex-fill"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["class","d-flex layer-states justify-content-center align-self-center",4,"nbIsGranted"],[1,"d-flex","jusify-content-between","flex-fill"],[1,"ml-2","align-self-center","acordeon-header-title"],[1,"custom_checkbox","d-flex","flex-row","mr-1",3,"click"],["class","align-self-center","icon","checkmark-square-outline",4,"ngIf"],["class","align-self-center","icon","square-outline",4,"ngIf"],["class"," align-self-center","nbTooltip","Ver Informaci\xf3n","nbTooltipStatus","primary","icon","chevron-up-outline",3,"click",4,"ngIf"],["class"," align-self-center","nbTooltip","Ver Informaci\xf3n","nbTooltipStatus","primary","icon","chevron-down-outline",3,"click",4,"ngIf"],[3,"ngClass"],[3,"can","layer","onCantPrint"],[1,"cat-name","d-flex","justify-content-start"],["class","align-self-center mx-2 ","icon","folder-open","pack","fa",3,"click",4,"ngIf"],["class","align-self-center  mx-2 ","icon","folder","pack","fa",3,"click",4,"ngIf"],["icon","folder-open","pack","fa",1,"align-self-center","mx-2",3,"click"],["icon","folder","pack","fa",1,"align-self-center","mx-2",3,"click"],["nbTooltipStatus","control","status","control",1,"type-image","category-image","align-self-center",3,"nbTooltip"],["alt","Categoria","aria-label","Capa",3,"src"],["nbTooltipStatus","control","status","control",1,"type-image","category-image","align-self-center",3,"ngClass","nbTooltip"],[1,"d-flex","layer-states","justify-content-center","align-self-center"],["class","mr-1","size","small","nbTooltip","P\xfablico","nbTooltipStatus","primary","icon","globe-2",4,"ngIf"],["class","mr-1","size","small","nbTooltip","Privado","nbTooltipStatus","primary","icon","lock",4,"ngIf"],["class","mr-1","size","small","nbTooltip","Inicia Visible","nbTooltipStatus","primary","icon","eye",4,"ngIf"],["class","mr-1","size","small","nbTooltip","Inicia Oculta","nbTooltipStatus","primary","icon","eye-off",4,"ngIf"],["size","small","nbTooltip","P\xfablico","nbTooltipStatus","primary","icon","globe-2",1,"mr-1"],["size","small","nbTooltip","Privado","nbTooltipStatus","primary","icon","lock",1,"mr-1"],["size","small","nbTooltip","Inicia Visible","nbTooltipStatus","primary","icon","eye",1,"mr-1"],["size","small","nbTooltip","Inicia Oculta","nbTooltipStatus","primary","icon","eye-off",1,"mr-1"],["icon","checkmark-square-outline",1,"align-self-center"],["icon","square-outline",1,"align-self-center"],["nbTooltip","Ver Informaci\xf3n","nbTooltipStatus","primary","icon","chevron-up-outline",1,"align-self-center",3,"click"],["nbTooltip","Ver Informaci\xf3n","nbTooltipStatus","primary","icon","chevron-down-outline",1,"align-self-center",3,"click"]],template:function(t,e){1&t&&(f["\u0275\u0275template"](0,wa,1,1,"ng-lottie",0),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275template"](2,Ia,4,0,"div",2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,Ua,2,3,"nb-accordion",3),f["\u0275\u0275elementStart"](4,"swal",4,5),f["\u0275\u0275listener"]("confirm",(function(){return e.uncheckLayers()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"swal",6,7),f["\u0275\u0275listener"]("confirm",(function(){return e.router.navigateByUrl("/auth/login")}))("cancel",(function(){return e.router.navigateByUrl("/auth/login")})),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275property"]("ngIf",e.loading),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("nbIsGranted",f["\u0275\u0275pureFunction0"](7,Wa)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.loading),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0))},directives:[r.v,m.c,gn.a,Pn.b,g.s,g.M,g.f,fn.e,r.u,g.h,fn.a,wi.b,r.s,g.i,g.g,Ca,g.Ub],styles:['@import url("https://fonts.googleapis.com/css?family=Montserrat:500,700,600");\n.nb-theme-default   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-default   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-default   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-default   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#006fd6}.nb-theme-default   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-default   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-default   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#0041a8;margin:0;transition:all .5s ease-in-out}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#598bff}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#8f9bb3}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#36f!important}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0095ff;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-default   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-default   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-default   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-default   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-default   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-dark   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-dark   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-dark   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#006fd6}.nb-theme-dark   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-dark   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-dark   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#0041a8;margin:0;transition:all .5s ease-in-out}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#598bff}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#8f9bb3}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#36f!important}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0095ff;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-dark   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-dark   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-cosmic   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-cosmic   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-cosmic   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#006fd6}.nb-theme-cosmic   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-cosmic   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-cosmic   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#0041a8;margin:0;transition:all .5s ease-in-out}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#b18aff}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#b4b4db}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#a16eff!important}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0095ff;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-cosmic   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-cosmic   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-cosmic   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-corporate   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-corporate   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-corporate   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#006fd6}.nb-theme-corporate   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-corporate   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-corporate   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#0041a8;margin:0;transition:all .5s ease-in-out}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#598bff}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#8f9bb3}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#36f!important}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0095ff;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-corporate   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-corporate   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-corporate   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-corporate   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-material-dark   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-material-dark   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-material-dark   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#0273cc}.nb-theme-material-dark   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-material-dark   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-material-dark   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#013d8a;margin:0;transition:all .5s ease-in-out}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#f24681}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:grey}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#e91d63!important}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0495ee;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-material-dark   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-material-dark   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-dark   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-material-light   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-material-light   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-material-light   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#0273cc}.nb-theme-material-light   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-material-light   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-material-light   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#013d8a;margin:0;transition:all .5s ease-in-out}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#903df4}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#838383}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#6200ee!important}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #0495ee;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-material-light   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-material-light   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-material-light   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-material-light   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .top-title[_ngcontent-%COMP%]{margin-top:26px!important}.nb-theme-obsrio   [_nghost-%COMP%]   .hide-item[_ngcontent-%COMP%]{height:0;opacity:0}.nb-theme-obsrio   [_nghost-%COMP%]   .cat_title[_ngcontent-%COMP%]{margin-top:25px!important}.nb-theme-obsrio   [_nghost-%COMP%]   .custom_checkbox[_ngcontent-%COMP%]{color:#4f94b2}.nb-theme-obsrio   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]{position:absolute;top:-25px;min-height:25px;left:0;color:#fff;border-radius:6px 0 0 0;background-color:rgba(11,72,89,.5098039215686274);padding:0;margin-left:6px;width:100%;font-size:.82em;text-transform:uppercase;font-weight:600}.nb-theme-obsrio   [_nghost-%COMP%]   .cat-name[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1em}.nb-theme-obsrio   [_nghost-%COMP%]   #editor-options[_ngcontent-%COMP%]{position:absolute;right:.5em;bottom:1em;z-index:2}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]{overflow:auto;border-radius:0;-webkit-overflow-scrolling:touch;height:100%;padding-bottom:50vh;padding-top:2vh}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]{color:#225278;margin:0;transition:all .5s ease-in-out}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]   .acordeon-header-title[_ngcontent-%COMP%]:hover{color:#669493}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item{margin:0;border-radius:8px 0 0 9px;overflow:visible}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header{padding:3px 8px 3px 28px;border-width:0}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states{position:relative;margin-left:.3em;color:#838383}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .layer-states nb-icon{font-size:14px}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .lactive{margin-left:0;border-color:#2d4b4d!important}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image{overflow:hidden;border-radius:50%;border:5px solid #6db9d0;max-width:2.3em;min-width:2.3em;min-height:2.3em;max-height:2.3em;transform:scale(.65)}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .category-image img{width:100%;height:100%;margin:0 auto}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image{width:2.5em;overflow:hidden;height:2.5em;border-radius:50%;position:absolute;left:-1em;border:4px solid #fff;background:#fff}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-list[_ngcontent-%COMP%]     nb-accordion-item nb-accordion-item-header .category-images .type-image span nb-icon{font-size:1.25rem;line-height:1;width:100%;height:100%;padding:.4em}.nb-theme-obsrio   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{transition:.3s}.nb-theme-obsrio   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px 4px #a9dadf,0 3px 9px 5px #1d2451}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.1;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.nb-theme-obsrio   [_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}']}),t}();function Ka(t,e){1&t&&f["\u0275\u0275element"](0,"ngx-layers-list")}var Xa=function(){function t(t,e,n,i,r,o,a,s,c){var l=this;this._accessChecker=t,this._toastrService=e,this._auth=n,this.router=i,this.renderer=r,this.ngZone=o,this.breakpointService=a,this.themeService=s,this._lottieSrv=c,this.activeLayers=[],this.layers=[],this.flipped=!1,this.isLogged=!1,this.isSideNavOpen=!1,this.closeConv=!1,this.loading=!1,this.state="rotated",this.showAsList=!0,this.destroy$=new D.a,this.map$=null,this.optionsMap=this._lottieSrv.getOptions("loading-station",{loop:!1}),this.options=this._lottieSrv.getOptions("layers-btn",{loop:!1,initialSegment:[0,120]}),this.index=0,n.getCurrentUser().subscribe({next:function(t){null!==t&&(l.user=t,l.isLogged=!0,t.id&&(l.isSideNavOpen=!0))}})}return t.prototype.rotate=function(){this.state="default"===this.state?"rotated":"default"},t.prototype.ngOnInit=function(){var t=this,e=this.breakpointService.getBreakpointsMap().xl;this.themeService.onMediaQueryChange().pipe(Object(I.a)((function(t){return t[1].width<e})),Object(Xt.a)(this.destroy$)).subscribe((function(e){return t.isSideNavOpen=!e}))},t.prototype.ngAfterViewInit=function(){this.renderer.addClass(document.body,"visor"),console.log("2. Loading sidenav")},t.prototype.ngOnDestroy=function(){this.renderer.removeClass(document.body,"visor")},t.prototype.toggleSideNav=function(t){this.isSideNavOpen=!this.isSideNavOpen,this.isSideNavOpen?this.opened():this.closed(),t.toggle(),this.rotate()},t.prototype.createElement=function(t,e){var n=document.createElement("div");return void 0!==e?(n.className+=" layer_"+e.id,e.state||(n.className+=" hide"),-1!==e.sourceType.indexOf("realtime_icons")&&(n.className+=" "+t.icon,n.setAttribute("(click)","show_icon($event,"+JSON.stringify(t)+");"))):(n.style.backgroundImage="url("+t.icon+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundSize="cover",n.style.cursor="pointer",n.style.width="35px",n.style.height="35px",n.setAttribute("(click)","show_station($event,"+JSON.stringify(t)+");")),n.innerHTML="<span class='marker-title'>"+t.name+"</span>",n[0]},t.prototype.sendToTop=function(t,e){var n=this,i=t[e],r=JSON.parse(i.glLayers),o=r[0].id+"ref";i.inTop?(r.map((function(t){return n.gl_map.moveLayer(t.id,r[0].id+"ref")})),this.gl_map.removeLayer(o),i.inTop=!1):(r.map((function(t){return n.gl_map.moveLayer(t.id)})),i.inTop=!0)},t.prototype.animationCreated=function(t,e){this.animationItem=t,this._lottieSrv.animationCreated(t,{speed:e})},t.prototype.stop=function(){var t=this;this.ngZone.runOutsideAngular((function(){return t.animationItem.stop()}))},t.prototype.opened=function(){var t=this;this.ngZone.runOutsideAngular((function(){return t.animationItem.playSegments([0,120])}))},t.prototype.closed=function(){var t=this;this.ngZone.runOutsideAngular((function(){return t.animationItem.playSegments([120,230])}))},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.prototype.showToast=function(t,e,n){this.index+=1,this._toastrService.show(n,"Informaci\xf3n",{limit:3,position:t,status:e})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](m.a),f["\u0275\u0275directiveInject"](g.Rb),f["\u0275\u0275directiveInject"](p.a),f["\u0275\u0275directiveInject"](o.c),f["\u0275\u0275directiveInject"](f.Renderer2),f["\u0275\u0275directiveInject"](f.NgZone),f["\u0275\u0275directiveInject"](g.db),f["\u0275\u0275directiveInject"](g.Pb),f["\u0275\u0275directiveInject"](dn))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layers-sidenav"]],decls:19,vars:6,consts:[[1,"sidenav-container",3,"hasBackdrop"],["mode","over","id","sidenav",3,"opened"],["drawer",""],["status","info","accent","info","id","layer-sidenav","nbSpinnerStatus","danger","nbSpinnerSize","large",2,"overflow","hidden",3,"nbSpinner"],[1,"d-flex","justify-content-end"],["status","info","id","close_sidenav","nbButton","",1,"d-flex","align-self-center",3,"click"],["icon","arrow-ios-forward-outline","pack","eva",1,"d-flex"],[1,"card_body_sidenav"],[4,"ngIf"],["id","sidenav-sub-header",1,"bg-white","p-3","d-flex","justify-content-center"],[1,"caption"],[2,"overflow","hidden"],[1,"row","justify-content-center","shadow"],["id","md-fab-layers",1,"stick-fab-center-bottom",3,"click"],["nbButton","","ghost","","id","menu_fab","aria-label","menu","nbTooltip","Ver Capas","nbTooltipStatus","primary","nbButton","","status","primary",1,"md-fab","md-secondary"],[1,"mx-auto",3,"options","animationCreated"]],template:function(t,e){if(1&t){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"mat-drawer-container",0),f["\u0275\u0275elementStart"](1,"mat-drawer",1,2),f["\u0275\u0275elementStart"](3,"nb-card",3),f["\u0275\u0275elementStart"](4,"nb-card-header",4),f["\u0275\u0275elementStart"](5,"button",5),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275reference"](2);return e.toggleSideNav(t)})),f["\u0275\u0275element"](6,"nb-icon",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"nb-card-body",7),f["\u0275\u0275template"](8,Ka,1,0,"ngx-layers-list",8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div",9),f["\u0275\u0275elementStart"](10,"h6",10),f["\u0275\u0275text"](11,"Plataforma de Monitoreo del R\xedo Magdalena - \xa9 Copyright 2020 "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"mat-drawer-content",11),f["\u0275\u0275element"](13,"ngx-mapbox"),f["\u0275\u0275element"](14,"ngx-conventions"),f["\u0275\u0275elementStart"](15,"div",12),f["\u0275\u0275elementStart"](16,"div",13),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var t=f["\u0275\u0275reference"](2);return e.toggleSideNav(t)})),f["\u0275\u0275elementStart"](17,"button",14),f["\u0275\u0275elementStart"](18,"ng-lottie",15),f["\u0275\u0275listener"]("animationCreated",(function(t){return e.animationCreated(t,1.8)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}2&t&&(f["\u0275\u0275property"]("hasBackdrop",!1),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("opened",e.isSideNavOpen),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("nbSpinner",e.loading),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("@rotatedState",e.state),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",e.showAsList),f["\u0275\u0275advance"](10),f["\u0275\u0275property"]("options",e.options))},directives:[pn.b,pn.a,g.w,g.Cb,g.z,g.s,g.M,g.v,r.v,pn.c,en,An,g.Ub,Pn.b,$a],styles:[".nb-theme-default   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-default   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-default   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-default   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-default   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-default   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-default   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-default   [_nghost-%COMP%]    {height:100%!important}.nb-theme-default   [_nghost-%COMP%]     .info-container, .nb-theme-default   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-default   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-default   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-default   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-default   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-default   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-default   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-default   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-default   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-default   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-default   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-default   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-default   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-default   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-default   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-default   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-default   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-default   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-default   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-default   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-default   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-default   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-default   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-default   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-default   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-default   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-default   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-default   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-dark   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-dark   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-dark   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-dark   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-dark   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-dark   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-dark   [_nghost-%COMP%]    {height:100%!important}.nb-theme-dark   [_nghost-%COMP%]     .info-container, .nb-theme-dark   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-dark   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-dark   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-dark   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-dark   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-dark   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-dark   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-dark   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-dark   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-dark   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-dark   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-dark   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-dark   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-dark   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-dark   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-dark   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-dark   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-cosmic   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-cosmic   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-cosmic   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-cosmic   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-cosmic   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-cosmic   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-cosmic   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-cosmic   [_nghost-%COMP%]    {height:100%!important}.nb-theme-cosmic   [_nghost-%COMP%]     .info-container, .nb-theme-cosmic   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-cosmic   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-cosmic   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-cosmic   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-cosmic   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-cosmic   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-cosmic   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-cosmic   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-cosmic   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-cosmic   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-cosmic   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-cosmic   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-cosmic   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-cosmic   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-cosmic   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-cosmic   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#b18aff;text-transform:uppercase}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#a16eff}.nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-cosmic   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-cosmic   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-cosmic   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-cosmic   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-cosmic   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-cosmic   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-cosmic   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-cosmic   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-cosmic   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-corporate   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-corporate   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-corporate   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(0,149,255,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0095ff}.nb-theme-corporate   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-corporate   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-corporate   [_nghost-%COMP%]     #surface1 path{fill:#0095ff!important}.nb-theme-corporate   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-corporate   [_nghost-%COMP%]    {height:100%!important}.nb-theme-corporate   [_nghost-%COMP%]     .info-container, .nb-theme-corporate   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-corporate   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-corporate   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-corporate   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#c7e2ff;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-corporate   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-corporate   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-corporate   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-corporate   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#94cbff;border:0 #fff;border-radius:16px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#42aaff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#006fd6}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#f2f8ff;border:0 #fff;border-radius:58px}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#c7e2ff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#94cbff}.nb-theme-corporate   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-corporate   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-corporate   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-corporate   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-corporate   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-corporate   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-corporate   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-corporate   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#598bff;text-transform:uppercase}.nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#36f}.nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#f2f8ff}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-corporate   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-corporate   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-corporate   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-corporate   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-corporate   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-corporate   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-corporate   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-corporate   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-corporate   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-corporate   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-material-dark   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-material-dark   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-material-dark   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(4,149,238,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0495ee}.nb-theme-material-dark   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-material-dark   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-material-dark   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-dark   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-material-dark   [_nghost-%COMP%]    {height:100%!important}.nb-theme-material-dark   [_nghost-%COMP%]     .info-container, .nb-theme-material-dark   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-material-dark   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-material-dark   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-material-dark   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#99e9fd;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-material-dark   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-material-dark   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-material-dark   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-material-dark   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#66d3f9;border:0 #fff;border-radius:16px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#40bbf4}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#0273cc}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#ccf7fe;border:0 #fff;border-radius:58px}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#99e9fd}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#66d3f9}.nb-theme-material-dark   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-material-dark   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-material-dark   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-material-dark   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-material-dark   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-material-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-material-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-material-dark   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#f24681;text-transform:uppercase}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize;font-size:.85em;color:#e91d63}.nb-theme-material-dark   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#ccf7fe}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-material-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-material-dark   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-material-dark   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-material-dark   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-material-dark   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-material-dark   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-material-dark   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-material-dark   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-material-dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-material-light   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-material-light   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-material-light   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(4,149,238,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#0495ee}.nb-theme-material-light   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-material-light   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-material-light   [_nghost-%COMP%]     #surface1 path{fill:#0495ee!important}.nb-theme-material-light   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-material-light   [_nghost-%COMP%]    {height:100%!important}.nb-theme-material-light   [_nghost-%COMP%]     .info-container, .nb-theme-material-light   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-material-light   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-material-light   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-material-light   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#99e9fd;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-material-light   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-material-light   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-material-light   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-material-light   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#66d3f9;border:0 #fff;border-radius:16px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#40bbf4}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#0273cc}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#ccf7fe;border:0 #fff;border-radius:58px}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#99e9fd}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#66d3f9}.nb-theme-material-light   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-material-light   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-material-light   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-material-light   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-material-light   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-material-light   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-material-light   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-material-light   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#903df4;text-transform:uppercase}.nb-theme-material-light   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize;font-size:.85em;color:#6200ee}.nb-theme-material-light   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#ccf7fe}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-material-light   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-material-light   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-material-light   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-material-light   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-material-light   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-material-light   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-material-light   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-material-light   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-material-light   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-material-light   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}.nb-theme-obsrio   [_nghost-%COMP%]   .row.icon-containerd-flex[_ngcontent-%COMP%]{position:absolute;right:2em}.nb-theme-obsrio   [_nghost-%COMP%]   .sidenav-container[_ngcontent-%COMP%]{background-color:#f7f7f7}.nb-theme-obsrio   [_nghost-%COMP%]   span.type[_ngcontent-%COMP%]{text-align:center;background:rgba(109,185,208,.08);font-size:6pt;display:flex;align-self:center;margin-right:.3em;padding:0 .7em;border-radius:16em;color:#6db9d0}.nb-theme-obsrio   [_nghost-%COMP%]     #sidenav-sub-header{height:45px;position:fixed;bottom:0;left:0;width:400px}.nb-theme-obsrio   [_nghost-%COMP%]     .obs-icons svg{max-width:16px!important;margin-left:0;padding:0;top:-6px;position:relative}.nb-theme-obsrio   [_nghost-%COMP%]     #surface1 path{fill:#6db9d0!important}.nb-theme-obsrio   [_nghost-%COMP%]     #sidenav{box-shadow:0 0 20px rgba(0,0,0,.3)}.nb-theme-obsrio   [_nghost-%COMP%]    {height:100%!important}.nb-theme-obsrio   [_nghost-%COMP%]     .info-container, .nb-theme-obsrio   [_nghost-%COMP%]     nb-user.size-small.shape-round{max-width:250px}.nb-theme-obsrio   [_nghost-%COMP%]     .icon-info{background-image:url(/plataforma/assets/img/icons/marker.png);background-size:contain;background-repeat:no-repeat;width:20px;height:20px;float:left;margin-right:9px}.nb-theme-obsrio   [_nghost-%COMP%]     .mat-drawer-inner-container{width:100%;overflow:hidden;-webkit-overflow-scrolling:touch}.nb-theme-obsrio   [_nghost-%COMP%]     mat-drawer.mat-drawer.ng-trigger.ng-trigger-transform.mat-drawer-over.mat-drawer-opened.ng-star-inserted{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:visible;top:60px}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:#caf9fa;border:3px solid #4f4f4f;border-radius:50%;height:60px;width:60px;padding:0}.nb-theme-obsrio   [_nghost-%COMP%]   #md-fab-layers[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px hsla(0,0%,100%,.4);transition:all .2s ease-out}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{height:30px;width:30px;color:#3b3333}.nb-theme-obsrio   [_nghost-%COMP%]   .openConv[_ngcontent-%COMP%]{transform:rotate(-180deg)}.nb-theme-obsrio   [_nghost-%COMP%]   .closeConv[_ngcontent-%COMP%]{transform:rotate(0deg)}.nb-theme-obsrio   [_nghost-%COMP%]     .sidenav-container{height:100%;width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar{width:8px;height:8px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-button{width:0;height:0}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb{background:#aceaf0;border:0 #fff;border-radius:16px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:#91d5e2}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-thumb:active{background:#4f94b2}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track{background:#e4fcfb;border:0 #fff;border-radius:58px}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track:hover{background:#caf9fa}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-track:active{background:#aceaf0}.nb-theme-obsrio   [_nghost-%COMP%]     ::-webkit-scrollbar-corner{background:transparent}.nb-theme-obsrio   [_nghost-%COMP%]     nb-accordion-item-body .item-body, .nb-theme-obsrio   [_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .list-ctn[_ngcontent-%COMP%]{min-height:50px;background:#fff;border-radius:4px;overflow:hidden;display:block}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{margin:0 auto 2rem;border-radius:0;height:100vh;max-height:100vh;background-image:url(/plataforma/assets/img/bgrio-colored-light.webp);overflow:hidden;background-size:cover}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-flip-card[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:16px;margin:0;box-shadow:none;height:100vh}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{height:10vh}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{overflow:auto;border-radius:0}.nb-theme-obsrio   [_nghost-%COMP%]   .item-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   .flip-button[_ngcontent-%COMP%]{margin-bottom:0!important}@media (min-width:576px){.nb-theme-obsrio   [_nghost-%COMP%]   #lottie-map[_ngcontent-%COMP%]{top:-10%;position:relative;height:80%}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{transition:width .8s;width:400px;background-color:#fff;top:0}.nb-theme-obsrio   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{right:0}.nb-theme-obsrio   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{top:auto!important;bottom:20px!important;position:fixed!important;z-index:1}}.nb-theme-obsrio   [_nghost-%COMP%]   .category-user[_ngcontent-%COMP%]     .user-name{font-weight:700;color:#669493;text-transform:uppercase}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]{font-size:.85em;color:#2d4b4d}.nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%], .nb-theme-obsrio   [_nghost-%COMP%]   .layer-user[_ngcontent-%COMP%]     .user-name{font-weight:700;text-transform:capitalize}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]{overflow:auto;height:100%}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{padding:.8em .2em .8em 2.4em!important}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   .layer-front-card[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:.3em 1em .3em 0!important}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-list-item[_ngcontent-%COMP%]{border-color:#e4fcfb}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-acordeon[_ngcontent-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{border-width:0;padding:1em 1em 1em 3em!important}.nb-theme-obsrio   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav[_ngcontent-%COMP%]{width:90vw}.nb-theme-obsrio   [_nghost-%COMP%]   #sidenav-sub-header[_ngcontent-%COMP%]{height:45px;position:fixed;bottom:0;left:0;width:90vw}.nb-theme-obsrio   [_nghost-%COMP%]     .user-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]   #layer-sidenav[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;max-height:90vh;margin:0 auto 2rem}.nb-theme-obsrio   [_nghost-%COMP%]   #menu_fab[_ngcontent-%COMP%]{background-color:rgba(133,237,165,.4);border:3px solid #4f4f4f;border-radius:50%;height:4em;width:4em;padding:0}.nb-theme-obsrio   [_nghost-%COMP%]   .stick-fab-center-bottom[_ngcontent-%COMP%]{bottom:3em!important;position:fixed!important;z-index:4}.nb-theme-obsrio   [_nghost-%COMP%]   #close_sidenav[_ngcontent-%COMP%]{z-index:2;left:0}.nb-theme-obsrio   [_nghost-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.nb-theme-obsrio   [_nghost-%COMP%]     .mat-drawer{max-width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:12px}.nb-theme-obsrio   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}}"],data:{animation:[Object(hn.n)("rotatedState",[Object(hn.k)("default",Object(hn.l)({transform:"rotate(0)"})),Object(hn.k)("rotated",Object(hn.l)({transform:"rotate(-180deg)"})),Object(hn.m)("rotated => default",Object(hn.e)("300ms ease-out")),Object(hn.m)("default => rotated",Object(hn.e)("300ms ease-in"))])]}}),t}(),Ya=[{path:"",component:un,children:[{path:"",component:Xa,pathMatch:"full"},{path:"estaciones",loadChildren:function(){return n.e(12).then(n.bind(null,"7ckB")).then((function(t){return t.StationModule}))},data:{preload:!1,delay:1e4},canActivate:[n("oEjw").a]},{path:"error",loadChildren:function(){return n.e(11).then(n.bind(null,"yd2K")).then((function(t){return t.MiscModule}))},data:{preload:!1,delay:1e4}}]}],qa=function(){function t(){}return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.g.forChild(Ya)],o.g]}),t}(),Ja=n("vTDv"),Qa=n("AytR"),ts=n("m3o8"),es=n("RS3s"),ns=n("O2JJ"),is=n("koVi"),rs=n("0+2H"),os=n("s8wU"),as=n("z5n+"),ss=n("32ew"),cs=n("w4fl"),ls=n("ZAI4"),us=n("DRog"),hs=n("LUob"),ds=n("WUHe"),ps=n("0EQZ"),fs=n("7+OI"),gs=n("2Vo4"),ms=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i){var r;return Object(B.a)(this,n),(r=e.call(this)).getChildren=t,r.options=i,r.options&&(r.trackBy=r.options.trackBy),r}return Object(N.a)(n,[{key:"expandAll",value:function(){var t,e=this;this.expansionModel.clear();var n=this.dataNodes.reduce((function(t,n){return[].concat(Object(Lo.a)(t),Object(Lo.a)(e.getDescendants(n)),[n])}),[]);(t=this.expansionModel).select.apply(t,Object(Lo.a)(n.map((function(t){return e._trackByValue(t)}))))}},{key:"getDescendants",value:function(t){var e=[];return this._getDescendants(e,t),e.splice(1)}},{key:"_getDescendants",value:function(t,e){var n=this;t.push(e);var i=this.getChildren(e);Array.isArray(i)?i.forEach((function(e){return n._getDescendants(t,e)})):Object(fs.a)(i)&&i.pipe(Object(Yt.a)(1),Object(Ut.a)(Boolean)).subscribe((function(e){var i,r=Object(Bt.a)(e);try{for(r.s();!(i=r.n()).done;)n._getDescendants(t,i.value)}catch(o){r.e(o)}finally{r.f()}}))}}]),n}(function(){function t(){Object(B.a)(this,t),this.expansionModel=new ps.c(!0)}return Object(N.a)(t,[{key:"toggle",value:function(t){this.expansionModel.toggle(this._trackByValue(t))}},{key:"expand",value:function(t){this.expansionModel.select(this._trackByValue(t))}},{key:"collapse",value:function(t){this.expansionModel.deselect(this._trackByValue(t))}},{key:"isExpanded",value:function(t){return this.expansionModel.isSelected(this._trackByValue(t))}},{key:"toggleDescendants",value:function(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}},{key:"collapseAll",value:function(){this.expansionModel.clear()}},{key:"expandDescendants",value:function(t){var e,n=this,i=[t];i.push.apply(i,Object(Lo.a)(this.getDescendants(t))),(e=this.expansionModel).select.apply(e,Object(Lo.a)(i.map((function(t){return n._trackByValue(t)}))))}},{key:"collapseDescendants",value:function(t){var e,n=this,i=[t];i.push.apply(i,Object(Lo.a)(this.getDescendants(t))),(e=this.expansionModel).deselect.apply(e,Object(Lo.a)(i.map((function(t){return n._trackByValue(t)}))))}},{key:"_trackByValue",value:function(t){return this.trackBy?this.trackBy(t):t}}]),t}()),vs=new f.InjectionToken("CDK_TREE_NODE_OUTLET_NODE"),ys=function(){var t=function t(e,n){Object(B.a)(this,t),this.viewContainer=e,this._node=n};return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ViewContainerRef),f["\u0275\u0275directiveInject"](vs,8))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkTreeNodeOutlet",""]]}),t}(),bs=function t(e){Object(B.a)(this,t),this.$implicit=e},_s=function(){var t=function t(e){Object(B.a)(this,t),this.template=e};return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.TemplateRef))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),t}(),Cs=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this._differs=e,this._changeDetectorRef=n,this._onDestroy=new D.a,this._levels=new Map,this.viewChange=new gs.a({start:0,end:Number.MAX_VALUE})}return Object(N.a)(t,[{key:"ngOnInit",value:function(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var t=this._nodeDefs.filter((function(t){return!t.when}));this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var t,e=this;Object(ps.g)(this._dataSource)?t=this._dataSource.connect(this):Object(fs.a)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=Object(u.a)(this._dataSource)),t&&(this._dataSubscription=t.pipe(Object(Xt.a)(this._onDestroy)).subscribe((function(t){return e.renderNodeChanges(t)})))}},{key:"renderNodeChanges",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,r=arguments.length>3?arguments[3]:void 0,o=n.diff(t);o&&(o.forEachOperation((function(n,o,a){if(null==n.previousIndex)e.insertNode(t[a],a,i,r);else if(null==a)i.remove(o),e._levels.delete(n.item);else{var s=i.get(o);i.move(s,a)}})),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(t,e){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find((function(n){return n.when&&n.when(e,t)}))||this._defaultNodeDef}},{key:"insertNode",value:function(t,e,n,i){var r=this._getNodeDef(t,e),o=new bs(t);o.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==i&&this._levels.has(i)?this._levels.get(i)+1:0,this._levels.set(t,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,o,e),xs.mostRecentTreeNode&&(xs.mostRecentTreeNode.data=t)}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){this._dataSource!==t&&this._switchDataSource(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.IterableDiffers),f["\u0275\u0275directiveInject"](f.ChangeDetectorRef))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["cdk-tree"]],contentQueries:function(t,e,n){var i;1&t&&f["\u0275\u0275contentQuery"](n,_s,!0),2&t&&f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e._nodeDefs=i)},viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](ys,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,e){1&t&&f["\u0275\u0275elementContainer"](0,0)},directives:[ys],encapsulation:2}),t}(),xs=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this._elementRef=e,this._tree=n,this._destroyed=new D.a,this._dataChanges=new D.a,this.role="treeitem",t.mostRecentTreeNode=this}return Object(N.a)(t,[{key:"ngOnDestroy",value:function(){t.mostRecentTreeNode===this&&(t.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){this.role="treeitem"}},{key:"data",get:function(){return this._data},set:function(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](Cs))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(t,e){2&t&&f["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("aria-level",e.level+1)("role",e.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),t.mostRecentTreeNode=null,t}(),ws=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i,r){var o;return Object(B.a)(this,n),(o=e.call(this,t,i))._elementRef=t,o._tree=i,o._differs=r,o}return Object(N.a)(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);var e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):Object(fs.a)(e)&&e.pipe(Object(Xt.a)(this._destroyed)).subscribe((function(e){return t.updateChildrenNodes(e)})),this.nodeOutlet.changes.pipe(Object(Xt.a)(this._destroyed)).subscribe((function(){return t.updateChildrenNodes()}))}},{key:"ngOnDestroy",value:function(){this._clear(),Object(hs.a)(Object(ds.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"updateChildrenNodes",value:function(t){var e=this._getNodeOutlet();t&&(this._children=t),e&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,e.viewContainer,this._data):this._dataDiffer.diff([])}},{key:"_clear",value:function(){var t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}},{key:"_getNodeOutlet",value:function(){var t=this,e=this.nodeOutlet;return e&&e.find((function(e){return!e._node||e._node===t}))}}]),n}(xs);return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](Cs),f["\u0275\u0275directiveInject"](f.IterableDiffers))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,e,n){var i;1&t&&f["\u0275\u0275contentQuery"](n,ys,!0),2&t&&f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(e.nodeOutlet=i)},hostAttrs:[1,"cdk-tree-node","cdk-nested-tree-node"],hostVars:2,hostBindings:function(t,e){2&t&&f["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("role",e.role)},exportAs:["cdkNestedTreeNode"],features:[f["\u0275\u0275ProvidersFeature"]([{provide:xs,useExisting:t},{provide:vs,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Is=/([A-Za-z%]+)$/,As=function(){var t=function(){function t(e,n,i,r,o){var a=this;Object(B.a)(this,t),this._treeNode=e,this._tree=n,this._element=r,this._dir=o,this._destroyed=new D.a,this.indentUnits="px",this._indent=40,this._setPadding(),o&&o.change.pipe(Object(Xt.a)(this._destroyed)).subscribe((function(){return a._setPadding(!0)})),e._dataChanges.subscribe((function(){return a._setPadding()}))}return Object(N.a)(t,[{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_paddingIndent",value:function(){var t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,e=null==this._level?t:this._level;return"number"==typeof e?"".concat(e*this._indent).concat(this.indentUnits):null}},{key:"_setPadding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._paddingIndent();if(e!==this._currentPadding||t){var n=this._element.nativeElement,i=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",r="paddingLeft"===i?"paddingRight":"paddingLeft";n.style[i]=e||"",n.style[r]="",this._currentPadding=e}}},{key:"_setLevelInput",value:function(t){this._level=Object(Ro.e)(t,null),this._setPadding()}},{key:"_setIndentInput",value:function(t){var e=t,n="px";if("string"==typeof t){var i=t.split(Is);e=i[0],n=i[1]||n}this.indentUnits=n,this._indent=Object(Ro.e)(e),this._setPadding()}},{key:"level",get:function(){return this._level},set:function(t){this._setLevelInput(t)}},{key:"indent",get:function(){return this._indent},set:function(t){this._setIndentInput(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](xs),f["\u0275\u0275directiveInject"](Cs),f["\u0275\u0275directiveInject"](f.Renderer2),f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](Go.c,8))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),t}(),Ps=function(){var t=function(){function t(e,n){Object(B.a)(this,t),this._tree=e,this._treeNode=n,this._recursive=!1}return Object(N.a)(t,[{key:"_toggle",value:function(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}},{key:"recursive",get:function(){return this._recursive},set:function(t){this._recursive=Object(Ro.b)(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](Cs),f["\u0275\u0275directiveInject"](xs))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,e){1&t&&f["\u0275\u0275listener"]("click",(function(t){return e._toggle(t)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),t}(),Os=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)}}),t}(),Ms=Object(wi.g)(Object(wi.f)(xs)),Ss=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i,r){var o;return Object(B.a)(this,n),(o=e.call(this,t,i))._elementRef=t,o._tree=i,o.role="treeitem",o.tabIndex=Number(r)||0,o}return n}(Ms);return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](Cs),f["\u0275\u0275injectAttribute"]("tabindex"))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:3,hostBindings:function(t,e){2&t&&f["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("aria-level",e.level+1)("role",e.role)},inputs:{disabled:"disabled",tabIndex:"tabIndex",role:"role"},exportAs:["matTreeNode"],features:[f["\u0275\u0275ProvidersFeature"]([{provide:xs,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),ks=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return n}(_s);return t.\u0275fac=function(e){return Es(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[f["\u0275\u0275ProvidersFeature"]([{provide:_s,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Es=f["\u0275\u0275getInheritedFactory"](ks),Ls=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(t,i,r,o){var a;return Object(B.a)(this,n),(a=e.call(this,t,i,r))._elementRef=t,a._tree=i,a._differs=r,a._disabled=!1,a.tabIndex=Number(o)||0,a}return Object(N.a)(n,[{key:"ngAfterContentInit",value:function(){Object(hs.a)(Object(ds.a)(n.prototype),"ngAfterContentInit",this).call(this)}},{key:"ngOnDestroy",value:function(){Object(hs.a)(Object(ds.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(Ro.b)(t)}},{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(t){this._tabIndex=null!=t?t:0}}]),n}(ws);return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ElementRef),f["\u0275\u0275directiveInject"](Cs),f["\u0275\u0275directiveInject"](f.IterableDiffers),f["\u0275\u0275injectAttribute"]("tabindex"))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],hostVars:2,hostBindings:function(t,e){2&t&&f["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("role",e.role)},inputs:{tabIndex:"tabIndex",disabled:"disabled",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[f["\u0275\u0275ProvidersFeature"]([{provide:ws,useExisting:t},{provide:xs,useExisting:t},{provide:vs,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Ts=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"level",get:function(){return this._level},set:function(t){this._setLevelInput(t)}},{key:"indent",get:function(){return this._indent},set:function(t){this._setIndentInput(t)}}]),n}(As);return t.\u0275fac=function(e){return Rs(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[f["\u0275\u0275ProvidersFeature"]([{provide:As,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Rs=f["\u0275\u0275getInheritedFactory"](Ts),Ns=function(){var t=function t(e,n){Object(B.a)(this,t),this.viewContainer=e,this._node=n};return t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](f.ViewContainerRef),f["\u0275\u0275directiveInject"](vs,8))},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","matTreeNodeOutlet",""]],features:[f["\u0275\u0275ProvidersFeature"]([{provide:ys,useExisting:t}])]}),t}(),Bs=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return n}(Cs);return t.\u0275fac=function(e){return js(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-tree"]],viewQuery:function(t,e){var n;1&t&&f["\u0275\u0275staticViewQuery"](Ns,!0),2&t&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(e._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[f["\u0275\u0275ProvidersFeature"]([{provide:Cs,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,e){1&t&&f["\u0275\u0275elementContainer"](0,0)},directives:[Ns],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),t}(),js=f["\u0275\u0275getInheritedFactory"](Bs),Ds=function(){var t=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"recursive",get:function(){return this._recursive},set:function(t){this._recursive=Object(Ro.b)(t)}}]),n}(Ps);return t.\u0275fac=function(e){return Fs(e||t)},t.\u0275dir=f["\u0275\u0275defineDirective"]({type:t,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[f["\u0275\u0275ProvidersFeature"]([{provide:Ps,useExisting:t}]),f["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Fs=f["\u0275\u0275getInheritedFactory"](Ds),zs=function(){var t=function t(){Object(B.a)(this,t)};return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[Os,wi.a],wi.a]}),t}(),Vs=function(t){Object(L.a)(n,t);var e=Object(T.a)(n);function n(){var t;return Object(B.a)(this,n),(t=e.apply(this,arguments))._data=new gs.a([]),t}return Object(N.a)(n,[{key:"connect",value:function(t){var e=this;return Gt.a.apply(void 0,[t.viewChange,this._data]).pipe(Object(I.a)((function(){return e.data})))}},{key:"disconnect",value:function(){}},{key:"data",get:function(){return this._data.value},set:function(t){this._data.next(t)}}]),n}(ps.b),Gs=n("bTqV"),Zs=n("NFeN");function Ws(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"mat-tree-node",3),f["\u0275\u0275elementStart"](1,"li",4),f["\u0275\u0275element"](2,"button",5),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Hs(t,e){if(1&t&&(f["\u0275\u0275elementStart"](0,"mat-nested-tree-node"),f["\u0275\u0275elementStart"](1,"li"),f["\u0275\u0275elementStart"](2,"div",4),f["\u0275\u0275elementStart"](3,"button",6),f["\u0275\u0275elementStart"](4,"mat-icon",7),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"ul"),f["\u0275\u0275elementContainer"](8,8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](3),f["\u0275\u0275attribute"]("aria-label","Toggle "+n.name),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",i.treeControl.isExpanded(n)?"expand_more":"chevron_right"," "),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",n.name," "),f["\u0275\u0275advance"](1),f["\u0275\u0275classProp"]("example-tree-invisible",!i.treeControl.isExpanded(n))}}var Us=[{name:"Fruit",children:[{name:"Apple"},{name:"Banana"},{name:"Fruit loops"}]},{name:"Vegetables",children:[{name:"Green",children:[{name:"Broccoli"},{name:"Brussels sprouts"}]},{name:"Orange",children:[{name:"Pumpkins"},{name:"Carrots"}]}]}],$s=function(){function t(){this.treeControl=new ms((function(t){return t.children})),this.dataSource=new Vs,this.hasChild=function(t,e){return!!e.children&&e.children.length>0},this.dataSource.data=Us}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-layers-list-tree"]],decls:3,vars:3,consts:[[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle",""],[1,"mat-tree-node"],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"mat-tree",0),f["\u0275\u0275template"](1,Ws,4,1,"mat-tree-node",1),f["\u0275\u0275template"](2,Hs,9,5,"mat-nested-tree-node",2),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275property"]("dataSource",e.dataSource)("treeControl",e.treeControl),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("matTreeNodeDefWhen",e.hasChild))},directives:[Bs,ks,Ss,Ds,Gs.b,Ls,Zs.a,Ns],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}"]}),t}(),Ks=n("pk6O"),Xs=n("uPX2"),Ys=n("x/J1"),qs=n("KWzY"),Js=n("SXPc"),Qs=n("KCPn"),tc=n("7acK"),ec=n("BiDX"),nc=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.getDate=function(){return(new Date).toISOString()},t.prototype.getMapImg=function(){this.gl_map.getCanvas().toDataURL("image/PNG")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-obs-map"]],inputs:{gl_map:"gl_map"},decls:19,vars:2,consts:[[1,"d-flex","justify-content-between","mb-5"],["src","assets/img/logo.jpg","width","150","alt","OBS",1,"d-flex","mt-2","ml-5","align-self-strech"],["src","assets/img/LogoUninorte.png","width","150","alt","uninorte",1,"d-flex","mt-1","mr-5","align-self-center"],[1,"container","mt-5"],[1,"d-flex","flex-column","justify-content-center"],[1,"text-center","align-self-center","mb-2"],[1,"text-center","align-self-center","mb-4"],[1,"d-flex","justify-content-center","mb-5"],[1,"d-flex","justify-content-center","shadow-sm"],[1,"align-self-center"],["width","200","alt","ubicaci\xf3n",3,"src"],[3,"innerHTML"]],template:function(t,e){1&t&&(f["\u0275\u0275elementStart"](0,"header"),f["\u0275\u0275elementStart"](1,"div",0),f["\u0275\u0275element"](2,"img",1),f["\u0275\u0275element"](3,"img",2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"main",3),f["\u0275\u0275elementStart"](5,"div",4),f["\u0275\u0275elementStart"](6,"h2",5),f["\u0275\u0275text"](7," Observatorio del R\xedo Magdalena"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"h4",5),f["\u0275\u0275text"](9," Universidad del norte"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"h6",6),f["\u0275\u0275text"](11,'Fecha del reporte: <?php echo date("Y-m-d, H:m:s A");?> '),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"div",7),f["\u0275\u0275elementStart"](13,"div",8),f["\u0275\u0275elementStart"](14,"div",9),f["\u0275\u0275element"](15,"img",10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"footer"),f["\u0275\u0275text"](17," Observatorio del R\xedo Magdalena - Universidad del Norte Copyright \xa9 "),f["\u0275\u0275element"](18,"p",11),f["\u0275\u0275elementEnd"]()),2&t&&(f["\u0275\u0275advance"](15),f["\u0275\u0275property"]("src",e.getMapImg(),f["\u0275\u0275sanitizeUrl"]),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("innerHTML",e.getDate(),f["\u0275\u0275sanitizeHtml"]))},styles:["@page{margin:0 0}body[_ngcontent-%COMP%]{margin:2cm}header[_ngcontent-%COMP%]{top:0}footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%]{position:fixed;left:0;right:0;height:2cm;background-color:#6db9d0;color:#fff;text-align:center;line-height:1.5cm}footer[_ngcontent-%COMP%]{bottom:0}"]}),t}(),ic=n("s8ed"),rc=n("9MgD"),oc=n("9OK8"),ac=n("s3aq"),sc=n("ubjK"),cc=[pn.g,ua,ua,us.b,zs,Zs.b,Gs.c],lc=function(){function t(t){this.iconLibraries=t,this.iconLibraries.registerSvgPack("obs-icons",{"2d":'<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="225.000000pt" height="225.000000pt" viewBox="0 0 225.000000 225.000000"\n      preserveAspectRatio="xMidYMid meet">\n     <metadata>\n     Created by potrace 1.16, written by Peter Selinger 2001-2019\n     </metadata>\n     <g transform="translate(0.000000,225.000000) scale(0.100000,-0.100000)"\n     fill="#000000" stroke="none">\n     <path d="M382 1805 c-35 -8 -83 -23 -105 -35 -58 -28 -152 -113 -183 -165 -23\n     -40 -56 -161 -48 -176 2 -4 50 -10 106 -13 57 -4 115 -9 131 -12 23 -5 27 -2\n     27 18 0 70 44 144 103 175 41 21 124 20 165 -1 50 -26 92 -99 92 -160 0 -88\n     -32 -138 -171 -266 -225 -210 -310 -294 -372 -370 -60 -75 -109 -166 -120\n     -227 l-7 -33 470 0 470 0 0 105 0 105 -266 2 -267 3 34 34 c19 18 98 87 175\n     152 170 142 234 211 280 304 84 171 67 333 -47 447 -106 106 -291 151 -467\n     113z"/>\n     <path d="M1080 1175 l0 -637 313 5 c259 3 323 7 377 22 107 29 164 61 223 125\n     105 114 147 245 147 464 0 86 -6 168 -15 211 -46 215 -212 390 -405 426 -30 5\n     -187 12 -347 16 l-293 6 0 -638z m565 416 c63 -29 150 -122 175 -187 73 -196\n     34 -517 -73 -598 -60 -46 -135 -66 -247 -66 l-100 0 0 441 0 442 102 -7 c65\n     -5 118 -14 143 -25z"/>\n     </g>\n     </svg>',"3d":'<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="225.000000pt" height="225.000000pt" viewBox="0 0 225.000000 225.000000"\n      preserveAspectRatio="xMidYMid meet">\n     <metadata>\n     Created by potrace 1.16, written by Peter Selinger 2001-2019\n     </metadata>\n     <g transform="translate(0.000000,225.000000) scale(0.100000,-0.100000)"\n     fill="#000000" stroke="none" class="obs-icon">\n     <path d="M1242 2073 l178 -178 58 58 c32 31 64 57 73 57 29 0 200 -120 269\n     -189 80 -81 167 -208 210 -310 32 -74 70 -218 70 -263 0 -28 0 -28 71 -28 l72\n     0 -7 57 c-50 426 -376 805 -797 927 -90 26 -230 46 -319 46 l-55 0 177 -177z"/>\n     <path d="M702 1486 c-82 -27 -142 -94 -142 -160 0 -25 2 -26 60 -26 57 0 60 1\n     60 24 0 40 52 76 110 76 63 0 99 -29 106 -85 12 -86 -39 -135 -138 -135 l-58\n     0 0 -44 0 -43 65 -6 c108 -10 145 -43 145 -128 0 -33 -7 -48 -34 -75 -29 -29\n     -41 -34 -80 -34 -25 0 -57 5 -71 12 -27 12 -55 54 -55 83 0 12 -13 15 -61 15\n     l-62 0 6 -41 c26 -194 375 -228 458 -44 40 86 11 196 -61 237 l-38 22 33 23\n     c48 33 79 103 71 160 -9 70 -47 127 -102 153 -57 28 -153 35 -212 16z"/>\n     <path d="M1130 1125 l0 -377 154 3 c152 4 153 4 222 39 130 66 179 168 172\n     356 -3 91 -8 118 -30 165 -32 71 -86 124 -157 158 -51 24 -69 26 -208 29\n     l-153 4 0 -377z m318 247 c22 -11 49 -38 67 -67 29 -47 30 -51 30 -179 0 -121\n     -2 -134 -25 -174 -38 -66 -93 -94 -188 -96 l-77 -1 -3 260 c-1 143 0 266 3\n     274 8 20 144 9 193 -17z"/>\n     <path d="M10 1001 c0 -41 25 -158 51 -233 114 -342 404 -621 749 -721 91 -27\n     230 -47 320 -47 l55 0 -175 175 c-96 96 -177 175 -180 175 -3 0 -23 -17 -45\n     -38 -87 -80 -77 -76 -132 -49 -176 90 -351 282 -434 477 -35 84 -69 209 -69\n     257 l0 33 -70 0 -70 0 0 -29z"/>\n     </g>\n     </svg>',lines:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n      <g id="surface1" class="obs-icon">\n      <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 21.480469 0.320312 C 20.980469 0.628906 20.710938 1.132812 20.710938 1.773438 L 20.710938 2.316406 L 19.441406 3.554688 C 18.179688 4.792969 18.160156 4.804688 17.667969 4.804688 C 17.359375 4.804688 17.007812 4.890625 16.773438 5.019531 L 16.386719 5.230469 L 13.71875 4.335938 C 11.144531 3.46875 11.039062 3.425781 10.867188 3.085938 C 10.261719 1.898438 9.054688 1.578125 8.167969 2.359375 C 7.238281 3.171875 7.453125 4.570312 8.582031 5.113281 C 8.957031 5.304688 9.074219 5.421875 9.160156 5.742188 C 9.214844 5.957031 9.511719 6.949219 9.820312 7.953125 C 10.132812 8.945312 10.515625 10.226562 10.6875 10.78125 C 10.859375 11.339844 11.1875 12.417969 11.414062 13.183594 C 11.765625 14.328125 11.820312 14.59375 11.699219 14.710938 C 11.582031 14.828125 11.1875 14.808594 9.4375 14.617188 L 7.3125 14.378906 L 6.832031 13.878906 C 6.054688 13.066406 5.21875 12.960938 4.429688 13.578125 C 3.886719 14.007812 3.671875 14.957031 4.003906 15.578125 C 4.152344 15.875 4.121094 15.949219 2.957031 18.265625 C 2.058594 20.070312 1.707031 20.667969 1.546875 20.691406 C 0.703125 20.820312 0.105469 21.5 0.105469 22.3125 C 0.105469 23.253906 0.820312 23.96875 1.761719 23.96875 C 2.980469 23.96875 3.746094 22.78125 3.265625 21.628906 C 3.128906 21.289062 3.140625 21.246094 4.292969 18.929688 C 5.414062 16.644531 5.464844 16.570312 5.808594 16.503906 C 6.011719 16.460938 6.351562 16.292969 6.566406 16.121094 C 6.789062 15.941406 7.003906 15.800781 7.035156 15.800781 C 7.066406 15.800781 8.039062 15.917969 9.179688 16.066406 C 10.324219 16.21875 11.285156 16.335938 11.316406 16.335938 C 11.347656 16.335938 11.457031 16.472656 11.5625 16.644531 C 11.660156 16.816406 11.914062 17.058594 12.128906 17.1875 C 12.652344 17.519531 13.644531 17.457031 14.050781 17.070312 C 14.445312 16.699219 14.625 16.300781 14.625 15.78125 C 14.625 15.128906 14.316406 14.625 13.75 14.328125 C 13.21875 14.050781 13.367188 14.445312 11.902344 9.660156 C 11.457031 8.1875 10.941406 6.542969 10.773438 5.988281 C 10.589844 5.445312 10.484375 4.964844 10.515625 4.933594 C 10.546875 4.890625 11.796875 5.273438 13.292969 5.765625 C 15.652344 6.542969 16.015625 6.695312 16.066406 6.90625 C 16.164062 7.324219 16.75 7.890625 17.199219 8.007812 C 18.332031 8.316406 19.324219 7.527344 19.324219 6.332031 C 19.324219 5.820312 19.324219 5.820312 20.539062 4.601562 L 21.769531 3.382812 L 22.355469 3.375 C 24 3.351562 24.640625 1.292969 23.285156 0.363281 C 22.792969 0.03125 21.992188 0.0117188 21.480469 0.320312 Z M 21.480469 0.320312 "/>\n      </g>\n      </svg>',polygons:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n     <g id="surface1">\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 8.742188 0.0273438 C 8.203125 0.15625 8.042969 0.226562 7.707031 0.5 C 7.011719 1.050781 6.8125 2.199219 7.269531 2.976562 L 7.355469 3.121094 L 5.390625 6.070312 L 3.421875 9.023438 L 3.039062 9.027344 C 2.820312 9.027344 2.5625 9.054688 2.460938 9.089844 C 1.578125 9.367188 1.027344 10.09375 1.027344 10.976562 C 1.027344 11.675781 1.328125 12.257812 1.898438 12.65625 L 2.089844 12.789062 L 1.757812 16.429688 L 1.429688 20.066406 L 1.128906 20.222656 C -0.109375 20.855469 -0.359375 22.492188 0.632812 23.433594 C 1.570312 24.320312 3.121094 24.085938 3.730469 22.964844 L 3.859375 22.734375 L 8.503906 22.742188 L 13.148438 22.757812 L 13.261719 22.96875 C 13.597656 23.578125 14.28125 23.976562 15 23.976562 C 15.859375 23.976562 16.570312 23.476562 16.875 22.648438 C 17.042969 22.203125 16.996094 21.542969 16.773438 21.109375 C 16.738281 21.039062 16.734375 20.984375 16.765625 20.945312 C 16.796875 20.910156 17.820312 19.585938 19.054688 18 C 20.289062 16.414062 21.332031 15.074219 21.382812 15.019531 C 21.464844 14.929688 21.496094 14.925781 21.734375 14.960938 C 23.015625 15.164062 24.164062 13.992188 23.957031 12.707031 C 23.792969 11.703125 22.976562 11.015625 21.9375 11.015625 L 21.632812 11.015625 L 20.125 8.59375 L 18.613281 6.171875 L 18.726562 5.980469 C 19.289062 5.007812 18.886719 3.703125 17.875 3.226562 C 17.148438 2.882812 16.269531 2.984375 15.71875 3.488281 L 15.53125 3.65625 L 13.332031 2.832031 C 12.125 2.375 11.101562 1.988281 11.058594 1.96875 C 11.007812 1.941406 10.972656 1.84375 10.960938 1.695312 C 10.894531 1.023438 10.296875 0.332031 9.585938 0.109375 C 9.375 0.0429688 8.882812 -0.00390625 8.742188 0.0273438 Z M 12.757812 4.203125 C 13.976562 4.660156 14.980469 5.035156 14.992188 5.039062 C 14.996094 5.042969 15.023438 5.171875 15.046875 5.320312 C 15.207031 6.296875 16.035156 6.984375 17.0625 6.984375 L 17.367188 6.984375 L 18.875 9.40625 L 20.386719 11.828125 L 20.273438 12.019531 C 20.117188 12.289062 20.015625 12.675781 20.015625 12.984375 C 20.015625 13.257812 20.128906 13.773438 20.207031 13.847656 C 20.230469 13.875 20.25 13.925781 20.25 13.96875 C 20.25 14.007812 19.199219 15.390625 17.914062 17.039062 L 15.578125 20.039062 L 15.179688 20.019531 C 14.359375 19.988281 13.691406 20.328125 13.296875 20.984375 L 13.148438 21.234375 L 3.863281 21.234375 L 3.660156 20.929688 C 3.539062 20.742188 3.355469 20.546875 3.195312 20.429688 C 3.050781 20.320312 2.925781 20.226562 2.921875 20.226562 C 2.914062 20.226562 3.054688 18.601562 3.238281 16.617188 C 3.417969 14.628906 3.5625 12.984375 3.5625 12.957031 C 3.5625 12.929688 3.675781 12.863281 3.816406 12.800781 C 4.84375 12.375 5.273438 11.101562 4.742188 10.050781 L 4.65625 9.867188 L 6.628906 6.914062 L 8.601562 3.964844 L 8.929688 3.976562 C 9.421875 3.992188 10.070312 3.765625 10.332031 3.472656 C 10.382812 3.417969 10.449219 3.375 10.480469 3.375 C 10.519531 3.375 11.546875 3.75 12.757812 4.203125 Z M 12.757812 4.203125 "/>\n     </g>\n     </svg>',raster:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24pt" height="24pt" viewBox="0 0 24 24" version="1.1">\n     <g id="surface1" class="obs-icon">\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.304688 1.679688 C 10.714844 2.230469 11.113281 3.238281 11.914062 3.238281 C 12.707031 3.238281 13.09375 2.398438 12.589844 1.753906 C 12.277344 1.355469 11.6875 1.332031 11.304688 1.679688 Z M 11.304688 1.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.515625 3.480469 C 8.929688 3.71875 8.808594 4.632812 9.3125 5.027344 C 9.730469 5.363281 10.140625 5.339844 10.5 4.980469 C 11.230469 4.261719 10.453125 3.097656 9.515625 3.480469 Z M 9.515625 3.480469 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.640625 3.445312 C 10.96875 3.695312 10.800781 4.597656 11.351562 5.027344 C 11.773438 5.363281 12.179688 5.339844 12.539062 4.980469 C 13.019531 4.511719 12.925781 3.828125 12.347656 3.539062 C 11.988281 3.347656 11.929688 3.335938 11.640625 3.445312 Z M 11.640625 3.445312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.308594 3.707031 C 12.925781 4.09375 12.886719 4.273438 13.09375 4.726562 C 13.285156 5.148438 13.824219 5.351562 14.269531 5.171875 C 14.605469 5.027344 14.878906 4.609375 14.878906 4.246094 C 14.878906 3.972656 14.21875 3.359375 13.921875 3.359375 C 13.777344 3.359375 13.5 3.515625 13.308594 3.707031 Z M 13.308594 3.707031 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.210938 5.710938 C 6.886719 6.121094 6.886719 6.480469 7.210938 6.886719 C 7.453125 7.199219 7.894531 7.296875 8.339844 7.128906 C 8.664062 6.996094 8.878906 6.382812 8.734375 5.976562 C 8.507812 5.328125 7.632812 5.171875 7.210938 5.710938 Z M 7.210938 5.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.238281 5.640625 C 8.902344 5.976562 8.929688 6.613281 9.277344 6.9375 C 9.863281 7.488281 10.800781 7.078125 10.800781 6.289062 C 10.800781 5.53125 9.769531 5.113281 9.238281 5.640625 Z M 9.238281 5.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.28125 5.640625 C 11.136719 5.785156 11.039062 6.035156 11.039062 6.300781 C 11.039062 6.851562 11.386719 7.199219 11.929688 7.199219 C 12.71875 7.199219 13.128906 6.191406 12.5625 5.664062 C 12.203125 5.328125 11.605469 5.316406 11.28125 5.640625 Z M 11.28125 5.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.210938 5.710938 C 13.066406 5.890625 12.960938 6.167969 12.960938 6.324219 C 12.960938 6.730469 13.464844 7.199219 13.921875 7.199219 C 14.375 7.199219 14.878906 6.730469 14.878906 6.324219 C 14.878906 5.820312 14.449219 5.398438 13.921875 5.398438 C 13.558594 5.398438 13.402344 5.472656 13.210938 5.710938 Z M 13.210938 5.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.265625 5.675781 C 14.722656 6.253906 15.132812 7.199219 15.910156 7.199219 C 16.453125 7.199219 16.800781 6.851562 16.800781 6.300781 C 16.800781 5.472656 15.828125 5.074219 15.265625 5.675781 Z M 15.265625 5.675781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.292969 7.753906 C 5.003906 8.125 4.992188 8.171875 5.171875 8.554688 C 5.542969 9.359375 6.71875 9.109375 6.71875 8.21875 C 6.71875 7.453125 5.773438 7.140625 5.292969 7.753906 Z M 5.292969 7.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.273438 7.703125 C 6.742188 8.460938 7.464844 9.359375 8.269531 8.941406 C 9.023438 8.554688 8.761719 7.535156 7.882812 7.464844 C 7.558594 7.441406 7.414062 7.488281 7.273438 7.703125 Z M 7.273438 7.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.324219 7.644531 C 8.929688 8.101562 9.058594 8.773438 9.613281 9 C 9.9375 9.132812 10.007812 9.132812 10.296875 8.914062 C 10.691406 8.617188 10.789062 8.003906 10.488281 7.667969 C 10.222656 7.378906 9.574219 7.367188 9.324219 7.644531 Z M 9.324219 7.644531 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.292969 7.753906 C 11.003906 8.125 10.992188 8.171875 11.171875 8.554688 C 11.542969 9.359375 12.71875 9.109375 12.71875 8.21875 C 12.71875 7.453125 11.773438 7.140625 11.292969 7.753906 Z M 11.292969 7.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.320312 7.679688 C 12.816406 8.183594 13.1875 9.035156 13.921875 9.035156 C 14.652344 9.035156 15.023438 8.183594 14.519531 7.679688 C 14.386719 7.546875 14.125 7.441406 13.921875 7.441406 C 13.714844 7.441406 13.453125 7.546875 13.320312 7.679688 Z M 13.320312 7.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.359375 7.679688 C 15.011719 8.027344 15.046875 8.566406 15.433594 8.867188 C 15.828125 9.179688 16.09375 9.179688 16.414062 8.902344 C 16.800781 8.59375 16.859375 8.148438 16.558594 7.765625 C 16.246094 7.367188 15.707031 7.332031 15.359375 7.679688 Z M 15.359375 7.679688 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.363281 7.644531 C 16.96875 8.101562 17.101562 8.773438 17.652344 9 C 17.976562 9.132812 18.046875 9.132812 18.335938 8.914062 C 18.730469 8.617188 18.828125 8.003906 18.527344 7.667969 C 18.265625 7.378906 17.617188 7.367188 17.363281 7.644531 Z M 17.363281 7.644531 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.433594 9.589844 C 3.132812 9.925781 3.226562 10.535156 3.625 10.835938 C 3.898438 11.039062 3.996094 11.050781 4.296875 10.933594 C 4.90625 10.679688 5.027344 10.09375 4.585938 9.5625 C 4.34375 9.289062 3.695312 9.300781 3.433594 9.589844 Z M 3.433594 9.589844 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.28125 9.683594 C 4.679688 10.453125 5.628906 11.398438 6.394531 10.800781 C 6.636719 10.609375 6.71875 10.429688 6.71875 10.152344 C 6.71875 9.359375 5.773438 9.058594 5.28125 9.683594 Z M 5.28125 9.683594 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.273438 9.625 C 6.972656 10.042969 7.03125 10.5 7.402344 10.800781 C 8.171875 11.398438 9.121094 10.453125 8.519531 9.683594 C 8.183594 9.265625 7.546875 9.226562 7.273438 9.625 Z M 7.273438 9.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.324219 9.5625 C 8.929688 10.019531 9.058594 10.691406 9.613281 10.921875 C 9.9375 11.050781 10.007812 11.050781 10.296875 10.835938 C 10.691406 10.535156 10.789062 9.925781 10.488281 9.589844 C 10.222656 9.300781 9.574219 9.289062 9.324219 9.5625 Z M 9.324219 9.5625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.292969 9.671875 C 11.148438 9.851562 11.039062 10.03125 11.039062 10.09375 C 11.039062 10.378906 11.351562 10.800781 11.664062 10.933594 C 11.964844 11.050781 12.058594 11.039062 12.335938 10.835938 C 12.730469 10.535156 12.828125 9.925781 12.527344 9.589844 C 12.214844 9.238281 11.59375 9.289062 11.292969 9.671875 Z M 11.292969 9.671875 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.320312 9.601562 C 12.816406 10.105469 13.1875 10.957031 13.921875 10.957031 C 14.652344 10.957031 15.023438 10.105469 14.519531 9.601562 C 14.386719 9.46875 14.125 9.359375 13.921875 9.359375 C 13.714844 9.359375 13.453125 9.46875 13.320312 9.601562 Z M 13.320312 9.601562 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.359375 9.601562 C 14.640625 10.320312 15.648438 11.484375 16.414062 10.824219 C 16.835938 10.476562 16.871094 10.019531 16.511719 9.671875 C 16.152344 9.300781 15.683594 9.277344 15.359375 9.601562 Z M 15.359375 9.601562 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.363281 9.5625 C 16.96875 10.019531 17.101562 10.691406 17.652344 10.921875 C 17.976562 11.050781 18.046875 11.050781 18.335938 10.835938 C 18.730469 10.535156 18.828125 9.925781 18.527344 9.589844 C 18.265625 9.300781 17.617188 9.289062 17.363281 9.5625 Z M 17.363281 9.5625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.273438 9.625 C 18.972656 10.042969 19.03125 10.5 19.402344 10.800781 C 20.171875 11.398438 21.121094 10.453125 20.519531 9.683594 C 20.183594 9.265625 19.546875 9.226562 19.273438 9.625 Z M 19.273438 9.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 1.703125 11.59375 C 1.378906 11.820312 1.355469 12.359375 1.65625 12.636719 C 2.351562 13.273438 3.300781 12.300781 2.640625 11.640625 C 2.351562 11.351562 2.0625 11.339844 1.703125 11.59375 Z M 1.703125 11.59375 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.5625 11.617188 C 3.277344 11.929688 3.300781 12.5625 3.589844 12.71875 C 3.996094 12.9375 4.414062 12.863281 4.632812 12.539062 C 5.089844 11.832031 4.128906 10.992188 3.5625 11.617188 Z M 3.5625 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.398438 11.640625 C 5.113281 11.929688 5.101562 12.214844 5.351562 12.574219 C 5.722656 13.117188 6.601562 12.804688 6.601562 12.132812 C 6.601562 11.472656 5.867188 11.171875 5.398438 11.640625 Z M 5.398438 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.402344 11.617188 C 7.152344 11.890625 7.140625 12.40625 7.390625 12.648438 C 7.667969 12.9375 8.230469 12.886719 8.449219 12.574219 C 8.699219 12.214844 8.6875 11.929688 8.398438 11.640625 C 8.101562 11.339844 7.65625 11.328125 7.402344 11.617188 Z M 7.402344 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.371094 11.710938 C 9.070312 12.097656 9.058594 12.226562 9.3125 12.574219 C 9.636719 13.042969 10.441406 12.875 10.609375 12.289062 C 10.703125 11.953125 10.273438 11.398438 9.898438 11.398438 C 9.730469 11.398438 9.515625 11.53125 9.371094 11.710938 Z M 9.371094 11.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.398438 11.640625 C 11.113281 11.929688 11.101562 12.214844 11.351562 12.574219 C 11.722656 13.117188 12.601562 12.804688 12.601562 12.132812 C 12.601562 11.472656 11.867188 11.171875 11.398438 11.640625 Z M 11.398438 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.441406 11.640625 C 13.140625 11.941406 13.128906 12.382812 13.414062 12.636719 C 13.882812 13.054688 14.640625 12.742188 14.640625 12.144531 C 14.640625 11.808594 14.230469 11.398438 13.921875 11.398438 C 13.789062 11.398438 13.570312 11.507812 13.441406 11.640625 Z M 13.441406 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.445312 11.617188 C 15.191406 11.890625 15.179688 12.40625 15.433594 12.648438 C 15.707031 12.9375 16.273438 12.886719 16.488281 12.574219 C 16.738281 12.214844 16.726562 11.929688 16.441406 11.640625 C 16.140625 11.339844 15.695312 11.328125 15.445312 11.617188 Z M 15.445312 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.410156 11.710938 C 17.113281 12.097656 17.101562 12.226562 17.351562 12.574219 C 17.675781 13.042969 18.480469 12.875 18.648438 12.289062 C 18.742188 11.953125 18.3125 11.398438 17.941406 11.398438 C 17.773438 11.398438 17.554688 11.53125 17.410156 11.710938 Z M 17.410156 11.710938 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.402344 11.617188 C 19.152344 11.890625 19.140625 12.40625 19.390625 12.648438 C 19.667969 12.9375 20.230469 12.886719 20.449219 12.574219 C 20.699219 12.214844 20.6875 11.929688 20.398438 11.640625 C 20.101562 11.339844 19.65625 11.328125 19.402344 11.617188 Z M 19.402344 11.617188 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 21.359375 11.640625 C 20.890625 12.109375 21.191406 12.839844 21.863281 12.839844 C 22.5 12.839844 22.8125 11.953125 22.296875 11.59375 C 21.9375 11.339844 21.648438 11.351562 21.359375 11.640625 Z M 21.359375 11.640625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.550781 13.753906 C 3.289062 14.003906 3.3125 14.351562 3.601562 14.640625 C 3.886719 14.929688 4.054688 14.941406 4.414062 14.6875 C 4.703125 14.496094 4.753906 14.160156 4.558594 13.789062 C 4.402344 13.511719 3.816406 13.476562 3.550781 13.753906 Z M 3.550781 13.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.425781 13.703125 C 5.171875 13.957031 5.257812 14.496094 5.566406 14.699219 C 6.203125 15.121094 6.949219 14.292969 6.40625 13.753906 C 6.191406 13.523438 5.628906 13.5 5.425781 13.703125 Z M 5.425781 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.378906 13.800781 C 6.898438 14.339844 7.621094 15.109375 8.230469 14.699219 C 8.542969 14.496094 8.628906 13.957031 8.375 13.703125 C 8.160156 13.488281 7.621094 13.535156 7.378906 13.800781 Z M 7.378906 13.800781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.359375 13.789062 C 9.15625 14.171875 9.226562 14.507812 9.539062 14.710938 C 10.128906 15.097656 10.789062 14.4375 10.441406 13.8125 C 10.261719 13.476562 9.539062 13.464844 9.359375 13.789062 Z M 9.359375 13.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.425781 13.703125 C 11.171875 13.957031 11.257812 14.496094 11.566406 14.699219 C 12.203125 15.121094 12.949219 14.292969 12.40625 13.753906 C 12.191406 13.523438 11.628906 13.5 11.425781 13.703125 Z M 11.425781 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.464844 13.703125 C 13.34375 13.859375 13.285156 14.113281 13.308594 14.363281 C 13.308594 14.449219 13.453125 14.605469 13.609375 14.699219 C 13.945312 14.929688 14.304688 14.808594 14.519531 14.386719 C 14.820312 13.847656 13.859375 13.234375 13.464844 13.703125 Z M 13.464844 13.703125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.433594 13.753906 C 14.890625 14.292969 15.636719 15.121094 16.273438 14.699219 C 16.585938 14.496094 16.667969 13.957031 16.414062 13.703125 C 16.210938 13.5 15.648438 13.523438 15.433594 13.753906 Z M 15.433594 13.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.398438 13.789062 C 17.195312 14.171875 17.269531 14.507812 17.578125 14.710938 C 18.167969 15.097656 18.828125 14.4375 18.480469 13.8125 C 18.300781 13.476562 17.578125 13.464844 17.398438 13.789062 Z M 17.398438 13.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 19.378906 13.800781 C 18.898438 14.339844 19.621094 15.109375 20.230469 14.699219 C 20.542969 14.496094 20.628906 13.957031 20.375 13.703125 C 20.160156 13.488281 19.621094 13.535156 19.378906 13.800781 Z M 19.378906 13.800781 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.449219 15.78125 C 5.269531 16.054688 5.269531 16.105469 5.449219 16.378906 C 5.773438 16.882812 6.480469 16.691406 6.480469 16.105469 C 6.480469 15.445312 5.808594 15.238281 5.449219 15.78125 Z M 5.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.464844 15.625 C 7.199219 15.886719 7.285156 16.429688 7.609375 16.585938 C 7.980469 16.753906 8.242188 16.644531 8.425781 16.261719 C 8.53125 16.007812 8.519531 15.925781 8.339844 15.71875 C 8.101562 15.457031 7.679688 15.40625 7.464844 15.625 Z M 7.464844 15.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.40625 15.78125 C 9.226562 16.054688 9.226562 16.105469 9.40625 16.378906 C 9.757812 16.90625 10.441406 16.714844 10.441406 16.078125 C 10.441406 15.445312 9.757812 15.253906 9.40625 15.78125 Z M 9.40625 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.449219 15.78125 C 11.269531 16.054688 11.269531 16.105469 11.449219 16.378906 C 11.773438 16.882812 12.480469 16.691406 12.480469 16.105469 C 12.480469 15.445312 11.808594 15.238281 11.449219 15.78125 Z M 11.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.511719 15.671875 C 13.402344 15.769531 13.320312 15.960938 13.320312 16.078125 C 13.320312 16.597656 13.96875 16.859375 14.328125 16.488281 C 14.4375 16.390625 14.519531 16.199219 14.519531 16.078125 C 14.519531 15.960938 14.4375 15.769531 14.328125 15.671875 C 14.230469 15.5625 14.039062 15.480469 13.921875 15.480469 C 13.800781 15.480469 13.609375 15.5625 13.511719 15.671875 Z M 13.511719 15.671875 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.503906 15.625 C 15.277344 15.851562 15.324219 16.414062 15.589844 16.558594 C 15.960938 16.753906 16.175781 16.703125 16.390625 16.378906 C 16.570312 16.105469 16.570312 16.054688 16.390625 15.78125 C 16.175781 15.457031 15.742188 15.382812 15.503906 15.625 Z M 15.503906 15.625 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.449219 15.78125 C 17.269531 16.054688 17.269531 16.105469 17.449219 16.378906 C 17.796875 16.90625 18.480469 16.714844 18.480469 16.078125 C 18.480469 15.445312 17.796875 15.253906 17.449219 15.78125 Z M 17.449219 15.78125 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.414062 17.820312 C 7.296875 18.085938 7.308594 18.167969 7.535156 18.382812 C 7.753906 18.613281 7.835938 18.625 8.101562 18.503906 C 8.292969 18.40625 8.398438 18.265625 8.398438 18.085938 C 8.398438 17.484375 7.65625 17.292969 7.414062 17.820312 Z M 7.414062 17.820312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.480469 17.699219 C 9.394531 17.796875 9.359375 18 9.40625 18.167969 C 9.539062 18.707031 10.261719 18.707031 10.390625 18.167969 C 10.488281 17.808594 10.261719 17.519531 9.898438 17.519531 C 9.757812 17.519531 9.5625 17.605469 9.480469 17.699219 Z M 9.480469 17.699219 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.542969 17.664062 C 11.292969 17.914062 11.375 18.347656 11.699219 18.503906 C 12.15625 18.707031 12.589844 18.277344 12.382812 17.820312 C 12.226562 17.496094 11.796875 17.410156 11.542969 17.664062 Z M 11.542969 17.664062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.597656 17.605469 C 13.402344 17.675781 13.390625 18.265625 13.585938 18.457031 C 13.800781 18.671875 14.125 18.625 14.328125 18.347656 C 14.675781 17.84375 14.195312 17.351562 13.597656 17.605469 Z M 13.597656 17.605469 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 15.457031 17.820312 C 15.335938 18.085938 15.347656 18.167969 15.574219 18.382812 C 15.792969 18.613281 15.875 18.625 16.140625 18.503906 C 16.332031 18.40625 16.441406 18.265625 16.441406 18.085938 C 16.441406 17.484375 15.695312 17.292969 15.457031 17.820312 Z M 15.457031 17.820312 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.550781 19.789062 C 9.277344 20.089844 9.480469 20.519531 9.898438 20.519531 C 10.296875 20.519531 10.488281 20.160156 10.246094 19.824219 C 10.019531 19.5 9.816406 19.488281 9.550781 19.789062 Z M 9.550781 19.789062 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.59375 19.753906 C 11.21875 20.113281 11.496094 20.578125 12.023438 20.496094 C 12.335938 20.460938 12.46875 20.003906 12.238281 19.726562 C 12.046875 19.511719 11.820312 19.511719 11.59375 19.753906 Z M 11.59375 19.753906 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 13.632812 19.714844 C 13.199219 20.027344 13.679688 20.722656 14.136719 20.449219 C 14.425781 20.257812 14.460938 19.90625 14.207031 19.714844 C 14.089844 19.632812 13.957031 19.558594 13.921875 19.558594 C 13.882812 19.558594 13.753906 19.632812 13.632812 19.714844 Z M 13.632812 19.714844 "/>\n     <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.566406 22.019531 C 11.460938 22.296875 11.605469 22.558594 11.855469 22.558594 C 12.15625 22.558594 12.382812 22.285156 12.289062 22.03125 C 12.191406 21.792969 11.652344 21.78125 11.566406 22.019531 Z M 11.566406 22.019531 "/>'}),this.iconLibraries.registerFontPack("fa",{packClass:"fa",iconClassPrefix:"fa"}),this.iconLibraries.registerFontPack("far",{packClass:"far",iconClassPrefix:"fa"}),this.iconLibraries.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"})}return t.\u0275mod=f["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)(f["\u0275\u0275inject"](g.N))},imports:[Object(i.e)(cc,[r.c,qa,Ja.a,g.A,g.O,g.R,g.t,g.m,g.Yb,g.C,g.sb,g.Tb,g.j,g.xb,On.B,g.bb,m.e,g.sb,g.L,g.R,g.gb,Un.c,g.Nb,Tn,gn.d,g.Vb,ts.LightboxModule,es.d,g.Db,g.pb,g.r,fn.g,g.mb,g.Gb,Ks.a,Pn.d.forRoot({player:ls.b}),Nt.forRoot(),g.G.forChild(),g.Zb.forChild(),je.withConfig({accessToken:Qa.a.mapBoxToken,geocoderAccessToken:""})])]}),t}();f["\u0275\u0275setComponentScope"](Dn,[Vo.a,Go.b,pn.a,pn.b,pn.c,pn.d,pn.e,pn.f,ra,Jo,ca,Ko,us.a,Ls,ks,Ts,Ds,Bs,Ss,Ns,Zs.a,Gs.b,Gs.a,r.s,r.t,r.u,r.v,r.C,r.y,r.z,r.A,r.B,r.w,r.x,o.h,o.d,o.f,o.e,o.i,wi.b,Xs.a,Ys.a,qs.a,Js.a,Qs.a,sn.a,an.a,tc.a,ec.a,g.w,g.v,g.x,g.z,g.tb,g.J,g.y,g.u,g.M,g.Q,g.s,g.k,g.l,g.Xb,g.B,g.qb,g.rb,g.Sb,g.f,g.h,g.i,g.g,g.vb,g.wb,g.kb,g.ib,g.jb,On.H,On.w,On.G,On.c,On.x,On.A,On.a,On.D,On.E,On.z,On.s,On.t,On.C,On.o,On.n,On.y,On.b,On.d,On.i,On.k,On.j,On.l,On.f,g.Z,g.ab,g.cb,g.P,m.c,g.K,g.nb,g.Jb,g.eb,g.fb,Un.a,Un.g,Un.d,Un.b,Un.e,Un.f,g.Mb,g.Lb,Ln,gn.a,gn.c,gn.b,g.Ub,es.c,g.Bb,g.Cb,g.ob,g.p,g.q,fn.e,fn.f,fn.a,fn.b,fn.d,fn.c,g.lb,g.Fb,g.Eb,g.Hb,g.Ib,$n.a,nc,Pn.a,Pn.c,Pn.b,_t,Pe,_e,Ie,Ae,Ne,xe,Re,Te,Be,Le,we,Ce,Ee,de,fe,ye,me,ve,pe,be,Oe,Me,ke,en,Xa,un,Dn,xi,ns.a,is.a,rs.a,os.a,as.a,ss.a,An,jn,cs.a,Ca,$a,$s,Hn,_n],[r.b,r.J,r.r,r.m,r.G,r.g,r.E,r.H,r.d,r.f,r.k,r.l,r.n,ic.a,rc.a,oc.a,ac.a,sc.a])},"9/5/":function(t,e){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,d=Math.min,p=function(){return l.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=r.test(t);return s||o.test(t)?a(t.slice(2),s?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var i,r,o,a,s,c,l=0,u=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=i,o=r;return i=r=void 0,l=e,a=t.apply(o,n)}function b(t){return l=t,s=setTimeout(C,e),u?y(t):a}function _(t){var n=t-c;return void 0===c||n>=e||n<0||m&&t-l>=o}function C(){var t=p();if(_(t))return x(t);s=setTimeout(C,function(t){var n=e-(t-c);return m?d(n,o-(t-l)):n}(t))}function x(t){return s=void 0,v&&i?y(t):(i=r=void 0,a)}function w(){var t=p(),n=_(t);if(i=arguments,r=this,c=t,n){if(void 0===s)return b(c);if(m)return s=setTimeout(C,e),y(c)}return void 0===s&&(s=setTimeout(C,e)),a}return e=g(e)||0,f(n)&&(u=!!n.leading,o=(m="maxWait"in n)?h(g(n.maxWait)||0,e):o,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=r=s=void 0},w.flush=function(){return void 0===s?a:x(p())},w}},"9OXO":function(t,e,n){"use strict";n.d(e,"a",(function(){return Ct}));var i=n("m3o8"),r=(n("ZgVZ"),n("tk/3")),o=n("UsXk"),a=n("mrSG"),s=n("g+oh"),c=n("vkgz"),l=n("JIr8"),u=n("lJxs"),h=n("w8jS"),d=n("fXoL"),p=n("aceb"),f="columns",g=function(t){function e(e,n){var i=t.call(this,n)||this;return i._http=e,i}return Object(a.c)(e,t),e.prototype.addColumn=function(t){var e=this;return this._http.post(f,t).pipe(Object(c.a)((function(n){return e.log("create Column id="+t.id)})),Object(l.a)(this.handleError("addCategory")))},e.prototype.deleteColumn=function(t){var e=this,n="number"==typeof t?t:t.id,i=function(t){return"columns/"+t}(n);return this._http.delete(i).pipe(Object(c.a)((function(t){return e.log("deleted col id="+n)})),Object(l.a)(this.handleError("deleteCol")))},e.prototype.deleteFile=function(t){var e=this,n="number"==typeof t?t:t.id,i=function(t){return"columns/file/"+t}(n);return this._http.delete(i).pipe(Object(c.a)((function(t){return e.log("deleted file id="+n)})))},e.prototype.uploadFiles=function(t){var e=this;return this._http.postFormData("columns/files",t,{reportProgress:!0,observe:"events"}).pipe(Object(c.a)((function(t){return e.log("files uploaded files ")})))},e.prototype.getAll=function(){var t=this;return this._http.get(f).pipe(Object(c.a)((function(e){return t.log("Fetched Column")})),Object(l.a)(this.handleError("getAll",[])),Object(u.a)((function(t){return t.map((function(t){return(new o.a).deserialize(t)}))})))},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](h.a),d["\u0275\u0275inject"](p.Rb))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(s.a),m=n("mvqV"),v=n("ofXK"),y=n("kvL/");function b(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",29),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2),e=t.$implicit,i=t.index;return d["\u0275\u0275nextContext"]().editColumn(e,i)})),d["\u0275\u0275element"](1,"nb-icon",30),d["\u0275\u0275elementEnd"]()}}function _(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",26),d["\u0275\u0275elementStart"](1,"nb-form-field"),d["\u0275\u0275elementStart"](2,"input",27),d["\u0275\u0275listener"]("keyup",(function(t){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"]().onKeyUpdate(t,e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,b,2,0,"a",28),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",i.name),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}function C(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"div",26),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("",n.id," ",n.name,"")}}function x(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",31),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().$implicit;return t.editing=!t.editing})),d["\u0275\u0275element"](1,"nb-icon",32),d["\u0275\u0275elementEnd"]()}}function w(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",33),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return d["\u0275\u0275nextContext"]().deleteColumn(e,i)})),d["\u0275\u0275element"](1,"nb-icon",34),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275property"]("disabled",i.files_count>0)}}function I(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-radio",21),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit;return d["\u0275\u0275nextContext"]().setOption(t)})),d["\u0275\u0275template"](1,_,4,2,"div",22),d["\u0275\u0275template"](2,C,2,2,"div",22),d["\u0275\u0275elementStart"](3,"div",23),d["\u0275\u0275template"](4,x,2,0,"a",24),d["\u0275\u0275template"](5,w,2,1,"a",25),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275property"]("value",i.id),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.editing)}}function A(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"nb-progress-bar",35),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("value",n.progress),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](n.progress)}}function P(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"p"),d["\u0275\u0275text"](1," El Archivo se guardar\xe1n en la carpeta: "),d["\u0275\u0275elementStart"](2,"b"),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](n.selectedOption.name)}}function O(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ngx-dropzone-preview",36),d["\u0275\u0275listener"]("removed",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit;return d["\u0275\u0275nextContext"]().onRemove(t)})),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275element"](2,"nb-icon",37),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275property"]("removable",!0),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](i.name)}}var M=function(){function t(t,e){var n=this;this._colService=t,this._stationsService=e,this.columns=[],this.column=new o.a,this.editing=!1,this.selectedOption=null,this.searchText="",this.showPassword=!0,this.files=[],this._colService.getAll().subscribe((function(t){n.columns=t}))}return t.prototype.ngOnInit=function(){},t.prototype.getInputType=function(){return this.showPassword?"text":"password"},t.prototype.onKey=function(t){this.searchText=t.target.value},t.prototype.onKeyTitle=function(t){this.selectedOption.title=t.target.value},t.prototype.onKeyDesc=function(t){this.selectedOption.desc=t.target.value},t.prototype.onKeyUpdate=function(t,e){e.name=t.target.value},t.prototype.addColumn=function(){var t=this;this.column.name=this.searchText,this._colService.addColumn(this.column).subscribe({next:function(e){e&&(t.columns.push(e),t._colService.showToast("top right","success","Categoria Agregada"))}})},t.prototype.editColumn=function(t,e){var n=this;this._colService.addColumn(t).subscribe({next:function(i){i&&(Object.assign(n.columns[e],i),t.editing=!1,n._colService.showToast("top right","success","Editado correctamente"))}})},t.prototype.deleteColumn=function(t,e){var n=this;this._colService.deleteColumn(t).subscribe({next:function(t){t&&(n.columns.splice(e,1),n._colService.showToast("top right","success","Eliminado Correctamente"))}})},t.prototype.setOption=function(t){this.selectedOption=t},t.prototype.onSelect=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.prototype.uploadFiles=function(){var t=this;if(this.selectedOption){var e=this._stationsService.toFormData(this._station);this.files.map((function(t){return e.append("files[]",t)})),e.append("columns[id]",""+this.selectedOption.id),e.append("columns[name]",""+this.selectedOption.name),e.append("columns[title]",""+this.selectedOption.title),e.append("columns[desc]",""+this.selectedOption.desc),this.loading=!0,this._stationsService.uploadFiles(e).subscribe({next:function(e){var n,i;if(e.type===r.e.UploadProgress&&(t.progress=Math.round(100*e.loaded/e.total)),e.type===r.e.Response){if(t.progress=0,e.error)t._stationsService.showToast("top left","danger",e.error);else{t._stationsService.showToast("top left","success","Actualizado correctamente"),t.files=[],t._station.columns=[];var a=e.body.imgFiles.map((function(t){return(new o.a).deserialize(t)})),s=e.body.otherFiles.map((function(t){return(new o.a).deserialize(t)}));(n=t._station.otherFiles).push.apply(n,s),(i=t._station.imgFiles).push.apply(i,a)}t.progress=0,t.loading=!1}},error:function(e){t.loading=!1,t.progress=0,t._station.columns=[],t._stationsService.showToast("top left","danger",e)}})}else this._stationsService.showToast("top left","danger","debe seleccionar una opcion")},t.prototype.onRemove=function(t){this.files.splice(this.files.indexOf(t),1)},t.prototype.trackByFn=function(t,e){return t+"-"+(null==e?void 0:e.trackId)},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](g),d["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-add-files"]],inputs:{_station:"_station"},decls:43,vars:9,consts:[["size","large","nbSpinnerSize","tiny","nbSpinnerStatus","primary",3,"nbSpinner"],[1,"row"],[1,"col-sm-4"],[1,"row","mx-auto"],["fieldSize","small","fullWidth","","shape","round","type","text","nbInput","",3,"keyup"],["size","small","nbSuffix","","nbButton","",3,"click"],["icon","plus","pack","eva"],[1,"mb-2"],["name","columns","status","info",1,"mt-4"],["class","d-flex justify-content-between",3,"value","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-sm-8","d-flex","flex-column","justify-content-between"],["status","success",3,"value",4,"ngIf"],["placeholder","Titulo","fieldSize","small","fullWidth","","shape","round","type","text","nbInput","",3,"keyup"],[1,"row","mx-auto","mt-2"],["placeholder","Descripci\xf3n","fieldSize","small","fullWidth","","shape","round","type","text","nbInput","",3,"keyup"],[4,"ngIf"],[1,"mt-4",3,"expandable","disabled","change"],["icon","cloud-upload-outline"],[3,"removable","removed",4,"ngFor","ngForOf"],["outline","","nbButton","","fullWidth","","status","info ",1,"shadow-sm",3,"disabled","click"],["icon","save-outline "],[1,"d-flex","justify-content-between",3,"value","click"],["class","d-flex",4,"ngIf"],["status","success",1,"d-flex","justify-content-between"],["status","info","ghost","","nbButton","",3,"click",4,"ngIf"],["ghost","","nbButton","",3,"disabled","click",4,"ngIf"],[1,"d-flex"],["fieldSize","small","shape","round","type","text","nbInput","",3,"value","keyup"],["ghost","","nbButton","",3,"click",4,"ngIf"],["ghost","","nbButton","",3,"click"],["icon","save-outline"],["status","info","ghost","","nbButton","",3,"click"],["icon","edit-2-outline"],["ghost","","nbButton","",3,"disabled","click"],["icon","trash-2-outline"],["status","success",3,"value"],[3,"removable","removed"],["icon","file-outline"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"nb-card",0),d["\u0275\u0275elementStart"](1,"nb-card-body",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"nb-card"),d["\u0275\u0275elementStart"](4,"nb-card-header"),d["\u0275\u0275elementStart"](5,"h6",3),d["\u0275\u0275text"](6,"Agregar Archivos: "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-form-field"),d["\u0275\u0275text"](8," 0. Opcional: Crea una categoria. "),d["\u0275\u0275elementStart"](9,"input",4),d["\u0275\u0275listener"]("keyup",(function(t){return e.onKey(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"button",5),d["\u0275\u0275listener"]("click",(function(){return e.addColumn()})),d["\u0275\u0275element"](11,"nb-icon",6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"nb-card-body"),d["\u0275\u0275elementStart"](13,"p",7),d["\u0275\u0275elementStart"](14,"b"),d["\u0275\u0275text"](15,"1. Selecciona una Opci\xf3n:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"nb-radio-group",8),d["\u0275\u0275template"](17,I,6,5,"nb-radio",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",10),d["\u0275\u0275elementStart"](19,"nb-card"),d["\u0275\u0275element"](20,"nb-card-header"),d["\u0275\u0275elementStart"](21,"nb-card-body"),d["\u0275\u0275template"](22,A,2,2,"nb-progress-bar",11),d["\u0275\u0275elementStart"](23,"div"),d["\u0275\u0275elementStart"](24,"h6",3),d["\u0275\u0275text"](25,"2. Agrega un Titulo "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"nb-form-field"),d["\u0275\u0275elementStart"](27,"input",12),d["\u0275\u0275listener"]("keyup",(function(t){return e.onKeyTitle(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"h6",13),d["\u0275\u0275text"](29,"3. Agrega una Descripci\xf3n "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"nb-form-field"),d["\u0275\u0275elementStart"](31,"textarea",14),d["\u0275\u0275listener"]("keyup",(function(t){return e.onKeyDesc(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](32,P,4,1,"p",15),d["\u0275\u0275elementStart"](33,"ngx-dropzone",16),d["\u0275\u0275listener"]("change",(function(t){return e.onSelect(t)})),d["\u0275\u0275elementStart"](34,"ngx-dropzone-label"),d["\u0275\u0275element"](35,"nb-icon",17),d["\u0275\u0275elementStart"](36,"b"),d["\u0275\u0275text"](37," 4. Arrastre sus archivos"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](38,O,4,2,"ngx-dropzone-preview",18),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"nb-card-footer"),d["\u0275\u0275elementStart"](40,"button",19),d["\u0275\u0275listener"]("click",(function(){return e.uploadFiles()})),d["\u0275\u0275element"](41,"nb-icon",20),d["\u0275\u0275text"](42,"Guardar"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275property"]("nbSpinner",e.loading),d["\u0275\u0275advance"](17),d["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByFn),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngIf",e.progress>0),d["\u0275\u0275advance"](10),d["\u0275\u0275property"]("ngIf",e.selectedOption),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("expandable",!0)("disabled",!e.selectedOption),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngForOf",e.files),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("disabled",null===e.selectedOption))},directives:[p.w,p.Cb,p.v,p.z,p.K,p.Q,p.s,p.Jb,p.M,p.rb,v.u,v.v,y.a,y.g,p.x,p.qb,p.ob,y.d],styles:[".nb-theme-default   [_nghost-%COMP%]     label, .nb-theme-default   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-default   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-dark   [_nghost-%COMP%]     label, .nb-theme-dark   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-dark   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-cosmic   [_nghost-%COMP%]     label, .nb-theme-cosmic   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-corporate   [_nghost-%COMP%]     label, .nb-theme-corporate   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-corporate   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-material-dark   [_nghost-%COMP%]     label, .nb-theme-material-dark   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-material-dark   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-material-light   [_nghost-%COMP%]     label, .nb-theme-material-light   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-material-light   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}.nb-theme-obsrio   [_nghost-%COMP%]     label, .nb-theme-obsrio   [_nghost-%COMP%]     label span.text{display:flex;flex-wrap:wrap;width:100%}.nb-theme-obsrio   [_nghost-%COMP%]     nb-reveal-card{margin-bottom:0}"]}),t}(),S=n("EnSh"),k=n("lWTH"),E=n("tyNb"),L=n("QJFE"),T=n("DPnb"),R=n("5+WD"),N=["infoSwal"];function B(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ng-lottie",4),d["\u0275\u0275listener"]("animationCreated",(function(t){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().animationCreated(t)})),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("options",i.options)}}function j(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"](2).$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](null==n?null:n.title)}}function D(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"nb-form-field"),d["\u0275\u0275elementStart"](2,"input",45),d["\u0275\u0275listener"]("keyup",(function(t){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](2).$implicit;return d["\u0275\u0275nextContext"](3).onKeyTitle(t,e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2).$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",i.title)}}function F(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"div",46),d["\u0275\u0275elementStart"](1,"p",47),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"](2).$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](null==n?null:n.desc)}}function z(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"nb-form-field"),d["\u0275\u0275elementStart"](2,"textarea",51),d["\u0275\u0275listener"]("keyup",(function(t){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](3).$implicit;return d["\u0275\u0275nextContext"](3).onKeyDesc(t,e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](3).$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("value",i.desc)}}function V(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](3).$implicit;return d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](4).showFileSelector(),t.editing=!0})),d["\u0275\u0275element"](1,"nb-icon",53),d["\u0275\u0275elementEnd"]()}}function G(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](3),e=t.$implicit,i=t.index,r=d["\u0275\u0275nextContext"](3);return r.editFile(e,i,r._marker.imgFiles)})),d["\u0275\u0275element"](1,"nb-icon",54),d["\u0275\u0275elementEnd"]()}}function Z(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](3).$implicit.editing=!1})),d["\u0275\u0275text"](1," cancelar "),d["\u0275\u0275elementEnd"]()}}function W(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",48),d["\u0275\u0275template"](1,z,3,1,"div",39),d["\u0275\u0275elementStart"](2,"nb-actions",49),d["\u0275\u0275element"](3,"nb-action"),d["\u0275\u0275elementStart"](4,"nb-action",50),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2),d["\u0275\u0275reference"](3).fire()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](5,V,2,0,"nb-action",24),d["\u0275\u0275template"](6,G,2,0,"nb-action",24),d["\u0275\u0275template"](7,Z,2,0,"nb-action",24),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2).$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}var H=function(){return["Manage Stations","all"]};function U(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card",36),d["\u0275\u0275elementStart"](1,"nb-card-header",6),d["\u0275\u0275element"](2,"img",37),d["\u0275\u0275elementStart"](3,"span",38),d["\u0275\u0275template"](4,j,2,1,"div",39),d["\u0275\u0275template"](5,D,3,1,"div",39),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"nb-action",40),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](3).open(t)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"nb-card-body",41),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](3).open(t)})),d["\u0275\u0275element"](8,"img",42),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"nb-card-footer"),d["\u0275\u0275template"](10,F,3,1,"div",43),d["\u0275\u0275template"](11,W,8,4,"div",44),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("src",i.file_path,d["\u0275\u0275sanitizeUrl"])("alt",i.name),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](6,H))}}var $=function(){return{confirmButtonText:"Borrar"}};function K(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275template"](1,U,12,7,"nb-card",33),d["\u0275\u0275elementStart"](2,"swal",34,35),d["\u0275\u0275listener"]("confirm",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,r=d["\u0275\u0275nextContext"](3);return r.deleteFile(t,i,r._marker.imgFiles)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.active),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",d["\u0275\u0275pureFunction0"](4,$))}}function X(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",55),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275text"](2," Vista Previa"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("file",e.$implicit)}function Y(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-tab",27),d["\u0275\u0275elementStart"](1,"div",28),d["\u0275\u0275template"](2,K,4,5,"ng-container",29),d["\u0275\u0275elementStart"](3,"ngx-dropzone",30,31),d["\u0275\u0275listener"]("change",(function(t){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).onSelect(t)})),d["\u0275\u0275template"](5,X,3,1,"ngx-dropzone-image-preview",32),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i._marker.imgFiles),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("multiple",!1)("accept","image/*"),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i.files)}}function q(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"ngx-dropzone-image-preview",55),d["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),d["\u0275\u0275text"](2," Vista Previa"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("file",e.$implicit)}function J(t,e){1&t&&d["\u0275\u0275element"](0,"img",72)}function Q(t,e){1&t&&d["\u0275\u0275element"](0,"img",72)}function tt(t,e){1&t&&d["\u0275\u0275element"](0,"img",73)}function et(t,e){1&t&&d["\u0275\u0275element"](0,"img",74)}function nt(t,e){1&t&&d["\u0275\u0275element"](0,"img",75)}function it(t,e){1&t&&d["\u0275\u0275element"](0,"img",76)}function rt(t,e){1&t&&d["\u0275\u0275element"](0,"img",77)}function ot(t,e){1&t&&d["\u0275\u0275element"](0,"img",78)}function at(t,e){1&t&&d["\u0275\u0275element"](0,"img",79)}function st(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"a",61),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().$implicit;return d["\u0275\u0275nextContext"](3).openFile(t,!0)})),d["\u0275\u0275elementContainerStart"](1,62),d["\u0275\u0275template"](2,J,1,0,"img",63),d["\u0275\u0275template"](3,Q,1,0,"img",63),d["\u0275\u0275template"](4,tt,1,0,"img",64),d["\u0275\u0275template"](5,et,1,0,"img",65),d["\u0275\u0275template"](6,nt,1,0,"img",66),d["\u0275\u0275template"](7,it,1,0,"img",67),d["\u0275\u0275template"](8,rt,1,0,"img",68),d["\u0275\u0275template"](9,ot,1,0,"img",69),d["\u0275\u0275template"](10,at,1,0,"img",70),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementStart"](11,"div",71),d["\u0275\u0275elementStart"](12,"p"),d["\u0275\u0275text"](13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275property"]("nbTooltip",i.icon),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitch",i.icon),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","txt"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","csv"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","pdf"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","docx"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","ppt"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","xlsx"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","png"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","jpg"),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](i.name)}}function ct(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2).$implicit;return d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](3).showFileSelector(),t.editing=!0})),d["\u0275\u0275element"](1,"nb-icon",53),d["\u0275\u0275elementEnd"]()}}function lt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"](2),e=t.$implicit,i=t.index,r=d["\u0275\u0275nextContext"](3);return r.editFile(e,i,r._marker.otherFiles)})),d["\u0275\u0275element"](1,"nb-icon",54),d["\u0275\u0275elementEnd"]()}}function ut(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).$implicit.editing=!1})),d["\u0275\u0275text"](1," cancelar "),d["\u0275\u0275elementEnd"]()}}function ht(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"nb-actions",49),d["\u0275\u0275elementStart"](2,"nb-action",50),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](5).fire()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,ct,2,0,"nb-action",24),d["\u0275\u0275template"](4,lt,2,0,"nb-action",24),d["\u0275\u0275template"](5,ut,2,0,"nb-action",24),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",!i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.editing)}}function dt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"div",59),d["\u0275\u0275template"](2,st,14,11,"a",60),d["\u0275\u0275template"](3,ht,6,3,"div",19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"swal",34,35),d["\u0275\u0275listener"]("confirm",(function(){d["\u0275\u0275restoreView"](n);var t=e.$implicit,i=e.index,r=d["\u0275\u0275nextContext"](3);return r.deleteFile(t,i,r._marker.otherFiles)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}if(2&t){var i=e.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",i.active),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](5,H)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0)("swalOptions",d["\u0275\u0275pureFunction0"](6,$))}}function pt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-tab",56),d["\u0275\u0275elementStart"](1,"div",57),d["\u0275\u0275elementStart"](2,"ngx-dropzone",58,31),d["\u0275\u0275listener"]("change",(function(t){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).onSelect(t)})),d["\u0275\u0275template"](4,q,3,1,"ngx-dropzone-image-preview",32),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](5,dt,6,7,"ng-container",29),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("multiple",!1),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",i.files),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",i._marker.otherFiles)}}function ft(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"nb-tab",80),d["\u0275\u0275elementStart"](1,"p"),d["\u0275\u0275text"](2,"Prontro encontrar\xe1s aqu\xed m\xe1s informaci\xf3n sobre esta estaci\xf3n."),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function gt(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"nb-card-back"),d["\u0275\u0275elementStart"](1,"nb-card",81),d["\u0275\u0275elementStart"](2,"nb-card-body"),d["\u0275\u0275element"](3,"ngx-add-files",82),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("_station",n._marker)}}function mt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).saveFiles()})),d["\u0275\u0275element"](1,"nb-icon",83),d["\u0275\u0275elementEnd"]()}}function vt(t,e){1&t&&d["\u0275\u0275element"](0,"nb-icon",86)}function yt(t,e){1&t&&d["\u0275\u0275element"](0,"nb-icon",87)}function bt(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-action",52),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).toggleCard()})),d["\u0275\u0275template"](1,vt,1,0,"nb-icon",84),d["\u0275\u0275template"](2,yt,1,0,"nb-icon",85),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.showCard),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i.showCard)}}function _t(t,e){if(1&t){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card",5),d["\u0275\u0275elementStart"](1,"nb-card-header",6),d["\u0275\u0275text"](2),d["\u0275\u0275elementStart"](3,"nb-actions"),d["\u0275\u0275elementStart"](4,"nb-action"),d["\u0275\u0275elementStart"](5,"div",7),d["\u0275\u0275namespaceSVG"](),d["\u0275\u0275elementStart"](6,"svg",8),d["\u0275\u0275element"](7,"path",9),d["\u0275\u0275element"](8,"path",10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275namespaceHTML"](),d["\u0275\u0275elementStart"](9,"nb-action"),d["\u0275\u0275element"](10,"img",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"nb-action",12),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().closeModal()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"nb-card-body"),d["\u0275\u0275elementStart"](13,"nb-reveal-card",13),d["\u0275\u0275elementStart"](14,"nb-card-front"),d["\u0275\u0275elementStart"](15,"nb-card",14),d["\u0275\u0275elementStart"](16,"nb-tabset",15),d["\u0275\u0275template"](17,Y,6,4,"nb-tab",16),d["\u0275\u0275template"](18,pt,6,3,"nb-tab",17),d["\u0275\u0275template"](19,ft,3,0,"nb-tab",18),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](20,gt,4,1,"nb-card-back",19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"nb-card-footer",20),d["\u0275\u0275elementStart"](22,"nb-actions",21),d["\u0275\u0275elementStart"](23,"nb-action",22),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().donwloadPdf()})),d["\u0275\u0275element"](24,"img",23),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](25,mt,2,0,"nb-action",24),d["\u0275\u0275template"](26,bt,3,2,"nb-action",25),d["\u0275\u0275elementStart"](27,"nb-action"),d["\u0275\u0275element"](28,"img",26),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&t){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("nbSpinner",i.loading),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",i._marker.name," "),d["\u0275\u0275advance"](8),d["\u0275\u0275propertyInterpolate"]("src",i._marker.icon,d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("showToggleButton",!1)("revealed",i.showCard),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",i._marker.imgFiles.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",i._marker.otherFiles.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",0==i._marker.files.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](11,H)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngIf",i.showCard),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("nbIsGranted",d["\u0275\u0275pureFunction0"](12,H))}}var Ct=function(){function t(t,e,n,i,r,o,a,s){var c=this;this._lightbox=t,this._dialogRef=e,this._httpClient=n,this._FileSaverService=i,this._colService=r,this._stationService=o,this._accessChecker=a,this.router=s,this._marker=null,this.isEditing=!1,this.shadow=!1,this.showCard=!1,this.can=!1,this.options={path:"assets/lottie/loading-marker.json"},this.files=[],a.isGranted("Donwload Station PDF","all").subscribe({next:function(t){c.can=!!t}})}return t.prototype.ngOnInit=function(){var t=this;this._id&&this._stationService.getOne(this._id).take(1).subscribe({next:function(e){t._marker=e},error:function(t){console.error(t)}})},t.prototype.ngAfterViewInit=function(){},t.prototype.animationCreated=function(t){console.log(t)},t.prototype.open=function(t){this._lightbox.open(this._marker.imgFiles,t)},t.prototype.deleteFile=function(t,e,n){var i=this;this._colService.deleteFile(t).subscribe({next:function(t){t&&(i._colService.showToast("top left","success","Actualizado correctamente"),n.splice(e,1))},error:function(t){i._colService.showToast("top left","danger",t)}})},t.prototype.setEdit=function(){this.isEditing=this.files.length>0},t.prototype.editFile=function(t,e,n){var i=this;this.isEditing=!0;var o=this._colService.toFormData(t);this.files.map((function(t){return o.append("file",t)})),this.loading=!0,this._colService.uploadFiles(o).subscribe({next:function(o){o.type===r.e.UploadProgress&&(i.progress=Math.round(100*o.loaded/o.total)),o.type===r.e.Response&&(i.progress=0,o.error?(i._colService.showToast("top left","danger",o.error),i.setEdit(),t.editing=!1):(i._colService.showToast("top left","success","Actualizado correctamente"),i.files=[],i.setEdit(),t.editing=!1,Object.assign(n[e],o.body)),i.progress=0,i.loading=!1,i.setEdit(),t.editing=!1)},error:function(t){i.loading=!1,i.progress=0,i.isEditing=!1,i._colService.showToast("top left","danger",t)}})},t.prototype.openFile=function(t,e){var n=this,i="."+t.name+"."+t.icon;e&&this._httpClient.get(t.file_path,{observe:"response",responseType:"blob"}).subscribe((function(t){n._FileSaverService.save(t.body,i)}))},t.prototype.toggleCard=function(){this.showCard=!this.showCard},t.prototype.close=function(){this._lightbox.close()},t.prototype.closeModal=function(){this._dialogRef.close()},t.prototype.getBg=function(t){return"url("+t.src+")"},t.prototype.saveFiles=function(){this.child.uploadFiles()},t.prototype.onRemove=function(t){this.files.splice(this.files.indexOf(t),1)},t.prototype.onSelect=function(t){var e;(e=this.files).push.apply(e,t.addedFiles)},t.prototype.onKeyTitle=function(t,e){e.title=t.target.value},t.prototype.onKeyDesc=function(t,e){e.desc=t.target.value},t.prototype.donwloadPdf=function(){var t=this;this.can?(this.loading=!0,this._stationService.donwloadPdf(this._marker.id).subscribe((function(e){var n=new Blob([e],{type:"application/pdf"});t._FileSaverService.save(n,"Estaci\xf3n "+t._marker.name+".pdf"),t.loading=!1}))):setTimeout((function(){t.infoSwal.fire()}))},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](i.Lightbox),d["\u0275\u0275directiveInject"](p.H),d["\u0275\u0275directiveInject"](r.b),d["\u0275\u0275directiveInject"](S.b),d["\u0275\u0275directiveInject"](g),d["\u0275\u0275directiveInject"](m.a),d["\u0275\u0275directiveInject"](k.a),d["\u0275\u0275directiveInject"](E.c))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-station-view"]],viewQuery:function(t,e){var n;1&t&&(d["\u0275\u0275viewQuery"](M,!0),d["\u0275\u0275viewQuery"](N,!0)),2&t&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(e.child=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(e.infoSwal=n.first))},inputs:{_marker:"_marker",_id:"_id"},decls:4,vars:4,consts:[["class","mx-auto","width","300px","height","300px",3,"options","animationCreated",4,"ngIf"],["class","card-station  modal-content ","cdkDrag","",3,"nbSpinner",4,"ngIf"],["title","A\xfan no te has registrado?","text","Si deseas ver m\xe1s capas y descargar resportes, por favor registrate o ingresa a la plataforma con tu usuario.","icon","info","cancelButtonText","<i class='fa fa-sign-in'>\n</i> Ingresar","confirmButtonText","\n<i class='fa fa-plus' aria-hidden='true'></i> Quiero Registrarme.",3,"showCancelButton","focusCancel","confirm","cancel"],["infoSwal",""],["width","300px","height","300px",1,"mx-auto",3,"options","animationCreated"],["cdkDrag","",1,"card-station","modal-content",3,"nbSpinner"],[1,"d-flex","justify-content-between"],["cdkDragHandle","",1,"example-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["width","40","alt","icon",2,"z-index","10",3,"src"],["icon","close",3,"click"],[1,"reveal-card-files","shadow-sm",3,"showToggleButton","revealed"],["accent","success",2,"background-color","#f8f8f8"],["fullWidth","",1,"files-tabset"],["tabTitle","Gr\xe1ficos","tabIcon","person-outline",4,"ngIf"],["tabTitle","Archivos","tabIcon","bell-outline",4,"ngIf"],["tabTitle","Informaci\xf3n","tabIcon","bell-outline",4,"ngIf"],[4,"nbIsGranted"],[1,"d-flex","justify-content-end"],["size","small","fullWidth",""],[1,"align-self-center","download-report-btn",3,"click"],["src","assets/img/boton-pdf.png"],[3,"click",4,"ngIf"],[3,"click",4,"nbIsGranted"],["width","150","src","assets/img/logo.jpg","alt","logo obs"],["tabTitle","Gr\xe1ficos","tabIcon","person-outline"],[1,"d-flex","justify-content-center","flex-column"],[4,"ngFor","ngForOf"],[1,"drop-zone-fixed",3,"multiple","accept","change"],["drop",""],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file",4,"ngFor","ngForOf"],["class","card-picture ml-2 mt-3 align-items-stretch d-flex   align-self-center",4,"ngIf"],["title","Desea Borrar este archivo?","text","El archivo borrado no se podr\xe1 recuperar","icon","question",3,"showCancelButton","focusCancel","swalOptions","confirm"],["swalComp",""],[1,"card-picture","ml-2","mt-3","align-items-stretch","d-flex","align-self-center"],["width","24","height","24","src","assets/img/favicon.png"],[1,"cut-text"],[4,"ngIf"],["icon","expand-outline",3,"click"],[1,"picture",3,"click"],[1,"mt-1",3,"src","alt"],["style","max-width:100%; overflow: auto;","class","d-flex justify-stretch",4,"ngIf"],["class","d-flex flex-column",4,"nbIsGranted"],["fieldSize","tiny","placeholder","Titulo","fullWidth","","shape","round","type","text","nbInput","",1,"my-2",3,"value","keyup"],[1,"d-flex","justify-stretch",2,"max-width","100%","overflow","auto"],[1,"d-flex","flex-wrap"],[1,"d-flex","flex-column"],["size","tiny","fullWidth",""],["icon","trash-2-outline",3,"click"],["placeholder","Descripci\xf3n","fieldSize","tiny","fullWidth","","shape","round","type","text","nbInput","",3,"value","keyup"],[3,"click"],["icon","edit-2-outline","status","info"],["icon","save-outline","status","success"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file"],["tabTitle","Archivos","tabIcon","bell-outline"],[1,"d-flex","justify-content-start","flex-column",2,"max-width","100%"],[1,"drop-zone-fixed",3,"multiple","change"],[1,"row","d-flex","justify-content-between"],["nbTooltipStatus","primary","status","primary","class","ml-4 justify-content-start ","size","tiny","ghost","","nbButton","",3,"nbTooltip","click",4,"ngIf"],["nbTooltipStatus","primary","status","primary","size","tiny","ghost","","nbButton","",1,"ml-4","justify-content-start",3,"nbTooltip","click"],[3,"ngSwitch"],["width","32","src","assets/img/icons/csv.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/pdf.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/word.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/ppt.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/xls.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/png.png",4,"ngSwitchCase"],["width","32","src","assets/img/icons/jpg.ico",4,"ngSwitchCase"],["width","32","src","assets/img/icons/file.png",4,"ngSwitchDefault"],[1,"details"],["width","32","src","assets/img/icons/csv.png"],["width","32","src","assets/img/icons/pdf.png"],["width","32","src","assets/img/icons/word.png"],["width","32","src","assets/img/icons/ppt.png"],["width","32","src","assets/img/icons/xls.png"],["width","32","src","assets/img/icons/png.png"],["width","32","src","assets/img/icons/jpg.ico"],["width","32","src","assets/img/icons/file.png"],["tabTitle","Informaci\xf3n","tabIcon","bell-outline"],["status","control"],[3,"_station"],["status","success","icon","save-outline"],["icon","cloud-upload-outline",4,"ngIf"],["icon","close",4,"ngIf"],["icon","cloud-upload-outline"],["icon","close"]],template:function(t,e){1&t&&(d["\u0275\u0275template"](0,B,1,1,"ng-lottie",0),d["\u0275\u0275template"](1,_t,29,13,"nb-card",1),d["\u0275\u0275elementStart"](2,"swal",2,3),d["\u0275\u0275listener"]("confirm",(function(){return e.router.navigateByUrl("/auth/login")}))("cancel",(function(){return e.router.navigateByUrl("/auth/login")})),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275property"]("ngIf",!e._marker),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e._marker),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0))},directives:[v.v,L.a,T.b,p.w,R.a,p.Cb,p.z,p.l,p.k,R.b,p.v,p.tb,p.y,p.Mb,k.c,p.x,p.Lb,v.u,y.a,p.K,p.Q,p.M,y.b,y.g,p.s,p.Ub,v.z,v.A,v.B,p.u,M],styles:[".nb-theme-default   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-default   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-default   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-default   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-default   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-default   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-default   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-default   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-default   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-default   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-default   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-default   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-default   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-dark   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-dark   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-dark   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-dark   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-dark   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-dark   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-dark   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-dark   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-dark   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-dark   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-dark   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-cosmic   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-cosmic   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-cosmic   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-cosmic   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-cosmic   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-cosmic   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-cosmic   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-cosmic   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-cosmic   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-cosmic   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-cosmic   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-corporate   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-corporate   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-corporate   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-corporate   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-corporate   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-corporate   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-corporate   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-corporate   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-corporate   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-corporate   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-corporate   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-corporate   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-corporate   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-material-dark   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-material-dark   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-material-dark   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-material-dark   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-material-dark   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-material-dark   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-material-dark   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-material-dark   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-material-dark   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-material-dark   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-material-dark   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-material-dark   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-dark   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-material-dark   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-material-light   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-material-light   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-material-light   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-material-light   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-material-light   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-material-light   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-material-light   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-material-light   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-material-light   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-material-light   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-material-light   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-material-light   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-material-light   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-material-light   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}.nb-theme-obsrio   [_nghost-%COMP%]   .download-report-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:230px;cursor:pointer}.nb-theme-obsrio   [_nghost-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.nb-theme-obsrio   [_nghost-%COMP%]   .card-station[_ngcontent-%COMP%]{max-height:100vh;height:100vh;max-width:100vw;min-width:80vw;background-color:#f8f8f8}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:600px;max-width:600px;max-height:600px;min-width:250px;min-height:250px}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{cursor:pointer}.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px #23adff}.nb-theme-obsrio   [_nghost-%COMP%]   .drop-zone-fixed[_ngcontent-%COMP%]{border:0}.nb-theme-obsrio   [_nghost-%COMP%]     nb-tab{width:100%;height:100vh}.nb-theme-obsrio   [_nghost-%COMP%]     .files-tabset{width:100%;height:90vh;overflow:hidden}.nb-theme-obsrio   [_nghost-%COMP%]     .files-tabset nb-tab{height:100%;margin-top:0;padding-top:0;padding-bottom:50vh}.nb-theme-obsrio   [_nghost-%COMP%]     .reveal-card-files{height:100%}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone.drop-zone-fixed{height:0}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone-image-preview img{border:2px solid #00f;max-width:150px}.nb-theme-obsrio   [_nghost-%COMP%]     ngx-dropzone-image-preview.ng-star-inserted{position:absolute!important;top:-40px;right:0}@media (max-width:767.98px){.nb-theme-obsrio   [_nghost-%COMP%]   .card-picture[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(0,0,0,.2);transition:all .2s ease-out;width:250px;height:250px;min-width:250px}.nb-theme-obsrio   [_nghost-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100px}.nb-theme-obsrio   [_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0!important}.nb-theme-obsrio   [_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{min-width:250px;min-height:250px;padding:20px 0 10px}}.nb-theme-obsrio   [_nghost-%COMP%]   .cut-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:500px;height:1.2em;white-space:nowrap}"]}),t}()},AxvH:function(t,e,n){"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],i=e[2].split(";"),r=null,o=i.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(r||(r=n.value),t):(t[n.key]=n.value,t):t}),{});return r?{url:n,rel:r,params:o}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}}},Bi8L:function(t,e,n){"use strict";var i=n("R/WN");window.Suggestions=t.exports=i},CH9F:function(t,e,n){var i=n("P7XM"),r=n("tnIz"),o=n("hwdV").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,r.call(this,64,56)}function l(t){return t<<30|t>>>2}function u(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,c=0|this._e,h=0;h<16;++h)n[h]=t.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var d=0;d<80;++d){var p=~~(d/20),f=0|((e=i)<<5|e>>>27)+u(p,r,o,s)+c+n[d]+a[p];c=s,s=o,o=l(r),r=i,i=f}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=c},CqXF:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("5yrX"),r=n("uW9d"),o=n("zu60"),a=n("rrZM"),s=n("7o/Q");function c(t){return function(e){return e.lift(new l(t))}}var l=function(){function t(e){Object(o.a)(this,t),this.value=e}return Object(a.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.value))}}]),t}(),u=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t,i){var r;return Object(o.a)(this,n),(r=e.call(this,t)).value=i,r}return Object(a.a)(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(s.a)},Cu2R:function(t,e,n){"use strict";var i=n("ncV3"),r=n("KXza");t.exports=function(t){return function(e){var n;n=i.prototype.isPrototypeOf(e)?e:r(e);var o=Object.create(t);return o.client=n,o}}},DqeK:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("mrSG"),r=n("fXoL"),o=n("mvqV"),a=n("RS3s"),s=n("LRne"),c=n("lJxs"),l=n("aceb"),u=n("ofXK"),h=["autoInput"];function d(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"nb-option",6),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n," ")}}var p=function(t){function e(e){var n=t.call(this)||this;return n._stationsService=e,n.selected=new r.EventEmitter,n.group=null,n.initSel="",n}return Object(i.c)(e,t),e.prototype.filter=function(t){var e=t.toLowerCase();return this.groups.filter((function(t){return t.toLowerCase().includes(e)}))},e.prototype.ngOnInit=function(){null===this.group&&this.cell.getValue()&&(this.group=this.cell.getValue()),this.initSel=this.group,this.retreiveData()},e.prototype.retreiveData=function(){var t=this;this._stationsService.getAllGroups().subscribe((function(e){t.groups=e,t.filteredOptions$=Object(s.a)(t.groups)}))},e.prototype.getFilteredOptions=function(t){var e=this;return Object(s.a)(t).pipe(Object(c.a)((function(t){return e.filter(t)})))},e.prototype.onChange=function(){this.filteredOptions$=this.getFilteredOptions(this.input.nativeElement.value),this.setValue(this.input.nativeElement.value)},e.prototype.onSelectionChange=function(t){this.filteredOptions$=this.getFilteredOptions(t),this.selected.emit(t),this.setValue(t)},e.prototype.setValue=function(t){void 0!==this.cell&&this.cell.setValue(t),this.group=t,this.selected.emit(this.group)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-stations-group-select"]],viewQuery:function(t,e){var n;1&t&&r["\u0275\u0275viewQuery"](h,!0),2&t&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(e.input=n.first)},inputs:{group:"group"},outputs:{selected:"selected"},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:6,consts:[[1,"m-0"],["fullWidth","","nbInput","","type","text","placeholder","Escriba un Grupo","autocomplete","off",3,"value","id","nbAutocomplete","input"],["autoInput",""],[3,"selectedChange"],["auto",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"input",1,2),r["\u0275\u0275listener"]("input",(function(){return e.onChange()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-autocomplete",3,4),r["\u0275\u0275listener"]("selectedChange",(function(t){return e.onSelectionChange(t)})),r["\u0275\u0275template"](5,d,2,2,"nb-option",5),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275reference"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",e.initSel)("id",null==e.cell?null:e.cell.getId())("nbAutocomplete",n),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](6,4,e.filteredOptions$))}},directives:[l.w,l.Q,l.q,l.p,u.u,l.ib],pipes:[u.b],styles:[""]}),e}(a.a)},EnSh:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var i=n("zu60"),r=n("rrZM"),o=n("fXoL"),a=n("Iab2"),s=(n("tk/3"),function(){var t=function(){function t(){Object(i.a)(this,t)}return Object(r.a)(t,[{key:"genType",value:function(t){if(!t||-1===t.lastIndexOf("."))return"text/plain";var e=t.substr(t.lastIndexOf(".")+1);switch(e){case"txt":return"text/plain";case"xml":case"html":return"text/".concat(e);case"json":return"octet/stream";default:return"application/".concat(e)}}},{key:"save",value:function(t,e,n,i){if(!t)throw new Error("Data argument should be a blob instance");var r=new Blob([t],{type:n||t.type||this.genType(e)});Object(a.saveAs)(r,decodeURI(e||"download"),i)}},{key:"saveText",value:function(t,e,n){var i=new Blob([t]);this.save(i,e,null,n)}},{key:"isFileSaverSupported",get:function(){try{return!!new Blob}catch(t){return!1}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t}()),c=function(){var t=function t(){Object(i.a)(this,t)};return t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)}}),t}()},H7XF:function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,i=l(t),a=i[0],s=i[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(u(t,s,s+a>c?c:s+a));return 1===r?o.push(i[(e=t[n-1])>>2]+i[e<<4&63]+"=="):2===r&&o.push(i[(e=(t[n-2]<<8)+t[n-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,o=[],a=e;a<n;a+=3)o.push(i[(r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},Iab2:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,a){var s=r.URL||r.webkitURL,c=document.createElement("a");c.download=o=o||t.name||"download",c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):n(c.href)?e(t,o,a):i(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,o){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),r);else if(n(t))e(t,r,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){i(a)}))}}:function(t,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var a="application/octet-stream"===t.type,s=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var u=r.URL||r.webkitURL,h=u.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});r.saveAs=o.saveAs=o,t.exports=o})?i.apply(e,[]):i)||(t.exports=r)},KXza:function(t,e,n){"use strict";var i=n("oGbY"),r=n("ncV3");function o(t){r.call(this,t)}(o.prototype=Object.create(r.prototype)).constructor=o,o.prototype.sendRequest=i.browserSend,o.prototype.abortRequest=i.browserAbort,t.exports=function(t){return new o(t)}},KtRk:function(t,e,n){"use strict";var i=n("U6jy"),r=n("pit/");t.exports=i(r,{file:function(t){if("undefined"!=typeof window){if(t instanceof global.Blob||t instanceof global.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){var e="date";if("boolean"==typeof t)return e;try{var n=new Date(t);if(n.getTime&&isNaN(n.getTime()))return e}catch(i){return e}},coordinates:function(t){return r.tuple(r.number,r.number)(t)},assertShape:function(t,e){return r.assert(r.strictShape(t),e)}})},LFDd:function(t,e,n){"use strict";var i=n("U6jy"),r=n("KtRk"),o=n("baNz"),a=n("eFQn"),s=n("Cu2R"),c={},l=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];c.forwardGeocode=function(t){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.coordinates,types:r.arrayOf(r.oneOf(l)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string)})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},o(t,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},c.reverseGeocode=function(t){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(l)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score")})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},o(t,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},t.exports=s(c)},"NkL+":function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===i.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},P7XM:function(t,e){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},"P8+q":function(t,e,n){var i;t.exports=i={},i.simpleFilter=function(t,e){return e.filter((function(e){return i.test(t,e)}))},i.test=function(t,e){return null!==i.match(t,e)},i.match=function(t,e,n){var i,r=0,o=[],a=e.length,s=0,c=0,l=(n=n||{}).pre||"",u=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var d=0;d<a;d++)i=e[d],h[d]===t[r]?(i=l+i+u,r+=1,c+=1+c):c=0,s+=c,o[o.length]=i;return r===t.length?(s=h===t?1/0:s,{rendered:o.join(""),score:s}):null},i.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce((function(e,r,o,a){var s=r;n.extract&&(s=n.extract(r));var c=i.match(t,s,n);return null!=c&&(e[e.length]={string:c.rendered,score:c.score,index:o,original:r}),e}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))):[]}},"R/WN":function(t,e,n){"use strict";var i=n("U6jy"),r=n("P8+q"),o=n("SX8C"),a=function(t,e,n){return this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};a.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},a.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},a.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(t){this.data=t,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(t){return t.toLowerCase()},a.prototype.match=function(t,e){return t.indexOf(e)>-1},a.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?r.filter(this.query,this.data,e).map((function(t){return{original:t.original,string:this.render(t.original,t.string)}}).bind(this)):this.data.map((function(t){return{original:t,string:this.render(t)}}).bind(this)))},a.prototype.getItemValue=function(t){return t},a.prototype.render=function(t,e){if(e)return e;for(var n=this.getItemValue(t.original?t.original:t),i=this.normalize(n),r=i.lastIndexOf(this.query);r>-1;){var o=r+this.query.length;n=n.slice(0,r)+"<strong>"+n.slice(r,o)+"</strong>"+n.slice(o),r=i.slice(0,r).lastIndexOf(this.query)}return n},a.prototype.renderError=function(t){this.list.drawError(t)},t.exports=a},SX8C:function(t,e,n){"use strict";var i=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};i.prototype.show=function(){this.element.style.display="block"},i.prototype.hide=function(){this.element.style.display="none"},i.prototype.add=function(t){this.items.push(t)},i.prototype.clear=function(){this.items=[],this.active=0},i.prototype.isEmpty=function(){return!this.items.length},i.prototype.isVisible=function(){return"block"===this.element.style.display},i.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},i.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},i.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},i.prototype.move=function(t){this.active=t,this.draw()},i.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},i.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},i.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=i},"Smn/":function(t,e,n){"use strict";t.exports=function(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=e(i,t[i]),n}),{})}},SsYf:function(t,e){t.exports={"country.3148":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.3145":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.330":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.3179":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},T9HO:function(t,e,n){var i=n("P7XM"),r=n("tnIz"),o=n("hwdV").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function c(){this.init(),this._w=s,r.call(this,128,112)}function l(t,e,n){return n^t&(e^n)}function u(t,e,n){return t&e|n&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}i(c,r),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(t){for(var e=this._w,n=0|this._ah,i=0|this._bh,r=0|this._ch,o=0|this._dh,s=0|this._eh,c=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,C=0|this._bl,x=0|this._cl,w=0|this._dl,I=0|this._el,A=0|this._fl,P=0|this._gl,O=0|this._hl,M=0;M<32;M+=2)e[M]=t.readInt32BE(4*M),e[M+1]=t.readInt32BE(4*M+4);for(;M<160;M+=2){var S=e[M-30],k=e[M-30+1],E=p(S,k),L=f(k,S),T=g(S=e[M-4],k=e[M-4+1]),R=m(k,S),N=e[M-32],B=e[M-32+1],j=L+e[M-14+1]|0,D=E+e[M-14]+v(j,L)|0;D=(D=D+T+v(j=j+R|0,R)|0)+N+v(j=j+B|0,B)|0,e[M]=D,e[M+1]=j}for(var F=0;F<160;F+=2){D=e[F],j=e[F+1];var z=u(n,i,r),V=u(_,C,x),G=h(n,_),Z=h(_,n),W=d(s,I),H=d(I,s),U=a[F],$=a[F+1],K=l(s,c,y),X=l(I,A,P),Y=O+H|0,q=b+W+v(Y,O)|0;q=(q=(q=q+K+v(Y=Y+X|0,X)|0)+U+v(Y=Y+$|0,$)|0)+D+v(Y=Y+j|0,j)|0;var J=Z+V|0,Q=G+z+v(J,Z)|0;b=y,O=P,y=c,P=A,c=s,A=I,s=o+q+v(I=w+Y|0,w)|0,o=r,w=x,r=i,x=C,i=n,C=_,n=q+Q+v(_=Y+J|0,Y)|0}this._al=this._al+_|0,this._bl=this._bl+C|0,this._cl=this._cl+x|0,this._dl=this._dl+w|0,this._el=this._el+I|0,this._fl=this._fl+A|0,this._gl=this._gl+P|0,this._hl=this._hl+O|0,this._ah=this._ah+n+v(this._al,_)|0,this._bh=this._bh+i+v(this._bl,C)|0,this._ch=this._ch+r+v(this._cl,x)|0,this._dh=this._dh+o+v(this._dl,w)|0,this._eh=this._eh+s+v(this._el,I)|0,this._fh=this._fh+c+v(this._fl,A)|0,this._gh=this._gh+y+v(this._gl,P)|0,this._hh=this._hh+b+v(this._hl,O)|0},c.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=c},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)n.call(i,r)&&(t[r]=i[r])}return t};var n=Object.prototype.hasOwnProperty},VcZd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("oKp4")},"WVt+":function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&A(i),r&&P(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&A(a),t){case"Point":r=i(e).geometry;break;case"LineString":r=s(e).geometry;break;case"Polygon":r=o(e).geometry;break;case"MultiPoint":r=h(e).geometry;break;case"MultiLineString":r=u(e).geometry;break;case"MultiPolygon":r=d(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(r.bbox=a),r}function i(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,i)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return i(t,e)})),n)}function o(t,n,i){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===r&&0===a&&!w(o[0][0])||!w(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,i)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return o(t,e)})),n)}function s(t,n,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!w(t[0][1])||!w(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,i)}function c(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return s(t,e)})),n)}function l(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&A(n),i&&P(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function u(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,i)}function h(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,i)}function d(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,i)}function p(t,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,i)}function f(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=xo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=xo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function v(t,e){return b(m(t,e))}function y(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function b(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function _(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function C(t,e,n){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(m(t,e),n||"kilometers")}function x(t,e,n){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var i=Io[e||"meters"];if(!i)throw new Error("invalid original units");var r=Io[n||"kilometers"];if(!r)throw new Error("invalid final units");return t/i*r}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function A(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!w(t))throw new Error("bbox must only contain numbers")}))}function P(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function O(t,e,n){if(null!==t)for(var i,r,o,a,s,c,l,u,h=0,d=0,p=t.type,f="FeatureCollection"===p,g="Feature"===p,m=f?t.features.length:1,v=0;v<m;v++){s=(u=!!(l=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var y=0;y<s;y++){var b=0,_=0;if(null!==(a=u?l.geometries[y]:l)){c=a.coordinates;var C=a.type;switch(h=!n||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":e(c,d,v,b,_),d++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++)e(c[i],d,v,b,_),d++,"MultiPoint"===C&&b++;"LineString"===C&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(r=0;r<c[i].length-h;r++)e(c[i][r],d,v,b,_),d++;"MultiLineString"===C&&b++,"Polygon"===C&&_++}"Polygon"===C&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for("MultiPolygon"===C&&(_=0),r=0;r<c[i].length;r++){for(o=0;o<c[i][r].length-h;o++)e(c[i][r][o],d,v,b,_),d++;_++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)O(a.geometries[i],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,i){var r=n;return O(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),i),r}function S(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function k(t,e,n){var i=n;return S(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function E(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function L(t,e,n){var i=n;return E(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function T(t){var e=[];return O(t,(function(t){e.push(t)})),e}function R(t,e){var n,i,r,o,a,s,c,l,u,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(l=p?t.features[n].properties:f?t.properties:{},u=p?t.features[n].bbox:f?t.bbox:void 0,h=p?t.features[n].id:f?t.id:void 0,a=(c=!!(s=p?t.features[n].geometry:f?t.geometry:t)&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=c?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,d,l,u,h);break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],d,l,u,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,d,l,u,h);d++}}function N(t,e,n){var i=n;return R(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)})),i}function B(t,n){R(t,(function(t,i,r,o,a){var s,c=null===t?null:t.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,r,{bbox:o,id:a}),i,0)}switch(c){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},r),i,o)}))}))}function j(t,e,n){var i=n;return B(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i}function D(t,e){B(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&M(t,(function(o,a,c,l,u,h){var d=s([o,a],t.properties);return e(d,n,i,h,r),r++,a}))}}))}function F(t,e,n){var i=n,r=!1;return D(t,(function(t,o,a,s,c){i=!1===r&&void 0===n?t:e(i,t,o,a,s,c),r=!0})),i}function z(t,e){if(!t)throw new Error("geojson is required");B(t,(function(t,n,i){if(null!==t.geometry){var r=t.geometry.coordinates;switch(t.geometry.type){case"LineString":e(t,n,i,0,0);break;case"Polygon":for(var o=0;o<r.length;o++)e(s(r[o],t.properties),n,i,o)}}}))}function V(t,e,n){var i=n;return z(t,(function(t,r,o,a){i=0===r&&void 0===n?t:e(i,t,r,o,a)})),i}function G(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Z(t){if(!t)throw new Error("obj is required");var e=W(t);if(e.length>1&&w(e[0])&&w(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function W(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return H(e),e;throw new Error("No valid coordinates")}function H(t){if(t.length>1&&w(t[0])&&w(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return H(t[0]);throw new Error("coordinates must only contain numbers")}function U(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function $(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function K(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}function X(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Y(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function q(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function J(t,e,n){n=n||{};for(var i=Object.keys(Mo),r=0;r<i.length;r++){var o=i[r],a=n[o];So[o]=a=null!=a?a:Mo[o]}So.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.cells.forEach((function(i,r){i.forEach((function(i,o){if(void 0!==i&&!function(t){return 5===t.cval||10===t.cval}(i)&&!tt(i)){var a=function(t,e,n){var i,r,o,a=t.length,s=[],c=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],d=h.cval,p=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][d]);s.push([n+p[0],e+p[1]]),p=nt(h,o=u[d]),s.push([n+p[0],e+p[1]]),et(h);for(var f=n+c[d],g=e+l[d],m=d;f>=0&&g>=0&&g<a&&(f!=n||g!=e)&&void 0!==(h=t[g][f]);){if(0===(d=h.cval)||15===d)return{path:s,info:"mergeable"};o=u[d],i=c[d],r=l[d],5!==d&&10!==d||(5===d?h.flipped?-1===l[m]?(o="left",i=-1,r=0):(o="right",i=1,r=0):-1===c[m]&&(o="bottom",i=0,r=-1):10===d&&(h.flipped?-1===c[m]?(o="top",i=0,r=1):(o="bottom",i=0,r=-1):1===l[m]&&(o="left",i=-1,r=0))),p=nt(h,o),s.push([f+p[0],g+p[1]]),et(h),f+=i,g+=r,m=d}return{path:s,info:"closed"}}(t.cells,r,o),s=!1;if("mergeable"===a.info)for(var c=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],u=n-1;u>=0;u--)if(Math.abs(e[u][0][0]-c)<=1e-7&&Math.abs(e[u][0][1]-l)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[u].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var a=0;a<i;++a){var s=0,c=t[o+1][a],l=t[o+1][a+1],u=t[o][a+1],h=t[o][a];if(!(isNaN(c)||isNaN(l)||isNaN(u)||isNaN(h))){s|=c>=e?8:0,s|=l>=e?4:0,s|=u>=e?2:0;var d,p,f,g,m=!1;if(5==(s|=h>=e?1:0)||10===s){var v=(c+l+u+h)/4;5===s&&v<e?(s=10,m=!0):10===s&&v<e&&(s=5,m=!0)}0!==s&&15!==s&&(d=p=f=g=.5,1===s?(f=1-Q(e,c,h),p=1-Q(e,u,h)):2===s?(p=Q(e,h,u),g=1-Q(e,l,u)):3===s?(f=1-Q(e,c,h),g=1-Q(e,l,u)):4===s?(d=Q(e,c,l),g=Q(e,u,l)):5===s?(d=Q(e,c,l),g=Q(e,u,l),p=1-Q(e,u,h),f=1-Q(e,c,h)):6===s?(p=Q(e,h,u),d=Q(e,c,l)):7===s?(f=1-Q(e,c,h),d=Q(e,c,l)):8===s?(f=Q(e,h,c),d=1-Q(e,l,c)):9===s?(p=1-Q(e,u,h),d=1-Q(e,l,c)):10===s?(d=1-Q(e,l,c),g=1-Q(e,l,u),p=Q(e,h,u),f=Q(e,h,c)):11===s?(d=1-Q(e,l,c),g=1-Q(e,l,u)):12===s?(f=Q(e,h,c),g=Q(e,u,l)):13===s?(p=1-Q(e,u,h),g=Q(e,u,l)):14===s?(f=Q(e,h,c),p=Q(e,h,u)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),r.cells[o][a]={cval:s,flipped:m,top:d,right:g,bottom:p,left:f})}}}return r}(t,e));return"function"==typeof So.successCallback&&So.successCallback(s),s}function Q(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function it(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function rt(t,e){if(!(this instanceof rt))return new rt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,i,r){r||(r=ft(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],st(r,t.leaf?i(o):o);return r}function st(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ct(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ut(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ft(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,ko(t,o,e,n,r),a.push(e,o,o,n))}function mt(t,e){return t(e={exports:{}},e.exports),e.exports}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function yt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var s=[e,n,i,r],c=s.slice();for(o=0;o<t.length;o++)Zo(t[o],s)||c.push(t[o]);var l=Fo(c),u=[];for(o=0;o<l.length;o++)u.push(c[l[o]]);return u}(t),o=Eo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<r.length;s++){var c=r[s];o.remove(c),i=wt(c,i),a.push(i)}var l=Eo(16);for(s=0;s<a.length;s++)l.insert(xt(a[s]));for(var u=e*e,h=n*n;a.length;){var d=a.shift(),p=d.p,f=d.next.p,g=It(p,f);if(!(g<h)){var m=g/u;(c=function(t,e,n,i,r,o,a){for(var s=new Vo(null,bt),c=t.data;c;){for(var l=0;l<c.children.length;l++){var u=c.children[l],h=c.leaf?At(u,n,i):function(t,e,n){if(_t(t,n)||_t(e,n))return 0;var i=Pt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=Pt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=Pt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Pt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}(n,i,u);h>o||s.push({node:u,dist:h})}for(;s.length&&!s.peek().node.children;){var d=s.pop(),p=d.node,f=At(p,e,n),g=At(p,i,r);if(d.dist<f&&d.dist<g&&Ct(n,p,a)&&Ct(i,p,a))return p}(c=s.pop())&&(c=c.node)}return null}(o,d.prev.p,p,f,d.next.next.p,m,l))&&Math.min(It(c,p),It(c,f))<=m&&(a.push(d),a.push(wt(c,d)),o.remove(c),l.remove(d),l.insert(xt(d)),l.insert(xt(d.next)))}}d=i;var v=[];do{v.push(d.p),d=d.next}while(d!==i);return v.push(d.p),v}function bt(t,e){return t.dist-e.dist}function _t(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Ct(t,e,n){for(var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:i,minY:r,maxX:o,maxY:a}),c=0;c<s.length;c++)if(function(t,e,n,i){return t!==i&&e!==n&&Wo(t,e,n)>0!=Wo(t,e,i)>0&&Wo(n,i,t)>0!=Wo(n,i,e)>0}(s[c].p,s[c].next.p,t,e))return!1;return!0}function xt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function wt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function It(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function At(t,e,n){var i=e[0],r=e[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((t[0]-i)*o+(t[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=t[0]-i)*o+(a=t[1]-r)*a}function Pt(t,e,n,i,r,o,a,s){var c,l,u,h,d=n-t,p=i-e,f=a-r,g=s-o,m=t-r,v=e-o,y=d*d+p*p,b=d*f+p*g,_=f*f+g*g,C=d*m+p*v,x=f*m+g*v,w=y*_-b*b,I=w,A=w;0===w?(l=0,I=1,h=x,A=_):(h=y*x-b*C,(l=b*x-_*C)<0?(l=0,h=x,A=_):l>I&&(l=I,h=x+b,A=_)),h<0?(h=0,-C<0?l=0:-C>y?l=I:(l=-C,I=y)):h>A&&(h=A,-C+b<0?l=0:-C+b>y?l=I:(l=-C+b,I=y));var P=(1-(u=0===h?0:h/A))*r+u*a-((1-(c=0===l?0:l/I))*t+c*n),O=(1-u)*o+u*s-((1-c)*e+c*i);return P*P+O*O}function Ot(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,i=[];if(O(t,(function(t){i.push([t[0],t[1]])})),!i.length)return null;var r=Ho(i,n);return r.length>3?o([r]):null}function Mt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Z(t),o=W(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===a&&(o=[o]);for(var c=0,l=!1;c<o.length&&!l;c++)if(St(r,o[c][0],i)){for(var u=!1,h=1;h<o[c].length&&!u;)St(r,o[c][h],!i)&&(u=!0),h++;u||(l=!0)}return l}function St(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],c=e[o][0],l=e[o][1];if(t[1]*(a-c)+s*(c-t[0])+l*(t[0]-a)==0&&(a-t[0])*(c-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(c-a)*(t[1]-s)/(l-s)+a&&(i=!i)}return i}function kt(t,e){var n=[];return R(e,(function(e){E(t,(function(t){Mt(t,e)&&n.push(t)}))})),l(n)}function Et(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return l(function(t){if(t.length<3)return[];t.sort(Tt);for(var e,n,i,r=t.length-1,o=t[r].x,a=t[0].x,s=t[r].y,c=s;r--;)t[r].y<s&&(s=t[r].y),t[r].y>c&&(c=t[r].y);var l,u=a-o,h=c-s,d=u>h?u:h,p=.5*(a+o),f=.5*(c+s),g=[new Lt({x:p-20*d,y:f-d,__sentinel:!0},{x:p,y:f+20*d,__sentinel:!0},{x:p+20*d,y:f-d,__sentinel:!0})],m=[],v=[];for(r=t.length;r--;){for(v.length=0,l=g.length;l--;)(u=t[r].x-g[l].x)>0&&u*u>g[l].r?(m.push(g[l]),g.splice(l,1)):u*u+(h=t[r].y-g[l].y)*h>g[l].r||(v.push(g[l].a,g[l].b,g[l].b,g[l].c,g[l].c,g[l].a),g.splice(l,1));for(Rt(v),l=v.length;l;)n=v[--l],e=v[--l],i=t[r],Math.abs(2*((n.x-e.x)*(i.y-n.y)-(n.y-e.y)*(i.x-n.x)))>1e-12&&g.push(new Lt(e,n,i))}for(Array.prototype.push.apply(m,g),r=m.length;r--;)(m[r].a.__sentinel||m[r].b.__sentinel||m[r].c.__sentinel)&&m.splice(r,1);return m}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,i,r,e]],a)})))}function Lt(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,c=n.y-t.y,l=o*(t.x+e.x)+a*(t.y+e.y),u=s*(t.x+n.x)+c*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(c*l-a*u)/h,this.y=(o*u-s*l)/h,this.r=(i=this.x-t.x)*i+(r=this.y-t.y)*r}function Tt(t,e){return e.x-t.x}function Rt(t){var e,n,i,r,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],i=a;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(a,2),t.splice(i,2),a-=2;continue t}}function Nt(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.units,r=Z(t),o=Z(e),a=_(o[1]-r[1]),s=_(o[0]-r[0]),c=_(r[1]),l=_(o[1]),u=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(c)*Math.cos(l);return g(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),i)}function Bt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return jt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return jt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Dt(t);default:throw new Error("unknown GeoJSON type")}}function jt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(i){var r=e[i];n[i]="object"==typeof r?null===r?null:r.length?r.map((function(t){return t})):t(r):r})),n):n}(t.properties),e.geometry=Dt(t.geometry),e}function Dt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Dt(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}function Ft(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],i=0,r=n.length;i<r;++i)e.push(s(n[i],i));t<0&&Ko(e,r)}function i(t){return s(t)}function r(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=r(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}var s=$o(t.transform),c=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=r(e.arcs);break;case"MultiLineString":n=e.arcs.map(r);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:o,coordinates:n}}(e)}function zt(t,e){function n(t){t.forEach((function(e){e.forEach((function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)}))})),o.push(t)}function i(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)o+=(e=r)[0]*(r=t[n])[1]-e[1]*r[0];return Math.abs(o)}(Ft(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var r={},o=[],a=[];return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}})),o.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:a.map((function(e){var n,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].length<2&&o.push(t)}))}))})),(n=(o=Xo(t,o)).length)>1)for(var a,s,c=1,l=i(o[0]);c<n;++c)(a=i(o[c]))>l&&(s=o[0],o[0]=o[c],o[c]=s,l=a);return o}))}}function Vt(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function Gt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Zt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Zt:Wt)(t)}function Zt(t){var e,n=Wt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Wt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Wt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ht(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function Ut(t,e){var n,i=t[0],r=t[1],o=e[0],a=e[1];return r<i&&(n=i,i=r,r=n),a<o&&(n=o,o=a,a=n),i===o&&r===a}function $t(t){return t[0].toString()+","+t[1].toString()}function Kt(t,n){var i="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var r=q(t),o=[];switch(r){case"LineString":o=Xt(t);break;case"MultiLineString":case"Polygon":W(t).forEach((function(t){o.push(Xt(t))}));break;case"MultiPolygon":W(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Xt(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};W(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=o,t):{type:r,coordinates:o}:!0===i?(t.geometry.coordinates=o,t):e({type:r,coordinates:o},t.properties,t.bbox)}function Xt(t){var e=W(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,i,r=[],o=e.length-1;r.push(e[0]);for(var a=1;a<o;a++)(function(t,e,n){var i=n[0],r=n[1],o=t[0],a=t[1],s=e[0],c=e[1],l=s-o,u=c-a;return(i-o)*u-(r-a)*l==0&&(Math.abs(l)>=Math.abs(u)?l>0?o<=i&&i<=s:s<=i&&i<=o:u>0?a<=r&&r<=c:c<=r&&r<=a)})(e[a-1],i=e[a+1],n=e[a])||r.push(n);return r.push(i),r}function Yt(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function qt(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return(o=t.x-i)*o+(a=t.y-r)*a}function Jt(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,o){for(var a,s=r,c=n+1;c<i;c++){var l=qt(e[c],e[n],e[i]);l>s&&(a=c,s=l)}s>r&&(a-n>1&&t(e,n,a,r,o),o.push(e[a]),i-a>1&&t(e,a,i,r,o))}(t,0,n,e,i),i.push(t[n]),i}(t=n?t:function(t,e){for(var n,i=t[0],r=[i],o=1,a=t.length;o<a;o++)Yt(n=t[o],i)>e&&(r.push(n),i=n);return i!==n&&r.push(n),r}(t,i),i)}function Qt(t,e,n){return Jt(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function te(t,e,n){return t.map((function(t){var i=t.map((function(t){return{x:t[0],y:t[1]}}));if(i.length<4)throw new Error("invalid polygon");for(var r=Jt(i,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(r);)r=Jt(i,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function ee(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,i=e.sharpness||.85;if(!t)throw new Error("line is required");if(!w(n))throw new Error("resolution must be an number");if(!w(i))throw new Error("sharpness must be an number");for(var r=[],o=new ra({points:X(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:i}),a=0;a<o.duration;a+=10){var c=o.pos(a);Math.floor(a/100)%2==0&&r.push([c.x,c.y])}return s(r,t.properties)}function ne(t){A(t);var e=Number(t[0]),n=Number(t[1]),i=Number(t[2]),r=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[i,n],[i,r],[e,r],a]])}function ie(t){return ne(G(t))}function re(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(Nt(t.slice(0,2),[i,n])>=Nt(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var a=(e+i)/2;return[a-(r-n)/2,n,a+(r-n)/2,r]}function oe(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var o=r.units,a=r.properties,s=Z(t),c=_(s[0]),l=_(s[1]),u=_(n),h=m(e,o),d=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(u));return i([b(c+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(d))),b(d)],a)}function ae(t,e,n){var i=(n=n||{}).steps||64,r=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be a number");i=i||64,r=r||t.properties||{};for(var a=[],s=0;s<i;s++)a.push(oe(t,e,-360*s/i,n).geometry.coordinates);return a.push(a[0]),o([a],r)}function se(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){return(se(e,t)+180)%360}(t,e);var i=Z(t),r=Z(e),o=_(i[0]),a=_(r[0]),s=_(i[1]),c=_(r[1]),l=Math.sin(a-o)*Math.cos(c),u=Math.cos(s)*Math.sin(c)-Math.sin(s)*Math.cos(c)*Math.cos(a-o);return b(Math.atan2(l,u))}function ce(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=G(t);return i([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function le(t,e){var n=0,r=0,o=0;return O(t,(function(t){n+=t[0],r+=t[1],o++}),!0),i([n/o,r/o],e)}function ue(t){var e=[];return"FeatureCollection"===t.type?E(t,(function(t){O(t,(function(n){e.push(i(n,t.properties))}))})):O(t,(function(n){e.push(i(n,t.properties))})),l(e)}function he(t,e,n){n=n||2;var i,r,o,a,s,c,l,u=e&&e.length,h=u?e[0]*n:t.length,d=de(t,0,h,n,!0),p=[];if(!d)return p;if(u&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=de(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(a));for(s.sort(fe),r=0;r<s.length;r++)!function(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var c,l=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=u&&r!==i.x&&me(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&((c=Math.abs(o-i.y)/(r-i.x))<d||c===d&&i.x>n.x)&&_e(i,t)&&(n=i,d=c),i=i.next;return n}(t,e)){var n=Ce(e,t);pe(n,n.next)}}(s[r],n),n=pe(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(c=t[f+1])<r&&(r=c),s>o&&(o=s),c>a&&(a=c);l=0!==(l=Math.max(o-i,a-r))?1/l:0}return function t(e,n,i,r,o,a,s){if(e){!s&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ge(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(e,r,o,a);for(var c,l,u=e;e.prev!==e.next;)if(c=e.prev,l=e.next,a?function(t,e,n,i){var r=t.prev,o=t,a=t.next;if(ve(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,l=ge(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),u=ge(s,c,e,n,i),h=t.nextZ;h&&h.z<=u;){if(h!==t.prev&&h!==t.next&&me(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ve(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&me(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ve(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}(e,r,o,a):function(t){var e=t.prev,n=t,i=t.next;if(ve(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(me(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ve(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(e))n.push(c.i/i),n.push(e.i/i),n.push(l.i/i),we(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?t(e=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!ye(r,o)&&be(r,i,i.next,o)&&_e(r,o)&&_e(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),we(i),we(i.next),i=t=o),i=i.next}while(i!==t);return i}(e,n,i),n,i,r,o,a,2):2===s&&function(e,n,i,r,o,a){var s=e;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&be(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&_e(t,e)&&_e(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}(s,c)){var l=Ce(s,c);return s=pe(s,s.next),l=pe(l,l.next),t(s,n,i,r,o,a),void t(l,n,i,r,o,a)}c=c.next}s=s.next}while(s!==e)}(e,n,i,r,o,a):t(pe(e),n,i,r,o,a,1);break}}}(d,p,n,i,r,l),p}function de(t,e,n,i,r){var o,a;if(r===Ae(t,e,n,i)>0)for(o=e;o<n;o+=i)a=xe(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=xe(o,t[o],t[o+1],a);return a&&ye(a,a.next)&&(we(a),a=a.next),a}function pe(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!ye(i,i.next)&&0!==ve(i.prev,i,i.next))i=i.next;else{if(we(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function fe(t,e){return t.x-e.x}function ge(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function me(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ve(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ye(t,e){return t.x===e.x&&t.y===e.y}function be(t,e,n,i){return!!(ye(t,e)&&ye(n,i)||ye(t,i)&&ye(n,e))||ve(t,e,n)>0!=ve(t,e,i)>0&&ve(n,i,t)>0!=ve(n,i,e)>0}function _e(t,e){return ve(t.prev,t,t.next)<0?ve(t,e,t.next)>=0&&ve(t,t.prev,e)>=0:ve(t,e,t.prev)<0||ve(t,t.next,e)<0}function Ce(t,e){var n=new Ie(t.i,t.x,t.y),i=new Ie(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function xe(t,e,n,i){var r=new Ie(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function we(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ie(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ae(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Pe(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n}(t),n=oa(e.vertices,e.holes,2),i=[],r=[];n.forEach((function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<r.length;a+=3){var s=r.slice(a,a+3);s.push(r[a]),i.push(o([s]))}return i}function Oe(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0;return E(e,(function(e,r){var o=Nt(t,e);o<i&&((n=Bt(e)).properties.featureIndex=r,n.properties.distanceToPoint=o,i=o)})),n}function Me(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*l/a+u)),Math.min(r,Math.floor(n+(a-s)*l/a+u)),o)}var h=e[n],d=i,p=r;for(Se(e,i,n),o(e[r],h)>0&&Se(e,i,r);d<p;){for(Se(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;o(e[p],h)>0;)p--}0===o(e[i],h)?Se(e,i,p):Se(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||function(t,e){return t<e?-1:t>e?1:0})}function Se(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function ke(t,e){if(!(this instanceof ke))return new ke(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ee(t,e){Le(t,0,t.children.length,e,t)}function Le(t,e,n,i,r){r||(r=ze(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Te(r,t.leaf?i(o):o);return r}function Te(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Re(t,e){return t.minX-e.minX}function Ne(t,e){return t.minY-e.minY}function Be(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function je(t){return t.maxX-t.minX+(t.maxY-t.minY)}function De(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Fe(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ve(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(Me(t,o=e+Math.ceil((n-e)/i/2)*i,e,n,r),a.push(e,o,o,n))}function Ge(t){var e=ke(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Ze(e)).bbox=e}else t.bbox=t.bbox?t.bbox:We(t);return ke.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Ze(t);n.bbox=t,e.push(n)})):E(t,(function(t){t.bbox=t.bbox?t.bbox:We(t),e.push(t)})),ke.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Ze(e)).bbox=e}return ke.prototype.remove.call(this,t)},e.clear=function(){return ke.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:ke.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return ke.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:ke.prototype.all.call(this)}},e.toJSON=function(){return ke.prototype.toJSON.call(this)},e.fromJSON=function(t){return ke.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:We(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ze(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function We(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function He(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=W(i);break;case"LineString":n=[W(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r=s([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),l(e)}function Ue(t,n){var i={},r=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=$e(t,n);return o&&r.push(o),l(r)}var a=Ge();return a.load(He(n)),E(He(t),(function(t){E(a.search(t),(function(e){var n=$e(t,e);if(n){var o=W(n).join(",");i[o]||(i[o]=!0,r.push(n))}}))})),l(r)}function $e(t,e){var n=W(t),r=W(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],c=n[1][1],l=r[0][0],u=r[0][1],h=r[1][0],d=r[1][1],p=(d-u)*(s-o)-(h-l)*(c-a);if(0===p)return null;var f=((h-l)*(a-u)-(d-u)*(o-l))/p,g=((s-o)*(a-u)-(c-a)*(o-l))/p;return f>=0&&f<=1&&g>=0&&g<=1?i([o+f*(s-o),a+f*(c-a)]):null}function Ke(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=t.geometry?t.geometry.type:t.type;if("LineString"!==r&&"MultiLineString"!==r)throw new Error("lines must be LineString or MultiLineString");var o=i([1/0,1/0],{dist:1/0}),a=0;return B(t,(function(t){for(var r=W(t),c=0;c<r.length-1;c++){var l=i(r[c]);l.properties.dist=Nt(e,l,n);var u=i(r[c+1]);u.properties.dist=Nt(e,u,n);var h=Nt(l,u,n),d=Math.max(l.properties.dist,u.properties.dist),p=se(l,u),f=oe(e,d,p+90,n),g=oe(e,d,p-90,n),m=Ue(s([f.geometry.coordinates,g.geometry.coordinates]),s([l.geometry.coordinates,u.geometry.coordinates])),v=null;m.features.length>0&&((v=m.features[0]).properties.dist=Nt(e,v,n),v.properties.location=a+Nt(l,v,n)),l.properties.dist<o.properties.dist&&((o=l).properties.index=c,o.properties.location=a),u.properties.dist<o.properties.dist&&((o=u).properties.index=c+1,o.properties.location=a+h),v&&v.properties.dist<o.properties.dist&&((o=v).properties.index=c),a+=h}})),o}function Xe(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i,r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(i=r?Ye(Z(e),Z(t)):Ye(Z(t),Z(e)))>180?-(360-i):i}function Ye(t,e){var n=_(t[1]),i=_(e[1]),r=_(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(b(Math.atan2(r,o))+360)%360}function qe(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var r=Z(t),o=Z(e);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,C(function(t,e,n){var i=n=void 0===n?Co:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-r,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var c=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),l=Math.abs(c)>1e-11?a/c:Math.cos(r);return Math.sqrt(a*a+l*l*s*s)*i}(r,o),"meters",i)}function Je(t,e){return tn(t,"mercator",e)}function Qe(t,e){return tn(t,"wgs84",e)}function tn(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&w(t[0])?t="mercator"===e?en(t):nn(t):(!0!==i&&(t=Bt(t)),O(t,(function(t){var n="mercator"===e?en(t):nn(t);t[0]=n[0],t[1]=n[1]}))),t}function en(t){var e=Math.PI/180,n=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function nn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function rn(t,n,r){if(!I(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=i(t):"Point"===t.type?t=e(t):$(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):$(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return D(n,(function(t){var e=function(t,e,n,r){var o=r.mercator,a=!0!==o?Nt(e,t,r):on(e,t,r),s=y(!0!==o?se(e,t):Xe(e,t)),c=y(!0!==o?se(e,n):Xe(e,n)),l=Math.abs(s-c);if(l>90)return a;var u=(c+180)%360,h=y(!0!==o?se(n,t):Xe(n,t)),d=Math.abs(h-u);return d>180&&(d=Math.abs(d-360)),d>90?!0!==o?Nt(t,n,r):on(t,n,r):!0!==o?a*Math.sin(_(l)):function(t,e,n,r){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=i(n),s=Qe(function(t,e,n){var i=t[0],r=t[1],o=e[0]-i,a=e[1]-r,s=((n[0]-i)*o+(n[1]-r)*a)/(o*o+a*a);return[i+s*o,r+s*a]}(Je([t[0]+o,t[1]]),Je([e[0]+o,e[1]]),Je([n[0]+o,n[1]])));return 0!==o&&(s[0]-=o),qe(a,s,r)}(e,n,t,r)}(a,t.geometry.coordinates[0],t.geometry.coordinates[1],r);o>e&&(o=e)})),o}function on(t,e,n){var i=n.units,r=0;Math.abs(t[0])>=180&&(r=t[0]>0?-180:180),Math.abs(e[0])>=180&&(r=e[0]>0?-180:180);var o=Je([t[0]+r,t[1]]),a=Je([e[0]+r,e[1]]),s=function(t){return t*t},c=s(o[0]-a[0])+s(o[1]-a[1]);return C(Math.sqrt(c),"meters",i)}function an(t){for(var n=function(t){return"FeatureCollection"!==t.type?l("Feature"!==t.type?[e(t)]:[t]):t}(t),r=ce(n),o=!1,a=0;!o&&a<n.features.length;){var s,c=n.features[a].geometry,u=!1;if("Point"===c.type)r.geometry.coordinates[0]===c.coordinates[0]&&r.geometry.coordinates[1]===c.coordinates[1]&&(o=!0);else if("MultiPoint"===c.type){var h=!1;for(s=0;!h&&s<c.coordinates.length;)r.geometry.coordinates[0]===c.coordinates[s][0]&&r.geometry.coordinates[1]===c.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===c.type)for(s=0;!u&&s<c.coordinates.length-1;)sn(r.geometry.coordinates[0],r.geometry.coordinates[1],c.coordinates[s][0],c.coordinates[s][1],c.coordinates[s+1][0],c.coordinates[s+1][1])&&(u=!0,o=!0),s++;else if("MultiLineString"===c.type)for(var d=0;d<c.coordinates.length;){u=!1,s=0;for(var p=c.coordinates[d];!u&&s<p.length-1;)sn(r.geometry.coordinates[0],r.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(u=!0,o=!0),s++;d++}else"Polygon"!==c.type&&"MultiPolygon"!==c.type||Mt(r,c)&&(o=!0);a++}if(o)return r;var f=l([]);for(a=0;a<n.features.length;a++)f.features=f.features.concat(ue(n.features[a]).features);return i(Oe(r,f).geometry.coordinates)}function sn(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function cn(t){return N(t,(function(t,e){return t+function t(e){var n,i=0;switch(e.type){case"Polygon":return ln(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=ln(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}}(e)}),0)}function ln(t){var e=0;if(t&&t.length>0){e+=Math.abs(un(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(un(t[n]))}return e}function un(t){var e,n,i,r,o,a,s=0,c=t.length;if(c>2){for(a=0;a<c;a++)a===c-2?(i=c-2,r=c-1,o=0):a===c-1?(i=c-1,r=0,o=1):(i=a,r=a+1,o=a+2),e=t[i],n=t[r],s+=(hn(t[o][0])-hn(e[0]))*Math.sin(hn(n[1]));s=s*ca*ca/2}return s}function hn(t){return t*Math.PI/180}function dn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return F(t,(function(t,n){var i=n.geometry.coordinates;return t+Nt(i[0],i[1],e)}),0)}function pn(t,e,n,i){if(!I(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var a,c,l,u=0,h=0;h<r.length&&!(e>=u&&h===r.length-1);h++){if(u>e&&0===o.length){if(!(a=e-u))return o.push(r[h]),s(o);c=se(r[h],r[h-1])-180,l=oe(r[h],a,c,i),o.push(l.geometry.coordinates)}if(u>=n)return(a=n-u)?(c=se(r[h],r[h-1])-180,l=oe(r[h],a,c,i),o.push(l.geometry.coordinates),s(o)):(o.push(r[h]),s(o));if(u>=e&&o.push(r[h]),h===r.length-1)return s(o);u+=Nt(r[h],r[h+1],i)}return s(r[r.length-1])}function fn(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!I(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=Z(t),o=W(e),a=0;a<o.length-1;a++){var s=!1;if(i&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,i){var r=n[0],o=n[1],a=t[0],s=t[1],c=e[0],l=e[1],u=c-a,h=l-s;return(n[0]-a)*h-(n[1]-s)*u==0&&(i?"start"===i?Math.abs(u)>=Math.abs(h)?u>0?a<r&&r<=c:c<=r&&r<a:h>0?s<o&&o<=l:l<=o&&o<s:"end"===i?Math.abs(u)>=Math.abs(h)?u>0?a<=r&&r<c:c<r&&r<=a:h>0?s<=o&&o<l:l<o&&o<=s:"both"===i?Math.abs(u)>=Math.abs(h)?u>0?a<r&&r<c:c<r&&r<a:h>0?s<o&&o<l:l<o&&o<s:void 0:Math.abs(u)>=Math.abs(h)?u>0?a<=r&&r<=c:c<=r&&r<=a:h>0?s<=o&&o<=l:l<=o&&o<=s)}(o[a],o[a+1],r,s))return!0}return!1}function gn(t,e){var n=q(t),i=q(e),r=X(t),o=X(e);switch(n){case"Point":switch(i){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(vn(e.coordinates[n],t.coordinates)){i=!0;break}return i}(r,o);case"LineString":return fn(r,o,{ignoreEndVertices:!0});case"Polygon":return Mt(r,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)vn(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(r,o);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!fn(t.coordinates[i],e))return!1;n||(n=fn(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(r,o);case"Polygon":return function(t,e){for(var n=!0,i=0;i<t.coordinates.length;i++){var r=Mt(t.coordinates[1],e);if(!r){n=!1;break}r=Mt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!fn(t.coordinates[n],e))return!1;return!0}(r,o);case"Polygon":return function(t,e){if(!mn(G(e),G(t)))return!1;for(var n=!1,i=0;i<t.coordinates.length-1;i++){if(!Mt(t.coordinates[i],e))return!1;n||(n=Mt(t.coordinates[i],e,{ignoreBoundary:!0})),n||(n=Mt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[i],t.coordinates[i+1]),e,{ignoreBoundary:!0}))}return n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":return function(t,e){var n=G(t);if(!mn(G(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Mt(t.coordinates[0][i],e))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function mn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function vn(t,e){return t[0]===e[0]&&t[1]===e[1]}function yn(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.mask,o=n.properties,a=[];if(null==e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(q(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],c=t[1],u=t[2],h=t[3],d=e/Nt([s,c],[u,c],n)*(u-s),p=e/Nt([s,c],[s,h],n)*(h-c),f=u-s,g=h-c,m=Math.floor(f/d),v=(g-Math.floor(g/p)*p)/2,y=s+(f-m*d)/2;y<=u;){for(var b=c+v;b<=h;){var _=i([y,b],o);r?gn(_,r)&&a.push(_):a.push(_),b+=p}y+=d}return l(a)}function bn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return O(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)})),t}function _n(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!_n(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Cn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function xn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!xn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function wn(t,e){var n=[],i=Ge();return B(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e);if(r.features.length){var o=An(e,r);n=n.filter((function(t){return t.id!==o.id})),i.remove(o),E(In(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=In(t,e).features).forEach((function(t){t.bbox||(t.bbox=re(G(t)))})),i.load(l(n))})),l(n)}function In(t,e){var n=[],i=W(t)[0],r=W(t)[t.geometry.coordinates.length-1];if(Pn(i,Z(e))||Pn(r,Z(e)))return l([t]);var o=Ge(),a=He(t);o.load(a);var c=o.search(e);if(!c.features.length)return l([t]);var u=An(e,c),h=L(a,(function(t,i,r){var o=W(i)[1],a=Z(e);return r===u.id?(t.push(a),n.push(s(t)),Pn(a,o)?[a]:[a,o]):(t.push(o),t)}),[i]);return h.length>1&&n.push(s(h)),l(n)}function An(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return E(e,(function(e){var r=Ke(e,t).properties.dist;r<i&&(n=e,i=r)})),n}function Pn(t,e){return t[0]===e[0]&&t[1]===e[1]}function On(t,e,n,i,r){if(!I(r=r||{}))throw new Error("options is invalid");var o=r.steps,a=r.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if("object"!=typeof r)throw new Error("options must be an object");o=o||64;var c=Mn(n),l=Mn(i),u=t.properties;if(c===l)return s(ae(t,e,r).geometry.coordinates[0],u);for(var h=c,d=c<l?l:l+360,p=h,f=[],g=0;p<d;)f.push(oe(t,e,p,a).geometry.coordinates),p=h+360*++g/o;return p>d&&f.push(oe(t,e,d,a).geometry.coordinates),s(f,u)}function Mn(t){var e=t%360;return e<0&&(e+=360),e}function Sn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=q(t),r=W(t);if(n=n||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return kn(r,n);case"MultiPolygon":var o=[];return r.forEach((function(t){o.push(kn(t,n))})),l(o);default:throw new Error("geom "+i+" not supported")}}function kn(t,e){return t.length>1?u(t,e):s(t[0],e)}function En(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.autoComplete,r=e.orderCoords;if(!t)throw new Error("lines is required");switch(i=void 0===i||i,r=void 0===r||r,q(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(W(Ln(t,{},i,r)))})),d(o,n)}return Ln(t,n,i,r)}function Ln(t,e,n,i){e=e||t.properties||{};var r=W(t),a=q(t);if(!r.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(r=Tn(r)),o([r],e);case"MultiLineString":var c=[],l=0;return r.forEach((function(t){if(n&&(t=Tn(t)),i){var e=function(t){var e=t[1],n=t[3];return Math.abs(t[0]-t[2])*Math.abs(e-n)}(G(s(t)));e>l?(c.unshift(t),l=e):c.push(t)}else c.push(t)})),o(c,e);default:throw new Error("geometry type "+a+" is not supported")}}function Tn(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]||t.push(e),t}function Rn(t,e,n){var i,r,o,a,s,c=t.length,l=Bn(t[0],e),u=[];for(n||(n=[]),i=1;i<c;i++){for(r=t[i-1],a=s=Bn(o=t[i],e);;){if(!(l|a)){u.push(r),a!==s?(u.push(o),i<c-1&&(n.push(u),u=[])):i===c-1&&u.push(o);break}if(l&a)break;l?l=Bn(r=Nn(r,o,l,e),e):a=Bn(o=Nn(r,o,a,e),e)}l=s}return u.length&&n.push(u),n}function Nn(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Bn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function jn(t,e){for(var n=[],i=0;i<t.length;i++){var r=va.polygon(t[i],e);r.length>0&&(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push(r[0]),r.length>=4&&n.push(r))}return n}function Dn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Fn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var i,r;if(zn(t)||zn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Dn(t))return!!Dn(e)&&Fn(t=ya.call(t),e=ya.call(e),n);if(Vn(t)){if(!Vn(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),i=o.length-1;i>=0;i--)if(o[i]!==a[i])return!1;for(i=o.length-1;i>=0;i--)if(!Fn(t[r=o[i]],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function zn(t){return null==t}function Vn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Gn(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],a=Ge();return a.load(He(t)),D(e,(function(t){var e=!1;E(a.search(t),(function(n){if(!1===e){var o=W(t).sort(),a=W(n).sort();Fn(o,a)||(0===r?fn(o[0],n)&&fn(o[1],n):Ke(n,o[0]).properties.dist<=r&&Ke(n,o[1]).properties.dist<=r)?(e=!0,i=i?Zn(i,t):t):(0===r?fn(a[0],t)&&fn(a[1],t):Ke(t,a[0]).properties.dist<=r&&Ke(t,a[1]).properties.dist<=r)&&(i=i?Zn(i,n):n)}})),!1===e&&i&&(o.push(i),i=void 0)})),i&&o.push(i),l(o)}function Zn(t,e){var n=W(e),i=W(t),r=i[0],o=i[i.length-1],a=t.geometry.coordinates;return Fn(n[0],r)?a.unshift(n[1]):Fn(n[0],o)?a.push(n[1]):Fn(n[1],r)?a.unshift(n[0]):Fn(n[1],o)&&a.push(n[0]),t}function Wn(t){var e=t%360;return e<0&&(e+=360),e}function Hn(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var o=r.units,a=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=C(e,o,"meters"),c=Z(t),l=function(t,e,n,i){var r=e/(i=void 0===i?Co:Number(i)),o=t[0]*Math.PI/180,a=_(t[1]),s=_(n),c=r*Math.cos(s),l=a+c;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var u=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(u)>1e-11?c/u:Math.cos(a);return[(180*(o+r*Math.sin(s)/h)/Math.PI+540)%360-180,180*l/Math.PI]}(c,s,n);return l[0]+=l[0]-c[0]>180?-360:c[0]-l[0]>180?360:0,i(l,a)}function Un(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var s=t[a],c=t[a+1];a===t.length-1&&(c=t[0]),i=$n(s,c,e),n<=0&&i>0?function(t,e,n){return $n(t,e,n)<0}(e,s,r)||(r=s):n>0&&i<=0&&(function(t,e,n){return $n(t,e,n)>0}(e,s,o)||(o=s)),n=i}return[r,o]}function $n(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Kn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,i,r=W(t),o=0,a=1;a<r.length;)n=i||r[0],o+=((i=r[a])[0]-n[0])*(i[1]+n[1]),a++;return o>0}function Xn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return R(t,(function(t){Xn(t,e)})),t;case"LineString":return Yn(W(t),e),t;case"Polygon":return qn(W(t),e),t;case"MultiLineString":return W(t).forEach((function(t){Yn(t,e)})),t;case"MultiPolygon":return W(t).forEach((function(t){qn(t,e)})),t;case"Point":case"MultiPoint":return t}}function Yn(t,e){Kn(t)===e&&t.reverse()}function qn(t,e){Kn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Kn(t[n])===e&&t[n].reverse()}function Jn(t,e,n,i){i=i||{};for(var r=Object.keys(ba),o=0;o<r.length;o++){var a=r[o],s=i[a];_a[a]=s=null!=s?s:ba[a]}_a.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var c,l=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},a=e+Math.abs(n),s=0;s<i;++s){o.cells[s]=[];for(var c=0;c<r;++c){var l=0,u=t[s+1][c],h=t[s+1][c+1],d=t[s][c+1],p=t[s][c];if(!(isNaN(u)||isNaN(h)||isNaN(d)||isNaN(p))){l|=u<e?0:u>a?128:64,l|=h<e?0:h>a?32:16,l|=d<e?0:d>a?8:4;var f=+(l|=p<e?0:p>a?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var m=(u+h+d+p)/4;g=m>a?2:m<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var v,y,b,_,C,x,w,I;v=y=b=_=C=x=w=I=.5;var A=[];1===l?(b=1-Qn(e,d,p),I=1-Qn(e,u,p),A.push(as[l])):169===l?(b=Qn(a,p,d),I=Qn(a,p,u),A.push(as[l])):4===l?(x=1-Qn(e,h,d),_=Qn(e,p,d),A.push(rs[l])):166===l?(x=Qn(a,d,h),_=1-Qn(a,d,p),A.push(rs[l])):16===l?(C=Qn(e,d,h),y=Qn(e,u,h),A.push(is[l])):154===l?(C=1-Qn(a,h,d),y=1-Qn(a,h,u),A.push(is[l])):64===l?(w=Qn(e,p,u),v=1-Qn(e,h,u),A.push(cs[l])):106===l?(w=1-Qn(a,u,p),v=Qn(a,u,h),A.push(cs[l])):168===l?(_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),A.push(os[l]),A.push(as[l])):2===l?(_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),A.push(os[l]),A.push(as[l])):162===l?(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),A.push(os[l]),A.push(as[l])):8===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),A.push(is[l]),A.push(rs[l])):138===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(is[l]),A.push(rs[l])):32===l?(C=Qn(a,d,h),x=Qn(e,d,h),v=Qn(e,u,h),y=Qn(a,u,h),A.push(is[l]),A.push(rs[l])):42===l?(I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h),A.push(ss[l]),A.push(cs[l])):128===l&&(I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(ss[l]),A.push(cs[l])),5===l?(x=1-Qn(e,h,d),I=1-Qn(e,u,p),A.push(rs[l])):165===l?(x=Qn(a,d,h),I=Qn(a,p,u),A.push(rs[l])):20===l?(_=Qn(e,p,d),y=Qn(e,u,h),A.push(os[l])):150===l?(_=1-Qn(a,d,p),y=1-Qn(a,h,u),A.push(os[l])):80===l?(C=Qn(e,d,h),w=Qn(e,p,u),A.push(is[l])):90===l?(C=1-Qn(a,h,d),w=1-Qn(a,u,p),A.push(is[l])):65===l?(b=1-Qn(e,d,p),v=1-Qn(e,h,u),A.push(as[l])):105===l?(b=Qn(a,p,d),v=Qn(a,u,h),A.push(as[l])):160===l?(C=Qn(a,d,h),x=Qn(e,d,h),I=Qn(e,p,u),w=Qn(a,p,u),A.push(is[l]),A.push(rs[l])):10===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),I=1-Qn(a,u,p),w=1-Qn(e,u,p),A.push(is[l]),A.push(rs[l])):130===l?(_=1-Qn(e,d,p),b=1-Qn(a,d,p),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(os[l]),A.push(as[l])):40===l?(_=Qn(a,p,d),b=Qn(e,p,d),v=Qn(e,u,h),y=Qn(a,u,h),A.push(os[l]),A.push(as[l])):101===l?(x=Qn(a,d,h),v=Qn(a,u,h),A.push(rs[l])):69===l?(x=1-Qn(e,h,d),v=1-Qn(e,h,u),A.push(rs[l])):149===l?(I=Qn(a,p,u),y=1-Qn(a,h,u),A.push(ss[l])):21===l?(I=1-Qn(e,u,p),y=Qn(e,u,h),A.push(ss[l])):86===l?(_=1-Qn(a,d,p),w=1-Qn(a,u,p),A.push(os[l])):84===l?(_=Qn(e,p,d),w=Qn(e,p,u),A.push(os[l])):89===l?(C=1-Qn(a,h,d),b=Qn(a,p,d),A.push(as[l])):81===l?(C=Qn(e,d,h),b=1-Qn(e,d,p),A.push(as[l])):96===l?(C=Qn(a,d,h),x=Qn(e,d,h),w=Qn(e,p,u),v=Qn(a,u,h),A.push(is[l]),A.push(rs[l])):74===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),w=1-Qn(a,u,p),v=1-Qn(e,h,u),A.push(is[l]),A.push(rs[l])):24===l?(C=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),y=Qn(e,u,h),A.push(is[l]),A.push(as[l])):146===l?(C=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),y=1-Qn(a,h,u),A.push(is[l]),A.push(as[l])):6===l?(x=1-Qn(e,h,d),_=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),A.push(rs[l]),A.push(os[l])):164===l?(x=Qn(a,d,h),_=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),A.push(rs[l]),A.push(os[l])):129===l?(b=1-Qn(e,d,p),I=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(as[l]),A.push(ss[l])):41===l?(b=Qn(a,p,d),I=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h),A.push(as[l]),A.push(ss[l])):66===l?(_=1-Qn(e,d,p),b=1-Qn(a,d,p),w=1-Qn(a,u,p),v=1-Qn(e,h,u),A.push(os[l]),A.push(as[l])):104===l?(_=Qn(a,p,d),b=Qn(e,p,d),w=Qn(e,p,u),v=Qn(a,u,h),A.push(as[l]),A.push(ls[l])):144===l?(C=Qn(e,d,h),I=Qn(e,p,u),w=Qn(a,p,u),y=1-Qn(a,h,u),A.push(is[l]),A.push(cs[l])):26===l?(C=1-Qn(a,h,d),I=1-Qn(a,u,p),w=1-Qn(e,u,p),y=Qn(e,u,h),A.push(is[l]),A.push(cs[l])):36===l?(x=Qn(a,d,h),_=Qn(e,p,d),v=Qn(e,u,h),y=Qn(a,u,h),A.push(rs[l]),A.push(os[l])):134===l?(x=1-Qn(e,h,d),_=1-Qn(a,d,p),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(rs[l]),A.push(os[l])):9===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),b=Qn(a,p,d),I=1-Qn(e,u,p),A.push(is[l]),A.push(rs[l])):161===l?(C=Qn(a,d,h),x=Qn(e,d,h),b=1-Qn(e,d,p),I=Qn(a,p,u),A.push(is[l]),A.push(rs[l])):37===l?(x=Qn(a,d,h),I=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h),A.push(rs[l]),A.push(ss[l])):133===l?(x=1-Qn(e,h,d),I=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u),A.push(rs[l]),A.push(ss[l])):148===l?(_=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),y=1-Qn(a,h,u),A.push(os[l]),A.push(cs[l])):22===l?(_=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),y=Qn(e,u,h),A.push(os[l]),A.push(cs[l])):82===l?(C=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),w=1-Qn(a,u,p),A.push(is[l]),A.push(as[l])):88===l?(C=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),w=Qn(e,p,u),A.push(is[l]),A.push(as[l])):73===l?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),b=Qn(a,p,d),v=1-Qn(e,h,u),A.push(is[l]),A.push(rs[l])):97===l?(C=Qn(a,d,h),x=Qn(e,d,h),b=1-Qn(e,d,p),v=Qn(a,u,h),A.push(is[l]),A.push(rs[l])):145===l?(C=Qn(e,d,h),b=1-Qn(e,d,p),I=Qn(a,p,u),y=1-Qn(a,h,u),A.push(is[l]),A.push(ss[l])):25===l?(C=1-Qn(a,h,d),b=Qn(a,p,d),I=1-Qn(e,u,p),y=Qn(e,u,h),A.push(is[l]),A.push(ss[l])):70===l?(x=1-Qn(e,h,d),_=1-Qn(a,d,p),w=1-Qn(a,u,p),v=1-Qn(e,h,u),A.push(rs[l]),A.push(os[l])):100===l?(x=Qn(a,d,h),_=Qn(e,p,d),w=Qn(e,p,u),v=Qn(a,u,h),A.push(rs[l]),A.push(os[l])):34===l?(0===g?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)):(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)),A.push(is[l]),A.push(rs[l]),A.push(ss[l]),A.push(cs[l])):35===l?(4===g?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)):(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)),A.push(is[l]),A.push(rs[l]),A.push(as[l]),A.push(cs[l])):136===l?(0===g?(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)):(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)),A.push(is[l]),A.push(rs[l]),A.push(ss[l]),A.push(cs[l])):153===l?(0===g?(C=Qn(e,d,h),b=1-Qn(e,d,p),I=1-Qn(e,u,p),y=Qn(e,u,h)):(C=1-Qn(a,h,d),b=Qn(a,p,d),I=Qn(a,p,u),y=1-Qn(a,h,u)),A.push(is[l]),A.push(as[l])):102===l?(0===g?(x=1-Qn(e,h,d),_=Qn(e,p,d),w=Qn(e,p,u),v=1-Qn(e,h,u)):(x=Qn(a,d,h),_=1-Qn(a,d,p),w=1-Qn(a,u,p),v=Qn(a,u,h)),A.push(rs[l]),A.push(cs[l])):155===l?(4===g?(C=Qn(e,d,h),b=1-Qn(e,d,p),I=1-Qn(e,u,p),y=Qn(e,u,h)):(C=1-Qn(a,h,d),b=Qn(a,p,d),I=Qn(a,p,u),y=1-Qn(a,h,u)),A.push(is[l]),A.push(ss[l])):103===l?(4===g?(x=1-Qn(e,h,d),_=Qn(e,p,d),w=Qn(e,p,u),v=1-Qn(e,h,u)):(x=Qn(a,d,h),_=1-Qn(a,d,p),w=1-Qn(a,u,p),v=Qn(a,u,h)),A.push(rs[l]),A.push(os[l])):152===l?(0===g?(C=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),y=Qn(e,u,h)):(C=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),y=1-Qn(a,h,u)),A.push(is[l]),A.push(os[l]),A.push(as[l])):156===l?(4===g?(C=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),y=Qn(e,u,h)):(C=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),y=1-Qn(a,h,u)),A.push(is[l]),A.push(as[l]),A.push(cs[l])):137===l?(0===g?(C=Qn(a,d,h),x=Qn(e,d,h),b=1-Qn(e,d,p),I=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)):(C=1-Qn(e,h,d),x=1-Qn(a,h,d),b=Qn(a,p,d),I=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)),A.push(is[l]),A.push(rs[l]),A.push(as[l])):139===l?(4===g?(C=Qn(a,d,h),x=Qn(e,d,h),b=1-Qn(e,d,p),I=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)):(C=1-Qn(e,h,d),x=1-Qn(a,h,d),b=Qn(a,p,d),I=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)),A.push(is[l]),A.push(rs[l]),A.push(ss[l])):98===l?(0===g?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),w=Qn(e,p,u),v=1-Qn(e,h,u)):(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),w=1-Qn(a,u,p),v=Qn(a,u,h)),A.push(is[l]),A.push(rs[l]),A.push(cs[l])):99===l?(4===g?(C=1-Qn(e,h,d),x=1-Qn(a,h,d),_=Qn(a,p,d),b=Qn(e,p,d),w=Qn(e,p,u),v=1-Qn(e,h,u)):(C=Qn(a,d,h),x=Qn(e,d,h),_=1-Qn(e,d,p),b=1-Qn(a,d,p),w=1-Qn(a,u,p),v=Qn(a,u,h)),A.push(is[l]),A.push(rs[l]),A.push(as[l])):38===l?(0===g?(x=1-Qn(e,h,d),_=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)):(x=Qn(a,d,h),_=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)),A.push(rs[l]),A.push(ss[l]),A.push(cs[l])):39===l?(4===g?(x=1-Qn(e,h,d),_=Qn(e,p,d),I=Qn(e,p,u),w=Qn(a,p,u),v=1-Qn(a,h,u),y=1-Qn(e,h,u)):(x=Qn(a,d,h),_=1-Qn(a,d,p),I=1-Qn(a,u,p),w=1-Qn(e,u,p),v=Qn(e,u,h),y=Qn(a,u,h)),A.push(rs[l]),A.push(os[l]),A.push(cs[l])):85===l&&(C=1,x=0,_=1,b=0,I=0,w=1,v=0,y=1),(v<0||v>1||y<0||y>1||C<0||C>1||_<0||_>1||I<0||I>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+f+" "+u+","+h+","+d+","+p+" "+g+" "+v+" "+y+" "+C+" "+x+" "+_+" "+b+" "+I+" "+w),o.cells[s][c]={cval:l,cval_real:f,flipped:g,topleft:v,topright:y,righttop:C,rightbottom:x,bottomright:_,bottomleft:b,leftbottom:I,lefttop:w,edges:A}}}}}return o}(t,e,n);return _a.polygons?(_a.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),c=function(t){var e=[],n=0;return t.cells.forEach((function(t,i){t.forEach((function(t,r){if(void 0!==t){var o=hs[t.cval](t);"object"==typeof o&&ti(o)?"object"==typeof o[0]&&ti(o[0])?"object"==typeof o[0][0]&&ti(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(l)):(_a.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),c=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var a=0;a<i;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return e&xa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return e&wa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return e&wa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return e&Ia?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return e&xa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return e&wa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return e&wa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return e&Ia?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return e&wa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return e&Ia?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return e&Ia?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return e&Ca?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return e&wa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return e&Ia?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return e&Ia?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return e&Ca?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return e&wa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return e&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return e&Ia?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return e&Ca?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return e&Ca?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return e&xa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return e&Ca?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return e&xa?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),c=null,l=a,u=o;null!==s&&r.push([s.p[0]+l,s.p[1]+u]);do{if(null===(c=function(t,e,n,i){var r,o,a,s,c,l=t.cval;switch(e){case-1:switch(i){case 0:r=rs[l],a=Ra[l],s=Na[l],c=Ba[l];break;default:r=is[l],a=Ea[l],s=La[l],c=Ta[l]}break;case 1:switch(i){case 0:r=ss[l],a=Ua[l],s=$a[l],c=Ka[l];break;default:r=cs[l],a=Za[l],s=Wa[l],c=Ha[l]}break;default:switch(n){case-1:switch(i){case 0:r=ls[l],a=Aa[l],s=Pa[l],c=Oa[l];break;default:r=us[l],a=Ma[l],s=Sa[l],c=ka[l]}break;case 1:switch(i){case 0:r=as[l],a=ja[l],s=Da[l],c=Fa[l];break;default:r=os[l],a=za[l],s=Va[l],c=Ga[l]}}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,r){case 0:l&xa?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:l&wa?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:l&wa?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:l&Ia?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&xa?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:l&wa?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:l&wa?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:l&Ia?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:l&wa?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:l&Ia?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:l&Ia?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&Ca?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:l&wa?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:l&Ia?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:l&Ia?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&Ca?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:l&wa?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&Ca?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:l&Ia?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&Ca?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&Ca?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&xa?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&Ca?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&xa?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==c||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+c)),{p:[e,n],x:a,y:s,o:c}}(t.cells[u][l],s.x,s.y,s.o)))break;if(r.push([c.p[0]+l,c.p[1]+u]),l+=c.x,s=c,(u+=c.y)<0||u>=n||l<0||l>=i||void 0===t.cells[u][l]){var h=function(t,e,n,i,r,o){for(var a=t.cells[n][e],s=a.cval_real,c=e+i,l=n+r,u=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][c])if(s=(a=t.cells[l-=r][c-=i]).cval_real,-1===r)if(0===o)if(s&Ia)u.push([c,l]),i=-1,r=0,o=0;else{if(!(s&wa)){u.push([c+a.bottomright,l]),i=0,r=1,o=1,h=!0;break}u.push([c+1,l]),i=1,r=0,o=0}else{if(!(s&Ia)){if(s&wa){u.push([c+a.bottomright,l]),i=0,r=1,o=1,h=!0;break}u.push([c+a.bottomleft,l]),i=0,r=1,o=0,h=!0;break}u.push([c,l]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(s&xa)){if(s&Ca){u.push([c+a.topleft,l+1]),i=0,r=-1,o=0,h=!0;break}u.push([c+a.topright,l+1]),i=0,r=-1,o=1,h=!0;break}u.push([c+1,l+1]),i=1,r=0,o=1}else u.push([c+1,l+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(s&Ca)){if(s&Ia){u.push([c,l+a.leftbottom]),i=1,r=0,o=0,h=!0;break}u.push([c,l+a.lefttop]),i=1,r=0,o=1,h=!0;break}u.push([c,l+1]),i=0,r=1,o=0}else{if(!(s&Ca)){console.log("MarchingSquaresJS-isoBands: wtf");break}u.push([c,l+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&wa)){u.push([c+1,l+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}u.push([c+1,l]),i=0,r=-1,o=1}else{if(!(s&wa)){if(s&xa){u.push([c+1,l+a.righttop]),i=-1,r=0,o=1;break}u.push([c+1,l+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}u.push([c+1,l]),i=0,r=-1,o=1}}else if(s=(a=t.cells[l][c]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][c])i=0,r=-1,o=1;else{if(!(s&Ia)){u.push([c+a.bottomright,l]),i=0,r=1,o=1,h=!0;break}u.push([c,l])}else{if(!(s&Ca)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+c+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][c])i=0,r=1,o=0;else{if(!(s&xa)){u.push([c+a.topleft,l+1]),i=0,r=-1,o=0,h=!0;break}u.push([c+1,l+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][c+1])i=1,r=0,o=1;else{if(!(s&wa)){u.push([c+1,l+a.righttop]),i=-1,r=0,o=1,h=!0;break}u.push([c+1,l]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][c-1])i=-1,r=0,o=0;else{if(!(s&Ca)){u.push([c,l+a.leftbottom]),i=1,r=0,o=0,h=!0;break}u.push([c,l+1]),i=0,r=1,o=0}}if(l+=r,(c+=i)===e&&l===n)break}return{path:u,i:c,j:l,x:i,y:r,o:o}}(t,l-=c.x,u-=c.y,c.x,c.y,c.o);if(null===h)break;h.path.forEach((function(t){r.push(t)})),l=h.i,u=h.j,s=h}}while(void 0!==t.cells[u][l]&&t.cells[u][l].edges.length>0);e.push(r),r=[],t.cells[o][a].edges.length>0&&a--}return e}(l)),"function"==typeof _a.successCallback&&_a.successCallback(c),c}function Qn(t,e,n){return(t-e)/(n-e)}function ti(t){return t.constructor.toString().indexOf("Array")>-1}function ei(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=le(t)),!1!==r&&void 0!==r||(t=Bt(t)),O(t,(function(t){var n=Xe(i,t)+e,r=qe(i,t),o=W(Hn(i,r,n));t[0]=o[0],t[1]=o[1]}))),t}function ni(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=Bt(t)),"FeatureCollection"!==t.type||o?ii(t,e,i):(E(t,(function(n,r){t.features[r]=ii(n,e,i)})),t)}function ii(t,e,n){var r="Point"===q(t);return n=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return Z(e);var n=t.bbox?t.bbox:G(t),r=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return i([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return i([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return i([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return i([a,s]);case"center":return ce(t);case void 0:case null:case"centroid":return le(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||O(t,(function(t){var i=qe(n,t),r=Xe(n,t),o=W(Hn(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ri(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function oi(t,e){return t[0]*e[1]-e[0]*t[1]}function ai(t,e,n){var i=[],r=v(e,n),o=W(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]));return[[t[0]+n*(e[1]-t[1])/i,t[1]+n*(t[0]-e[0])/i],[e[0]+n*(e[1]-t[1])/i,e[1]+n*(t[0]-e[0])/i]]}(t,o[e+1],r);if(i.push(n),e>0){var s=i[e-1],c=function(t,e){return!function(t,e){return 0===oi(ri(t),ri(e))}(t,e)&&function(t,e){var n=t[0],i=ri(t),r=e[0],o=ri(e),a=oi(i,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(oi(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(r,n),o)/a,i))}(t,e)}(n,s);!1!==c&&(s[1]=c,n[0]=c),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function si(t,e,n){return Math.sign((e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))}function ci(t,e){return e.geometry.coordinates[0].every((function(e){return Mt(i(e),t)}))}function li(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var i=e[0]-t[0],r=e[1]-t[1];return(n[0]-t[0])*r-(n[1]-t[1])*i==0&&(Math.abs(i)>=Math.abs(r)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:r>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ui(t,e){return Ue(e,Sn(t)).features.length>0}function hi(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function di(t,e){return t[0]===e[0]&&t[1]===e[1]}function pi(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),mi(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:i=!0}o++}return n&&i}function fi(t,e){return Ue(t,Sn(e)).features.length>0}function gi(t,e){for(var n=!1,r=!1,o=t.coordinates[0].length,a=0;a<o&&n&&r;)Mt(i(t.coordinates[0][a]),e)?n=!0:r=!0,a++;return r&&r}function mi(t,e,n,i){var r=e[0]-t[0],o=e[1]-t[1];return 0==(n[0]-t[0])*o-(n[1]-t[1])*r&&(i?Math.abs(r)>=Math.abs(o)?r>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(r)>=Math.abs(o)?r>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:o>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function vi(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function yi(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function bi(t,e){return bs(t,e,{strict:!0})}function _i(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=q(t);if(n!==q(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Cs({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=T(t),o=T(e);r.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&i++}))}));break;case"LineString":case"MultiLineString":D(t,(function(t){D(e,(function(e){Gn(t,e).features.length&&i++}))}));break;case"Polygon":case"MultiPolygon":D(t,(function(t){D(e,(function(e){Ue(t,e).features.length&&i++}))}))}return i>0}function Ci(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}function xi(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wi(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Ii(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new Ai(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function Ai(t,e,n){this.x=t,this.y=e,this.weight=n}function Pi(t){this.content=[],this.scoreFunction=t}function Oi(t){return t[0]}function Mi(t){return t[1]}function Si(){this._=null}function ki(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ei(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Li(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ti(t){for(;t.L;)t=t.L;return t}function Ri(t,e,n,i){var r=[null,null],o=js.push(r)-1;return r.left=t,r.right=e,n&&Bi(r,t,e,n),i&&Bi(r,e,t,i),Ns[t.index].halfedges.push(o),Ns[e.index].halfedges.push(o),r}function Ni(t,e,n){var i=[e,n];return i.left=t,i}function Bi(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function ji(t,e,n,i,r){var o,a=t[0],s=t[1],c=a[0],l=a[1],u=0,h=1,d=s[0]-c,p=s[1]-l;if(o=e-c,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[c+u*d,l+u*p]),h<1&&(t[1]=[c+h*d,l+h*p]),!0)}}}}}function Di(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,c=t[0],l=t.left,u=t.right,h=l[0],d=l[1],p=u[0],f=u[1],g=(h+p)/2;if(f===d){if(g<e||g>=i)return;if(h>p){if(c){if(c[1]>=r)return}else c=[g,n];o=[g,r]}else{if(c){if(c[1]<n)return}else c=[g,r];o=[g,n]}}else if(s=(d+f)/2-(a=(h-p)/(f-d))*g,a<-1||a>1)if(h>p){if(c){if(c[1]>=r)return}else c=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(c){if(c[1]<n)return}else c=[(r-s)/a,r];o=[(n-s)/a,n]}else if(d<f){if(c){if(c[0]>=i)return}else c=[e,a*e+s];o=[i,a*i+s]}else{if(c){if(c[0]<e)return}else c=[i,a*i+s];o=[e,a*e+s]}return t[0]=c,t[1]=o,!0}function Fi(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function zi(t,e){return e[+(e.left!==t.site)]}function Vi(t,e){return e[+(e.left===t.site)]}function Gi(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],c=i[0]-a,l=i[1]-s,u=o[0]-a,h=o[1]-s,d=2*(c*h-l*u);if(!(d>=-Vs)){var p=c*c+l*l,f=u*u+h*h,g=(h*p-l*f)/d,m=(c*f-u*p)/d,v=Ds.pop()||new function(){ki(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=r,v.x=g+a,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,b=Bs._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Bs.insert(y,v),y||(Ts=v)}}}}function Zi(t){var e=t.circle;e&&(e.P||(Ts=e.N),Bs.remove(e),Ds.push(e),ki(e),t.circle=null)}function Wi(t){var e=Fs.pop()||new function(){ki(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Hi(t){Zi(t),Rs.remove(t),Fs.push(t),ki(t)}function Ui(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];Hi(t);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<zs&&Math.abs(i-c.circle.cy)<zs;)o=c.P,s.unshift(c),Hi(c),c=o;s.unshift(c),Zi(c);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<zs&&Math.abs(i-l.circle.cy)<zs;)a=l.N,s.push(l),Hi(l),l=a;s.push(l),Zi(l);var u,h=s.length;for(u=1;u<h;++u)Bi((l=s[u]).edge,(c=s[u-1]).site,l.site,r);(l=s[h-1]).edge=Ri((c=s[0]).site,l.site,null,r),Gi(c),Gi(l)}function $i(t){for(var e,n,i,r,o=t[0],a=t[1],s=Rs._;s;)if((i=Ki(s,a)-o)>zs)s=s.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return Ki(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(s,a))>zs)){i>-zs?(e=s.P,n=s):r>-zs?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Ns[t.index]={site:t,halfedges:[]}}(t);var c=Wi(t);if(Rs.insert(e,c),e||n){if(e===n)return Zi(e),n=Wi(e.site),Rs.insert(c,n),c.edge=n.edge=Ri(e.site,c.site),Gi(e),void Gi(n);if(n){Zi(e),Zi(n);var l=e.site,u=l[0],h=l[1],d=t[0]-u,p=t[1]-h,f=n.site,g=f[0]-u,m=f[1]-h,v=2*(d*m-p*g),y=d*d+p*p,b=g*g+m*m,_=[(m*y-p*b)/v+u,(d*b-g*y)/v+h];Bi(n.edge,l,f,_),c.edge=Ri(l,t,null,_),n.edge=Ri(t,f,null,_),Gi(e),Gi(n)}else c.edge=Ri(e.site,c.site)}}function Ki(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],c=n[1],l=c-e;if(!l)return s;var u=s-i,h=1/o-1/l,d=u/l;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*l)-c+l/2+r-o/2)))/h+i:(i+s)/2}function Xi(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Yi(t,e){return e[1]-t[1]||e[0]-t[0]}function qi(t,e){var n,i,r,o=t.sort(Yi).pop();for(js=[],Ns=new Array(t.length),Rs=new Si,Bs=new Si;;)if(r=Ts,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||($i(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Ui(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Ns.length;r<o;++r)if((t=Ns[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Fi(t,js[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],c=+e[1][0],l=+e[1][1];!function(t,e,n,i){for(var r,o=js.length;o--;)Di(r=js[o],t,e,n,i)&&ji(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>zs||Math.abs(r[0][1]-r[1][1])>zs)||delete js[o]}(a,s,c,l),function(t,e,n,i){var r,o,a,s,c,l,u,h,d,p,f,g,m=Ns.length,v=!0;for(r=0;r<m;++r)if(o=Ns[r]){for(a=o.site,s=(c=o.halfedges).length;s--;)js[c[s]]||c.splice(s,1);for(s=0,l=c.length;s<l;)f=(p=Vi(o,js[c[s]]))[0],g=p[1],h=(u=zi(o,js[c[++s%l]]))[0],d=u[1],(Math.abs(f-h)>zs||Math.abs(g-d)>zs)&&(c.splice(s,0,js.push(Ni(a,p,Math.abs(f-t)<zs&&i-g>zs?[t,Math.abs(h-t)<zs?d:i]:Math.abs(g-i)<zs&&n-f>zs?[Math.abs(d-i)<zs?h:n,i]:Math.abs(f-n)<zs&&g-e>zs?[n,Math.abs(h-n)<zs?d:e]:Math.abs(g-e)<zs&&f-t>zs?[Math.abs(d-e)<zs?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var y,b,_,C=1/0;for(r=0,v=null;r<m;++r)(o=Ns[r])&&(_=(y=(a=o.site)[0]-t)*y+(b=a[1]-e)*b)<C&&(C=_,v=o);if(v){var x=[t,e],w=[t,i],I=[n,i],A=[n,e];v.halfedges.push(js.push(Ni(a=v.site,x,w))-1,js.push(Ni(a,w,I))-1,js.push(Ni(a,I,A))-1,js.push(Ni(a,A,x))-1)}}for(r=0;r<m;++r)(o=Ns[r])&&(o.halfedges.length||delete Ns[r])}(a,s,c,l)}this.edges=js,this.cells=Ns,Rs=Bs=js=Ns=null}function Ji(t){return(t=t.slice()).push(t[0]),o([t])}function Qi(t,e,n,i){var r=(i=i||{}).steps||64,a=i.units||"kilometers",s=i.angle||0,c=i.pivot||t,l=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!I(i))throw new Error("options must be an object");if(!w(r))throw new Error("steps must be a number");if(!w(s))throw new Error("angle must be a number");var u=Z(t);if("degrees"===a)var h=_(s);else e=Hn(t,e,90,{units:a}),n=Hn(t,n,0,{units:a}),e=Z(e)[0]-u[0],n=Z(n)[1]-u[1];for(var d=[],p=0;p<r;p+=1){var f=-360*p/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(tr(f),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(tr(f),2));if(f<-90&&f>=-270&&(g=-g),f<-180&&f>=-360&&(m=-m),"degrees"===a){var v=g*Math.cos(h)+m*Math.sin(h),y=m*Math.cos(h)-g*Math.sin(h);g=v,m=y}d.push([g+u[0],m+u[1]])}return d.push(d[0]),"degrees"===a?o([d],l):ei(o([d],l),s,{pivot:c})}function tr(t){var e=t*Math.PI/180;return Math.tan(e)}function er(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return R(t,(function(t,e,n){var i=n[r];if(!w(i=null==i?1:i))throw new Error("weight value must be a number for feature index "+e);(i=Number(i))>0&&O(t,(function(t){o+=t[0]*i,a+=t[1]*i,s+=i}))})),i([o/s,a/s],n)}function nr(t,e,n,r){var o=n.properties.tolerance||.001,a=0,s=0,c=0,l=0;if(E(n,(function(e){var n=e.properties.weight,i=null==n?1:n;if(!w(i=Number(i)))throw new Error("weight value must be a number");if(i>0){l+=1;var r=i*Nt(e,t);0===r&&(r=1);var o=i/r;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,c+=o}})),l<1)throw new Error("no features to measure");var u=a/c,h=s/c;return 1===l||0===r||Math.abs(u-e[0])<o&&Math.abs(h-e[1])<o?i([u,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([u,h]),nr([u,h],t,n,r-1))}function ir(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function rr(t){if(I(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*cr(),180*cr()]}function or(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var r=[],o=0;o<t;o++)r.push(i(rr(n)));return l(r)}function ar(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_radial_length;null!=t||(t=1),w(i)||(i=10),w(r)||(r=10);for(var a=[],s=0;s<t;s++){var c=[],u=Array.apply(null,new Array(i+1)).map(Math.random);u.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),u.forEach((function(t){t=2*t*Math.PI/u[u.length-1];var e=Math.random();c.push([e*r*Math.sin(t),e*r*Math.cos(t)])})),c[c.length-1]=c[0],c=c.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(rr(n))),a.push(o([c]))}return l(a)}function sr(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;null!=t||(t=1),(!w(i)||i<2)&&(i=10),w(r)||(r=1e-4),w(o)||(o=Math.PI/8);for(var a=[],c=0;c<t;c++){for(var u=[rr(n)],h=0;h<i-1;h++){var d=(0===h?2*Math.random()*Math.PI:Math.tan((u[h][1]-u[h-1][1])/(u[h][0]-u[h-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*r;u.push([u[h][0]+p*Math.cos(d),u[h][1]+p*Math.sin(d)])}a.push(s(u))}return l(a)}function cr(){return Math.random()-.5}function lr(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return E(t,(function(t){pr(t.properties,e)&&n.push(t)})),l(n)}function ur(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=dr(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var a=r[o],s=i[a],c=[],u=0;u<s.length;u++)c.push(t.features[s[u]]);n(l(c),a,o)}}function hr(t,e,n,i){var r=i;return ur(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r}function dr(t,e){var n={};return E(t,(function(t,i){var r=t.properties||{};if(r.hasOwnProperty(e)){var o=r[e];n.hasOwnProperty(o)?n[o].push(i):n[o]=[i]}})),n}function pr(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!pr(t,e[i]))return!1;return!0}return fr(t,e)}function fr(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function gr(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function mr(){}function vr(t){this.message=t||""}function yr(t){this.message=t||""}function br(){}function _r(t){return null===t?cl:t.color}function Cr(t){return null===t?null:t.parent}function xr(t,e){null!==t&&(t.color=e)}function wr(t){return null===t?null:t.left}function Ir(t){return null===t?null:t.right}function Ar(){this.root_=null,this.size_=0}function Pr(){}function Or(){this.array_=[],arguments[0]instanceof $c&&this.addAll(arguments[0])}function Mr(){}function Sr(t){this.message=t||""}function kr(){this.array_=[]}function Er(t){switch(t.type){case"Polygon":return cn(t)>1?t:null;case"MultiPolygon":var e=[];if(B(t,(function(t){cn(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Lr(){this.reset()}function Tr(t,e,n){var i=t.s=e+n,r=i-e;t.t=e-(i-r)+(n-r)}function Rr(t){return t>1?pp:t<-1?-pp:Math.asin(t)}function Nr(){}function Br(t,e){t&&Mp.hasOwnProperty(t.type)&&Mp[t.type](t,e)}function jr(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)e.point((i=t[r])[0],i[1],i[2]);e.lineEnd()}function Dr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)jr(t[n],e,1);e.polygonEnd()}function Fr(t){return[_p(t[1],t[0]),Rr(t[2])]}function zr(t){var e=t[0],n=t[1],i=Cp(n);return[i*Cp(e),i*Ip(e),Ip(n)]}function Vr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Wr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Hr(t){var e=Ap(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ur(t,e){return[t>dp?t-gp:t<-dp?t+gp:t,e]}function $r(t,e,n){return(t%=gp)?e||n?kp(Xr(t),Yr(e,n)):Xr(t):e||n?Yr(e,n):Ur}function Kr(t){return function(e,n){return[(e+=t)>dp?e-gp:e<-dp?e+gp:e,n]}}function Xr(t){var e=Kr(t);return e.invert=Kr(-t),e}function Yr(t,e){function n(t,e){var n=Cp(e),s=Cp(t)*n,c=Ip(t)*n,l=Ip(e),u=l*i+s*r;return[_p(c*o-u*a,s*i-l*r),Rr(u*o+c*a)]}var i=Cp(t),r=Ip(t),o=Cp(e),a=Ip(e);return n.invert=function(t,e){var n=Cp(e),s=Cp(t)*n,c=Ip(t)*n,l=Ip(e),u=l*o-c*a;return[_p(c*o+l*a,s*i+u*r),Rr(u*i-s*r)]},n}function qr(t,e){(e=zr(e))[0]-=t,Hr(e);var n=function(t){return t>1?0:t<-1?dp:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+gp-hp)%gp}function Jr(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Qr(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function to(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,l){var u=0,h=0;if(null==r||(u=a(r,s))!==(h=a(o,s))||c(r,o)<0^s>0)do{l.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+s+4)%4)!==h);else l.point(o[0],o[1])}function a(i,r){return yp(i[0]-t)<hp?r>0?0:3:yp(i[0]-n)<hp?r>0?2:1:yp(i[1]-e)<hp?r>0?1:0:r>0?3:2}function s(t,e){return c(t.x,e.x)}function c(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function c(t,e){r(t,e)&&C.point(t,e)}function l(o,a){var s=r(o,a);if(h&&d.push([o,a]),b)p=o,f=a,g=s,b=!1,s&&(C.lineStart(),C.point(o,a));else if(s&&y)C.point(o,a);else{var c=[m=Math.max(Dp,Math.min(jp,m)),v=Math.max(Dp,Math.min(jp,v))],l=[o=Math.max(Dp,Math.min(jp,o)),a=Math.max(Dp,Math.min(jp,a))];Lp(c,l,t,e,n,i)?(y||(C.lineStart(),C.point(c[0],c[1])),C.point(l[0],l[1]),s||C.lineEnd(),_=!1):s&&(C.lineStart(),C.point(o,a),_=!1)}m=o,v=a,y=s}var u,h,d,p,f,g,m,v,y,b,_,C=a,x=Ep(),w={point:c,lineStart:function(){w.point=l,h&&h.push(d=[]),b=!0,y=!1,m=v=NaN},lineEnd:function(){u&&(l(p,f),g&&y&&x.rejoin(),u.push(x.result())),w.point=c,y&&C.lineEnd()},polygonStart:function(){C=x,u=[],h=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=h.length;n<r;++n)for(var o,a,s=h[n],c=1,l=s.length,u=s[0],d=u[0],p=u[1];c<l;++c)o=d,a=p,d=(u=s[c])[0],p=u[1],a<=i?p>i&&(d-o)*(i-a)>(p-a)*(t-o)&&++e:p<=i&&(d-o)*(i-a)<(p-a)*(t-o)&&--e;return e}(),n=_&&e,r=(u=Bp(u)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&Rp(u,s,e,o,a),a.polygonEnd()),C=a,u=h=d=null}};return w}}function eo(t){return t.length>1}function no(t,e){return((t=t.x)[0]<0?t[1]-pp-hp:pp-t[1])-((e=e.x)[0]<0?e[1]-pp-hp:pp-e[1])}function io(t){return function(e){var n=new ro;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ro(){}function oo(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Sp(n,t.stream(Hp));var a=Hp.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),c=+e[0][0]+(i-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([c,l])}function ao(t,e){return[t,wp(Pp((pp+e)/2))]}function so(t,e){return[wp(Pp((pp+e)/2)),-t]}function co(t,n,i,r){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return R(t,(function(t){var e=co(t,n,i,r);e&&s.push(e)})),l(s)}var c,u=G(t),h=u[1]>50&&u[3]>50;c=h?{type:a.type,coordinates:lo(a.coordinates,ho(a))}:Je(a);var d,p=(new ql).read(c),f=g(m(n,i),"meters"),v=Gh.bufferOp(p,f);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((v=(new Jl).write(v)).coordinates))return(d=h?{type:v.type,coordinates:uo(v.coordinates,ho(a))}:Qe(v)).geometry?d:e(d,o)}function lo(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return lo(t,e)}))}function uo(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return uo(t,e)}))}function ho(t){var e=ce(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return Jp().center(e).rotate(n).scale(Co)}function po(){for(var t=new ql,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=cp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Jl).write(e),properties:arguments[0].properties}}function fo(t,n){var i=X(t),r=X(n);if(Kt(bn(r,{precision:4})).coordinates[0].length<4)return null;if(Kt(bn(i,{precision:4})).coordinates[0].length<4)return null;var o=new ql,a=o.read(bn(i)),s=o.read(bn(r)),c=Qd.intersection(a,s);return c.isEmpty()?null:e((new Jl).write(c))}function go(t,e){return function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)})),i}(t,e)}function mo(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.properties||{},r=n.triangles,a=n.mask;if(null==e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(q(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],c=t[1],u=t[2],h=t[3],d=(c+h)/2,p=(s+u)/2,f=2*e/Nt([s,d],[u,d],n)*(u-s),g=2*e/Nt([p,c],[p,h],n)*(h-c),m=f/2,v=2*m,y=Math.sqrt(3)/2*g,b=u-s,_=h-c,C=.75*v,x=y,A=Math.floor((b-v)/(v-m/2)),P=(A*C-m/2-b)/2-m/2+C/2,O=Math.floor((_-y)/y),M=(_-O*y)/2,S=O*y-_>y/2;S&&(M-=y/4);for(var k=[],E=[],L=0;L<6;L++){var T=2*Math.PI/6*L;k.push(Math.cos(T)),E.push(Math.sin(T))}for(var R=[],N=0;N<=A;N++)for(var B=0;B<=O;B++){var j=N%2==1;if(!(0===B&&j||0===B&&S)){var D=N*C+s-P,F=B*x+c+M;if(j&&(F-=y/2),!0===r)(function(t,e,n,i,r,a){for(var s=[],c=0;c<6;c++){var l=[];l.push(t),l.push([t[0]+e*r[c],t[1]+n*a[c]]),l.push([t[0]+e*r[(c+1)%6],t[1]+n*a[(c+1)%6]]),l.push(t),s.push(o([l],i))}return s})([D,F],f/2,g/2,i,k,E).forEach((function(t){a?fo(a,t)&&R.push(t):R.push(t)}));else{var z=function(t,e,n,i,r,a){for(var s=[],c=0;c<6;c++)s.push([t[0]+e*r[c],t[1]+n*a[c]]);return s.push(s[0].slice()),o([s],i)}([D,F],f/2,g/2,i,k,E);a?fo(a,z)&&R.push(z):R.push(z)}}}return l(R)}function vo(t){if(t.features.length<=1)return t;var e=function(t){var e=Eo(),n=[];return B(t,(function(t,e){var i=G(t);n.push({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],i={};return B(t,(function(t,r){if(i[r])return!0;for(e.remove({index:r},yo),i[r]=!0;;){var o=G(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return i[t.index]=!0,e.remove({index:t.index},yo),t.geojson}));s.push(t),t=po.apply(this,s)}if(0===a.length)break}n.push(t)})),l(n)}function yo(t,e){return t.index===e.index}function bo(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(q(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],c=t[1],u=t[2],h=t[3],d=e/Nt([s,c],[u,c],n)*(u-s),p=e/Nt([s,c],[s,h],n)*(h-c),f=u-s,g=h-c,m=Math.floor(f/d),v=Math.floor(g/p),y=(g-v*p)/2,b=s+(f-m*d)/2,_=0;_<m;_++){for(var C=c+y,x=0;x<v;x++){var A=o([[[b,C],[b,C+p],[b+d,C+p],[b+d,C],[b,C]]],i);r?fo(r,A)&&a.push(A):a.push(A),C+=p}b+=d}return l(a)}function _o(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null==e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(q(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Nt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),c=e/Nt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),u=0,h=t[0];h<=t[2];){for(var d=0,p=t[1];p<=t[3];){var f=null,g=null;u%2==0&&d%2==0?(f=o([[[h,p],[h,p+c],[h+s,p],[h,p]]],i),g=o([[[h,p+c],[h+s,p+c],[h+s,p],[h,p+c]]],i)):u%2==0&&d%2==1?(f=o([[[h,p],[h+s,p+c],[h+s,p],[h,p]]],i),g=o([[[h,p],[h,p+c],[h+s,p+c],[h,p]]],i)):d%2==0&&u%2==1?(f=o([[[h,p],[h,p+c],[h+s,p+c],[h,p]]],i),g=o([[[h,p],[h+s,p+c],[h+s,p],[h,p]]],i)):d%2==1&&u%2==1&&(f=o([[[h,p],[h,p+c],[h+s,p],[h,p]]],i),g=o([[[h,p+c],[h+s,p+c],[h+s,p],[h,p+c]]],i)),r?(fo(r,f)&&a.push(f),fo(r,g)&&a.push(g)):(a.push(f),a.push(g)),p+=c,d++}u++,h+=s}return l(a)}var Co=6371008.8,xo={meters:Co,metres:Co,millimeters:1e3*Co,millimetres:1e3*Co,centimeters:100*Co,centimetres:100*Co,kilometers:Co/1e3,kilometres:Co/1e3,miles:Co/1609.344,nauticalmiles:Co/1852,inches:39.37*Co,yards:Co/1.0936,feet:3.28084*Co,radians:1,degrees:Co/111325},wo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Co,degrees:1/111325},Io={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Ao=Object.freeze({earthRadius:Co,factors:xo,unitsFactors:wo,areaFactors:Io,feature:e,geometry:n,point:i,points:r,polygon:o,polygons:a,lineString:s,lineStrings:c,featureCollection:l,multiLineString:u,multiPoint:h,multiPolygon:d,geometryCollection:p,round:f,radiansToLength:g,lengthToRadians:m,lengthToDegrees:v,bearingToAzimuth:y,radiansToDegrees:b,degreesToRadians:_,convertLength:C,convertArea:x,isNumber:w,isObject:I,validateBBox:A,validateId:P,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Po=Object.freeze({coordEach:O,coordReduce:M,propEach:S,propReduce:k,featureEach:E,featureReduce:L,coordAll:T,geomEach:R,geomReduce:N,flattenEach:B,flattenReduce:j,segmentEach:D,segmentReduce:F,lineEach:z,lineReduce:V}),Oo=Object.freeze({getCoord:Z,getCoords:W,containsNumber:H,geojsonType:U,featureOf:$,collectionOf:K,getGeom:X,getGeomType:Y,getType:q}),Mo={successCallback:null,verbose:!1},So={},ko=function t(e,n,i,r,o){for(i=i||0,r=r||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*l/a+u)),Math.min(r,Math.floor(n+(a-s)*l/a+u)),o)}var h=e[n],d=i,p=r;for(it(e,i,n),o(e[r],h)>0&&it(e,i,r);d<p;){for(it(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;o(e[p],h)>0;)p--}0===o(e[i],h)?it(e,i,p):it(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}},Eo=rt;rt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!pt(t,e))return n;for(var r,o,a,s,c=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],pt(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):c.push(a));e=c.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!pt(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],pt(t,a=e.leaf?n(o):o)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ft([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),c=[],l=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),c.push(a),this._condense(c),this;o||a.leaf||!dt(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(c.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ct,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return ot(r=ft(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=ft([])).leaf=!1,r.height=i;var s,c,l,u,h=Math.ceil(o/a),d=h*Math.ceil(Math.sqrt(a));for(gt(t,e,n,d,this.compareMinX),s=e;s<=n;s+=d)for(gt(t,s,l=Math.min(s+d-1,n),h,this.compareMinY),c=s;c<=l;c+=h)u=Math.min(c+h-1,l),r.children.push(this._build(t,c,u,i-1));return ot(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,c,l,u,h;i.push(e),!e.leaf&&i.length-1!==n;){for(u=h=1/0,r=0,o=e.children.length;r<o;r++)c=ut(a=e.children[r]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-c)<h?(h=l,u=c<u?c:u,s=a):l===h&&c<u&&(u=c,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),st(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=ft(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ot(n,this.toBBox),ot(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=ft([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,c,l,u;for(c=l=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=at(t,0,i,this.toBBox),o=at(t,i,n,this.toBBox)),s=ut(r)+ut(o),a<c?(c=a,u=i,l=s<l?s:l):a===c&&s<l&&(l=s,u=i);return u},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:ct,r=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=at(t,0,e,a),c=at(t,n-e,n,a),l=ht(s)+ht(c);for(r=e;r<n-e;r++)o=t.children[r],st(s,t.leaf?a(o):o),l+=ht(s);for(r=n-e-1;r>=e;r--)o=t.children[r],st(c,t.leaf?a(o):o),l+=ht(c);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)st(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Lo=function(t,e,n){var i=t*e,r=To*t,o=r-(r-t),a=t-o,s=To*e,c=s-(s-e),l=e-c,u=a*l-(i-o*c-a*c-o*l);return n?(n[0]=u,n[1]=i,n):[u,i]},To=+(Math.pow(2,27)+1),Ro=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,a=new Array(n+i),s=0,c=0,l=0,u=Math.abs,h=t[c],d=u(h),p=e[l],f=u(p);d<f?(o=h,(c+=1)<n&&(d=u(h=t[c]))):(o=p,(l+=1)<i&&(f=u(p=e[l]))),c<n&&d<f||l>=i?(r=h,(c+=1)<n&&(d=u(h=t[c]))):(r=p,(l+=1)<i&&(f=u(p=e[l])));for(var g,m,v=r+o,y=v-r,b=o-y,_=b,C=v;c<n&&l<i;)d<f?(r=h,(c+=1)<n&&(d=u(h=t[c]))):(r=p,(l+=1)<i&&(f=u(p=e[l]))),(b=(o=_)-(y=(v=r+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g;for(;c<n;)(b=(o=_)-(y=(v=(r=h)+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g,(c+=1)<n&&(h=t[c]);for(;l<i;)(b=(o=_)-(y=(v=(r=p)+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g,(l+=1)<i&&(p=e[l]);return _&&(a[s++]=_),C&&(a[s++]=C),s||(a[s++]=0),a.length=s,a},No=function(t,e,n){var i=t+e,r=i-t,o=e-r,a=t-(i-r);return n?(n[0]=a+o,n[1]=i,n):[a+o,i]},Bo=function(t,e){var n=t.length;if(1===n){var i=Lo(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Lo(t[0],e,o),o[0]&&(r[s++]=o[0]);for(var c=1;c<n;++c){Lo(t[c],e,a),No(o[1],a[0],o),o[0]&&(r[s++]=o[0]);var l=a[1],u=o[1],h=l+u,d=u-(h-l);o[1]=h,d&&(r[s++]=d)}return o[1]&&(r[s++]=o[1]),0===s&&(r[s++]=0),r.length=s,r},jo=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,a=new Array(n+i),s=0,c=0,l=0,u=Math.abs,h=t[c],d=u(h),p=-e[l],f=u(p);d<f?(o=h,(c+=1)<n&&(d=u(h=t[c]))):(o=p,(l+=1)<i&&(f=u(p=-e[l]))),c<n&&d<f||l>=i?(r=h,(c+=1)<n&&(d=u(h=t[c]))):(r=p,(l+=1)<i&&(f=u(p=-e[l])));for(var g,m,v=r+o,y=v-r,b=o-y,_=b,C=v;c<n&&l<i;)d<f?(r=h,(c+=1)<n&&(d=u(h=t[c]))):(r=p,(l+=1)<i&&(f=u(p=-e[l]))),(b=(o=_)-(y=(v=r+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g;for(;c<n;)(b=(o=_)-(y=(v=(r=h)+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g,(c+=1)<n&&(h=t[c]);for(;l<i;)(b=(o=_)-(y=(v=(r=p)+o)-r))&&(a[s++]=b),_=C-((g=C+v)-(m=g-C))+(v-m),C=g,(l+=1)<i&&(p=-e[l]);return _&&(a[s++]=_),C&&(a[s++]=C),s||(a[s++]=0),a.length=s,a},Do=mt((function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(r[a++]=t[i][o]);return n}function n(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",i(r(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),s=[],c=0;c<t;++c)0==(1&c)?n.push.apply(n,r(e(a,c))):o.push.apply(o,r(e(a,c))),s.push("m"+c);var l=i(n),u=i(o),h="orientation"+t+"Exact",d=["function ",h,"(",s.join(),"){var p=",l,",n=",u,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",d)(Ro,Lo,Bo,jo)}var a=o(3),s=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=r-o;if(r>0){if(o<=0)return s;i=r+o}else{if(!(r<0))return s;if(o>=0)return s;i=-(r+o)}var c=33306690738754716e-32*i;return s>=c||s<=-c?s:a(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],c=t[1]-i[1],l=e[1]-i[1],u=n[1]-i[1],h=t[2]-i[2],d=e[2]-i[2],p=n[2]-i[2],f=o*u,g=a*l,m=a*c,v=r*u,y=r*l,b=o*c,_=h*(f-g)+d*(m-v)+p*(y-b),C=7771561172376103e-31*((Math.abs(f)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(v))*Math.abs(d)+(Math.abs(y)+Math.abs(b))*Math.abs(p));return _>C||-_>C?_:s(t,e,n,i)}];!function(){for(;c.length<=5;)c.push(o(c.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),i=0;i<=5;++i)t.exports[i]=c[i]}()})),Fo=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[r[0],r[1]],a=[r[0],r[1]];for(i=2;i<e;++i){for(var s=r[i],c=t[s],l=o.length;l>1&&zo(t[o[l-2]],t[o[l-1]],c)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&zo(t[a[l-2]],t[a[l-1]],c)>=0;)l-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var u=0,h=(i=0,o.length);i<h;++i)n[u++]=o[i];for(var d=a.length-2;d>0;--d)n[u++]=a[d];return n},zo=Do[3],Vo=vt,Go=vt;vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}},Vo.default=Go;var Zo=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],c=e[o][1],l=e[a][1];c>i!=l>i&&n<(e[a][0]-s)*(i-c)/(l-c)+s&&(r=!r)}return r},Wo=Do[3],Ho=yt;Ho.default=yt;var Uo=function(t){return t},$o=function(t){if(null==t)return Uo;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var c=2,l=t.length,u=new Array(l);for(u[0]=(e+=t[0])*i+o,u[1]=(n+=t[1])*r+a;c<l;)u[c]=t[c],++c;return u}},Ko=function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n},Xo=function(t,e){function n(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){i[t<0?~t:t]=1})),a.push(r)}}var i={},r={},o={},a=[],s=-1;return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,i,a=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),s=a[0],c=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=c,i=r[c]){delete r[i.start];var l=i===n?n:n.concat(i);r[l.start=n.start]=o[l.end=i.end]=l}else r[n.start]=o[n.end]=n;else if(n=r[c])if(delete r[n.start],n.unshift(e),n.start=s,i=o[s]){delete o[i.end];var u=i===n?n:i.concat(n);r[u.start=i.start]=o[u.end=n.end]=u}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=s]=o[n.end=c]=n})),n(o,r),n(r,o),e.forEach((function(t){i[t<0?~t:t]||a.push([t])})),a},Yo=function(t){return Ft(t,zt.apply(this,arguments))},qo=function(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var a=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),c=t-1,l=0;l<t;++l)a[l]=r;return{set:function(i,o){for(var l=e(i)&c,u=a[l],h=0;u!=r;){if(n(u,i))return s[l]=o;if(++h>=t)throw new Error("full hashmap");u=a[l=l+1&c]}return a[l]=i,s[l]=o,o},maybeSet:function(i,o){for(var l=e(i)&c,u=a[l],h=0;u!=r;){if(n(u,i))return s[l];if(++h>=t)throw new Error("full hashmap");u=a[l=l+1&c]}return a[l]=i,s[l]=o,o},get:function(i,o){for(var l=e(i)&c,u=a[l],h=0;u!=r;){if(n(u,i))return s[l];if(++h>=t)break;u=a[l=l+1&c]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var i=a[e];i!=r&&t.push(i)}return t}}},Jo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qo=new ArrayBuffer(16),ta=new Float64Array(Qo),ea=new Uint32Array(Qo),na=function(t){ta[0]=t[0],ta[1]=t[1];var e=ea[0]^ea[1];return 2147483647&(e<<5^e>>7^ea[2]^ea[3])},ia=function(t,e){function n(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function i(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function r(t){return t.map(i)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>c&&(c=n)}function i(t){t.forEach(n)}function r(t){t.forEach(i)}var o=1/0,a=1/0,s=-1/0,c=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){i(t.arcs)},MultiLineString:function(t){t.arcs.forEach(i)},Polygon:function(t){t.arcs.forEach(i)},MultiPolygon:function(t){t.arcs.forEach(r)}};for(var u in t)e(t[u]);return s>=o&&c>=a?[o,a,s,c]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Gt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function i(t){return[Math.round((t[0]-l)*p),Math.round((t[1]-u)*f)]}function r(t,e){for(var n,i,r,o,a,s=-1,c=0,h=t.length,d=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-l)*p),a=Math.round((n[1]-u)*f),o===i&&a===r||(d[c++]=[i=o,r=a]);for(d.length=c;c<e;)c=d.push([d[0][0],d[0][1]]);return d}function o(t){return r(t,2)}function a(t){return r(t,4)}function s(t){return t.map(a)}function c(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var l=e[0],u=e[1],h=e[2],d=e[3],p=h-l?(n-1)/(h-l):1,f=d-u?(n-1)/(d-u):1,g={GeometryCollection:function(t){t.geometries.forEach(c)},Point:function(t){t.coordinates=i(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(i)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)c(t[m]);return{scale:[1/p,1/f],translate:[l,u]}}(t,o,e),s=function(t){function e(t){var e,n,i,r,o,a,s,c;if(i=p.get(e=l[t[0]]))for(s=0,c=i.length;s<c;++s)if(function(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!Jo(l[n],l[i]))return!1;return!0}(r=i[s],t))return t[0]=r[0],void(t[1]=r[1]);if(o=p.get(n=l[t[1]]))for(s=0,c=o.length;s<c;++s)if(function(t,e){var n=t[0],i=t[1],r=e[1];if(n-i!=e[0]-r)return!1;for(;n<=i;++n,--r)if(!Jo(l[n],l[r]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),f.push(t)}function n(t,e){var n=t[0],i=e[0],o=t[1]-n;if(o!==e[1]-i)return!1;for(var a=r(t),s=r(e),c=0;c<o;++c)if(!Jo(l[n+(c+a)%o],l[i+(c+s)%o]))return!1;return!0}function i(t,e){var n=t[0],i=e[1],o=t[1]-n;if(o!==i-e[0])return!1;for(var a=r(t),s=o-r(e),c=0;c<o;++c)if(!Jo(l[n+(c+a)%o],l[i-(c+s)%o]))return!1;return!0}function r(t){for(var e=t[0],n=t[1],i=e,r=i,o=l[i];++i<n;){var a=l[i];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(r=i,o=a)}return r-e}var o,a,s,c,l=t.coordinates,u=t.lines,h=t.rings,d=u.length+h.length;for(delete t.lines,delete t.rings,s=0,c=u.length;s<c;++s)for(o=u[s];o=o.next;)++d;for(s=0,c=h.length;s<c;++s)for(a=h[s];a=a.next;)++d;var p=qo(2*d*1.4,na,Jo),f=t.arcs=[];for(s=0,c=u.length;s<c;++s){o=u[s];do{e(o)}while(o=o.next)}for(s=0,c=h.length;s<c;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,c;if(o=p.get(l[t[0]]))for(s=0,c=o.length;s<c;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=p.get(e=l[t[0]+r(t)]))for(s=0,c=o.length;s<c;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):p.set(e,[t]),f.push(t)}(a);return t}(function(t){var e,n,i,r=function(t){function e(t,e,n,i){if(d[n]!==t){d[n]=t;var r=p[n];if(r>=0){var o=f[n];r===e&&o===i||r===i&&o===e||(++m,g[n]=1)}else p[n]=e,f[n]=i}}function n(t){return na(c[t])}function i(t,e){return Jo(c[t],c[e])}var r,o,a,s,c=t.coordinates,l=t.lines,u=t.rings,h=function(){for(var t=qo(1.4*c.length,n,i,Int32Array,-1,Int32Array),e=new Int32Array(c.length),r=0,o=c.length;r<o;++r)e[r]=t.maybeSet(r,r);return e}(),d=new Int32Array(c.length),p=new Int32Array(c.length),f=new Int32Array(c.length),g=new Int8Array(c.length),m=0;for(r=0,o=c.length;r<o;++r)d[r]=p[r]=f[r]=-1;for(r=0,o=l.length;r<o;++r){var v=l[r],y=v[0],b=v[1];for(a=h[y],s=h[++y],++m,g[a]=1;++y<=b;)e(r,a,a=s,s=h[y]);++m,g[s]=1}for(r=0,o=c.length;r<o;++r)d[r]=-1;for(r=0,o=u.length;r<o;++r){var _=u[r],C=_[0]+1,x=_[1];for(e(r,h[x-1],a=h[C-1],s=h[C]);++C<=x;)e(r,a,a=s,s=h[C])}d=p=f=null;var w,I=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=r;return{add:function(i){for(var s=e(i)&a,c=o[s],l=0;c!=r;){if(n(c,i))return!0;if(++l>=t)throw new Error("full hashset");c=o[s=s+1&a]}return o[s]=i,!0},has:function(i){for(var s=e(i)&a,c=o[s],l=0;c!=r;){if(n(c,i))return!0;if(++l>=t)break;c=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*m,na,Jo);for(r=0,o=c.length;r<o;++r)g[w=h[r]]&&I.add(c[w]);return I}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,i=a.length;n<i;++n)for(var c=a[n],l=c[0],u=c[1];++l<u;)r.has(o[l])&&(e={0:l,1:c[1]},c[1]=l,c=c.next=e);for(n=0,i=s.length;n<i;++n)for(var h=s[n],d=h[0],p=d,f=h[1],g=r.has(o[d]);++p<f;)r.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(function(t,e,n,i){Vt(t,e,n),Vt(t,e,e+i),Vt(t,e+i,n)}(o,d,f,f-p),o[f]=o[d],g=!0,p=d));return t}(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)c[++o]=t[e];var i={0:o-n+1,1:o};return a.push(i),i}function i(t){for(var e=0,n=t.length;e<n;++e)c[++o]=t[e];var i={0:o-n+1,1:o};return s.push(i),i}function r(t){return t.map(i)}var o=-1,a=[],s=[],c=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var u in t)e(t[u]);return{type:"Topology",coordinates:c,lines:a,rings:s,objects:t}}(t))),c=s.coordinates,l=qo(1.4*s.arcs.length,Ht,Ut);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return l.set(t,e),c.slice(t[0],t[1]+1)})),delete s.coordinates,c=null;var u={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],a=0,s=1,c=o.length,l=o[0],u=l[0],h=l[1];++a<c;)i=(l=o[a])[0],r=l[1],i===u&&r===h||(o[s++]=[i-u,r-h],u=i,h=r);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},ra=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],i=this.centers[e+1];var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};ra.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},ra.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},ra.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])};var oa=he,aa=he;he.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(Ae(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ae(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var c=0;for(a=0;a<i.length;a+=3){var l=i[a]*n,u=i[a+1]*n,h=i[a+2]*n;c+=Math.abs((t[l]-t[h])*(t[u+1]-t[l+1])-(t[l]-t[u])*(t[h+1]-t[l+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},he.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},oa.default=aa,ke.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!Fe(t,e))return n;for(var r,o,a,s,c=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],Fe(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):De(t,s)?this._all(a,n):c.push(a));e=c.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Fe(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],Fe(t,a=e.leaf?n(o):o)){if(e.leaf||De(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ze([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),c=[],l=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),c.push(a),this._condense(c),this;o||a.leaf||!De(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(c.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Re,compareMinY:Ne,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return Ee(r=ze(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=ze([])).leaf=!1,r.height=i;var s,c,l,u,h=Math.ceil(o/a),d=h*Math.ceil(Math.sqrt(a));for(Ve(t,e,n,d,this.compareMinX),s=e;s<=n;s+=d)for(Ve(t,s,l=Math.min(s+d-1,n),h,this.compareMinY),c=s;c<=l;c+=h)u=Math.min(c+h-1,l),r.children.push(this._build(t,c,u,i-1));return Ee(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,c,l,u,h;i.push(e),!e.leaf&&i.length-1!==n;){for(u=h=1/0,r=0,o=e.children.length;r<o;r++)c=Be(a=e.children[r]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-c)<h?(h=l,u=c<u?c:u,s=a):l===h&&c<u&&(u=c,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),Te(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=ze(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ee(n,this.toBBox),Ee(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ee(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,c,l,u;for(c=l=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=Le(t,0,i,this.toBBox),o=Le(t,i,n,this.toBBox)),s=Be(r)+Be(o),a<c?(c=a,u=i,l=s<l?s:l):a===c&&s<l&&(l=s,u=i);return u},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Re,r=t.leaf?this.compareMinY:Ne;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=Le(t,0,e,a),c=Le(t,n-e,n,a),l=je(s)+je(c);for(r=e;r<n-e;r++)o=t.children[r],Te(s,t.leaf?a(o):o),l+=je(s);for(r=n-e-1;r>=e;r--)o=t.children[r],Te(c,t.leaf?a(o):o),l+=je(c);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Te(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ee(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var sa=Object.freeze({toMercator:Je,toWgs84:Qe}),ca=6378137,la=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},ua=function(t,e,n,i,r,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var ha=Math.PI/180,da=180/Math.PI,pa=function(t,e){this.lon=t,this.lat=e,this.x=ha*t,this.y=ha*e};pa.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},pa.prototype.antipode=function(){return new pa(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var fa=function(){this.coords=[],this.length=0};fa.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ga=function(t){this.properties=t||{},this.geometries=[]};ga.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ga.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var ma=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new pa(t.x,t.y),this.end=new pa(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(r)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};ma.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=da*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[da*Math.atan2(r,i),a]},ma.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=this.interpolate(i*r);n.push(o)}for(var a=!1,s=0,c=e&&e.offset?e.offset:10,l=180-c,u=-180+c,h=360-c,d=1;d<n.length;++d){var p=n[d-1][0],f=n[d][0],g=Math.abs(f-p);g>h&&(f>l&&p<u||p>l&&f<u)?a=!0:g>s&&(s=g)}var m=[];if(a&&s<c){var v=[];m.push(v);for(var y=0;y<n.length;++y){var b=parseFloat(n[y][0]);if(y>0&&Math.abs(b-n[y-1][0])>h){var _=parseFloat(n[y-1][0]),C=parseFloat(n[y-1][1]),x=parseFloat(n[y][0]),w=parseFloat(n[y][1]);if(_>-180&&_<u&&180===x&&y+1<n.length&&n[y-1][0]>-180&&n[y-1][0]<u){v.push([-180,n[y][1]]),y++,v.push([n[y][0],n[y][1]]);continue}if(_>l&&_<180&&-180===x&&y+1<n.length&&n[y-1][0]>l&&n[y-1][0]<180){v.push([180,n[y][1]]),y++,v.push([n[y][0],n[y][1]]);continue}if(_<u&&x>l){var I=_;_=x,x=I;var A=C;C=w,w=A}if(_>l&&x<u&&(x+=360),_<=180&&x>=180&&_<x){var P=(180-_)/(x-_),O=P*w+(1-P)*C;v.push([n[y-1][0]>l?180:-180,O]),(v=[]).push([n[y-1][0]>l?-180:180,O]),m.push(v)}else m.push(v=[]);v.push([b,n[y][1]])}else v.push([n[y][0],n[y][1]])}}else{var M=[];m.push(M);for(var S=0;S<n.length;++S)M.push([n[S][0],n[S][1]])}for(var k=new ga(this.properties),E=0;E<m.length;++E){var L=new fa;k.geometries.push(L);for(var T=m[E],R=0;R<T.length;++R)L.move_to(T[R])}return k};var va=Rn;Rn.polyline=Rn,Rn.polygon=function(t,e){var n,i,r,o,a,s,c;for(i=1;i<=8;i*=2){for(n=[],o=!(Bn(r=t[t.length-1],e)&i),a=0;a<t.length;a++)(c=!(Bn(s=t[a],e)&i))!==o&&n.push(Nn(r,s,i,e)),c&&n.push(s),r=s,o=c;if(!(t=n).length)break}return n};var ya=Array.prototype.slice,ba={successCallback:null,verbose:!1,polygons:!1},_a={},Ca=64,xa=16,wa=4,Ia=1,Aa=[],Pa=[],Oa=[],Ma=[],Sa=[],ka=[],Ea=[],La=[],Ta=[],Ra=[],Na=[],Ba=[],ja=[],Da=[],Fa=[],za=[],Va=[],Ga=[],Za=[],Wa=[],Ha=[],Ua=[],$a=[],Ka=[];Ea[85]=Ra[85]=-1,La[85]=Na[85]=0,Ta[85]=Ba[85]=1,Za[85]=Ua[85]=1,Wa[85]=$a[85]=0,Ha[85]=Ka[85]=1,Aa[85]=Ma[85]=0,Pa[85]=Sa[85]=-1,Oa[85]=Fa[85]=0,za[85]=ja[85]=0,Va[85]=Da[85]=1,ka[85]=Ga[85]=1,Ua[1]=Ua[169]=0,$a[1]=$a[169]=-1,Ka[1]=Ka[169]=0,ja[1]=ja[169]=-1,Da[1]=Da[169]=0,Fa[1]=Fa[169]=0,Ra[4]=Ra[166]=0,Na[4]=Na[166]=-1,Ba[4]=Ba[166]=1,za[4]=za[166]=1,Va[4]=Va[166]=0,Ga[4]=Ga[166]=0,Ea[16]=Ea[154]=0,La[16]=La[154]=1,Ta[16]=Ta[154]=1,Ma[16]=Ma[154]=1,Sa[16]=Sa[154]=0,ka[16]=ka[154]=1,Za[64]=Za[106]=0,Wa[64]=Wa[106]=1,Ha[64]=Ha[106]=0,Aa[64]=Aa[106]=-1,Pa[64]=Pa[106]=0,Oa[64]=Oa[106]=1,Za[2]=Za[168]=0,Wa[2]=Wa[168]=-1,Ha[2]=Ha[168]=1,Ua[2]=Ua[168]=0,$a[2]=$a[168]=-1,Ka[2]=Ka[168]=0,ja[2]=ja[168]=-1,Da[2]=Da[168]=0,Fa[2]=Fa[168]=0,za[2]=za[168]=-1,Va[2]=Va[168]=0,Ga[2]=Ga[168]=1,Ea[8]=Ea[162]=0,La[8]=La[162]=-1,Ta[8]=Ta[162]=0,Ra[8]=Ra[162]=0,Na[8]=Na[162]=-1,Ba[8]=Ba[162]=1,ja[8]=ja[162]=1,Da[8]=Da[162]=0,Fa[8]=Fa[162]=1,za[8]=za[162]=1,Va[8]=Va[162]=0,Ga[8]=Ga[162]=0,Ea[32]=Ea[138]=0,La[32]=La[138]=1,Ta[32]=Ta[138]=1,Ra[32]=Ra[138]=0,Na[32]=Na[138]=1,Ba[32]=Ba[138]=0,Aa[32]=Aa[138]=1,Pa[32]=Pa[138]=0,Oa[32]=Oa[138]=0,Ma[32]=Ma[138]=1,Sa[32]=Sa[138]=0,ka[32]=ka[138]=1,Ua[128]=Ua[42]=0,$a[128]=$a[42]=1,Ka[128]=Ka[42]=1,Za[128]=Za[42]=0,Wa[128]=Wa[42]=1,Ha[128]=Ha[42]=0,Aa[128]=Aa[42]=-1,Pa[128]=Pa[42]=0,Oa[128]=Oa[42]=1,Ma[128]=Ma[42]=-1,Sa[128]=Sa[42]=0,ka[128]=ka[42]=0,Ra[5]=Ra[165]=-1,Na[5]=Na[165]=0,Ba[5]=Ba[165]=0,Ua[5]=Ua[165]=1,$a[5]=$a[165]=0,Ka[5]=Ka[165]=0,za[20]=za[150]=0,Va[20]=Va[150]=1,Ga[20]=Ga[150]=1,Ma[20]=Ma[150]=0,Sa[20]=Sa[150]=-1,ka[20]=ka[150]=1,Ea[80]=Ea[90]=-1,La[80]=La[90]=0,Ta[80]=Ta[90]=1,Za[80]=Za[90]=1,Wa[80]=Wa[90]=0,Ha[80]=Ha[90]=1,ja[65]=ja[105]=0,Da[65]=Da[105]=1,Fa[65]=Fa[105]=0,Aa[65]=Aa[105]=0,Pa[65]=Pa[105]=-1,Oa[65]=Oa[105]=0,Ea[160]=Ea[10]=-1,La[160]=La[10]=0,Ta[160]=Ta[10]=1,Ra[160]=Ra[10]=-1,Na[160]=Na[10]=0,Ba[160]=Ba[10]=0,Ua[160]=Ua[10]=1,$a[160]=$a[10]=0,Ka[160]=Ka[10]=0,Za[160]=Za[10]=1,Wa[160]=Wa[10]=0,Ha[160]=Ha[10]=1,za[130]=za[40]=0,Va[130]=Va[40]=1,Ga[130]=Ga[40]=1,ja[130]=ja[40]=0,Da[130]=Da[40]=1,Fa[130]=Fa[40]=0,Aa[130]=Aa[40]=0,Pa[130]=Pa[40]=-1,Oa[130]=Oa[40]=0,Ma[130]=Ma[40]=0,Sa[130]=Sa[40]=-1,ka[130]=ka[40]=1,Ra[37]=Ra[133]=0,Na[37]=Na[133]=1,Ba[37]=Ba[133]=1,Ua[37]=Ua[133]=0,$a[37]=$a[133]=1,Ka[37]=Ka[133]=0,Aa[37]=Aa[133]=-1,Pa[37]=Pa[133]=0,Oa[37]=Oa[133]=0,Ma[37]=Ma[133]=1,Sa[37]=Sa[133]=0,ka[37]=ka[133]=0,za[148]=za[22]=-1,Va[148]=Va[22]=0,Ga[148]=Ga[22]=0,Ua[148]=Ua[22]=0,$a[148]=$a[22]=-1,Ka[148]=Ka[22]=1,Za[148]=Za[22]=0,Wa[148]=Wa[22]=1,Ha[148]=Ha[22]=1,Ma[148]=Ma[22]=-1,Sa[148]=Sa[22]=0,ka[148]=ka[22]=1,Ea[82]=Ea[88]=0,La[82]=La[88]=-1,Ta[82]=Ta[88]=1,za[82]=za[88]=1,Va[82]=Va[88]=0,Ga[82]=Ga[88]=1,ja[82]=ja[88]=-1,Da[82]=Da[88]=0,Fa[82]=Fa[88]=1,Za[82]=Za[88]=0,Wa[82]=Wa[88]=-1,Ha[82]=Ha[88]=0,Ea[73]=Ea[97]=0,La[73]=La[97]=1,Ta[73]=Ta[97]=0,Ra[73]=Ra[97]=0,Na[73]=Na[97]=-1,Ba[73]=Ba[97]=0,ja[73]=ja[97]=1,Da[73]=Da[97]=0,Fa[73]=Fa[97]=0,Aa[73]=Aa[97]=1,Pa[73]=Pa[97]=0,Oa[73]=Oa[97]=1,Ea[145]=Ea[25]=0,La[145]=La[25]=-1,Ta[145]=Ta[25]=0,ja[145]=ja[25]=1,Da[145]=Da[25]=0,Fa[145]=Fa[25]=1,Ua[145]=Ua[25]=0,$a[145]=$a[25]=1,Ka[145]=Ka[25]=1,Ma[145]=Ma[25]=-1,Sa[145]=Sa[25]=0,ka[145]=ka[25]=0,Ra[70]=Ra[100]=0,Na[70]=Na[100]=1,Ba[70]=Ba[100]=0,za[70]=za[100]=-1,Va[70]=Va[100]=0,Ga[70]=Ga[100]=1,Za[70]=Za[100]=0,Wa[70]=Wa[100]=-1,Ha[70]=Ha[100]=1,Aa[70]=Aa[100]=1,Pa[70]=Pa[100]=0,Oa[70]=Oa[100]=0,Ra[101]=Ra[69]=0,Na[101]=Na[69]=1,Ba[101]=Ba[69]=0,Aa[101]=Aa[69]=1,Pa[101]=Pa[69]=0,Oa[101]=Oa[69]=0,Ua[149]=Ua[21]=0,$a[149]=$a[21]=1,Ka[149]=Ka[21]=1,Ma[149]=Ma[21]=-1,Sa[149]=Sa[21]=0,ka[149]=ka[21]=0,za[86]=za[84]=-1,Va[86]=Va[84]=0,Ga[86]=Ga[84]=1,Za[86]=Za[84]=0,Wa[86]=Wa[84]=-1,Ha[86]=Ha[84]=1,Ea[89]=Ea[81]=0,La[89]=La[81]=-1,Ta[89]=Ta[81]=0,ja[89]=ja[81]=1,Da[89]=Da[81]=0,Fa[89]=Fa[81]=1,Ea[96]=Ea[74]=0,La[96]=La[74]=1,Ta[96]=Ta[74]=0,Ra[96]=Ra[74]=-1,Na[96]=Na[74]=0,Ba[96]=Ba[74]=1,Za[96]=Za[74]=1,Wa[96]=Wa[74]=0,Ha[96]=Ha[74]=0,Aa[96]=Aa[74]=1,Pa[96]=Pa[74]=0,Oa[96]=Oa[74]=1,Ea[24]=Ea[146]=0,La[24]=La[146]=-1,Ta[24]=Ta[146]=1,za[24]=za[146]=1,Va[24]=Va[146]=0,Ga[24]=Ga[146]=1,ja[24]=ja[146]=0,Da[24]=Da[146]=1,Fa[24]=Fa[146]=1,Ma[24]=Ma[146]=0,Sa[24]=Sa[146]=-1,ka[24]=ka[146]=0,Ra[6]=Ra[164]=-1,Na[6]=Na[164]=0,Ba[6]=Ba[164]=1,za[6]=za[164]=-1,Va[6]=Va[164]=0,Ga[6]=Ga[164]=0,Ua[6]=Ua[164]=0,$a[6]=$a[164]=-1,Ka[6]=Ka[164]=1,Za[6]=Za[164]=1,Wa[6]=Wa[164]=0,Ha[6]=Ha[164]=0,ja[129]=ja[41]=0,Da[129]=Da[41]=1,Fa[129]=Fa[41]=1,Ua[129]=Ua[41]=0,$a[129]=$a[41]=1,Ka[129]=Ka[41]=0,Aa[129]=Aa[41]=-1,Pa[129]=Pa[41]=0,Oa[129]=Oa[41]=0,Ma[129]=Ma[41]=0,Sa[129]=Sa[41]=-1,ka[129]=ka[41]=0,za[66]=za[104]=0,Va[66]=Va[104]=1,Ga[66]=Ga[104]=0,ja[66]=ja[104]=-1,Da[66]=Da[104]=0,Fa[66]=Fa[104]=1,Za[66]=Za[104]=0,Wa[66]=Wa[104]=-1,Ha[66]=Ha[104]=0,Aa[66]=Aa[104]=0,Pa[66]=Pa[104]=-1,Oa[66]=Oa[104]=1,Ea[144]=Ea[26]=-1,La[144]=La[26]=0,Ta[144]=Ta[26]=0,Ua[144]=Ua[26]=1,$a[144]=$a[26]=0,Ka[144]=Ka[26]=1,Za[144]=Za[26]=0,Wa[144]=Wa[26]=1,Ha[144]=Ha[26]=1,Ma[144]=Ma[26]=-1,Sa[144]=Sa[26]=0,ka[144]=ka[26]=1,Ra[36]=Ra[134]=0,Na[36]=Na[134]=1,Ba[36]=Ba[134]=1,za[36]=za[134]=0,Va[36]=Va[134]=1,Ga[36]=Ga[134]=0,Aa[36]=Aa[134]=0,Pa[36]=Pa[134]=-1,Oa[36]=Oa[134]=1,Ma[36]=Ma[134]=1,Sa[36]=Sa[134]=0,ka[36]=ka[134]=0,Ea[9]=Ea[161]=-1,La[9]=La[161]=0,Ta[9]=Ta[161]=0,Ra[9]=Ra[161]=0,Na[9]=Na[161]=-1,Ba[9]=Ba[161]=0,ja[9]=ja[161]=1,Da[9]=Da[161]=0,Fa[9]=Fa[161]=0,Ua[9]=Ua[161]=1,$a[9]=$a[161]=0,Ka[9]=Ka[161]=1,Ea[136]=0,La[136]=1,Ta[136]=1,Ra[136]=0,Na[136]=1,Ba[136]=0,za[136]=-1,Va[136]=0,Ga[136]=1,ja[136]=-1,Da[136]=0,Fa[136]=0,Ua[136]=0,$a[136]=-1,Ka[136]=0,Za[136]=0,Wa[136]=-1,Ha[136]=1,Aa[136]=1,Pa[136]=0,Oa[136]=0,Ma[136]=1,Sa[136]=0,ka[136]=1,Ea[34]=0,La[34]=-1,Ta[34]=0,Ra[34]=0,Na[34]=-1,Ba[34]=1,za[34]=1,Va[34]=0,Ga[34]=0,ja[34]=1,Da[34]=0,Fa[34]=1,Ua[34]=0,$a[34]=1,Ka[34]=1,Za[34]=0,Wa[34]=1,Ha[34]=0,Aa[34]=-1,Pa[34]=0,Oa[34]=1,Ma[34]=-1,Sa[34]=0,ka[34]=0,Ea[35]=0,La[35]=1,Ta[35]=1,Ra[35]=0,Na[35]=-1,Ba[35]=1,za[35]=1,Va[35]=0,Ga[35]=0,ja[35]=-1,Da[35]=0,Fa[35]=0,Ua[35]=0,$a[35]=-1,Ka[35]=0,Za[35]=0,Wa[35]=1,Ha[35]=0,Aa[35]=-1,Pa[35]=0,Oa[35]=1,Ma[35]=1,Sa[35]=0,ka[35]=1,Ea[153]=0,La[153]=1,Ta[153]=1,ja[153]=-1,Da[153]=0,Fa[153]=0,Ua[153]=0,$a[153]=-1,Ka[153]=0,Ma[153]=1,Sa[153]=0,ka[153]=1,Ra[102]=0,Na[102]=-1,Ba[102]=1,za[102]=1,Va[102]=0,Ga[102]=0,Za[102]=0,Wa[102]=1,Ha[102]=0,Aa[102]=-1,Pa[102]=0,Oa[102]=1,Ea[155]=0,La[155]=-1,Ta[155]=0,ja[155]=1,Da[155]=0,Fa[155]=1,Ua[155]=0,$a[155]=1,Ka[155]=1,Ma[155]=-1,Sa[155]=0,ka[155]=0,Ra[103]=0,Na[103]=1,Ba[103]=0,za[103]=-1,Va[103]=0,Ga[103]=1,Za[103]=0,Wa[103]=-1,Ha[103]=1,Aa[103]=1,Pa[103]=0,Oa[103]=0,Ea[152]=0,La[152]=1,Ta[152]=1,za[152]=-1,Va[152]=0,Ga[152]=1,ja[152]=-1,Da[152]=0,Fa[152]=0,Ua[152]=0,$a[152]=-1,Ka[152]=0,Za[152]=0,Wa[152]=-1,Ha[152]=1,Ma[152]=1,Sa[152]=0,ka[152]=1,Ea[156]=0,La[156]=-1,Ta[156]=1,za[156]=1,Va[156]=0,Ga[156]=1,ja[156]=-1,Da[156]=0,Fa[156]=0,Ua[156]=0,$a[156]=-1,Ka[156]=0,Za[156]=0,Wa[156]=1,Ha[156]=1,Ma[156]=-1,Sa[156]=0,ka[156]=1,Ea[137]=0,La[137]=1,Ta[137]=1,Ra[137]=0,Na[137]=1,Ba[137]=0,ja[137]=-1,Da[137]=0,Fa[137]=0,Ua[137]=0,$a[137]=-1,Ka[137]=0,Aa[137]=1,Pa[137]=0,Oa[137]=0,Ma[137]=1,Sa[137]=0,ka[137]=1,Ea[139]=0,La[139]=1,Ta[139]=1,Ra[139]=0,Na[139]=-1,Ba[139]=0,ja[139]=1,Da[139]=0,Fa[139]=0,Ua[139]=0,$a[139]=1,Ka[139]=0,Aa[139]=-1,Pa[139]=0,Oa[139]=0,Ma[139]=1,Sa[139]=0,ka[139]=1,Ea[98]=0,La[98]=-1,Ta[98]=0,Ra[98]=0,Na[98]=-1,Ba[98]=1,za[98]=1,Va[98]=0,Ga[98]=0,ja[98]=1,Da[98]=0,Fa[98]=1,Za[98]=0,Wa[98]=1,Ha[98]=0,Aa[98]=-1,Pa[98]=0,Oa[98]=1,Ea[99]=0,La[99]=1,Ta[99]=0,Ra[99]=0,Na[99]=-1,Ba[99]=1,za[99]=1,Va[99]=0,Ga[99]=0,ja[99]=-1,Da[99]=0,Fa[99]=1,Za[99]=0,Wa[99]=-1,Ha[99]=0,Aa[99]=1,Pa[99]=0,Oa[99]=1,Ra[38]=0,Na[38]=-1,Ba[38]=1,za[38]=1,Va[38]=0,Ga[38]=0,Ua[38]=0,$a[38]=1,Ka[38]=1,Za[38]=0,Wa[38]=1,Ha[38]=0,Aa[38]=-1,Pa[38]=0,Oa[38]=1,Ma[38]=-1,Sa[38]=0,ka[38]=0,Ra[39]=0,Na[39]=1,Ba[39]=1,za[39]=-1,Va[39]=0,Ga[39]=0,Ua[39]=0,$a[39]=-1,Ka[39]=1,Za[39]=0,Wa[39]=1,Ha[39]=0,Aa[39]=-1,Pa[39]=0,Oa[39]=1,Ma[39]=1,Sa[39]=0,ka[39]=0;var Xa=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ya=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},qa=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Ja=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Qa=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ts=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},es=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ns=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},is=[],rs=[],os=[],as=[],ss=[],cs=[],ls=[],us=[];as[1]=ss[1]=18,as[169]=ss[169]=18,os[4]=rs[4]=12,os[166]=rs[166]=12,is[16]=us[16]=4,is[154]=us[154]=4,cs[64]=ls[64]=22,cs[106]=ls[106]=22,os[2]=cs[2]=17,as[2]=ss[2]=18,os[168]=cs[168]=17,as[168]=ss[168]=18,is[8]=as[8]=9,rs[8]=os[8]=12,is[162]=as[162]=9,rs[162]=os[162]=12,is[32]=us[32]=4,rs[32]=ls[32]=1,is[138]=us[138]=4,rs[138]=ls[138]=1,ss[128]=us[128]=21,cs[128]=ls[128]=22,ss[42]=us[42]=21,cs[42]=ls[42]=22,rs[5]=ss[5]=14,rs[165]=ss[165]=14,os[20]=us[20]=6,os[150]=us[150]=6,is[80]=cs[80]=11,is[90]=cs[90]=11,as[65]=ls[65]=3,as[105]=ls[105]=3,is[160]=cs[160]=11,rs[160]=ss[160]=14,is[10]=cs[10]=11,rs[10]=ss[10]=14,os[130]=us[130]=6,as[130]=ls[130]=3,os[40]=us[40]=6,as[40]=ls[40]=3,rs[101]=ls[101]=1,rs[69]=ls[69]=1,ss[149]=us[149]=21,ss[21]=us[21]=21,os[86]=cs[86]=17,os[84]=cs[84]=17,is[89]=as[89]=9,is[81]=as[81]=9,is[96]=ls[96]=0,rs[96]=cs[96]=15,is[74]=ls[74]=0,rs[74]=cs[74]=15,is[24]=os[24]=8,as[24]=us[24]=7,is[146]=os[146]=8,as[146]=us[146]=7,rs[6]=cs[6]=15,os[6]=ss[6]=16,rs[164]=cs[164]=15,os[164]=ss[164]=16,as[129]=us[129]=7,ss[129]=ls[129]=20,as[41]=us[41]=7,ss[41]=ls[41]=20,os[66]=ls[66]=2,as[66]=cs[66]=19,os[104]=ls[104]=2,as[104]=cs[104]=19,is[144]=ss[144]=10,cs[144]=us[144]=23,is[26]=ss[26]=10,cs[26]=us[26]=23,rs[36]=us[36]=5,os[36]=ls[36]=2,rs[134]=us[134]=5,os[134]=ls[134]=2,is[9]=ss[9]=10,rs[9]=as[9]=13,is[161]=ss[161]=10,rs[161]=as[161]=13,rs[37]=us[37]=5,ss[37]=ls[37]=20,rs[133]=us[133]=5,ss[133]=ls[133]=20,os[148]=ss[148]=16,cs[148]=us[148]=23,os[22]=ss[22]=16,cs[22]=us[22]=23,is[82]=os[82]=8,as[82]=cs[82]=19,is[88]=os[88]=8,as[88]=cs[88]=19,is[73]=ls[73]=0,rs[73]=as[73]=13,is[97]=ls[97]=0,rs[97]=as[97]=13,is[145]=as[145]=9,ss[145]=us[145]=21,is[25]=as[25]=9,ss[25]=us[25]=21,rs[70]=ls[70]=1,os[70]=cs[70]=17,rs[100]=ls[100]=1,os[100]=cs[100]=17,is[34]=as[34]=9,rs[34]=os[34]=12,ss[34]=us[34]=21,cs[34]=ls[34]=22,is[136]=us[136]=4,rs[136]=ls[136]=1,os[136]=cs[136]=17,as[136]=ss[136]=18,is[35]=us[35]=4,rs[35]=os[35]=12,as[35]=ss[35]=18,cs[35]=ls[35]=22,is[153]=us[153]=4,as[153]=ss[153]=18,rs[102]=os[102]=12,cs[102]=ls[102]=22,is[155]=as[155]=9,ss[155]=us[155]=23,rs[103]=ls[103]=1,os[103]=cs[103]=17,is[152]=us[152]=4,os[152]=cs[152]=17,as[152]=ss[152]=18,is[156]=os[156]=8,as[156]=ss[156]=18,cs[156]=us[156]=23,is[137]=us[137]=4,rs[137]=ls[137]=1,as[137]=ss[137]=18,is[139]=us[139]=4,rs[139]=as[139]=13,ss[139]=ls[139]=20,is[98]=as[98]=9,rs[98]=os[98]=12,cs[98]=ls[98]=22,is[99]=ls[99]=0,rs[99]=os[99]=12,as[99]=cs[99]=19,rs[38]=os[38]=12,ss[38]=us[38]=21,cs[38]=ls[38]=22,rs[39]=us[39]=5,os[39]=ss[39]=16,cs[39]=ls[39]=22;var hs=[];hs[1]=hs[169]=Xa,hs[4]=hs[166]=Ya,hs[16]=hs[154]=qa,hs[64]=hs[106]=Ja,hs[168]=hs[2]=Qa,hs[162]=hs[8]=ts,hs[138]=hs[32]=es,hs[42]=hs[128]=ns,hs[5]=hs[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},hs[20]=hs[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},hs[80]=hs[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},hs[65]=hs[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},hs[160]=hs[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},hs[130]=hs[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},hs[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},hs[101]=hs[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},hs[149]=hs[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},hs[86]=hs[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},hs[89]=hs[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},hs[96]=hs[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},hs[24]=hs[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},hs[6]=hs[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},hs[129]=hs[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},hs[66]=hs[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},hs[144]=hs[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},hs[36]=hs[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},hs[9]=hs[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},hs[37]=hs[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},hs[148]=hs[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},hs[82]=hs[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},hs[73]=hs[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},hs[145]=hs[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},hs[70]=hs[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},hs[34]=function(t){return[ns(t),ts(t)]},hs[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},hs[136]=function(t){return[es(t),Qa(t)]},hs[153]=function(t){return[qa(t),Xa(t)]},hs[102]=function(t){return[Ya(t),Ja(t)]},hs[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},hs[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},hs[152]=function(t){return[qa(t),Qa(t)]},hs[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},hs[137]=function(t){return[es(t),Xa(t)]},hs[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},hs[98]=function(t){return[ts(t),Ja(t)]},hs[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},hs[38]=function(t){return[Ya(t),ns(t)]},hs[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ds=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ds.buildId=function(t){return t.join(",")},ds.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},ds.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},ds.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ds.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=si(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},ds.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ds.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ds.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var ps=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};ps.prototype.getSymetric=function(){return this.symetric||(this.symetric=new ps(this.to,this.from),this.symetric.symetric=this),this.symetric},ps.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},ps.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},ps.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},ps.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},ps.prototype.compareTo=function(t){return si(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var fs=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},gs={length:{configurable:!0}};fs.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},fs.prototype.get=function(t){return this.edges[t]},gs.length.get=function(){return this.edges.length},fs.prototype.forEach=function(t){this.edges.forEach(t)},fs.prototype.map=function(t){return this.edges.map(t)},fs.prototype.some=function(t){return this.edges.some(t)},fs.prototype.isValid=function(){return!0},fs.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=si(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},fs.prototype.toMultiPoint=function(){return h(this.edges.map((function(t){return t.from.coordinates})))},fs.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},fs.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ie(this.toPolygon())},fs.findEdgeRingContaining=function(t,e){var n,r,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),i=t.geometry.coordinates.map((function(t){return t[1]})),r=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,r)&&Math.max(null,i)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,r)&&Math.min(null,i)===Math.min(null,o)}(a,o)&&ci(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(i(s))&&(r&&!ci(n,a)||(r=e))}})),r},fs.prototype.inside=function(t){return Mt(t,this.toPolygon())},Object.defineProperties(fs.prototype,gs);var ms=function(){this.edges=[],this.nodes={}};ms.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new ms;return B(t,(function(t){$(t,"LineString","Graph::fromGeoJson"),M(t,(function(t,n){if(t){var i=e.getNode(t),r=e.getNode(n);e.addEdge(i,r)}return n}))})),e},ms.prototype.getNode=function(t){var e=ds.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ds(t)),n},ms.prototype.addEdge=function(t,e){var n=new ps(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},ms.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},ms.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},ms.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},ms.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},ms.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,c=void 0,l=void 0;a.label===e&&(c=a),s.label===e&&(l=s),c&&l&&(l&&(i=l),c&&(i&&(i.next=c,i=void 0),n||(n=c)))}i&&(i.next=n)},ms.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},ms.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},ms.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},ms.prototype._findEdgeRing=function(t){var e=t,n=new fs;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},ms.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},ms.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var vs=mt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),ys=mt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i})),bs=mt((function(t){function e(t){return null==t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var i=Array.prototype.slice,r=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,c;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(ys(t))return!!ys(o)&&(t=i.call(t),o=i.call(o),r(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var l=vs(t),u=vs(o)}catch(t){return!1}if(l.length!=u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!=u[s])return!1;for(s=l.length-1;s>=0;s--)if(!r(t[c=l[s]],o[c],a))return!1;return typeof t==typeof o}(t,o,a))}})),_s=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:bi};_s.prototype.compare=function(t,e){if(t.type!==e.type||!yi(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=vi(t),r=vi(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},_s.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},_s.prototype.compareLine=function(t,e,n,i){if(!yi(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},_s.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},_s.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},_s.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},_s.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},_s.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},_s.prototype.removePseudo=function(t){return t};var Cs=_s,xs=mt((function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),ws=mt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(u),s=0,c=0;c<u;c++)a[c]=0;for(var l=0;l<n;l++){var u=this.dataset[l].length;if(o===this.assignments[l]){for(c=0;c<u;c++)a[c]+=this.dataset[l][c];s++}}if(s>0){for(c=0;c<u;c++)a[c]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(i=n(t,e[s]))<r&&(r=i,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Is=mt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),As=mt((function(t){function e(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}if(t.exports)var n=Is;e.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var c=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,c),this._expandCluster(s,c))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e];t.push([i,this._reachability[i]])}return t},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ps=mt((function(t){t.exports&&(t.exports={DBSCAN:xs,KMEANS:ws,OPTICS:As,PriorityQueue:Is})})),Os=function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return n?Math.sqrt(r):r},Ms=Os,Ss=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},ks=Os,Es={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||Es.heuristics.manhattan,o=i.closest||!1,a=new Pi((function(t){return t.f})),s=e;for(e.h=r(e,n),a.push(e);a.size()>0;){var c=a.pop();if(c===n)return wi(c);c.closed=!0;for(var l=t.neighbors(c),u=0,h=l.length;u<h;++u){var d=l[u];if(!d.closed&&!d.isWall()){var p=c.g+d.getCost(c),f=d.visited;(!f||p<d.g)&&(d.visited=!0,d.parent=c,d.h=d.h||r(d,n),d.g=p,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<s.h||d.h===s.h&&d.g<s.g)&&(s=d),f?a.rescoreElement(d):a.push(d))}}}return o?wi(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Ii.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Es.cleanNode(this.nodes[t])},Ii.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Es.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ii.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ii.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Ii.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,i=(e=o[a]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},Ai.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ai.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ai.prototype.isWall=function(){return 0===this.weight},Pi.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,a=o-1,s=null;if(a<e&&(r=this.scoreFunction(this.content[a]))<i&&(s=a),o<e&&this.scoreFunction(this.content[o])<(null===s?i:r)&&(s=o),null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var Ls=function(t){return function(){return t}};Si.prototype={constructor:Si,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ti(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ei(this,n),n=(t=n).U),n.C=!1,i.C=!0,Li(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Li(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ei(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Ti(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,r.L=t=n.R,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ei(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Li(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ei(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Li(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ei(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Li(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Ts,Rs,Ns,Bs,js,Ds=[],Fs=[],zs=1e-6,Vs=1e-12;qi.prototype={constructor:qi,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return zi(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s=n.site,c=-1,l=e[r[o-1]],u=l.left===s?l.right:l.left;++c<o;)a=u,u=(l=e[r[c]]).left===s?l.right:l.left,a&&u&&i<a.index&&i<u.index&&Xi(s,a,u)<0&&t.push([s.data,a.data,u.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var c=t-r.site[0],l=e-r.site[1],u=c*c+l*l;do{r=o.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var c=t-s[0],l=e-s[1],h=c*c+l*l;h<u&&(u=h,a=s.index)}}))}while(null!==a);return o._found=i,null==n||u<=n*n?r.site:null}};var Gs=Object.freeze({randomPosition:rr,randomPoint:or,randomPolygon:ar,randomLineString:sr}),Zs=Object.freeze({getCluster:lr,clusterEach:ur,clusterReduce:hr,createBins:dr,applyFilter:pr,propertiesContainsFilter:fr,filterProperties:gr});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Ws=function(){};Ws.prototype.interfaces_=function(){return[]},Ws.prototype.getClass=function(){return Ws},Ws.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Hs=function(){},Us=function(){},$s={MAX_VALUE:{configurable:!0}};Us.isNaN=function(t){return Number.isNaN(t)},Us.doubleToLongBits=function(t){return t},Us.longBitsToDouble=function(t){return t},Us.isInfinite=function(t){return!Number.isFinite(t)},$s.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Us,$s);var Ks=function(){},Xs=function(){},Ys=function(){},qs=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Js={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};qs.prototype.setOrdinate=function(t,e){switch(t){case qs.X:this.x=e;break;case qs.Y:this.y=e;break;case qs.Z:this.z=e;break;default:throw new Hs("Invalid ordinate index: "+t)}},qs.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Ws.equalsWithTolerance(this.x,e.x,n)&&!!Ws.equalsWithTolerance(this.y,e.y,n)}},qs.prototype.getOrdinate=function(t){switch(t){case qs.X:return this.x;case qs.Y:return this.y;case qs.Z:return this.z}throw new Hs("Invalid ordinate index: "+t)},qs.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Us.isNaN(this.z))&&Us.isNaN(t.z)},qs.prototype.equals=function(t){return t instanceof qs&&this.equals2D(t)},qs.prototype.equalInZ=function(t,e){return Ws.equalsWithTolerance(this.z,t.z,e)},qs.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},qs.prototype.clone=function(){},qs.prototype.copy=function(){return new qs(this)},qs.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},qs.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},qs.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},qs.prototype.hashCode=function(){var t=17;return 37*(t=37*t+qs.hashCode(this.x))+qs.hashCode(this.y)},qs.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},qs.prototype.interfaces_=function(){return[Ks,Xs,mr]},qs.prototype.getClass=function(){return qs},qs.hashCode=function(){if(1===arguments.length){var t=Us.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},Js.DimensionalComparator.get=function(){return Qs},Js.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Js.NULL_ORDINATE.get=function(){return Us.NaN},Js.X.get=function(){return 0},Js.Y.get=function(){return 1},Js.Z.get=function(){return 2},Object.defineProperties(qs,Js);var Qs=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Hs("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Qs.prototype.compare=function(t,e){var n=t,i=e,r=Qs.compare(n.x,i.x);if(0!==r)return r;var o=Qs.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:Qs.compare(n.z,i.z)},Qs.prototype.interfaces_=function(){return[Ys]},Qs.prototype.getClass=function(){return Qs},Qs.compare=function(t,e){return t<e?-1:t>e?1:Us.isNaN(t)?Us.isNaN(e)?0:-1:Us.isNaN(e)?1:0};var tc=function(){};tc.prototype.create=function(){},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ec=function(){},nc={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.toLocationSymbol=function(t){switch(t){case ec.EXTERIOR:return"e";case ec.BOUNDARY:return"b";case ec.INTERIOR:return"i";case ec.NONE:return"-"}throw new Hs("Unknown location value: "+t)},nc.INTERIOR.get=function(){return 0},nc.BOUNDARY.get=function(){return 1},nc.EXTERIOR.get=function(){return 2},nc.NONE.get=function(){return-1},Object.defineProperties(ec,nc);var ic=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},rc=function(){},oc={LOG_10:{configurable:!0}};rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.log10=function(t){var e=Math.log(t);return Us.isInfinite(e)||Us.isNaN(e)?e:e/rc.LOG_10},rc.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},rc.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},rc.wrap=function(t,e){return t<0?e- -t%e:t%e},rc.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[0];return i>a&&(a=i),r>a&&(a=r),o>a&&(a=o),a}},rc.average=function(t,e){return(t+e)/2},oc.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(rc,oc);var ac=function(t){this.str=t};ac.prototype.append=function(t){this.str+=t},ac.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ac.prototype.toString=function(t){return this.str};var sc=function(t){this.value=t};sc.prototype.intValue=function(){return this.value},sc.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},sc.isNaN=function(t){return Number.isNaN(t)};var cc=function(){};cc.isWhitespace=function(t){return t<=32&&t>=0||127===t},cc.toUpperCase=function(t){return t.toUpperCase()};var lc=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},uc={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};lc.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},lc.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=lc.magnitude(n._hi),r=lc.TEN.pow(i);(n=n.divide(r)).gt(lc.TEN)?(n=n.divide(lc.TEN),i+=1):n.lt(lc.ONE)&&(n=n.multiply(lc.TEN),i-=1);for(var o=i+1,a=new ac,s=lc.MAX_PRINT_DIGITS-1,c=0;c<=s;c++){t&&c===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var u=!1,h=0;l>9?(u=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(lc.valueOf(l)).multiply(lc.TEN),u&&n.selfAdd(lc.TEN);var d=!0,p=lc.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-c&&(d=!1),!d)break}return e[0]=i,a.toString()},lc.prototype.sqr=function(){return this.multiply(this)},lc.prototype.doubleValue=function(){return this._hi+this._lo},lc.prototype.subtract=function(){return arguments[0]instanceof lc?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},lc.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},lc.prototype.isZero=function(){return 0===this._hi&&0===this._lo},lc.prototype.selfSubtract=function(){if(arguments[0]instanceof lc){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},lc.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},lc.prototype.min=function(t){return this.le(t)?this:t},lc.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof lc){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null;return this._hi=l=(a=this._hi/e)+(s=(this._hi-(c=a*e)-(l=(n=(s=lc.SPLIT*a)-(n=s-a))*(r=(l=lc.SPLIT*e)-(r=l-e))-c+n*(o=e-r)+(i=a-n)*r+i*o)+this._lo-a*arguments[1])/e),this._lo=a-l+s,this}},lc.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},lc.prototype.divide=function(){if(arguments[0]instanceof lc){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,a=null,s=null,c=null;return n=(o=this._hi/t._hi)-(e=(a=lc.SPLIT*o)-(e=a-o)),c=e*(i=(c=lc.SPLIT*t._hi)-(i=c-t._hi))-(s=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,new lc(c=o+(a=(this._hi-s-c+this._lo-o*t._lo)/t._hi),o-c+a)}if("number"==typeof arguments[0]){var l=arguments[0];return Us.isNaN(l)?lc.createNaN():lc.copy(this).selfDivide(l,0)}},lc.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},lc.prototype.pow=function(t){if(0===t)return lc.valueOf(1);var e=new lc(this),n=lc.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},lc.prototype.ceil=function(){if(this.isNaN())return lc.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new lc(t,e)},lc.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},lc.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},lc.prototype.setValue=function(){return arguments[0]instanceof lc||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},lc.prototype.max=function(t){return this.ge(t)?this:t},lc.prototype.sqrt=function(){if(this.isZero())return lc.valueOf(0);if(this.isNegative())return lc.NaN;var t=1/Math.sqrt(this._hi),e=lc.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},lc.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof lc){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null;return this._hi=(n=(r=this._hi+e)+(a=e-(o=r-this._hi)+(this._hi-(r-o))+this._lo))+(i=a+(r-n)),this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var s=arguments[0],c=arguments[1],l=null,u=null,h=null,d=null,p=null,f=null,g=null;p=(d=this._hi+s)-(f=d-this._hi),h=(u=this._lo+c)-(g=u-this._lo);var m=(l=d+(f=(p=s-f+(this._hi-p))+u))+(f=(h=c-g+(this._lo-h))+(f+(d-l))),v=f+(l-m);return this._hi=m,this._lo=v,this}},lc.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof lc){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null;n=(a=lc.SPLIT*this._hi)-this._hi,n=a-n;var c=(a=this._hi*e)+(s=n*(r=(s=lc.SPLIT*e)-(r=s-e))-a+n*(o=e-r)+(i=this._hi-n)*r+i*o+(this._hi*arguments[1]+this._lo*e)),l=s+(n=a-c);return this._hi=c,this._lo=l,this}},lc.prototype.selfSqr=function(){return this.selfMultiply(this)},lc.prototype.floor=function(){if(this.isNaN())return lc.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new lc(t,e)},lc.prototype.negate=function(){return this.isNaN()?this:new lc(-this._hi,-this._lo)},lc.prototype.clone=function(){},lc.prototype.multiply=function(){if(arguments[0]instanceof lc){var t=arguments[0];return t.isNaN()?lc.createNaN():lc.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Us.isNaN(e)?lc.createNaN():lc.copy(this).selfMultiply(e,0)}},lc.prototype.isNaN=function(){return Us.isNaN(this._hi)},lc.prototype.intValue=function(){return Math.trunc(this._hi)},lc.prototype.toString=function(){var t=lc.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},lc.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+lc.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+lc.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r},lc.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,a=null,s=null;t=(n=1/this._hi)-(r=(a=lc.SPLIT*n)-(r=a-n)),o=(s=lc.SPLIT*this._hi)-this._hi;var c=n+(a=(1-(i=n*this._hi)-(s=r*(o=s-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new lc(c,n-c+a)},lc.prototype.toSciNotation=function(){if(this.isZero())return lc.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=lc.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},lc.prototype.abs=function(){return this.isNaN()?lc.NaN:this.isNegative()?this.negate():new lc(this)},lc.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},lc.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},lc.prototype.add=function(){if(arguments[0]instanceof lc){var t=arguments[0];return lc.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return lc.copy(this).selfAdd(e)}},lc.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof lc){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var e=arguments[1];this._hi=arguments[0],this._lo=e}},lc.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},lc.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},lc.prototype.trunc=function(){return this.isNaN()?lc.NaN:this.isPositive()?this.floor():this.ceil()},lc.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},lc.prototype.interfaces_=function(){return[mr,Ks,Xs]},lc.prototype.getClass=function(){return lc},lc.sqr=function(t){return lc.valueOf(t).selfMultiply(t)},lc.valueOf=function(){return"string"==typeof arguments[0]?lc.parse(arguments[0]):"number"==typeof arguments[0]?new lc(arguments[0]):void 0},lc.sqrt=function(t){return lc.valueOf(t).sqrt()},lc.parse=function(t){for(var e=0,n=t.length;cc.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new lc,a=0,s=0,c=0;!(e>=n);){var l=t.charAt(e);if(e++,cc.isDigit(l)){var u=l-"0";o.selfMultiply(lc.TEN),o.selfAdd(u),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{c=sc.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var d=o,p=a-s-c;if(0===p)d=o;else if(p>0){var f=lc.TEN.pow(p);d=o.divide(f)}else if(p<0){var g=lc.TEN.pow(-p);d=o.multiply(g)}return i?d.negate():d},lc.createNaN=function(){return new lc(Us.NaN,Us.NaN)},lc.copy=function(t){return new lc(t)},lc.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},lc.stringOfChar=function(t,e){for(var n=new ac,i=0;i<e;i++)n.append(t);return n.toString()},uc.PI.get=function(){return new lc(3.141592653589793,12246467991473532e-32)},uc.TWO_PI.get=function(){return new lc(6.283185307179586,24492935982947064e-32)},uc.PI_2.get=function(){return new lc(1.5707963267948966,6123233995736766e-32)},uc.E.get=function(){return new lc(2.718281828459045,14456468917292502e-32)},uc.NaN.get=function(){return new lc(Us.NaN,Us.NaN)},uc.EPS.get=function(){return 123259516440783e-46},uc.SPLIT.get=function(){return 134217729},uc.MAX_PRINT_DIGITS.get=function(){return 32},uc.TEN.get=function(){return lc.valueOf(10)},uc.ONE.get=function(){return lc.valueOf(1)},uc.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},uc.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(lc,uc);var hc=function(){},dc={DP_SAFE_EPSILON:{configurable:!0}};hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.orientationIndex=function(t,e,n){var i=hc.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=lc.valueOf(e.x).selfAdd(-t.x),o=lc.valueOf(e.y).selfAdd(-t.y),a=lc.valueOf(n.x).selfAdd(-e.x),s=lc.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},hc.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},hc.intersection=function(t,e,n,i){var r=lc.valueOf(i.y).selfSubtract(n.y).selfMultiply(lc.valueOf(e.x).selfSubtract(t.x)),o=lc.valueOf(i.x).selfSubtract(n.x).selfMultiply(lc.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=lc.valueOf(i.x).selfSubtract(n.x).selfMultiply(lc.valueOf(t.y).selfSubtract(n.y)),c=lc.valueOf(i.y).selfSubtract(n.y).selfMultiply(lc.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(c).selfDivide(a).doubleValue(),u=lc.valueOf(t.x).selfAdd(lc.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=lc.valueOf(e.x).selfSubtract(t.x).selfMultiply(lc.valueOf(t.y).selfSubtract(n.y)),d=lc.valueOf(e.y).selfSubtract(t.y).selfMultiply(lc.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(d).selfDivide(a).doubleValue(),f=lc.valueOf(n.y).selfAdd(lc.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new qs(u,f)},hc.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return hc.signum(a);i=r+o}else{if(!(r<0))return hc.signum(a);if(o>=0)return hc.signum(a);i=-r-o}var s=hc.DP_SAFE_EPSILON*i;return a>=s||-a>=s?hc.signum(a):2},hc.signum=function(t){return t>0?1:t<0?-1:0},dc.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(hc,dc);var pc=function(){},fc={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};fc.X.get=function(){return 0},fc.Y.get=function(){return 1},fc.Z.get=function(){return 2},fc.M.get=function(){return 3},pc.prototype.setOrdinate=function(t,e,n){},pc.prototype.size=function(){},pc.prototype.getOrdinate=function(t,e){},pc.prototype.getCoordinate=function(){},pc.prototype.getCoordinateCopy=function(t){},pc.prototype.getDimension=function(){},pc.prototype.getX=function(t){},pc.prototype.clone=function(){},pc.prototype.expandEnvelope=function(t){},pc.prototype.copy=function(){},pc.prototype.getY=function(t){},pc.prototype.toCoordinateArray=function(){},pc.prototype.interfaces_=function(){return[Xs]},pc.prototype.getClass=function(){return pc},Object.defineProperties(pc,fc);var gc=function(){},mc=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gc),vc=function(){};vc.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},vc.getProperty=function(t){return{"line.separator":"\n"}[t]};var yc=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof qs&&arguments[1]instanceof qs){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var s=arguments[1],c=arguments[2];this.x=arguments[0],this.y=s,this.w=c}else if(4===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2],d=arguments[3],p=l.y-u.y,f=u.x-l.x,g=l.x*u.y-u.x*l.y,m=h.y-d.y,v=d.x-h.x,y=h.x*d.y-d.x*h.y;this.x=f*y-v*g,this.y=m*g-p*y,this.w=p*v-m*f}};yc.prototype.getY=function(){var t=this.y/this.w;if(Us.isNaN(t)||Us.isInfinite(t))throw new mc;return t},yc.prototype.getX=function(){var t=this.x/this.w;if(Us.isNaN(t)||Us.isInfinite(t))throw new mc;return t},yc.prototype.getCoordinate=function(){var t=new qs;return t.x=this.getX(),t.y=this.getY(),t},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},yc.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-i.y,c=i.x-n.x,l=n.x*i.y-i.x*n.y,u=r*c-s*o,h=(o*l-c*a)/u,d=(s*a-r*l)/u;if(Us.isNaN(h)||Us.isInfinite(h)||Us.isNaN(d)||Us.isInfinite(d))throw new mc;return new qs(h,d)};var bc=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof qs){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},_c={serialVersionUID:{configurable:!0}};bc.prototype.getArea=function(){return this.getWidth()*this.getHeight()},bc.prototype.equals=function(t){if(!(t instanceof bc))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},bc.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new bc:new bc(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},bc.prototype.isNull=function(){return this._maxx<this._minx},bc.prototype.getMaxX=function(){return this._maxx},bc.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof qs){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof bc){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},bc.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof bc){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof qs){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},bc.prototype.getMinY=function(){return this._miny},bc.prototype.getMinX=function(){return this._minx},bc.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof qs){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof bc){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},bc.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},bc.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},bc.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},bc.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},bc.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},bc.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},bc.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},bc.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},bc.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},bc.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof bc)return this.covers(arguments[0]);if(arguments[0]instanceof qs)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},bc.prototype.centre=function(){return this.isNull()?null:new qs((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},bc.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof qs){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof bc){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},bc.prototype.getMaxY=function(){return this._maxy},bc.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},bc.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+qs.hashCode(this._minx))+qs.hashCode(this._maxx))+qs.hashCode(this._miny))+qs.hashCode(this._maxy)},bc.prototype.interfaces_=function(){return[Ks,mr]},bc.prototype.getClass=function(){return bc},bc.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),c=Math.max(o.x,a.x),l=Math.min(i.x,r.x),u=Math.max(i.x,r.x);return!(l>c||u<s||(s=Math.min(o.y,a.y),c=Math.max(o.y,a.y),l=Math.min(i.y,r.y),u=Math.max(i.y,r.y),l>c||u<s))}},_c.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(bc,_c);var Cc={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},xc=function(t){this.geometryFactory=t||new Hl};xc.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=Cc.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Cc.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),Ic[n]&&(e=Ic[n].apply(this,[i[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},xc.prototype.write=function(t){return this.extractGeometry(t)},xc.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!wc[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+wc[e].apply(this,[t])+")"};var wc={coordinate:function(t){return t.x+" "+t.y},point:function(t){return wc.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+wc.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(wc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(wc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+wc.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+wc.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+wc.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+wc.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Ic={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Cc.spaces);return this.geometryFactory.createPoint(new qs(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Cc.trimParens,"$1"),i.push(Ic.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Cc.spaces),i.push(new qs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Cc.spaces),i.push(new qs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Cc.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Cc.trimParens,"$1"),i.push(Ic.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(Cc.parenComma),a=[],s=0,c=o.length;s<c;++s)e=o[s].replace(Cc.trimParens,"$1"),n=Ic.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Cc.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Cc.trimParens,"$1"),i.push(Ic.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Ac=function(t){this.parser=new xc(t)};Ac.prototype.write=function(t){return this.parser.write(t)},Ac.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Pc=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Oc=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pc),Mc=function(){};Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Mc.shouldNeverReachHere=function(){if(0===arguments.length)Mc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Oc("Should never reach here"+(null!==t?": "+t:""))}},Mc.isTrue=function(){var t;if(1===arguments.length)Mc.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Oc:new Oc(t)},Mc.equals=function(){var t,e,n;if(2===arguments.length)Mc.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new Oc("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Sc=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new qs,this._intPt[1]=new qs,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},kc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Sc.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Sc.prototype.getTopologySummary=function(){var t=new ac;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Sc.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},Sc.prototype.getIntersectionNum=function(){return this._result},Sc.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Sc.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Sc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Sc.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},Sc.prototype.getIntersection=function(t){return this._intPt[t]},Sc.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Sc.prototype.hasIntersection=function(){return this._result!==Sc.NO_INTERSECTION},Sc.prototype.getEdgeDistance=function(t,e){return Sc.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Sc.prototype.isCollinear=function(){return this._result===Sc.COLLINEAR_INTERSECTION},Sc.prototype.toString=function(){return Ac.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ac.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Sc.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Sc.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Sc.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc},Sc.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i>r?a:s)||t.equals(e)||(o=Math.max(a,s))}return Mc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Sc.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return Mc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},kc.DONT_INTERSECT.get=function(){return 0},kc.DO_INTERSECT.get=function(){return 1},kc.COLLINEAR.get=function(){return 2},kc.NO_INTERSECTION.get=function(){return 0},kc.POINT_INTERSECTION.get=function(){return 1},kc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Sc,kc);var Ec=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new bc(this._inputLines[0][0],this._inputLines[0][1]),n=new bc(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,bc.intersects(n,i,e)&&0===Rc.orientationIndex(n,i,e)&&0===Rc.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=yc.intersection(t,n,i,r)}catch(a){if(!(a instanceof mc))throw a;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new qs(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=hc.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);vc.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&vc.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new qs(t),o=new qs(e),a=new qs(n),s=new qs(i),c=new qs;this.normalizeToEnvCentre(r,o,a,s,c);var l=this.safeHCoordinateIntersection(r,o,a,s);return l.x+=c.x,l.y+=c.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=bc.intersects(e,n,i),a=bc.intersects(e,n,r),s=bc.intersects(i,r,e),c=bc.intersects(i,r,n);return o&&a?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&c?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||a||c?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&c?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||c?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&c?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,c=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,d=n.y>i.y?n.y:i.y,p=((a>u?a:u)+(c<d?c:d))/2;r.x=((o>l?o:l)+(s<h?s:h))/2,r.y=p,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!bc.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=Rc.orientationIndex(e,n,i),a=Rc.orientationIndex(e,n,r);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=Rc.orientationIndex(i,r,e),c=Rc.orientationIndex(i,r,n);return s>0&&c>0||s<0&&c<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===c?this.computeCollinearIntersection(e,n,i,r):(0===o||0===a||0===s||0===c?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new qs(i):0===a?this._intPt[0]=new qs(r):0===s?this._intPt[0]=new qs(e):0===c&&(this._intPt[0]=new qs(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=Rc.distancePointLine(t,n,i),a=Rc.distancePointLine(e,n,i);return a<o&&(o=a,r=e),(a=Rc.distancePointLine(n,t,e))<o&&(o=a,r=n),(a=Rc.distancePointLine(i,t,e))<o&&(o=a,r=i),r},e}(Sc),Lc=function(){};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.orientationIndex=function(t,e,n){return Lc.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},Lc.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(a=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=a*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(a=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=a*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var Tc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Tc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.y-this._p.y,o=e.y-this._p.y,a=Lc.signOfDet2x2(t.x-this._p.x,r,e.x-this._p.x,o);if(0===a)return this._isPointOnSegment=!0,null;o<r&&(a=-a),a>0&&this._crossingCount++}},Tc.prototype.isPointInPolygon=function(){return this.getLocation()!==ec.EXTERIOR},Tc.prototype.getLocation=function(){return this._isPointOnSegment?ec.BOUNDARY:this._crossingCount%2==1?ec.INTERIOR:ec.EXTERIOR},Tc.prototype.isOnSegment=function(){return this._isPointOnSegment},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.locatePointInRing=function(){if(arguments[0]instanceof qs&&ic(arguments[1],pc)){for(var t=arguments[1],e=new Tc(arguments[0]),n=new qs,i=new qs,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof qs&&arguments[1]instanceof Array){for(var o=arguments[1],a=new Tc(arguments[0]),s=1;s<o.length;s++)if(a.countSegment(o[s],o[s-1]),a.isOnSegment())return a.getLocation();return a.getLocation()}};var Rc=function(){},Nc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.orientationIndex=function(t,e,n){return hc.orientationIndex(t,e,n)},Rc.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++)e+=(t[i].x-n)*(t[i-1].y-t[i+1].y);return e/2}if(ic(arguments[0],pc)){var r=arguments[0],o=r.size();if(o<3)return 0;var a=new qs,s=new qs,c=new qs;r.getCoordinate(0,s),r.getCoordinate(1,c);var l=s.x;c.x-=l;for(var u=0,h=1;h<o-1;h++)a.y=s.y,s.x=c.x,s.y=c.y,r.getCoordinate(h+1,c),c.x-=l,u+=s.x*(a.y-c.y);return u/2}},Rc.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Rc.distancePointLine(t,n,i);if(n.equals(i))return Rc.distancePointLine(i,t,e);var r=!1;if(bc.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,s=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(s<0||s>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?rc.min(Rc.distancePointLine(t,n,i),Rc.distancePointLine(e,n,i),Rc.distancePointLine(n,t,e),Rc.distancePointLine(i,t,e)):0},Rc.isPointInRing=function(t,e){return Rc.locatePointInRing(t,e)!==ec.EXTERIOR},Rc.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new qs;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,c=i.y,l=s-r,u=c-o;n+=Math.sqrt(l*l+u*u),r=s,o=c}return n},Rc.isCCW=function(t){var e=t.length-1;if(e<3)throw new Hs("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var a=i;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==i);var s=i;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==i);var c=t[a],l=t[s];if(c.equals2D(n)||l.equals2D(n)||c.equals2D(l))return!1;var u=Rc.computeOrientation(c,n,l);return 0===u?c.x>l.x:u>0},Rc.locatePointInRing=function(t,e){return Tc.locatePointInRing(t,e)},Rc.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)},Rc.computeOrientation=function(t,e,n){return Rc.orientationIndex(t,e,n)},Rc.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Hs("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Rc.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var c=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/c;return l<=0?o.distance(a):l>=1?o.distance(s):Math.abs(((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/c)*Math.sqrt(c)}},Rc.isOnLine=function(t,e){for(var n=new Ec,i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1},Nc.CLOCKWISE.get=function(){return-1},Nc.RIGHT.get=function(){return Rc.CLOCKWISE},Nc.COUNTERCLOCKWISE.get=function(){return 1},Nc.LEFT.get=function(){return Rc.COUNTERCLOCKWISE},Nc.COLLINEAR.get=function(){return 0},Nc.STRAIGHT.get=function(){return Rc.COLLINEAR},Object.defineProperties(Rc,Nc);var Bc=function(){};Bc.prototype.filter=function(t){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var jc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Dc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};jc.prototype.isGeometryCollection=function(){return this.getSortIndex()===jc.SORTINDEX_GEOMETRYCOLLECTION},jc.prototype.getFactory=function(){return this._factory},jc.prototype.getGeometryN=function(t){return this},jc.prototype.getArea=function(){return 0},jc.prototype.isRectangle=function(){return!1},jc.prototype.equals=function(){if(arguments[0]instanceof jc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof jc&&this.equalsExact(e)}},jc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},jc.prototype.geometryChanged=function(){this.apply(jc.geometryChangedFilter)},jc.prototype.geometryChangedAction=function(){this._envelope=null},jc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},jc.prototype.getLength=function(){return 0},jc.prototype.getNumGeometries=function(){return 1},jc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},jc.prototype.getUserData=function(){return this._userData},jc.prototype.getSRID=function(){return this._SRID},jc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},jc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===jc.SORTINDEX_GEOMETRYCOLLECTION)throw new Hs("This method does not support GeometryCollection arguments")},jc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},jc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},jc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},jc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new bc(this._envelope)},jc.prototype.setSRID=function(t){this._SRID=t},jc.prototype.setUserData=function(t){this._userData=t},jc.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},jc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},jc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===jc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===jc.SORTINDEX_MULTIPOINT||this.getSortIndex()===jc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===jc.SORTINDEX_MULTIPOLYGON},jc.prototype.interfaces_=function(){return[Xs,Ks,mr]},jc.prototype.getClass=function(){return jc},jc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},jc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Dc.serialVersionUID.get=function(){return 0x799ea46522854c00},Dc.SORTINDEX_POINT.get=function(){return 0},Dc.SORTINDEX_MULTIPOINT.get=function(){return 1},Dc.SORTINDEX_LINESTRING.get=function(){return 2},Dc.SORTINDEX_LINEARRING.get=function(){return 3},Dc.SORTINDEX_MULTILINESTRING.get=function(){return 4},Dc.SORTINDEX_POLYGON.get=function(){return 5},Dc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Dc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Dc.geometryChangedFilter.get=function(){return Fc},Object.defineProperties(jc,Dc);var Fc=function(){};Fc.interfaces_=function(){return[Bc]},Fc.filter=function(t){t.geometryChangedAction()};var zc=function(){};zc.prototype.filter=function(t){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Vc=function(){},Gc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Vc.prototype.isInBoundary=function(t){},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Gc.Mod2BoundaryNodeRule.get=function(){return Zc},Gc.EndPointBoundaryNodeRule.get=function(){return Wc},Gc.MultiValentEndPointBoundaryNodeRule.get=function(){return Hc},Gc.MonoValentEndPointBoundaryNodeRule.get=function(){return Uc},Gc.MOD2_BOUNDARY_RULE.get=function(){return new Zc},Gc.ENDPOINT_BOUNDARY_RULE.get=function(){return new Wc},Gc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Hc},Gc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Uc},Gc.OGC_SFS_BOUNDARY_RULE.get=function(){return Vc.MOD2_BOUNDARY_RULE},Object.defineProperties(Vc,Gc);var Zc=function(){};Zc.prototype.isInBoundary=function(t){return t%2==1},Zc.prototype.interfaces_=function(){return[Vc]},Zc.prototype.getClass=function(){return Zc};var Wc=function(){};Wc.prototype.isInBoundary=function(t){return t>0},Wc.prototype.interfaces_=function(){return[Vc]},Wc.prototype.getClass=function(){return Wc};var Hc=function(){};Hc.prototype.isInBoundary=function(t){return t>1},Hc.prototype.interfaces_=function(){return[Vc]},Hc.prototype.getClass=function(){return Hc};var Uc=function(){};Uc.prototype.isInBoundary=function(t){return 1===t},Uc.prototype.interfaces_=function(){return[Vc]},Uc.prototype.getClass=function(){return Uc};var $c=function(){};$c.prototype.add=function(){},$c.prototype.addAll=function(){},$c.prototype.isEmpty=function(){},$c.prototype.iterator=function(){},$c.prototype.size=function(){},$c.prototype.toArray=function(){},$c.prototype.remove=function(){};var Kc=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),Xc=function(){};Xc.prototype.hasNext=function(){},Xc.prototype.next=function(){},Xc.prototype.remove=function(){};var Yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}($c);(vr.prototype=new Error).name="NoSuchElementException";var qc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof $c&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,$c]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Jc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Kc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Yc),Jc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new vr;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Xc),Qc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof qs&&"boolean"==typeof arguments[1]){var e=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(e))return null;t.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];if(arguments[2])for(var r=0;r<n.length;r++)this.add(n[r],i);else for(var o=n.length-1;o>=0;o--)this.add(n[o],i);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof qs){var a=arguments[0],s=arguments[1];if(!arguments[2]){var c=this.size();if(c>0){if(a>0&&this.get(a-1).equals2D(s))return null;if(a<c&&this.get(a).equals2D(s))return null}}t.prototype.add.call(this,a,s)}}else if(4===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2],d=arguments[3],p=1;h>d&&(p=-1);for(var f=h;f!==d;f+=p)this.add(l[f],u);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new qs(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(qc),tl=function(){},el={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};el.ForwardComparator.get=function(){return nl},el.BidirectionalComparator.get=function(){return il},el.coordArrayType.get=function(){return new Array(0).fill(null)},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},tl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(tl.indexOf(i,e)<0)return i}return null},tl.scroll=function(t,e){var n=tl.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);vc.arraycopy(t,n,i,0,t.length-n),vc.arraycopy(t,0,i,t.length-n,n),vc.arraycopy(i,0,t,0,t.length)},tl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},tl.intersection=function(t,e){for(var n=new Qc,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},tl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},tl.removeRepeatedPoints=function(t){return tl.hasRepeatedPoints(t)?new Qc(t,!1).toCoordinateArray():t},tl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},tl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},tl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new qs(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],c=0;c<s;c++)o[a+c]=new qs(i[r+c])},tl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},tl.envelope=function(t){for(var e=new bc,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},tl.toCoordinateArray=function(t){return t.toArray(tl.coordArrayType)},tl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},tl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},tl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},tl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},tl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},tl.extract=function(t,e,n){e=rc.clamp(e,0,t.length);var i=(n=rc.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},Object.defineProperties(tl,el);var nl=function(){};nl.prototype.compare=function(t,e){return tl.compare(t,e)},nl.prototype.interfaces_=function(){return[Ys]},nl.prototype.getClass=function(){return nl};var il=function(){};il.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=tl.compare(n,i);return tl.isEqualReversed(n,i)?0:r},il.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=tl.increasingDirection(n),o=tl.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,c=0;c<n.length;c++){var l=n[a].compareTo(i[s]);if(0!==l)return l;a+=r,s+=o}return 0},il.prototype.interfaces_=function(){return[Ys]},il.prototype.getClass=function(){return il};var rl=function(){};rl.prototype.get=function(){},rl.prototype.put=function(){},rl.prototype.size=function(){},rl.prototype.values=function(){},rl.prototype.entrySet=function(){};var ol=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(rl);(yr.prototype=new Error).name="OperationNotSupported",(br.prototype=new $c).contains=function(){};var al=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof $c&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new sl(this)},e}(br),sl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new vr;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new yr},e}(Xc),cl=0;(Ar.prototype=new ol).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Ar.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:cl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:cl,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Ar.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Cr(t)===wr(Cr(Cr(t)))){var e=Ir(Cr(Cr(t)));1===_r(e)?(xr(Cr(t),cl),xr(e,cl),xr(Cr(Cr(t)),1),t=Cr(Cr(t))):(t===Ir(Cr(t))&&(t=Cr(t),this.rotateLeft(t)),xr(Cr(t),cl),xr(Cr(Cr(t)),1),this.rotateRight(Cr(Cr(t))))}else{var n=wr(Cr(Cr(t)));1===_r(n)?(xr(Cr(t),cl),xr(n,cl),xr(Cr(Cr(t)),1),t=Cr(Cr(t))):(t===wr(Cr(t))&&(t=Cr(t),this.rotateRight(t)),xr(Cr(t),cl),xr(Cr(Cr(t)),1),this.rotateLeft(Cr(Cr(t))))}this.root_.color=cl},Ar.prototype.values=function(){var t=new qc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ar.successor(e));)t.add(e.value);return t},Ar.prototype.entrySet=function(){var t=new al,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ar.successor(e));)t.add(e);return t},Ar.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ar.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ar.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ar.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Ar.prototype.size=function(){return this.size_};var ll=function(){};ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll},Pr.prototype=new br,(Or.prototype=new Pr).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Or.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Or.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Or.prototype.remove=function(t){throw new yr},Or.prototype.size=function(){return this.array_.length},Or.prototype.isEmpty=function(){return 0===this.array_.length},Or.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Or.prototype.iterator=function(){return new ul(this)};var ul=function(t){this.treeSet_=t,this.position_=0};ul.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new vr;return this.treeSet_.array_[this.position_++]},ul.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ul.prototype.remove=function(){throw new yr};var hl=function(){};hl.sort=function(){var t,e,n,i=arguments[0];if(1===arguments.length)i.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)n=arguments[1],i.sort((function(t,e){return n.compare(t,e)}));else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],e.sort((function(t,e){return n.compare(t,e)})),r=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<r.length;t++)i.push(r[t])},hl.asList=function(t){for(var e=new qc,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var dl=function(){},pl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};pl.P.get=function(){return 0},pl.L.get=function(){return 1},pl.A.get=function(){return 2},pl.FALSE.get=function(){return-1},pl.TRUE.get=function(){return-2},pl.DONTCARE.get=function(){return-3},pl.SYM_FALSE.get=function(){return"F"},pl.SYM_TRUE.get=function(){return"T"},pl.SYM_DONTCARE.get=function(){return"*"},pl.SYM_P.get=function(){return"0"},pl.SYM_L.get=function(){return"1"},pl.SYM_A.get=function(){return"2"},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},dl.toDimensionSymbol=function(t){switch(t){case dl.FALSE:return dl.SYM_FALSE;case dl.TRUE:return dl.SYM_TRUE;case dl.DONTCARE:return dl.SYM_DONTCARE;case dl.P:return dl.SYM_P;case dl.L:return dl.SYM_L;case dl.A:return dl.SYM_A}throw new Hs("Unknown dimension value: "+t)},dl.toDimensionValue=function(t){switch(cc.toUpperCase(t)){case dl.SYM_FALSE:return dl.FALSE;case dl.SYM_TRUE:return dl.TRUE;case dl.SYM_DONTCARE:return dl.DONTCARE;case dl.SYM_P:return dl.P;case dl.SYM_L:return dl.L;case dl.SYM_A:return dl.A}throw new Hs("Unknown dimension symbol: "+t)},Object.defineProperties(dl,pl);var fl=function(){};fl.prototype.filter=function(t){},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var gl=function(){};gl.prototype.filter=function(t,e){},gl.prototype.isDone=function(){},gl.prototype.isGeometryChanged=function(){},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl};var ml=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Hs("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new bc,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();hl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=dl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=dl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Or(hl.asList(this._geometries)),n=new Or(hl.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),a=r.getNumGeometries(),s=0;s<o&&s<a;){var c=this.getGeometryN(s),l=r.getGeometryN(s),u=c.compareToSameClass(l,i);if(0!==u)return u;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(ic(arguments[0],zc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(ic(arguments[0],gl)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(ic(arguments[0],fl)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(ic(arguments[0],Bc)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Mc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(jc),vl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return jc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?dl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new yl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ll]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(ml),yl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Vc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};yl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},yl.prototype.getBoundary=function(){return this._geom instanceof wl?this.boundaryLineString(this._geom):this._geom instanceof vl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},yl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},yl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},yl.prototype.computeBoundaryCoordinates=function(t){var e=new qc;this._endpointMap=new Ar;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return tl.toCoordinateArray(e)},yl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new bl,this._endpointMap.put(t,e)),e.count++},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.getBoundary=function(){return 1===arguments.length?new yl(arguments[0]).getBoundary():2===arguments.length?new yl(arguments[0],arguments[1]).getBoundary():void 0};var bl=function(){this.count=null};bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl};var _l=function(){},Cl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l},_l.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},_l.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[1],r="",o=new function(){}(new function(){}(_l.getStackTrace(arguments[0]))),a=0;a<i;a++)try{r+=o.readLine()+_l.NEWLINE}catch(t){if(!(t instanceof Mr))throw t;Mc.shouldNeverReachHere()}return r}},_l.split=function(t,e){for(var n=e.length,i=new qc,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),c=0;c<s.length;c++)s[c]=i.get(c);return s},_l.toString=function(){if(1===arguments.length)return _l.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},_l.spaces=function(t){return _l.chars(" ",t)},Cl.NEWLINE.get=function(){return vc.getProperty("line.separator")},Cl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(_l,Cl);var xl=function(){};xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},xl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,pc.X)===t.getOrdinate(e-1,pc.X)&&t.getOrdinate(0,pc.Y)===t.getOrdinate(e-1,pc.Y)},xl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),s=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||Us.isNaN(a)&&Us.isNaN(s)))return!1}return!0},xl.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(xl.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)xl.copy(e,r-1,i,o,1);return i},xl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)xl.swap(t,i,e-i)},xl.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},xl.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)xl.copyCoord(t,e+o,n,i+o)},xl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new ac;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(_l.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},xl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?xl.createClosedRing(t,e,4):e.getOrdinate(0,pc.X)===e.getOrdinate(n-1,pc.X)&&e.getOrdinate(0,pc.Y)===e.getOrdinate(n-1,pc.Y)?e:xl.createClosedRing(t,e,n+1)},xl.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();xl.copy(e,0,i,0,r);for(var o=r;o<n;o++)xl.copy(e,0,i,o,1);return i};var wl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new bc:this._points.expandEnvelope(new bc)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&xl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?dl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Rc.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return xl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(ic(arguments[0],zc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(ic(arguments[0],gl)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(ic(arguments[0],fl)||ic(arguments[0],Bc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new yl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Hs("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[ll]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(jc),Il=function(){};Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Al=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new bc;var t=new bc;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return dl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(ic(arguments[0],zc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(ic(arguments[0],gl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(ic(arguments[0],fl)||ic(arguments[0],Bc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Mc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Il]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(jc),Pl=function(){};Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Ol=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Hs("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Hs("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Rc.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Rc.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var c=t.getX(s),l=t.getY(s);if(c!==o==(l!==a))return!1;o=c,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(!this._shell.equalsExact(i._shell,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var r=0;r<this._holes.length;r++)if(!this._holes[r].equalsExact(i._holes[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);hl.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);vc.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=tl.minCoordinate(e.getCoordinates());tl.scroll(i,r),vc.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Rc.isCCW(e.getCoordinates())===n&&tl.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var t=arguments[1],e=arguments[0],n=this._shell.compareToSameClass(e._shell,t);if(0!==n)return n;for(var i=this.getNumInteriorRing(),r=e.getNumInteriorRing(),o=0;o<i&&o<r;){var a=this.getInteriorRingN(o),s=e.getInteriorRingN(o),c=a.compareToSameClass(s,t);if(0!==c)return c;o++}return o<i?1:o<r?-1:0}},e.prototype.apply=function(t){if(ic(t,zc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(ic(t,gl)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(ic(t,fl))t.filter(this);else if(ic(t,Bc)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(jc),Ml=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return jc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return dl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Il]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(ml),Sl=function(t){function e(e,n){e instanceof qs&&n instanceof Hl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return jc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return dl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return xl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Hs("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Hs("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(wl),kl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return jc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new qc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(ml),El=function(t){this._factory=t||null,this._isUserDataCopied=!1},Ll={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};El.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},El.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},El.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ml?this.editGeometryCollection(t,e):t instanceof Ol?this.editPolygon(t,e):t instanceof Al||t instanceof wl?e.edit(t,this._factory):(Mc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},El.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new qc,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Ml?this._factory.createMultiPoint(i.toArray([])):n.getClass()===vl?this._factory.createMultiLineString(i.toArray([])):n.getClass()===kl?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},El.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new qc,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.GeometryEditorOperation=function(){},Ll.NoOpGeometryOperation.get=function(){return Tl},Ll.CoordinateOperation.get=function(){return Rl},Ll.CoordinateSequenceOperation.get=function(){return Nl},Object.defineProperties(El,Ll);var Tl=function(){};Tl.prototype.edit=function(t,e){return t},Tl.prototype.interfaces_=function(){return[El.GeometryEditorOperation]},Tl.prototype.getClass=function(){return Tl};var Rl=function(){};Rl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Sl?e.createLinearRing(n):t instanceof wl?e.createLineString(n):t instanceof Al?n.length>0?e.createPoint(n[0]):e.createPoint():t},Rl.prototype.interfaces_=function(){return[El.GeometryEditorOperation]},Rl.prototype.getClass=function(){return Rl};var Nl=function(){};Nl.prototype.edit=function(t,e){return t instanceof Sl?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof wl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Al?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Nl.prototype.interfaces_=function(){return[El.GeometryEditorOperation]},Nl.prototype.getClass=function(){return Nl};var Bl=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new qs}else if(ic(arguments[0],pc)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var c=0;c<a;c++)this._coordinates[c]=new qs}},jl={serialVersionUID:{configurable:!0}};Bl.prototype.setOrdinate=function(t,e,n){switch(e){case pc.X:this._coordinates[t].x=n;break;case pc.Y:this._coordinates[t].y=n;break;case pc.Z:this._coordinates[t].z=n;break;default:throw new Hs("invalid ordinateIndex")}},Bl.prototype.size=function(){return this._coordinates.length},Bl.prototype.getOrdinate=function(t,e){switch(e){case pc.X:return this._coordinates[t].x;case pc.Y:return this._coordinates[t].y;case pc.Z:return this._coordinates[t].z}return Us.NaN},Bl.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}},Bl.prototype.getCoordinateCopy=function(t){return new qs(this._coordinates[t])},Bl.prototype.getDimension=function(){return this._dimension},Bl.prototype.getX=function(t){return this._coordinates[t].x},Bl.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Bl(t,this._dimension)},Bl.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Bl.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Bl(t,this._dimension)},Bl.prototype.toString=function(){if(this._coordinates.length>0){var t=new ac(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Bl.prototype.getY=function(t){return this._coordinates[t].y},Bl.prototype.toCoordinateArray=function(){return this._coordinates},Bl.prototype.interfaces_=function(){return[pc,mr]},Bl.prototype.getClass=function(){return Bl},jl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Bl,jl);var Dl=function(){},Fl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Dl.prototype.readResolve=function(){return Dl.instance()},Dl.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Bl(arguments[0]);if(ic(arguments[0],pc))return new Bl(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Bl(t):new Bl(t,e)}},Dl.prototype.interfaces_=function(){return[tc,mr]},Dl.prototype.getClass=function(){return Dl},Dl.instance=function(){return Dl.instanceObject},Fl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Fl.instanceObject.get=function(){return new Dl},Object.defineProperties(Dl,Fl);var zl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new qc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new al;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(rl),Vl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Zl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Gl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Vl.prototype.equals=function(t){return t instanceof Vl&&this._modelType===t._modelType&&this._scale===t._scale},Vl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new sc(n).compareTo(new sc(i))},Vl.prototype.getScale=function(){return this._scale},Vl.prototype.isFloating=function(){return this._modelType===Vl.FLOATING||this._modelType===Vl.FLOATING_SINGLE},Vl.prototype.getType=function(){return this._modelType},Vl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Vl.FLOATING?t="Floating":this._modelType===Vl.FLOATING_SINGLE?t="Floating-Single":this._modelType===Vl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Vl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Us.isNaN(t)||this._modelType===Vl.FLOATING_SINGLE?t:this._modelType===Vl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof qs){var e=arguments[0];if(this._modelType===Vl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Vl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Vl.FLOATING?t=16:this._modelType===Vl.FLOATING_SINGLE?t=6:this._modelType===Vl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Vl.prototype.setScale=function(t){this._scale=Math.abs(t)},Vl.prototype.interfaces_=function(){return[mr,Ks]},Vl.prototype.getClass=function(){return Vl},Vl.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Gl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Gl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Vl,Gl);var Zl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Wl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Zl.prototype.readResolve=function(){return Zl.nameToTypeMap.get(this._name)},Zl.prototype.toString=function(){return this._name},Zl.prototype.interfaces_=function(){return[mr]},Zl.prototype.getClass=function(){return Zl},Wl.serialVersionUID.get=function(){return-552860263173159e4},Wl.nameToTypeMap.get=function(){return new zl},Object.defineProperties(Zl,Wl),Vl.Type=Zl,Vl.FIXED=new Zl("FIXED"),Vl.FLOATING=new Zl("FLOATING"),Vl.FLOATING_SINGLE=new Zl("FLOATING SINGLE");var Hl=function t(){this._precisionModel=new Vl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?ic(arguments[0],tc)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Vl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ul={serialVersionUID:{configurable:!0}};Hl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new qs(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new qs(t.getMinX(),t.getMinY()),new qs(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new qs(t.getMinX(),t.getMinY()),new qs(t.getMinX(),t.getMaxY()),new qs(t.getMaxX(),t.getMaxY()),new qs(t.getMaxX(),t.getMinY()),new qs(t.getMinX(),t.getMinY())]),null)},Hl.prototype.createLineString=function(t){return t?t instanceof Array?new wl(this.getCoordinateSequenceFactory().create(t),this):ic(t,pc)?new wl(t,this):void 0:new wl(this.getCoordinateSequenceFactory().create([]),this)},Hl.prototype.createMultiLineString=function(){return 0===arguments.length?new vl(null,this):1===arguments.length?new vl(arguments[0],this):void 0},Hl.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Hl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Ol)return this.createMultiPolygon(Hl.toPolygonArray(t));if(s instanceof wl)return this.createMultiLineString(Hl.toLineStringArray(t));if(s instanceof Al)return this.createMultiPoint(Hl.toPointArray(t));Mc.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Hl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Hl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof qs){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(ic(arguments[0],pc))return new Al(arguments[0],this)}},Hl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Hl.prototype.createPolygon=function(){if(0===arguments.length)return new Ol(null,null,this);if(1===arguments.length){if(ic(arguments[0],pc))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Sl)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Ol(arguments[0],arguments[1],this)},Hl.prototype.getSRID=function(){return this._SRID},Hl.prototype.createGeometryCollection=function(){return 0===arguments.length?new ml(null,this):1===arguments.length?new ml(arguments[0],this):void 0},Hl.prototype.createGeometry=function(t){return new El(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Hl.prototype.getPrecisionModel=function(){return this._precisionModel},Hl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ic(arguments[0],pc))return new Sl(arguments[0],this)}},Hl.prototype.createMultiPolygon=function(){return 0===arguments.length?new kl(null,this):1===arguments.length?new kl(arguments[0],this):void 0},Hl.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ml(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ml(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ic(arguments[0],pc)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());xl.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},Hl.prototype.interfaces_=function(){return[mr]},Hl.prototype.getClass=function(){return Hl},Hl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.getDefaultCoordinateSequenceFactory=function(){return Dl.instance()},Hl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Hl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Ul.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Hl,Ul);var $l=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Kl=function(t){this.geometryFactory=t||new Hl};Kl.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Xl[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==$l.indexOf(n)?Xl[n].apply(this,[e.coordinates]):Xl[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Kl.prototype.write=function(t){var e=t.getGeometryType();if(!Yl[e])throw new Error("Geometry is not supported");return Yl[e].apply(this,[t])};var Xl={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!Xl[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Xl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new qs(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new qs(t[0],t[1]),new qs(t[2],t[1]),new qs(t[2],t[3]),new qs(t[0],t[3]),new qs(t[0],t[1])])},Point:function(t){var e=new qs(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Xl.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Xl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Xl.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Xl.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=Xl.coordinates.apply(this,[t[r]]),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Xl.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Yl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Yl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Yl.Point.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i)e.push(Yl.coordinate.apply(this,[n[i]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Yl.LineString.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Yl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=Yl.LineString.apply(this,[t._holes[i]]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Yl.Polygon.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Yl[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},ql=function(t){this.geometryFactory=t||new Hl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Kl(this.geometryFactory)};ql.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Vl.FIXED&&this.reducePrecision(e),e},ql.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Jl=function(){this.parser=new Kl(this.geometryFactory)};Jl.prototype.write=function(t){return this.parser.write(t)};var Ql=function(){},tu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql},Ql.opposite=function(t){return t===Ql.LEFT?Ql.RIGHT:t===Ql.RIGHT?Ql.LEFT:t},tu.ON.get=function(){return 0},tu.LEFT.get=function(){return 1},tu.RIGHT.get=function(){return 2},Object.defineProperties(Ql,tu),(Sr.prototype=new Error).name="EmptyStackException",(kr.prototype=new Yc).add=function(t){return this.array_.push(t),!0},kr.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},kr.prototype.push=function(t){return this.array_.push(t),t},kr.prototype.pop=function(t){if(0===this.array_.length)throw new Sr;return this.array_.pop()},kr.prototype.peek=function(){if(0===this.array_.length)throw new Sr;return this.array_[this.array_.length-1]},kr.prototype.empty=function(){return 0===this.array_.length},kr.prototype.isEmpty=function(){return this.empty()},kr.prototype.search=function(t){return this.array_.indexOf(t)},kr.prototype.size=function(){return this.array_.length},kr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var eu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};eu.prototype.getCoordinate=function(){return this._minCoord},eu.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},eu.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Mc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Rc.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Rc.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Rc.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},eu.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Ql.LEFT;return n[e].y<n[e+1].y&&(i=Ql.RIGHT),i},eu.prototype.getEdge=function(){return this._orientedDe},eu.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},eu.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},eu.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Mc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ql.LEFT&&(this._orientedDe=this._minDe.getSym())},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu};var nu=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new qs(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Pc),iu=function(){this.array_=[]};iu.prototype.addLast=function(t){this.array_.push(t)},iu.prototype.removeFirst=function(){return this.array_.shift()},iu.prototype.isEmpty=function(){return 0===this.array_.length};var ru=function(){this._finder=null,this._dirEdgeList=new qc,this._nodes=new qc,this._rightMostCoord=null,this._env=null,this._finder=new eu};ru.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},ru.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ru.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new nu("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},ru.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ql.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},ru.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ru.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ql.RIGHT)>=1&&e.getDepth(Ql.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},ru.prototype.computeDepths=function(t){var e=new al,n=new iu,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},ru.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},ru.prototype.getEnvelope=function(){if(null===this._env){for(var t=new bc,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},ru.prototype.addReachable=function(t){var e=new kr;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},ru.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ql.LEFT,t.getDepth(Ql.RIGHT)),e.setDepth(Ql.RIGHT,t.getDepth(Ql.LEFT))},ru.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},ru.prototype.getNodes=function(){return this._nodes},ru.prototype.getDirectedEdges=function(){return this._dirEdgeList},ru.prototype.interfaces_=function(){return[Ks]},ru.prototype.getClass=function(){return ru};var ou=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Ql.ON]=e}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[Ql.ON]=r,this.location[Ql.LEFT]=o,this.location[Ql.RIGHT]=a}};ou.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},ou.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==ec.NONE)return!1;return!0},ou.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===ec.NONE&&(this.location[e]=t)},ou.prototype.isLine=function(){return 1===this.location.length},ou.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ql.ON]=this.location[Ql.ON],e[Ql.LEFT]=ec.NONE,e[Ql.RIGHT]=ec.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===ec.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},ou.prototype.getLocations=function(){return this.location},ou.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ql.LEFT];this.location[Ql.LEFT]=this.location[Ql.RIGHT],this.location[Ql.RIGHT]=t},ou.prototype.toString=function(){var t=new ac;return this.location.length>1&&t.append(ec.toLocationSymbol(this.location[Ql.LEFT])),t.append(ec.toLocationSymbol(this.location[Ql.ON])),this.location.length>1&&t.append(ec.toLocationSymbol(this.location[Ql.RIGHT])),t.toString()},ou.prototype.setLocations=function(t,e,n){this.location[Ql.ON]=t,this.location[Ql.LEFT]=e,this.location[Ql.RIGHT]=n},ou.prototype.get=function(t){return t<this.location.length?this.location[t]:ec.NONE},ou.prototype.isArea=function(){return this.location.length>1},ou.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===ec.NONE)return!0;return!1},ou.prototype.setLocation=function(){1===arguments.length?this.setLocation(Ql.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},ou.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(ec.NONE)},ou.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},ou.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou};var au=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new ou(e),this.elt[1]=new ou(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new ou(n.elt[0]),this.elt[1]=new ou(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new ou(ec.NONE),this.elt[1]=new ou(ec.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new ou(o,a,s),this.elt[1]=new ou(o,a,s)}else if(4===arguments.length){var c=arguments[0],l=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new ou(ec.NONE,ec.NONE,ec.NONE),this.elt[1]=new ou(ec.NONE,ec.NONE,ec.NONE),this.elt[c].setLocations(l,u,h)}};au.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},au.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},au.prototype.isNull=function(t){return this.elt[t].isNull()},au.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},au.prototype.isLine=function(t){return this.elt[t].isLine()},au.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new ou(t.elt[e]):this.elt[e].merge(t.elt[e])},au.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},au.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Ql.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},au.prototype.toString=function(){var t=new ac;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},au.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},au.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},au.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Ql.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},au.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},au.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},au.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new ou(this.elt[t].location[0]))},au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au},au.toLineLabel=function(t){for(var e=new au(ec.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var su=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new qc,this._pts=new qc,this._label=new au(ec.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new qc,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};su.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Rc.isCCW(this._ring.getCoordinates())},su.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},su.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new nu("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new nu("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();Mc.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},su.prototype.getLinearRing=function(){return this._ring},su.prototype.getCoordinate=function(t){return this._pts.get(t)},su.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},su.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}},su.prototype.isHole=function(){return this._isHole},su.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},su.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Rc.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},su.prototype.addHole=function(t){this._holes.add(t)},su.prototype.isShell=function(){return null===this._shell},su.prototype.getLabel=function(){return this._label},su.prototype.getEdges=function(){return this._edges},su.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},su.prototype.getShell=function(){return this._shell},su.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ql.RIGHT);if(n===ec.NONE)return null;if(this._label.getLocation(e)===ec.NONE)return this._label.setLocation(e,n),null}},su.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},su.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su};var cu=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(su),lu=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new qc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new cu(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(su),uu=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])};uu.prototype.setVisited=function(t){this._isVisited=t},uu.prototype.setInResult=function(t){this._isInResult=t},uu.prototype.isCovered=function(){return this._isCovered},uu.prototype.isCoveredSet=function(){return this._isCoveredSet},uu.prototype.setLabel=function(t){this._label=t},uu.prototype.getLabel=function(){return this._label},uu.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},uu.prototype.updateIM=function(t){Mc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},uu.prototype.isInResult=function(){return this._isInResult},uu.prototype.isVisited=function(){return this._isVisited},uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu};var hu=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[1];this._coord=arguments[0],this._edges=e,this._label=new au(0,ec.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=ec.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==ec.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new au(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof au)for(var t=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(t,n);this._label.getLocation(n)===ec.NONE&&this._label.setLocation(n,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=ec.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case ec.BOUNDARY:n=ec.INTERIOR;break;case ec.INTERIOR:default:n=ec.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uu),du=function(){this.nodeMap=new Ar,this.nodeFact=null,this.nodeFact=arguments[0]};du.prototype.find=function(t){return this.nodeMap.get(t)},du.prototype.addNode=function(){if(arguments[0]instanceof qs){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof hu){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},du.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},du.prototype.iterator=function(){return this.nodeMap.values().iterator()},du.prototype.values=function(){return this.nodeMap.values()},du.prototype.getBoundaryNodes=function(t){for(var e=new qc,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===ec.BOUNDARY&&e.add(i)}return e},du.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var pu=function(){},fu={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu},pu.isNorthern=function(t){return t===pu.NE||t===pu.NW},pu.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},pu.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},pu.isInHalfPlane=function(t,e){return e===pu.SE?t===pu.SE||t===pu.SW:t===e||t===e+1},pu.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Hs("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?pu.NE:pu.SE:e>=0?pu.NW:pu.SW}if(arguments[0]instanceof qs&&arguments[1]instanceof qs){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new Hs("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?pu.NE:pu.SE:i.y>=n.y?pu.NW:pu.SW}},fu.NE.get=function(){return 0},fu.NW.get=function(){return 1},fu.SW.get=function(){return 2},fu.SE.get=function(){return 3},Object.defineProperties(pu,fu);var gu=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var t=arguments[1],e=arguments[2];this._edge=arguments[0],this.init(t,e),this._label=null}else if(4===arguments.length){var n=arguments[1],i=arguments[2],r=arguments[3];this._edge=arguments[0],this.init(n,i),this._label=r}};gu.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Rc.computeOrientation(t._p0,t._p1,this._p1)},gu.prototype.getDy=function(){return this._dy},gu.prototype.getCoordinate=function(){return this._p0},gu.prototype.setNode=function(t){this._node=t},gu.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},gu.prototype.compareTo=function(t){return this.compareDirection(t)},gu.prototype.getDirectedCoordinate=function(){return this._p1},gu.prototype.getDx=function(){return this._dx},gu.prototype.getLabel=function(){return this._label},gu.prototype.getEdge=function(){return this._edge},gu.prototype.getQuadrant=function(){return this._quadrant},gu.prototype.getNode=function(){return this._node},gu.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},gu.prototype.computeLabel=function(t){},gu.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=pu.quadrant(this._dx,this._dy),Mc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},gu.prototype.interfaces_=function(){return[Ks]},gu.prototype.getClass=function(){return gu};var mu=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new au(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new nu("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ql.LEFT)===ec.INTERIOR&&this._label.getLocation(e,Ql.RIGHT)===ec.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ql.LEFT]+"/"+this._depth[Ql.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,ec.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,ec.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ql.LEFT&&(i=-1);var r=Ql.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===ec.EXTERIOR&&e===ec.INTERIOR?1:t===ec.INTERIOR&&e===ec.EXTERIOR?-1:0},e}(gu),vu=function(){};vu.prototype.createNode=function(t){return new hu(t,null)},vu.prototype.interfaces_=function(){return[]},vu.prototype.getClass=function(){return vu};var yu=function(){this._edges=new qc,this._nodes=null,this._edgeEndList=new qc,0===arguments.length?this._nodes=new du(new vu):1===arguments.length&&(this._nodes=new du(arguments[0]))};yu.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},yu.prototype.find=function(t){return this._nodes.find(t)},yu.prototype.addNode=function(){return arguments[0]instanceof hu||arguments[0]instanceof qs?this._nodes.addNode(arguments[0]):void 0},yu.prototype.getNodeIterator=function(){return this._nodes.iterator()},yu.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},yu.prototype.debugPrintln=function(t){vc.out.println(t)},yu.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===ec.BOUNDARY},yu.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},yu.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Rc.computeOrientation(t,e,i)===Rc.COLLINEAR&&pu.quadrant(t,e)===pu.quadrant(n,i)},yu.prototype.getEdgeEnds=function(){return this._edgeEndList},yu.prototype.debugPrint=function(t){vc.out.print(t)},yu.prototype.getEdgeIterator=function(){return this._edges.iterator()},yu.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},yu.prototype.insertEdge=function(t){this._edges.add(t)},yu.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},yu.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new mu(n,!0),r=new mu(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},yu.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},yu.prototype.getNodes=function(){return this._nodes.values()},yu.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var bu=function(){this._geometryFactory=null,this._shellList=new qc,this._geometryFactory=arguments[0]};bu.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},bu.prototype.computePolygons=function(t){for(var e=new qc,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},bu.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new nu("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},bu.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new qc,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else i.add(o)}return i},bu.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},bu.prototype.buildMaximalEdgeRings=function(t){for(var e=new qc,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new lu(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},bu.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},bu.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},bu.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var c=s.next(),l=c.getLinearRing(),u=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(i)&&Rc.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(u))&&(o=c)}return o},bu.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return Mc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},bu.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];yu.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),i=new qc,r=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(r,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu};var _u=function(){};_u.prototype.getBounds=function(){},_u.prototype.interfaces_=function(){return[]},_u.prototype.getClass=function(){return _u};var Cu=function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t};Cu.prototype.getItem=function(){return this._item},Cu.prototype.getBounds=function(){return this._bounds},Cu.prototype.interfaces_=function(){return[_u,mr]},Cu.prototype.getClass=function(){return Cu};var xu=function(){this._size=null,this._items=null,this._size=0,this._items=new qc,this._items.add(null)};xu.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},xu.prototype.size=function(){return this._size},xu.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},xu.prototype.clear=function(){this._size=0,this._items.clear()},xu.prototype.isEmpty=function(){return 0===this._size},xu.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},xu.prototype.interfaces_=function(){return[]},xu.prototype.getClass=function(){return xu};var wu=function(){};wu.prototype.visitItem=function(t){},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu};var Iu=function(){};Iu.prototype.insert=function(t,e){},Iu.prototype.remove=function(t,e){},Iu.prototype.query=function(){},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu};var Au=function(){this._childBoundables=new qc,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])},Pu={serialVersionUID:{configurable:!0}};Au.prototype.getLevel=function(){return this._level},Au.prototype.size=function(){return this._childBoundables.size()},Au.prototype.getChildBoundables=function(){return this._childBoundables},Au.prototype.addChildBoundable=function(t){Mc.isTrue(null===this._bounds),this._childBoundables.add(t)},Au.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Au.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Au.prototype.interfaces_=function(){return[_u,mr]},Au.prototype.getClass=function(){return Au},Pu.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Au,Pu);var Ou=function(){};Ou.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Ou.min=function(t){return Ou.sort(t),t.get(0)},Ou.sort=function(t,e){var n=t.toArray();e?hl.sort(n,e):hl.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Ou.singletonList=function(t){var e=new qc;return e.add(t),e};var Mu=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()};Mu.prototype.expandToQueue=function(t,e){var n=Mu.isComposite(this._boundable1),i=Mu.isComposite(this._boundable2);if(n&&i)return Mu.area(this._boundable1)>Mu.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Hs("neither boundable is composite")},Mu.prototype.isLeaves=function(){return!(Mu.isComposite(this._boundable1)||Mu.isComposite(this._boundable2))},Mu.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Mu.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new Mu(o,e,this._itemDistance);a.getDistance()<i&&n.add(a)}},Mu.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Mu.prototype.getDistance=function(){return this._distance},Mu.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Mu.prototype.interfaces_=function(){return[Ks]},Mu.prototype.getClass=function(){return Mu},Mu.area=function(t){return t.getBounds().getArea()},Mu.isComposite=function(t){return t instanceof Au};var Su=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new qc,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var e=arguments[0];Mc.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}},ku={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Su.prototype.getNodeCapacity=function(){return this._nodeCapacity},Su.prototype.lastNode=function(t){return t.get(t.size()-1)},Su.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Au?t+=this.size(n):n instanceof Cu&&(t+=1)}return t}},Su.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Cu&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Su.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new qc:t}if(1===arguments.length){for(var e=arguments[0],n=new qc,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Au){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Cu?n.add(r.getItem()):Mc.shouldNeverReachHere()}return n.size()<=0?null:n}},Su.prototype.insert=function(t,e){Mc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Cu(t,e))},Su.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new qc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(Mc.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Au?this.boundablesAtLevel(n,a,r):(Mc.isTrue(a instanceof Cu),-1===n&&r.add(a))}return null}},Su.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new qc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(ic(arguments[2],wu)&&arguments[0]instanceof Object&&arguments[1]instanceof Au)for(var r=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var c=a.get(s);this.getIntersectsOp().intersects(c.getBounds(),r)&&(c instanceof Au?this.query(r,c,o):c instanceof Cu?o.visitItem(c.getItem()):Mc.shouldNeverReachHere())}else if(ic(arguments[2],Yc)&&arguments[0]instanceof Object&&arguments[1]instanceof Au)for(var l=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),d=0;d<h.size();d++){var p=h.get(d);this.getIntersectsOp().intersects(p.getBounds(),l)&&(p instanceof Au?this.query(l,p,u):p instanceof Cu?u.add(p.getItem()):Mc.shouldNeverReachHere())}},Su.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Su.prototype.getRoot=function(){return this.build(),this._root},Su.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var c=s.next();if(this.getIntersectsOp().intersects(c.getBounds(),n)&&c instanceof Au&&(o=this.remove(n,c,r))){a=c;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},Su.prototype.createHigherLevels=function(t,e){Mc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Su.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Au){var i=this.depth(n);i>t&&(t=i)}}return t+1}},Su.prototype.createParentBoundables=function(t,e){Mc.isTrue(!t.isEmpty());var n=new qc;n.add(this.createNode(e));var i=new qc(t);Ou.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Su.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Su.prototype.interfaces_=function(){return[mr]},Su.prototype.getClass=function(){return Su},Su.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ku.IntersectsOp.get=function(){return Eu},ku.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ku.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Su,ku);var Eu=function(){},Lu=function(){};Lu.prototype.distance=function(t,e){},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu};var Tu=function(t){function e(n){t.call(this,n=n||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Mc.isTrue(t.length>0);for(var n=new qc,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new Ru(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new qc;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(ic(arguments[2],wu)&&arguments[0]instanceof Object&&arguments[1]instanceof Au||ic(arguments[2],Yc)&&arguments[0]instanceof Object&&arguments[1]instanceof Au)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Mc.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new qc(t);Ou.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(ic(arguments[0],Lu)){var t=arguments[0],n=new Mu(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Mu)return this.nearestNeighbour(arguments[0],Us.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&ic(arguments[1],Lu)){var i=arguments[0],r=arguments[1],o=new Mu(this.getRoot(),i.getRoot(),r);return this.nearestNeighbour(o)}if(arguments[0]instanceof Mu&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],c=null,l=new xu;for(l.add(a);!l.isEmpty()&&s>0;){var u=l.poll(),h=u.getDistance();if(h>=s)break;u.isLeaves()?(s=h,c=u):u.expandToQueue(l,s)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[2],p=new Cu(arguments[0],arguments[1]),f=new Mu(this.getRoot(),p,d);return this.nearestNeighbour(f)[0]}},e.prototype.interfaces_=function(){return[Iu,mr]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Ru},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Ys]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Ys]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Su),Ru=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new bc(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Au),Nu=function(){};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Nu.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Nu.relativeSign(e.x,n.x),r=Nu.relativeSign(e.y,n.y);switch(t){case 0:return Nu.compareValue(i,r);case 1:return Nu.compareValue(r,i);case 2:return Nu.compareValue(r,-i);case 3:return Nu.compareValue(-i,r);case 4:return Nu.compareValue(-i,-r);case 5:return Nu.compareValue(-r,-i);case 6:return Nu.compareValue(-r,i);case 7:return Nu.compareValue(i,-r)}return Mc.shouldNeverReachHere("invalid octant value"),0},Nu.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Bu=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new qs(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};Bu.prototype.getCoordinate=function(){return this.coord},Bu.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Bu.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Nu.compare(this._segmentOctant,this.coord,e.coord)},Bu.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Bu.prototype.isInterior=function(){return this._isInterior},Bu.prototype.interfaces_=function(){return[Ks]},Bu.prototype.getClass=function(){return Bu};var ju=function(){this._nodeMap=new Ar,this._edge=null,this._edge=arguments[0]};ju.prototype.getSplitCoordinates=function(){var t=new Qc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},ju.prototype.addCollapsedNodes=function(){var t=new qc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ju.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ju.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new sc(e+1))}},ju.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new qs(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new qs(e.coord))},ju.prototype.iterator=function(){return this._nodeMap.values().iterator()},ju.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},ju.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},ju.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new sc(e[0])),i=r}},ju.prototype.getEdge=function(){return this._edge},ju.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ju.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new qs(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new qs(e.coord)),new Vu(o,this._edge.getData())},ju.prototype.add=function(t,e){var n=new Bu(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(Mc.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},ju.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Pc("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Pc("bad split edge end point at "+r)},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju};var Du=function(){};Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Hs("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof qs&&arguments[1]instanceof qs){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new Hs("Cannot compute the octant for two identical points "+r);return Du.octant(a,s)}};var Fu=function(){};Fu.prototype.getCoordinates=function(){},Fu.prototype.size=function(){},Fu.prototype.getCoordinate=function(t){},Fu.prototype.isClosed=function(){},Fu.prototype.setData=function(t){},Fu.prototype.getData=function(){},Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu};var zu=function(){};zu.prototype.addIntersection=function(t,e){},zu.prototype.interfaces_=function(){return[Fu]},zu.prototype.getClass=function(){return zu};var Vu=function(){this._nodeList=new ju(this),this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};Vu.prototype.getCoordinates=function(){return this._pts},Vu.prototype.size=function(){return this._pts.length},Vu.prototype.getCoordinate=function(t){return this._pts[t]},Vu.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vu.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Vu.prototype.setData=function(t){this._data=t},Vu.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Du.octant(t,e)},Vu.prototype.getData=function(){return this._data},Vu.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var t=arguments[1],e=new qs(arguments[0].getIntersection(arguments[3]));this.addIntersection(e,t)}},Vu.prototype.toString=function(){return Ac.toLineString(new Bl(this._pts))},Vu.prototype.getNodeList=function(){return this._nodeList},Vu.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)},Vu.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},Vu.prototype.interfaces_=function(){return[zu]},Vu.prototype.getClass=function(){return Vu},Vu.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new qc;return Vu.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var Gu=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new qs,this.p1=new qs;else if(1===arguments.length){var t=arguments[0];this.p0=new qs(t.p0),this.p1=new qs(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[2],n=arguments[3];this.p0=new qs(arguments[0],arguments[1]),this.p1=new qs(e,n)}},Zu={serialVersionUID:{configurable:!0}};Gu.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Gu.prototype.orientationIndex=function(){if(arguments[0]instanceof Gu){var t=arguments[0],e=Rc.orientationIndex(this.p0,this.p1,t.p0),n=Rc.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof qs)return Rc.orientationIndex(this.p0,this.p1,arguments[0])},Gu.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Gu.prototype.isVertical=function(){return this.p0.x===this.p1.x},Gu.prototype.equals=function(t){if(!(t instanceof Gu))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Gu.prototype.intersection=function(t){var e=new Ec;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Gu.prototype.project=function(){if(arguments[0]instanceof qs){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new qs(t);var e=this.projectionFactor(t),n=new qs;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Gu){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Gu(a,s)}},Gu.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Gu.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Gu.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Gu.prototype.distancePerpendicular=function(t){return Rc.distancePointLinePerpendicular(t,this.p0,this.p1)},Gu.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Gu.prototype.midPoint=function(){return Gu.midPoint(this.p0,this.p1)},Gu.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?Us.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},Gu.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=Us.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var c=t.closestPoint(this.p1);return(r=c.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=c),n},Gu.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Gu.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Gu.prototype.getLength=function(){return this.p0.distance(this.p1)},Gu.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Gu.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Gu.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Gu.prototype.lineIntersection=function(t){try{return yc.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof mc))throw t}return null},Gu.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Gu.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,c=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*r/a,c=e*o/a}return new qs(n-c,i+s)},Gu.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Gu.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Us.isNaN(e))&&(e=1),e},Gu.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Gu.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Gu.prototype.distance=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return Rc.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof qs)return Rc.distancePointLine(arguments[0],this.p0,this.p1)},Gu.prototype.pointAlong=function(t){var e=new qs;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Gu.prototype.hashCode=function(){var t=Us.doubleToLongBits(this.p0.x);t^=31*Us.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Us.doubleToLongBits(this.p1.x);return n^=31*Us.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Gu.prototype.interfaces_=function(){return[Ks,mr]},Gu.prototype.getClass=function(){return Gu},Gu.midPoint=function(t,e){return new qs((t.x+e.x)/2,(t.y+e.y)/2)},Zu.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Gu,Zu);var Wu=function(){this.tempEnv1=new bc,this.tempEnv2=new bc,this._overlapSeg1=new Gu,this._overlapSeg2=new Gu};Wu.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu};var Hu=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n};Hu.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Hu.prototype.computeSelect=function(t,e,n,i){if(i.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var r=Math.trunc((e+n)/2);e<r&&this.computeSelect(t,e,r,i),r<n&&this.computeSelect(t,r,n,i)},Hu.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Hu.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Hu.prototype.setId=function(t){this._id=t},Hu.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Hu.prototype.getEnvelope=function(){return null===this._env&&(this._env=new bc(this._pts[this._start],this._pts[this._end])),this._env},Hu.prototype.getEndIndex=function(){return this._end},Hu.prototype.getStartIndex=function(){return this._start},Hu.prototype.getContext=function(){return this._context},Hu.prototype.getId=function(){return this._id},Hu.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var a=this._pts[t],s=this._pts[e],c=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(c,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<u&&(i<h&&this.computeOverlapsInternal(t,u,n,i,h,o),h<r&&this.computeOverlapsInternal(t,u,n,h,r,o)),u<e&&(i<h&&this.computeOverlapsInternal(u,e,n,i,h,o),h<r&&this.computeOverlapsInternal(u,e,n,h,r,o))},Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu};var Uu=function(){};Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.getChainStartIndices=function(t){var e=0,n=new qc;n.add(new sc(e));do{var i=Uu.findChainEnd(t,e);n.add(new sc(i)),e=i}while(e<t.length-1);return Uu.toIntArray(n)},Uu.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=pu.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||pu.quadrant(t[r-1],t[r])===i);)r++;return r-1},Uu.getChains=function(){if(1===arguments.length)return Uu.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new qc,i=Uu.getChainStartIndices(t),r=0;r<i.length-1;r++){var o=new Hu(t,i[r],i[r+1],e);n.add(o)}return n}},Uu.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $u=function(){};$u.prototype.computeNodes=function(t){},$u.prototype.getNodedSubstrings=function(){},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var Ku=function(){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(arguments[0])};Ku.prototype.setSegmentIntersector=function(t){this._segInt=t},Ku.prototype.interfaces_=function(){return[$u]},Ku.prototype.getClass=function(){return Ku};var Xu=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new qc,this._index=new Tu,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Vu.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Uu.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Yu(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Yu},Object.defineProperties(e,n),e}(Ku),Yu=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wu),qu=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var e=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(e)}else if(4===arguments.length){var n=arguments[1],i=arguments[2],r=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n),this.setJoinStyle(i),this.setMitreLimit(r)}},Ju={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};qu.prototype.getEndCapStyle=function(){return this._endCapStyle},qu.prototype.isSingleSided=function(){return this._isSingleSided},qu.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=qu.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=qu.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==qu.JOIN_ROUND&&(this._quadrantSegments=qu.DEFAULT_QUADRANT_SEGMENTS)},qu.prototype.getJoinStyle=function(){return this._joinStyle},qu.prototype.setJoinStyle=function(t){this._joinStyle=t},qu.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},qu.prototype.getSimplifyFactor=function(){return this._simplifyFactor},qu.prototype.getQuadrantSegments=function(){return this._quadrantSegments},qu.prototype.setEndCapStyle=function(t){this._endCapStyle=t},qu.prototype.getMitreLimit=function(){return this._mitreLimit},qu.prototype.setMitreLimit=function(t){this._mitreLimit=t},qu.prototype.setSingleSided=function(t){this._isSingleSided=t},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Ju.CAP_ROUND.get=function(){return 1},Ju.CAP_FLAT.get=function(){return 2},Ju.CAP_SQUARE.get=function(){return 3},Ju.JOIN_ROUND.get=function(){return 1},Ju.JOIN_MITRE.get=function(){return 2},Ju.JOIN_BEVEL.get=function(){return 3},Ju.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ju.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ju.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(qu,Ju);var Qu=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Rc.COUNTERCLOCKWISE,this._inputLine=t||null},th={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Qu.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},Qu.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Qu.DELETE,r=!0,i=!0),e=this.findNextNonDeletedIndex(t=r?n:e),n=this.findNextNonDeletedIndex(e)}return i},Qu.prototype.isShallowConcavity=function(t,e,n,i){return Rc.computeOrientation(t,e,n)===this._angleOrientation&&Rc.distancePointLine(e,t,n)<i},Qu.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Qu.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},Qu.prototype.isConcave=function(t,e,n){return Rc.computeOrientation(t,e,n)===this._angleOrientation},Qu.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Rc.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Qu.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Qu.DELETE;)e++;return e},Qu.prototype.isShallow=function(t,e,n,i){return Rc.distancePointLine(e,t,n)<i},Qu.prototype.collapseLine=function(){for(var t=new Qc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Qu.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu},Qu.simplify=function(t,e){return new Qu(t).simplify(e)},th.INIT.get=function(){return 0},th.DELETE.get=function(){return 1},th.KEEP.get=function(){return 1},th.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Qu,th);var eh=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new qc},nh={COORDINATE_ARRAY_TYPE:{configurable:!0}};eh.prototype.getCoordinates=function(){return this._ptList.toArray(eh.COORDINATE_ARRAY_TYPE)},eh.prototype.setPrecisionModel=function(t){this._precisionModel=t},eh.prototype.addPt=function(t){var e=new qs(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},eh.prototype.revere=function(){},eh.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},eh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},eh.prototype.toString=function(){return(new Hl).createLineString(this.getCoordinates()).toString()},eh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new qs(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},eh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(eh,nh);var ih=function(){},rh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.toDegrees=function(t){return 180*t/Math.PI},ih.normalize=function(t){for(;t>Math.PI;)t-=ih.PI_TIMES_2;for(;t<=-Math.PI;)t+=ih.PI_TIMES_2;return t},ih.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},ih.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},ih.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},ih.interiorAngle=function(t,e,n){var i=ih.angle(e,t),r=ih.angle(e,n);return Math.abs(r-i)},ih.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ih.PI_TIMES_2;t>=ih.PI_TIMES_2&&(t=0)}else{for(;t>=ih.PI_TIMES_2;)t-=ih.PI_TIMES_2;t<0&&(t=0)}return t},ih.angleBetween=function(t,e,n){var i=ih.angle(e,t),r=ih.angle(e,n);return ih.diff(i,r)},ih.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},ih.toRadians=function(t){return t*Math.PI/180},ih.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ih.COUNTERCLOCKWISE:n<0?ih.CLOCKWISE:ih.NONE},ih.angleBetweenOriented=function(t,e,n){var i=ih.angle(e,t),r=ih.angle(e,n)-i;return r<=-Math.PI?r+ih.PI_TIMES_2:r>Math.PI?r-ih.PI_TIMES_2:r},rh.PI_TIMES_2.get=function(){return 2*Math.PI},rh.PI_OVER_2.get=function(){return Math.PI/2},rh.PI_OVER_4.get=function(){return Math.PI/4},rh.COUNTERCLOCKWISE.get=function(){return Rc.COUNTERCLOCKWISE},rh.CLOCKWISE.get=function(){return Rc.CLOCKWISE},rh.NONE.get=function(){return Rc.COLLINEAR},Object.defineProperties(ih,rh);var oh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Gu,this._seg1=new Gu,this._offset0=new Gu,this._offset1=new Gu,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new Ec,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===qu.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},ah={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};oh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Rc.computeOrientation(this._s0,this._s1,this._s2),i=n===Rc.CLOCKWISE&&this._side===Ql.LEFT||n===Rc.COUNTERCLOCKWISE&&this._side===Ql.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},oh.prototype.addLineEndCap=function(t,e){var n=new Gu(t,e),i=new Gu;this.computeOffsetSegment(n,Ql.LEFT,this._distance,i);var r=new Gu;this.computeOffsetSegment(n,Ql.RIGHT,this._distance,r);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case qu.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,Rc.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case qu.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case qu.CAP_SQUARE:var a=new qs;a.x=Math.abs(this._distance)*Math.cos(o),a.y=Math.abs(this._distance)*Math.sin(o);var s=new qs(i.p1.x+a.x,i.p1.y+a.y),c=new qs(r.p1.x+a.x,r.p1.y+a.y);this._segList.addPt(s),this._segList.addPt(c)}},oh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},oh.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=yc.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof mc))throw t;o=new qs(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},oh.prototype.addFilletCorner=function(t,e,n,i,r){var o=Math.atan2(e.y-t.y,e.x-t.x),a=Math.atan2(n.y-t.y,n.x-t.x);i===Rc.CLOCKWISE?o<=a&&(o+=2*Math.PI):o>=a&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,a,i,r),this._segList.addPt(n)},oh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*oh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===qu.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===qu.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},oh.prototype.createSquare=function(t){this._segList.addPt(new qs(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new qs(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new qs(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new qs(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},oh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},oh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},oh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},oh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},oh.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=ih.angle(r,this._seg0.p0),a=ih.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=ih.normalize(o+a),c=ih.normalize(s+Math.PI),l=i*n,u=n-l*Math.abs(Math.sin(a)),h=r.x+l*Math.cos(c),d=r.y+l*Math.sin(c),p=new qs(h,d),f=new Gu(r,p),g=f.pointAlongOffset(1,u),m=f.pointAlongOffset(1,-u);this._side===Ql.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},oh.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ql.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),c=r*n*o/s,l=r*n*a/s;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+c,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+c},oh.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Rc.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var c=a/s,l=0,u=new qs;l<a;){var h=e+o*l;u.x=t.x+r*Math.cos(h),u.y=t.y+r*Math.sin(h),this._segList.addPt(u),l+=c}},oh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*oh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new qs((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new qs((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},oh.prototype.createCircle=function(t){var e=new qs(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},oh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},oh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new eh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*oh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},oh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===qu.JOIN_BEVEL||this._bufParams.getJoinStyle()===qu.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Rc.CLOCKWISE,this._distance))},oh.prototype.closeRing=function(){this._segList.closeRing()},oh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},ah.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},ah.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},ah.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ah.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(oh,ah);var sh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[1];this._precisionModel=arguments[0],this._bufParams=t};sh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&tl.reverse(o),o},sh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Qu.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ql.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var s=Qu.simplify(t,i),c=s.length-1;n.initSideSegments(s[0],s[1],Ql.LEFT),n.addFirstSegment();for(var l=2;l<=c;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},sh.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Ql.RIGHT&&(i=-i);var r=Qu.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++)n.addNextSegment(r[a],1!==a);n.closeRing()},sh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Qu.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ql.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Qu.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ql.LEFT);for(var c=s-2;c>=0;c--)e.addNextSegment(a[c],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},sh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case qu.CAP_ROUND:e.createCircle(t);break;case qu.CAP_SQUARE:e.createSquare(t)}},sh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()},sh.prototype.getBufferParameters=function(){return this._bufParams},sh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},sh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return sh.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},sh.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Qu.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ql.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Qu.simplify(t,i),c=s.length-1;n.initSideSegments(s[0],s[1],Ql.LEFT),n.addFirstSegment();for(var l=2;l<=c;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},sh.prototype.getSegGen=function(t){return new oh(this._precisionModel,this._bufParams,t)},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},sh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new qs(t[n]);return e};var ch=function(){this._subgraphs=null,this._seg=new Gu,this._cga=new Rc,this._subgraphs=arguments[0]},lh={DepthSegment:{configurable:!0}};ch.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new qc,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(ic(arguments[2],Yc)&&arguments[0]instanceof qs&&arguments[1]instanceof mu){for(var o=arguments[0],a=arguments[1],s=arguments[2],c=a.getEdge().getCoordinates(),l=0;l<c.length-1;l++)if(this._seg.p0=c[l],this._seg.p1=c[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Rc.computeOrientation(this._seg.p0,this._seg.p1,o)===Rc.RIGHT)){var u=a.getDepth(Ql.LEFT);this._seg.p0.equals(c[l])||(u=a.getDepth(Ql.RIGHT));var h=new uh(this._seg,u);s.add(h)}}else if(ic(arguments[2],Yc)&&arguments[0]instanceof qs&&ic(arguments[1],Yc))for(var d=arguments[0],p=arguments[2],f=arguments[1].iterator();f.hasNext();){var g=f.next();g.isForward()&&this.findStabbedSegments(d,g,p)}},ch.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Ou.min(e)._leftDepth},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch},lh.DepthSegment.get=function(){return uh},Object.defineProperties(ch,lh);var uh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Gu(arguments[0]),this._leftDepth=t};uh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},uh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},uh.prototype.toString=function(){return this._upwardSeg.toString()},uh.prototype.interfaces_=function(){return[Ks]},uh.prototype.getClass=function(){return uh};var hh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};hh.prototype.area=function(){return hh.area(this.p0,this.p1,this.p2)},hh.prototype.signedArea=function(){return hh.signedArea(this.p0,this.p1,this.p2)},hh.prototype.interpolateZ=function(t){if(null===t)throw new Hs("Supplied point is null.");return hh.interpolateZ(t,this.p0,this.p1,this.p2)},hh.prototype.longestSideLength=function(){return hh.longestSideLength(this.p0,this.p1,this.p2)},hh.prototype.isAcute=function(){return hh.isAcute(this.p0,this.p1,this.p2)},hh.prototype.circumcentre=function(){return hh.circumcentre(this.p0,this.p1,this.p2)},hh.prototype.area3D=function(){return hh.area3D(this.p0,this.p1,this.p2)},hh.prototype.centroid=function(){return hh.centroid(this.p0,this.p1,this.p2)},hh.prototype.inCentre=function(){return hh.inCentre(this.p0,this.p1,this.p2)},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh},hh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},hh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},hh.det=function(t,e,n,i){return t*i-e*n},hh.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,c=n.y-o,l=i.y-o,u=a*l-s*c,h=t.x-r,d=t.y-o;return e.z+(l*h-s*d)/u*(n.z-e.z)+(-c*h+a*d)/u*(i.z-e.z)},hh.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},hh.isAcute=function(t,e,n){return!!ih.isAcute(t,e,n)&&!!ih.isAcute(e,n,t)&&!!ih.isAcute(n,t,e)},hh.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,c=e.y-r,l=2*hh.det(o,a,s,c),u=hh.det(a,o*o+a*a,c,s*s+c*c),h=hh.det(o,o*o+a*a,s,s*s+c*c);return new qs(i-u/l,r+h/l)},hh.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new yc(t.x+n/2,t.y+i/2,1),o=new yc(t.x-i+n/2,t.y+n+i/2,1);return new yc(r,o)},hh.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n));return new qs(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))},hh.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,c=n.z-t.z,l=r*c-o*s,u=o*a-i*c,h=i*s-r*a;return Math.sqrt(l*l+u*u+h*h)/2},hh.centroid=function(t,e,n){return new qs((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},hh.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o;return new qs((i*t.x+r*e.x+o*n.x)/a,(i*t.y+r*e.y+o*n.y)/a)};var dh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new qc;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e};dh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ec.EXTERIOR,ec.INTERIOR)},dh.prototype.addPolygon=function(t){var e=this._distance,n=Ql.LEFT;this._distance<0&&(e=-this._distance,n=Ql.RIGHT);var i=t.getExteriorRing(),r=tl.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,ec.EXTERIOR,ec.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=tl.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ql.opposite(n),ec.INTERIOR,ec.EXTERIOR)}},dh.prototype.isTriangleErodedCompletely=function(t,e){var n=new hh(t[0],t[1],t[2]),i=n.inCentre();return Rc.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},dh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=tl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ec.EXTERIOR,ec.INTERIOR)},dh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new Vu(t,new au(0,ec.BOUNDARY,e,n));this._curveList.add(i)},dh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},dh.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<Sl.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=Sl.MINIMUM_VALID_SIZE&&Rc.isCCW(t)&&(o=r,a=i,n=Ql.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},dh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Ol?this.addPolygon(t):t instanceof wl?this.addLineString(t):t instanceof Al?this.addPoint(t):(t instanceof Ml||t instanceof vl||t instanceof kl||t instanceof ml)&&this.addCollection(t)},dh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},dh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var ph=function(){};ph.prototype.locate=function(t){},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph};var fh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};fh.prototype.next=function(){if(this._atStart)return this._atStart=!1,fh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new vr;var t=this._parent.getGeometryN(this._index++);return t instanceof ml?(this._subcollectionIterator=new fh(t),this._subcollectionIterator.next()):t},fh.prototype.remove=function(){throw new Error(this.getClass().getName())},fh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},fh.prototype.interfaces_=function(){return[Xc]},fh.prototype.getClass=function(){return fh},fh.isAtomic=function(t){return!(t instanceof ml)};var gh=function(){this._geom=null,this._geom=arguments[0]};gh.prototype.locate=function(t){return gh.locate(t,this._geom)},gh.prototype.interfaces_=function(){return[ph]},gh.prototype.getClass=function(){return gh},gh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Rc.isPointInRing(t,e.getCoordinates())},gh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!gh.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(gh.isPointInRing(t,r))return!1}return!0},gh.containsPoint=function(t,e){if(e instanceof Ol)return gh.containsPointInPolygon(t,e);if(e instanceof ml)for(var n=new fh(e);n.hasNext();){var i=n.next();if(i!==e&&gh.containsPoint(t,i))return!0}return!1},gh.locate=function(t,e){return e.isEmpty()?ec.EXTERIOR:gh.containsPoint(t,e)?ec.INTERIOR:ec.EXTERIOR};var mh=function(){this._edgeMap=new Ar,this._edgeList=null,this._ptInAreaLocation=[ec.NONE,ec.NONE]};mh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},mh.prototype.propagateSideLabels=function(t){for(var e=ec.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Ql.LEFT)!==ec.NONE&&(e=i.getLocation(t,Ql.LEFT))}if(e===ec.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ql.ON)===ec.NONE&&s.setLocation(t,Ql.ON,r),s.isArea(t)){var c=s.getLocation(t,Ql.LEFT),l=s.getLocation(t,Ql.RIGHT);if(l!==ec.NONE){if(l!==r)throw new nu("side location conflict",a.getCoordinate());c===ec.NONE&&Mc.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=c}else Mc.isTrue(s.getLocation(t,Ql.LEFT)===ec.NONE,"found single null side"),s.setLocation(t,Ql.RIGHT,r),s.setLocation(t,Ql.LEFT,r)}}},mh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},mh.prototype.print=function(t){vc.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},mh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},mh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ql.LEFT);Mc.isTrue(i!==ec.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Mc.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ql.LEFT),c=a.getLocation(t,Ql.RIGHT);if(s===c)return!1;if(c!==r)return!1;r=s}return!0},mh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},mh.prototype.iterator=function(){return this.getEdges().iterator()},mh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new qc(this._edgeMap.values())),this._edgeList},mh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===ec.NONE&&(this._ptInAreaLocation[t]=gh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},mh.prototype.toString=function(){var t=new ac;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},mh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},mh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===ec.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),c=0;c<2;c++)if(s.isAnyNull(c)){var l=ec.NONE;if(e[c])l=ec.EXTERIOR;else{var u=a.getCoordinate();l=this.getLocation(c,u,t)}s.setAllLocationsIfNull(c,l)}},mh.prototype.getDegree=function(){return this._edgeMap.size()},mh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var vh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new nu("no outgoing dirEdge found",this.getCoordinate());Mc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return pu.isNorthern(r)&&pu.isNorthern(o)?n:pu.isNorthern(r)||pu.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(Mc.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){vc.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new qc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ql.LEFT),i=t.getDepth(Ql.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new nu("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var c=this._edgeList.get(s);c.setEdgeDepths(Ql.RIGHT,a),a=c.getDepth(Ql.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Mc.isTrue(null!==e,"found null for first outgoing dirEdge"),Mc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=ec.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=ec.INTERIOR;break}if(i.isInResult()){t=ec.EXTERIOR;break}}}if(t===ec.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===ec.INTERIOR):(a.isInResult()&&(r=ec.EXTERIOR),s.isInResult()&&(r=ec.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new au(ec.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==ec.INTERIOR&&o!==ec.BOUNDARY||this._label.setLocation(r,ec.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mh),yh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new hu(t,new vh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vu),bh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};bh.prototype.compareTo=function(t){return bh.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},bh.prototype.interfaces_=function(){return[Ks]},bh.prototype.getClass=function(){return bh},bh.orientation=function(t){return 1===tl.increasingDirection(t)},bh.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,c=e?0:t.length-1,l=i?0:n.length-1;;){var u=t[c].compareTo(n[l]);if(0!==u)return u;var h=(c+=r)===a,d=(l+=o)===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};var _h=function(){this._edges=new qc,this._ocaMap=new Ar};_h.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},_h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},_h.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},_h.prototype.iterator=function(){return this._edges.iterator()},_h.prototype.getEdges=function(){return this._edges},_h.prototype.get=function(t){return this._edges.get(t)},_h.prototype.findEqualEdge=function(t){var e=new bh(t.getCoordinates());return this._ocaMap.get(e)},_h.prototype.add=function(t){this._edges.add(t);var e=new bh(t.getCoordinates());this._ocaMap.put(e,t)},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var Ch=function(){};Ch.prototype.processIntersections=function(t,e,n,i){},Ch.prototype.isDone=function(){},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var xh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};xh.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(xh.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},xh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},xh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},xh.prototype.getLineIntersector=function(){return this._li},xh.prototype.hasProperIntersection=function(){return this._hasProper},xh.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},xh.prototype.hasIntersection=function(){return this._hasIntersection},xh.prototype.isDone=function(){return!1},xh.prototype.hasInteriorIntersection=function(){return this._hasInterior},xh.prototype.interfaces_=function(){return[Ch]},xh.prototype.getClass=function(){return xh},xh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var wh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new qs(arguments[0]),this.segmentIndex=t,this.dist=e};wh.prototype.getSegmentIndex=function(){return this.segmentIndex},wh.prototype.getCoordinate=function(){return this.coord},wh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},wh.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},wh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},wh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},wh.prototype.getDistance=function(){return this.dist},wh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},wh.prototype.interfaces_=function(){return[Ks]},wh.prototype.getClass=function(){return wh};var Ih=function(){this._nodeMap=new Ar,this.edge=null,this.edge=arguments[0]};Ih.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ih.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ih.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Ih.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Ih.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var r=new Array(n).fill(null),o=0;r[o++]=new qs(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)r[o++]=this.edge.pts[a];return i&&(r[o]=e.coord),new Sh(r,new au(this.edge._label))},Ih.prototype.add=function(t,e,n){var i=new wh(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Ih.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Ah=function(){};Ah.prototype.getChainStartIndices=function(t){var e=0,n=new qc;n.add(new sc(e));do{var i=this.findChainEnd(t,e);n.add(new sc(i)),e=i}while(e<t.length-1);return Ah.toIntArray(n)},Ah.prototype.findChainEnd=function(t,e){for(var n=pu.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&pu.quadrant(t[i-1],t[i])===n;)i++;return i-1},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ah.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ph=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new bc,this.env2=new bc;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ah;this.startIndex=e.getChainStartIndices(this.pts)};Ph.prototype.getCoordinates=function(){return this.pts},Ph.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Ph.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Ph.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],c=arguments[5],l=this.pts[i],u=this.pts[r],h=o.pts[a],d=o.pts[s];if(r-i==1&&s-a==1)return c.addIntersections(this.e,i,o.e,a),null;if(this.env1.init(l,u),this.env2.init(h,d),!this.env1.intersects(this.env2))return null;var p=Math.trunc((i+r)/2),f=Math.trunc((a+s)/2);i<p&&(a<f&&this.computeIntersectsForChain(i,p,o,a,f,c),f<s&&this.computeIntersectsForChain(i,p,o,f,s,c)),p<r&&(a<f&&this.computeIntersectsForChain(p,r,o,a,f,c),f<s&&this.computeIntersectsForChain(p,r,o,f,s,c))}},Ph.prototype.getStartIndexes=function(){return this.startIndex},Ph.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph};var Oh=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Mh={NULL_VALUE:{configurable:!0}};Oh.prototype.getDepth=function(t,e){return this._depth[t][e]},Oh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Oh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Oh.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===Oh.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===Oh.NULL_VALUE:void 0},Oh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},Oh.prototype.getDelta=function(t){return this._depth[t][Ql.RIGHT]-this._depth[t][Ql.LEFT]},Oh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?ec.EXTERIOR:ec.INTERIOR},Oh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Oh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==ec.EXTERIOR&&i!==ec.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Oh.depthAtLocation(i):this._depth[e][n]+=Oh.depthAtLocation(i))}else 3===arguments.length&&arguments[2]===ec.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Oh.depthAtLocation=function(t){return t===ec.EXTERIOR?0:t===ec.INTERIOR?1:Oh.NULL_VALUE},Mh.NULL_VALUE.get=function(){return-1},Object.defineProperties(Oh,Mh);var Sh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Ih(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Oh,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var n=arguments[1];this.pts=arguments[0],this._label=n}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,au.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(i=!1),this.pts[a].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ph(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new bc;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new qs(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;s<this.pts.length&&r.equals2D(this.pts[s])&&(o=s,a=0),this.eiList.add(r,o,a)},e.prototype.toString=function(){var t=new ac;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ql.ON),e.getLocation(1,Ql.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ql.LEFT),e.getLocation(1,Ql.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ql.RIGHT),e.getLocation(1,Ql.RIGHT),2))},e}(uu),kh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new _h,this._bufParams=t||null};kh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},kh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new au(t.getLabel())).flip(),n.merge(i);var r=kh.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(kh.depthDelta(t.getLabel()))},kh.prototype.buildSubgraphs=function(t,e){for(var n=new qc,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new ch(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},kh.prototype.createSubgraphs=function(t){for(var e=new qc,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new ru;r.create(i),e.add(r)}}return Ou.sort(e,Ou.reverseOrder()),e},kh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},kh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Xu,n=new Ec;return n.setPrecisionModel(t),e.setSegmentIntersector(new xh(n)),e},kh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new sh(n,this._bufParams),r=new dh(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new yu(new yh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new bu(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},kh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new Sh(r.getCoordinates(),new au(a));this.insertUniqueEdge(s)}}},kh.prototype.setNoder=function(t){this._workingNoder=t},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},kh.depthDelta=function(t){var e=t.getLocation(0,Ql.LEFT),n=t.getLocation(0,Ql.RIGHT);return e===ec.INTERIOR&&n===ec.EXTERIOR?1:e===ec.EXTERIOR&&n===ec.INTERIOR?-1:0},kh.convertSegStrings=function(t){for(var e=new Hl,n=new qc;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var Eh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[1];this._noder=arguments[0],this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var e=arguments[1],n=arguments[2],i=arguments[3];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=n,this._offsetY=i,this._isScaled=!this.isIntegerPrecision()}};Eh.prototype.rescale=function(){if(ic(arguments[0],$c))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&vc.out.println(n)}},Eh.prototype.scale=function(){if(ic(arguments[0],$c)){for(var t=arguments[0],e=new qc,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Vu(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new qs(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return tl.removeRepeatedPoints(o)}},Eh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Eh.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Eh.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Eh.prototype.interfaces_=function(){return[$u]},Eh.prototype.getClass=function(){return Eh};var Lh=function(){this._li=new Ec,this._segStrings=null,this._segStrings=arguments[0]},Th={fact:{configurable:!0}};Lh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Pc("found endpt/interior pt intersection at index "+o+" :pt "+n)},Lh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),c=0;c<a.length-1;c++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(r,c,o,l);else if(4===arguments.length){var u=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];if(u===d&&h===p)return null;var f=u.getCoordinates()[h],g=u.getCoordinates()[h+1],m=d.getCoordinates()[p],v=d.getCoordinates()[p+1];if(this._li.computeIntersection(f,g,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,g)||this.hasInteriorIntersection(this._li,m,v)))throw new Pc("found non-noded intersection at "+f+"-"+g+" and "+m+"-"+v)}},Lh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Lh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},Lh.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},Lh.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Pc("found non-noded collapse at "+Lh.fact.createLineString([t,e,n]))},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Th.fact.get=function(){return new Hl},Object.defineProperties(Lh,Th);var Rh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Hs("Scale factor must be non-zero");1!==e&&(this._pt=new qs(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new qs,this._p1Scaled=new qs),this.initCorners(this._pt)},Nh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Rh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return Mc.isTrue(!(a&&s),"Found bad envelope test"),s},Rh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new qs(this._maxx,this._maxy),this._corner[1]=new qs(this._minx,this._maxy),this._corner[2]=new qs(this._minx,this._miny),this._corner[3]=new qs(this._maxx,this._miny)},Rh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Rh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Rh.prototype.getCoordinate=function(){return this._originalPt},Rh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Rh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Rh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new bc(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Rh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Rh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},Rh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Nh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Rh,Nh);var Bh=function(){this.tempEnv1=new bc,this.selectedSegment=new Gu};Bh.prototype.select=function(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var jh=function(){this._index=null,this._index=arguments[0]},Dh={HotPixelSnapAction:{configurable:!0}};jh.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getSafeEnvelope(),r=new Fh(t,e,n);return this._index.query(i,{interfaces_:function(){return[wu]},visitItem:function(t){t.select(i,r)}}),r.isNodeAdded()}},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},Dh.HotPixelSnapAction.get=function(){return Fh},Object.defineProperties(jh,Dh);var Fh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[1],n=arguments[2];this._hotPixel=arguments[0],this._parentEdge=e,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bh),zh=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new qc};zh.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var c=0;c<this._li.getIntersectionNum();c++)this._interiorIntersections.add(this._li.getIntersection(c));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},zh.prototype.isDone=function(){return!1},zh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},zh.prototype.interfaces_=function(){return[Ch]},zh.prototype.getClass=function(){return zh};var Vh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Ec,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Vh.prototype.checkCorrectness=function(t){var e=Vu.getNodedSubstrings(t),n=new Lh(e);try{n.checkValid()}catch(t){if(!(t instanceof gc))throw t;t.printStackTrace()}},Vh.prototype.getNodedSubstrings=function(){return Vu.getNodedSubstrings(this._nodedSegStrings)},Vh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Vh.prototype.findInteriorIntersections=function(t,e){var n=new zh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Vh.prototype.computeVertexSnaps=function(){if(ic(arguments[0],$c))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Vu)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new Rh(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},Vh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Xu,this._pointSnapper=new jh(this._noder.getIndex()),this.snapRound(t,this._li)},Vh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Rh(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},Vh.prototype.interfaces_=function(){return[$u]},Vh.prototype.getClass=function(){return Vh};var Gh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new qu,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var t=arguments[1];this._argGeom=arguments[0],this._bufParams=t}},Zh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Gh.prototype.bufferFixedPrecision=function(t){var e=new Eh(new Vh(new Vl(1)),t.getScale()),n=new kh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Gh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Gh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof nu))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=Gh.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),i=new Vl(n);this.bufferFixedPrecision(i)}},Gh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Vl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Gh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Gh.prototype.bufferOriginalPrecision=function(){try{var t=new kh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Pc))throw t;this._saveException=t}},Gh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Gh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Gh(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof jc&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new Gh(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof qu&&arguments[0]instanceof jc&&"number"==typeof arguments[1]){var r=arguments[1];return new Gh(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],c=new Gh(arguments[0]);return c.setQuadrantSegments(a),c.setEndCapStyle(s),c.getResultGeometry(o)}},Gh.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=rc.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},Zh.CAP_ROUND.get=function(){return qu.CAP_ROUND},Zh.CAP_BUTT.get=function(){return qu.CAP_FLAT},Zh.CAP_FLAT.get=function(){return qu.CAP_FLAT},Zh.CAP_SQUARE.get=function(){return qu.CAP_SQUARE},Zh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Gh,Zh);var Wh=function(){this._pt=[new qs,new qs],this._distance=Us.NaN,this._isNull=!0};Wh.prototype.getCoordinates=function(){return this._pt},Wh.prototype.getCoordinate=function(t){return this._pt[t]},Wh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Wh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Wh.prototype.getDistance=function(){return this._distance},Wh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Hh=function(){};Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.computeDistance=function(){if(arguments[2]instanceof Wh&&arguments[0]instanceof wl&&arguments[1]instanceof qs)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new Gu,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof Ol&&arguments[1]instanceof qs){var a=arguments[0],s=arguments[1],c=arguments[2];Hh.computeDistance(a.getExteriorRing(),s,c);for(var l=0;l<a.getNumInteriorRing();l++)Hh.computeDistance(a.getInteriorRingN(l),s,c)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof jc&&arguments[1]instanceof qs){var u=arguments[0],h=arguments[1],d=arguments[2];if(u instanceof wl)Hh.computeDistance(u,h,d);else if(u instanceof Ol)Hh.computeDistance(u,h,d);else if(u instanceof ml)for(var p=u,f=0;f<p.getNumGeometries();f++){var g=p.getGeometryN(f);Hh.computeDistance(g,h,d)}else d.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof Gu&&arguments[1]instanceof qs){var m=arguments[1],v=arguments[2],y=arguments[0].closestPoint(m);v.setMinimum(y,m)}};var Uh=function(t){this._maxPtDist=new Wh,this._inputGeom=t||null},$h={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Uh.prototype.computeMaxMidpointDistance=function(t){var e=new Xh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Uh.prototype.computeMaxVertexDistance=function(t){var e=new Kh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Uh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Uh.prototype.getDistancePoints=function(){return this._maxPtDist},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},$h.MaxPointDistanceFilter.get=function(){return Kh},$h.MaxMidpointDistanceFilter.get=function(){return Xh},Object.defineProperties(Uh,$h);var Kh=function(t){this._maxPtDist=new Wh,this._minPtDist=new Wh,this._geom=t||null};Kh.prototype.filter=function(t){this._minPtDist.initialize(),Hh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Kh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Kh.prototype.interfaces_=function(){return[zc]},Kh.prototype.getClass=function(){return Kh};var Xh=function(t){this._maxPtDist=new Wh,this._minPtDist=new Wh,this._geom=t||null};Xh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new qs((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Hh.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Xh.prototype.isDone=function(){return!1},Xh.prototype.isGeometryChanged=function(){return!1},Xh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Xh.prototype.interfaces_=function(){return[gl]},Xh.prototype.getClass=function(){return Xh};var Yh=function(t){this._comps=t||null};Yh.prototype.filter=function(t){t instanceof Ol&&this._comps.add(t)},Yh.prototype.interfaces_=function(){return[fl]},Yh.prototype.getClass=function(){return Yh},Yh.getPolygons=function(){if(1===arguments.length)return Yh.getPolygons(arguments[0],new qc);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof Ol?e.add(t):t instanceof ml&&t.apply(new Yh(e)),e}};var qh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}};qh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Sl){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof wl&&this._lines.add(t)},qh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},qh.prototype.interfaces_=function(){return[Bc]},qh.prototype.getClass=function(){return qh},qh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(qh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(qh.getLines(e,n))}},qh.getLines=function(){if(1===arguments.length)return qh.getLines(arguments[0],!1);if(2===arguments.length){if(ic(arguments[0],$c)&&ic(arguments[1],$c)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();qh.getLines(n,t)}return t}if(arguments[0]instanceof jc&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1],o=new qc;return i.apply(new qh(o,r)),o}if(arguments[0]instanceof jc&&ic(arguments[1],$c)){var a=arguments[0],s=arguments[1];return a instanceof wl?s.add(a):a.apply(new qh(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&ic(arguments[0],$c)&&ic(arguments[1],$c)){for(var c=arguments[1],l=arguments[2],u=arguments[0].iterator();u.hasNext();){var h=u.next();qh.getLines(h,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof jc&&ic(arguments[1],$c)){var d=arguments[1];return arguments[0].apply(new qh(d,arguments[2])),d}}};var Jh=function(){if(this._boundaryRule=Vc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Hs("Rule must be non-null");this._boundaryRule=t}};Jh.prototype.locateInternal=function(){if(arguments[0]instanceof qs&&arguments[1]instanceof Ol){var t=arguments[0],e=arguments[1];if(e.isEmpty())return ec.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===ec.EXTERIOR)return ec.EXTERIOR;if(i===ec.BOUNDARY)return ec.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===ec.INTERIOR)return ec.EXTERIOR;if(a===ec.BOUNDARY)return ec.BOUNDARY}return ec.INTERIOR}if(arguments[0]instanceof qs&&arguments[1]instanceof wl){var s=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(s))return ec.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?Rc.isOnLine(s,l)?ec.INTERIOR:ec.EXTERIOR:ec.BOUNDARY}if(arguments[0]instanceof qs&&arguments[1]instanceof Al){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?ec.INTERIOR:ec.EXTERIOR}},Jh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Rc.locatePointInRing(t,e.getCoordinates()):ec.EXTERIOR},Jh.prototype.intersects=function(t,e){return this.locate(t,e)!==ec.EXTERIOR},Jh.prototype.updateLocationInfo=function(t){t===ec.INTERIOR&&(this._isIn=!0),t===ec.BOUNDARY&&this._numBoundaries++},Jh.prototype.computeLocation=function(t,e){if(e instanceof Al&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof wl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ol)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof vl)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof kl)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ml)for(var c=new fh(e);c.hasNext();){var l=c.next();l!==e&&this.computeLocation(t,l)}},Jh.prototype.locate=function(t,e){return e.isEmpty()?ec.EXTERIOR:e instanceof wl||e instanceof Ol?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?ec.BOUNDARY:this._numBoundaries>0||this._isIn?ec.INTERIOR:ec.EXTERIOR)},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[1],n=arguments[2];this._component=arguments[0],this._segIndex=e,this._pt=n}},td={INSIDE_AREA:{configurable:!0}};Qh.prototype.isInsideArea=function(){return this._segIndex===Qh.INSIDE_AREA},Qh.prototype.getCoordinate=function(){return this._pt},Qh.prototype.getGeometryComponent=function(){return this._component},Qh.prototype.getSegmentIndex=function(){return this._segIndex},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},td.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Qh,td);var ed=function(t){this._pts=t||null};ed.prototype.filter=function(t){t instanceof Al&&this._pts.add(t)},ed.prototype.interfaces_=function(){return[fl]},ed.prototype.getClass=function(){return ed},ed.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Al?Ou.singletonList(t):ed.getPoints(t,new qc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Al?n.add(e):e instanceof ml&&e.apply(new ed(n)),n}};var nd=function(){this._locations=null,this._locations=arguments[0]};nd.prototype.filter=function(t){(t instanceof Al||t instanceof wl||t instanceof Ol)&&this._locations.add(new Qh(t,0,t.getCoordinate()))},nd.prototype.interfaces_=function(){return[fl]},nd.prototype.getClass=function(){return nd},nd.getLocations=function(t){var e=new qc;return t.apply(new nd(e)),e};var id=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Jh,this._minDistanceLocation=null,this._minDistance=Us.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=n}};id.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Yh.getPolygons(this._geom[e]);if(r.size()>0){var o=nd.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&ic(arguments[0],Yc)&&ic(arguments[1],Yc)){for(var a=arguments[0],s=arguments[1],c=arguments[2],l=0;l<a.size();l++)for(var u=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(u,s.get(h),c),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qh&&arguments[1]instanceof Ol){var d=arguments[0],p=arguments[1],f=arguments[2],g=d.getCoordinate();if(ec.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,f[0]=d,f[1]=new Qh(p,g),null}},id.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},id.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=qh.getLines(this._geom[0]),n=qh.getLines(this._geom[1]),i=ed.getPoints(this._geom[0]),r=ed.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},id.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},id.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},id.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},id.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof wl&&arguments[1]instanceof Al){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=Rc.distancePointLine(r,i[o],i[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Gu(i[o],i[o+1]).closestPoint(r);n[0]=new Qh(t,o,s),n[1]=new Qh(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof wl&&arguments[1]instanceof wl){var c=arguments[0],l=arguments[1],u=arguments[2];if(c.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=c.getCoordinates(),d=l.getCoordinates(),p=0;p<h.length-1;p++)for(var f=0;f<d.length-1;f++){var g=Rc.distanceLineLine(h[p],h[p+1],d[f],d[f+1]);if(g<this._minDistance){this._minDistance=g;var m=new Gu(h[p],h[p+1]),v=new Gu(d[f],d[f+1]),y=m.closestPoints(v);u[0]=new Qh(c,p,y[0]),u[1]=new Qh(l,f,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},id.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Qh(r,0,r.getCoordinate()),n[1]=new Qh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},id.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Hs("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},id.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},id.distance=function(t,e){return new id(t,e).distance()},id.isWithinDistance=function(t,e,n){return new id(t,e,n).distance()<=n},id.nearestPoints=function(t,e){return new id(t,e).nearestPoints()};var rd=function(){this._pt=[new qs,new qs],this._distance=Us.NaN,this._isNull=!0};rd.prototype.getCoordinates=function(){return this._pt},rd.prototype.getCoordinate=function(t){return this._pt[t]},rd.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},rd.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},rd.prototype.toString=function(){return Ac.toLineString(this._pt[0],this._pt[1])},rd.prototype.getDistance=function(){return this._distance},rd.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd};var od=function(){};od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od},od.computeDistance=function(){if(arguments[2]instanceof rd&&arguments[0]instanceof wl&&arguments[1]instanceof qs)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new Gu,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof rd&&arguments[0]instanceof Ol&&arguments[1]instanceof qs){var s=arguments[0],c=arguments[1],l=arguments[2];od.computeDistance(s.getExteriorRing(),c,l);for(var u=0;u<s.getNumInteriorRing();u++)od.computeDistance(s.getInteriorRingN(u),c,l)}else if(arguments[2]instanceof rd&&arguments[0]instanceof jc&&arguments[1]instanceof qs){var h=arguments[0],d=arguments[1],p=arguments[2];if(h instanceof wl)od.computeDistance(h,d,p);else if(h instanceof Ol)od.computeDistance(h,d,p);else if(h instanceof ml)for(var f=h,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);od.computeDistance(m,d,p)}else p.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof rd&&arguments[0]instanceof Gu&&arguments[1]instanceof qs){var v=arguments[1],y=arguments[2],b=arguments[0].closestPoint(v);y.setMinimum(b,v)}};var ad=function(){this._g0=null,this._g1=null,this._ptDist=new rd,this._densifyFrac=0;var t=arguments[1];this._g0=arguments[0],this._g1=t},sd={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ad.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ad.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Hs("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},ad.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},ad.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ad.prototype.computeOrientedDistance=function(t,e,n){var i=new cd(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new ld(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},ad.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.distance=function(){if(2===arguments.length)return new ad(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new ad(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},sd.MaxPointDistanceFilter.get=function(){return cd},sd.MaxDensifiedByFractionDistanceFilter.get=function(){return ld},Object.defineProperties(ad,sd);var cd=function(){this._maxPtDist=new rd,this._minPtDist=new rd,this._euclideanDist=new od,this._geom=null,this._geom=arguments[0]};cd.prototype.filter=function(t){this._minPtDist.initialize(),od.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},cd.prototype.getMaxPointDistance=function(){return this._maxPtDist},cd.prototype.interfaces_=function(){return[zc]},cd.prototype.getClass=function(){return cd};var ld=function(){this._maxPtDist=new rd,this._minPtDist=new rd,this._geom=null,this._numSubSegs=0;var t=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/t))};ld.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=new qs(n.x+a*r,n.y+a*o);this._minPtDist.initialize(),od.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},ld.prototype.isDone=function(){return!1},ld.prototype.isGeometryChanged=function(){return!1},ld.prototype.getMaxPointDistance=function(){return this._maxPtDist},ld.prototype.interfaces_=function(){return[gl]},ld.prototype.getClass=function(){return ld};var ud=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},hd={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ud.prototype.checkMaximumDistance=function(t,e,n){var i=new ad(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ac.toLineString(r[0],r[1])+")"}},ud.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=ud.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ud.VERBOSE&&vc.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ud.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ol||this._input instanceof kl||this._input instanceof ml))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},ud.prototype.getErrorIndicator=function(){return this._errorIndicator},ud.prototype.checkMinimumDistance=function(t,e,n){var i=new id(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ac.toLineString(r[0],r[1])+" )"}},ud.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},ud.prototype.getErrorLocation=function(){return this._errorLocation},ud.prototype.getPolygonLines=function(t){for(var e=new qc,n=new qh(e),i=Yh.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},ud.prototype.getErrorMessage=function(){return this._errMsg},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},hd.VERBOSE.get=function(){return!1},hd.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ud,hd);var dd=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},pd={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};dd.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},dd.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*dd.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new bc(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new bc(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},dd.prototype.checkDistance=function(){var t=new ud(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},dd.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},dd.prototype.checkPolygonal=function(){this._result instanceof Ol||this._result instanceof kl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},dd.prototype.getErrorIndicator=function(){return this._errorIndicator},dd.prototype.getErrorLocation=function(){return this._errorLocation},dd.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},dd.prototype.report=function(t){if(!dd.VERBOSE)return null;vc.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},dd.prototype.getErrorMessage=function(){return this._errorMsg},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.isValidMsg=function(t,e,n){var i=new dd(t,e,n);return i.isValid()?null:i.getErrorMessage()},dd.isValid=function(t,e,n){return!!new dd(t,e,n).isValid()},pd.VERBOSE.get=function(){return!1},pd.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(dd,pd);var fd=function(){this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};fd.prototype.getCoordinates=function(){return this._pts},fd.prototype.size=function(){return this._pts.length},fd.prototype.getCoordinate=function(t){return this._pts[t]},fd.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fd.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Du.octant(this.getCoordinate(t),this.getCoordinate(t+1))},fd.prototype.setData=function(t){this._data=t},fd.prototype.getData=function(){return this._data},fd.prototype.toString=function(){return Ac.toLineString(new Bl(this._pts))},fd.prototype.interfaces_=function(){return[Fu]},fd.prototype.getClass=function(){return fd};var gd=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new qc,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};gd.prototype.getInteriorIntersection=function(){return this._interiorIntersection},gd.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},gd.prototype.getIntersectionSegments=function(){return this._intSegments},gd.prototype.count=function(){return this._intersectionCount},gd.prototype.getIntersections=function(){return this._intersections},gd.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},gd.prototype.setKeepIntersections=function(t){this._keepIntersections=t},gd.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},gd.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},gd.prototype.hasIntersection=function(){return null!==this._interiorIntersection},gd.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},gd.prototype.interfaces_=function(){return[Ch]},gd.prototype.getClass=function(){return gd},gd.createAllIntersectionsFinder=function(t){var e=new gd(t);return e.setFindAllIntersections(!0),e},gd.createAnyIntersectionFinder=function(t){return new gd(t)},gd.createIntersectionCounter=function(t){var e=new gd(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var md=function(){this._li=new Ec,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};md.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},md.prototype.getIntersections=function(){return this._segInt.getIntersections()},md.prototype.isValid=function(){return this.execute(),this._isValid},md.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},md.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new gd(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Xu;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},md.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new nu(this.getErrorMessage(),this._segInt.getInteriorIntersection())},md.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ac.toLineString(t[0],t[1])+" and "+Ac.toLineString(t[2],t[3])},md.prototype.interfaces_=function(){return[]},md.prototype.getClass=function(){return md},md.computeIntersections=function(t){var e=new md(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var vd=function t(){this._nv=null,this._nv=new md(t.toSegmentStrings(arguments[0]))};vd.prototype.checkValid=function(){this._nv.checkValid()},vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},vd.toSegmentStrings=function(t){for(var e=new qc,n=t.iterator();n.hasNext();){var i=n.next();e.add(new fd(i.getCoordinates(),i))}return e},vd.checkValid=function(t){new vd(t).checkValid()};var yd=function(t){this._mapOp=t};yd.prototype.map=function(t){for(var e=new qc,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Hl.toGeometryArray(e))},yd.prototype.interfaces_=function(){return[]},yd.prototype.getClass=function(){return yd},yd.map=function(t,e){return new yd(e).map(t)};var bd=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new qc,this._resultLineList=new qc;var t=arguments[1],e=arguments[2];this._op=arguments[0],this._geometryFactory=t,this._ptLocator=e};bd.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},bd.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},bd.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},bd.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Qd.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},bd.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},bd.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},bd.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},bd.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Mc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Qd.isResultOfOp(i,e)&&e===Qd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var _d=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new qc;var t=arguments[1];this._op=arguments[0],this._geometryFactory=t};_d.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},_d.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Qd.INTERSECTION)){var i=n.getLabel();Qd.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},_d.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},_d.prototype.interfaces_=function(){return[]},_d.prototype.getClass=function(){return _d};var Cd=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Cd.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Cd.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Sl&&!i.isEmpty()||(n=!1);for(var r=new qc,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Sl||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var s=new qc;return null!==i&&s.add(i),s.addAll(r),this._factory.buildGeometry(s)},Cd.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Cd.prototype.getInputGeometry=function(){return this._inputGeom},Cd.prototype.transformMultiLineString=function(t,e){for(var n=new qc,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Cd.prototype.transformCoordinates=function(t,e){return this.copy(t)},Cd.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Cd.prototype.transformMultiPoint=function(t,e){for(var n=new qc,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Cd.prototype.transformMultiPolygon=function(t,e){for(var n=new qc,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Cd.prototype.copy=function(t){return t.copy()},Cd.prototype.transformGeometryCollection=function(t,e){for(var n=new qc,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Hl.toGeometryArray(n)):this._factory.buildGeometry(n)},Cd.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Al)return this.transformPoint(t,null);if(t instanceof Ml)return this.transformMultiPoint(t,null);if(t instanceof Sl)return this.transformLinearRing(t,null);if(t instanceof wl)return this.transformLineString(t,null);if(t instanceof vl)return this.transformMultiLineString(t,null);if(t instanceof Ol)return this.transformPolygon(t,null);if(t instanceof kl)return this.transformMultiPolygon(t,null);if(t instanceof ml)return this.transformGeometryCollection(t,null);throw new Hs("Unknown Geometry subtype: "+t.getClass().getName())},Cd.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd};var xd=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Gu,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof wl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};xd.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new qs(o)),0===i&&this._isClosed&&t.set(t.size()-1,new qs(o)))}},xd.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},xd.prototype.snapTo=function(t){var e=new Qc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},xd.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new qs(r),!1)}},xd.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Us.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},xd.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd},xd.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var wd=function(t){this._srcGeom=t||null},Id={SNAP_PRECISION_FACTOR:{configurable:!0}};wd.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Ad(e,n).transform(this._srcGeom)},wd.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ad(t,n,!0).transform(this._srcGeom),r=i;return e&&ic(r,Pl)&&(r=i.buffer(0)),r},wd.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},wd.prototype.extractTargetCoordinates=function(t){for(var e=new Or,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},wd.prototype.computeMinimumSegmentLength=function(t){for(var e=Us.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},wd.prototype.interfaces_=function(){return[]},wd.prototype.getClass=function(){return wd},wd.snap=function(t,e,n){var i=new Array(2).fill(null),r=new wd(t);i[0]=r.snapTo(e,n);var o=new wd(e);return i[1]=o.snapTo(i[0],n),i},wd.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=wd.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Vl.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[1];return Math.min(wd.computeOverlaySnapTolerance(arguments[0]),wd.computeOverlaySnapTolerance(r))}},wd.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*wd.SNAP_PRECISION_FACTOR},wd.snapToSelf=function(t,e,n){return new wd(t).snapToSelf(e,n)},Id.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(wd,Id);var Ad=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new xd(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cd),Pd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Pd.prototype.getCommon=function(){return Us.longBitsToDouble(this._commonBits)},Pd.prototype.add=function(t){var e=Us.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Pd.signExpBits(this._commonBits),this._isFirst=!1,null):Pd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Pd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Pd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Pd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Us.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Us.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd},Pd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Pd.signExpBits=function(t){return t>>52},Pd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Pd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Pd.getBit(t,i)!==Pd.getBit(e,i))return n;n++}return 52};var Od=function(){this._commonCoord=null,this._ccFilter=new Sd},Md={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Od.prototype.addCommonBits=function(t){var e=new kd(this._commonCoord);t.apply(e),t.geometryChanged()},Od.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new qs(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new kd(e);return t.apply(n),t.geometryChanged(),t},Od.prototype.getCommonCoordinate=function(){return this._commonCoord},Od.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Od.prototype.interfaces_=function(){return[]},Od.prototype.getClass=function(){return Od},Md.CommonCoordinateFilter.get=function(){return Sd},Md.Translater.get=function(){return kd},Object.defineProperties(Od,Md);var Sd=function(){this._commonBitsX=new Pd,this._commonBitsY=new Pd};Sd.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Sd.prototype.getCommonCoordinate=function(){return new qs(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Sd.prototype.interfaces_=function(){return[zc]},Sd.prototype.getClass=function(){return Sd};var kd=function(){this.trans=null,this.trans=arguments[0]};kd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},kd.prototype.isDone=function(){return!1},kd.prototype.isGeometryChanged=function(){return!0},kd.prototype.interfaces_=function(){return[gl]},kd.prototype.getClass=function(){return kd};var Ed=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Ed.prototype.selfSnap=function(t){return new wd(t).snapTo(t,this._snapTolerance)},Ed.prototype.removeCommonBits=function(t){this._cbr=new Od,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Ed.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Ed.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Qd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Ed.prototype.checkValid=function(t){t.isValid()||vc.out.println("Snapped geometry is invalid")},Ed.prototype.computeSnapTolerance=function(){this._snapTolerance=wd.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ed.prototype.snap=function(t){var e=this.removeCommonBits(t);return wd.snap(e[0],e[1],this._snapTolerance)},Ed.prototype.interfaces_=function(){return[]},Ed.prototype.getClass=function(){return Ed},Ed.overlayOp=function(t,e,n){return new Ed(t,e).getResultGeometry(n)},Ed.union=function(t,e){return Ed.overlayOp(t,e,Qd.UNION)},Ed.intersection=function(t,e){return Ed.overlayOp(t,e,Qd.INTERSECTION)},Ed.symDifference=function(t,e){return Ed.overlayOp(t,e,Qd.SYMDIFFERENCE)},Ed.difference=function(t,e){return Ed.overlayOp(t,e,Qd.DIFFERENCE)};var Ld=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Ld.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Qd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Pc))throw t;i=t}if(!n)try{e=Ed.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Pc?i:t}return e},Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld},Ld.overlayOp=function(t,e,n){return new Ld(t,e).getResultGeometry(n)},Ld.union=function(t,e){return Ld.overlayOp(t,e,Qd.UNION)},Ld.intersection=function(t,e){return Ld.overlayOp(t,e,Qd.INTERSECTION)},Ld.symDifference=function(t,e){return Ld.overlayOp(t,e,Qd.SYMDIFFERENCE)},Ld.difference=function(t,e){return Ld.overlayOp(t,e,Qd.DIFFERENCE)};var Td=function(){this.mce=null,this.chainIndex=null;var t=arguments[1];this.mce=arguments[0],this.chainIndex=t};Td.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var Rd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},Nd={INSERT:{configurable:!0},DELETE:{configurable:!0}};Rd.prototype.isDelete=function(){return this._eventType===Rd.DELETE},Rd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Rd.prototype.getObject=function(){return this._obj},Rd.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Rd.prototype.getInsertEvent=function(){return this._insertEvent},Rd.prototype.isInsert=function(){return this._eventType===Rd.INSERT},Rd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Rd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Rd.prototype.interfaces_=function(){return[Ks]},Rd.prototype.getClass=function(){return Rd},Nd.INSERT.get=function(){return 1},Nd.DELETE.get=function(){return 2},Object.defineProperties(Rd,Nd);var Bd=function(){};Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd};var jd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e};jd.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(jd.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},jd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},jd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},jd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},jd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},jd.prototype.hasProperIntersection=function(){return this._hasProper},jd.prototype.hasIntersection=function(){return this._hasIntersection},jd.prototype.isDone=function(){return this._isDone},jd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},jd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},jd.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd},jd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Dd=function(t){function e(){t.call(this),this.events=new qc,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){Ou.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof jd&&ic(arguments[0],Yc)&&ic(arguments[1],Yc)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&ic(arguments[0],Yc)&&arguments[1]instanceof jd){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new Td(n,r),a=new Rd(e,n.getMinX(r),o);this.events.add(a),this.events.add(new Rd(n.getMaxX(r),a))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bd),Fd=function(){this._min=Us.POSITIVE_INFINITY,this._max=Us.NEGATIVE_INFINITY},zd={NodeComparator:{configurable:!0}};Fd.prototype.getMin=function(){return this._min},Fd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Fd.prototype.getMax=function(){return this._max},Fd.prototype.toString=function(){return Ac.toLineString(new qs(this._min,0),new qs(this._max,0))},Fd.prototype.interfaces_=function(){return[]},Fd.prototype.getClass=function(){return Fd},zd.NodeComparator.get=function(){return Vd},Object.defineProperties(Fd,zd);var Vd=function(){};Vd.prototype.compare=function(t,e){var n=(t._min+t._max)/2,i=(e._min+e._max)/2;return n<i?-1:n>i?1:0},Vd.prototype.interfaces_=function(){return[Ys]},Vd.prototype.getClass=function(){return Vd};var Gd=function(t){function e(){t.call(this),this._item=null;var e=arguments[1],n=arguments[2];this._min=arguments[0],this._max=e,this._item=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fd),Zd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[1];this._node1=arguments[0],this._node2=e,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fd),Wd=function(){this._leaves=new qc,this._root=null,this._level=0};Wd.prototype.buildTree=function(){Ou.sort(this._leaves,new Fd.NodeComparator);for(var t=this._leaves,e=null,n=new qc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Wd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Gd(t,e,n))},Wd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Wd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Wd.prototype.printNode=function(t){vc.out.println(Ac.toLineString(new qs(t._min,this._level),new qs(t._max,this._level)))},Wd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Wd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Zd(t.get(n),t.get(n+1));e.add(r)}}},Wd.prototype.interfaces_=function(){return[]},Wd.prototype.getClass=function(){return Wd};var Hd=function(){this._items=new qc};Hd.prototype.visitItem=function(t){this._items.add(t)},Hd.prototype.getItems=function(){return this._items},Hd.prototype.interfaces_=function(){return[wu]},Hd.prototype.getClass=function(){return Hd};var Ud=function(){this._index=null;var t=arguments[0];if(!ic(t,Pl))throw new Hs("Argument must be Polygonal");this._index=new Xd(t)},$d={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ud.prototype.locate=function(t){var e=new Tc(t),n=new Kd(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ud.prototype.interfaces_=function(){return[ph]},Ud.prototype.getClass=function(){return Ud},$d.SegmentVisitor.get=function(){return Kd},$d.IntervalIndexedGeometry.get=function(){return Xd},Object.defineProperties(Ud,$d);var Kd=function(){this._counter=null,this._counter=arguments[0]};Kd.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Kd.prototype.interfaces_=function(){return[wu]},Kd.prototype.getClass=function(){return Kd};var Xd=function(){this._index=new Wd,this.init(arguments[0])};Xd.prototype.init=function(t){for(var e=qh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Xd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Gu(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Xd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Hd;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},Xd.prototype.interfaces_=function(){return[]},Xd.prototype.getClass=function(){return Xd};var Yd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new zl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Jh,2===arguments.length){var e=arguments[1],n=Vc.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var i=arguments[1],r=arguments[2];this._argIndex=arguments[0],this._parentGeom=i,this._boundaryNodeRule=r,null!==i&&this.add(i)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Ql.ON)===ec.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[1],e=arguments[2],n=new jd(arguments[0],!0,!1);return n.setIsDoneIfProperInt(e),this.createEdgeSetIntersector().computeIntersections(this._edges,n,t||!(this._parentGeom instanceof Sl||this._parentGeom instanceof Ol||this._parentGeom instanceof kl)),this.addSelfIntersectionNodes(this._argIndex),n}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new jd(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Al){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,ec.INTERIOR)}else arguments[0]instanceof qs&&this.insertPoint(this._argIndex,arguments[0],ec.INTERIOR)},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),ec.EXTERIOR,ec.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,ec.INTERIOR,ec.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],ec.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],ec.BOUNDARY)},e.prototype.addLineString=function(t){var e=tl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Sh(e,new au(this._argIndex,ec.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Mc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===ec.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=tl.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;Rc.isCCW(i)&&(r=n,o=e);var a=new Sh(i,new au(this._argIndex,ec.BOUNDARY,r,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,i[0],ec.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new au(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Dd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof kl&&(this._useBoundaryDeterminationRule=!1),e instanceof Ol)this.addPolygon(e);else if(e instanceof wl)this.addLineString(e);else if(e instanceof Al)this.addPoint(e);else if(e instanceof Ml)this.addCollection(e);else if(e instanceof vl)this.addCollection(e);else if(e instanceof kl)this.addCollection(e);else{if(!(e instanceof ml))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return ic(this._parentGeom,Pl)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ud(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?ec.BOUNDARY:ec.INTERIOR},e}(yu),qd=function(){if(this._li=new Ec,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Yd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=Vc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yd(0,e,i),this._arg[1]=new Yd(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yd(0,r,a),this._arg[1]=new Yd(1,o,a)}};qd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},qd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},qd.prototype.interfaces_=function(){return[]},qd.prototype.getClass=function(){return qd};var Jd=function(){};Jd.prototype.interfaces_=function(){return[]},Jd.prototype.getClass=function(){return Jd},Jd.map=function(){if(arguments[0]instanceof jc&&ic(arguments[1],Jd.MapOp)){for(var t=arguments[0],e=arguments[1],n=new qc,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(ic(arguments[0],$c)&&ic(arguments[1],Jd.MapOp)){for(var o=arguments[0],a=arguments[1],s=new qc,c=o.iterator();c.hasNext();){var l=c.next(),u=a.map(l);null!==u&&s.add(u)}return s}},Jd.MapOp=function(){};var Qd=function(t){function e(){var e=arguments[0];t.call(this,e,arguments[1]),this._ptLocator=new Jh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new _h,this._resultPolyList=new qc,this._resultLineList=new qc,this._resultPointList=new qc,this._graph=new yu(new yh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new au(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new qc;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==ec.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new qc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new qc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),vd.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new bu(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new bd(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new _d(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ql.RIGHT),r.getLocation(1,Ql.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(Mc.isTrue(!i.isNull(r,Ql.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ql.LEFT,i.getLocation(r,Ql.LEFT)),Mc.isTrue(!i.isNull(r,Ql.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ql.RIGHT,i.getLocation(r,Ql.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qd);Qd.overlayOp=function(t,e,n){return new Qd(t,e).getResultGeometry(n)},Qd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Qd.createEmptyResult(Qd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return yd.map(t,{interfaces_:function(){return[Jd.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ld.overlayOp(t,e,Qd.INTERSECTION)},Qd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Qd.createEmptyResult(Qd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ld.overlayOp(t,e,Qd.SYMDIFFERENCE)},Qd.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Qd.INTERSECTION:o=Math.min(i,r);break;case Qd.UNION:o=Math.max(i,r);break;case Qd.DIFFERENCE:o=i;break;case Qd.SYMDIFFERENCE:o=Math.max(i,r)}return o},Qd.createEmptyResult=function(t,e,n,i){var r=null;switch(Qd.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Qd.difference=function(t,e){return t.isEmpty()?Qd.createEmptyResult(Qd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ld.overlayOp(t,e,Qd.DIFFERENCE))},Qd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Qd.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1];switch(r===ec.BOUNDARY&&(r=ec.INTERIOR),o===ec.BOUNDARY&&(o=ec.INTERIOR),arguments[2]){case Qd.INTERSECTION:return r===ec.INTERIOR&&o===ec.INTERIOR;case Qd.UNION:return r===ec.INTERIOR||o===ec.INTERIOR;case Qd.DIFFERENCE:return r===ec.INTERIOR&&o!==ec.INTERIOR;case Qd.SYMDIFFERENCE:return r===ec.INTERIOR&&o!==ec.INTERIOR||r!==ec.INTERIOR&&o===ec.INTERIOR}return!1}},Qd.INTERSECTION=1,Qd.UNION=2,Qd.DIFFERENCE=3,Qd.SYMDIFFERENCE=4;var tp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Jh,this._seg=new Gu;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};tp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},tp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?ec.BOUNDARY:this._ptLocator.locate(t,this._g)},tp.prototype.extractLinework=function(t){var e=new ep;t.apply(e);var n=e.getLinework(),i=Hl.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){this._linework=null,this._linework=new qc};ep.prototype.getLinework=function(){return this._linework},ep.prototype.filter=function(t){if(t instanceof Ol){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},ep.prototype.interfaces_=function(){return[fl]},ep.prototype.getClass=function(){return ep};var np=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};np.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},np.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},np.prototype.getPoints=function(t){for(var e=new qc,n=qh.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},np.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),s=n*r/a,c=n*o/a,l=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var h=new qs(l-c,u+s);i.add(h)}if(this._doRight){var d=new qs(l+c,u-s);i.add(d)}},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new qc;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new tp(this._geom[0],this._boundaryDistanceTolerance),new tp(this._geom[1],this._boundaryDistanceTolerance),new tp(this._geom[2],this._boundaryDistanceTolerance)]},rp={TOLERANCE:{configurable:!0}};ip.prototype.reportResult=function(t,e,n){vc.out.println("Overlay result invalid - A:"+ec.toLocationSymbol(e[0])+" B:"+ec.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+ec.toLocationSymbol(e[2]))},ip.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},ip.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!ip.hasLocation(this._location,ec.BOUNDARY)||this.isValidResult(i,this._location)}},ip.prototype.addTestPts=function(t){var e=new np(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},ip.prototype.isValidResult=function(t,e){var n=Qd.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===ec.INTERIOR);return i||this.reportResult(t,e,n),i},ip.prototype.getInvalidLocation=function(){return this._invalidLocation},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},ip.computeBoundaryDistanceTolerance=function(t,e){return Math.min(wd.computeSizeBasedSnapTolerance(t),wd.computeSizeBasedSnapTolerance(e))},ip.isValid=function(t,e,n,i){return new ip(t,e,i).isValid(n)},rp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(ip,rp);var op=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};op.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},op.prototype.combine=function(){for(var t=new qc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.combine=function(){return 1===arguments.length?new op(arguments[0]).combine():2===arguments.length?new op(op.createList(arguments[0],arguments[1])).combine():3===arguments.length?new op(op.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},op.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},op.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new qc;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new qc;return a.add(i),a.add(r),a.add(o),a}};var ap=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new qc)},sp={STRTREE_NODE_CAPACITY:{configurable:!0}};ap.prototype.reduceToGeometries=function(t){for(var e=new qc,n=t.iterator();n.hasNext();){var i=n.next(),r=null;ic(i,Yc)?r=this.unionTree(i):i instanceof jc&&(r=i),e.add(r)}return e},ap.prototype.extractByEnvelope=function(t,e,n){for(var i=new qc,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},ap.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return op.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},ap.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Tu(ap.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},ap.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=ap.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(ap.getGeometry(e,n),ap.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(a,s)}},ap.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},ap.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},ap.prototype.unionActual=function(t,e){return ap.restrictToPolygons(t.union(e))},ap.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},ap.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new qc,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),op.combine(i)},ap.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.restrictToPolygons=function(t){if(ic(t,Pl))return t;var e=Yh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Hl.toPolygonArray(e))},ap.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},ap.union=function(t){return new ap(t).union()},sp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ap,sp);var cp=function(){};cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Qd.createEmptyResult(Qd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ld.overlayOp(t,e,Qd.UNION)};var lp=function(){return new Lr};Lr.prototype={constructor:Lr,reset:function(){this.s=this.t=0},add:function(t){Tr(up,t,this.t),Tr(this,up.s,this.s),this.s?this.t+=up.t:this.s=up.t},valueOf:function(){return this.s}};var up=new Lr,hp=1e-6,dp=Math.PI,pp=dp/2,fp=dp/4,gp=2*dp,mp=180/dp,vp=dp/180,yp=Math.abs,bp=Math.atan,_p=Math.atan2,Cp=Math.cos,xp=Math.exp,wp=Math.log,Ip=Math.sin,Ap=Math.sqrt,Pp=Math.tan,Op={Feature:function(t,e){Br(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Br(n[i].geometry,e)}},Mp={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){jr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)jr(n[i],e,0)},Polygon:function(t,e){Dr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Dr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Br(n[i],e)}},Sp=function(t,e){t&&Op.hasOwnProperty(t.type)?Op[t.type](t,e):Br(t,e)},kp=(lp(),lp(),lp(),function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n});Ur.invert=Ur;var Ep=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Nr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Lp=function(t,e,n,i,r,o){var a,s=t[0],c=t[1],l=0,u=1,h=e[0]-s,d=e[1]-c;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>l&&(l=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<u&&(u=a)}if(a=i-c,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>l&&(l=a)}if(a=o-c,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<u&&(u=a)}return l>0&&(t[0]=s+l*h,t[1]=c+l*d),u<1&&(e[0]=s+u*h,e[1]=c+u*d),!0}}}}},Tp=function(t,e){return yp(t[0]-e[0])<hp&&yp(t[1]-e[1])<hp},Rp=function(t,e,n,i,r){var o,a,s=[],c=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(Tp(i,a)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else s.push(n=new Jr(i,t,null,!0)),c.push(n.o=new Jr(i,null,n,!1)),s.push(n=new Jr(a,t,null,!1)),c.push(n.o=new Jr(a,null,n,!0))}})),s.length){for(c.sort(e),Qr(s),Qr(c),o=0,a=c.length;o<a;++o)c[o].e=n=!n;for(var l,u,h=s[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;l=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,a=l.length;o<a;++o)r.point((u=l[o])[0],u[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(o=(l=d.p.z).length-1;o>=0;--o)r.point((u=l[o])[0],u[1]);else i(d.x,d.p.x,-1,r);d=d.p}l=(d=d.o).z,p=!p}while(!d.v);r.lineEnd()}}},Np=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Bp=(function(t){1===t.length&&(t=function(t){return function(e,n){return Np(t(e),n)}}(t))}(Np),function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n}),jp=1e9,Dp=-jp,Fp=lp(),zp=(lp(),function(t){return t}),Vp=(lp(),lp(),1/0),Gp=Vp,Zp=-Vp,Wp=Zp,Hp={point:function(t,e){t<Vp&&(Vp=t),t>Zp&&(Zp=t),e<Gp&&(Gp=e),e>Wp&&(Wp=e)},lineStart:Nr,lineEnd:Nr,polygonStart:Nr,polygonEnd:Nr,result:function(){var t=[[Vp,Gp],[Zp,Wp]];return Zp=Wp=-(Gp=Vp=1/0),t}},Up=(lp(),function(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function c(){C.point=s,m.lineStart()}function l(){C.point=a,m.lineEnd()}function u(t,e){g.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),g=[]}function d(){u(g[0][0],g[0][1]),b.lineEnd();var t,e,n,i,r=b.clean(),a=y.result(),s=a.length;if(g.pop(),p.push(g),g=null,s)if(1&r){if((e=(n=a[0]).length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else s>1&&2&r&&a.push(a.pop().concat(a.shift())),f.push(a.filter(eo))}var p,f,g,m=e(o),v=r.invert(i[0],i[1]),y=Ep(),b=e(y),_=!1,C={point:a,lineStart:c,lineEnd:l,polygonStart:function(){C.point=u,C.lineStart=h,C.lineEnd=d,f=[],p=[]},polygonEnd:function(){C.point=a,C.lineStart=c,C.lineEnd=l,f=Bp(f);var t=function(t,e){var n=e[0],i=e[1],r=[Ip(n),-Cp(n),0],o=0,a=0;Fp.reset();for(var s=0,c=t.length;s<c;++s)if(u=(l=t[s]).length)for(var l,u,h=l[u-1],d=h[0],p=h[1]/2+fp,f=Ip(p),g=Cp(p),m=0;m<u;++m,d=y,f=_,g=C,h=v){var v=l[m],y=v[0],b=v[1]/2+fp,_=Ip(b),C=Cp(b),x=y-d,w=x>=0?1:-1,I=w*x,A=I>dp,P=f*_;if(Fp.add(_p(P*w*Ip(I),g*C+P*Cp(I))),o+=A?x+w*gp:x,A^d>=n^y>=n){var O=Gr(zr(h),zr(v));Hr(O);var M=Gr(r,O);Hr(M);var S=(A^x>=0?-1:1)*Rr(M[2]);(i>S||i===S&&(O[0]||O[1]))&&(a+=A^x>=0?1:-1)}}return(o<-hp||o<hp&&Fp<-hp)^1&a}(p,v);f.length?(_||(o.polygonStart(),_=!0),Rp(f,no,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),f=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return C}}),$p=Up((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?dp:-dp,c=yp(o-n);yp(c-dp)<hp?(t.point(n,i=(i+a)/2>0?pp:-pp),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&c>=dp&&(yp(n-r)<hp&&(n-=r*hp),yp(o-s)<hp&&(o-=s*hp),i=function(t,e,n,i){var r,o,a=Ip(t-n);return yp(a)>hp?bp((Ip(e)*(o=Cp(i))*Ip(n)-Ip(i)*(r=Cp(e))*Ip(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)i.point(-dp,r=n*pp),i.point(0,r),i.point(dp,r),i.point(dp,0),i.point(dp,-r),i.point(0,-r),i.point(-dp,-r),i.point(-dp,0),i.point(-dp,r);else if(yp(t[0]-e[0])>hp){var o=t[0]<e[0]?dp:-dp;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-dp,-pp]),Kp=function(t,e){function n(t,e){return Cp(t)*Cp(e)>o}function i(t,e,n){var i=[1,0,0],r=Gr(zr(t),zr(e)),a=Vr(r,r),s=r[0],c=a-s*s;if(!c)return!n&&t;var l=o*a/c,u=-o*s/c,h=Gr(i,r),d=Wr(i,l);Zr(d,Wr(r,u));var p=h,f=Vr(d,p),g=Vr(p,p),m=f*f-g*(Vr(d,d)-1);if(!(m<0)){var v=Ap(m),y=Wr(p,(-f-v)/g);if(Zr(y,d),y=Fr(y),!n)return y;var b,_=t[0],C=e[0],x=t[1],w=e[1];C<_&&(b=_,_=C,C=b);var I=C-_,A=yp(I-dp)<hp;if(!A&&w<x&&(b=x,x=w,w=b),A||I<hp?A?x+w>0^y[1]<(yp(y[0]-_)<hp?x:w):x<=y[1]&&y[1]<=w:I>dp^(_<=y[0]&&y[0]<=C)){var P=Wr(p,(-f+v)/g);return Zr(P,d),[y,Fr(P)]}}}function r(e,n){var i=a?t:dp-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=Cp(t),a=o>0,s=yp(o)>hp;return Up(n,(function(t){var e,o,c,l,u;return{lineStart:function(){l=c=!1,u=1},point:function(h,d){var p,f=[h,d],g=n(h,d),m=a?g?0:r(h,d):g?r(h+(h<0?dp:-dp),d):0;if(!e&&(l=c=g)&&t.lineStart(),g!==c&&(!(p=i(e,f))||Tp(e,p)||Tp(f,p))&&(f[0]+=hp,f[1]+=hp,g=n(f[0],f[1])),g!==c)u=0,g?(t.lineStart(),p=i(f,e),t.point(p[0],p[1])):(p=i(e,f),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(s&&e&&a^g){var v;m&o||!(v=i(f,e,!0))||(u=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Tp(e,f)||t.point(f[0],f[1]),e=f,c=g,o=m},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return u|(l&&c)<<1}}}),(function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var a=Cp(e),s=Ip(e),c=i*n;null==r?(r=e+i*gp,o=e-c/2):(r=qr(a,r),o=qr(a,o),(i>0?r<o:r>o)&&(r+=i*gp));for(var l,u=r;i>0?u>o:u<o;u-=c)l=Fr([a,-s*Cp(u),-s*Ip(u)]),t.point(l[0],l[1])}}(o,t,e,r,n,i)}),a?[0,-t]:[-dp,t-dp])};ro.prototype={constructor:ro,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Xp=Cp(30*vp),Yp=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,c,l,u,h,d,p,f,g,m){var v=l-i,y=u-r,b=v*v+y*y;if(b>4*e&&g--){var _=a+d,C=s+p,x=c+f,w=Ap(_*_+C*C+x*x),I=Rr(x/=w),A=yp(yp(x)-1)<hp||yp(o-h)<hp?(o+h)/2:_p(C,_),P=t(A,I),O=P[0],M=P[1],S=O-i,k=M-r,E=y*S-v*k;(E*E/b>e||yp((v*S+y*k)/b-.5)>.3||a*d+s*p+c*f<Xp)&&(n(i,r,o,a,s,c,O,M,A,_/=w,C/=w,x,g,m),m.point(O,M),n(O,M,A,_,C,x,l,u,h,d,p,f,g,m))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){v=NaN,x.point=o,e.lineStart()}function o(i,r){var o=zr([i,r]),a=t(i,r);n(v,y,m,b,_,C,v=a[0],y=a[1],m=i,b=o[0],_=o[1],C=o[2],16,e),e.point(v,y)}function a(){x.point=i,e.lineEnd()}function s(){r(),x.point=c,x.lineEnd=l}function c(t,e){o(u=t,e),h=v,d=y,p=b,f=_,g=C,x.point=o}function l(){n(v,y,m,b,_,C,h,d,u,p,f,g,16,e),x.lineEnd=a,a()}var u,h,d,p,f,g,m,v,y,b,_,C,x={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),x.lineStart=s},polygonEnd:function(){e.polygonEnd(),x.lineStart=r}};return x}}(t,e):function(t){return io({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},qp=io({point:function(t,e){this.stream.point(t*vp,e*vp)}});ao.invert=function(t,e){return[t,2*bp(xp(e))-pp]},so.invert=function(t,e){return[-e,2*bp(xp(t))-pp]};var Jp=function(){var t=function(t){function e(){var e=dp*s(),a=o(function(t){function e(e){return(e=t(e[0]*vp,e[1]*vp))[0]*=mp,e[1]*=mp,e}return t=$r(t[0]*vp,t[1]*vp,t.length>2?t[2]*vp:0),e.invert=function(e){return(e=t.invert(e[0]*vp,e[1]*vp))[0]*=mp,e[1]*=mp,e},e}(o.rotate()).invert([0,0]));return l(null==u?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===ao?[[Math.max(a[0]-e,u),n],[Math.min(a[0]+e,i),r]]:[[u,Math.max(a[1]-e,n)],[i,Math.min(a[1]+e,r)]])}var n,i,r,o=function(t){return function(t){function e(t){return[(t=l(t[0]*vp,t[1]*vp))[0]*g+a,s-t[1]*g]}function n(t,e){return[(t=o(t,e))[0]*g+a,s-t[1]*g]}function i(){l=kp(c=$r(_,C,x),o);var t=o(y,b);return a=m-t[0]*g,s=v+t[1]*g,r()}function r(){return p=f=null,e}var o,a,s,c,l,u,h,d,p,f,g=150,m=480,v=250,y=0,b=0,_=0,C=0,x=0,w=null,I=$p,A=null,P=zp,O=.5,M=Yp(n,O);return e.stream=function(t){return p&&f===t?p:p=qp(I(c,M(P(f=t))))},e.clipAngle=function(t){return arguments.length?(I=+t?Kp(w=t*vp,6*vp):(w=null,$p),r()):w*mp},e.clipExtent=function(t){return arguments.length?(P=null==t?(A=u=h=d=null,zp):to(A=+t[0][0],u=+t[0][1],h=+t[1][0],d=+t[1][1]),r()):null==A?null:[[A,u],[h,d]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],i()):[m,v]},e.center=function(t){return arguments.length?(y=t[0]%360*vp,b=t[1]%360*vp,i()):[y*mp,b*mp]},e.rotate=function(t){return arguments.length?(_=t[0]%360*vp,C=t[1]%360*vp,x=t.length>2?t[2]%360*vp:0,i()):[_*mp,C*mp,x*mp]},e.precision=function(t){return arguments.length?(M=Yp(n,O=t*t),r()):Ap(O)},e.fitExtent=function(t,n){return oo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return oo(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*mp,t[1]*mp]},i()}}((function(){return t}))()}(t),a=o.center,s=o.scale,c=o.translate,l=o.clipExtent,u=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(c(t),e()):c()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?u=n=i=r=null:(u=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==u?null:[[u,n],[i,r]]},e()}(so),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=sa,t.random=Gs,t.clusters=Zs,t.helpers=Ao,t.invariant=Oo,t.meta=Po,t.isolines=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;K(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return E(t,(function(t){var e=W(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return W(t)[0]-W(e)[0]}))})).sort((function(t,n){return e?W(t[0])[1]-W(n[0])[1]:W(n[0])[1]-W(t[0])[1]}))}(t,i),a=[],s=0;s<o.length;s++){for(var c=o[s],l=[],u=0;u<c.length;u++){var h=c[u];l.push(h.properties[n]?h.properties[n]:0),!0===r&&(h.properties.matrixPosition=[s,u])}a.push(l)}return a}(t,{zProperty:i,flip:!0});return l(function(t,e,n){var i=G(n),r=i[0],o=i[1],a=(i[2]-i[0])/(e[0].length-1),s=(i[3]-i[1])/(e.length-1),c=function(t){t[0]=t[0]*a+r,t[1]=t[1]*s+o};return t.forEach((function(t){O(t,c)})),t}(function(t,e,n,i,r){for(var o=[],a=1;a<e.length;a++){var s=+e[a],c=Object.assign({},i,r[a]);c[n]=s;var l=u(J(t,s),c);o.push(l)}return o}(a,e,i,r,o),a,t))},t.convex=Ot,t.pointsWithinPolygon=kt,t.concave=function(t,n){if(!I(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var i=n.maxEdge||1/0;if(!w(i))throw new Error("maxEdge is invalid");var r=Et(function(t){var e=[],n={};return E(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");n.hasOwnProperty(i)||(e.push(t),n[i]=!0)}})),l(e)}(t));if(r.features=r.features.filter((function(t){var e=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Nt(e,r,n),s=Nt(r,o,n),c=Nt(e,o,n);return a<=i&&s<=i&&c<=i})),r.features.length<1)return null;var o=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Bt(t));var i=function(t){var e={};B(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");switch(i){case"LineString":return function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Bt(t));var i=[],r=V(t,(function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=$t(i[0]),a=$t(i[i.length-1]),c=$t(r[0]),l=$t(r[r.length-1]);if(o===l)n=r.concat(i.slice(1));else if(c===a)n=i.concat(r.slice(1));else if(o===c)n=i.slice(1).reverse().concat(r);else{if(a!==l)return null;n=i.concat(r.reverse().slice(1))}return s(n)}(t,e)||(i.push(t),e)}));return r&&i.push(r),i.length?1===i.length?i[0]:u(i.map((function(t){return t.coordinates}))):null}(t,e);case"Polygon":return function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Bt(t));var i=[];B(t,(function(t){i.push(t.geometry)}));var r=ia({geoms:p(i).geometry});return Yo(r,r.objects.geoms.geometries)}(t,e);default:throw new Error(i+" is not supported")}}(r,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,i){var r=Eo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return r.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=G(t),n=[];r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Mt([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[i]=n})),t},t.flip=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Bt(t)),O(t,(function(t){var e=t[0];t[0]=t[1],t[1]=e})),t},t.simplify=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=Bt(t)),R(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;Kt(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=Qt(r,e,n);break;case"MultiLineString":t.coordinates=r.map((function(t){return Qt(t,e,n)}));break;case"Polygon":t.coordinates=te(r,e,n);break;case"MultiPolygon":t.coordinates=r.map((function(t){return te(t,e,n)}))}}(t,n,i)})),t},t.bezierSpline=ee,t.tag=function(t,e,n,i){return t=Bt(t),e=Bt(e),E(t,(function(t){t.properties||(t.properties={}),E(e,(function(e){void 0===t.properties[i]&&Mt(t,e)&&(t.properties[i]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var n,i,r=t.slice(0),o=t.length,a=o-e;o-- >a;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(a)}(t.features,e))},t.envelope=ie,t.square=re,t.circle=ae,t.midpoint=function(t,e){return oe(t,Nt(t,e)/2,se(t,e))},t.center=ce,t.centerOfMass=function t(e,n){switch(q(e)){case"Point":return e;case"Polygon":var r=[];O(e,(function(t){r.push(t)}));var o,a,s,c,l,u,h,d,p=le(e,n),f=p.geometry.coordinates,g=0,m=0,v=0,y=r.map((function(t){return[t[0]-f[0],t[1]-f[1]]}));for(o=0;o<r.length-1;o++)c=(a=y[o])[0],l=(s=y[o+1])[0],v+=d=c*(h=s[1])-l*(u=a[1]),g+=(c+l)*d,m+=(u+h)*d;if(0===v)return p;var b=1/(.5*v*6);return i([f[0]+b*g,f[1]+b*m],n);default:var _=Ot(e);return _?t(_,n):le(e,n)}},t.centroid=le,t.combine=function(t){function n(t,e,n){n?i[e].coordinates=i[e].coordinates.concat(t.geometry.coordinates):i[e].coordinates.push(t.geometry.coordinates),i[e].properties.push(t.properties)}var i={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},r=Object.keys(i).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return E(t,(function(t){t.geometry&&(i[t.geometry.type]?n(t,t.geometry.type,!0):r[t.geometry.type]&&n(t,r[t.geometry.type],!1))})),l(Object.keys(i).filter((function(t){return i[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:i[t].coordinates},{collectedProperties:i[t].properties})})))},t.distance=Nt,t.explode=ue,t.bbox=G,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Pe(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Pe(t))})),e},t.bboxPolygon=ne,t.booleanPointInPolygon=Mt,t.nearestPoint=Oe,t.nearestPointOnLine=Ke,t.nearestPointToLine=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return R(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==q(e))throw new Error("line must be a LineString");var o=1/0,a=null;return E(t,(function(t){var n=rn(t,e,{units:i});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,r)),a},t.planepoint=function(t,e){var n=Z(t),i=X(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,a=r.b,s=r.c,c=n[0],l=n[1],u=i[0][0],h=i[0][1],d=void 0!==o?o:i[0][2],p=i[1][0],f=i[1][1],g=void 0!==a?a:i[1][2],m=i[2][0],v=i[2][1],y=void 0!==s?s:i[2][2];return(y*(c-u)*(l-f)+d*(c-p)*(l-v)+g*(c-m)*(l-h)-g*(c-u)*(l-v)-y*(c-p)*(l-h)-d*(c-m)*(l-f))/((c-u)*(l-f)+(c-p)*(l-v)+(c-m)*(l-h)-(c-u)*(l-v)-(c-p)*(l-h)-(c-m)*(l-f))},t.tin=Et,t.bearing=se,t.destination=oe,t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,i,r,o,a,s){var c,l,u,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(c=(s-o)*(n-t)-(a-r)*(i-e))?null!==d.x&&null!==d.y&&d:(h=(a-r)*(l=e-o)-(s-o)*(u=t-r),u=((n-t)*l-(i-e)*u)/c,d.x=t+(l=h/c)*(n-t),d.y=e+l*(i-e),l>=0&&l<=1&&(d.onLine1=!0),u>=0&&u<=1&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&r.features.push(i([a[0],a[1]]))}}))})),r},t.pointOnFeature=an,t.area=cn,t.along=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!w(e))throw new Error("distance must be a number");for(var o=0,a=0;a<r.length&&!(e>=o&&a===r.length-1);a++){if(o>=e){var s=e-o;if(s){var c=se(r[a],r[a-1])-180;return oe(r[a],s,c,n)}return i(r[a])}o+=Nt(r[a],r[a+1],n)}return i(r[r.length-1])},t.length=dn,t.lineSlice=function(t,e,n){var i=W(n);if("LineString"!==q(n))throw new Error("line must be a LineString");for(var r,o=Ke(n,t),a=Ke(n,e),c=[(r=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=r[0].properties.index+1;l<r[1].properties.index+1;l++)c.push(i[l]);return c.push(r[1].geometry.coordinates),s(c,n.properties)},t.lineSliceAlong=pn,t.pointGrid=yn,t.truncate=bn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){e.push(t)})),l(e)},t.lineIntersect=Ue,t.lineChunk=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return B(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=dn(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)i(pn(t,e*a,e*(a+1),{units:n}))}(t,e,i,(function(t){o.push(t)}))})),l(o)},t.unkinkPolygon=function(t){var e=[];return B(t,(function(t){"Polygon"===t.geometry.type&&E(function(t){function e(){for(var t=[],e=0;e<f.features.length;e++)-1==f.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<f.features.length;i++)t[e]!=i&&Mt(f.features[t[e]].geometry.coordinates[0][0],f.features[i],{ignoreBoundary:!0})&&cn(f.features[i])<1/0&&(n=i);f.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<f.features.length;t++)if(-1==f.features[t].properties.parent){var e=f.features[t].properties.winding;f.features[t].properties.netWinding=e,i(t,e)}}function i(t,e){for(var n=0;n<f.features.length;n++)if(f.features[n].properties.parent==t){var r=e+f.features[n].properties.winding;f.features[n].properties.netWinding=r,i(n,r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,a=[],s=0;s<r;s++){var c=t.geometry.coordinates[s];xn(c[0],c[c.length-1])||c.push(c[0]),a.push.apply(a,c.slice(0,c.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(e.hasOwnProperty(t[i])){n=0;break}e[t[i]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var u=a.length,h=function(t,e,n){function i(t,n,i,r){var c,l,u=o[t][n],h=o[t][n+1],d=o[i][r],p=o[i][r+1],f=function(t,e,n,i){if(_n(t,n)||_n(t,i)||_n(e,n)||_n(i,n))return null;var r=t[0],o=t[1],a=e[0],s=e[1],c=n[0],l=n[1],u=i[0],h=i[1],d=(r-a)*(l-h)-(o-s)*(c-u);return 0===d?null:[((r*s-o*a)*(c-u)-(r-a)*(c*h-l*u))/d,((r*s-o*a)*(l-h)-(o-s)*(c*h-l*u))/d]}(u,h,d,p);if(null!==f&&(l=p[0]!==d[0]?(f[0]-d[0])/(p[0]-d[0]):(f[1]-d[1])/(p[1]-d[1]),!((c=h[0]!==u[0]?(f[0]-u[0])/(h[0]-u[0]):(f[1]-u[1])/(h[1]-u[1]))>=1||c<=0||l>=1||l<=0))){var g=!s[f];g&&(s[f]=!0),a.push(e?e(f,t,n,u,h,c,i,r,d,p,l,g):f)}}function r(t,e){var n,i,r,a,s=o[t][e],c=o[t][e+1];return s[0]<c[0]?(n=s[0],i=c[0]):(n=c[0],i=s[0]),s[1]<c[1]?(r=s[1],a=c[1]):(r=c[1],a=s[1]),{minX:n,minY:r,maxX:i,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var c=[],l=0;l<o.length;l++)for(var u=0;u<o[l].length-1;u++)c.push(r(l,u));var h=Eo();h.load(c)}for(var d=0;d<o.length;d++)for(var p=0;p<o[d].length-1;p++)if(n)h.search(r(d,p)).forEach((function(t){i(d,p,t.ring,t.edge)}));else for(var f=0;f<o.length;f++)for(var g=0;g<o[f].length-1;g++)i(d,p,f,g);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a}(t,(function(t,e,n,i,r,o,a,s,c,l,u,h){return[t,e,n,i,r,o,a,s,c,l,u,h]})),d=h.length;if(0==d){var p=[];for(s=0;s<r;s++)p.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Cn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var i=1;else i=-1;return i}(t.geometry.coordinates[s])}));var f=l(p);return e(),n(),f}var g=[],m=[];for(s=0;s<r;s++){g.push([]);for(var v=0;v<t.geometry.coordinates[s].length-1;v++)g[s].push([new la(t.geometry.coordinates[s][(v+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,v],[s,(v+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),m.push(new ua(t.geometry.coordinates[s][v],[s,(v-1).modulo(t.geometry.coordinates[s].length-1)],[s,v],void 0,void 0,!1,!0))}for(s=0;s<d;s++)g[h[s][1]][h[s][2]].push(new la(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&m.push(new ua(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var y=m.length;for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)g[s][v].sort((function(t,e){return t.param<e.param?-1:1}));var b=[];for(s=0;s<y;s++)b.push({minX:m[s].coord[0],minY:m[s].coord[1],maxX:m[s].coord[0],maxY:m[s].coord[1],index:s});var _=Eo();for(_.load(b),s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(var C=0;C<g[s][v].length;C++){w=C==g[s][v].length-1?g[s][(v+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:g[s][v][C+1].coord;var x=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];g[s][v][C].nxtIsectAlongEdgeIn=x.index}for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(C=0;C<g[s][v].length;C++){var w=g[s][v][C].coord,I=(x=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0]).index;I<u?m[I].nxtIsectAlongRingAndEdge2=g[s][v][C].nxtIsectAlongEdgeIn:xn(m[I].ringAndEdge1,g[s][v][C].ringAndEdgeIn)?m[I].nxtIsectAlongRingAndEdge1=g[s][v][C].nxtIsectAlongEdgeIn:m[I].nxtIsectAlongRingAndEdge2=g[s][v][C].nxtIsectAlongEdgeIn}var A=[];for(s=0,v=0;v<r;v++){var P=s;for(C=0;C<t.geometry.coordinates[v].length-1;C++)m[s].coord[0]<m[P].coord[0]&&(P=s),s++;var O=m[P].nxtIsectAlongRingAndEdge2;for(C=0;C<m.length;C++)if(m[C].nxtIsectAlongRingAndEdge1==P||m[C].nxtIsectAlongRingAndEdge2==P){var M=C;break}var S=Cn([m[M].coord,m[P].coord,m[O].coord],!0)?1:-1;A.push({isect:P,parent:-1,winding:S})}for(A.sort((function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1})),p=[];A.length>0;){var k=A.pop(),E=k.isect,L=k.parent,T=k.winding,R=p.length,N=[m[E].coord],B=E;if(m[E].ringAndEdge1Walkable)var j=m[E].ringAndEdge1,D=m[E].nxtIsectAlongRingAndEdge1;else j=m[E].ringAndEdge2,D=m[E].nxtIsectAlongRingAndEdge2;for(;!xn(m[E].coord,m[D].coord);){N.push(m[D].coord);var F=void 0;for(s=0;s<A.length;s++)if(A[s].isect==D){F=s;break}if(null!=F&&A.splice(F,1),xn(j,m[D].ringAndEdge1)){if(j=m[D].ringAndEdge2,m[D].ringAndEdge2Walkable=!1,m[D].ringAndEdge1Walkable){var z={isect:D};Cn([m[B].coord,m[D].coord,m[m[D].nxtIsectAlongRingAndEdge2].coord],1==T)?(z.parent=L,z.winding=-T):(z.parent=R,z.winding=T),A.push(z)}B=D,D=m[D].nxtIsectAlongRingAndEdge2}else j=m[D].ringAndEdge1,m[D].ringAndEdge1Walkable=!1,m[D].ringAndEdge2Walkable&&(z={isect:D},Cn([m[B].coord,m[D].coord,m[m[D].nxtIsectAlongRingAndEdge1].coord],1==T)?(z.parent=L,z.winding=-T):(z.parent=R,z.winding=T),A.push(z)),B=D,D=m[D].nxtIsectAlongRingAndEdge1}N.push(m[D].coord),p.push(o([N],{index:R,parent:L,winding:T,netWinding:void 0}))}return f=l(p),e(),n(),f}(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),l(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=Z(t),e=Z(e),r=r||100,o=o||10,new ma({x:t[0],y:t[1]},{x:e[0],y:e[1]},i=i||{}).Arc(r,{offset:o}).json()},t.lineSegment=He,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=q(t),i=q(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=bn(e,{precision:7});switch(i){case"Point":return In(t,r);case"MultiPoint":return wn(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(t,Ue(t,r))}},t.lineArc=On,t.polygonToLine=Sn,t.lineToPolygon=En,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),i=W(t),r=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(i=[i]),i.forEach((function(t){va(t,e,a)})),1===a.length?s(a[0],r):u(a,r);case"Polygon":return o(jn(i,e),r);case"MultiPolygon":return d(i.map((function(t){return jn(t,e)})),r);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Gn,t.sector=function(t,e,n,i,r){if(!I(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(Wn(n)===Wn(i))return ae(t,e,r);var a=W(t),s=[[a]];return O(On(t,e,n,i,r),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=Xe,t.rhumbDistance=qe,t.rhumbDestination=Hn,t.polygonTangents=function(t,e){var n,r,o,a=W(t),s=W(e);switch(q(e)){case"Polygon":n=s[0][0],r=s[0][0],o=$n(s[0][0],s[0][s[0].length-1],a);var c=Un(s[0],a,o,void 0,n,r);n=c[0],r=c[1];break;case"MultiPolygon":n=s[0][0][0],r=s[0][0][0],o=$n(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=Un(t[0],a,o,void 0,n,r);n=e[0],r=e[1]}))}return l([i(n),i(r)])},t.rewind=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Bt(t));var r=[];switch(t.type){case"GeometryCollection":return R(t,(function(t){Xn(t,n)})),t;case"FeatureCollection":return E(t,(function(t){E(Xn(t,n),(function(t){r.push(t)}))})),l(r)}return Xn(t,n)},t.isobands=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},a=n.breaksProperties||[];if(K(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;K(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return E(t,(function(t){var e=W(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return W(t)[0]-W(e)[0]}))})).sort((function(t,n){return e?W(t[0])[1]-W(n[0])[1]:W(n[0])[1]-W(t[0])[1]}))}(t,i),a=[],s=0;s<o.length;s++){for(var c=o[s],l=[],u=0;u<c.length;u++){var h=c[u];l.push(h.properties[n]?h.properties[n]:0),!0===r&&(h.properties.matrixPosition=[s,u])}a.push(l)}return a}(t,{zProperty:i,flip:!0}),c=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var a=+e[r-1],s=+e[r],c=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var a=o([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||function(t,e){for(var n=ue(t),i=0;i<n.features.length;i++)if(!Mt(n.features[i],e))return!1;return!0}(o([e[s].lrCoordinates]),a)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}(function(t){var e=[],n=[];t.forEach((function(t){var i=cn(o([t]));n.push(i),e.push({ring:t,area:i})})),n.sort((function(t,e){return e-t}));var i=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}})),i}(Jn(t,a,s-a))),l={};l.groupedRings=c,l[n]=a+"-"+s,i.push(l)}return i}(s,e,i);return l((c=function(t,e,n){var i=G(n),r=i[0],o=i[1],a=(i[2]-i[0])/(e[0].length-1),s=(i[3]-i[1])/(e.length-1),c=function(t){t[0]=t[0]*a+r,t[1]=t[1]*s+o};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(c)}))}))})),t}(c,s,t)).map((function(t,e){if(a[e]&&!I(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},r,a[e]);return n[i]=t[i],d(t.groupedRings,n)})))},t.transformRotate=ei,t.transformScale=ni,t.transformTranslate=function(t,e,n,i){if(!I(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,a=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Bt(t)),O(t,(function(t){var i=W(Hn(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=q(t),o=t.properties;switch(r){case"LineString":return ai(t,e,i);case"MultiLineString":var a=[];return B(t,(function(t){a.push(ai(t,e,i).geometry.coordinates)})),u(a,o);default:throw new Error("geometry "+r+" is not supported")}},t.polygonize=function(t){var e=ms.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){fs.findEdgeRingContaining(t,i)&&i.push(t)})),l(i.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return B(t,(function(t){B(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!li(e,t);case"Polygon":return!Mt(t,e)}break;case"LineString":switch(e.type){case"Point":return!li(t,e);case"LineString":return!function(t,e){return Ue(t,e).features.length>0}(t,e);case"Polygon":return!ui(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Mt(e,t);case"LineString":return!ui(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Mt(t.coordinates[0][n],e))return!0;for(var i=0;i<e.coordinates[0].length;i++)if(Mt(e.coordinates[0][i],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=q(t),i=q(e),r=X(t),o=X(e),a=W(t),s=W(e);switch(n){case"Point":switch(i){case"Point":return di(a,s);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(di(t.coordinates[n],e.coordinates)){i=!0;break}return i}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var i=!1,r=0;r<t.coordinates.length;r++)if(di(e.coordinates[n],t.coordinates[r])){i=!0;break}if(!i)return!1}return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return fn(o,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(fn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!0})&&(n=!0),!fn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!1}))return!1;return n}(r,o);case"MultiPoint":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(fn(e.coordinates[i],t,{ignoreEndVertices:!0})&&(n=!0),!fn(e.coordinates[i],t))return!1;return!!n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Mt(o,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0;if(!hi(G(t),G(e)))return!1;for(;i<e.coordinates.length-1;i++)if(Mt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(r,o);case"Polygon":return function(t,e){if(!hi(G(t),G(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Mt(e.coordinates[0][n],t))return!1;return!0}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Mt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=q(t),i=q(e),r=X(t),o=X(e);switch(n){case"MultiPoint":switch(i){case"LineString":return pi(r,o);case"Polygon":return gi(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return pi(o,r);case"LineString":return function(t,e){if(Ue(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),mi(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(r,o);case"Polygon":return fi(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return gi(o,r);case"LineString":return fi(o,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Kn,t.booleanOverlap=_i,t.booleanPointOnLine=fn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return q(t)===q(e)&&new Cs({precision:6}).compare(Kt(t),Kt(e))},t.booleanWithin=gn,t.clone=Bt,t.cleanCoords=Kt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.minPoints,r=n.units;if(K(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==i||Math.sign(i)>0))throw new Error("Invalid minPoints");t=Bt(t),i=i||3;var o=new Ps.DBSCAN,a=-1;return o.run(T(t),C(e,r),i,Nt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.dbscan=n.properties.cluster?"edge":"noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,i=e.mutate;K(t,"Point","Input must contain Points");var r=t.features.length;(n=n||Math.round(Math.sqrt(r/2)))>r&&(n=r),!1!==i&&void 0!==i||(t=Bt(t));var o=T(t),a=o.slice(0,n),s=function(t,e,n,i){var r=[],o=[],a=[],s=[],c=!1,l=i||1e4,u=t.length,h=t[0].length,d=h>0,p=[];if(n)r="kmrand"==n?function(t,e){for(var n={},i=[],r=e<<2,o=t.length,a=t[0].length>0;i.length<e&&r-- >0;){var s=t[Math.floor(Math.random()*o)],c=a?s.join("_"):""+s;n[c]||(n[c]=!0,i.push(s))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ms:Ss,i=[],r=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*r)];for(o&&a.join("_"),i.push(a);i.length<e;){for(var s=[],c=i.length,l=0,u=[],h=0;h<r;h++){for(var d=1/0,p=0;p<c;p++){var f=n(t[h],i[p]);f<=d&&(d=f)}s[h]=d}for(var g=0;g<r;g++)l+=s[g];for(var m=0;m<r;m++)u[m]={i:m,v:t[m],pr:s[m]/l,cs:0};u.sort((function(t,e){return t.pr-e.pr})),u[0].cs=u[0].pr;for(var v=1;v<r;v++)u[v].cs=u[v-1].cs+u[v].pr;for(var y=Math.random(),b=0;b<r-1&&u[b++].cs<y;);i.push(u[b-1].v)}return i}(t,e):n;else for(var f={};r.length<e;){var g=Math.floor(Math.random()*u);f[g]||(f[g]=!0,r.push(t[g]))}do{Ci(e,0,p);for(var m=0;m<u;m++){for(var v=1/0,y=0,b=0;b<e;b++)(s=d?ks(t[m],r[b]):Math.abs(t[m]-r[b]))<=v&&(v=s,y=b);a[m]=y,p[y]++}for(var _=[],C=(o=[],0);C<e;C++)_[C]=d?Ci(h,0,_[C]):0,o[C]=r[C];if(d){for(var x=0;x<e;x++)r[x]=[];for(var w=0;w<u;w++)for(var I=_[a[w]],A=t[w],P=0;P<h;P++)I[P]+=A[P];c=!0;for(var O=0;O<e;O++){for(var M=r[O],S=_[O],k=o[O],E=p[O],L=0;L<h;L++)M[L]=S[L]/E||0;if(c)for(var T=0;T<h;T++)if(k[T]!=M[T]){c=!1;break}}}else{for(var R=0;R<u;R++)_[a[R]]+=t[R];for(var N=0;N<e;N++)r[N]=_[N]/p[N]||0;c=!0;for(var B=0;B<e;B++)if(o[B]!=r[B]){c=!1;break}}c=c||--l<=0}while(!c);return{it:1e4-l,k:e,idxs:a,centroids:r}}(o,n,a),c={};return s.centroids.forEach((function(t,e){c[e]=t})),E(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=c[n]})),t},t.pointToLineDistance=rn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==xi(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==xi(e,"line2"))throw new Error("line2 must be a LineString");for(var n=He(Kt(t)).features,i=He(Kt(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!function(t,e){return y(Xe(t[0],t[1]))===y(Xe(e[0],e[1]))}(o,i[r].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var o=r.resolution,a=r.minDistance,c=r.obstacles||l([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!w(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var u=Z(t),h=Z(n);switch(t=i(u),n=i(h),q(c)){case"FeatureCollection":if(0===c.features.length)return s([u,h]);break;case"Polygon":c=l([e(X(c))]);break;default:throw new Error("invalid obstacles")}var d=c;d.features.push(t),d.features.push(n);var p=G(ni(ne(G(d)),1.15));o||(o=Nt([p[0],p[1]],[p[2],p[1]],r)/100),d.features.pop(),d.features.pop();for(var f=p[0],g=p[1],m=p[2],v=p[3],y=o/Nt([f,g],[m,g],r)*(m-f),b=o/Nt([f,g],[f,v],r)*(v-g),_=m-f,C=v-g,x=(_-Math.floor(_/y)*y)/2,A=[],P=[],O=[],M=[],S=1/0,k=1/0,E=v-(C-Math.floor(C/b)*b)/2,L=0;E>=g;){for(var T=[],R=[],N=f+x,B=0;N<=m;){var j=i([N,E]),D=function(t,e){for(var n=0;n<e.features.length;n++)if(Mt(t,e.features[n]))return!0;return!1}(j,c);T.push(D?0:1),R.push(N+"|"+E);var F=Nt(j,t);!D&&F<S&&(S=F,O={x:B,y:L});var z=Nt(j,n);!D&&z<k&&(k=z,M={x:B,y:L}),N+=y,B++}P.push(T),A.push(R),E-=b,L++}var V=new Ii(P,{diagonal:!0}),W=[u];return Es.search(V,V.grid[O.y][O.x],V.grid[M.y][M.x]).forEach((function(t){var e=A[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(h),Kt(s(W))},t.voronoi=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return K(t,"Point","points"),l(function(){function t(t){return new qi(t.map((function(i,r){var o=[Math.round(e(i,r,t)/zs)*zs,Math.round(n(i,r,t)/zs)*zs];return o.index=r,o.data=i,o})),i)}var e=Oi,n=Mi,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Ls(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Ls(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Ji))},t.ellipse=Qi,t.centerMean=er,t.centerMedian=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!w(n))throw new Error("counter must be a number");var i=e.weight,r=er(t,{weight:e.weight}),o=l([]);return E(t,(function(t){o.features.push(le(t,{weight:t.properties[i]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},nr(r.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!w(n))throw new Error("steps must be a number");if(!I(r))throw new Error("properties must be a number");var o=T(t).length,a=er(t,{weight:i}),s=0,c=0,u=0;E(t,(function(t){var e=t.properties[i]||1,n=ir(W(t),W(a));s+=Math.pow(n.x,2)*e,c+=Math.pow(n.y,2)*e,u+=n.x*n.y*e}));var h=s-c,d=Math.sqrt(Math.pow(h,2)+4*Math.pow(u,2)),p=Math.atan((h+d)/(2*u)),f=180*p/Math.PI,g=0,m=0,v=0;E(t,(function(t){var e=t.properties[i]||1,n=ir(W(t),W(a));g+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,m+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,v+=e}));var y=Math.sqrt(2*g/v),b=Math.sqrt(2*m/v),_=Qi(a,y,b,{units:"degrees",angle:f,steps:n,properties:r}),C=kt(t,l([_])),x={meanCenterCoordinates:W(a),semiMajorAxis:y,semiMinorAxis:b,numberOfFeatures:o,angle:f,percentageWithinEllipse:100*T(C).length/o};return _.properties.standardDeviationalEllipse=x,_},t.difference=function(t,n){var i=X(t),r=X(n),o=t.properties||{};if(i=Er(i),r=Er(r),!i)return null;if(!r)return e(i,o);var a=new ql,s=a.read(i),c=a.read(r),l=Qd.difference(s,c);return l.isEmpty()?null:e((new Jl).write(l),o)},t.buffer=function(t,e,n){var i=(n=n||{}).units,r=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64,i=i||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return R(t,(function(t){var n=co(t,e,i,r);n&&o.push(n)})),l(o);case"FeatureCollection":return E(t,(function(t){var n=co(t,e,i,r);n&&E(n,(function(t){t&&o.push(t)}))})),l(o)}return co(t,e,i,r)},t.union=po,t.intersect=fo,t.dissolve=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;K(t,"Polygon","dissolve");var i=Bt(t),r=i.features,o=[];r.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Ge();for(var c in a.load(i),r){var l=r[c],u=!1;if(a.search(l).features.forEach((function(t){l=r[c];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=go(e,o);0!==i&&(e-=i)}if(e!==+c){var h=r[e];h&&l&&(void 0!==n&&h.properties[n]!==l.properties[n]||_i(l,h)&&function(t,e){return Ue(s(T(t)),s(T(e))).features.length>0}(l,h)&&(r[c]=po(l,h),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),r.splice(e,1),l.properties.origIndexPosition=c,a.remove(l,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),u=!0))}})),u){if(!l)continue;l.properties.origIndexPosition=c,a.insert(l),c--}}return r.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),i},t.hexGrid=mo,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),i=function(t){var e=[],n=[];return B(t,(function(t){var i=t.geometry.coordinates,r=i[0],a=i.slice(1);e.push(o([r])),a.forEach((function(t){n.push(o([t]))}))})),[l(e),l(n)]}(t),r=i[0],a=i[1];return function(t,e,n){var i=[];return i.push(t.geometry.coordinates[0]),B(e,(function(t){i.push(t.geometry.coordinates[0])})),B(n,(function(t){i.push(t.geometry.coordinates[0])})),o(i)}(n,r=vo(r),a=vo(a))},t.squareGrid=bo,t.triangleGrid=_o,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(K(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var a,s=G(t);switch(i){case"point":case"points":a=yn(s,e,n);break;case"square":case"squares":a=bo(s,e,n);break;case"hex":case"hexes":a=mo(s,e,n);break;case"triangle":case"triangles":a=_o(s,e,n);break;default:throw new Error("invalid gridType")}var c=[];return E(a,(function(e){var a=0,s=0;E(t,(function(t){var c,l=Nt("point"===i?e:le(e),t,n);if(void 0!==r&&(c=t.properties[r]),void 0===c&&(c=t.geometry.coordinates[2]),void 0===c)throw new Error("zValue is missing");0===l&&(a=c);var u=1/Math.pow(l,o);s+=u,a+=u*c}));var l=Bt(e);l.properties[r]=a/s,c.push(l)})),l(c)},t.pointOnSurface=an,t.polygonToLineString=Sn,t.lineStringToPolygon=En,t.inside=Mt,t.within=kt,t.bezier=ee,t.nearest=Oe,t.pointOnLine=Ke,t.lineDistance=dn,t.radians2degrees=b,t.degrees2radians=_,t.distanceToDegrees=v,t.distanceToRadians=m,t.radiansToDistance=g,t.bearingToAngle=y,t.convertDistance=C,t.toMercator=Je,t.toWgs84=Qe,t.randomPosition=rr,t.randomPoint=or,t.randomPolygon=ar,t.randomLineString=sr,t.getCluster=lr,t.clusterEach=ur,t.clusterReduce=hr,t.createBins=dr,t.applyFilter=pr,t.propertiesContainsFilter=fr,t.filterProperties=gr,t.earthRadius=Co,t.factors=xo,t.unitsFactors=wo,t.areaFactors=Io,t.feature=e,t.geometry=n,t.point=i,t.points=r,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=c,t.featureCollection=l,t.multiLineString=u,t.multiPoint=h,t.multiPolygon=d,t.geometryCollection=p,t.round=f,t.radiansToLength=g,t.lengthToRadians=m,t.lengthToDegrees=v,t.bearingToAzimuth=y,t.radiansToDegrees=b,t.degreesToRadians=_,t.convertLength=C,t.convertArea=x,t.isNumber=w,t.isObject=I,t.validateBBox=A,t.validateId=P,t.getCoord=Z,t.getCoords=W,t.containsNumber=H,t.geojsonType=U,t.featureOf=$,t.collectionOf=K,t.getGeom=X,t.getGeomType=Y,t.getType=q,t.coordEach=O,t.coordReduce=M,t.propEach=S,t.propReduce=k,t.featureEach=E,t.featureReduce=L,t.coordAll=T,t.geomEach=R,t.geomReduce=N,t.flattenEach=B,t.flattenReduce=j,t.segmentEach=D,t.segmentReduce=F,t.lineEach=z,t.lineReduce=V,Object.defineProperty(t,"__esModule",{value:!0})}(e)},WpKc:function(t,e,n){"use strict";var i=n("afKu");function r(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="/events/v2",this.access_token=t.accessToken,this.version="0.0.1",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.lastSentInput="",this.lastSentIndex=0}r.prototype={select:function(t,e,n){var i=this.getSelectedIndex(t,e),r=this.getEventPayload("search.select",e);return r.resultIndex=i,i===this.lastSentIndex&&r.queryString===this.lastSentInput||-1==i?n?n():void 0:(this.lastSentIndex=i,this.lastSentInput=r.queryString,this.send(r,n))},start:function(t,e){var n=this.getEventPayload("search.start",t);return this.send(n,e)},send:function(t,e){if(e||(e=function(){}),!this.enableEventLogging)return e();var n=this.getRequestOptions(t);this.request(n,(function(t){return t?this.handleError(t,e):e?e():void 0}))},getRequestOptions:function(t){return{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify([t])}},getEventPayload:function(t,e){var n;n=e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:null;var i=e._map?e._map.getZoom():null;return{event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:e.options.limit,queryString:e.inputString,mapZoom:i,keyboardLocale:this.locale}},request:function(t,e){var n=new XMLHttpRequest;for(var i in n.onreadystatechange=function(){if(4==this.readyState)return e(204==this.status?null:this.statusText)},n.open(t.method,t.host+t.path,!0),t.headers)n.setRequestHeader(i,t.headers[i]);n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return(new i.sha256).update(Math.random().toString()).digest("hex")},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){var n=t.id;return e._typeahead.data.map((function(t){return t.id})).indexOf(n)},shouldEnableLogging:function(t){return-1!=this.origin.indexOf("api.mapbox.com")&&!t.localGeocoder&&!t.filter}},t.exports=r},XhcP:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z})),n.d(e,"b",(function(){return W})),n.d(e,"c",(function(){return G})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return K})),n.d(e,"f",(function(){return H})),n.d(e,"g",(function(){return Y}));var i=n("zu60"),r=n("rrZM"),o=n("5yrX"),a=n("uW9d"),s=n("nLfN"),c=n("vxfF"),l=n("ofXK"),u=n("fXoL"),h=n("FKr1"),d=n("8LU1"),p=n("FtGj"),f=n("XNiG"),g=n("xgIS"),m=n("VRyK"),v=n("pLZG"),y=n("lJxs"),b=n("CqXF"),_=n("1G5W"),C=n("/uUt"),x=n("IzEk"),w=n("JX91"),I=n("Kj3r"),A=n("R0Ic"),P=n("R1ws"),O=n("u47x"),M=n("cH1L"),S=["*"];function k(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]()._onBackdropClicked()})),u["\u0275\u0275elementEnd"]()}if(2&t){var i=u["\u0275\u0275nextContext"]();u["\u0275\u0275classProp"]("mat-drawer-shown",i._isShowingBackdrop())}}function E(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"mat-drawer-content"),u["\u0275\u0275projection"](1,2),u["\u0275\u0275elementEnd"]())}var L=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],T=["mat-drawer","mat-drawer-content","*"];function R(t,e){if(1&t){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]()._onBackdropClicked()})),u["\u0275\u0275elementEnd"]()}if(2&t){var i=u["\u0275\u0275nextContext"]();u["\u0275\u0275classProp"]("mat-drawer-shown",i._isShowingBackdrop())}}function N(t,e){1&t&&(u["\u0275\u0275elementStart"](0,"mat-sidenav-content",3),u["\u0275\u0275projection"](1,2),u["\u0275\u0275elementEnd"]())}var B=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],j=["mat-sidenav","mat-sidenav-content","*"],D=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",F={transformDrawer:Object(A.n)("transform",[Object(A.k)("open, open-instant",Object(A.l)({transform:"none",visibility:"visible"})),Object(A.k)("void",Object(A.l)({"box-shadow":"none",visibility:"hidden"})),Object(A.m)("void => open-instant",Object(A.e)("0ms")),Object(A.m)("void <=> open, open-instant => void",Object(A.e)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},z=new u.InjectionToken("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),V=new u.InjectionToken("MAT_DRAWER_CONTAINER"),G=function(){var t=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t,r,o,a,s){var c;return Object(i.a)(this,n),(c=e.call(this,o,a,s))._changeDetectorRef=t,c._container=r,c}return Object(r.a)(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._container._contentMarginChanges.subscribe((function(){t._changeDetectorRef.markForCheck()}))}}]),n}(c.a);return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](Object(u.forwardRef)((function(){return W}))),u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](c.c),u["\u0275\u0275directiveInject"](u.NgZone))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&u["\u0275\u0275styleProp"]("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[u["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:S,decls:1,vars:0,template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](),u["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),t}(),Z=function(){var t=function(){function t(e,n,r,o,a,s,c){var l=this;Object(i.a)(this,t),this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=o,this._ngZone=a,this._doc=s,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new f.a,this._animationEnd=new f.a,this._animationState="void",this.openedChange=new u.EventEmitter(!0),this._openedStream=this.openedChange.pipe(Object(v.a)((function(t){return t})),Object(y.a)((function(){}))),this.openedStart=this._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")})),Object(b.a)(void 0)),this._closedStream=this.openedChange.pipe(Object(v.a)((function(t){return!t})),Object(y.a)((function(){}))),this.closedStart=this._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState&&"void"===t.toState})),Object(b.a)(void 0)),this._destroyed=new f.a,this.onPositionChanged=new u.EventEmitter,this._modeChanged=new f.a,this.openedChange.subscribe((function(t){t?(l._doc&&(l._elementFocusedBeforeDrawerWasOpened=l._doc.activeElement),l._takeFocus()):l._isFocusWithinDrawer()&&l._restoreFocus()})),this._ngZone.runOutsideAngular((function(){Object(g.a)(l._elementRef.nativeElement,"keydown").pipe(Object(v.a)((function(t){return t.keyCode===p.e&&!l.disableClose&&!Object(p.o)(t)})),Object(_.a)(l._destroyed)).subscribe((function(t){return l._ngZone.run((function(){l.close(),t.stopPropagation(),t.preventDefault()}))}))})),this._animationEnd.pipe(Object(C.a)((function(t,e){return t.fromState===e.fromState&&t.toState===e.toState}))).subscribe((function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&l.openedChange.emit(l._opened)}))}return Object(r.a)(t,[{key:"_takeFocus",value:function(){var t=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then((function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()}))}},{key:"_restoreFocus",value:function(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}},{key:"_isFocusWithinDrawer",value:function(){var t,e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(t){return this.toggle(!0,t)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"_closeViaBackdropClick",value:function(){return this._setOpen(!1,!0)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,e=arguments.length>1?arguments[1]:void 0;return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}},{key:"_setOpen",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"program";return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=i):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise((function(t){n.openedChange.pipe(Object(x.a)(1)).subscribe((function(e){return t(e?"open":"close")}))}))}},{key:"_getWidth",value:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(t){this._animationStarted.next(t)}},{key:"_animationDoneListener",value:function(t){this._animationEnd.next(t)}},{key:"position",get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(t){this._disableClose=Object(d.b)(t)}},{key:"autoFocus",get:function(){var t=this._autoFocus;return null==t?"side"!==this.mode:t},set:function(t){this._autoFocus=Object(d.b)(t)}},{key:"opened",get:function(){return this._opened},set:function(t){this.toggle(Object(d.b)(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](O.g),u["\u0275\u0275directiveInject"](O.e),u["\u0275\u0275directiveInject"](s.a),u["\u0275\u0275directiveInject"](u.NgZone),u["\u0275\u0275directiveInject"](l.e,8),u["\u0275\u0275directiveInject"](V,8))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&u["\u0275\u0275syntheticHostListener"]("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(u["\u0275\u0275attribute"]("align",null),u["\u0275\u0275syntheticHostProperty"]("@transform",e._animationState),u["\u0275\u0275classProp"]("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:S,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](),u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275projection"](1),u["\u0275\u0275elementEnd"]())},encapsulation:2,data:{animation:[F.transformDrawer]},changeDetection:0}),t}(),W=function(){var t=function(){function t(e,n,r,o,a){var s=this,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;Object(i.a)(this,t),this._dir=e,this._element=n,this._ngZone=r,this._changeDetectorRef=o,this._animationMode=l,this._drawers=new u.QueryList,this.backdropClick=new u.EventEmitter,this._destroyed=new f.a,this._doCheckSubject=new f.a,this._contentMargins={left:null,right:null},this._contentMarginChanges=new f.a,e&&e.change.pipe(Object(_.a)(this._destroyed)).subscribe((function(){s._validateDrawers(),s.updateContentMargins()})),a.change().pipe(Object(_.a)(this._destroyed)).subscribe((function(){return s.updateContentMargins()})),this._autosize=c}return Object(r.a)(t,[{key:"ngAfterContentInit",value:function(){var t=this;this._allDrawers.changes.pipe(Object(w.a)(this._allDrawers),Object(_.a)(this._destroyed)).subscribe((function(e){t._drawers.reset(e.filter((function(e){return!e._container||e._container===t}))),t._drawers.notifyOnChanges()})),this._drawers.changes.pipe(Object(w.a)(null)).subscribe((function(){t._validateDrawers(),t._drawers.forEach((function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)})),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t.updateContentMargins(),t._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){t._doCheckSubject.pipe(Object(I.a)(10),Object(_.a)(t._destroyed)).subscribe((function(){return t.updateContentMargins()}))}))}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach((function(t){return t.open()}))}},{key:"close",value:function(){this._drawers.forEach((function(t){return t.close()}))}},{key:"updateContentMargins",value:function(){var t=this,e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){var i=this._left._getWidth();e+=i,n-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){var r=this._right._getWidth();n+=r,e-=r}n=n||null,(e=e||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:e,right:n},this._ngZone.run((function(){return t._contentMarginChanges.next(t._contentMargins)})))}},{key:"ngDoCheck",value:function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular((function(){return t._doCheckSubject.next()}))}},{key:"_watchDrawerToggle",value:function(t){var e=this;t._animationStarted.pipe(Object(v.a)((function(t){return t.fromState!==t.toState})),Object(_.a)(this._drawers.changes)).subscribe((function(t){"open-instant"!==t.toState&&"NoopAnimations"!==e._animationMode&&e._element.nativeElement.classList.add("mat-drawer-transition"),e.updateContentMargins(),e._changeDetectorRef.markForCheck()})),"side"!==t.mode&&t.openedChange.pipe(Object(_.a)(this._drawers.changes)).subscribe((function(){return e._setContainerClass(t.opened)}))}},{key:"_watchDrawerPosition",value:function(t){var e=this;t&&t.onPositionChanged.pipe(Object(_.a)(this._drawers.changes)).subscribe((function(){e._ngZone.onMicrotaskEmpty.pipe(Object(x.a)(1)).subscribe((function(){e._validateDrawers()}))}))}},{key:"_watchDrawerMode",value:function(t){var e=this;t&&t._modeChanged.pipe(Object(_.a)(Object(m.a)(this._drawers.changes,this._destroyed))).subscribe((function(){e.updateContentMargins(),e._changeDetectorRef.markForCheck()}))}},{key:"_setContainerClass",value:function(t){var e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}},{key:"_validateDrawers",value:function(){var t=this;this._start=this._end=null,this._drawers.forEach((function(e){"end"==e.position?t._end=e:t._start=e})),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}},{key:"_closeModalDrawersViaBackdrop",value:function(){var t=this;[this._start,this._end].filter((function(e){return e&&!e.disableClose&&t._canHaveBackdrop(e)})).forEach((function(t){return t._closeViaBackdropClick()}))}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(t){return"side"!==t.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(t){return null!=t&&t.opened}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(t){this._autosize=Object(d.b)(t)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(t){this._backdropOverride=null==t?null:Object(d.b)(t)}},{key:"scrollable",get:function(){return this._userContent||this._content}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](M.c,8),u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](u.NgZone),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](c.e),u["\u0275\u0275directiveInject"](z),u["\u0275\u0275directiveInject"](P.a,8))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var i;1&t&&(u["\u0275\u0275contentQuery"](n,G,!0),u["\u0275\u0275contentQuery"](n,Z,!0)),2&t&&(u["\u0275\u0275queryRefresh"](i=u["\u0275\u0275loadQuery"]())&&(e._content=i.first),u["\u0275\u0275queryRefresh"](i=u["\u0275\u0275loadQuery"]())&&(e._allDrawers=i))},viewQuery:function(t,e){var n;1&t&&u["\u0275\u0275viewQuery"](G,!0),2&t&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&u["\u0275\u0275classProp"]("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[u["\u0275\u0275ProvidersFeature"]([{provide:V,useExisting:t}])],ngContentSelectors:T,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](L),u["\u0275\u0275template"](0,k,1,2,"div",0),u["\u0275\u0275projection"](1),u["\u0275\u0275projection"](2,1),u["\u0275\u0275template"](3,E,2,0,"mat-drawer-content",1)),2&t&&(u["\u0275\u0275property"]("ngIf",e.hasBackdrop),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",!e._content))},directives:[l.v,G],styles:[D],encapsulation:2,changeDetection:0}),t}(),H=function(){var t=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t,r,o,a,s){return Object(i.a)(this,n),e.call(this,t,r,o,a,s)}return n}(G);return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](Object(u.forwardRef)((function(){return K}))),u["\u0275\u0275directiveInject"](u.ElementRef),u["\u0275\u0275directiveInject"](c.c),u["\u0275\u0275directiveInject"](u.NgZone))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&u["\u0275\u0275styleProp"]("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[u["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:S,decls:1,vars:0,template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](),u["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),t}(),U=function(){var t=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.apply(this,arguments))._fixedInViewport=!1,t._fixedTopGap=0,t._fixedBottomGap=0,t}return Object(r.a)(n,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(t){this._fixedInViewport=Object(d.b)(t)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(t){this._fixedTopGap=Object(d.e)(t)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(t){this._fixedBottomGap=Object(d.e)(t)}}]),n}(Z);return t.\u0275fac=function(e){return $(e||t)},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(u["\u0275\u0275attribute"]("align",null),u["\u0275\u0275styleProp"]("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),u["\u0275\u0275classProp"]("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[u["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:S,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](),u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275projection"](1),u["\u0275\u0275elementEnd"]())},encapsulation:2,data:{animation:[F.transformDrawer]},changeDetection:0}),t}(),$=u["\u0275\u0275getInheritedFactory"](U),K=function(){var t=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return n}(W);return t.\u0275fac=function(e){return X(e||t)},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){var i;1&t&&(u["\u0275\u0275contentQuery"](n,H,!0),u["\u0275\u0275contentQuery"](n,U,!0)),2&t&&(u["\u0275\u0275queryRefresh"](i=u["\u0275\u0275loadQuery"]())&&(e._content=i.first),u["\u0275\u0275queryRefresh"](i=u["\u0275\u0275loadQuery"]())&&(e._allDrawers=i))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&u["\u0275\u0275classProp"]("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[u["\u0275\u0275ProvidersFeature"]([{provide:V,useExisting:t}]),u["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:j,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(u["\u0275\u0275projectionDef"](B),u["\u0275\u0275template"](0,R,1,2,"div",0),u["\u0275\u0275projection"](1),u["\u0275\u0275projection"](2,1),u["\u0275\u0275template"](3,N,2,0,"mat-sidenav-content",1)),2&t&&(u["\u0275\u0275property"]("ngIf",e.hasBackdrop),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",!e._content))},directives:[l.v,H,c.a],styles:[D],encapsulation:2,changeDetection:0}),t}(),X=u["\u0275\u0275getInheritedFactory"](K),Y=function(){var t=function t(){Object(i.a)(this,t)};return t.\u0275mod=u["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[l.c,h.a,s.b,c.b],c.b,h.a]}),t}()},YI60:function(t,e,n){"use strict";var i=n("aqBw"),r={};function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(r[t])return r[t];var e=t.split("."),n=e[0],a=e[1];if(!a)throw new Error("Invalid token");var s=function(t){try{return JSON.parse(i.decode(t))}catch(e){throw new Error("Invalid token")}}(a),c={usage:n,user:s.u};return o(s,"a")&&(c.authorization=s.a),o(s,"exp")&&(c.expires=1e3*s.exp),o(s,"iat")&&(c.created=1e3*s.iat),o(s,"scopes")&&(c.scopes=s.scopes),o(s,"client")&&(c.client=s.client),o(s,"ll")&&(c.lastLogin=s.ll),o(s,"iu")&&(c.impersonator=s.iu),r[t]=c,c}},ZHpM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("kU1M");e.take=function(t){return i.take(t)(this)}},afKu:function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n("CH9F"),e.sha1=n("fnjI"),e.sha224=n("cqoG"),e.sha256=n("olUY"),e.sha384=n("uDfV"),e.sha512=n("T9HO")},aqBw:function(t,e,n){(function(t){var i;!function(r){"object"==typeof global&&global;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new o(t)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,i,r,o=t.length%3,c="",l=-1,u=t.length-o;++l<u;)e=t.charCodeAt(l)<<16,n=t.charCodeAt(++l)<<8,i=t.charCodeAt(++l),c+=s.charAt((r=e+n+i)>>18&63)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+s.charAt(63&r);return 2==o?(e=t.charCodeAt(l)<<8,n=t.charCodeAt(++l),c+=s.charAt((r=e+n)>>10)+s.charAt(r>>4&63)+s.charAt(r<<2&63)+"="):1==o&&(r=t.charCodeAt(l),c+=s.charAt(r>>2)+s.charAt(r<<4&63)+"=="),c},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,o="",l=-1;++l<e;)i=s.indexOf(t.charAt(l)),n=r%4?64*n+i:i,r++%4&&(o+=String.fromCharCode(255&n>>(-2*r&6)));return o},version:"0.1.0"};void 0===(i=(function(){return l}).call(e,n,e,t))||(t.exports=i)}()}).call(this,n("d3kn")(t))},baNz:function(t,e,n){"use strict";t.exports=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})}},cRm7:function(t,e,n){"use strict";var i=n("AxvH");function r(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(n){this.body=e.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=r},cqoG:function(t,e,n){var i=n("P7XM"),r=n("olUY"),o=n("tnIz"),a=n("hwdV").Buffer,s=new Array(64);function c(){this.init(),this._w=s,o.call(this,64,56)}i(c,r),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=c},cryX:function(t,e,n){"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e}},d0rS:function(t,e,n){"use strict";function i(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function r(t,e,n){if(!1===n||null===n)return t;var r=/\?/.test(t)?"&":"?",o=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(o+="="+i(n)),""+t+r+o}t.exports={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&(Array.isArray(i)&&(i=i.filter((function(t){return!!t})).join(",")),n=r(n,t,i))})),n},appendQueryParam:r,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,n){var r=e[n];if(void 0===r)throw new Error("Unspecified route parameter "+n);return"/"+i(r)})):t}}},eFQn:function(t,e,n){"use strict";var i=n("Smn/");t.exports=function(t){return i(t,(function(t,e){return"boolean"==typeof e?JSON.stringify(e):e}))}},fnjI:function(t,e,n){var i=n("P7XM"),r=n("tnIz"),o=n("hwdV").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,r.call(this,64,56)}function l(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function h(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,c=0|this._e,d=0;d<16;++d)n[d]=t.readInt32BE(4*d);for(;d<80;++d)n[d]=(e=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|e>>>31;for(var p=0;p<80;++p){var f=~~(p/20),g=l(i)+h(f,r,o,s)+c+n[p]+a[f]|0;c=s,s=o,o=u(r),r=i,i=g}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=c},hwdV:function(t,e,n){var i=n("tjlA"),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=a),a.prototype=Object.create(r.prototype),o(r,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},iFvi:function(t,e,n){"use strict";var i,r=n("Bi8L"),o=n("9/5/"),a=n("U6jy"),s=n("+qE3").EventEmitter,c=n("SsYf"),l=n("0KjW"),u=n("LFDd"),h=n("WpKc");function d(t){this._eventEmitter=new s,this.options=a({},this.options,t),this.inputString="",this.fresh=!0}d.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,trackProximity:!1,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com"},onAdd:function(t){this._map=t,i=u(l({accessToken:this.options.accessToken,origin:this.options.origin})),this.eventManager=new h(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this),this._updateProximity=this._updateProximity.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var o=document.createElement("div");return o.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",o.appendChild(this._clearEl),o.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(o),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(t){return t.place_name},this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),e},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map.off("moveend",this._updateProximity),this._map=null,this},_onKeyDown:o((function(t){var e=t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!e.value)return this.fresh=!0,this._clear(t),this._clearEl.style.display="none";t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||e.value.length>=this.options.minLength&&this._geocode(e.value)}),200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var t=this._typeahead.selected;if(t){if(this.options.flyTo)if(!c[t.id]&&t.bbox){var e=t.bbox;this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]])}else c[t.id]?this._map.fitBounds(c[t.id].bbox):this._map.flyTo({center:t.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this)}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var e,n=this,r=["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((function(t,e){return n.options[e]&&(t[e]=["countries","types","language"].indexOf(e)>-1?n.options[e].split(/[\s,]+/):n.options[e],"proximity"===e&&n.options[e]&&n.options[e].longitude&&n.options[e].latitude&&(t[e]=[n.options[e].longitude,n.options[e].latitude])),t}),{});if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var o=t.split(/[\s(,)?]+/).map((function(t){return parseFloat(t,10)})).reverse();r=a(r,{query:o,limit:1}),e=i.reverseGeocode(r).send()}else r=a(r,{query:t}),e=i.forwardGeocode(r).send();var s=[];return this.options.localGeocoder&&((s=this.options.localGeocoder(t))||(s=[])),e.then((function(t){this._loadingEl.style.display="none";var e={};"200"==t.statusCode&&(e=t.body),e.features=e.features?s.concat(e.features):s,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),e.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)}).bind(this)),e.catch((function(t){this._loadingEl.style.display="none",s.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:s}),this._typeahead.update(s),this._eventEmitter.emit("error",{error:t})}).bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear"),this.fresh=!0},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},query:function(t){return this._geocode(t).then(this._onQueryResult),this},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},t.exports=d},jLWS:function(t,e,n){"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},kU1M:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",(function(){return i.a})),n.d(e,"auditTime",(function(){return r.a})),n.d(e,"buffer",(function(){return h})),n.d(e,"bufferCount",(function(){return v})),n.d(e,"bufferTime",(function(){return w})),n.d(e,"bufferToggle",(function(){return T})),n.d(e,"bufferWhen",(function(){return B})),n.d(e,"catchError",(function(){return F.a})),n.d(e,"combineAll",(function(){return V})),n.d(e,"combineLatest",(function(){return H})),n.d(e,"concat",(function(){return $})),n.d(e,"concatAll",(function(){return K.a})),n.d(e,"concatMap",(function(){return X.a})),n.d(e,"concatMapTo",(function(){return Y})),n.d(e,"count",(function(){return q})),n.d(e,"debounce",(function(){return tt})),n.d(e,"debounceTime",(function(){return it.a})),n.d(e,"defaultIfEmpty",(function(){return rt.a})),n.d(e,"delay",(function(){return ot.a})),n.d(e,"delayWhen",(function(){return st})),n.d(e,"dematerialize",(function(){return dt})),n.d(e,"distinct",(function(){return gt})),n.d(e,"distinctUntilChanged",(function(){return yt.a})),n.d(e,"distinctUntilKeyChanged",(function(){return bt})),n.d(e,"elementAt",(function(){return It})),n.d(e,"endWith",(function(){return Pt})),n.d(e,"every",(function(){return Ot})),n.d(e,"exhaust",(function(){return kt})),n.d(e,"exhaustMap",(function(){return Rt})),n.d(e,"expand",(function(){return jt})),n.d(e,"filter",(function(){return Ct.a})),n.d(e,"finalize",(function(){return zt.a})),n.d(e,"find",(function(){return Vt})),n.d(e,"findIndex",(function(){return Wt})),n.d(e,"first",(function(){return Ht.a})),n.d(e,"groupBy",(function(){return Ut.b})),n.d(e,"ignoreElements",(function(){return $t})),n.d(e,"isEmpty",(function(){return Yt})),n.d(e,"last",(function(){return Qt.a})),n.d(e,"map",(function(){return Tt.a})),n.d(e,"mapTo",(function(){return te.a})),n.d(e,"materialize",(function(){return ne})),n.d(e,"max",(function(){return le})),n.d(e,"merge",(function(){return he})),n.d(e,"mergeAll",(function(){return de.a})),n.d(e,"mergeMap",(function(){return pe.b})),n.d(e,"flatMap",(function(){return pe.a})),n.d(e,"mergeMapTo",(function(){return fe})),n.d(e,"mergeScan",(function(){return ge})),n.d(e,"min",(function(){return ye})),n.d(e,"multicast",(function(){return be.a})),n.d(e,"observeOn",(function(){return _e.b})),n.d(e,"onErrorResumeNext",(function(){return Ce})),n.d(e,"pairwise",(function(){return Ie.a})),n.d(e,"partition",(function(){return Pe})),n.d(e,"pluck",(function(){return Oe})),n.d(e,"publish",(function(){return ke})),n.d(e,"publishBehavior",(function(){return Le})),n.d(e,"publishLast",(function(){return Re})),n.d(e,"publishReplay",(function(){return Ne.a})),n.d(e,"race",(function(){return je})),n.d(e,"reduce",(function(){return ce})),n.d(e,"repeat",(function(){return De.a})),n.d(e,"repeatWhen",(function(){return Fe})),n.d(e,"retry",(function(){return Ge})),n.d(e,"retryWhen",(function(){return He})),n.d(e,"refCount",(function(){return Ke.a})),n.d(e,"sample",(function(){return Xe})),n.d(e,"sampleTime",(function(){return Je})),n.d(e,"scan",(function(){return oe.a})),n.d(e,"sequenceEqual",(function(){return nn})),n.d(e,"share",(function(){return sn.a})),n.d(e,"shareReplay",(function(){return cn.a})),n.d(e,"single",(function(){return un})),n.d(e,"skip",(function(){return pn.a})),n.d(e,"skipLast",(function(){return fn})),n.d(e,"skipUntil",(function(){return vn})),n.d(e,"skipWhile",(function(){return _n})),n.d(e,"startWith",(function(){return wn.a})),n.d(e,"subscribeOn",(function(){return On})),n.d(e,"switchAll",(function(){return En})),n.d(e,"switchMap",(function(){return Sn.a})),n.d(e,"switchMapTo",(function(){return Ln})),n.d(e,"take",(function(){return wt.a})),n.d(e,"takeLast",(function(){return ae.a})),n.d(e,"takeUntil",(function(){return Tn.a})),n.d(e,"takeWhile",(function(){return Rn.a})),n.d(e,"tap",(function(){return Nn.a})),n.d(e,"throttle",(function(){return jn})),n.d(e,"throttleTime",(function(){return zn})),n.d(e,"throwIfEmpty",(function(){return xt.a})),n.d(e,"timeInterval",(function(){return Hn})),n.d(e,"timeout",(function(){return Qn})),n.d(e,"timeoutWith",(function(){return Xn})),n.d(e,"timestamp",(function(){return ti})),n.d(e,"toArray",(function(){return ii})),n.d(e,"window",(function(){return ri})),n.d(e,"windowCount",(function(){return si})),n.d(e,"windowTime",(function(){return ui})),n.d(e,"windowToggle",(function(){return vi})),n.d(e,"windowWhen",(function(){return _i})),n.d(e,"withLatestFrom",(function(){return wi})),n.d(e,"zip",(function(){return Oi})),n.d(e,"zipAll",(function(){return Mi}));var i=n("tnsW"),r=n("3UWI"),o=n("2xcX"),a=n("5yrX"),s=n("uW9d"),c=n("zu60"),l=n("rrZM"),u=n("zx2A");function h(t){return function(e){return e.lift(new d(t))}}var d=function(){function t(e){Object(c.a)(this,t),this.closingNotifier=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new p(t,this.closingNotifier))}}]),t}(),p=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).buffer=[],r.add(Object(u.c)(i,new u.a(Object(o.a)(r)))),r}return Object(l.a)(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"notifyNext",value:function(){var t=this.buffer;this.buffer=[],this.destination.next(t)}}]),n}(u.b),f=n("LUob"),g=n("WUHe"),m=n("7o/Q");function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return n.lift(new y(t,e))}}var y=function(){function t(e,n){Object(c.a)(this,t),this.bufferSize=e,this.startBufferEvery=n,this.subscriberClass=n&&e!==n?_:b}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}]),t}(),b=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).bufferSize=i,r.buffer=[],r}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])}},{key:"_complete",value:function(){var t=this.buffer;t.length>0&&this.destination.next(t),Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}}]),n}(m.a),_=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).bufferSize=i,o.startBufferEvery=r,o.buffers=[],o.count=0,o}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this.bufferSize,n=this.startBufferEvery,i=this.buffers,r=this.count;this.count++,r%n==0&&i.push([]);for(var o=i.length;o--;){var a=i[o];a.push(t),a.length===e&&(i.splice(o,1),this.destination.next(a))}}},{key:"_complete",value:function(){for(var t=this.buffers,e=this.destination;t.length>0;){var i=t.shift();i.length>0&&e.next(i)}Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}}]),n}(m.a),C=n("D0XW"),x=n("z+Ro");function w(t){var e=arguments.length,n=C.a;Object(x.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var i=null;e>=2&&(i=arguments[1]);var r=Number.POSITIVE_INFINITY;return e>=3&&(r=arguments[2]),function(e){return e.lift(new I(t,i,r,n))}}var I=function(){function t(e,n,i,r){Object(c.a)(this,t),this.bufferTimeSpan=e,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=r}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new P(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}]),t}(),A=function t(){Object(c.a)(this,t),this.buffer=[]},P=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,a,s){var l;Object(c.a)(this,n),(l=e.call(this,t)).bufferTimeSpan=i,l.bufferCreationInterval=r,l.maxBufferSize=a,l.scheduler=s,l.contexts=[];var u=l.openContext();if(l.timespanOnly=null==r||r<0,l.timespanOnly){var h={subscriber:Object(o.a)(l),context:u,bufferTimeSpan:i};l.add(u.closeAction=s.schedule(O,i,h))}else{var d={subscriber:Object(o.a)(l),context:u},p={bufferTimeSpan:i,bufferCreationInterval:r,subscriber:Object(o.a)(l),scheduler:s};l.add(u.closeAction=s.schedule(S,i,d)),l.add(s.schedule(M,r,p))}return l}return Object(l.a)(n,[{key:"_next",value:function(t){for(var e,n=this.contexts,i=n.length,r=0;r<i;r++){var o=n[r],a=o.buffer;a.push(t),a.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)}},{key:"_error",value:function(t){this.contexts.length=0,Object(f.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts,e=this.destination;t.length>0;){var i=t.shift();e.next(i.buffer)}Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.contexts=null}},{key:"onBufferFull",value:function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(O,n,{subscriber:this,context:t,bufferTimeSpan:n}))}}},{key:"openContext",value:function(){var t=new A;return this.contexts.push(t),t}},{key:"closeContext",value:function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}]),n}(m.a);function O(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function M(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,i=t.subscriber,r=t.scheduler,o=i.openContext();i.closed||(i.add(o.closeAction=r.schedule(S,n,{subscriber:i,context:o})),this.schedule(t,e))}function S(t){t.subscriber.closeContext(t.context)}var k=n("quSY"),E=n("ZUHj"),L=n("l7GE");function T(t,e){return function(n){return n.lift(new R(t,e))}}var R=function(){function t(e,n){Object(c.a)(this,t),this.openings=e,this.closingSelector=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new N(t,this.openings,this.closingSelector))}}]),t}(),N=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;return Object(c.a)(this,n),(a=e.call(this,t)).closingSelector=r,a.contexts=[],a.add(Object(E.a)(Object(o.a)(a),i)),a}return Object(l.a)(n,[{key:"_next",value:function(t){for(var e=this.contexts,n=e.length,i=0;i<n;i++)e[i].buffer.push(t)}},{key:"_error",value:function(t){for(var e=this.contexts;e.length>0;){var i=e.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,Object(f.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts;t.length>0;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e){t?this.closeBuffer(t):this.openBuffer(e)}},{key:"notifyComplete",value:function(t){this.closeBuffer(t.context)}},{key:"openBuffer",value:function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}}},{key:"closeBuffer",value:function(t){var e=this.contexts;if(e&&t){var n=t.subscription;this.destination.next(t.buffer),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}}},{key:"trySubscribe",value:function(t){var e=this.contexts,n=new k.a,i={buffer:[],subscription:n};e.push(i);var r=Object(E.a)(this,t,i);!r||r.closed?this.closeBuffer(i):(r.context=i,this.add(r),n.add(r))}}]),n}(L.a);function B(t){return function(e){return e.lift(new j(t))}}var j=function(){function t(e){Object(c.a)(this,t),this.closingSelector=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new D(t,this.closingSelector))}}]),t}(),D=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).closingSelector=i,r.subscribing=!1,r.openBuffer(),r}return Object(l.a)(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"_complete",value:function(){var t=this.buffer;t&&this.destination.next(t),Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.buffer=void 0,this.subscribing=!1}},{key:"notifyNext",value:function(){this.openBuffer()}},{key:"notifyComplete",value:function(){this.subscribing?this.complete():this.openBuffer()}},{key:"openBuffer",value:function(){var t,e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{t=(0,this.closingSelector)()}catch(n){return this.error(n)}e=new k.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(u.c)(t,new u.a(this))),this.subscribing=!1}}]),n}(u.b),F=n("JIr8"),z=n("itXk");function V(t){return function(e){return e.lift(new z.a(t))}}var G=n("TUlv"),Z=n("DH7j"),W=n("Cfvw");function H(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=null;return"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&Object(Z.a)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(W.a)([t].concat(Object(G.a)(e))),new z.a(i))}}var U=n("GyhO");function $(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(U.a.apply(void 0,[t].concat(e)))}}var K=n("0EUg"),X=n("bOdf");function Y(t,e){return Object(X.a)((function(){return t}),e)}function q(t){return function(e){return e.lift(new J(t,e))}}var J=function(){function t(e,n){Object(c.a)(this,t),this.predicate=e,this.source=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Q(t,this.predicate,this.source))}}]),t}(),Q=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).predicate=i,o.source=r,o.count=0,o.index=0,o}return Object(l.a)(n,[{key:"_next",value:function(t){this.predicate?this._tryPredicate(t):this.count++}},{key:"_tryPredicate",value:function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++}},{key:"_complete",value:function(){this.destination.next(this.count),this.destination.complete()}}]),n}(m.a);function tt(t){return function(e){return e.lift(new et(t))}}var et=function(){function t(e){Object(c.a)(this,t),this.durationSelector=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new nt(t,this.durationSelector))}}]),t}(),nt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).durationSelector=i,r.hasValue=!1,r}return Object(l.a)(n,[{key:"_next",value:function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(u.c)(e,new u.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,Object(f.a)(Object(g.a)(n.prototype),"_next",this).call(this,t)}}}]),n}(u.b),it=n("Kj3r"),rt=n("xbPD"),ot=n("3E0/"),at=n("HDdC");function st(t,e){return e?function(n){return new ut(n,e).lift(new ct(t))}:function(e){return e.lift(new ct(t))}}var ct=function(){function t(e){Object(c.a)(this,t),this.delayDurationSelector=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new lt(t,this.delayDurationSelector))}}]),t}(),lt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).delayDurationSelector=i,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return Object(l.a)(n,[{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()}},{key:"notifyError",value:function(t,e){this._error(t)}},{key:"notifyComplete",value:function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}},{key:"_next",value:function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(i){this.destination.error(i)}}},{key:"_complete",value:function(){this.completed=!0,this.tryComplete(),this.unsubscribe()}},{key:"removeSubscription",value:function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}},{key:"tryDelay",value:function(t,e){var n=Object(E.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}},{key:"tryComplete",value:function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}]),n}(L.a),ut=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this)).source=t,r.subscriptionDelay=i,r}return Object(l.a)(n,[{key:"_subscribe",value:function(t){this.subscriptionDelay.subscribe(new ht(t,this.source))}}]),n}(at.a),ht=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this)).parent=t,r.source=i,r.sourceSubscribed=!1,r}return Object(l.a)(n,[{key:"_next",value:function(t){this.subscribeToSource()}},{key:"_error",value:function(t){this.unsubscribe(),this.parent.error(t)}},{key:"_complete",value:function(){this.unsubscribe(),this.subscribeToSource()}},{key:"subscribeToSource",value:function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}]),n}(m.a);function dt(){return function(t){return t.lift(new pt)}}var pt=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new ft(t))}}]),t}(),ft=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"_next",value:function(t){t.observe(this.destination)}}]),n}(m.a);function gt(t,e){return function(n){return n.lift(new mt(t,e))}}var mt=function(){function t(e,n){Object(c.a)(this,t),this.keySelector=e,this.flushes=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new vt(t,this.keySelector,this.flushes))}}]),t}(),vt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;return Object(c.a)(this,n),(a=e.call(this,t)).keySelector=i,a.values=new Set,r&&a.add(Object(u.c)(r,new u.a(Object(o.a)(a)))),a}return Object(l.a)(n,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"_next",value:function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}},{key:"_useKeySelector",value:function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(i){return void n.error(i)}this._finalizeNext(e,t)}},{key:"_finalizeNext",value:function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))}}]),n}(u.b),yt=n("/uUt");function bt(t,e){return Object(yt.a)((function(n,i){return e?e(n[t],i[t]):n[t]===i[t]}))}var _t=n("4I5i"),Ct=n("pLZG"),xt=n("XDbj"),wt=n("IzEk");function It(t,e){if(t<0)throw new _t.a;var n=arguments.length>=2;return function(i){return i.pipe(Object(Ct.a)((function(e,n){return n===t})),Object(wt.a)(1),n?Object(rt.a)(e):Object(xt.a)((function(){return new _t.a})))}}var At=n("LRne");function Pt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return Object(U.a)(t,At.a.apply(void 0,e))}}function Ot(t,e){return function(n){return n.lift(new Mt(t,e,n))}}var Mt=function(){function t(e,n,i){Object(c.a)(this,t),this.predicate=e,this.thisArg=n,this.source=i}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new St(t,this.predicate,this.thisArg,this.source))}}]),t}(),St=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,a){var s;return Object(c.a)(this,n),(s=e.call(this,t)).predicate=i,s.thisArg=r,s.source=a,s.index=0,s.thisArg=r||Object(o.a)(s),s}return Object(l.a)(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(m.a);function kt(){return function(t){return t.lift(new Et)}}var Et=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Lt(t))}}]),t}(),Lt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).hasCompleted=!1,i.hasSubscription=!1,i}return Object(l.a)(n,[{key:"_next",value:function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(u.c)(t,new u.a(this))))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(u.b),Tt=n("lJxs");function Rt(t,e){return e?function(n){return n.pipe(Rt((function(n,i){return Object(W.a)(t(n,i)).pipe(Object(Tt.a)((function(t,r){return e(n,t,i,r)})))})))}:function(e){return e.lift(new Nt(t))}}var Nt=function(){function t(e){Object(c.a)(this,t),this.project=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Bt(t,this.project))}}]),t}(),Bt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).project=i,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return Object(l.a)(n,[{key:"_next",value:function(t){this.hasSubscription||this.tryNext(t)}},{key:"tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new u.a(this),n=this.destination;n.add(e);var i=Object(u.c)(t,e);i!==e&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(u.b);function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:void 0;return e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(i){return i.lift(new Dt(t,e,n))}}var Dt=function(){function t(e,n,i){Object(c.a)(this,t),this.project=e,this.concurrent=n,this.scheduler=i}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ft(t,this.project,this.concurrent,this.scheduler))}}]),t}(),Ft=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o){var a;return Object(c.a)(this,n),(a=e.call(this,t)).project=i,a.concurrent=r,a.scheduler=o,a.index=0,a.active=0,a.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(a.buffer=[]),a}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this.destination;if(e.closed)this._complete();else{var i=this.index++;if(this.active<this.concurrent){e.next(t);try{var r=(0,this.project)(t,i);this.scheduler?this.destination.add(this.scheduler.schedule(n.dispatch,0,{subscriber:this,result:r,value:t,index:i})):this.subscribeToProjection(r,t,i)}catch(o){e.error(o)}}else this.buffer.push(t)}}},{key:"subscribeToProjection",value:function(t,e,n){this.active++,this.destination.add(Object(u.c)(t,new u.a(this)))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this._next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}],[{key:"dispatch",value:function(t){t.subscriber.subscribeToProjection(t.result,t.value,t.index)}}]),n}(u.b),zt=n("nYR2");function Vt(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Gt(t,n,!1,e))}}var Gt=function(){function t(e,n,i,r){Object(c.a)(this,t),this.predicate=e,this.source=n,this.yieldIndex=i,this.thisArg=r}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Zt(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}]),t}(),Zt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o,a){var s;return Object(c.a)(this,n),(s=e.call(this,t)).predicate=i,s.source=r,s.yieldIndex=o,s.thisArg=a,s.index=0,s}return Object(l.a)(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()}},{key:"_next",value:function(t){var e=this.predicate,n=this.thisArg,i=this.index++;try{e.call(n||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(r){this.destination.error(r)}}},{key:"_complete",value:function(){this.notifyComplete(this.yieldIndex?-1:void 0)}}]),n}(m.a);function Wt(t,e){return function(n){return n.lift(new Gt(t,n,!0,e))}}var Ht=n("SxV6"),Ut=n("OQgR");function $t(){return function(t){return t.lift(new Kt)}}var Kt=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Xt(t))}}]),t}(),Xt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"_next",value:function(t){}}]),n}(m.a);function Yt(){return function(t){return t.lift(new qt)}}var qt=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Jt(t))}}]),t}(),Jt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"_next",value:function(t){this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(m.a),Qt=n("NJ9Y"),te=n("CqXF"),ee=n("WMd4");function ne(){return function(t){return t.lift(new ie)}}var ie=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new re(t))}}]),t}(),re=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"_next",value:function(t){this.destination.next(ee.a.createNext(t))}},{key:"_error",value:function(t){var e=this.destination;e.next(ee.a.createError(t)),e.complete()}},{key:"_complete",value:function(){var t=this.destination;t.next(ee.a.createComplete()),t.complete()}}]),n}(m.a),oe=n("Kqap"),ae=n("BFxc"),se=n("mCNh");function ce(t,e){return arguments.length>=2?function(n){return Object(se.a)(Object(oe.a)(t,e),Object(ae.a)(1),Object(rt.a)(e))(n)}:function(e){return Object(se.a)(Object(oe.a)((function(e,n,i){return t(e,n,i+1)})),Object(ae.a)(1))(e)}}function le(t){return ce("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var ue=n("VRyK");function he(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(ue.a.apply(void 0,[t].concat(e)))}}var de=n("bHdf"),pe=n("5+tZ");function fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?Object(pe.b)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object(pe.b)((function(){return t}),n))}function ge(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return function(i){return i.lift(new me(t,e,n))}}var me=function(){function t(e,n,i){Object(c.a)(this,t),this.accumulator=e,this.seed=n,this.concurrent=i}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new ve(t,this.accumulator,this.seed,this.concurrent))}}]),t}(),ve=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o){var a;return Object(c.a)(this,n),(a=e.call(this,t)).accumulator=i,a.acc=r,a.concurrent=o,a.hasValue=!1,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return Object(l.a)(n,[{key:"_next",value:function(t){if(this.active<this.concurrent){var e,n=this.index++,i=this.destination;try{e=(0,this.accumulator)(this.acc,t,n)}catch(r){return i.error(r)}this.active++,this._innerSub(e)}else this.buffer.push(t)}},{key:"_innerSub",value:function(t){var e=new u.a(this),n=this.destination;n.add(e);var i=Object(u.c)(t,e);i!==e&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}},{key:"notifyNext",value:function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}]),n}(u.b);function ye(t){return ce("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var be=n("oB13"),_e=n("pxpQ");function Ce(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1===e.length&&Object(Z.a)(e[0])&&(e=e[0]),function(t){return t.lift(new xe(e))}}var xe=function(){function t(e){Object(c.a)(this,t),this.nextSources=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new we(t,this.nextSources))}}]),t}(),we=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).destination=t,r.nextSources=i,r}return Object(l.a)(n,[{key:"notifyError",value:function(){this.subscribeToNextSource()}},{key:"notifyComplete",value:function(){this.subscribeToNextSource()}},{key:"_error",value:function(t){this.subscribeToNextSource(),this.unsubscribe()}},{key:"_complete",value:function(){this.subscribeToNextSource(),this.unsubscribe()}},{key:"subscribeToNextSource",value:function(){var t=this.nextSources.shift();if(t){var e=new u.a(this),n=this.destination;n.add(e);var i=Object(u.c)(t,e);i!==e&&n.add(i)}else this.destination.complete()}}]),n}(u.b),Ie=n("Zy1z"),Ae=n("F97/");function Pe(t,e){return function(n){return[Object(Ct.a)(t,e)(n),Object(Ct.a)(Object(Ae.a)(t,e))(n)]}}function Oe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(t){return Object(Tt.a)(Me(e,i))(t)}}function Me(t,e){return function(n){for(var i=n,r=0;r<e;r++){var o=null!=i?i[t[r]]:void 0;if(void 0===o)return;i=o}return i}}var Se=n("XNiG");function ke(t){return t?Object(be.a)((function(){return new Se.a}),t):Object(be.a)(new Se.a)}var Ee=n("2Vo4");function Le(t){return function(e){return Object(be.a)(new Ee.a(t))(e)}}var Te=n("NHP+");function Re(){return function(t){return Object(be.a)(new Te.a)(t)}}var Ne=n("05l1"),Be=n("Nv8m");function je(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return 1===e.length&&Object(Z.a)(e[0])&&(e=e[0]),t.lift.call(Be.a.apply(void 0,[t].concat(Object(G.a)(e))))}}var De=n("/d8p");function Fe(t){return function(e){return e.lift(new ze(t))}}var ze=function(){function t(e){Object(c.a)(this,t),this.notifier=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ve(t,this.notifier,e))}}]),t}(),Ve=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).notifier=i,o.source=r,o.sourceIsBeingSubscribedTo=!0,o}return Object(l.a)(n,[{key:"notifyNext",value:function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}},{key:"notifyComplete",value:function(){if(!1===this.sourceIsBeingSubscribedTo)return Object(f.a)(Object(g.a)(n.prototype),"complete",this).call(this)}},{key:"complete",value:function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return Object(f.a)(Object(g.a)(n.prototype),"complete",this).call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}},{key:"_unsubscribe",value:function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._unsubscribe;return this._unsubscribe=null,Object(f.a)(Object(g.a)(n.prototype),"_unsubscribeAndRecycle",this).call(this),this._unsubscribe=t,this}},{key:"subscribeToRetries",value:function(){var t;this.notifications=new Se.a;try{t=(0,this.notifier)(this.notifications)}catch(e){return Object(f.a)(Object(g.a)(n.prototype),"complete",this).call(this)}this.retries=t,this.retriesSubscription=Object(u.c)(t,new u.a(this))}}]),n}(u.b);function Ge(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return e.lift(new Ze(t,e))}}var Ze=function(){function t(e,n){Object(c.a)(this,t),this.count=e,this.source=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new We(t,this.count,this.source))}}]),t}(),We=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).count=i,o.source=r,o}return Object(l.a)(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.source,i=this.count;if(0===i)return Object(f.a)(Object(g.a)(n.prototype),"error",this).call(this,t);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}]),n}(m.a);function He(t){return function(e){return e.lift(new Ue(t,e))}}var Ue=function(){function t(e,n){Object(c.a)(this,t),this.notifier=e,this.source=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new $e(t,this.notifier,this.source))}}]),t}(),$e=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).notifier=i,o.source=r,o}return Object(l.a)(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.errors,i=this.retries,r=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{e=new Se.a;try{i=(0,this.notifier)(e)}catch(o){return Object(f.a)(Object(g.a)(n.prototype),"error",this).call(this,o)}r=Object(u.c)(i,new u.a(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=i,this.retriesSubscription=r,e.next(t)}}},{key:"_unsubscribe",value:function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}]),n}(u.b),Ke=n("x+ZX");function Xe(t){return function(e){return e.lift(new Ye(t))}}var Ye=function(){function t(e){Object(c.a)(this,t),this.notifier=e}return Object(l.a)(t,[{key:"call",value:function(t,e){var n=new qe(t),i=e.subscribe(n);return i.add(Object(u.c)(this.notifier,new u.a(n))),i}}]),t}(),qe=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.apply(this,arguments)).hasValue=!1,t}return Object(l.a)(n,[{key:"_next",value:function(t){this.value=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(u.b);function Je(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.a;return function(n){return n.lift(new Qe(t,e))}}var Qe=function(){function t(e,n){Object(c.a)(this,t),this.period=e,this.scheduler=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new tn(t,this.period,this.scheduler))}}]),t}(),tn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;return Object(c.a)(this,n),(a=e.call(this,t)).period=i,a.scheduler=r,a.hasValue=!1,a.add(r.schedule(en,i,{subscriber:Object(o.a)(a),period:i})),a}return Object(l.a)(n,[{key:"_next",value:function(t){this.lastValue=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),n}(m.a);function en(t){var e=t.period;t.subscriber.notifyNext(),this.schedule(t,e)}function nn(t,e){return function(n){return n.lift(new rn(t,e))}}var rn=function(){function t(e,n){Object(c.a)(this,t),this.compareTo=e,this.comparator=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new on(t,this.compareTo,this.comparator))}}]),t}(),on=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;return Object(c.a)(this,n),(a=e.call(this,t)).compareTo=i,a.comparator=r,a._a=[],a._b=[],a._oneComplete=!1,a.destination.add(i.subscribe(new an(t,Object(o.a)(a)))),a}return Object(l.a)(n,[{key:"_next",value:function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}},{key:"_complete",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}},{key:"checkValues",value:function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var i=t.shift(),r=e.shift(),o=!1;try{o=n?n(i,r):i===r}catch(a){this.destination.error(a)}o||this.emit(!1)}}},{key:"emit",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"nextB",value:function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}},{key:"completeB",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}]),n}(m.a),an=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).parent=i,r}return Object(l.a)(n,[{key:"_next",value:function(t){this.parent.nextB(t)}},{key:"_error",value:function(t){this.parent.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.completeB(),this.unsubscribe()}}]),n}(m.a),sn=n("w1tV"),cn=n("UXun"),ln=n("sVev");function un(t){return function(e){return e.lift(new hn(t,e))}}var hn=function(){function t(e,n){Object(c.a)(this,t),this.predicate=e,this.source=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new dn(t,this.predicate,this.source))}}]),t}(),dn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).predicate=i,o.source=r,o.seenValue=!1,o.index=0,o}return Object(l.a)(n,[{key:"applySingleValue",value:function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}},{key:"_next",value:function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}},{key:"tryNext",value:function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new ln.a)}}]),n}(m.a),pn=n("zP0r");function fn(t){return function(e){return e.lift(new gn(t))}}var gn=function(){function t(e){if(Object(c.a)(this,t),this._skipCount=e,this._skipCount<0)throw new _t.a}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(0===this._skipCount?new m.a(t):new mn(t,this._skipCount))}}]),t}(),mn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t))._skipCount=i,r._count=0,r._ring=new Array(i),r}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var i=n%e,r=this._ring,o=r[i];r[i]=t,this.destination.next(o)}}}]),n}(m.a);function vn(t){return function(e){return e.lift(new yn(t))}}var yn=function(){function t(e){Object(c.a)(this,t),this.notifier=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new bn(t,this.notifier))}}]),t}(),bn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;Object(c.a)(this,n),(r=e.call(this,t)).hasValue=!1;var a=new u.a(Object(o.a)(r));r.add(a),r.innerSubscription=a;var s=Object(u.c)(i,a);return s!==a&&(r.add(s),r.innerSubscription=s),r}return Object(l.a)(n,[{key:"_next",value:function(t){this.hasValue&&Object(f.a)(Object(g.a)(n.prototype),"_next",this).call(this,t)}},{key:"notifyNext",value:function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}},{key:"notifyComplete",value:function(){}}]),n}(u.b);function _n(t){return function(e){return e.lift(new Cn(t))}}var Cn=function(){function t(e){Object(c.a)(this,t),this.predicate=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new xn(t,this.predicate))}}]),t}(),xn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).predicate=i,r.skipping=!0,r.index=0,r}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(m.a),wn=n("JX91"),In=n("7Hc7"),An=n("Y7HM"),Pn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:In.a;return Object(c.a)(this,n),(i=e.call(this)).source=t,i.delayTime=r,i.scheduler=o,(!Object(An.a)(r)||r<0)&&(i.delayTime=0),o&&"function"==typeof o.schedule||(i.scheduler=In.a),i}return Object(l.a)(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:In.a;return new n(t,e,i)}},{key:"dispatch",value:function(t){return this.add(t.source.subscribe(t.subscriber))}}]),n}(at.a);function On(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Mn(t,e))}}var Mn=function(){function t(e,n){Object(c.a)(this,t),this.scheduler=e,this.delay=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return new Pn(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),Sn=n("eIep"),kn=n("SpAZ");function En(){return Object(Sn.a)(kn.a)}function Ln(t,e){return e?Object(Sn.a)((function(){return t}),e):Object(Sn.a)((function(){return t}))}var Tn=n("1G5W"),Rn=n("GJmQ"),Nn=n("vkgz"),Bn={leading:!0,trailing:!1};function jn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bn;return function(n){return n.lift(new Dn(t,!!e.leading,!!e.trailing))}}var Dn=function(){function t(e,n,i){Object(c.a)(this,t),this.durationSelector=e,this.leading=n,this.trailing=i}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Fn(t,this.durationSelector,this.leading,this.trailing))}}]),t}(),Fn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o){var a;return Object(c.a)(this,n),(a=e.call(this,t)).destination=t,a.durationSelector=i,a._leading=r,a._trailing=o,a._hasValue=!1,a}return Object(l.a)(n,[{key:"_next",value:function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}},{key:"send",value:function(){var t=this._sendValue;this._hasValue&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0}},{key:"throttle",value:function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(u.c)(e,new u.a(this)))}},{key:"tryDurationSelector",value:function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}},{key:"throttlingDone",value:function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}},{key:"notifyNext",value:function(){this.throttlingDone()}},{key:"notifyComplete",value:function(){this.throttlingDone()}}]),n}(u.b);function zn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bn;return function(i){return i.lift(new Vn(t,e,n.leading,n.trailing))}}var Vn=function(){function t(e,n,i,r){Object(c.a)(this,t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=r}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Gn(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),Gn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o,a){var s;return Object(c.a)(this,n),(s=e.call(this,t)).duration=i,s.scheduler=r,s.leading=o,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return Object(l.a)(n,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Zn,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),n}(m.a);function Zn(t){t.subscriber.clearThrottle()}var Wn=n("NXyV");function Hn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.a;return function(e){return Object(Wn.a)((function(){return e.pipe(Object(oe.a)((function(e,n){var i=e.current;return{value:n,current:t.now(),last:i}}),{current:t.now(),value:void 0,last:void 0}),Object(Tt.a)((function(t){return new Un(t.value,t.current-t.last)})))}))}}var Un=function t(e,n){Object(c.a)(this,t),this.value=e,this.interval=n},$n=n("Y6u4"),Kn=n("mlxB");function Xn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.a;return function(i){var r=Object(Kn.a)(t),o=r?+t-n.now():Math.abs(t);return i.lift(new Yn(o,r,e,n))}}var Yn=function(){function t(e,n,i,r){Object(c.a)(this,t),this.waitFor=e,this.absoluteTimeout=n,this.withObservable=i,this.scheduler=r}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new qn(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}]),t}(),qn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,o,a){var s;return Object(c.a)(this,n),(s=e.call(this,t)).absoluteTimeout=i,s.waitFor=r,s.withObservable=o,s.scheduler=a,s.scheduleTimeout(),s}return Object(l.a)(n,[{key:"scheduleTimeout",value:function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(n.dispatchTimeout,this.waitFor,this))}},{key:"_next",value:function(t){this.absoluteTimeout||this.scheduleTimeout(),Object(f.a)(Object(g.a)(n.prototype),"_next",this).call(this,t)}},{key:"_unsubscribe",value:function(){this.action=void 0,this.scheduler=null,this.withObservable=null}}],[{key:"dispatchTimeout",value:function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(u.c)(e,new u.a(t)))}}]),n}(u.b),Jn=n("z6cu");function Qn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.a;return Xn(t,Object(Jn.a)(new $n.a),e)}function ti(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.a;return Object(Tt.a)((function(e){return new ei(e,t.now())}))}var ei=function t(e,n){Object(c.a)(this,t),this.value=e,this.timestamp=n};function ni(t,e,n){return 0===n?[e]:(t.push(e),t)}function ii(){return ce(ni,[])}function ri(t){return function(e){return e.lift(new oi(t))}}var oi=function(){function t(e){Object(c.a)(this,t),this.windowBoundaries=e}return Object(l.a)(t,[{key:"call",value:function(t,e){var n=new ai(t),i=e.subscribe(n);return i.closed||n.add(Object(u.c)(this.windowBoundaries,new u.a(n))),i}}]),t}(),ai=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).window=new Se.a,t.next(i.window),i}return Object(l.a)(n,[{key:"notifyNext",value:function(){this.openWindow()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(){this._complete()}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t)}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete()}},{key:"_unsubscribe",value:function(){this.window=null}},{key:"openWindow",value:function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new Se.a;e.next(n)}}]),n}(u.b);function si(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new ci(t,e))}}var ci=function(){function t(e,n){Object(c.a)(this,t),this.windowSize=e,this.startWindowEvery=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new li(t,this.windowSize,this.startWindowEvery))}}]),t}(),li=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(c.a)(this,n),(o=e.call(this,t)).destination=t,o.windowSize=i,o.startWindowEvery=r,o.windows=[new Se.a],o.count=0,t.next(o.windows[0]),o}return Object(l.a)(n,[{key:"_next",value:function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,r=this.windows,o=r.length,a=0;a<o&&!this.closed;a++)r[a].next(t);var s=this.count-i+1;if(s>=0&&s%e==0&&!this.closed&&r.shift().complete(),++this.count%e==0&&!this.closed){var c=new Se.a;r.push(c),n.next(c)}}},{key:"_error",value:function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}},{key:"_unsubscribe",value:function(){this.count=0,this.windows=null}}]),n}(m.a);function ui(t){var e=C.a,n=null,i=Number.POSITIVE_INFINITY;return Object(x.a)(arguments[3])&&(e=arguments[3]),Object(x.a)(arguments[2])?e=arguments[2]:Object(An.a)(arguments[2])&&(i=Number(arguments[2])),Object(x.a)(arguments[1])?e=arguments[1]:Object(An.a)(arguments[1])&&(n=Number(arguments[1])),function(r){return r.lift(new hi(t,n,i,e))}}var hi=function(){function t(e,n,i,r){Object(c.a)(this,t),this.windowTimeSpan=e,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=r}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new pi(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}]),t}(),di=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.apply(this,arguments))._numberOfNextedValues=0,t}return Object(l.a)(n,[{key:"next",value:function(t){this._numberOfNextedValues++,Object(f.a)(Object(g.a)(n.prototype),"next",this).call(this,t)}},{key:"numberOfNextedValues",get:function(){return this._numberOfNextedValues}}]),n}(Se.a),pi=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r,a,s){var l;Object(c.a)(this,n),(l=e.call(this,t)).destination=t,l.windowTimeSpan=i,l.windowCreationInterval=r,l.maxWindowSize=a,l.scheduler=s,l.windows=[];var u=l.openWindow();if(null!==r&&r>=0){var h={subscriber:Object(o.a)(l),window:u,context:null},d={windowTimeSpan:i,windowCreationInterval:r,subscriber:Object(o.a)(l),scheduler:s};l.add(s.schedule(mi,i,h)),l.add(s.schedule(gi,r,d))}else{var p={subscriber:Object(o.a)(l),window:u,windowTimeSpan:i};l.add(s.schedule(fi,i,p))}return l}return Object(l.a)(n,[{key:"_next",value:function(t){for(var e=this.windows,n=e.length,i=0;i<n;i++){var r=e[i];r.closed||(r.next(t),r.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(r))}}},{key:"_error",value:function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()}},{key:"openWindow",value:function(){var t=new di;return this.windows.push(t),this.destination.next(t),t}},{key:"closeWindow",value:function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)}}]),n}(m.a);function fi(t){var e=t.subscriber,n=t.windowTimeSpan,i=t.window;i&&e.closeWindow(i),t.window=e.openWindow(),this.schedule(t,n)}function gi(t){var e=t.windowTimeSpan,n=t.subscriber,i=t.scheduler,r=t.windowCreationInterval,o=n.openWindow(),a=this,s={action:a,subscription:null};s.subscription=i.schedule(mi,e,{subscriber:n,window:o,context:s}),a.add(s.subscription),a.schedule(t,r)}function mi(t){var e=t.subscriber,n=t.window,i=t.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(n)}function vi(t,e){return function(n){return n.lift(new yi(t,e))}}var yi=function(){function t(e,n){Object(c.a)(this,t),this.openings=e,this.closingSelector=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new bi(t,this.openings,this.closingSelector))}}]),t}(),bi=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;return Object(c.a)(this,n),(a=e.call(this,t)).openings=i,a.closingSelector=r,a.contexts=[],a.add(a.openSubscription=Object(E.a)(Object(o.a)(a),i,i)),a}return Object(l.a)(n,[{key:"_next",value:function(t){var e=this.contexts;if(e)for(var n=e.length,i=0;i<n;i++)e[i].window.next(t)}},{key:"_error",value:function(t){var e=this.contexts;if(this.contexts=null,e)for(var i=e.length,r=-1;++r<i;){var o=e[r];o.window.error(t),o.subscription.unsubscribe()}Object(f.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,i=-1;++i<e;){var r=t[i];r.window.complete(),r.subscription.unsubscribe()}Object(f.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var i=t[n];i.window.unsubscribe(),i.subscription.unsubscribe()}}},{key:"notifyNext",value:function(t,e,n,i,r){if(t===this.openings){var o;try{o=(0,this.closingSelector)(e)}catch(u){return this.error(u)}var a=new Se.a,s=new k.a,c={window:a,subscription:s};this.contexts.push(c);var l=Object(E.a)(this,o,c);l.closed?this.closeWindow(this.contexts.length-1):(l.context=c,s.add(l)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))}},{key:"notifyError",value:function(t){this.error(t)}},{key:"notifyComplete",value:function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}},{key:"closeWindow",value:function(t){if(-1!==t){var e=this.contexts,n=e[t],i=n.window,r=n.subscription;e.splice(t,1),i.complete(),r.unsubscribe()}}}]),n}(L.a);function _i(t){return function(e){return e.lift(new Ci(t))}}var Ci=function(){function t(e){Object(c.a)(this,t),this.closingSelector=e}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new xi(t,this.closingSelector))}}]),t}(),xi=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i){var r;return Object(c.a)(this,n),(r=e.call(this,t)).destination=t,r.closingSelector=i,r.openWindow(),r}return Object(l.a)(n,[{key:"notifyNext",value:function(t,e,n,i,r){this.openWindow(r)}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(t){this.openWindow(t)}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}},{key:"unsubscribeClosingNotification",value:function(){this.closingNotification&&this.closingNotification.unsubscribe()}},{key:"openWindow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,i=this.window=new Se.a;this.destination.next(i);try{var r=this.closingSelector;n=r()}catch(o){return this.destination.error(o),void this.window.error(o)}this.add(this.closingNotification=Object(E.a)(this,n))}}]),n}(L.a);function wi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Ii(e,n))}}var Ii=function(){function t(e,n){Object(c.a)(this,t),this.observables=e,this.project=n}return Object(l.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ai(t,this.observables,this.project))}}]),t}(),Ai=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var a;Object(c.a)(this,n),(a=e.call(this,t)).observables=i,a.project=r,a.toRespond=[];var s=i.length;a.values=new Array(s);for(var l=0;l<s;l++)a.toRespond.push(l);for(var u=0;u<s;u++){var h=i[u];a.add(Object(E.a)(Object(o.a)(a),h,void 0,u))}return a}return Object(l.a)(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var i=this.toRespond;if(i.length>0){var r=i.indexOf(n);-1!==r&&i.splice(r,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(Object(G.a)(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(L.a),Pi=n("1uah");function Oi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(Pi.b.apply(void 0,[t].concat(e)))}}function Mi(t){return function(e){return e.lift(new Pi.a(t))}}},"kVK+":function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*c-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*g}},ncV3:function(t,e,n){"use strict";var i=n("YI60"),r=n("2+Hy"),o=n("jLWS");function a(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");i(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||o.API_ORIGIN}a.prototype.createRequest=function(t){return new r(this,t)},t.exports=a},oGbY:function(t,e,n){"use strict";var i=n("cRm7"),r=n("73jG"),o=n("jLWS"),a=n("cryX"),s={};function c(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function l(t,e){return new Promise((function(n,i){e.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_DOWNLOAD,c(e))};var a=t.file;a&&(e.upload.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_UPLOAD,c(e))}),e.onerror=function(t){i(t)},e.onabort=function(){var e=new r({request:t,type:o.ERROR_REQUEST_ABORTED});i(e)},e.onload=function(){if(delete s[t.id],e.status<200||e.status>=400){var o=new r({request:t,body:e.response,statusCode:e.status});i(o)}else n(e)};var l=t.body;"string"==typeof l?e.send(l):l?e.send(JSON.stringify(l)):a?e.send(a):e.send(),s[t.id]=e})).then((function(e){return function(t,e){return new i(t,{body:e.response,headers:a(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function u(t,e){var n=t.url(e),i=new window.XMLHttpRequest;return i.open(t.method,n),Object.keys(t.headers).forEach((function(e){i.setRequestHeader(e,t.headers[e])})),i}t.exports={browserAbort:function(t){var e=s[t.id];e&&(e.abort(),delete s[t.id])},sendRequestXhr:l,browserSend:function(t){return Promise.resolve().then((function(){var e=u(t,t.client.accessToken);return l(t,e)}))},createRequestXhr:u}},oKp4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("qCKp"),r=n("ZHpM");i.Observable.prototype.take=r.take},olUY:function(t,e,n){var i=n("P7XM"),r=n("tnIz"),o=n("hwdV").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function c(){this.init(),this._w=s,r.call(this,64,56)}function l(t,e,n){return n^t&(e^n)}function u(t,e,n){return t&e|n&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}i(c,r),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,c=0|this._e,f=0|this._f,g=0|this._g,m=0|this._h,v=0;v<16;++v)n[v]=t.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((e=n[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[v-7]+p(n[v-15])+n[v-16];for(var y=0;y<64;++y){var b=m+d(c)+l(c,f,g)+a[y]+n[y]|0,_=h(i)+u(i,r,o)|0;m=g,g=f,f=c,c=s+b|0,s=o,o=r,r=i,i=b+_|0}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},c.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=c},"pit/":function(t,e,n){"use strict";var i=n("NkL+"),r=n("U6jy"),o="value",a="\n  ",s={};function c(t){var e=Array.isArray(t);return function(n){var i=l(s.plainArray,n);if(i)return i;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var r=0;r<n.length;r++)if(i=l(e?t[r]:t,n[r]))return[r].concat(i)}}function l(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function u(t,e){var n=t.length,i=t[n-1],a=t.slice(0,n-1);return 0===a.length&&(a=[o]),e=r(e,{path:a}),"function"==typeof i?i(e):d(e,function(t){return"must be "+(/^an? /.test(e=t)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e)+".";var e}(i))}function h(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function d(t,e){return(p(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function p(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}s.assert=function(t,e){return e=e||{},function(n){var i=l(t,n);if(i){var r=u(i,e);throw e.apiName&&(r=e.apiName+": "+r),new Error(r)}}},s.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,i=l(s.plainObject,t);if(i)return i;for(var r=[],c=0;c<n.length;c++)(i=l(n[c].value,t[e=n[c].key]))&&r.push([e].concat(i));return r.length<2?r[0]:function(t){r=r.map((function(e){return"- "+e[0]+": "+u(e,t).split("\n").join(a)}));var e=t.path.join(".");return"The following properties"+(e===o?"":" of "+e)+" have invalid values:"+a+r.join(a)}}},s.strictShape=function(t){var e=s.shape(t);return function(n){var i=e(n);if(i)return i;var r=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==r.length?function(){return"The following keys are invalid: "+r.join(", ")}:void 0}},s.arrayOf=function(t){return c(t)},s.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return c(t)},s.required=function(t){function e(e){return null==e?function(t){return d(t,p(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},s.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return l(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?h(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},s.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},s.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return s.equal(t)}));return s.oneOfType.apply(this,e)},s.range=function(t){var e=t[0],n=t[1];return function(t){if(l(s.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},s.any=function(){},s.boolean=function(t){if("boolean"!=typeof t)return"boolean"},s.number=function(t){if("number"!=typeof t)return"number"},s.plainArray=function(t){if(!Array.isArray(t))return"array"},s.plainObject=function(t){if(!i(t))return"object"},s.string=function(t){if("string"!=typeof t)return"string"},s.func=function(t){if("function"!=typeof t)return"function"},s.validate=l,s.processMessage=u,t.exports=s},pk6O:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("ofXK"),r=n("aceb"),o=n("fXoL"),a=function(){function t(){}return t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[i.c,r.r,r.R,r.A,r.xb],i.c]}),t}()},tjlA:function(t,e,n){"use strict";var i=n("H7XF"),r=n("kVK+"),o=n("49sm");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=s(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(i)return z(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,a=1,s=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,i){return G(z(e,t.length-n),t,n,i)}function C(t,e,n,i){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return C(t,e,n,i)}function w(t,e,n,i){return G(V(e),t,n,i)}function I(t,e,n,i){return G(function(t,e){for(var n,i,r=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(n=t.charCodeAt(o))>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function A(t,e,n){return i.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,c,l=t[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(i.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=O));return n}(i)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(i,r),u=t.slice(e,n),h=0;h<s;++h)if(l[h]!==u[h]){o=l[h],a=u[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function M(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=e;a<n;++a)o+=(i=t[a])<16?"0"+i.toString(16):i.toString(16);return o}function E(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,i,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function R(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function N(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function B(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,o){return o||B(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function D(t,e,n,i,o){return o||B(t,0,n,8),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:z(new c(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}},tnIz:function(t,e,n){var i=n("hwdV").Buffer;function r(t,e){this._block=i.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}r.prototype.update=function(t,e){"string"==typeof t&&(t=i.from(t,e=e||"utf8"));for(var n=this._block,r=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var c=a%r,l=Math.min(o-s,r-c),u=0;u<l;u++)n[c+u]=t[s+u];s+=l,(a+=l)%r==0&&this._update(n)}return this._len+=o,this},r.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0;this._block.writeUInt32BE((n-i)/4294967296,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var r=this._hash();return t?r.toString(t):r},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r},uDfV:function(t,e,n){var i=n("P7XM"),r=n("T9HO"),o=n("tnIz"),a=n("hwdV").Buffer,s=new Array(160);function c(){this.init(),this._w=s,o.call(this,128,112)}i(c,r),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=c},uhBA:function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||t,o),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=this._events[r?r+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,i=e.length,o=new Array(i);n<i;n++)o[n]=e[n].fn;return o},l.prototype.listenerCount=function(t){var e=this._events[r?r+t:t];return e?e.fn?1:e.length:0},l.prototype.emit=function(t,e,n,i,o,a){var s=r?r+t:t;if(!this._events[s])return!1;var c,l,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,o),!0;case 6:return u.fn.call(u.context,e,n,i,o,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return c(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||c(this,o);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==e||i&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:c(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?this._events[e=r?r+t:t]&&c(this,e):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l},vjb2:function(t,e,n){var i;window,i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e,n){"use strict";n.r(e),n.d(e,"parse",(function(){return h})),n.d(e,"repair",(function(){return d})),n.d(e,"escapeUnicodeChars",(function(){return p})),n.d(e,"validate",(function(){return f})),n.d(e,"extend",(function(){return g})),n.d(e,"clear",(function(){return m})),n.d(e,"getType",(function(){return v})),n.d(e,"isUrl",(function(){return b})),n.d(e,"isArray",(function(){return _})),n.d(e,"getAbsoluteLeft",(function(){return C})),n.d(e,"getAbsoluteTop",(function(){return x})),n.d(e,"addClassName",(function(){return w})),n.d(e,"removeAllClassNames",(function(){return I})),n.d(e,"removeClassName",(function(){return A})),n.d(e,"stripFormatting",(function(){return P})),n.d(e,"setEndOfContentEditable",(function(){return O})),n.d(e,"selectContentEditable",(function(){return M})),n.d(e,"getSelection",(function(){return S})),n.d(e,"setSelection",(function(){return k})),n.d(e,"getSelectionOffset",(function(){return E})),n.d(e,"setSelectionOffset",(function(){return L})),n.d(e,"getInnerText",(function(){return T})),n.d(e,"hasParentNode",(function(){return R})),n.d(e,"getInternetExplorerVersion",(function(){return N})),n.d(e,"isFirefox",(function(){return B})),n.d(e,"addEventListener",(function(){return D})),n.d(e,"removeEventListener",(function(){return F})),n.d(e,"isChildOf",(function(){return z})),n.d(e,"parsePath",(function(){return V})),n.d(e,"stringifyPath",(function(){return G})),n.d(e,"improveSchemaError",(function(){return Z})),n.d(e,"isPromise",(function(){return W})),n.d(e,"isValidValidationError",(function(){return H})),n.d(e,"insideRect",(function(){return U})),n.d(e,"debounce",(function(){return $})),n.d(e,"textDiff",(function(){return K})),n.d(e,"getInputSelection",(function(){return X})),n.d(e,"getIndexForPosition",(function(){return Y})),n.d(e,"getPositionForPath",(function(){return q})),n.d(e,"compileJSONPointer",(function(){return J})),n.d(e,"getColorCSS",(function(){return Q})),n.d(e,"isValidColor",(function(){return tt})),n.d(e,"makeFieldTooltip",(function(){return et})),n.d(e,"get",(function(){return nt})),n.d(e,"findUniqueName",(function(){return it})),n.d(e,"getChildPaths",(function(){return rt})),n.d(e,"sort",(function(){return ot})),n.d(e,"sortObjectKeys",(function(){return at})),n.d(e,"parseString",(function(){return st})),n.d(e,"isTimestamp",(function(){return lt})),n.d(e,"formatSize",(function(){return ut})),n.d(e,"limitCharacters",(function(){return ht})),n.d(e,"isObject",(function(){return dt})),n.d(e,"contains",(function(){return pt})),n.d(e,"isValidationErrorChanged",(function(){return ft})),n(24);var i=n(11),r=n.n(i),o=n(22),a=n.n(o),s=n(33),c=n.n(s),l=n(1);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){try{return JSON.parse(t)}catch(e){throw f(t),e}}function d(t){var e=[],n=0,i=t.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);i&&(t=i[3]);var r={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function o(){return t.charAt(n)}function a(){return t.charAt(n+1)}function s(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function c(){for(var t=e.length-1;t>=0;){var n=e[t];if(!s(n))return n;t--}return""}function l(){for(var e=n+1;e<t.length&&s(t[e]);)e++;return t[e]}function u(){for(n+=2;n<t.length&&("*"!==o()||"/"!==a());)n++;n+=2}function h(){for(n+=2;n<t.length&&"\n"!==o();)n++}function d(e){var i="";i+='"',n++;for(var a=o();n<t.length&&a!==e;)'"'===a&&"\\"!==t.charAt(n-1)?i+='\\"':a in r?i+=r[a]:"\\"===a?(n++,"'"!==(a=o())&&(i+="\\"),i+=a):i+=a,n++,a=o();return a===e&&(i+='"',n++),i}function p(){for(var t="",e=o(),i=/[a-zA-Z_$\d]/;i.test(e);)t+=e,n++,e=o();return-1===["null","true","false"].indexOf(t)?'"'+t+'"':t}function f(){for(var t,e=o(),i="";/[a-zA-Z_$]/.test(e);)i+=e,n++,e=o();if(i.length>0&&"("===e){if(n++,'"'===(e=o()))t=d(e),e=o();else for(t="";")"!==e&&""!==e;)t+=e,n++,e=o();return")"===e?(n++,t):i+"("+t+e}return i}function g(t){return"\xa0"===t||t>="\u2000"&&t<="\u200a"||"\u202f"===t||"\u205f"===t||"\u3000"===t}for(;n<t.length;){var m=o();"/"===m&&"*"===a()?u():"/"===m&&"/"===a()?h():g(m)?(e.push(" "),n++):"'"===m?e.push(d(m)):'"'===m?e.push(d('"')):"`"===m?e.push(d("\xb4")):"\u2018"===m?e.push(d("\u2019")):"\u201c"===m?e.push(d("\u201d")):","===m&&-1!==["]","}"].indexOf(l())?n++:/[a-zA-Z_$]/.test(m)&&-1!==["{",","].indexOf(c())?e.push(p()):/[a-zA-Z_$]/.test(m)?e.push(f()):(e.push(m),n++)}return e.join("")}function p(t){return t.replace(/[\u007F-\uFFFF]/g,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))}function f(t){void 0!==a.a?a.a.parse(t):JSON.parse(t)}function g(t,e){for(var n in e)gt(e,n)&&(t[n]=e[n]);return t}function m(t){for(var e in t)gt(t,e)&&delete t[e];return t}function v(t){return null===t?"null":void 0===t?"undefined":t instanceof Number||"number"==typeof t?"number":t instanceof String||"string"==typeof t?"string":t instanceof Boolean||"boolean"==typeof t?"boolean":t instanceof RegExp?"regexp":_(t)?"array":"object"}var y=/^https?:\/\/\S+$/;function b(t){return("string"==typeof t||t instanceof String)&&y.test(t)}function _(t){return"[object Array]"===Object.prototype.toString.call(t)}function C(t){return t.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0}function x(t){return t.getBoundingClientRect().top+window.pageYOffset||document.scrollTop||0}function w(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" "))}function I(t){t.className=""}function A(t,e){var n=t.className.split(" "),i=n.indexOf(e);-1!==i&&(n.splice(i,1),t.className=n.join(" "))}function P(t){for(var e=t.childNodes,n=0,i=e.length;n<i;n++){var r=e[n];r.style&&r.removeAttribute("style");var o=r.attributes;if(o)for(var a=o.length-1;a>=0;a--){var s=o[a];!0===s.specified&&r.removeAttribute(s.name)}P(r)}}function O(t){var e,n;document.createRange&&((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e))}function M(t){var e,n;t&&"DIV"===t.nodeName&&window.getSelection&&document.createRange&&((n=document.createRange()).selectNodeContents(t),(e=window.getSelection()).removeAllRanges(),e.addRange(n))}function S(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return null}function k(t){if(t&&window.getSelection){var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}}function E(){var t=S();return t&&"startOffset"in t&&"endOffset"in t&&t.startContainer&&t.startContainer===t.endContainer?{startOffset:t.startOffset,endOffset:t.endOffset,container:t.startContainer.parentNode}:null}function L(t){if(document.createRange&&window.getSelection&&window.getSelection()){var e=document.createRange();t.container.firstChild||t.container.appendChild(document.createTextNode("")),e.setStart(t.container.firstChild,t.startOffset),e.setEnd(t.container.firstChild,t.endOffset),k(e)}}function T(t,e){if(void 0===e&&(e={text:"",flush:function(){var t=this.text;return this.text="",t},set:function(t){this.text=t}}),t.nodeValue)return e.flush()+t.nodeValue;if(t.hasChildNodes()){for(var n=t.childNodes,i="",r=0,o=n.length;r<o;r++){var a=n[r];if("DIV"===a.nodeName||"P"===a.nodeName){var s=n[r-1],c=s?s.nodeName:void 0;c&&"DIV"!==c&&"P"!==c&&"BR"!==c&&(i+="\n",e.flush()),i+=T(a,e),e.set("\n")}else"BR"===a.nodeName?(i+=e.flush(),e.set("\n")):i+=T(a,e)}return i}return"P"===t.nodeName&&-1!==N()?e.flush():""}function R(t,e){for(var n=t?t.parentNode:void 0;n;){if(n===e)return!0;n=n.parentNode}return!1}function N(){if(-1===j){var t=-1;if("undefined"!=typeof navigator&&"Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]+[.0-9]+)").exec(e)&&(t=parseFloat(RegExp.$1))}j=t}return j}function B(){return"undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")}var j=-1;function D(t,e,n,i){if(t.addEventListener)return void 0===i&&(i=!1),"mousewheel"===e&&B()&&(e="DOMMouseScroll"),t.addEventListener(e,n,i),n;if(t.attachEvent){var r=function(){return n.call(t,window.event)};return t.attachEvent("on"+e,r),r}}function F(t,e,n,i){t.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&B()&&(e="DOMMouseScroll"),t.removeEventListener(e,n,i)):t.detachEvent&&t.detachEvent("on"+e,n)}function z(t,e){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}function V(t){var e=[],n=0;function i(){for(var e="";void 0!==t[n]&&/[\w$]/.test(t[n]);)e+=t[n],n++;if(""===e)throw new Error("Invalid JSON path: property name expected at index "+n);return e}function r(e){for(var i="";void 0!==t[n]&&t[n]!==e;)i+=t[n],n++;if(t[n]!==e)throw new Error("Invalid JSON path: unexpected end, character "+e+" expected");return i}for(;void 0!==t[n];)if("."===t[n])n++,e.push(i());else{if("["!==t[n])throw new Error('Invalid JSON path: unexpected character "'+t[n]+'" at index '+n);if(n++,"'"===t[n]||'"'===t[n]){var o=t[n];if(n++,e.push(r(o)),t[n]!==o)throw new Error("Invalid JSON path: closing quote ' expected at index "+n);n++}else{var a=r("]").trim();if(0===a.length)throw new Error("Invalid JSON path: array value expected at index "+n);a="*"===a?a:JSON.parse(a),e.push(a)}if("]"!==t[n])throw new Error("Invalid JSON path: closing bracket ] expected at index "+n);n++}return e}function G(t){return t.map((function(t){return"number"==typeof t?"["+t+"]":"string"==typeof t&&t.match(/^[A-Za-z0-9_$]+$/)?"."+t:'["'+t+'"]'})).join("")}function Z(t){if("enum"===t.keyword&&Array.isArray(t.schema)){var e=t.schema;if(e){if((e=e.map((function(t){return JSON.stringify(t)}))).length>5){var n=["("+(e.length-5)+" more...)"];(e=e.slice(0,5)).push(n)}t.message="should be equal to one of: "+e.join(", ")}}return"additionalProperties"===t.keyword&&(t.message="should NOT have additional property: "+t.params.additionalProperty),t}function W(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function H(t){return"object"===u(t)&&Array.isArray(t.path)&&"string"==typeof t.message}function U(t,e,n){var i=void 0!==n?n:0;return e.left-i>=t.left&&e.right+i<=t.right&&e.top-i>=t.top&&e.bottom+i<=t.bottom}function $(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||t.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}}function K(t,e){for(var n=e.length,i=0,r=t.length,o=e.length;e.charAt(i)===t.charAt(i)&&i<n;)i++;for(;e.charAt(o-1)===t.charAt(r-1)&&o>i&&r>0;)o--,r--;return{start:i,end:o}}function X(t){var e,n,i,r,o,a=0,s=0;return"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd?(a=t.selectionStart,s=t.selectionEnd):(n=document.selection.createRange())&&n.parentElement()===t&&(r=t.value.length,e=t.value.replace(/\r\n/g,"\n"),(i=t.createTextRange()).moveToBookmark(n.getBookmark()),(o=t.createTextRange()).collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?a=s=r:(a=-i.moveStart("character",-r),a+=e.slice(0,a).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?s=r:(s=-i.moveEnd("character",-r),s+=e.slice(0,s).split("\n").length-1))),{startIndex:a,endIndex:s,start:c(a),end:c(s)};function c(e){var n=t.value.substring(0,e);return{row:(n.match(/\n/g)||[]).length+1,column:n.length-n.lastIndexOf("\n")}}}function Y(t,e,n){if(e>0&&n>0){var i=(t.value||"").split("\n",e);e=Math.min(i.length,e),n=Math.min(i[e-1].length,n-1);var r=1===e?n:n+1;return i.slice(0,e-1).join("\n").length+r}return-1}function q(t,e){var n,i=[];if(!e||!e.length)return i;try{n=c.a.parse(t)}catch(r){return i}return e.forEach((function(t){var e=J(V(t)),r=n.pointers[e];r&&i.push({path:t,line:r.key?r.key.line:r.value?r.value.line:0,column:r.key?r.key.column:r.value?r.value.column:0})})),i}function J(t){return t.map((function(t){return"/"+String(t).replace(/~/g,"~0").replace(/\//g,"~1")})).join("")}function Q(t){var e=document.createElement("div");return e.style.color=t,e.style.color.split(/\s+/).join("").toLowerCase()||null}function tt(t){return!!Q(t)}function et(t,e){if(!t)return"";var n="";return t.title&&(n+=t.title),t.description&&(n.length>0&&(n+="\n"),n+=t.description),t.default&&(n.length>0&&(n+="\n\n"),n+=Object(l.c)("default",void 0,e)+"\n",n+=JSON.stringify(t.default,null,2)),Array.isArray(t.examples)&&t.examples.length>0&&(n.length>0&&(n+="\n\n"),n+=Object(l.c)("examples",void 0,e)+"\n",t.examples.forEach((function(e,i){n+=JSON.stringify(e,null,2),i!==t.examples.length-1&&(n+="\n")}))),n}function nt(t,e){for(var n=t,i=0;i<e.length&&null!=n;i++)n=n[e[i]];return n}function it(t,e){for(var n=t.replace(/ \(copy( \d+)?\)$/,""),i=n,r=1;-1!==e.indexOf(i);)i=n+" (copy"+(r>1?" "+r:"")+")",r++;return i}function rt(t,e){var n={};function i(t,e,n,r){(!Array.isArray(t)&&!dt(t)||r)&&(e[n||""]=!0),dt(t)&&Object.keys(t).forEach((function(o){i(t[o],e,n+"."+o,r)}))}if(Array.isArray(t))for(var r=Math.min(t.length,1e4),o=0;o<r;o++)i(t[o],n,"",e);else n[""]=!0;return Object.keys(n).sort()}function ot(t,e,n){var i=e&&"."!==e?V(e):[],r="desc"===n?-1:1,o=t.slice();return o.sort((function(t,e){var n=nt(t,i),o=nt(e,i);return r*(n>o?1:n<o?-1:0)})),o}function at(t,e){var n="desc"===e?-1:1,i=Object.keys(t).sort((function(t,e){return n*r()(t,e)})),o={};return i.forEach((function(e){o[e]=t[e]})),o}function st(t){if(""===t)return"";var e=t.toLowerCase();if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;var n=Number(t),i=parseFloat(t);return isNaN(n)||isNaN(i)?t:n}var ct=["DATE","TIME","CREATED","UPDATED","DELETED"];function lt(t,e){if("number"==typeof e&&e>9466848e5&&isFinite(e)&&Math.floor(e)===e&&!isNaN(new Date(e).valueOf()))return!0;if("string"==typeof t){var n=t.toUpperCase();return ct.some((function(t){return-1!==n.indexOf(t)}))}return!1}function ut(t){if(t<900)return t.toFixed()+" B";var e=t/1024;if(e<900)return e.toFixed(1)+" KiB";var n=e/1024;if(n<900)return n.toFixed(1)+" MiB";var i=n/1024;return i<900?i.toFixed(1)+" GiB":(i/1024).toFixed(1)+" TiB"}function ht(t,e){return t.length<=e?t:t.slice(0,e)+"..."}function dt(t){return"object"===u(t)&&null!==t&&!Array.isArray(t)}function pt(t,e){return-1!==t.indexOf(e)}function ft(t,e){if(!e&&!t)return!1;if(e&&!t||!e&&t)return!0;if(e.length!==t.length)return!0;for(var n=function(n){if(!e.find("error"===t[n].type?function(e){return e.line===t[n].line}:function(e){return e.dataPath===t[n].dataPath&&e.schemaPath===t[n].schemaPath}))return{v:!0}},i=0;i<t.length;++i){var r=n(i);if("object"===u(r))return r.v}return!1}function gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n(24);var i=["en","pt-BR","zh-CN","tr","ja","fr-FR"],r={en:{array:"Array",auto:"Auto",appendText:"Append",appendTitle:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",appendSubmenuTitle:"Select the type of the field to be appended",appendTitleAuto:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascending",ascendingTitle:"Sort the childs of this ${type} in ascending order",actionsMenu:"Click to open the actions menu (Ctrl+M)",collapseAll:"Collapse all fields",descending:"Descending",descendingTitle:"Sort the childs of this ${type} in descending order",drag:"Drag to move this field (Alt+Shift+Arrows)",duplicateKey:"duplicate key",duplicateText:"Duplicate",duplicateTitle:"Duplicate selected fields (Ctrl+D)",duplicateField:"Duplicate this field (Ctrl+D)",duplicateFieldError:"Duplicate field name",cannotParseFieldError:"Cannot parse field into JSON",cannotParseValueError:"Cannot parse value into JSON",empty:"empty",expandAll:"Expand all fields",expandTitle:"Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs.",insert:"Insert",insertTitle:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",insertSub:"Select the type of the field to be inserted",object:"Object",ok:"Ok",redo:"Redo (Ctrl+Shift+Z)",removeText:"Remove",removeTitle:"Remove selected fields (Ctrl+Del)",removeField:"Remove this field (Ctrl+Del)",searchTitle:"Search fields and values",searchNextResultTitle:"Next result (Enter)",searchPreviousResultTitle:"Previous result (Shift + Enter)",selectNode:"Select a node...",showAll:"show all",showMore:"show more",showMoreStatus:"displaying ${visibleChilds} of ${totalChilds} items.",sort:"Sort",sortTitle:"Sort the childs of this ${type}",sortTitleShort:"Sort contents",sortFieldLabel:"Field:",sortDirectionLabel:"Direction:",sortFieldTitle:"Select the nested field by which to sort the array or object",sortAscending:"Ascending",sortAscendingTitle:"Sort the selected field in ascending order",sortDescending:"Descending",sortDescendingTitle:"Sort the selected field in descending order",string:"String",transform:"Transform",transformTitle:"Filter, sort, or transform the childs of this ${type}",transformTitleShort:"Filter, sort, or transform contents",extract:"Extract",extractTitle:"Extract this ${type}",transformQueryTitle:"Enter a JMESPath query",transformWizardLabel:"Wizard",transformWizardFilter:"Filter",transformWizardSortBy:"Sort by",transformWizardSelectFields:"Select fields",transformQueryLabel:"Query",transformPreviewLabel:"Preview",type:"Type",typeTitle:"Change the type of this field",openUrl:"Ctrl+Click or Ctrl+Enter to open url in new window",undo:"Undo last action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Field type "object". An object contains an unordered set of key/value pairs.',arrayType:'Field type "array". An array contains an ordered collection of values.',stringType:'Field type "string". Field type is not determined from the value, but always returned as string.',modeEditorTitle:"Switch Editor Mode",modeCodeText:"Code",modeCodeTitle:"Switch to code highlighter",modeFormText:"Form",modeFormTitle:"Switch to form editor",modeTextText:"Text",modeTextTitle:"Switch to plain text editor",modeTreeText:"Tree",modeTreeTitle:"Switch to tree editor",modeViewText:"View",modeViewTitle:"Switch to tree view",modePreviewText:"Preview",modePreviewTitle:"Switch to preview mode",examples:"Examples",default:"Default"},"zh-CN":{array:"\u6570\u7ec4",auto:"\u81ea\u52a8",appendText:"\u8ffd\u52a0",appendTitle:"\u5728\u6b64\u5b57\u6bb5\u540e\u8ffd\u52a0\u4e00\u4e2a\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",appendSubmenuTitle:"\u9009\u62e9\u8981\u8ffd\u52a0\u7684\u5b57\u6bb5\u7c7b\u578b",appendTitleAuto:"\u8ffd\u52a0\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",ascending:"\u5347\u5e8f",ascendingTitle:"\u5347\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",actionsMenu:"\u70b9\u51fb\u6253\u5f00\u52a8\u4f5c\u83dc\u5355(Ctrl+M)",collapseAll:"\u7f29\u8fdb\u6240\u6709\u5b57\u6bb5",descending:"\u964d\u5e8f",descendingTitle:"\u964d\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",drag:"\u62d6\u62fd\u79fb\u52a8\u8be5\u8282\u70b9(Alt+Shift+Arrows)",duplicateKey:"\u91cd\u590d\u952e",duplicateText:"\u590d\u5236",duplicateTitle:"\u590d\u5236\u9009\u4e2d\u5b57\u6bb5(Ctrl+D)",duplicateField:"\u590d\u5236\u8be5\u5b57\u6bb5(Ctrl+D)",duplicateFieldError:"\u91cd\u590d\u7684\u5b57\u6bb5\u540d\u79f0",cannotParseFieldError:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u89e3\u6790\u4e3aJSON",cannotParseValueError:"\u65e0\u6cd5\u5c06\u503c\u89e3\u6790\u4e3aJSON",empty:"\u6e05\u7a7a",expandAll:"\u5c55\u5f00\u6240\u6709\u5b57\u6bb5",expandTitle:"\u70b9\u51fb \u5c55\u5f00/\u6536\u7f29 \u8be5\u5b57\u6bb5(Ctrl+E). \nCtrl+Click \u5c55\u5f00/\u6536\u7f29 \u5305\u542b\u6240\u6709\u5b50\u8282\u70b9.",insert:"\u63d2\u5165",insertTitle:"\u5728\u6b64\u5b57\u6bb5\u524d\u63d2\u5165\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Ins)",insertSub:"\u9009\u62e9\u8981\u63d2\u5165\u7684\u5b57\u6bb5\u7c7b\u578b",object:"\u5bf9\u8c61",ok:"Ok",redo:"\u91cd\u505a (Ctrl+Shift+Z)",removeText:"\u79fb\u9664",removeTitle:"\u79fb\u9664\u9009\u4e2d\u5b57\u6bb5 (Ctrl+Del)",removeField:"\u79fb\u9664\u8be5\u5b57\u6bb5 (Ctrl+Del)",selectNode:"\u9009\u62e9\u4e00\u4e2a\u8282\u70b9...",showAll:"\u5c55\u793a\u5168\u90e8",showMore:"\u5c55\u793a\u66f4\u591a",showMoreStatus:"\u663e\u793a${totalChilds}\u7684${visibleChilds}\u9879\u76ee.",sort:"\u6392\u5e8f",sortTitle:"\u6392\u5e8f${type}\u7684\u5b50\u8282\u70b9",sortTitleShort:"\u5185\u5bb9\u6392\u5e8f",sortFieldLabel:"\u5b57\u6bb5\uff1a",sortDirectionLabel:"\u65b9\u5411\uff1a",sortFieldTitle:"\u9009\u62e9\u7528\u4e8e\u5bf9\u6570\u7ec4\u6216\u5bf9\u8c61\u6392\u5e8f\u7684\u5d4c\u5957\u5b57\u6bb5",sortAscending:"\u5347\u5e8f\u6392\u5e8f",sortAscendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u5347\u5e8f\u6392\u5e8f",sortDescending:"\u964d\u5e8f\u6392\u5e8f",sortDescendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u964d\u5e8f\u6392\u5e8f",string:"\u5b57\u7b26\u4e32",transform:"\u53d8\u6362",transformTitle:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362${type}\u7684\u5b50\u8282\u70b9",transformTitleShort:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362\u5185\u5bb9",extract:"\u63d0\u53d6",extractTitle:"\u63d0\u53d6\u8fd9\u4e2a ${type}",transformQueryTitle:"\u8f93\u5165JMESPath\u67e5\u8be2",transformWizardLabel:"\u5411\u5bfc",transformWizardFilter:"\u7b5b\u9009",transformWizardSortBy:"\u6392\u5e8f",transformWizardSelectFields:"\u9009\u62e9\u5b57\u6bb5",transformQueryLabel:"\u67e5\u8be2",transformPreviewLabel:"\u9884\u89c8",type:"\u7c7b\u578b",typeTitle:"\u66f4\u6539\u5b57\u6bb5\u7c7b\u578b",openUrl:"Ctrl+Click \u6216\u8005 Ctrl+Enter \u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",undo:"\u64a4\u9500\u4e0a\u6b21\u52a8\u4f5c (Ctrl+Z)",validationCannotMove:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u79fb\u5165\u5176\u5b50\u8282\u70b9",autoType:'\u5b57\u6bb5\u7c7b\u578b "auto". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a \u53ef\u4ee5\u4e3a string\uff0cnumber\uff0cboolean\uff0c\u6216\u8005 null.',objectType:'\u5b57\u6bb5\u7c7b\u578b "object". \u5bf9\u8c61\u5305\u542b\u4e00\u7ec4\u65e0\u5e8f\u7684\u952e/\u503c\u5bf9.',arrayType:'\u5b57\u6bb5\u7c7b\u578b "array". \u6570\u7ec4\u5305\u542b\u503c\u7684\u6709\u5e8f\u96c6\u5408.',stringType:'\u5b57\u6bb5\u7c7b\u578b "string". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a\uff0c\u4f46\u59cb\u7ec8\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fd4\u56de.',modeCodeText:"\u4ee3\u7801",modeCodeTitle:"\u5207\u6362\u81f3\u4ee3\u7801\u9ad8\u4eae",modeFormText:"\u8868\u5355",modeFormTitle:"\u5207\u6362\u81f3\u8868\u5355\u7f16\u8f91",modeTextText:"\u6587\u672c",modeTextTitle:"\u5207\u6362\u81f3\u6587\u672c\u7f16\u8f91",modeTreeText:"\u6811",modeTreeTitle:"\u5207\u6362\u81f3\u6811\u7f16\u8f91",modeViewText:"\u89c6\u56fe",modeViewTitle:"\u5207\u6362\u81f3\u6811\u89c6\u56fe",modePreviewText:"\u9884\u89c8",modePreviewTitle:"\u5207\u6362\u81f3\u9884\u89c8\u6a21\u5f0f",examples:"\u4f8b\u5b50",default:"\u7f3a\u7701"},"pt-BR":{array:"Lista",auto:"Automatico",appendText:"Adicionar",appendTitle:"Adicionar novo campo com tipo 'auto' depois deste campo (Ctrl+Shift+Ins)",appendSubmenuTitle:"Selecione o tipo do campo a ser adicionado",appendTitleAuto:"Adicionar novo campo com tipo 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendente",ascendingTitle:"Organizar filhor do tipo ${type} em crescente",actionsMenu:"Clique para abrir o menu de a\xe7\xf5es (Ctrl+M)",collapseAll:"Fechar todos campos",descending:"Descendente",descendingTitle:"Organizar o filhos do tipo ${type} em decrescente",duplicateKey:"chave duplicada",drag:"Arraste para mover este campo (Alt+Shift+Arrows)",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos selecionados (Ctrl+D)",duplicateField:"Duplicar este campo (Ctrl+D)",duplicateFieldError:"Nome do campo duplicado",cannotParseFieldError:"N\xe3o \xe9 poss\xedvel analisar o campo no JSON",cannotParseValueError:"N\xe3o \xe9 poss\xedvel analisar o valor em JSON",empty:"vazio",expandAll:"Expandir todos campos",expandTitle:"Clique para expandir/encolher este campo (Ctrl+E). \nCtrl+Click para expandir/encolher incluindo todos os filhos.",insert:"Inserir",insertTitle:"Inserir um novo campo do tipo 'auto' antes deste campo (Ctrl+Ins)",insertSub:"Selecionar o tipo de campo a ser inserido",object:"Objeto",ok:"Ok",redo:"Refazer (Ctrl+Shift+Z)",removeText:"Remover",removeTitle:"Remover campos selecionados (Ctrl+Del)",removeField:"Remover este campo (Ctrl+Del)",selectNode:"Selecione um n\xf3dulo...",showAll:"mostrar todos",showMore:"mostrar mais",showMoreStatus:"exibindo ${visibleChilds} de ${totalChilds} itens.",sort:"Organizar",sortTitle:"Organizar os filhos deste ${type}",sortTitleShort:"Organizar os filhos",sortFieldLabel:"Campo:",sortDirectionLabel:"Dire\xe7\xe3o:",sortFieldTitle:"Selecione um campo filho pelo qual ordenar o array ou objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar o campo selecionado por ordem ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar o campo selecionado por ordem descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar ou transformar os filhos deste ${type}",transformTitleShort:"Filtrar, ordenar ou transformar conte\xfados",transformQueryTitle:"Insira uma express\xe3o JMESPath",transformWizardLabel:"Assistente",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Selecionar campos",transformQueryLabel:"Express\xe3o",transformPreviewLabel:"Visualizar",type:"Tipo",typeTitle:"Mudar o tipo deste campo",openUrl:"Ctrl+Click ou Ctrl+Enter para abrir link em nova janela",undo:"Desfazer \xfaltimo a\xe7\xe3o (Ctrl+Z)",validationCannotMove:"N\xe3o pode mover um campo como filho dele mesmo",autoType:'Campo do tipo "auto". O tipo do campo \xe9 determinao automaticamente a partir do seu valor e pode ser texto, n\xfamero, verdade/falso ou nulo.',objectType:'Campo do tipo "objeto". Um objeto cont\xe9m uma lista de pares com chave e valor.',arrayType:'Campo do tipo "lista". Uma lista contem uma cole\xe7\xe3o de valores ordenados.',stringType:'Campo do tipo "string". Campo do tipo nao \xe9 determinado atrav\xe9s do seu valor, mas sempre retornara um texto.',examples:"Exemplos",default:"Revelia"},tr:{array:"Dizin",auto:"Otomatik",appendText:"Ekle",appendTitle:"Bu alan\u0131n alt\u0131na 'otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",appendSubmenuTitle:"Eklenecek alan\u0131n tipini se\xe7",appendTitleAuto:"'Otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",ascending:"Artan",ascendingTitle:"${type}'\u0131n alt tiplerini artan d\xfczende s\u0131rala",actionsMenu:"Aksiyon men\xfcs\xfcn\xfc a\xe7mak i\xe7in t\u0131klay\u0131n (Ctrl+M)",collapseAll:"T\xfcm alanlar\u0131 kapat",descending:"Azalan",descendingTitle:"${type}'\u0131n alt tiplerini azalan d\xfczende s\u0131rala",drag:"Bu alan\u0131 ta\u015f\u0131mak i\xe7in s\xfcr\xfckleyin (Alt+Shift+Arrows)",duplicateKey:"Var olan anahtar",duplicateText:"A\u015fa\u011f\u0131ya kopyala",duplicateTitle:"Se\xe7ili alanlardan bir daha olu\u015ftur (Ctrl+D)",duplicateField:"Bu alandan bir daha olu\u015ftur (Ctrl+D)",duplicateFieldError:"Duplicate field name",cannotParseFieldError:"Alan JSON'a ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",cannotParseValueError:"JSON'a de\u011fer ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",empty:"bo\u015f",expandAll:"T\xfcm alanlar\u0131 a\xe7",expandTitle:"Bu alan\u0131 a\xe7mak/kapatmak i\xe7in t\u0131kla (Ctrl+E). \nAlt alanlarda dahil t\xfcm alanlar\u0131 a\xe7mak i\xe7in Ctrl+Click ",insert:"Ekle",insertTitle:"Bu alan\u0131n \xfcst\xfcne 'otomatik' tipinde yeni bir alan ekle (Ctrl+Ins)",insertSub:"Araya eklenecek alan\u0131n tipini se\xe7",object:"Nesne",ok:"Tamam",redo:"Yeniden yap (Ctrl+Shift+Z)",removeText:"Kald\u0131r",removeTitle:"Se\xe7ilen alanlar\u0131 kald\u0131r (Ctrl+Del)",removeField:"Bu alan\u0131 kald\u0131r (Ctrl+Del)",selectNode:"Bir nesne se\xe7...",showAll:"t\xfcm\xfcn\xfc g\xf6ster",showMore:"daha fazla g\xf6ster",showMoreStatus:"${totalChilds} alan\u0131n ${visibleChilds} alt alanlar\u0131 g\xf6steriliyor",sort:"S\u0131rala",sortTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 s\u0131rala",sortTitleShort:"\u0130\xe7erikleri s\u0131rala",sortFieldLabel:"Alan:",sortDirectionLabel:"Y\xf6n:",sortFieldTitle:"Diziyi veya nesneyi s\u0131ralamak i\xe7in i\xe7 i\xe7e ge\xe7mi\u015f alan\u0131 se\xe7in",sortAscending:"Artan",sortAscendingTitle:"Se\xe7ili alan\u0131 artan d\xfczende s\u0131rala",sortDescending:"Azalan",sortDescendingTitle:"Se\xe7ili alan\u0131 azalan d\xfczende s\u0131rala",string:"Karakter Dizisi",transform:"D\xf6n\xfc\u015ft\xfcr",transformTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 filtrele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformTitleShort:"\u0130\xe7erikleri filterele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformQueryTitle:"JMESPath sorgusu gir",transformWizardLabel:"Sihirbaz",transformWizardFilter:"Filtre",transformWizardSortBy:"S\u0131rala",transformWizardSelectFields:"Alanlar\u0131 se\xe7",transformQueryLabel:"Sorgu",transformPreviewLabel:"\xd6nizleme",type:"Tip",typeTitle:"Bu alan\u0131n tipini de\u011fi\u015ftir",openUrl:"URL'i yeni bir pencerede a\xe7mak i\xe7in Ctrl+Click veya Ctrl+Enter",undo:"Son de\u011fi\u015fikli\u011fi geri al (Ctrl+Z)",validationCannotMove:"Alt alan olarak ta\u015f\u0131nam\u0131yor",autoType:'Alan tipi "otomatik". Alan t\xfcr\xfc otomatik olarak de\u011ferden belirlenirve bir dize, say\u0131, boolean veya null olabilir.',objectType:'Alan tipi "nesne". Bir nesne, s\u0131ralanmam\u0131\u015f bir anahtar / de\u011fer \xe7ifti k\xfcmesi i\xe7erir.',arrayType:'Alan tipi "dizi". Bir dizi, d\xfczenli de\u011ferler koleksiyonu i\xe7erir.',stringType:'Alan tipi "karakter dizisi". Alan t\xfcr\xfc de\u011ferden belirlenmez,ancak her zaman karakter dizisi olarak d\xf6nd\xfcr\xfcl\xfcr.',modeCodeText:"Kod",modeCodeTitle:"Kod vurgulay\u0131c\u0131ya ge\xe7",modeFormText:"Form",modeFormTitle:"Form d\xfczenleyiciye ge\xe7",modeTextText:"Metin",modeTextTitle:"D\xfcz metin d\xfczenleyiciye ge\xe7",modeTreeText:"A\u011fa\xe7",modeTreeTitle:"A\u011fa\xe7 d\xfczenleyiciye ge\xe7",modeViewText:"G\xf6r\xfcn\xfcm",modeViewTitle:"A\u011fa\xe7 g\xf6r\xfcn\xfcm\xfcne ge\xe7",examples:"\xd6rnekler",default:"Varsay\u0131lan"},ja:{array:"\u914d\u5217",auto:"\u30aa\u30fc\u30c8",appendText:"\u8ffd\u52a0",appendTitle:'\u6b21\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',appendSubmenuTitle:"\u8ffd\u52a0\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",appendTitleAuto:'"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',ascending:"\u6607\u9806",ascendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u6607\u9806\u306b\u4e26\u3079\u66ff\u3048",actionsMenu:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304f (Ctrl+M)",collapseAll:"\u3059\u3079\u3066\u3092\u6298\u308a\u305f\u305f\u3080",descending:"\u964d\u9806",descendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u964d\u9806\u306b\u4e26\u3079\u66ff\u3048",drag:"\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u79fb\u52d5 (Alt+Shift+Arrows)",duplicateKey:"\u8907\u88fd\u30ad\u30fc",duplicateText:"\u8907\u88fd",duplicateTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateFieldError:"\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304c\u91cd\u8907\u3057\u3066\u3044\u307e\u3059",cannotParseFieldError:"JSON\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",cannotParseValueError:"JSON\u306e\u5024\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",empty:"\u7a7a",expandAll:"\u3059\u3079\u3066\u3092\u5c55\u958b",expandTitle:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080 (Ctrl+E). \nCtrl+Click \u3067\u3059\u3079\u3066\u306e\u5b50\u8981\u7d20\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080",insert:"\u633f\u5165",insertTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u524d\u306b\u65b0\u3057\u3044\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u633f\u5165 (Ctrl+Ins)",insertSub:"\u633f\u5165\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e",object:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",ok:"\u5b9f\u884c",redo:"\u3084\u308a\u76f4\u3059 (Ctrl+Shift+Z)",removeText:"\u524a\u9664",removeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",removeField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",selectNode:"\u30ce\u30fc\u30c9\u3092\u9078\u629e...",showAll:"\u3059\u3079\u3066\u3092\u8868\u793a",showMore:"\u3082\u3063\u3068\u898b\u308b",showMoreStatus:"${totalChilds}\u500b\u306e\u30a2\u30a4\u30c6\u30e0\u306e\u3046\u3061 ${visibleChilds}\u500b\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002",sort:"\u4e26\u3079\u66ff\u3048",sortTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u4e26\u3079\u66ff\u3048",sortTitleShort:"\u4e26\u3079\u66ff\u3048",sortFieldLabel:"\u30d5\u30a3\u30fc\u30eb\u30c9:",sortDirectionLabel:"\u9806\u5e8f:",sortFieldTitle:"\u914d\u5217\u307e\u305f\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e26\u3073\u66ff\u3048\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",sortAscending:"\u6607\u9806",sortAscendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6607\u9806\u306b\u4e26\u3073\u66ff\u3048",sortDescending:"\u964d\u9806",sortDescendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u964d\u9806\u306b\u4e26\u3073\u66ff\u3048",string:"\u6587\u5b57\u5217",transform:"\u5909\u63db",transformTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",transformTitleShort:"\u5185\u5bb9\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",extract:"\u62bd\u51fa",extractTitle:"${type}\u3092\u62bd\u51fa",transformQueryTitle:"JMESPath\u30af\u30a8\u30ea\u3092\u5165\u529b",transformWizardLabel:"\u30a6\u30a3\u30b6\u30fc\u30c9",transformWizardFilter:"\u30d5\u30a3\u30eb\u30bf\u30fc",transformWizardSortBy:"\u4e26\u3073\u66ff\u3048",transformWizardSelectFields:"\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",transformQueryLabel:"\u30af\u30a8\u30ea",transformPreviewLabel:"\u30d7\u30ec\u30d3\u30e5\u30fc",type:"\u578b",typeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u5909\u66f4",openUrl:"Ctrl+Click \u307e\u305f\u306f Ctrl+Enter \u3067 \u65b0\u898f\u30a6\u30a3\u30f3\u30c9\u30a6\u3067URL\u3092\u958b\u304f",undo:"\u5143\u306b\u623b\u3059 (Ctrl+Z)",validationCannotMove:"\u5b50\u8981\u7d20\u306b\u79fb\u52d5\u3067\u304d\u307e\u305b\u3093 ",autoType:"\u30aa\u30fc\u30c8\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u306f\u5024\u304b\u3089\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002 (\u6587\u5b57\u5217\u30fb\u6570\u5024\u30fb\u30d6\u30fc\u30eb\u30fbnull)",objectType:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff1a \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u306a\u3044\u30ad\u30fc\u3068\u5024\u306e\u30da\u30a2\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002",arrayType:"\u914d\u5217\uff1a \u914d\u5217\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5024\u306e\u96c6\u5408\u4f53\u3067\u3059\u3002",stringType:"\u6587\u5b57\u5217\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u578b\u306f\u5024\u304b\u3089\u6c7a\u5b9a\u3055\u308c\u307e\u305b\u3093\u304c\u3001\u5e38\u306b\u6587\u5b57\u5217\u3068\u3057\u3066\u8fd4\u3055\u308c\u307e\u3059\u3002",modeCodeText:"\u30b3\u30fc\u30c9\u30e2\u30fc\u30c9",modeCodeTitle:"\u30cf\u30a4\u30e9\u30a4\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeFormText:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9",modeFormTitle:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTextText:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9",modeTextTitle:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTreeText:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9",modeTreeTitle:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeViewText:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9",modeViewTitle:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modePreviewText:"\u30d7\u30ec\u30d3\u30e5\u30fc",modePreviewTitle:"\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u5207\u308a\u66ff\u3048",examples:"\u4f8b",default:"\u30c7\u30d5\u30a9\u30eb\u30c8"},"fr-FR":{array:"Liste",auto:"Auto",appendText:"Ajouter",appendTitle:"Ajouter un champ de type 'auto' apr\xe8s ce champ (Ctrl+Shift+Ins)",appendSubmenuTitle:"S\xe9lectionner le type du champ \xe0 ajouter",appendTitleAuto:"Ajouter un champ de type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendant",ascendingTitle:"Trier les enfants de ce ${type} par ordre ascendant",actionsMenu:"Ouvrir le menu des actions (Ctrl+M)",collapseAll:"Regrouper",descending:"Descendant",descendingTitle:"Trier les enfants de ce ${type} par ordre descendant",drag:"D\xe9placer (Alt+Shift+Arrows)",duplicateKey:"Dupliquer la cl\xe9",duplicateText:"Dupliquer",duplicateTitle:"Dupliquer les champs s\xe9lectionn\xe9s (Ctrl+D)",duplicateField:"Dupliquer ce champ (Ctrl+D)",duplicateFieldError:"Dupliquer le nom de champ",cannotParseFieldError:"Champ impossible \xe0 parser en JSON",cannotParseValueError:"Valeur impossible \xe0 parser en JSON",empty:"vide",expandAll:"\xc9tendre",expandTitle:"\xc9tendre/regrouper ce champ (Ctrl+E). \nCtrl+Click pour \xe9tendre/regrouper avec tous les champs.",insert:"Ins\xe9rer",insertTitle:"Ins\xe9rer un champ de type 'auto' avant ce champ (Ctrl+Ins)",insertSub:"S\xe9lectionner le type de champ \xe0 ins\xe9rer",object:"Objet",ok:"Ok",redo:"Rejouer (Ctrl+Shift+Z)",removeText:"Supprimer",removeTitle:"Supprimer les champs s\xe9lectionn\xe9s (Ctrl+Del)",removeField:"Supprimer ce champ (Ctrl+Del)",searchTitle:"Rechercher champs et valeurs",searchNextResultTitle:"R\xe9sultat suivant (Enter)",searchPreviousResultTitle:"R\xe9sultat pr\xe9c\xe9dent (Shift + Enter)",selectNode:"S\xe9lectionner un n\u0153ud...",showAll:"voir tout",showMore:"voir plus",showMoreStatus:"${visibleChilds} \xe9l\xe9ments affich\xe9s de ${totalChilds}.",sort:"Trier",sortTitle:"Trier les champs de ce ${type}",sortTitleShort:"Trier",sortFieldLabel:"Champ:",sortDirectionLabel:"Direction:",sortFieldTitle:"S\xe9lectionner les champs permettant de trier les listes et objet",sortAscending:"Ascendant",sortAscendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre ascendant",sortDescending:"Descendant",sortDescendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre descendant",string:"Cha\xeene",transform:"Transformer",transformTitle:"Filtrer, trier, or transformer les enfants de ce ${type}",transformTitleShort:"Filtrer, trier ou transformer le contenu",extract:"Extraire",extractTitle:"Extraire ce ${type}",transformQueryTitle:"Saisir une requ\xeate JMESPath",transformWizardLabel:"Assistant",transformWizardFilter:"Filtrer",transformWizardSortBy:"Trier par",transformWizardSelectFields:"S\xe9lectionner les champs",transformQueryLabel:"Requ\xeate",transformPreviewLabel:"Pr\xe9visualisation",type:"Type",typeTitle:"Changer le type de ce champ",openUrl:"Ctrl+Click ou Ctrl+Enter pour ouvrir l'url dans une autre fen\xeatre",undo:"Annuler la derni\xe8re action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Champe de type "auto". Ce type de champ est automatiquement d\xe9termin\xe9 en fonction de la valeur et peut \xeatre de type "cha\xeene", "nombre", "bool\xe9en" ou null.',objectType:'Champ de type "objet". Un objet contient un ensemble non ordonn\xe9 de paires cl\xe9/valeur.',arrayType:'Champ de type "liste". Une liste contient une collection ordonn\xe9e de valeurs.',stringType:'Champ de type "cha\xeene". Ce type de champ n\'est pas d\xe9termin\xe9 en fonction de la valeur, mais retourne syst\xe9matiquement une cha\xeene de caract\xe8res.',modeEditorTitle:"Changer mode d'\xe9dition",modeCodeText:"Code",modeCodeTitle:"Activer surlignage code",modeFormText:"Formulaire",modeFormTitle:"Activer formulaire",modeTextText:"Texte",modeTextTitle:"Activer \xe9diteur texte",modeTreeText:"Arbre",modeTreeTitle:"Activer \xe9diteur arbre",modeViewText:"Lecture seule",modeViewTitle:"Activer vue arbre",modePreviewText:"Pr\xe9visualisation",modePreviewTitle:"Activer mode pr\xe9visualiser",examples:"Exemples",default:"D\xe9faut"}},o="undefined"!=typeof navigator?navigator.language||navigator.userLanguage:void 0,a=i.find((function(t){return t===o}))||"en";function s(t){if(t){var e=i.find((function(e){return e===t}));e?a=e:console.error("Language not found")}}function c(t){if(t){var e=function(e){i.find((function(t){return t===e}))||i.push(e),r[e]=Object.assign({},r.en,r[e],t[e])};for(var n in t)e(n)}}function l(t,e,n){n||(n=a);var i=r[n][t];if(e)for(t in e)i=i.replace("${"+t+"}",e[t]);return i||t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var i=document.body,r=10485760,o=2e4,a=2147483648},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(12),r=n(0),o=n(1);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom={};var i=this,r=this.dom;this.anchor=void 0,this.items=e,this.eventListeners={},this.selection=void 0,this.onClose=n?n.close:void 0;var a=document.createElement("div");a.className="jsoneditor-contextmenu-root",r.root=a;var s=document.createElement("div");s.className="jsoneditor-contextmenu",r.menu=s,a.appendChild(s);var c=document.createElement("ul");c.className="jsoneditor-menu",s.appendChild(c),r.list=c,r.items=[];var l=document.createElement("button");l.type="button",r.focusButton=l;var u=document.createElement("li");u.style.overflow="hidden",u.style.height="0",u.appendChild(l),c.appendChild(u),function t(e,n,r){r.forEach((function(r){if("separator"===r.type){var a=document.createElement("div");a.className="jsoneditor-separator";var s=document.createElement("li");s.appendChild(a),e.appendChild(s)}else{var c={},l=document.createElement("li");e.appendChild(l);var u=document.createElement("button");if(u.type="button",u.className=r.className,c.button=u,r.title&&(u.title=r.title),r.click&&(u.onclick=function(t){t.preventDefault(),i.hide(),r.click()}),l.appendChild(u),r.submenu){var h=document.createElement("div");h.className="jsoneditor-icon",u.appendChild(h);var d,p=document.createElement("div");if(p.className="jsoneditor-text"+(r.click?"":" jsoneditor-right-margin"),p.appendChild(document.createTextNode(r.text)),u.appendChild(p),r.click){u.className+=" jsoneditor-default";var f=document.createElement("button");f.type="button",c.buttonExpand=f,f.className="jsoneditor-expand",f.innerHTML='<div class="jsoneditor-expand"></div>',l.appendChild(f),r.submenuTitle&&(f.title=r.submenuTitle),d=f}else{var g=document.createElement("div");g.className="jsoneditor-expand",u.appendChild(g),d=u}d.onclick=function(t){t.preventDefault(),i._onExpandItem(c),d.focus()};var m=[];c.subItems=m;var v=document.createElement("ul");c.ul=v,v.className="jsoneditor-menu",v.style.height="0",l.appendChild(v),t(v,m,r.submenu)}else u.innerHTML='<div class="jsoneditor-icon"></div><div class="jsoneditor-text">'+Object(o.c)(r.text)+"</div>";n.push(c)}}))}(c,this.dom.items,e),this.maxHeight=0,e.forEach((function(t){i.maxHeight=Math.max(i.maxHeight,24*(e.length+(t.submenu?t.submenu.length:0)))}))}var e;return(e=[{key:"_getVisibleButtons",value:function(){var t=[],e=this;return this.dom.items.forEach((function(n){t.push(n.button),n.buttonExpand&&t.push(n.buttonExpand),n.subItems&&n===e.expandedItem&&n.subItems.forEach((function(e){t.push(e.button),e.buttonExpand&&t.push(e.buttonExpand)}))})),t}},{key:"show",value:function(e,n,o){this.hide();var a=!0,s=e.parentNode,c=e.getBoundingClientRect(),l=s.getBoundingClientRect(),u=n.getBoundingClientRect(),h=this;this.dom.absoluteAnchor=Object(i.a)(e,n,(function(){h.hide()})),c.bottom+this.maxHeight<u.bottom||c.top-this.maxHeight>u.top&&(a=!1);var d=o?0:c.top-l.top;if(a){var p=e.offsetHeight;this.dom.menu.style.left="0",this.dom.menu.style.top=d+p+"px",this.dom.menu.style.bottom=""}else this.dom.menu.style.left="0",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px";this.dom.absoluteAnchor.appendChild(this.dom.root),this.selection=Object(r.getSelection)(),this.anchor=e,setTimeout((function(){h.dom.focusButton.focus()}),0),t.visibleMenu&&t.visibleMenu.hide(),t.visibleMenu=this}},{key:"hide",value:function(){this.dom.absoluteAnchor&&(this.dom.absoluteAnchor.destroy(),delete this.dom.absoluteAnchor),this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose()),t.visibleMenu===this&&(t.visibleMenu=void 0)}},{key:"_onExpandItem",value:function(t){var e=this,n=t===this.expandedItem,i=this.expandedItem;if(i&&(i.ul.style.height="0",i.ul.style.padding="",setTimeout((function(){e.expandedItem!==i&&(i.ul.style.display="",Object(r.removeClassName)(i.ul.parentNode,"jsoneditor-selected"))}),300),this.expandedItem=void 0),!n){var o=t.ul;o.style.display="block",setTimeout((function(){if(e.expandedItem===t){for(var n=0,i=0;i<o.childNodes.length;i++)n+=o.childNodes[i].clientHeight;o.style.height=n+"px",o.style.padding="5px 10px"}}),0),Object(r.addClassName)(o.parentNode,"jsoneditor-selected"),this.expandedItem=t}}},{key:"_onKeyDown",value:function(t){var e,n,i,o,a=t.target,s=t.which,c=!1;27===s?(this.selection&&Object(r.setSelection)(this.selection),this.anchor&&this.anchor.focus(),this.hide(),c=!0):9===s?t.shiftKey?0===(n=(e=this._getVisibleButtons()).indexOf(a))&&(e[e.length-1].focus(),c=!0):(n=(e=this._getVisibleButtons()).indexOf(a))===e.length-1&&(e[0].focus(),c=!0):37===s?("jsoneditor-expand"===a.className&&(n=(e=this._getVisibleButtons()).indexOf(a),(i=e[n-1])&&i.focus()),c=!0):38===s?(n=(e=this._getVisibleButtons()).indexOf(a),(i=e[n-1])&&"jsoneditor-expand"===i.className&&(i=e[n-2]),i||(i=e[e.length-1]),i&&i.focus(),c=!0):39===s?(n=(e=this._getVisibleButtons()).indexOf(a),(o=e[n+1])&&"jsoneditor-expand"===o.className&&o.focus(),c=!0):40===s&&(n=(e=this._getVisibleButtons()).indexOf(a),(o=e[n+1])&&"jsoneditor-expand"===o.className&&(o=e[n+2]),o||(o=e[0]),o&&(o.focus(),c=!0),c=!0),c&&(t.stopPropagation(),t.preventDefault())}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();a.visibleMenu=void 0},function(t,e,n){!function(t){"use strict";function e(t){return null!==t&&"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t,r){if(t===r)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(r))return!1;if(!0===e(t)){if(t.length!==r.length)return!1;for(var o=0;o<t.length;o++)if(!1===i(t[o],r[o]))return!1;return!0}if(!0===n(t)){var a={};for(var s in t)if(hasOwnProperty.call(t,s)){if(!1===i(t[s],r[s]))return!1;a[s]=!0}for(var c in r)if(hasOwnProperty.call(r,c)&&!0!==a[c])return!1;return!0}return!1}function r(t){if(""===t||!1===t||null===t)return!0;if(e(t)&&0===t.length)return!0;if(n(t)){for(var i in t)if(t.hasOwnProperty(i))return!1;return!0}return!1}var o;o="function"==typeof String.prototype.trimLeft?function(t){return t.trimLeft()}:function(t){return t.match(/^\s*(.*)/)[1]};var a=0,s=2,c="UnquotedIdentifier",l="QuotedIdentifier",u="Rbracket",h="Rparen",d="Comma",p="Colon",f="Rbrace",g="Number",m="Current",v="Expref",y="Pipe",b="EQ",_="GT",C="LT",x="GTE",w="LTE",I="NE",A="Flatten",P="Star",O="Filter",M="Dot",S="Lbrace",k="Lbracket",E="Lparen",L="Literal",T={".":M,"*":P,",":d,":":p,"{":S,"}":f,"]":u,"(":E,")":h,"@":m},R={"<":!0,">":!0,"=":!0,"!":!0},N={" ":!0,"\t":!0,"\n":!0};function B(t){return t>="0"&&t<="9"||"-"===t}function j(){}j.prototype={tokenize:function(t){var e,n,i,r,o=[];for(this._current=0;this._current<t.length;)if((r=t[this._current])>="a"&&r<="z"||r>="A"&&r<="Z"||"_"===r)e=this._current,n=this._consumeUnquotedIdentifier(t),o.push({type:c,value:n,start:e});else if(void 0!==T[t[this._current]])o.push({type:T[t[this._current]],value:t[this._current],start:this._current}),this._current++;else if(B(t[this._current]))i=this._consumeNumber(t),o.push(i);else if("["===t[this._current])i=this._consumeLBracket(t),o.push(i);else if('"'===t[this._current])e=this._current,n=this._consumeQuotedIdentifier(t),o.push({type:l,value:n,start:e});else if("'"===t[this._current])e=this._current,n=this._consumeRawStringLiteral(t),o.push({type:L,value:n,start:e});else if("`"===t[this._current]){e=this._current;var a=this._consumeLiteral(t);o.push({type:L,value:a,start:e})}else if(void 0!==R[t[this._current]])o.push(this._consumeOperator(t));else if(void 0!==N[t[this._current]])this._current++;else if("&"===t[this._current])e=this._current,this._current++,"&"===t[this._current]?(this._current++,o.push({type:"And",value:"&&",start:e})):o.push({type:v,value:"&",start:e});else{if("|"!==t[this._current]){var s=new Error("Unknown character:"+t[this._current]);throw s.name="LexerError",s}e=this._current,this._current++,"|"===t[this._current]?(this._current++,o.push({type:"Or",value:"||",start:e})):o.push({type:y,value:"|",start:e})}return o},_consumeUnquotedIdentifier:function(t){var e,n=this._current;for(this._current++;this._current<t.length&&((e=t[this._current])>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e);)this._current++;return t.slice(n,this._current)},_consumeQuotedIdentifier:function(t){var e=this._current;this._current++;for(var n=t.length;'"'!==t[this._current]&&this._current<n;){var i=this._current;"\\"!==t[i]||"\\"!==t[i+1]&&'"'!==t[i+1]?i++:i+=2,this._current=i}return this._current++,JSON.parse(t.slice(e,this._current))},_consumeRawStringLiteral:function(t){var e=this._current;this._current++;for(var n=t.length;"'"!==t[this._current]&&this._current<n;){var i=this._current;"\\"!==t[i]||"\\"!==t[i+1]&&"'"!==t[i+1]?i++:i+=2,this._current=i}return this._current++,t.slice(e+1,this._current-1).replace("\\'","'")},_consumeNumber:function(t){var e=this._current;this._current++;for(var n=t.length;B(t[this._current])&&this._current<n;)this._current++;var i=parseInt(t.slice(e,this._current));return{type:g,value:i,start:e}},_consumeLBracket:function(t){var e=this._current;return this._current++,"?"===t[this._current]?(this._current++,{type:O,value:"[?",start:e}):"]"===t[this._current]?(this._current++,{type:A,value:"[]",start:e}):{type:k,value:"[",start:e}},_consumeOperator:function(t){var e=this._current,n=t[e];return this._current++,"!"===n?"="===t[this._current]?(this._current++,{type:I,value:"!=",start:e}):{type:"Not",value:"!",start:e}:"<"===n?"="===t[this._current]?(this._current++,{type:w,value:"<=",start:e}):{type:C,value:"<",start:e}:">"===n?"="===t[this._current]?(this._current++,{type:x,value:">=",start:e}):{type:_,value:">",start:e}:"="===n&&"="===t[this._current]?(this._current++,{type:b,value:"==",start:e}):void 0},_consumeLiteral:function(t){this._current++;for(var e,n=this._current,i=t.length;"`"!==t[this._current]&&this._current<i;){var r=this._current;"\\"!==t[r]||"\\"!==t[r+1]&&"`"!==t[r+1]?r++:r+=2,this._current=r}var a=o(t.slice(n,this._current));return a=a.replace("\\`","`"),e=this._looksLikeJSON(a)?JSON.parse(a):JSON.parse('"'+a+'"'),this._current++,e},_looksLikeJSON:function(t){if(""===t)return!1;if('[{"'.indexOf(t[0])>=0)return!0;if(["true","false","null"].indexOf(t)>=0)return!0;if(!("-0123456789".indexOf(t[0])>=0))return!1;try{return JSON.parse(t),!0}catch(e){return!1}}};var D={};function F(){}function z(t){this.runtime=t}function V(t){this._interpreter=t,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[a]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[a]}]},contains:{_func:this._functionContains,_signature:[{types:[s,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[s]},{types:[s]}]},floor:{_func:this._functionFloor,_signature:[{types:[a]}]},length:{_func:this._functionLength,_signature:[{types:[s,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[s]},{types:[s]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[s]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[s,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}D.EOF=0,D.UnquotedIdentifier=0,D.QuotedIdentifier=0,D.Rbracket=0,D.Rparen=0,D.Comma=0,D.Rbrace=0,D.Number=0,D.Current=0,D.Expref=0,D.Pipe=1,D.Or=2,D.And=3,D.EQ=5,D.GT=5,D.LT=5,D.GTE=5,D.LTE=5,D.NE=5,D.Flatten=9,D.Star=20,D.Filter=21,D.Dot=40,D.Not=45,D.Lbrace=50,D.Lbracket=55,D.Lparen=60,F.prototype={parse:function(t){this._loadTokens(t),this.index=0;var e=this.expression(0);if("EOF"!==this._lookahead(0)){var n=this._lookaheadToken(0),i=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw i.name="ParserError",i}return e},_loadTokens:function(t){var e=(new j).tokenize(t);e.push({type:"EOF",value:"",start:t.length}),this.tokens=e},expression:function(t){var e=this._lookaheadToken(0);this._advance();for(var n=this.nud(e),i=this._lookahead(0);t<D[i];)this._advance(),n=this.led(i,n),i=this._lookahead(0);return n},_lookahead:function(t){return this.tokens[this.index+t].type},_lookaheadToken:function(t){return this.tokens[this.index+t]},_advance:function(){this.index++},nud:function(t){var e,n;switch(t.type){case L:return{type:"Literal",value:t.value};case c:return{type:"Field",name:t.value};case l:var i={type:"Field",name:t.value};if(this._lookahead(0)===E)throw new Error("Quoted identifier not allowed for function names.");return i;case"Not":return{type:"NotExpression",children:[e=this.expression(D.Not)]};case P:return e=null,{type:"ValueProjection",children:[{type:"Identity"},e=this._lookahead(0)===u?{type:"Identity"}:this._parseProjectionRHS(D.Star)]};case O:return this.led(t.type,{type:"Identity"});case S:return this._parseMultiselectHash();case A:return{type:"Projection",children:[{type:A,children:[{type:"Identity"}]},e=this._parseProjectionRHS(D.Flatten)]};case k:return this._lookahead(0)===g||this._lookahead(0)===p?(e=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},e)):this._lookahead(0)===P&&this._lookahead(1)===u?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},e=this._parseProjectionRHS(D.Star)]}):this._parseMultiselectList();case m:return{type:m};case v:return{type:"ExpressionReference",children:[n=this.expression(D.Expref)]};case E:for(var r=[];this._lookahead(0)!==h;)this._lookahead(0)===m?(n={type:m},this._advance()):n=this.expression(0),r.push(n);return this._match(h),r[0];default:this._errorToken(t)}},led:function(t,e){var n;switch(t){case M:var i=D.Dot;return this._lookahead(0)!==P?{type:"Subexpression",children:[e,n=this._parseDotRHS(i)]}:(this._advance(),{type:"ValueProjection",children:[e,n=this._parseProjectionRHS(i)]});case y:return n=this.expression(D.Pipe),{type:y,children:[e,n]};case"Or":return{type:"OrExpression",children:[e,n=this.expression(D.Or)]};case"And":return{type:"AndExpression",children:[e,n=this.expression(D.And)]};case E:for(var r,o=e.name,a=[];this._lookahead(0)!==h;)this._lookahead(0)===m?(r={type:m},this._advance()):r=this.expression(0),this._lookahead(0)===d&&this._match(d),a.push(r);return this._match(h),{type:"Function",name:o,children:a};case O:var s=this.expression(0);return this._match(u),{type:"FilterProjection",children:[e,n=this._lookahead(0)===A?{type:"Identity"}:this._parseProjectionRHS(D.Filter),s]};case A:return{type:"Projection",children:[{type:A,children:[e]},this._parseProjectionRHS(D.Flatten)]};case b:case I:case _:case x:case C:case w:return this._parseComparator(e,t);case k:var c=this._lookaheadToken(0);return c.type===g||c.type===p?(n=this._parseIndexExpression(),this._projectIfSlice(e,n)):(this._match(P),this._match(u),{type:"Projection",children:[e,n=this._parseProjectionRHS(D.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(t){if(this._lookahead(0)!==t){var e=this._lookaheadToken(0),n=new Error("Expected "+t+", got: "+e.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(t){var e=new Error("Invalid token ("+t.type+'): "'+t.value+'"');throw e.name="ParserError",e},_parseIndexExpression:function(){if(this._lookahead(0)===p||this._lookahead(1)===p)return this._parseSliceExpression();var t={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(u),t},_projectIfSlice:function(t,e){var n={type:"IndexExpression",children:[t,e]};return"Slice"===e.type?{type:"Projection",children:[n,this._parseProjectionRHS(D.Star)]}:n},_parseSliceExpression:function(){for(var t=[null,null,null],e=0,n=this._lookahead(0);n!==u&&e<3;){if(n===p)e++,this._advance();else{if(n!==g){var i=this._lookahead(0),r=new Error("Syntax error, unexpected token: "+i.value+"("+i.type+")");throw r.name="Parsererror",r}t[e]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(u),{type:"Slice",children:t}},_parseComparator:function(t,e){return{type:"Comparator",name:e,children:[t,this.expression(D[e])]}},_parseDotRHS:function(t){var e=this._lookahead(0);return[c,l,P].indexOf(e)>=0?this.expression(t):e===k?(this._match(k),this._parseMultiselectList()):e===S?(this._match(S),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(t){var e;if(D[this._lookahead(0)]<10)e={type:"Identity"};else if(this._lookahead(0)===k)e=this.expression(t);else if(this._lookahead(0)===O)e=this.expression(t);else{if(this._lookahead(0)!==M){var n=this._lookaheadToken(0),i=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw i.name="ParserError",i}this._match(M),e=this._parseDotRHS(t)}return e},_parseMultiselectList:function(){for(var t=[];this._lookahead(0)!==u;){var e=this.expression(0);if(t.push(e),this._lookahead(0)===d&&(this._match(d),this._lookahead(0)===u))throw new Error("Unexpected token Rbracket")}return this._match(u),{type:"MultiSelectList",children:t}},_parseMultiselectHash:function(){for(var t,e,n,i=[],r=[c,l];;){if(t=this._lookaheadToken(0),r.indexOf(t.type)<0)throw new Error("Expecting an identifier token, got: "+t.type);if(e=t.value,this._advance(),this._match(p),n=this.expression(0),i.push({type:"KeyValuePair",name:e,value:n}),this._lookahead(0)===d)this._match(d);else if(this._lookahead(0)===f){this._match(f);break}}return{type:"MultiSelectHash",children:i}}},z.prototype={search:function(t,e){return this.visit(t,e)},visit:function(t,o){var a,s,c,l,u,h,d,p,f;switch(t.type){case"Field":return null===o?null:n(o)?void 0===(h=o[t.name])?null:h:null;case"Subexpression":for(c=this.visit(t.children[0],o),f=1;f<t.children.length;f++)if(null===(c=this.visit(t.children[1],c)))return null;return c;case"IndexExpression":return d=this.visit(t.children[0],o),this.visit(t.children[1],d);case"Index":if(!e(o))return null;var g=t.value;return g<0&&(g=o.length+g),void 0===(c=o[g])&&(c=null),c;case"Slice":if(!e(o))return null;var P=t.children.slice(0),O=this.computeSliceParams(o.length,P),M=O[0],S=O[1],k=O[2];if(c=[],k>0)for(f=M;f<S;f+=k)c.push(o[f]);else for(f=M;f>S;f+=k)c.push(o[f]);return c;case"Projection":var E=this.visit(t.children[0],o);if(!e(E))return null;for(p=[],f=0;f<E.length;f++)null!==(s=this.visit(t.children[1],E[f]))&&p.push(s);return p;case"ValueProjection":if(!n(E=this.visit(t.children[0],o)))return null;p=[];var L=function(t){for(var e=Object.keys(t),n=[],i=0;i<e.length;i++)n.push(t[e[i]]);return n}(E);for(f=0;f<L.length;f++)null!==(s=this.visit(t.children[1],L[f]))&&p.push(s);return p;case"FilterProjection":if(!e(E=this.visit(t.children[0],o)))return null;var T=[],R=[];for(f=0;f<E.length;f++)r(a=this.visit(t.children[2],E[f]))||T.push(E[f]);for(var N=0;N<T.length;N++)null!==(s=this.visit(t.children[1],T[N]))&&R.push(s);return R;case"Comparator":switch(l=this.visit(t.children[0],o),u=this.visit(t.children[1],o),t.name){case b:c=i(l,u);break;case I:c=!i(l,u);break;case _:c=l>u;break;case x:c=l>=u;break;case C:c=l<u;break;case w:c=l<=u;break;default:throw new Error("Unknown comparator: "+t.name)}return c;case A:var B=this.visit(t.children[0],o);if(!e(B))return null;var j=[];for(f=0;f<B.length;f++)e(s=B[f])?j.push.apply(j,s):j.push(s);return j;case"Identity":return o;case"MultiSelectList":if(null===o)return null;for(p=[],f=0;f<t.children.length;f++)p.push(this.visit(t.children[f],o));return p;case"MultiSelectHash":if(null===o)return null;var D;for(p={},f=0;f<t.children.length;f++)p[(D=t.children[f]).name]=this.visit(D.value,o);return p;case"OrExpression":return r(a=this.visit(t.children[0],o))&&(a=this.visit(t.children[1],o)),a;case"AndExpression":return!0===r(l=this.visit(t.children[0],o))?l:this.visit(t.children[1],o);case"NotExpression":return r(l=this.visit(t.children[0],o));case"Literal":return t.value;case y:return d=this.visit(t.children[0],o),this.visit(t.children[1],d);case m:return o;case"Function":var F=[];for(f=0;f<t.children.length;f++)F.push(this.visit(t.children[f],o));return this.runtime.callFunction(t.name,F);case"ExpressionReference":var z=t.children[0];return z.jmespathType=v,z;default:throw new Error("Unknown node type: "+t.type)}},computeSliceParams:function(t,e){var n=e[0],i=e[1],r=e[2],o=[null,null,null];if(null===r)r=1;else if(0===r){var a=new Error("Invalid slice, step cannot be 0");throw a.name="RuntimeError",a}var s=r<0;return n=null===n?s?t-1:0:this.capSliceRange(t,n,r),i=null===i?s?-1:t:this.capSliceRange(t,i,r),o[0]=n,o[1]=i,o[2]=r,o},capSliceRange:function(t,e,n){return e<0?(e+=t)<0&&(e=n<0?-1:0):e>=t&&(e=n<0?t-1:t),e}},V.prototype={callFunction:function(t,e){var n=this.functionTable[t];if(void 0===n)throw new Error("Unknown function: "+t+"()");return this._validateArgs(t,e,n._signature),n._func.call(this,e)},_validateArgs:function(t,e,n){var i,r,o,a;if(n[n.length-1].variadic){if(e.length<n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+t+"() takes at least"+n.length+i+" but received "+e.length)}else if(e.length!==n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+t+"() takes "+n.length+i+" but received "+e.length);for(var s=0;s<n.length;s++){a=!1,r=n[s].types,o=this._getTypeName(e[s]);for(var c=0;c<r.length;c++)if(this._typeMatches(o,r[c],e[s])){a=!0;break}if(!a)throw new Error("TypeError: "+t+"() expected argument "+(s+1)+" to be type "+r+" but received type "+o+" instead.")}},_typeMatches:function(t,e,n){if(1===e)return!0;if(9!==e&&8!==e&&3!==e)return t===e;if(3===e)return 3===t;if(3===t){var i;8===e?i=a:9===e&&(i=s);for(var r=0;r<n.length;r++)if(!this._typeMatches(this._getTypeName(n[r]),i,n[r]))return!1;return!0}},_getTypeName:function(t){switch(Object.prototype.toString.call(t)){case"[object String]":return s;case"[object Number]":return a;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return t.jmespathType===v?6:4}},_functionStartsWith:function(t){return 0===t[0].lastIndexOf(t[1])},_functionEndsWith:function(t){var e=t[0],n=t[1];return-1!==e.indexOf(n,e.length-n.length)},_functionReverse:function(t){if(this._getTypeName(t[0])===s){for(var e=t[0],n="",i=e.length-1;i>=0;i--)n+=e[i];return n}var r=t[0].slice(0);return r.reverse(),r},_functionAbs:function(t){return Math.abs(t[0])},_functionCeil:function(t){return Math.ceil(t[0])},_functionAvg:function(t){for(var e=0,n=t[0],i=0;i<n.length;i++)e+=n[i];return e/n.length},_functionContains:function(t){return t[0].indexOf(t[1])>=0},_functionFloor:function(t){return Math.floor(t[0])},_functionLength:function(t){return n(t[0])?Object.keys(t[0]).length:t[0].length},_functionMap:function(t){for(var e=[],n=this._interpreter,i=t[0],r=t[1],o=0;o<r.length;o++)e.push(n.visit(i,r[o]));return e},_functionMerge:function(t){for(var e={},n=0;n<t.length;n++){var i=t[n];for(var r in i)e[r]=i[r]}return e},_functionMax:function(t){if(t[0].length>0){if(this._getTypeName(t[0][0])===a)return Math.max.apply(Math,t[0]);for(var e=t[0],n=e[0],i=1;i<e.length;i++)n.localeCompare(e[i])<0&&(n=e[i]);return n}return null},_functionMin:function(t){if(t[0].length>0){if(this._getTypeName(t[0][0])===a)return Math.min.apply(Math,t[0]);for(var e=t[0],n=e[0],i=1;i<e.length;i++)e[i].localeCompare(n)<0&&(n=e[i]);return n}return null},_functionSum:function(t){for(var e=0,n=t[0],i=0;i<n.length;i++)e+=n[i];return e},_functionType:function(t){switch(this._getTypeName(t[0])){case a:return"number";case s:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(t){return Object.keys(t[0])},_functionValues:function(t){for(var e=t[0],n=Object.keys(e),i=[],r=0;r<n.length;r++)i.push(e[n[r]]);return i},_functionJoin:function(t){return t[1].join(t[0])},_functionToArray:function(t){return 3===this._getTypeName(t[0])?t[0]:[t[0]]},_functionToString:function(t){return this._getTypeName(t[0])===s?t[0]:JSON.stringify(t[0])},_functionToNumber:function(t){var e,n=this._getTypeName(t[0]);return n===a?t[0]:n!==s||(e=+t[0],isNaN(e))?null:e},_functionNotNull:function(t){for(var e=0;e<t.length;e++)if(7!==this._getTypeName(t[e]))return t[e];return null},_functionSort:function(t){var e=t[0].slice(0);return e.sort(),e},_functionSortBy:function(t){var e=t[0].slice(0);if(0===e.length)return e;var n=this._interpreter,i=t[1],r=this._getTypeName(n.visit(i,e[0]));if([a,s].indexOf(r)<0)throw new Error("TypeError");for(var o=this,c=[],l=0;l<e.length;l++)c.push([l,e[l]]);c.sort((function(t,e){var a=n.visit(i,t[1]),s=n.visit(i,e[1]);if(o._getTypeName(a)!==r)throw new Error("TypeError: expected "+r+", received "+o._getTypeName(a));if(o._getTypeName(s)!==r)throw new Error("TypeError: expected "+r+", received "+o._getTypeName(s));return a>s?1:a<s?-1:t[0]-e[0]}));for(var u=0;u<c.length;u++)e[u]=c[u][1];return e},_functionMaxBy:function(t){for(var e,n,i=t[0],r=this.createKeyFunction(t[1],[a,s]),o=-1/0,c=0;c<i.length;c++)(n=r(i[c]))>o&&(o=n,e=i[c]);return e},_functionMinBy:function(t){for(var e,n,i=t[0],r=this.createKeyFunction(t[1],[a,s]),o=1/0,c=0;c<i.length;c++)(n=r(i[c]))<o&&(o=n,e=i[c]);return e},createKeyFunction:function(t,e){var n=this,i=this._interpreter;return function(r){var o=i.visit(t,r);if(e.indexOf(n._getTypeName(o))<0){var a="TypeError: expected one of "+e+", received "+n._getTypeName(o);throw new Error(a)}return o}}},t.tokenize=function(t){return(new j).tokenize(t)},t.compile=function(t){return(new F).parse(t)},t.search=function(t,e){var n=new F,i=new V,r=new z(i);i._interpreter=r;var o=n.parse(e);return r.search(o,t)},t.strictDeepEqual=i}(e)},function(t,e,n){"use strict";function i(t,e,n){var i=n?" !== ":" === ",r=n?" || ":" && ",o=n?"!":"",a=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+r+"typeof "+e+i+'"object"'+r+a+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+r+a+"("+e+" % 1)"+r+e+i+e+")";default:return"typeof "+e+i+'"'+t+'"'}}t.exports={copy:function(t,e){for(var n in e=e||{},t)e[n]=t[n];return e},checkDataType:i,checkDataTypes:function(t,e){switch(t.length){case 1:return i(t[0],e,!0);default:var n="",r=o(t);for(var a in r.array&&r.object&&(n=r.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer,r)n+=(n?" && ":"")+i(a,e,!0);return n}},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var o=e[i];(r[o]||"array"===t&&"array"===o)&&(n[n.length]=o)}if(n.length)return n}else{if(r[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:o,getProperty:c,escapeQuotes:l,equal:n(18),ucs2length:n(46),varOccurences:function(t,e){var n=t.match(new RegExp(e+="[^0-9]","g"));return n?n.length:0},varReplace:function(t,e,n){return e+="([^0-9])",n=n.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),n+"$1")},cleanUpCode:function(t){return t.replace(u,"").replace(h,"").replace(d,"if (!($1))")},finalCleanUpCode:function(t,e){var n=t.match(p);return n&&2==n.length&&(t=e?t.replace(g,"").replace(m,"return data;"):t.replace(f,"").replace("return errors === 0;","validate.errors = null; return true;")),(n=t.match(v))&&3===n.length?t.replace(y,""):t},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var n in t)if(e[n])return!0},schemaHasRulesExcept:function(t,e,n){if("boolean"==typeof t)return!t&&"not"!=n;for(var i in t)if(i!=n&&e[i])return!0},schemaUnknownRules:function(t,e){if("boolean"!=typeof t)for(var n in t)if(!e[n])return n},toQuotedString:b,getPathExpr:function(t,e,n,i){return x(t,n?"'/' + "+e+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,n){return x(t,b(n?"/"+w(e):c(e)))},getData:function(t,e,n){var i,r,o,a;if(""===t)return"rootData";if("/"==t[0]){if(!_.test(t))throw new Error("Invalid JSON-pointer: "+t);r=t,o="rootData"}else{if(!(a=t.match(C)))throw new Error("Invalid JSON-pointer: "+t);if(i=+a[1],"#"==(r=a[2])){if(i>=e)throw new Error("Cannot access property/index "+i+" levels up, current level is "+e);return n[e-i]}if(i>e)throw new Error("Cannot access data "+i+" levels up, current level is "+e);if(o="data"+(e-i||""),!r)return o}for(var s=o,l=r.split("/"),u=0;u<l.length;u++){var h=l[u];h&&(s+=" && "+(o+=c(I(h))))}return s},unescapeFragment:function(t){return I(decodeURIComponent(t))},unescapeJsonPointer:I,escapeFragment:function(t){return encodeURIComponent(w(t))},escapeJsonPointer:w};var r=o(["string","number","integer","boolean","null"]);function o(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function c(t){return"number"==typeof t?"["+t+"]":a.test(t)?"."+t:"['"+l(t)+"']"}function l(t){return t.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,p=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,g=/var errors = 0;|var vErrors = null;/g,m=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,v=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function b(t){return"'"+l(t)+"'"}var _=/^\/(?:[^~]|~0|~1)*$/,C=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(t,e){return'""'==t?e:(t+" + "+e).replace(/' \+ '/g,"")}function w(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function I(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(14),r=n.n(i),o=n(1),a=n(0);function s(t,e,n,i){var s=Array.isArray(e)?Object(a.getChildPaths)(e):[""],c=i&&i.path&&Object(a.contains)(s,i.path)?i.path:s[0],l=i&&i.direction||"asc",u='<div class="pico-modal-contents"><div class="pico-modal-header">'+Object(o.c)("sort")+"</div><form><table><tbody><tr>  <td>"+Object(o.c)("sortFieldLabel")+' </td>  <td class="jsoneditor-modal-input">  <div class="jsoneditor-select-wrapper">    <select id="field" title="'+Object(o.c)("sortFieldTitle")+'">    </select>  </div>  </td></tr><tr>  <td>'+Object(o.c)("sortDirectionLabel")+' </td>  <td class="jsoneditor-modal-input">  <div id="direction" class="jsoneditor-button-group"><input type="button" value="'+Object(o.c)("sortAscending")+'" title="'+Object(o.c)("sortAscendingTitle")+'" data-value="asc" class="jsoneditor-button-first jsoneditor-button-asc"/><input type="button" value="'+Object(o.c)("sortDescending")+'" title="'+Object(o.c)("sortDescendingTitle")+'" data-value="desc" class="jsoneditor-button-last jsoneditor-button-desc"/>  </div>  </td></tr><tr><td colspan="2" class="jsoneditor-modal-input jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+Object(o.c)("ok")+'" /></td></tr></tbody></table></form></div>';r()({parent:t,content:u,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-sort"}).afterCreate((function(t){var e=t.modalElem().querySelector("form"),i=t.modalElem().querySelector("#ok"),r=t.modalElem().querySelector("#field"),o=t.modalElem().querySelector("#direction");function a(t){o.value=t,o.className="jsoneditor-button-group jsoneditor-button-group-value-"+o.value}s.forEach((function(t){var e=document.createElement("option");e.text=function(t){return""===t?"@":"."===t[0]?t.slice(1):t}(t),e.value=t,r.appendChild(e)})),r.value=c||s[0],a(l||"asc"),o.onclick=function(t){a(t.target.getAttribute("data-value"))},i.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close(),n({path:r.value,direction:o.value})},e&&(e.onsubmit=i.onclick)})).afterClose((function(t){t.destroy()})).show()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(3),r=n(1);var o=function(){function t(e,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s={code:{text:Object(r.c)("modeCodeText"),title:Object(r.c)("modeCodeTitle"),click:function(){a("code")}},form:{text:Object(r.c)("modeFormText"),title:Object(r.c)("modeFormTitle"),click:function(){a("form")}},text:{text:Object(r.c)("modeTextText"),title:Object(r.c)("modeTextTitle"),click:function(){a("text")}},tree:{text:Object(r.c)("modeTreeText"),title:Object(r.c)("modeTreeTitle"),click:function(){a("tree")}},view:{text:Object(r.c)("modeViewText"),title:Object(r.c)("modeViewTitle"),click:function(){a("view")}},preview:{text:Object(r.c)("modePreviewText"),title:Object(r.c)("modePreviewTitle"),click:function(){a("preview")}}},c=[],l=0;l<n.length;l++){var u=n[l],h=s[u];if(!h)throw new Error('Unknown mode "'+u+'"');h.className="jsoneditor-type-modes"+(o===u?" jsoneditor-selected":""),c.push(h)}var d=s[o];if(!d)throw new Error('Unknown mode "'+o+'"');var p=d.text,f=document.createElement("button");f.type="button",f.className="jsoneditor-modes jsoneditor-separator",f.innerHTML=p+" &#x25BE;",f.title=Object(r.c)("modeEditorTitle"),f.onclick=function(){new i.a(c).show(f,e)};var g=document.createElement("div");g.className="jsoneditor-modes",g.style.position="relative",g.appendChild(f),e.appendChild(g),this.dom={container:e,box:f,frame:g}}var e;return(e=[{key:"focus",value:function(){this.dom.box.focus()}},{key:"destroy",value:function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e.target||null,!this.target)throw new Error('FocusTracker constructor called without a "target" to track.');this.onFocus="function"==typeof e.onFocus?e.onFocus:null,this.onBlur="function"==typeof e.onBlur?e.onBlur:null,this._onClick=this._onEvent.bind(this),this._onKeyUp=(function(t){9!==t.which&&9!==t.keyCode||this._onEvent(t)}).bind(this),this.focusFlag=!1,this.firstEventFlag=!0,(this.onFocus||this.onBlur)&&(document.addEventListener("click",this._onClick),document.addEventListener("keyup",this._onKeyUp))}var e;return(e=[{key:"destroy",value:function(){document.removeEventListener("click",this._onClick),document.removeEventListener("keyup",this._onKeyUp),this._onEvent({target:document.body})}},{key:"_onEvent",value:function(t){var e=t.target;e===this.target||this.target.contains(e)||this.target.contains(document.activeElement)?this.focusFlag||(this.onFocus&&this.onFocus({type:"focus",target:this.target}),this.focusFlag=!0):(this.focusFlag||this.firstEventFlag)&&(this.onBlur&&this.onBlur({type:"blur",target:this.target}),this.focusFlag=!1,this.firstEventFlag&&(this.firstEventFlag=!1))}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e,n){"use strict";var i=n(4),r=n.n(i),o=n(14),a=n.n(o),s=n(10),c=n.n(s),l=n(1);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var d=n(0),p=n(2);function f(t,e,n){var i=e,o='<label class="pico-modal-contents"><div class="pico-modal-header">'+Object(l.c)("transform")+'</div><p>Enter a <a href="http://jmespath.org" target="_blank">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>To learn JMESPath, go to <a href="http://jmespath.org/tutorial.html" target="_blank">the interactive tutorial</a>.</p><div class="jsoneditor-jmespath-label">'+Object(l.c)("transformWizardLabel")+' </div><div id="wizard" class="jsoneditor-jmespath-block jsoneditor-jmespath-wizard">  <table class="jsoneditor-jmespath-wizard-table">    <tbody>      <tr>        <th>'+Object(l.c)("transformWizardFilter")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-filter-field" >            <select id="filterField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-relation" >            <select id="filterRelation">              <option value="==">==</option>              <option value="!=">!=</option>              <option value="<">&lt;</option>              <option value="<=">&lt;=</option>              <option value=">">&gt;</option>              <option value=">=">&gt;=</option>            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-value" >            <input placeholder="value..." id="filterValue" />          </div>        </td>      </tr>      <tr>        <th>'+Object(l.c)("transformWizardSortBy")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-sort-field">            <select id="sortField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-sort-order" >            <select id="sortOrder">              <option value="asc">Ascending</option>              <option value="desc">Descending</option>            </select>          </div>        </td>      </tr>      <tr id="selectFieldsPart">        <th>'+Object(l.c)("transformWizardSelectFields")+'</th>        <td class="jsoneditor-jmespath-filter">          <select class="jsoneditor-jmespath-select-fields" id="selectFields" multiple></select>        </td>      </tr>    </tbody>  </table></div><div class="jsoneditor-jmespath-label">'+Object(l.c)("transformQueryLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="query"             rows="4"             autocomplete="off"             autocorrect="off"             autocapitalize="off"             spellcheck="false"            title="'+Object(l.c)("transformQueryTitle")+'">[*]</textarea></div><div class="jsoneditor-jmespath-label">'+Object(l.c)("transformPreviewLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="preview"       class="jsoneditor-transform-preview"      readonly> </textarea></div><div class="jsoneditor-jmespath-block jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+Object(l.c)("ok")+'" autofocus /></div></div>';a()({parent:t,content:o,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-transform",focus:!1}).afterCreate((function(t){var o=t.modalElem(),a=o.querySelector("#wizard"),s=o.querySelector("#ok"),l=o.querySelector("#filterField"),f=o.querySelector("#filterRelation"),g=o.querySelector("#filterValue"),m=o.querySelector("#sortField"),v=o.querySelector("#sortOrder"),y=o.querySelector("#selectFields"),b=o.querySelector("#query"),_=o.querySelector("#preview");Array.isArray(i)||(a.style.fontStyle="italic",a.innerHTML="(wizard not available for objects, only for arrays)"),Object(d.getChildPaths)(e).forEach((function(t){var e=M(t),n=document.createElement("option");n.text=e,n.value=e,l.appendChild(n);var i=document.createElement("option");i.text=e,i.value=e,m.appendChild(i)}));var C=Object(d.getChildPaths)(e,!0).filter((function(t){return""!==t}));if(C.length>0)C.forEach((function(t){var e=M(t),n=document.createElement("option");n.text=e,n.value=e,y.appendChild(n)}));else{var x=o.querySelector("#selectFieldsPart");x&&(x.style.display="none")}var w=new c.a(l,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),I=new c.a(f,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"compare..."}),A=new c.a(m,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),P=new c.a(v,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"order..."}),O=new c.a(y,{multiple:!0,clearable:!0,defaultSelected:!1,placeholder:"select fields..."});function M(t){return""===t?"@":"."===t[0]?t.slice(1):t}function S(){if(l.value&&f.value&&g.value){var t=l.value,e="@"!==t?["0"].concat(Object(d.parsePath)("."+t)):["0"],n="string"==typeof Object(d.get)(i,e)?g.value:Object(d.parseString)(g.value);b.value="[? "+t+" "+f.value+" `"+JSON.stringify(n)+"`]"}else b.value="[*]";if(m.value&&v.value){var r=m.value;b.value+="desc"===v.value?" | reverse(sort_by(@, &"+r+"))":" | sort_by(@, &"+r+")"}if(y.value){for(var o=[],a=0;a<y.options.length;a++)y.options[a].selected&&o.push(y.options[a].value);"]"!==b.value[b.value.length-1]&&(b.value+=" | [*]"),1===o.length?b.value+="."+o[0]:o.length>1&&(b.value+=".{"+o.map((function(t){var e=t.split(".");return e[e.length-1]+": "+t})).join(", ")+"}")}k()}w.on("selectr.change",S),I.on("selectr.change",S),g.oninput=S,A.on("selectr.change",S),P.on("selectr.change",S),O.on("selectr.change",S),o.querySelector(".pico-modal-contents").onclick=function(t){"A"!==t.target.nodeName&&t.preventDefault()},b.value=Array.isArray(i)?"[*]":"@";var k=Object(d.debounce)((function(){try{var t=r.a.search(i,b.value);_.className="jsoneditor-transform-preview",_.value=function(t,e,n){var i=function t(e,n,i,r){return"boolean"==typeof e||e instanceof Boolean||null===e||"number"==typeof e||e instanceof Number||"string"==typeof e||e instanceof String||e instanceof Date?JSON.stringify(e):Array.isArray(e)?function(e,n,i,r){for(var o=n?i+n:void 0,a=n?"[\n":"[",s=0;s<e.length;s++){var c=e[s];if(n&&(a+=o),a+=void 0!==c&&"function"!=typeof c?t(c,n,o,r):"null",s<e.length-1&&(a+=n?",\n":","),a.length>r)return a+"..."}return a+(n?"\n"+i+"]":"]")}(e,n,i,r):e&&"object"===u(e)?function(e,n,i,r){var o=n?i+n:void 0,a=!0,s=n?"{\n":"{";if("function"==typeof e.toJSON)return t(e.toJSON(),n,i,r);for(var c in e)if(h(e,c)&&(a?a=!1:s+=n?",\n":",",s+=n?o+'"'+c+'": ':'"'+c+'":',(s+=t(e[c],n,o,r)).length>r))return s+"...";return s+(n?"\n"+i+"}":"}")}(e,n,i,r):void 0}(t,function(t,e){for(var n="";e-- >0;)n+=t;return n}(" ",2),"",n);return i.length>n?function(t,e){return"number"==typeof e?t.slice(0,e):t}(i,n)+"...":i}(t,0,p.b),s.disabled=!1}catch(e){_.className="jsoneditor-transform-preview jsoneditor-error",_.value=e.toString(),s.disabled=!0}}),300);b.oninput=k,k(),s.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close(),n(b.value)},setTimeout((function(){b.select(),b.focus(),b.selectionStart=3,b.selectionEnd=3}))})).afterClose((function(t){t.destroy()})).show()}n.d(e,"a",(function(){return f}))},function(t,e,n){"use strict";var i={defaultSelected:!0,width:"auto",disabled:!1,searchable:!0,clearable:!1,sortSelected:!1,allowDeselect:!1,closeOnScroll:!1,nativeDropdown:!1,placeholder:"Select an option...",taggable:!1,tagPlaceholder:"Enter a tag..."},r=function(){};r.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){this._events=this._events||{},t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)},emit:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(t){for(var e=["on","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=r.prototype[e[n]]:t[e[n]]=r.prototype[e[n]];return t};var o={extend:function(t,e){var n;for(n in e=e||{},t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=t[n]));return e},each:function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(n,i,t[i],t);else for(var r=0,o=t.length;r<o;r++)e.call(n,r,t[r],t)},createElement:function(t,e){var n,i=document,r=i.createElement(t);if(e&&"[object Object]"===Object.prototype.toString.call(e))for(n in e)if(n in r)r[n]=e[n];else if("html"===n)r.innerHTML=e[n];else if("text"===n){var o=i.createTextNode(e[n]);r.appendChild(o)}else r.setAttribute(n,e[n]);return r},hasClass:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){o.hasClass(t,e)||(t.classList?t.classList.add(e):t.className=t.className.trim()+" "+e)},removeClass:function(t,e){o.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},closest:function(t,e){return t&&t!==document.body&&(e(t)?t:o.closest(t.parentNode,e))},isInt:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},debounce:function(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||t.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}},rect:function(t,e){var n=window,i=t.getBoundingClientRect(),r=e?n.pageXOffset:0,o=e?n.pageYOffset:0;return{bottom:i.bottom+o,height:i.height,left:i.left+r,right:i.right+r,top:i.top+o,width:i.width}},includes:function(t,e){return t.indexOf(e)>-1},truncate:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}};function a(t,e){return t.hasOwnProperty(e)&&(!0===t[e]||t[e].length)}function s(t,e,n){t.parentNode?t.parentNode.parentNode||e.appendChild(t.parentNode):e.appendChild(t),o.removeClass(t,"excluded"),n||(t.innerHTML=t.textContent)}var c=function(){if(this.items.length){var t=document.createDocumentFragment();if(this.config.pagination){var e=this.pages.slice(0,this.pageIndex);o.each(e,(function(e,n){o.each(n,(function(e,n){s(n,t,this.customOption)}),this)}),this)}else o.each(this.items,(function(e,n){s(n,t,this.customOption)}),this);t.childElementCount&&(o.removeClass(this.items[this.navIndex],"active"),this.navIndex=t.querySelector(".selectr-option").idx,o.addClass(this.items[this.navIndex],"active")),this.tree.appendChild(t)}},l=function(t){this.container.contains(t.target)||!this.opened&&!o.hasClass(this.container,"notice")||this.close()},u=function(t,e){e=e||t;var n=this.customOption?this.config.renderOption(e):t.textContent,i=o.createElement("li",{class:"selectr-option",html:n,role:"treeitem","aria-selected":!1});return i.idx=t.idx,this.items.push(i),t.defaultSelected&&this.defaultSelected.push(t.idx),t.disabled&&(i.disabled=!0,o.addClass(i,"disabled")),i},h=function(){this.requiresPagination=this.config.pagination&&this.config.pagination>0,a(this.config,"width")&&(o.isInt(this.config.width)?this.width=this.config.width+"px":"auto"===this.config.width?this.width="100%":o.includes(this.config.width,"%")&&(this.width=this.config.width)),this.container=o.createElement("div",{class:"selectr-container"}),this.config.customClass&&o.addClass(this.container,this.config.customClass),o.addClass(this.container,this.mobileDevice?"selectr-mobile":"selectr-desktop"),this.el.tabIndex=-1,o.addClass(this.el,this.config.nativeDropdown||this.mobileDevice?"selectr-visible":"selectr-hidden"),this.selected=o.createElement("div",{class:"selectr-selected",disabled:this.disabled,tabIndex:1,"aria-expanded":!1}),this.label=o.createElement(this.el.multiple?"ul":"span",{class:"selectr-label"});var t=o.createElement("div",{class:"selectr-options-container"});if(this.tree=o.createElement("ul",{class:"selectr-options",role:"tree","aria-hidden":!0,"aria-expanded":!1}),this.notice=o.createElement("div",{class:"selectr-notice"}),this.el.setAttribute("aria-hidden",!0),this.disabled&&(this.el.disabled=!0),this.el.multiple&&(o.addClass(this.label,"selectr-tags"),o.addClass(this.container,"multiple"),this.tags=[],this.selectedValues=this.getSelectedProperties("value"),this.selectedIndexes=this.getSelectedProperties("idx")),this.selected.appendChild(this.label),this.config.clearable&&(this.selectClear=o.createElement("button",{class:"selectr-clear",type:"button"}),this.container.appendChild(this.selectClear),o.addClass(this.container,"clearable")),this.config.taggable){var e=o.createElement("li",{class:"input-tag"});this.input=o.createElement("input",{class:"selectr-tag-input",placeholder:this.config.tagPlaceholder,tagIndex:0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),e.appendChild(this.input),this.label.appendChild(e),o.addClass(this.container,"taggable"),this.tagSeperators=[","],this.config.tagSeperators&&(this.tagSeperators=this.tagSeperators.concat(this.config.tagSeperators))}this.config.searchable&&(this.input=o.createElement("input",{class:"selectr-input",tagIndex:-1,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),this.inputClear=o.createElement("button",{class:"selectr-input-clear",type:"button"}),this.inputContainer=o.createElement("div",{class:"selectr-input-container"}),this.inputContainer.appendChild(this.input),this.inputContainer.appendChild(this.inputClear),t.appendChild(this.inputContainer)),t.appendChild(this.notice),t.appendChild(this.tree),this.items=[],this.options=[],this.el.options.length&&(this.options=[].slice.call(this.el.options));var n,i=!1,r=0;if(this.el.children.length&&o.each(this.el.children,(function(t,e){"OPTGROUP"===e.nodeName?(i=o.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+e.label+"</li>"}),o.each(e.children,(function(t,e){e.idx=r,i.appendChild(u.call(this,e,i)),r++}),this)):(e.idx=r,u.call(this,e),r++)}),this),this.config.data&&Array.isArray(this.config.data)){this.data=[];var s,c=!1;i=!1,r=0,o.each(this.config.data,(function(t,e){a(e,"children")?(c=o.createElement("optgroup",{label:e.text}),i=o.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+e.text+"</li>"}),o.each(e.children,(function(t,e){(s=new Option(e.text,e.value,!1,e.hasOwnProperty("selected")&&!0===e.selected)).disabled=a(e,"disabled"),this.options.push(s),c.appendChild(s),s.idx=r,i.appendChild(u.call(this,s,e)),this.data[r]=e,r++}),this)):((s=new Option(e.text,e.value,!1,e.hasOwnProperty("selected")&&!0===e.selected)).disabled=a(e,"disabled"),this.options.push(s),s.idx=r,u.call(this,s,e),this.data[r]=e,r++)}),this)}this.setSelected(!0),this.navIndex=0;for(var l=0;l<this.items.length;l++)if(!o.hasClass(n=this.items[l],"disabled")){o.addClass(n,"active"),this.navIndex=l;break}this.requiresPagination&&(this.pageIndex=1,this.paginate()),this.container.appendChild(this.selected),this.container.appendChild(t),this.placeEl=o.createElement("div",{class:"selectr-placeholder"}),this.setPlaceholder(),this.selected.appendChild(this.placeEl),this.disabled&&this.disable(),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el)},d=function(t){if(t=t||window.event,this.items.length&&this.opened&&o.includes([13,38,40],t.which)){if(t.preventDefault(),13===t.which)return!(this.config.taggable&&this.input.value.length>0)&&this.change(this.navIndex);var e,n=this.items[this.navIndex];switch(t.which){case 38:e=0,this.navIndex>0&&this.navIndex--;break;case 40:e=1,this.navIndex<this.items.length-1&&this.navIndex++}for(this.navigating=!0;o.hasClass(this.items[this.navIndex],"disabled")||o.hasClass(this.items[this.navIndex],"excluded");)if(e?this.navIndex++:this.navIndex--,this.searching){if(this.navIndex>this.tree.lastElementChild.idx){this.navIndex=this.tree.lastElementChild.idx;break}if(this.navIndex<this.tree.firstElementChild.idx){this.navIndex=this.tree.firstElementChild.idx;break}}var i=o.rect(this.items[this.navIndex]);e?(0===this.navIndex?this.tree.scrollTop=0:i.top+i.height>this.optsRect.top+this.optsRect.height&&(this.tree.scrollTop=this.tree.scrollTop+(i.top+i.height-(this.optsRect.top+this.optsRect.height))),this.navIndex===this.tree.childElementCount-1&&this.requiresPagination&&g.call(this)):0===this.navIndex?this.tree.scrollTop=0:i.top-this.optsRect.top<0&&(this.tree.scrollTop=this.tree.scrollTop+(i.top-this.optsRect.top)),n&&o.removeClass(n,"active"),o.addClass(this.items[this.navIndex],"active")}else this.navigating=!1},p=function(t){var e,n=this,i=document.createDocumentFragment(),r=this.options[t.idx],a=this.customSelected?this.config.renderSelection(this.data?this.data[t.idx]:r):r.textContent,s=o.createElement("li",{class:"selectr-tag",html:a}),c=o.createElement("button",{class:"selectr-tag-remove",type:"button"});if(s.appendChild(c),s.idx=t.idx,s.tag=r.value,this.tags.push(s),this.config.sortSelected){var l=this.tags.slice();e=function(t,e){t.replace(/(\d+)|(\D+)/g,(function(t,n,i){e.push([n||1/0,i||""])}))},l.sort((function(t,i){var r,o,a=[],s=[];for(!0===n.config.sortSelected?(r=t.tag,o=i.tag):"text"===n.config.sortSelected&&(r=t.textContent,o=i.textContent),e(r,a),e(o,s);a.length&&s.length;){var c=a.shift(),l=s.shift(),u=c[0]-l[0]||c[1].localeCompare(l[1]);if(u)return u}return a.length-s.length})),o.each(l,(function(t,e){i.appendChild(e)})),this.label.innerHTML=""}else i.appendChild(s);this.config.taggable?this.label.insertBefore(i,this.input.parentNode):this.label.appendChild(i)},f=function(t){var e=!1;o.each(this.tags,(function(n,i){i.idx===t.idx&&(e=i)}),this),e&&(this.label.removeChild(e),this.tags.splice(this.tags.indexOf(e),1))},g=function(){var t=this.tree;if(t.scrollTop>=t.scrollHeight-t.offsetHeight&&this.pageIndex<this.pages.length){var e=document.createDocumentFragment();o.each(this.pages[this.pageIndex],(function(t,n){s(n,e,this.customOption)}),this),t.appendChild(e),this.pageIndex++,this.emit("selectr.paginate",{items:this.items.length,total:this.data.length,page:this.pageIndex,pages:this.pages.length})}},m=function(){(this.config.searchable||this.config.taggable)&&(this.input.value=null,this.searching=!1,this.config.searchable&&o.removeClass(this.inputContainer,"active"),o.hasClass(this.container,"notice")&&(o.removeClass(this.container,"notice"),o.addClass(this.container,"open"),this.input.focus()),o.each(this.items,(function(t,e){o.removeClass(e,"excluded"),this.customOption||(e.innerHTML=e.textContent)}),this))},v=function(t,e){if(e=e||{},!t)throw new Error("You must supply either a HTMLSelectElement or a CSS3 selector string.");if(this.el=t,"string"==typeof t&&(this.el=document.querySelector(t)),null===this.el)throw new Error("The element you passed to Selectr can not be found.");if("select"!==this.el.nodeName.toLowerCase())throw new Error("The element you passed to Selectr is not a HTMLSelectElement.");this.render(e)};v.prototype.render=function(t){if(!this.rendered){this.config=o.extend(i,t),this.originalType=this.el.type,this.originalIndex=this.el.tabIndex,this.defaultSelected=[],this.originalOptionCount=this.el.options.length,(this.config.multiple||this.config.taggable)&&(this.el.multiple=!0),this.disabled=a(this.config,"disabled"),this.opened=!1,this.config.taggable&&(this.config.searchable=!1),this.navigating=!1,this.mobileDevice=!1,/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)&&(this.mobileDevice=!0),this.customOption=this.config.hasOwnProperty("renderOption")&&"function"==typeof this.config.renderOption,this.customSelected=this.config.hasOwnProperty("renderSelection")&&"function"==typeof this.config.renderSelection,r.mixin(this),h.call(this),this.bindEvents(),this.update(),this.optsRect=o.rect(this.tree),this.rendered=!0,this.el.multiple||(this.el.selectedIndex=this.selectedIndex);var e=this;setTimeout((function(){e.emit("selectr.init")}),20)}},v.prototype.getSelected=function(){return this.el.querySelectorAll("option:checked")},v.prototype.getSelectedProperties=function(t){var e=this.getSelected();return[].slice.call(e).map((function(e){return e[t]})).filter((function(t){return null!=t}))},v.prototype.bindEvents=function(){var t=this;this.events={},this.events.dismiss=l.bind(this),this.events.navigate=d.bind(this),this.events.reset=this.reset.bind(this),(this.config.nativeDropdown||this.mobileDevice)&&(this.container.addEventListener("touchstart",(function(e){e.changedTouches[0].target===t.el&&t.toggle()})),(this.config.nativeDropdown||this.mobileDevice)&&this.container.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),e.target===t.el&&t.toggle()})),this.el.addEventListener("change",(function(e){if(t.el.multiple){var n=t.getSelectedProperties("idx"),i=function(t,e){for(var n,i=[],r=t.slice(0),o=0;o<e.length;o++)(n=r.indexOf(e[o]))>-1?r.splice(n,1):i.push(e[o]);return[i,r]}(t.selectedIndexes,n);o.each(i[0],(function(e,n){t.select(n)}),t),o.each(i[1],(function(e,n){t.deselect(n)}),t)}else t.el.selectedIndex>-1&&t.select(t.el.selectedIndex)}))),this.config.nativeDropdown&&this.container.addEventListener("keydown",(function(e){"Enter"===e.key&&t.selected===document.activeElement&&(t.toggle(),setTimeout((function(){t.el.focus()}),200))})),this.selected.addEventListener("click",(function(e){t.disabled||t.toggle(),e.preventDefault(),e.stopPropagation()})),this.label.addEventListener("click",(function(e){o.hasClass(e.target,"selectr-tag-remove")&&t.deselect(e.target.parentNode.idx)})),this.selectClear&&this.selectClear.addEventListener("click",this.clear.bind(this)),this.tree.addEventListener("mousedown",(function(t){t.preventDefault()})),this.tree.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var n=o.closest(e.target,(function(t){return t&&o.hasClass(t,"selectr-option")}));n&&(o.hasClass(n,"disabled")||(o.hasClass(n,"selected")?(t.el.multiple||!t.el.multiple&&t.config.allowDeselect)&&t.deselect(n.idx):t.select(n.idx),t.opened&&!t.el.multiple&&t.close()))})),this.tree.addEventListener("mouseover",(function(e){o.hasClass(e.target,"selectr-option")&&(o.hasClass(e.target,"disabled")||(o.removeClass(t.items[t.navIndex],"active"),o.addClass(e.target,"active"),t.navIndex=[].slice.call(t.items).indexOf(e.target)))})),this.config.searchable&&(this.input.addEventListener("focus",(function(e){t.searching=!0})),this.input.addEventListener("blur",(function(e){t.searching=!1})),this.input.addEventListener("keyup",(function(e){t.search(),t.config.taggable||(this.value.length?o.addClass(this.parentNode,"active"):o.removeClass(this.parentNode,"active"))})),this.inputClear.addEventListener("click",(function(e){t.input.value=null,m.call(t),t.tree.childElementCount||c.call(t)}))),this.config.taggable&&this.input.addEventListener("keyup",(function(e){if(t.search(),t.config.taggable&&this.value.length){var n=this.value.trim();(13===e.which||o.includes(t.tagSeperators,e.key))&&(o.each(t.tagSeperators,(function(t,e){n=n.replace(e,"")})),t.add({value:n,text:n,selected:!0},!0)?(t.close(),m.call(t)):(this.value="",t.setMessage("That tag is already in use.")))}})),this.update=o.debounce((function(){t.opened&&t.config.closeOnScroll&&t.close(),t.width&&(t.container.style.width=t.width),t.invert()}),50),this.requiresPagination&&(this.paginateItems=o.debounce((function(){g.call(this)}),50),this.tree.addEventListener("scroll",this.paginateItems.bind(this))),document.addEventListener("click",this.events.dismiss),window.addEventListener("keydown",this.events.navigate),window.addEventListener("resize",this.update),window.addEventListener("scroll",this.update),this.el.form&&this.el.form.addEventListener("reset",this.events.reset)},v.prototype.setSelected=function(t){if(this.config.data||this.el.multiple||!this.el.options.length||(0===this.el.selectedIndex&&(this.el.options[0].defaultSelected||this.config.defaultSelected||(this.el.selectedIndex=-1)),this.selectedIndex=this.el.selectedIndex,this.selectedIndex>-1&&this.select(this.selectedIndex)),this.config.multiple&&"select-one"===this.originalType&&!this.config.data&&this.el.options[0].selected&&!this.el.options[0].defaultSelected&&(this.el.options[0].selected=!1),o.each(this.options,(function(t,e){e.selected&&e.defaultSelected&&this.select(e.idx)}),this),this.config.selectedValue&&this.setValue(this.config.selectedValue),this.config.data){!this.el.multiple&&this.config.defaultSelected&&this.el.selectedIndex<0&&this.select(0);var e=0;o.each(this.config.data,(function(t,n){a(n,"children")?o.each(n.children,(function(t,n){n.hasOwnProperty("selected")&&!0===n.selected&&this.select(e),e++}),this):(n.hasOwnProperty("selected")&&!0===n.selected&&this.select(e),e++)}),this)}},v.prototype.destroy=function(){this.rendered&&(this.emit("selectr.destroy"),"select-one"===this.originalType&&(this.el.multiple=!1),this.config.data&&(this.el.innerHTML=""),o.removeClass(this.el,"selectr-hidden"),this.el.form&&o.off(this.el.form,"reset",this.events.reset),o.off(document,"click",this.events.dismiss),o.off(document,"keydown",this.events.navigate),o.off(window,"resize",this.update),o.off(window,"scroll",this.update),this.container.parentNode.replaceChild(this.el,this.container),this.rendered=!1)},v.prototype.change=function(t){var e=this.options[t];e.disabled||(e.selected&&o.hasClass(this.items[t],"selected")?this.deselect(t):this.select(t),this.opened&&!this.el.multiple&&this.close())},v.prototype.select=function(t){var e=this.items[t],n=[].slice.call(this.el.options),i=this.options[t];if(this.el.multiple){if(o.includes(this.selectedIndexes,t))return!1;if(this.config.maxSelections&&this.tags.length===this.config.maxSelections)return this.setMessage("A maximum of "+this.config.maxSelections+" items can be selected.",!0),!1;this.selectedValues.push(i.value),this.selectedIndexes.push(t),p.call(this,e)}else this.label.innerHTML=this.customSelected?this.config.renderSelection(this.data?this.data[t]:i):i.textContent,this.selectedValue=i.value,this.selectedIndex=t,o.each(this.options,(function(e,n){var i=this.items[e];e!==t&&(i&&o.removeClass(i,"selected"),n.selected=!1,n.removeAttribute("selected"))}),this);o.includes(n,i)||this.el.add(i),e.setAttribute("aria-selected",!0),o.addClass(e,"selected"),o.addClass(this.container,"has-selected"),i.selected=!0,i.setAttribute("selected",""),this.emit("selectr.change",i),this.emit("selectr.select",i)},v.prototype.deselect=function(t,e){var n=this.items[t],i=this.options[t];if(this.el.multiple){var r=this.selectedIndexes.indexOf(t);this.selectedIndexes.splice(r,1);var a=this.selectedValues.indexOf(i.value);this.selectedValues.splice(a,1),f.call(this,n),this.tags.length||o.removeClass(this.container,"has-selected")}else{if(!e&&!this.config.clearable&&!this.config.allowDeselect)return!1;this.label.innerHTML="",this.selectedValue=null,this.el.selectedIndex=this.selectedIndex=-1,o.removeClass(this.container,"has-selected")}this.items[t].setAttribute("aria-selected",!1),o.removeClass(this.items[t],"selected"),i.selected=!1,i.removeAttribute("selected"),this.emit("selectr.change",null),this.emit("selectr.deselect",i)},v.prototype.setValue=function(t){var e=Array.isArray(t);if(e||(t=t.toString().trim()),!this.el.multiple&&e)return!1;o.each(this.options,(function(n,i){(e&&o.includes(t.toString(),i.value)||i.value===t)&&this.change(i.idx)}),this)},v.prototype.getValue=function(t,e){var n;if(this.el.multiple)t?this.selectedIndexes.length&&((n={}).values=[],o.each(this.selectedIndexes,(function(t,e){var i=this.options[e];n.values[t]={value:i.value,text:i.textContent}}),this)):n=this.selectedValues.slice();else if(t){var i=this.options[this.selectedIndex];n={value:i.value,text:i.textContent}}else n=this.selectedValue;return t&&e&&(n=JSON.stringify(n)),n},v.prototype.add=function(t,e){if(t){if(this.data=this.data||[],this.items=this.items||[],this.options=this.options||[],Array.isArray(t))o.each(t,(function(t,n){this.add(n,e)}),this);else if("[object Object]"===Object.prototype.toString.call(t)){if(e){var n=!1;if(o.each(this.options,(function(e,i){i.value.toLowerCase()===t.value.toLowerCase()&&(n=!0)})),n)return!1}var i=o.createElement("option",t);return this.data.push(t),this.options.push(i),i.idx=this.options.length>0?this.options.length-1:0,u.call(this,i),t.selected&&this.select(i.idx),i}return this.setPlaceholder(),this.config.pagination&&this.paginate(),!0}},v.prototype.remove=function(t){var e,n=[];Array.isArray(t)?o.each(t,(function(e,i){o.isInt(i)?n.push(this.getOptionByIndex(i)):"string"==typeof t&&n.push(this.getOptionByValue(i))}),this):o.isInt(t)?n.push(this.getOptionByIndex(t)):"string"==typeof t&&n.push(this.getOptionByValue(t)),n.length&&(o.each(n,(function(t,n){e=n.idx,this.el.remove(n),this.options.splice(e,1);var i=this.items[e].parentNode;i&&i.removeChild(this.items[e]),this.items.splice(e,1),o.each(this.options,(function(t,e){e.idx=t,this.items[t].idx=t}),this)}),this),this.setPlaceholder(),this.config.pagination&&this.paginate())},v.prototype.removeAll=function(){this.clear(!0),o.each(this.el.options,(function(t,e){this.el.remove(e)}),this),o.truncate(this.tree),this.items=[],this.options=[],this.data=[],this.navIndex=0,this.requiresPagination&&(this.requiresPagination=!1,this.pageIndex=1,this.pages=[]),this.setPlaceholder()},v.prototype.search=function(t){if(!this.navigating){t=t||this.input.value;var e=document.createDocumentFragment();if(this.removeMessage(),o.truncate(this.tree),t.length>1)if(o.each(this.options,(function(n,i){var r=this.items[i.idx];o.includes(i.textContent.toLowerCase(),t.toLowerCase())&&!i.disabled?(s(r,e,this.customOption),o.removeClass(r,"excluded"),this.customOption||(r.innerHTML=function(t,e){var n=new RegExp(t,"i").exec(e.textContent);return!!n&&e.textContent.replace(n[0],"<span class='selectr-match'>"+n[0]+"</span>")}(t,i))):o.addClass(r,"excluded")}),this),e.childElementCount){var n=e.firstElementChild;o.removeClass(this.items[this.navIndex],"active"),this.navIndex=n.idx,o.addClass(n,"active")}else this.config.taggable||this.setMessage("no results.");else c.call(this);this.tree.appendChild(e)}},v.prototype.toggle=function(){this.disabled||(this.opened?this.close():this.open())},v.prototype.open=function(){var t=this;return!!this.options.length&&(this.opened||this.emit("selectr.open"),this.opened=!0,this.mobileDevice||this.config.nativeDropdown?(o.addClass(this.container,"native-open"),void(this.config.data&&o.each(this.options,(function(t,e){this.el.add(e)}),this))):(o.addClass(this.container,"open"),c.call(this),this.invert(),this.tree.scrollTop=0,o.removeClass(this.container,"notice"),this.selected.setAttribute("aria-expanded",!0),this.tree.setAttribute("aria-hidden",!1),this.tree.setAttribute("aria-expanded",!0),void(this.config.searchable&&!this.config.taggable&&setTimeout((function(){t.input.focus(),t.input.tabIndex=0}),10))))},v.prototype.close=function(){if(this.opened&&this.emit("selectr.close"),this.opened=!1,this.mobileDevice||this.config.nativeDropdown)o.removeClass(this.container,"native-open");else{var t=o.hasClass(this.container,"notice");this.config.searchable&&!t&&(this.input.blur(),this.input.tabIndex=-1,this.searching=!1),t&&(o.removeClass(this.container,"notice"),this.notice.textContent=""),o.removeClass(this.container,"open"),o.removeClass(this.container,"native-open"),this.selected.setAttribute("aria-expanded",!1),this.tree.setAttribute("aria-hidden",!0),this.tree.setAttribute("aria-expanded",!1),o.truncate(this.tree),m.call(this)}},v.prototype.enable=function(){this.disabled=!1,this.el.disabled=!1,this.selected.tabIndex=this.originalIndex,this.el.multiple&&o.each(this.tags,(function(t,e){e.lastElementChild.tabIndex=0})),o.removeClass(this.container,"selectr-disabled")},v.prototype.disable=function(t){t||(this.el.disabled=!0),this.selected.tabIndex=-1,this.el.multiple&&o.each(this.tags,(function(t,e){e.lastElementChild.tabIndex=-1})),this.disabled=!0,o.addClass(this.container,"selectr-disabled")},v.prototype.reset=function(){this.disabled||(this.clear(),this.setSelected(!0),o.each(this.defaultSelected,(function(t,e){this.select(e)}),this),this.emit("selectr.reset"))},v.prototype.clear=function(t){if(this.el.multiple){if(this.selectedIndexes.length){var e=this.selectedIndexes.slice();o.each(e,(function(t,e){this.deselect(e)}),this)}}else this.selectedIndex>-1&&this.deselect(this.selectedIndex,t);this.emit("selectr.clear")},v.prototype.serialise=function(t){var e=[];return o.each(this.options,(function(t,n){var i={value:n.value,text:n.textContent};n.selected&&(i.selected=!0),n.disabled&&(i.disabled=!0),e[t]=i})),t?JSON.stringify(e):e},v.prototype.serialize=function(t){return this.serialise(t)},v.prototype.setPlaceholder=function(t){t=t||this.config.placeholder||this.el.getAttribute("placeholder"),this.options.length||(t="No options available"),this.placeEl.innerHTML=t},v.prototype.paginate=function(){if(this.items.length){var t=this;return this.pages=this.items.map((function(e,n){return n%t.config.pagination==0?t.items.slice(n,n+t.config.pagination):null})).filter((function(t){return t})),this.pages}},v.prototype.setMessage=function(t,e){e&&this.close(),o.addClass(this.container,"notice"),this.notice.textContent=t},v.prototype.removeMessage=function(){o.removeClass(this.container,"notice"),this.notice.innerHTML=""},v.prototype.invert=function(){var t=o.rect(this.selected),e=window.innerHeight;t.top+t.height+this.tree.parentNode.offsetHeight>e?(o.addClass(this.container,"inverted"),this.isInverted=!0):(o.removeClass(this.container,"inverted"),this.isInverted=!1),this.optsRect=o.rect(this.tree)},v.prototype.getOptionByIndex=function(t){return this.options[t]},v.prototype.getOptionByValue=function(t){for(var e=!1,n=0,i=this.options.length;n<i;n++)if(this.options[n].value.trim()===t.toString().trim()){e=this.options[n];break}return e},t.exports=v},function(t,e){t.exports=function t(e,n){"use strict";var i,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,l=/^0/,u=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},h=u(e).replace(a,"")||"",d=u(n).replace(a,"")||"",p=h.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(h.match(c),16)||1!==p.length&&h.match(s)&&Date.parse(h),m=parseInt(d.match(c),16)||g&&d.match(s)&&Date.parse(d)||null;if(m){if(g<m)return-1;if(g>m)return 1}for(var v=0,y=Math.max(p.length,f.length);v<y;v++){if(i=!(p[v]||"").match(l)&&parseFloat(p[v])||p[v]||0,r=!(f[v]||"").match(l)&&parseFloat(f[v])||f[v]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),i<r)return-1;if(i>r)return 1}return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(0);function r(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=o(t),c={},l=t.getBoundingClientRect(),u=e.getBoundingClientRect(),h=document.createElement("div");function d(){if(h&&h.parentNode){for(var e in h.parentNode.removeChild(h),c)if(a(c,e)){var r=c[e];r&&Object(i.removeEventListener)(s,e,r),delete c[e]}"function"==typeof n&&n(t)}}function p(t){return t!==h&&!Object(i.isChildOf)(t,h)}function f(t){p(t.target)&&d()}if(h.className="jsoneditor-anchor",h.style.position="absolute",h.style.left=l.left-u.left+"px",h.style.top=l.top-u.top+"px",h.style.width=l.width-2+"px",h.style.height=l.height-2+"px",h.style.boxSizing="border-box",e.appendChild(h),c.mousedown=Object(i.addEventListener)(s,"mousedown",f),c.mousewheel=Object(i.addEventListener)(s,"mousewheel",f),r){var g=null;h.onmouseover=function(){clearTimeout(g),g=null},h.onmouseout=function(){g||(g=setTimeout(d,200))}}return h.destroy=d,h}function o(t){return"function"==typeof t.getRootNode?t.getRootNode():window}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){var i;if(window.Picker)i=window.Picker;else try{i=n(40)}catch(r){}t.exports=i},function(t,e,n){var i,r,o;!function(n,a){"use strict";r=[],void 0===(o="function"==typeof(i=function(){function t(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType}function e(){var t=[];return{watch:t.push.bind(t),trigger:function(e,n){for(var i=!0,r={detail:n,preventDefault:function(){i=!1}},o=0;o<t.length;o++)t[o](e,r);return i}}}function n(t){return"none"===window.getComputedStyle(t).display}function i(t){this.elem=t}function r(t,e){return i.make(t("parent")).clazz("pico-overlay").clazz(t("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(t("overlayStyles",{opacity:.5,background:"#000"})).onClick((function(){t("overlayClose",!0)&&e()}))}i.make=function(t,e){"string"==typeof t&&(t=document.querySelector(t));var n=document.createElement(e||"div");return(t||document.body).appendChild(n),new i(n)},i.prototype={child:function(t){return i.make(this.elem,t)},stylize:function(t){for(var e in void 0!==(t=t||{}).opacity&&(t.filter="alpha(opacity="+100*t.opacity+")"),t)t.hasOwnProperty(e)&&(this.elem.style[e]=t[e]);return this},clazz:function(t){return this.elem.className+=" "+t,this},html:function(e){return t(e)?this.elem.appendChild(e):this.elem.innerHTML=e,this},onClick:function(t){return this.elem.addEventListener("click",t),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(t,e){return void 0!==e&&this.elem.setAttribute(t,e),this},anyAncestor:function(t){for(var e=this.elem;e;){if(t(new i(e)))return!0;e=e.parentNode}return!1},isVisible:function(){return!n(this.elem)}};var o=1;function a(t,e){if(e("closeButton",!0))return t.child("button").html(e("closeHtml","&#xD7;")).clazz("pico-close").clazz(e("closeClass","")).stylize(e("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",e("close-label","Close"))}function s(t){return function(){return t().elem}}var c=e(),l=e();return document.documentElement.addEventListener("keydown",(function(t){var e=t.which||t.keyCode;27===e?c.trigger():9===e&&l.trigger(t)})),function(u){("string"==typeof u||t(u))&&(u={content:u});var h=e(),d=e(),p=e(),f=e(),g=e();function m(t,e){var n=u[t];return"function"==typeof n&&(n=n(e)),void 0===n?e:n}var v,y,b=A.bind(window,"modal"),_=A.bind(window,"overlay"),C=A.bind(window,"close");function x(t){_().hide(),b().hide(),g.trigger(v,t)}function w(t){f.trigger(v,t)&&x(t)}function I(t){return function(){return t.apply(this,arguments),v}}function A(t,e){if(!y){var n=function(t,e){var n=t("width","auto");"number"==typeof n&&(n+="px");var r=t("modalId","pico-"+o++);return i.make(t("parent")).clazz("pico-content").clazz(t("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:n,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(t("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(t("content")).attr("id",r).attr("role","dialog").attr("aria-labelledby",t("ariaLabelledBy")).attr("aria-describedby",t("ariaDescribedBy",r)).onClick((function(t){new i(t.target).anyAncestor((function(t){return/\bpico-close\b/.test(t.elem.className)}))&&e()}))}(m,w);y={modal:n,overlay:r(m,w),close:a(n,m)},h.trigger(v,e)}return y[t]}return function(t,e){function i(t,e){return(t.msMatchesSelector||t.webkitMatchesSelector||t.matches).call(t,e)}function r(t){return!(n(t)||i(t,":disabled")||t.hasAttribute("contenteditable"))&&(t.hasAttribute("tabindex")||i(t,"input,select,textarea,button,a[href],area[href],iframe"))}function o(t){for(var e=t.getElementsByTagName("*"),n=0;n<e.length;n++)if(r(e[n]))return e[n]}var a;t.beforeShow((function(){a=document.activeElement})),t.afterShow((function(){if(e()){var n=o(t.modalElem());n&&n.focus()}})),t.afterClose((function(){e()&&a&&a.focus(),a=null})),l.watch((function(n){if(e()&&t.isVisible()){var i=o(t.modalElem()),a=function(t){for(var e=t.getElementsByTagName("*"),n=e.length;n--;)if(r(e[n]))return e[n]}(t.modalElem());(n.shiftKey?i:a)===document.activeElement&&((n.shiftKey?a:i).focus(),n.preventDefault())}}))}(v={modalElem:s(b),closeElem:s(C),overlayElem:s(_),buildDom:I(A.bind(null,null)),isVisible:function(){return!!(y&&b&&b().isVisible())},show:function(t){return d.trigger(v,t)&&(_().show(),C(),b().show(),p.trigger(v,t)),this},close:I(w),forceClose:I(x),destroy:function(){b().destroy(),_().destroy(),_=b=C=void 0},options:function(t){Object.keys(t).map((function(e){u[e]=t[e]}))},afterCreate:I(h.watch),beforeShow:I(d.watch),afterShow:I(p.watch),beforeClose:I(f.watch),afterClose:I(g.watch)},m.bind(null,"focus",!0)),function(t,e){var n,r=new i(document.body);t.beforeShow((function(){n=r.elem.style.overflow,e()&&r.stylize({overflow:"hidden"})})),t.afterClose((function(){r.stylize({overflow:n})}))}(v,m.bind(null,"bodyOverflow",!0)),c.watch((function(){m("escCloses",!0)&&v.isVisible()&&v.close()})),v}})?i.apply(e,r):i)||(t.exports=o)}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errorTableVisible=e.errorTableVisible,this.onToggleVisibility=e.onToggleVisibility,this.onFocusLine=e.onFocusLine||function(){},this.onChangeHeight=e.onChangeHeight,this.dom={};var n=document.createElement("div");n.className="jsoneditor-validation-errors-container",this.dom.validationErrorsContainer=n;var i=document.createElement("div");i.style.display="none",i.className="jsoneditor-additional-errors fadein",i.innerHTML="Scroll for more &#9663;",this.dom.additionalErrorsIndication=i,n.appendChild(i);var r=document.createElement("span");r.className="jsoneditor-validation-error-icon",r.style.display="none",this.dom.validationErrorIcon=r;var o=document.createElement("span");o.className="jsoneditor-validation-error-count",o.style.display="none",this.dom.validationErrorCount=o,this.dom.parseErrorIndication=document.createElement("span"),this.dom.parseErrorIndication.className="jsoneditor-parse-error-icon",this.dom.parseErrorIndication.style.display="none"}var e;return(e=[{key:"getErrorTable",value:function(){return this.dom.validationErrorsContainer}},{key:"getErrorCounter",value:function(){return this.dom.validationErrorCount}},{key:"getWarningIcon",value:function(){return this.dom.validationErrorIcon}},{key:"getErrorIcon",value:function(){return this.dom.parseErrorIndication}},{key:"toggleTableVisibility",value:function(){this.errorTableVisible=!this.errorTableVisible,this.onToggleVisibility(this.errorTableVisible)}},{key:"setErrors",value:function(t,e){var n=this;if(this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.dom.additionalErrorsIndication.style.display="none"),this.errorTableVisible&&t.length>0){var i=document.createElement("div");i.className="jsoneditor-validation-errors",i.innerHTML='<table class="jsoneditor-text-errors"><tbody></tbody></table>';var r=i.getElementsByTagName("tbody")[0];t.forEach((function(t){var i,o;if(i="string"==typeof t?'<td colspan="2"><pre>'+t+"</pre></td>":"<td>"+(t.dataPath||"")+"</td><td><pre>"+t.message+"</pre></td>",isNaN(t.line)){if(t.dataPath){var a=e.find((function(e){return e.path===t.dataPath}));a&&(o=a.line+1)}}else o=t.line;var s=document.createElement("tr");s.className=isNaN(o)?"":"jump-to-line",s.className+="error"===t.type?" parse-error":" validation-error",s.innerHTML='<td><button class="jsoneditor-schema-error"></button></td><td style="white-space:nowrap;">'+(isNaN(o)?"":"Ln "+o)+"</td>"+i,s.onclick=function(){n.onFocusLine(o)},r.appendChild(s)})),this.dom.validationErrors=i,this.dom.validationErrorsContainer.appendChild(i),this.dom.additionalErrorsIndication.title=t.length+" errors total",this.dom.validationErrorsContainer.clientHeight<this.dom.validationErrorsContainer.scrollHeight?(this.dom.additionalErrorsIndication.style.display="block",this.dom.validationErrorsContainer.onscroll=function(){n.dom.additionalErrorsIndication.style.display=n.dom.validationErrorsContainer.clientHeight>0&&0===n.dom.validationErrorsContainer.scrollTop?"block":"none"}):this.dom.validationErrorsContainer.onscroll=void 0,this.onChangeHeight(this.dom.validationErrorsContainer.clientHeight+(this.dom.statusBar?this.dom.statusBar.clientHeight:0))}else this.onChangeHeight(0);var o=t.filter((function(t){return"error"!==t.type})).length;if(o>0?(this.dom.validationErrorCount.style.display="inline",this.dom.validationErrorCount.innerText=o,this.dom.validationErrorCount.onclick=this.toggleTableVisibility.bind(this),this.dom.validationErrorIcon.style.display="inline",this.dom.validationErrorIcon.title=o+" schema validation error(s) found",this.dom.validationErrorIcon.onclick=this.toggleTableVisibility.bind(this)):(this.dom.validationErrorCount.style.display="none",this.dom.validationErrorIcon.style.display="none"),t.some((function(t){return"error"===t.type}))){var a=t[0].line;this.dom.parseErrorIndication.style.display="block",this.dom.parseErrorIndication.title=isNaN(a)?"parse error - check that the json is valid":"parse error on line "+a,this.dom.parseErrorIndication.onclick=this.toggleTableVisibility.bind(this)}else this.dom.parseErrorIndication.style.display="none"}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=n(45),r=n(18),o=n(5),a=n(25),s=n(47);function c(t,e,n){var i=this._refs[n];if("string"==typeof i){if(!this._refs[i])return c.call(this,t,e,i);i=this._refs[i]}if((i=i||this._schemas[n])instanceof a)return f(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var r,o,s,u=l.call(this,e,n);return u&&(r=u.schema,e=u.root,s=u.baseId),r instanceof a?o=r.validate||t.call(this,r.schema,e,void 0,s):void 0!==r&&(o=f(r,this._opts.inlineRefs)?r:t.call(this,r,e,void 0,s)),o}function l(t,e){var n=i.parse(e),r=m(n),o=g(this._getId(t.schema));if(0===Object.keys(t.schema).length||r!==o){var s=y(r),c=this._refs[s];if("string"==typeof c)return u.call(this,t,c,n);if(c instanceof a)c.validate||this._compile(c),t=c;else{if(!((c=this._schemas[s])instanceof a))return;if(c.validate||this._compile(c),s==y(e))return{schema:c,root:t,baseId:o};t=c}if(!t.schema)return;o=g(this._getId(t.schema))}return d.call(this,n,o,t.schema,t)}function u(t,e,n){var i=l.call(this,t,e);if(i){var r=i.schema,o=i.baseId;t=i.root;var a=this._getId(r);return a&&(o=b(o,a)),d.call(this,n,o,r,t)}}t.exports=c,c.normalizeId=y,c.fullPath=g,c.url=b,c.ids=function(t){var e=y(this._getId(t)),n={"":e},a={"":g(e,!1)},c={},l=this;return s(t,{allKeys:!0},(function(t,e,s,u,h,d,p){if(""!==e){var f=l._getId(t),g=n[u],m=a[u]+"/"+h;if(void 0!==p&&(m+="/"+("number"==typeof p?p:o.escapeFragment(p))),"string"==typeof f){f=g=y(g?i.resolve(g,f):f);var v=l._refs[f];if("string"==typeof v&&(v=l._refs[v]),v&&v.schema){if(!r(t,v.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=y(m))if("#"==f[0]){if(c[f]&&!r(t,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=t}else l._refs[f]=m}n[e]=g,a[e]=m}})),c},c.inlineRef=f,c.schema=l;var h=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(t,e,n,i){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var r=t.fragment.split("/"),a=1;a<r.length;a++){var s=r[a];if(s){if(void 0===(n=n[s=o.unescapeFragment(s)]))break;var c;if(!h[s]&&((c=this._getId(n))&&(e=b(e,c)),n.$ref)){var u=b(e,n.$ref),d=l.call(this,i,u);d&&(n=d.schema,i=d.root,e=d.baseId)}}}return void 0!==n&&n!==i.schema?{schema:n,root:i,baseId:e}:void 0}}var p=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(t,e){return!1!==e&&(void 0===e||!0===e?function t(e){var n;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(n=e[i])&&!t(n))return!1}else for(var r in e){if("$ref"==r)return!1;if("object"==typeof(n=e[r])&&!t(n))return!1}return!0}(t):e?function t(e){var n,i=0;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(n=e[r])&&(i+=t(n)),i==1/0)return 1/0}else for(var o in e){if("$ref"==o)return 1/0;if(p[o])i++;else if("object"==typeof(n=e[o])&&(i+=t(n)+1),i==1/0)return 1/0}return i}(t)<=e:void 0)}function g(t,e){return!1!==e&&(t=y(t)),m(i.parse(t))}function m(t){return i.serialize(t).split("#")[0]+"#"}var v=/#\/?$/;function y(t){return t?t.replace(v,""):""}function b(t,e){return e=y(e),i.resolve(t,e)}},function(t,e,n){"use strict";var i=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var a,s,c,l=i(e),u=i(n);if(l&&u){if((s=e.length)!=n.length)return!1;for(a=s;0!=a--;)if(!t(e[a],n[a]))return!1;return!0}if(l!=u)return!1;var h=e instanceof Date,d=n instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==n.getTime();var p=e instanceof RegExp,f=n instanceof RegExp;if(p!=f)return!1;if(p&&f)return e.toString()==n.toString();var g=r(e);if((s=g.length)!==r(n).length)return!1;for(a=s;0!=a--;)if(!o.call(n,g[a]))return!1;for(a=s;0!=a--;)if(!t(e[c=g[a]],n[c]))return!1;return!0}return e!=e&&n!=n}},function(t,e,n){"use strict";var i=n(17);function r(t,e,n){this.message=n||r.message(t,e),this.missingRef=i.url(t,e),this.missingSchema=i.normalizeId(i.fullPath(this.missingRef))}function o(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}t.exports={Validation:o((function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0})),MissingRef:o(r)},r.message=function(t,e){return"can't resolve reference "+e+" from id "+t}},function(t,e,n){var i;if(window.ace)i=window.ace;else try{i=n(36),n(37),n(38);var r=n(39);i.config.setModuleUrl("ace/mode/json_worker",r)}catch(o){}t.exports=i},function(t,e,n){"use strict";n.r(e);var i=n(20),r=n.n(i),o=n(4),a=n.n(o),s=n(1),c=n(7),l=n(15),u=n(0),h=n(6),d=n(9),p=n(8),f=n(2),g=n(34);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"textModeMixins",(function(){return _}));var v={},y="ace/theme/jsoneditor";function b(){try{this.format()}catch(t){}}v.create=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.statusBar&&(e.statusBar=!0),e.mainMenuBar=!1!==e.mainMenuBar,e.enableSort=!1!==e.enableSort,e.enableTransform=!1!==e.enableTransform,this.options=e,this.indentation="number"==typeof e.indentation?Number(e.indentation):2;var n=e.ace?e.ace:r.a;this.mode="code"===e.mode?"code":"text","code"===this.mode&&void 0===n&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=e.theme||y,this.theme===y&&n&&Object(g.tryRequireThemeJsonEditor)(),e.onTextSelectionChange&&this.onTextSelectionChange(e.onTextSelectionChange);var i=this;this.container=t,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this.annotations=[],this.lastSchemaErrors=void 0,this._debouncedValidate=Object(u.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(t){t.preventDefault()},this.frame.onkeydown=function(t){i._onKeyDown(t)};var o={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};if(this.frameFocusTracker=new p.a(o),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.options.mainMenuBar){Object(u.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var a=document.createElement("button");a.type="button",a.className="jsoneditor-format",a.title="Format JSON data, with proper indentation and line feeds (Ctrl+\\)",this.menu.appendChild(a),a.onclick=function(){try{i.format(),i._onChange()}catch(t){i._onError(t)}};var h=document.createElement("button");if(h.type="button",h.className="jsoneditor-compact",h.title="Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",this.menu.appendChild(h),h.onclick=function(){try{i.compact(),i._onChange()}catch(t){i._onError(t)}},this.options.enableSort){var d=document.createElement("button");d.type="button",d.className="jsoneditor-sort",d.title=Object(s.c)("sortTitleShort"),d.onclick=function(){i._showSortModal()},this.menu.appendChild(d)}if(this.options.enableTransform){var f=document.createElement("button");f.type="button",f.title=Object(s.c)("transformTitleShort"),f.className="jsoneditor-transform",f.onclick=function(){i._showTransformModal()},this.menu.appendChild(f)}var v=document.createElement("button");if(v.type="button",v.className="jsoneditor-repair",v.title="Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.",this.menu.appendChild(v),v.onclick=function(){try{i.repair(),i._onChange()}catch(t){i._onError(t)}},this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new c.a(this.menu,this.options.modes,this.options.mode,(function(t){i.setMode(t),i.modeSwitcher.focus()}))),"code"===this.mode){var b=document.createElement("a");b.appendChild(document.createTextNode("powered by ace")),b.href="http://ace.ajax.org",b.target="_blank",b.className="jsoneditor-poweredBy",b.onclick=function(){window.open(b.href,b.target)},this.menu.appendChild(b)}}var _={},C=this.options.onEditable&&m("function"===this.options.onEditable)&&!this.options.onEditable(_);if(this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"===this.mode){this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom);var x=n.edit(this.editorDom),w=x.getSession();x.$blockScrolling=1/0,x.setTheme(this.theme),x.setOptions({readOnly:C}),x.setShowPrintMargin(!1),x.setFontSize("13px"),w.setMode("ace/mode/json"),w.setTabSize(this.indentation),w.setUseSoftTabs(!0),w.setUseWrapMode(!0);var I=w.setAnnotations;w.setAnnotations=function(t){I.call(this,t&&t.length?t:i.annotations)},x.commands.bindKey("Ctrl-L",null),x.commands.bindKey("Command-L",null),this.aceEditor=x,x.on("change",this._onChange.bind(this)),x.on("changeSelection",this._onSelect.bind(this))}else{var A=document.createElement("textarea");A.className="jsoneditor-text",A.spellcheck=!1,this.content.appendChild(A),this.textarea=A,this.textarea.readOnly=C,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this),A.onselect=this._onSelect.bind(this),A.onmousedown=this._onMouseDown.bind(this),A.onblur=this._onBlur.bind(this)}if(this.errorTable=new l.a({errorTableVisible:"text"===this.mode,onToggleVisibility:function(){i.validate()},onFocusLine:function(t){i.isFocused=!0,isNaN(t)||i.setTextSelection({row:t,column:1},{row:t,column:1e3})},onChangeHeight:function(t){var e=t+(i.dom.statusBar?i.dom.statusBar.clientHeight:0)+1;i.content.style.marginBottom=-e+"px",i.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.errorTable.getErrorTable()),e.statusBar){Object(u.addClassName)(this.content,"has-status-bar"),this.curserInfoElements={};var P=document.createElement("div");this.dom.statusBar=P,P.className="jsoneditor-statusbar",this.frame.appendChild(P);var O=document.createElement("span");O.className="jsoneditor-curserinfo-label",O.innerText="Ln:";var M=document.createElement("span");M.className="jsoneditor-curserinfo-val",M.innerText="1",P.appendChild(O),P.appendChild(M);var S=document.createElement("span");S.className="jsoneditor-curserinfo-label",S.innerText="Col:";var k=document.createElement("span");k.className="jsoneditor-curserinfo-val",k.innerText="1",P.appendChild(S),P.appendChild(k),this.curserInfoElements.colVal=k,this.curserInfoElements.lnVal=M;var E=document.createElement("span");E.className="jsoneditor-curserinfo-label",E.innerText="characters selected",E.style.display="none";var L=document.createElement("span");L.className="jsoneditor-curserinfo-count",L.innerText="0",L.style.display="none",this.curserInfoElements.countLabel=E,this.curserInfoElements.countVal=L,P.appendChild(L),P.appendChild(E),P.appendChild(this.errorTable.getErrorCounter()),P.appendChild(this.errorTable.getWarningIcon()),P.appendChild(this.errorTable.getErrorIcon())}this.setSchema(this.options.schema,this.options.schemaRefs)},v._onChange=function(){if(!this.onChangeDisabled){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(t){console.error("Error in onChangeText callback: ",t)}}},v._showSortModal=function(){var t=this,e=this.options.modalAnchor||f.a,n=this.get();Object(h.a)(e,n,(function(e){if(Array.isArray(n)){var i=Object(u.sort)(n,e.path,e.direction);t.sortedBy=e,t.set(i)}if(Object(u.isObject)(n)){var r=Object(u.sortObjectKeys)(n,e.direction);t.sortedBy=e,t.set(r)}}),t.sortedBy)},v._showTransformModal=function(){var t=this,e=this.options.modalAnchor||f.a,n=this.get();Object(d.a)(e,n,(function(e){var i=a.a.search(n,e);t.set(i)}))},v._onSelect=function(){this._updateCursorInfo(),this._emitSelectionChange()},v._onKeyDown=function(t){var e=!1;220===(t.which||t.keyCode)&&t.ctrlKey&&(t.shiftKey?(this.compact(),this._onChange()):(this.format(),this._onChange()),e=!0),e&&(t.preventDefault(),t.stopPropagation()),this._updateCursorInfo(),this._emitSelectionChange()},v._onMouseDown=function(){this._updateCursorInfo(),this._emitSelectionChange()},v._onBlur=function(){var t=this;setTimeout((function(){t.isFocused||(t._updateCursorInfo(),t._emitSelectionChange()),t.isFocused=!1}))},v._updateCursorInfo=function(){var t,e,n,i=this;if(this.textarea)setTimeout((function(){var r=Object(u.getInputSelection)(i.textarea);r.startIndex!==r.endIndex&&(n=r.endIndex-r.startIndex),n&&i.cursorInfo&&i.cursorInfo.line===r.end.row&&i.cursorInfo.column===r.end.column?(t=r.start.row,e=r.start.column):(t=r.end.row,e=r.end.column),i.cursorInfo={line:t,column:e,count:n},i.options.statusBar&&a()}),0);else if(this.aceEditor&&this.curserInfoElements){var r=this.aceEditor.getCursorPosition(),o=this.aceEditor.getSelectedText();i.cursorInfo={line:t=r.row+1,column:e=r.column+1,count:n=o.length},this.options.statusBar&&a()}function a(){i.curserInfoElements.countVal.innerText!==n&&(i.curserInfoElements.countVal.innerText=n,i.curserInfoElements.countVal.style.display=n?"inline":"none",i.curserInfoElements.countLabel.style.display=n?"inline":"none"),i.curserInfoElements.lnVal.innerText=t,i.curserInfoElements.colVal.innerText=e}},v._emitSelectionChange=function(){if(this._selectionChangedHandler){var t=this.getTextSelection();this._selectionChangedHandler(t.start,t.end,t.text)}},v._refreshAnnotations=function(){var t=this.aceEditor&&this.aceEditor.getSession();if(t){var e=t.getAnnotations().filter((function(t){return"error"===t.type}));t.setAnnotations(e)}},v.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null,this.frameFocusTracker.destroy()},v.compact=function(){var t=this.get(),e=JSON.stringify(t);this._setText(e,!1)},v.format=function(){var t=this.get(),e=JSON.stringify(t,null,this.indentation);this._setText(e,!1)},v.repair=function(){var t=this.getText(),e=Object(u.repair)(t);this._setText(e,!1)},v.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},v.resize=function(){this.aceEditor&&this.aceEditor.resize(!1)},v.set=function(t){this.setText(JSON.stringify(t,null,this.indentation))},v.update=function(t){this.updateText(JSON.stringify(t,null,this.indentation))},v.get=function(){var t=this.getText();return Object(u.parse)(t)},v.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},v._setText=function(t,e){var n=!0===this.options.escapeUnicode?Object(u.escapeUnicodeChars)(t):t;if(this.textarea&&(this.textarea.value=n),this.aceEditor&&(this.onChangeDisabled=!0,this.aceEditor.setValue(n,-1),this.onChangeDisabled=!1,e)){var i=this;setTimeout((function(){i.aceEditor&&i.aceEditor.session.getUndoManager().reset()}),0)}this._debouncedValidate()},v.setText=function(t){this._setText(t,!0)},v.updateText=function(t){this.getText()!==t&&this._setText(t,!1)},v.validate=function(){var t,e=this,n=[],i=[];try{t=this.get(),this.validateSchema&&(this.validateSchema(t)||(n=this.validateSchema.errors.map((function(t){return t.type="validation",Object(u.improveSchemaError)(t)})))),this.validationSequence=(this.validationSequence||0)+1;var r=this,o=this.validationSequence;(function(t,e){if(!e)return Promise.resolve([]);try{var n=e(t);return(Object(u.isPromise)(n)?n:Promise.resolve(n)).then((function(t){return Array.isArray(t)?t.filter((function(t){var e=Object(u.isValidValidationError)(t);return e||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',t),e})).map((function(t){return{dataPath:Object(u.stringifyPath)(t.path),message:t.message,type:"customValidation"}})):[]}))}catch(i){return Promise.reject(i)}})(t,this.options.onValidate).then((function(t){if(o===r.validationSequence){var a=n.concat(i).concat(t);r._renderErrors(a),"function"==typeof e.options.onValidationError&&(Object(u.isValidationErrorChanged)(a,e.lastSchemaErrors)&&e.options.onValidationError.call(e,a),e.lastSchemaErrors=a)}})).catch((function(t){console.error("Custom validation function did throw an error",t)}))}catch(c){if(this.getText()){var a,s=/\w*line\s*(\d+)\w*/g.exec(c.message);s&&(a=+s[1]),i=[{type:"error",message:c.message.replace(/\n/g,"<br>"),line:a}]}this._renderErrors(i),"function"==typeof this.options.onValidationError&&(Object(u.isValidationErrorChanged)(i,this.lastSchemaErrors)&&this.options.onValidationError.call(this,i),this.lastSchemaErrors=i)}},v._renderErrors=function(t){var e=this.getText(),n=[];t.reduce((function(t,e){return"string"==typeof e.dataPath&&-1===t.indexOf(e.dataPath)&&t.push(e.dataPath),t}),n);var i=Object(u.getPositionForPath)(e,n);this.aceEditor&&(this.annotations=i.map((function(e){var n=t.filter((function(t){return t.dataPath===e.path})),i=n.map((function(t){return t.message})).join("\n");return i?{row:e.line,column:e.column,text:"Schema validation error"+(1!==n.length?"s":"")+": \n"+i,type:"warning",source:"jsoneditor"}:{}})),this._refreshAnnotations()),this.errorTable.setErrors(t,i),this.aceEditor&&this.aceEditor.resize(!1)},v.getTextSelection=function(){var t={};if(this.textarea){var e=Object(u.getInputSelection)(this.textarea);return this.cursorInfo&&this.cursorInfo.line===e.end.row&&this.cursorInfo.column===e.end.column?(t.start=e.end,t.end=e.start):t=e,{start:t.start,end:t.end,text:this.textarea.value.substring(e.startIndex,e.endIndex)}}if(this.aceEditor){var n=this.aceEditor.getSelection(),i=this.aceEditor.getSelectedText(),r=n.getRange(),o=n.getSelectionLead();return o.row===r.end.row&&o.column===r.end.column?t=r:(t.start=r.end,t.end=r.start),{start:{row:t.start.row+1,column:t.start.column+1},end:{row:t.end.row+1,column:t.end.column+1},text:i}}},v.onTextSelectionChange=function(t){"function"==typeof t&&(this._selectionChangedHandler=Object(u.debounce)(t,this.DEBOUNCE_INTERVAL))},v.setTextSelection=function(t,e){if(t&&e)if(this.textarea){var n=Object(u.getIndexForPosition)(this.textarea,t.row,t.column),i=Object(u.getIndexForPosition)(this.textarea,e.row,e.column);if(n>-1&&i>-1){if(this.textarea.setSelectionRange)this.textarea.focus(),this.textarea.setSelectionRange(n,i);else if(this.textarea.createTextRange){var r=this.textarea.createTextRange();r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",n),r.select()}var o=(this.textarea.value.match(/\n/g)||[]).length+1,a=t.row*(this.textarea.scrollHeight/o);this.textarea.scrollTop=a>this.textarea.clientHeight?a-this.textarea.clientHeight/2:0}}else this.aceEditor&&(this.aceEditor.selection.setRange({start:{row:t.row-1,column:t.column-1},end:{row:e.row-1,column:e.column-1}}),this.aceEditor.scrollToLine(t.row-1,!0))};var _=[{mode:"text",mixin:v,data:"text",load:b},{mode:"code",mixin:v,data:"text",load:b}]},function(t,e,n){var i,r=((i={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={};break;case 14:this.$=o[s-1];break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[];break;case 19:this.$=o[s-1];break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,a="",s=0,c=0,l=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;function h(){var t;return"number"!=typeof(t=e.lexer.lex()||1)&&(t=e.symbols_[t]||t),t}r.push(u),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,f,g,m,v,y,b,_={};;){if(this.defaultActions[f=n[n.length-1]]?g=this.defaultActions[f]:(null==d&&(d=h()),g=o[f]&&o[f][d]),void 0===g||!g.length||!g[0]){if(!l){for(v in b=[],o[f])this.terminals_[v]&&v>2&&b.push("'"+this.terminals_[v]+"'");var C="";C=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+this.terminals_[d]+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:b})}if(3==l){if(1==d)throw new Error(C||"Parsing halted.");c=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,d=h()}for(;!(2..toString()in o[f]);){if(0==f)throw new Error(C||"Parsing halted.");n.length=n.length-2,i.length=i.length-1,r.length=r.length-1,f=n[n.length-1]}p=d,d=2,g=o[f=n[n.length-1]]&&o[f][2],l=3}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+d);switch(g[0]){case 1:n.push(d),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),d=null,p?(d=p,p=null):(c=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,l>0&&l--);break;case 2:if(_.$=i[i.length-(y=this.productions_[g[1]][1])],_._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},void 0!==(m=this.performAction.call(_,a,c,s,this.yy,g[1],i,r)))return m;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),i.push(_.$),r.push(_._$),n.push(o[n[n.length-2]][n[n.length-1]]);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(n=this._input.match(this.rules[o[a]]))||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?((r=e[0].match(/\n.*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n,i){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},i);e.parser=r,e.parse=r.parse.bind(r)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){"undefined"!=typeof Element&&function(){function t(t){"remove"in t||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){void 0!==this.parentNode&&this.parentNode.removeChild(this)}})}void 0!==window.Element&&t(window.Element.prototype),void 0!==window.CharacterData&&t(window.CharacterData.prototype),void 0!==window.DocumentType&&t(window.DocumentType.prototype)}(),Array.prototype.find||(Array.prototype.find=function(t){for(var e=0;e<this.length;e++){var n=this[e];if(t.call(this,n,e,this))return n}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},function(t,e,n){"use strict";var i=n(5);t.exports=function(t){i.copy(t,this)}},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,i="boolean"==typeof e.cycles&&e.cycles,r=e.cmp&&(n=e.cmp,function(t){return function(e,i){return n({key:e,value:t[e]},{key:i,value:t[i]})}}),o=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,a;if(Array.isArray(e)){for(a="[",n=0;n<e.length;n++)n&&(a+=","),a+=t(e[n])||"null";return a+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(e)-1,c=Object.keys(e).sort(r&&r(e));for(a="",n=0;n<c.length;n++){var l=c[n],u=t(e[l]);u&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u)}return o.splice(s,1),"{"+a+"}"}}(t)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i="",r=!0===t.schema.$async,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),a=t.self._getId(t.schema);if(t.opts.strictKeywords){var s=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(s){var c="unknown keyword: "+s;if("log"!==t.opts.strictKeywords)throw new Error(c);t.logger.warn(c)}}if(t.isTop&&(i+=" var validate = ",r&&(t.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(t.opts.sourceCode||t.opts.processCode)&&(i+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof t.schema||!o&&!t.schema.$ref){var l=t.level,u=t.dataLevel,h=t.schema[e="false schema"],d=t.schemaPath+t.util.getProperty(e),p=t.errSchemaPath+"/"+e,f=!t.opts.allErrors,g="data"+(u||""),m="valid"+l;if(!1===t.schema){t.isTop?f=!0:i+=" var "+m+" = false; ",(H=H||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'boolean schema is false' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var v=i;i=H.pop(),i+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else i+=t.isTop?r?" return data; ":" validate.errors = null; return true; ":" var "+m+" = true; ";return t.isTop&&(i+=" }; return validate; "),i}if(t.isTop){var y=t.isTop;if(l=t.level=0,u=t.dataLevel=0,g="data",t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[void 0],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(b);t.logger.warn(b)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{if(l=t.level,g="data"+((u=t.dataLevel)||""),a&&(t.baseId=t.resolve.url(t.baseId,a)),r&&!t.async)throw new Error("async schema in sync schema");i+=" var errs_"+l+" = errors;"}m="valid"+l,f=!t.opts.allErrors;var _="",C="",x=t.schema.type,w=Array.isArray(x);if(x&&t.opts.nullable&&!0===t.schema.nullable&&(w?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],w=!0)),w&&1==x.length&&(x=x[0],w=!1),t.schema.$ref&&o){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(i+=" "+t.RULES.all.$comment.code(t,"$comment")),x){if(t.opts.coerceTypes)var I=t.util.coerceToTypes(t.opts.coerceTypes,x);var A=t.RULES.types[x];if(I||w||!0===A||A&&!q(A)){if(d=t.schemaPath+".type",p=t.errSchemaPath+"/type",d=t.schemaPath+".type",p=t.errSchemaPath+"/type",i+=" if ("+t.util[w?"checkDataTypes":"checkDataType"](x,g,!0)+") { ",I){var P="dataType"+l,O="coerced"+l;i+=" var "+P+" = typeof "+g+"; ","array"==t.opts.coerceTypes&&(i+=" if ("+P+" == 'object' && Array.isArray("+g+")) "+P+" = 'array'; "),i+=" var "+O+" = undefined; ";var M="",S=I;if(S)for(var k,E=-1,L=S.length-1;E<L;)k=S[E+=1],E&&(i+=" if ("+O+" === undefined) { ",M+="}"),"array"==t.opts.coerceTypes&&"array"!=k&&(i+=" if ("+P+" == 'array' && "+g+".length == 1) { "+O+" = "+g+" = "+g+"[0]; "+P+" = typeof "+g+";  } "),"string"==k?i+=" if ("+P+" == 'number' || "+P+" == 'boolean') "+O+" = '' + "+g+"; else if ("+g+" === null) "+O+" = ''; ":"number"==k||"integer"==k?(i+=" if ("+P+" == 'boolean' || "+g+" === null || ("+P+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==k&&(i+=" && !("+g+" % 1)"),i+=")) "+O+" = +"+g+"; "):"boolean"==k?i+=" if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+O+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+O+" = true; ":"null"==k?i+=" if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+O+" = null; ":"array"==t.opts.coerceTypes&&"array"==k&&(i+=" if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+g+" == null) "+O+" = ["+g+"]; ");(H=H||[]).push(i+=" "+M+" if ("+O+" === undefined) {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",i+=w?""+x.join(","):""+x,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=w?""+x.join(","):""+x,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",v=i,i=H.pop(),i+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  ";var T=u?"data"+(u-1||""):"parentData";i+=" "+g+" = "+O+"; ",u||(i+="if ("+T+" !== undefined)"),i+=" "+T+"["+(u?t.dataPathArr[u]:"parentDataProperty")+"] = "+O+"; } "}else(H=H||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",i+=w?""+x.join(","):""+x,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=w?""+x.join(","):""+x,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",v=i,i=H.pop(),i+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";i+=" } "}}if(t.schema.$ref&&!o)i+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",f&&(i+=" } if (errors === ",i+=y?"0":"errs_"+l,i+=") { ",C+="}");else{var R=t.RULES;if(R)for(var N=-1,B=R.length-1;N<B;)if(q(A=R[N+=1])){if(A.type&&(i+=" if ("+t.util.checkDataType(A.type,g)+") { "),t.opts.useDefaults)if("object"==A.type&&t.schema.properties){h=t.schema.properties;var j=Object.keys(h);if(j)for(var D,F=-1,z=j.length-1;F<z;)if(void 0!==(Z=h[D=j[F+=1]]).default){var V=g+t.util.getProperty(D);if(t.compositeRule){if(t.opts.strictDefaults){if(b="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(b);t.logger.warn(b)}}else i+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(i+=" || "+V+" === null || "+V+" === '' "),i+=" ) "+V+" = ",i+="shared"==t.opts.useDefaults?" "+t.useDefault(Z.default)+" ":" "+JSON.stringify(Z.default)+" ",i+="; "}}else if("array"==A.type&&Array.isArray(t.schema.items)){var G=t.schema.items;if(G){E=-1;for(var Z,W=G.length-1;E<W;)if(void 0!==(Z=G[E+=1]).default)if(V=g+"["+E+"]",t.compositeRule){if(t.opts.strictDefaults){if(b="default is ignored for: "+V,"log"!==t.opts.strictDefaults)throw new Error(b);t.logger.warn(b)}}else i+=" if ("+V+" === undefined ","empty"==t.opts.useDefaults&&(i+=" || "+V+" === null || "+V+" === '' "),i+=" ) "+V+" = ",i+="shared"==t.opts.useDefaults?" "+t.useDefault(Z.default)+" ":" "+JSON.stringify(Z.default)+" ",i+="; "}}var H,U=A.rules;if(U)for(var $,K=-1,X=U.length-1;K<X;)if(J($=U[K+=1])){var Y=$.code(t,$.keyword,A.type);Y&&(i+=" "+Y+" ",f&&(_+="}"))}f&&(i+=" "+_+" ",_=""),A.type&&(i+=" } ",x&&x===A.type&&!I)&&(d=t.schemaPath+".type",p=t.errSchemaPath+"/type",(H=H||[]).push(i+=" else { "),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",i+=w?""+x.join(","):""+x,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=w?""+x.join(","):""+x,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",v=i,i=H.pop(),i+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "),f&&(i+=" if (errors === ",i+=y?"0":"errs_"+l,i+=") { ",C+="}")}}function q(t){for(var e=t.rules,n=0;n<e.length;n++)if(J(e[n]))return!0}function J(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var n=e.implements,i=0;i<n.length;i++)if(void 0!==t.schema[n[i]])return!0}(e)}return f&&(i+=" "+C+" "),y?(r?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+m+" = errors === errs_"+l+";",i=t.util.cleanUpCode(i),y&&(i=t.util.finalCleanUpCode(i,r)),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s;var p="maximum"==e,f=p?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[f],m=t.opts.$data&&g&&g.$data,v=p?"<":">",y=p?">":"<",b=void 0;if(m){var _,C=t.util.getData(g.$data,a,t.dataPathArr),x="exclusive"+o,w="exclType"+o,I="exclIsNumber"+o,A="' + "+(O="op"+o)+" + '";r+=" var schemaExcl"+o+" = "+C+"; ",b=f,(_=_||[]).push(r+=" var "+x+"; var "+w+" = typeof "+(C="schemaExcl"+o)+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { "),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: '"+f+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var P=r;r=_.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),r+=" "+w+" == 'number' ? ( ("+x+" = "+i+" === undefined || "+C+" "+v+"= "+i+") ? "+h+" "+y+"= "+C+" : "+h+" "+y+" "+i+" ) : ( ("+x+" = "+C+" === true) ? "+h+" "+y+"= "+i+" : "+h+" "+y+" "+i+" ) || "+h+" !== "+h+") { var op"+o+" = "+x+" ? '"+v+"' : '"+v+"='; ",void 0===s&&(b=f,l=t.errSchemaPath+"/"+f,i=C,d=m)}else if(A=v,(I="number"==typeof g)&&d){var O="'"+A+"'";r+=" if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),r+=" ( "+i+" === undefined || "+g+" "+v+"= "+i+" ? "+h+" "+y+"= "+g+" : "+h+" "+y+" "+i+" ) || "+h+" !== "+h+") { "}else I&&void 0===s?(x=!0,b=f,l=t.errSchemaPath+"/"+f,i=g,y+="="):(I&&(i=Math[p?"min":"max"](g,s)),g===(!I||i)?(x=!0,b=f,l=t.errSchemaPath+"/"+f,y+="="):(x=!1,A+="=")),O="'"+A+"'",r+=" if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),r+=" "+h+" "+y+" "+i+" || "+h+" !== "+h+") { ";return b=b||e,(_=_||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { comparison: "+O+", limit: "+i+", exclusive: "+x+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be "+A+" ",r+=d?"' + "+i:i+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",P=r,r=_.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s,r+="if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || ");var p=e,f=f||[];f.push(r+=" "+h+".length "+("maxItems"==e?">":"<")+" "+i+") { "),r="",!1!==t.createErrors?(r+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxItems"==e?"more":"fewer",r+=" than ",r+=d?"' + "+i+" + '":""+s,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var g=r;return r=f.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s,r+="if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),r+=!1===t.opts.unicode?" "+h+".length ":" ucs2length("+h+") ";var p=e,f=f||[];f.push(r+=" "+("maxLength"==e?">":"<")+" "+i+") { "),r="",!1!==t.createErrors?(r+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be ",r+="maxLength"==e?"longer":"shorter",r+=" than ",r+=d?"' + "+i+" + '":""+s,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var g=r;return r=f.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s,r+="if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'number') || ");var p=e,f=f||[];f.push(r+=" Object.keys("+h+").length "+("maxProperties"==e?">":"<")+" "+i+") { "),r="",!1!==t.createErrors?(r+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxProperties"==e?"more":"fewer",r+=" than ",r+=d?"' + "+i+" + '":""+s,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var g=r;return r=f.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(t,e,n){"use strict";var i={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},r="a".charCodeAt();e.parse=function(t,e,n){var o={},a=0,s=0,c=0,l=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:function e(n,i){var r;u(),y(n,"value");var o=p();switch(o){case"t":d("rue"),r=!0;break;case"f":d("alse"),r=!1;break;case"n":d("ull"),r=null;break;case'"':r=h();break;case"[":r=function(t){u();var n=[],i=0;if("]"==p())return n;for(f();;){n.push(e(t+"/"+i)),u();var r=p();if("]"==r)break;","!=r&&x(),u(),i++}return n}(n);break;case"{":r=function(t){u();var n={};if("}"==p())return n;for(f();;){var i=_();'"'!=p()&&x();var r=h(),o=t+"/"+m(r);b(o,"key",i),y(o,"keyEnd"),u(),":"!=p()&&x(),u(),n[r]=e(o),u();var a=p();if("}"==a)break;","!=a&&x(),u()}return n}(n);break;default:f(),"-0123456789".indexOf(o)>=0?r=function(){var e="",n=!0;"-"==t[c]&&(e+=p()),e+="0"==t[c]?p():v(),"."==t[c]&&(e+=p()+v(),n=!1),"e"!=t[c]&&"E"!=t[c]||(e+=p(),"+"!=t[c]&&"-"!=t[c]||(e+=p()),e+=v(),n=!1);var i=+e;return l&&n&&(i>Number.MAX_SAFE_INTEGER||i<Number.MIN_SAFE_INTEGER)?BigInt(e):i}():C()}return y(n,"valueEnd"),u(),i&&c<t.length&&C(),r}("",!0),pointers:o};function u(){t:for(;c<t.length;){switch(t[c]){case" ":s++;break;case"\t":s+=4;break;case"\r":s=0;break;case"\n":s=0,a++;break;default:break t}c++}}function h(){for(var t,e="";'"'!=(t=p());)"\\"==t?(t=p())in i?e+=i[t]:"u"==t?e+=g():x():e+=t;return e}function d(t){for(var e=0;e<t.length;e++)p()!==t[e]&&x()}function p(){w();var e=t[c];return c++,s++,e}function f(){c--,s--}function g(){for(var t=4,e=0;t--;){e<<=4;var n=p().toLowerCase();n>="a"&&n<="f"?e+=n.charCodeAt()-r+10:n>="0"&&n<="9"?e+=+n:x()}return String.fromCharCode(e)}function v(){for(var e="";t[c]>="0"&&t[c]<="9";)e+=p();if(e.length)return e;w(),C()}function y(t,e){b(t,e,_())}function b(t,e,n){o[t]=o[t]||{},o[t][e]=n}function _(){return{line:a,column:s,pos:c}}function C(){throw new SyntaxError("Unexpected token "+t[c]+" in JSON at position "+c)}function x(){f(),C()}function w(){if(c>=t.length)throw new SyntaxError("Unexpected end of JSON input")}},e.stringify=function(t,e,n){if(a(t)){var i,r,o=0,s="object"==typeof n?n.space:n;switch(typeof s){case"number":var c=s>10?10:s<0?0:Math.floor(s);s=c&&C(c," "),i=c,r=c;break;case"string":s=s.slice(0,10),i=0,r=0;for(var l=0;l<s.length;l++){switch(s[l]){case" ":r++;break;case"\t":r+=4;break;case"\r":r=0;break;case"\n":r=0,o++;break;default:throw new Error("whitespace characters not allowed in JSON")}i++}break;default:s=void 0}var u="",h={},d=0,f=0,g=0,v=n&&n.es6&&"function"==typeof Map;return function t(e,n,i){switch(_(i,"value"),typeof e){case"number":case"bigint":case"boolean":y(""+e);break;case"string":y(p(e));break;case"object":null===e?y("null"):"function"==typeof e.toJSON?y(p(e.toJSON())):Array.isArray(e)?r():v?e.constructor.BYTES_PER_ELEMENT?r():e instanceof Map?c():e instanceof Set?c(!0):o():o()}function r(){if(e.length){y("[");for(var r=n+1,o=0;o<e.length;o++){o&&y(","),b(r);var s=a(e[o])?e[o]:null;t(s,r,i+"/"+o)}b(n),y("]")}else y("[]")}function o(){var r=Object.keys(e);if(r.length){y("{");for(var o=n+1,c=0;c<r.length;c++){var l=r[c],u=e[l];if(a(u)){c&&y(",");var h=i+"/"+m(l);b(o),_(h,"key"),y(p(l)),_(h,"keyEnd"),y(":"),s&&y(" "),t(u,o,h)}}b(n),y("}")}else y("{}")}function c(r){if(e.size){y("{");for(var o=n+1,c=!0,l=e.entries(),u=l.next();!u.done;){var h=u.value,d=h[0],f=!!r||h[1];if(a(f)){c||y(","),c=!1;var g=i+"/"+m(d);b(o),_(g,"key"),y(p(d)),_(g,"keyEnd"),y(":"),s&&y(" "),t(f,o,g)}u=l.next()}b(n),y("}")}else y("{}")}_(i,"valueEnd")}(t,0,""),{json:u,pointers:h}}function y(t){f+=t.length,g+=t.length,u+=t}function b(t){if(s){for(u+="\n"+C(t,s),d++,f=0;t--;)o?(d+=o,f=r):f+=r,g+=i;g+=1}}function _(t,e){h[t]=h[t]||{},h[t][e]={line:d,column:f,pos:g}}function C(t,e){return Array(t+1).join(e)}};var o=["number","bigint","boolean","string","object"];function a(t){return o.indexOf(typeof t)>=0}var s=/"|\\/g,c=/[\b]/g,l=/\f/g,u=/\n/g,h=/\r/g,d=/\t/g;function p(t){return'"'+(t=t.replace(s,"\\$&").replace(l,"\\f").replace(c,"\\b").replace(u,"\\n").replace(h,"\\r").replace(d,"\\t"))+'"'}var f=/~/g,g=/\//g;function m(t){return t.replace(f,"~0").replace(g,"~1")}},function(t,e,n){e.tryRequireThemeJsonEditor=function(){try{n(41)}catch(t){console.error(t)}}},function(t,e,n){"use strict";var i=n(20),r=n(13),o=n(79).treeModeMixins,a=n(21).textModeMixins,s=n(80).previewModeMixins,c=n(0),l=c.clear,u=c.extend,h=c.getInternetExplorerVersion,d=c.parse,p=(0,n(42).tryRequireAjv)();function f(t,e,n){if(!(this instanceof f))throw new Error('JSONEditor constructor called without "new".');var i=h();if(-1!==i&&i<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");e&&(e.error&&(console.warn('Option "error" has been renamed to "onError"'),e.onError=e.error,delete e.error),e.change&&(console.warn('Option "change" has been renamed to "onChange"'),e.onChange=e.change,delete e.change),e.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),e.onEditable=e.editable,delete e.editable),e.onChangeJSON&&("text"===e.mode||"code"===e.mode||e.modes&&(-1!==e.modes.indexOf("text")||-1!==e.modes.indexOf("code")))&&console.warn('Option "onChangeJSON" is not applicable to modes "text" and "code". Use "onChangeText" or "onChange" instead.'),e&&Object.keys(e).forEach((function(t){-1===f.VALID_OPTIONS.indexOf(t)&&console.warn('Unknown option "'+t+'". This option will be ignored')}))),arguments.length&&this._create(t,e,n)}"undefined"==typeof Promise&&console.error("Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor"),f.modes={},f.prototype.DEBOUNCE_INTERVAL=150,f.VALID_OPTIONS=["ajv","schema","schemaRefs","templates","ace","theme","autocomplete","onChange","onChangeJSON","onChangeText","onEditable","onError","onEvent","onModeChange","onNodeName","onValidate","onCreateMenu","onSelectionChange","onTextSelectionChange","onClassName","onFocus","onBlur","colorPicker","onColorPicker","timestampTag","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys","navigationBar","statusBar","mainMenuBar","languages","language","enableSort","enableTransform","maxVisibleChilds","onValidationError"],f.prototype._create=function(t,e,n){this.container=t,this.options=e||{},this.json=n||{},this.setMode(this.options.mode||this.options.modes&&this.options.modes[0]||"tree")},f.prototype.destroy=function(){},f.prototype.set=function(t){this.json=t},f.prototype.get=function(){return this.json},f.prototype.setText=function(t){this.json=d(t)},f.prototype.getText=function(){return JSON.stringify(this.json)},f.prototype.setName=function(t){this.options||(this.options={}),this.options.name=t},f.prototype.getName=function(){return this.options&&this.options.name},f.prototype.setMode=function(t){if(t!==this.options.mode||!this.create){var e,n,i=this.container,r=u({},this.options),o=r.mode;r.mode=t;var a=f.modes[t];if(!a)throw new Error('Unknown mode "'+r.mode+'"');try{var s="text"===a.data;if(n=this.getName(),e=this[s?"getText":"get"](),this.destroy(),l(this),u(this,a.mixin),this.create(i,r),this.setName(n),this[s?"setText":"set"](e),"function"==typeof a.load)try{a.load.call(this)}catch(c){console.error(c)}if("function"==typeof r.onModeChange&&t!==o)try{r.onModeChange(t,o)}catch(c){console.error(c)}}catch(c){this._onError(c)}}},f.prototype.getMode=function(){return this.options.mode},f.prototype._onError=function(t){if(!this.options||"function"!=typeof this.options.onError)throw t;this.options.onError(t)},f.prototype.setSchema=function(t,e){if(t){var i;try{this.options.ajv?i=this.options.ajv:((i=p({allErrors:!0,verbose:!0,schemaId:"auto",$data:!0})).addMetaSchema(n(77)),i.addMetaSchema(n(78)))}catch(o){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}if(i){if(e){for(var r in e)i.removeSchema(r),e[r]&&i.addSchema(e[r],r);this.options.schemaRefs=e}this.validateSchema=i.compile(t),this.options.schema=t,this.validate()}this.refresh()}else this.validateSchema=null,this.options.schema=null,this.options.schemaRefs=null,this.validate(),this.refresh()},f.prototype.validate=function(){},f.prototype.refresh=function(){},f.registerMode=function(t){var e,n;if(Array.isArray(t))for(e=0;e<t.length;e++)f.registerMode(t[e]);else{if(!("mode"in t))throw new Error('Property "mode" missing');if(!("mixin"in t))throw new Error('Property "mixin" missing');if(!("data"in t))throw new Error('Property "data" missing');var i=t.mode;if(i in f.modes)throw new Error('Mode "'+i+'" already registered');if("function"!=typeof t.mixin.create)throw new Error('Required function "create" missing on mixin');var r=["setMode","registerMode","modes"];for(e=0;e<r.length;e++)if((n=r[e])in t.mixin)throw new Error('Reserved property "'+n+'" not allowed in mixin');f.modes[i]=t}},f.registerMode(o),f.registerMode(a),f.registerMode(s),f.ace=i,f.Ajv=p,f.VanillaPicker=r,f.default=f,t.exports=f},function(t,e,n){(function(t){!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,i){"string"==typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};e.modules={},e.payloads={};var n,i=function(t,e,n){if("string"==typeof e){var i=o(t,e);if(null!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(e)){for(var a=[],s=0,c=e.length;s<c;++s){var l=o(t,e[s]);if(null==l&&r.original)return;a.push(l)}return n&&n.apply(null,a)||!0}},r=function t(e,n){var r=i("",e,n);return null==r&&t.original?t.original.apply(this,arguments):r},o=function(t,n){n=function t(e,n){if(-1!==n.indexOf("!")){var i=n.split("!");return t(e,i[0])+"!"+t(e,i[1])}if("."==n.charAt(0))for(n=e.split("/").slice(0,-1).join("/")+"/"+n;-1!==n.indexOf(".")&&r!=n;){var r=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return n}(t,n);var r=e.modules[n];if(!r){if("function"==typeof(r=e.payloads[n])){var o={},a={id:n,uri:"",exports:o,packaged:!0},s=r((function(t,e){return i(n,t,e)}),o,a);e.modules[n]=o=s||a.exports,delete e.payloads[n]}r=e.modules[n]=o||r}return r};n=t,t.ace||(t.ace={}),(n=t.ace).define&&n.define.packaged||(e.original=n.define,n.define=e,n.define.packaged=!0),n.require&&n.require.packaged||(r.original=n.require,n.require=r,n.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(t,e,n){"use strict";var i,r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},o=void 0===r.exec.call(/()??/,"")[1],a=(r.test.call(i=/^/g,""),!i.lastIndex);function s(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function c(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var i=n||0;i<t.length;i++)if(t[i]===e)return i;return-1}a&&o||(RegExp.prototype.exec=function(t){var e,n,i=r.exec.apply(this,arguments);if("string"==typeof t&&i){if(!o&&i.length>1&&c(i,"")>-1&&(n=RegExp(this.source,r.replace.call(s(this),"g","")),r.replace.call(t.slice(i.index),n,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(i[t]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<i.length;l++)(e=this._xregexp.captureNames[l-1])&&(i[e]=i[l]);!a&&this.global&&!i[0].length&&this.lastIndex>i.index&&this.lastIndex--}return i},a||(RegExp.prototype.test=function(t){var e=r.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(t,e,n){function i(){}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=h.call(arguments,1),r=function i(){if(this instanceof i){var r=e.apply(this,n.concat(h.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(h.call(arguments)))};return e.prototype&&(i.prototype=e.prototype,r.prototype=new i,i.prototype=null),r});var r,o,a,s,c,l=Function.prototype.call,u=Object.prototype,h=Array.prototype.slice,d=l.bind(u.toString),p=l.bind(u.hasOwnProperty);if((c=p(u,"__defineGetter__"))&&(r=l.bind(u.__defineGetter__),o=l.bind(u.__defineSetter__),a=l.bind(u.__lookupGetter__),s=l.bind(u.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,n=[];if(n.splice.apply(n,t(20)),n.splice.apply(n,t(26)),e=n.length,n.splice(5,0,"XXX"),e+1==n.length)return!0}()){var f=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?f.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(h.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var n=this.length;t>0?t>n&&(t=n):null==t?t=0:t<0&&(t=Math.max(n+t,0)),t+e<n||(e=n-t);var i=this.slice(t,t+e),r=h.call(arguments,2),o=r.length;if(t===n)o&&this.push.apply(this,r);else{var a=Math.min(e,n-t),s=t+a,c=s+o-a,l=n-s,u=n-a;if(c<s)for(var d=0;d<l;++d)this[c+d]=this[s+d];else if(c>s)for(d=l;d--;)this[c+d]=this[s+d];if(o&&t===u)this.length=u,this.push.apply(this,r);else for(this.length=u+o,d=0;d<o;++d)this[t+d]=r[d]}return i};Array.isArray||(Array.isArray=function(t){return"[object Array]"==d(t)});var g,m,v=Object("a"),y="a"!=v[0]||!(0 in v);function b(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError;for(;++r<o;)r in n&&t.call(i,n[r],r,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var a=0;a<i;a++)a in n&&(r[a]=t.call(o,n[a],a,e));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=E(this),i=y&&"[object String]"==d(this)?this.split(""):n,r=i.length>>>0,o=[],a=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var s=0;s<r;s++)s in i&&t.call(a,e=i[s],s,n)&&o.push(e);return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&!t.call(r,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&t.call(r,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in n&&(r=t.call(void 0,r,n[o],o,e));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=E(this),n=y&&"[object String]"==d(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(r=t.call(void 0,r,n[o],o,e))}while(o--);return r}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=y&&"[object String]"==d(this)?this.split(""):E(this),n=e.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=k(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=y&&"[object String]"==d(this)?this.split(""):E(this),n=e.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,k(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in e&&t===e[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:u)}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(p(t,e)){var n;if(n={enumerable:!0,configurable:!0},c){var i=t.__proto__;t.__proto__=u;var r=a(t,e),o=s(t,e);if(t.__proto__=i,r||o)return r&&(n.get=r),o&&(n.set=o),n}return n.value=t[e],n}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(g=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var n;if(null===t)n=g();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,(n=new i).__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}),Object.defineProperty){var _=b({}),C="undefined"==typeof document||b(document.createElement("div"));if(!_||!C)var x=Object.defineProperty}Object.defineProperty&&!x||(Object.defineProperty=function(t,e,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(x)try{return x.call(Object,t,e,n)}catch(l){}if(p(n,"value"))if(c&&(a(t,e)||s(t,e))){var i=t.__proto__;t.__proto__=u,delete t[e],t[e]=n.value,t.__proto__=i}else t[e]=n.value;else{if(!c)throw new TypeError("getters & setters can not be defined on this javascript engine");p(n,"get")&&r(t,e,n.get),p(n,"set")&&o(t,e,n.set)}return t}),Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)p(e,n)&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze((function(){}))}catch(L){Object.freeze=(m=Object.freeze,function(t){return"function"==typeof t?t:m(t)})}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";p(t,e);)e+="?";t[e]=!0;var n=p(t,e);return delete t[e],n}),!Object.keys){var w=!0,I=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],A=I.length;for(var P in{toString:null})w=!1;Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var n in t)p(t,n)&&e.push(n);if(w)for(var i=0,r=A;i<r;i++){var o=I[i];p(t,o)&&e.push(o)}return e}}Date.now||(Date.now=function(){return(new Date).getTime()});var O="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim){O="["+O+"]";var M=new RegExp("^"+O+O+"*"),S=new RegExp(O+O+"*$");String.prototype.trim=function(){return String(this).replace(M,"").replace(S,"")}}function k(t){return(t=+t)!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}var E=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(t,e,n){"use strict";t("./regexp"),t("./es5-shim"),"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(t,e,n){"use strict";e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},r=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),o=i.userAgent||"",a=i.appName||"";e.isWin="win"==r,e.isMac="mac"==r,e.isLinux="linux"==r,e.isIE="Microsoft Internet Explorer"==a||a.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=o.match(/ Gecko\/\d+/),e.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isAndroid=o.indexOf("Android")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,e.isIOS&&(e.isMac=!0),e.isMobile=e.isIOS||e.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./useragent");if(e.buildDom=function t(e,n,i){if("string"==typeof e&&e){var r=document.createTextNode(e);return n&&n.appendChild(r),r}if(!Array.isArray(e))return e;if("string"!=typeof e[0]||!e[0]){for(var o=[],a=0;a<e.length;a++){var s=t(e[a],n,i);s&&o.push(s)}return o}var c=document.createElement(e[0]),l=e[1],u=1;for(l&&"object"==typeof l&&!Array.isArray(l)&&(u=2),a=u;a<e.length;a++)t(e[a],c,i);return 2==u&&Object.keys(l).forEach((function(t){var e=l[t];"class"===t?c.className=Array.isArray(e)?e.join(" "):e:"function"==typeof e||"value"==t?c[t]=e:"ref"===t?i&&(i[e]=c):null!=e&&c.setAttribute(t,e)})),n&&n.appendChild(c),c},e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.removeChildren=function(t){t.innerHTML=""},e.createTextNode=function(t,e){return(e?e.ownerDocument:document).createTextNode(t)},e.createFragment=function(t){return(t?t.ownerDocument:document).createDocumentFragment()},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var i=n.indexOf(e);if(-1==i)break;n.splice(i,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),i=!0;;){var r=n.indexOf(e);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(e),t.className=n.join(" "),i},e.setCssClass=function(t,n,i){i?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,i=0;if(n=(e=e||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===t)return!0},e.importCssString=function(t,n,i){var r=i;i&&i.getRootNode&&(r=i.getRootNode())&&r!=i||(r=document);var o=r.ownerDocument||r;if(n&&e.hasCssString(n,r))return null;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */");var a=e.createElement("style");a.appendChild(o.createTextNode(t)),n&&(a.id=n),r==o&&(r=e.getDocumentHead(o)),r.insertBefore(a,r.firstChild)},e.importCssStylsheet=function(t,n){e.buildDom(["link",{rel:"stylesheet",href:t}],e.getDocumentHead(n))},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=e.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=t.documentElement;o.appendChild(i);var a=n.offsetWidth;r.overflow="scroll";var s=n.offsetWidth;return a==s&&(s=i.clientWidth),o.removeChild(i),a-s},"undefined"==typeof document&&(e.importCssString=function(){}),e.computedStyle=function(t,e){return window.getComputedStyle(t,"")||{}},e.setStyle=function(t,e,n){t[e]!==n&&(t[e]=n)},e.HAS_CSS_ANIMATION=!1,e.HAS_CSS_TRANSFORMS=!1,e.HI_DPI=!i.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var r=document.createElement("div");e.HI_DPI&&void 0!==r.style.transform&&(e.HAS_CSS_TRANSFORMS=!0),i.isEdge||void 0===r.style.animationName||(e.HAS_CSS_ANIMATION=!0),r=null}e.translate=e.HAS_CSS_TRANSFORMS?function(t,e,n){t.style.transform="translate("+Math.round(e)+"px, "+Math.round(n)+"px)"}:function(t,e,n){t.style.top=Math.round(n)+"px",t.style.left=Math.round(e)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("./oop"),r=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter((function(t){return e&n.KEY_MODS[t]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(e,r),e.keyCodeToString=function(t){var e=r[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./keys"),r=t("./useragent"),o=null,a=0;e.addListener=function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1);if(t.attachEvent){var i=function(){n.call(t,window.event)};n._wrapper=i,t.attachEvent("on"+e,i)}},e.removeListener=function(t,e,n){if(t.removeEventListener)return t.removeEventListener(e,n,!1);t.detachEvent&&t.detachEvent("on"+e,n._wrapper||n)},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||r.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},e.capture=function(t,n,i){function r(t){n&&n(t),i&&i(t),e.removeListener(document,"mousemove",n,!0),e.removeListener(document,"mouseup",r,!0),e.removeListener(document,"dragstart",r,!0)}return e.addListener(document,"mousemove",n,!0),e.addListener(document,"mouseup",r,!0),e.addListener(document,"dragstart",r,!0),r},e.addMouseWheelListener=function(t,n){"onmousewheel"in t?e.addListener(t,"mousewheel",(function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),n(t)})):"onwheel"in t?e.addListener(t,"wheel",(function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}n(t)})):e.addListener(t,"DOMMouseScroll",(function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),n(t)}))},e.addMultiMouseDownListener=function(t,n,i,o){var a,s,c,l=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};function h(t){if(0!==e.getButton(t)?l=0:t.detail>1?++l>4&&(l=1):l=1,r.isIE){var h=Math.abs(t.clientX-a)>5||Math.abs(t.clientY-s)>5;c&&!h||(l=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[l-1]||600),1==l&&(a=t.clientX,s=t.clientY)}if(t._clicks=l,i[o]("mousedown",t),l>4)l=0;else if(l>1)return i[o](u[l],t)}function d(t){l=2,c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[l-1]||600),i[o]("mousedown",t),i[o](u[l],t)}Array.isArray(t)||(t=[t]),t.forEach((function(t){e.addListener(t,"mousedown",h),r.isOldIE&&e.addListener(t,"dblclick",d)}))};var s=r.isMac&&r.isOpera&&!("KeyboardEvent"in window)?function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)}:function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};function c(t,e,n){var c=s(e);if(!r.isMac&&o){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(c|=8),o.altGr){if(3==(3&c))return;o.altGr=0}if(18===n||17===n){var l="location"in e?e.location:e.keyLocation;17===n&&1===l?1==o[n]&&(a=e.timeStamp):18===n&&3===c&&2===l&&e.timeStamp-a<50&&(o.altGr=!0)}}if(n in i.MODIFIER_KEYS&&(n=-1),c||13!==n||3!==(l="location"in e?e.location:e.keyLocation)||(t(e,c,-n),!e.defaultPrevented)){if(r.isChromeOS&&8&c){if(t(e,c,n),e.defaultPrevented)return;c&=-9}return!!(c||n in i.FUNCTION_KEYS||n in i.PRINTABLE_KEYS)&&t(e,c,n)}}function l(){o=Object.create(null)}if(e.getModifierString=function(t){return i.KEY_MODS[s(t)]},e.addCommandKeyListener=function(t,n){var i=e.addListener;if(r.isOldGecko||r.isOpera&&!("KeyboardEvent"in window)){var a=null;i(t,"keydown",(function(t){a=t.keyCode})),i(t,"keypress",(function(t){return c(n,t,a)}))}else{var s=null;i(t,"keydown",(function(t){o[t.keyCode]=(o[t.keyCode]||0)+1;var e=c(n,t,t.keyCode);return s=t.defaultPrevented,e})),i(t,"keypress",(function(t){s&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),s=null)})),i(t,"keyup",(function(t){o[t.keyCode]=null})),o||(l(),i(window,"focus",l))}},"object"==typeof window&&window.postMessage&&!r.isOldIE){var u=1;e.nextTick=function(t,n){n=n||window;var i="zero-timeout-message-"+u++;e.addListener(n,"message",(function r(o){o.data==i&&(e.stopPropagation(o),e.removeListener(n,"message",r),t())})),n.postMessage(i,"*")}}e.$idleBlocked=!1,e.onIdle=function(t,n){return setTimeout((function n(){e.$idleBlocked?setTimeout(n,100):t()}),n)},e.$idleBlockId=null,e.blockIdle=function(t){e.$idleBlockId&&clearTimeout(e.$idleBlockId),e.$idleBlocked=!0,e.$idleBlockId=setTimeout((function(){e.$idleBlocked=!1}),t||100)},e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame=e.nextFrame?e.nextFrame.bind(window):function(t){setTimeout(t,17)}})),ace.define("ace/range",["require","exports","module"],(function(t,e,n){"use strict";var i=function(t,e,n,i){this.start={row:t,column:e},this.end={row:n,column:i}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,i=t.start;return 1==(e=this.compare(n.row,n.column))?1==(e=this.compare(i.row,i.column))?2:0==e?1:0:-1==e?-2:-1==(e=this.compare(i.row,i.column))?-1:1==e?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)&&!this.isStart(t,e)},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else this.end.row<t&&(n={row:t,column:0});if(this.start.row>e)var r={row:e+1,column:0};else this.start.row<t&&(r={row:t,column:0});return i.fromPoints(r||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(-1==n)var r={row:t,column:e};else var o={row:t,column:e};return i.fromPoints(r||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return new i(this.start.row,0,0==this.end.column?Math.max(this.start.row,this.end.row-1):this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new i(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(i.prototype),i.fromPoints=function(t,e){return new i(t.row,t.column,e.row,e.column)},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var i=/^\s\s*/,r=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(i,"")},e.stringTrimRight=function(t){return t.replace(r,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=t[n]&&"object"==typeof t[n]?this.copyObject(t[n]):t[n];return e},e.deepCopy=function t(e){if("object"!=typeof e||!e)return e;var n;if(Array.isArray(e)){n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var i in n={},e)n[i]=t(e[i]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return(""+t).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,(function(t){n.push({offset:arguments[arguments.length-2],length:t.length})})),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},i=function t(i){return t.cancel(),e=setTimeout(n,i||0),t};return i.schedule=i,i.call=function(){return this.cancel(),t(),i},i.cancel=function(){return clearTimeout(e),e=null,i},i.isPending=function(){return e},i},e.delayedCall=function(t,e){var n=null,i=function(){n=null,t()},r=function(t){null==n&&(n=setTimeout(i,t||e))};return r.delay=function(t){n&&clearTimeout(n),n=setTimeout(i,t||e)},r.schedule=r,r.call=function(){this.cancel(),t()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}})),ace.define("ace/clipboard",["require","exports","module"],(function(t,e,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("../lib/dom"),a=t("../lib/lang"),s=t("../clipboard"),c=r.isChrome<18,l=r.isIE,u=r.isChrome>63,h=400,d=t("../lib/keys"),p=d.KEY_MODS,f=r.isIOS,g=f?/\s/:/\n/;e.TextInput=function(t,e){var n=o.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",t.insertBefore(n,t.firstChild);var m=!1,v=!1,y=!1,b=!1,_="";r.isMobile||(n.style.fontSize="1px");var C=!1,x=!1,w="",I=0,A=0,P=0;try{var O=document.activeElement===n}catch(H){}i.addListener(n,"blur",(function(t){x||(e.onBlur(t),O=!1)})),i.addListener(n,"focus",(function(t){if(!x){if(O=!0,r.isEdge)try{if(!document.hasFocus())return}catch(t){}e.onFocus(t),r.isEdge?setTimeout(M):M()}})),this.$focusScroll=!1,this.focus=function(){if(_||u||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var t=n.style.top;n.style.position="fixed",n.style.top="0px";try{var e=0!=n.getBoundingClientRect().top}catch(H){return}var i=[];if(e)for(var r=n.parentElement;r&&1==r.nodeType;)i.push(r),r.setAttribute("ace_nocontext",!0),r=!r.parentElement&&r.getRootNode?r.getRootNode().host:r.parentElement;n.focus({preventScroll:!0}),e&&i.forEach((function(t){t.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=t)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return O},e.on("beforeEndOperation",(function(){e.curOp&&"insertstring"==e.curOp.command.name||(y&&(w=n.value="",F()),M())}));var M=f?function(t){if(O&&(!m||t)&&!b){t||(t="");var i="\n ab"+t+"cde fg\n";i!=n.value&&(n.value=w=i);var r=4+(t.length||(e.selection.isEmpty()?0:1));4==I&&A==r||n.setSelectionRange(4,r),I=4,A=r}}:function(){if(!y&&!b&&(O||k)){y=!0;var t=e.selection,i=t.getRange(),r=t.cursor.row,o=i.start.column,a=i.end.column,s=e.session.getLine(r);if(i.start.row!=r){var c=e.session.getLine(r-1);o=i.start.row<r-1?0:o,a+=c.length+1,s=c+"\n"+s}else if(i.end.row!=r){var l=e.session.getLine(r+1);a=i.end.row>r+1?l.length:a,a+=s.length+1,s=s+"\n"+l}s.length>h&&(o<h&&a<h?s=s.slice(0,h):(s="\n",o=0,a=1));var u=s+"\n\n";if(u!=w&&(n.value=w=u,I=A=u.length),k&&(I=n.selectionStart,A=n.selectionEnd),A!=a||I!=o||n.selectionEnd!=A)try{n.setSelectionRange(o,a),I=o,A=a}catch(H){}y=!1}};O&&e.onFocus();var S=null;this.setInputHandler=function(t){S=t},this.getInputHandler=function(){return S};var k=!1,E=function(t,i){if(k&&(k=!1),v)return M(),t&&e.onPaste(t),v=!1,"";for(var r=n.selectionStart,o=n.selectionEnd,a=I,s=w.length-A,c=t,l=t.length-r,u=t.length-o,h=0;a>0&&w[h]==t[h];)h++,a--;for(c=c.slice(h),h=1;s>0&&w.length-h>I-1&&w[w.length-h]==t[t.length-h];)h++,s--;l-=h-1,u-=h-1;var d=c.length-h+1;return d<0&&(a=-d,d=0),c=c.slice(0,d),i||c||l||a||s||u?(b=!0,c&&!a&&!s&&!l&&!u||C?e.onTextInput(c):e.onTextInput(c,{extendLeft:a,extendRight:s,restoreStart:l,restoreEnd:u}),b=!1,w=t,I=r,A=o,P=u,c):""},L=function(t){if(y)return D();if(t&&t.inputType){if("historyUndo"==t.inputType)return e.execCommand("undo");if("historyRedo"==t.inputType)return e.execCommand("redo")}var i=n.value,r=E(i,!0);(i.length>500||g.test(r))&&M()},T=function t(e,n,i){var r=e.clipboardData||window.clipboardData;if(r&&!c){var o=l||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(e){if(!i)return t(e,n,!0)}}},R=function(t,r){var o=e.getCopyText();if(!o)return i.preventDefault(t);T(t,o)?(f&&(M(o),m=o,setTimeout((function(){m=!1}),10)),r?e.onCut():e.onCopy(),i.preventDefault(t)):(m=!0,n.value=o,n.select(),setTimeout((function(){m=!1,M(),r?e.onCut():e.onCopy()})))},N=function(t){R(t,!0)},B=function(t){R(t,!1)},j=function(t){var o=T(t);s.pasteCancelled()||("string"==typeof o?(o&&e.onPaste(o,t),r.isIE&&setTimeout(M),i.preventDefault(t)):(n.value="",v=!0))};i.addCommandKeyListener(n,e.onCommandKey.bind(e)),i.addListener(n,"select",(function(t){y||(m?m=!1:function(t){return 0===t.selectionStart&&t.selectionEnd>=w.length&&t.value===w&&w&&t.selectionEnd!==A}(n)&&(e.selectAll(),M()))})),i.addListener(n,"input",L),i.addListener(n,"cut",N),i.addListener(n,"copy",B),i.addListener(n,"paste",j),"oncut"in n&&"oncopy"in n&&"onpaste"in n||i.addListener(t,"keydown",(function(t){if((!r.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:B(t);break;case 86:j(t);break;case 88:N(t)}}));var D=function(){if(y&&e.onCompositionUpdate&&!e.$readOnly){if(C)return z();y.useTextareaForIME?e.onCompositionUpdate(n.value):(E(n.value),y.markerRange&&(y.context&&(y.markerRange.start.column=y.selectionStart=y.context.compositionStartOffset),y.markerRange.end.column=y.markerRange.start.column+A-y.selectionStart+P))}},F=function(t){e.onCompositionEnd&&!e.$readOnly&&(y=!1,e.onCompositionEnd(),e.off("mousedown",z),t&&L())};function z(){x=!0,n.blur(),n.focus(),x=!1}var V,G=a.delayedCall(D,50).schedule.bind(null,null);function Z(){clearTimeout(V),V=setTimeout((function(){_&&(n.style.cssText=_,_=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()}),0)}i.addListener(n,"compositionstart",(function(t){if(!y&&e.onCompositionStart&&!e.$readOnly&&(y={},!C)){setTimeout(D,0),e.on("mousedown",z);var i=e.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,y.markerRange=i,y.selectionStart=I,e.onCompositionStart(y),y.useTextareaForIME?(n.value="",w="",I=0,A=0):(n.msGetInputContext&&(y.context=n.msGetInputContext()),n.getInputContext&&(y.context=n.getInputContext()))}})),i.addListener(n,"compositionupdate",D),i.addListener(n,"keyup",(function(t){27==t.keyCode&&n.value.length<n.selectionStart&&(y||(w=n.value),I=A=-1,M()),G()})),i.addListener(n,"keydown",G),i.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setCommandMode=function(t){C=t,n.readOnly=!1},this.setReadOnly=function(t){C||(n.readOnly=t)},this.setCopyWithEmptySelection=function(t){},this.onContextMenu=function(t){k=!0,M(),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,a){_||(_=n.style.cssText),n.style.cssText=(a?"z-index:100000;":"")+(r.isIE?"opacity:0.1;":"")+"text-indent: -"+(I+A)*e.renderer.characterWidth*.5+"px;";var s=e.container.getBoundingClientRect(),c=o.computedStyle(e.container),l=s.top+(parseInt(c.borderTopWidth)||0),u=s.left+(parseInt(s.borderLeftWidth)||0),h=s.bottom-l-n.clientHeight-2,d=function(t){o.translate(n,t.clientX-u-2,Math.min(t.clientY-l-2,h))};d(t),"mousedown"==t.type&&(e.renderer.$isMousePressed=!0,clearTimeout(V),r.isWin&&i.capture(e.container,d,Z))},this.onContextMenuClose=Z;var W=function(t){e.textInput.onContextMenu(t),Z()};i.addListener(n,"mouseup",W),i.addListener(n,"mousedown",(function(t){t.preventDefault(),Z()})),i.addListener(e.renderer.scroller,"contextmenu",W),i.addListener(n,"contextmenu",W),f&&function(t,e,n){var i=null,r=!1;n.addEventListener("keydown",(function(t){i&&clearTimeout(i),r=!0}),!0),n.addEventListener("keyup",(function(t){i=setTimeout((function(){r=!1}),100)}),!0);var o=function(t){if(document.activeElement===n&&!(r||y||e.$mouseHandler.isMousePressed||m)){var i=n.selectionStart,o=n.selectionEnd,a=null,s=0;if(0==i?a=d.up:1==i?a=d.home:o>A&&"\n"==w[o]?a=d.end:i<I&&" "==w[i-1]?(a=d.left,s=p.option):i<I||i==I&&A!=I&&i==o?a=d.left:o>A&&w.slice(0,o).split("\n").length>2?a=d.down:o>A&&" "==w[o-1]?(a=d.right,s=p.option):(o>A||o==A&&A!=I&&i==o)&&(a=d.right),i!==o&&(s|=p.shift),a){if(!e.onCommandKey({},s,a)&&e.commands){a=d.keyCodeToString(a);var c=e.commands.findKeyCommand(s,a);c&&e.execCommand(c)}I=i,A=o,M("")}}};document.addEventListener("selectionchange",o),e.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,e,n)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/useragent");function r(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(e){t[e]=this[e]}),this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else n=t.start.row!=t.end.row-1||t.start.column||t.end.column?2*e.row-t.start.row-t.end.row:e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var r=this.editor,o=t.getButton();return 0!==o?((r.getSelectionRange().isEmpty()||1==o)&&r.selection.moveToPosition(n),void(2==o&&(r.textInput.onContextMenu(t.domEvent),i.isMozilla||t.preventDefault()))):(this.mousedownEvent.time=Date.now(),!e||r.isFocused()||(r.focus(),!this.$focusTimeout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t)))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)t=this.$clickSelection.end;else if(1==i)t=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,t=r.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[t](i.row,i.column);if(this.$clickSelection){var a=this.$clickSelection.comparePoint(r.start),s=this.$clickSelection.comparePoint(r.end);if(-1==a&&s<=0)e=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==s&&a>=0)e=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==a&&1==s)i=r.end,e=r.start;else{var c=o(this.$clickSelection,i);i=c.cursor,e=c.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t,e,n=(t=this.mousedownEvent.y,e=this.y,Math.sqrt(Math.pow(this.x-this.mousedownEvent.x,2)+Math.pow(e-t,2))),i=Date.now();(n>0||i-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=t.domEvent.timeStamp,r=i-n.t,o=r?t.wheelX/r:n.vx,a=r?t.wheelY/r:n.vy;r<550&&(o=(o+n.vx)/2,a=(a+n.vy)/2);var s=Math.abs(o/a),c=!1;return s>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(c=!0),s<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(c=!0),c?n.allowed=i:i-n.allowed<550&&(Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(a)<=1.5*Math.abs(n.vy)?(c=!0,n.allowed=i):n.allowed=0),n.t=i,n.vx=o,n.vy=a,c?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}}).call(r.prototype),e.DefaultHandlers=r})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(t,e,n){"use strict";t("./lib/oop");var i=t("./lib/dom");function r(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){this.getElement().textContent=t},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){i.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),e.Tooltip=r})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/event"),a=t("../tooltip").Tooltip;function s(t){a.call(this,t)}r.inherits(s,a),(function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();(t+=15)+r>n&&(t-=t+r-n),(e+=15)+o>i&&(e-=20+o),a.prototype.setPosition.call(this,t,e)}}).call(s.prototype),e.GutterHandler=function(t){var e,n,r,a=t.editor,c=a.renderer.$gutterLayer,l=new s(a.container);function u(){e&&(e=clearTimeout(e)),r&&(l.hide(),r=null,a._signal("hideGutterTooltip",l),a.removeEventListener("mousewheel",u))}function h(t){l.setPosition(t.x,t.y)}t.editor.setDefaultHandler("guttermousedown",(function(e){if(a.isFocused()&&0==e.getButton()&&"foldWidgets"!=c.getRegion(e)){var n=e.getDocumentPosition().row,i=a.session.selection;if(e.getShiftKey())i.selectTo(n,0);else{if(2==e.domEvent.detail)return a.selectAll(),e.preventDefault();t.$clickSelection=a.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}})),t.editor.setDefaultHandler("guttermousemove",(function(o){if(i.hasCssClass(o.domEvent.target||o.domEvent.srcElement,"ace_fold-widget"))return u();r&&t.$tooltipFollowsMouse&&h(o),n=o,e||(e=setTimeout((function(){e=null,n&&!t.isMousePressed?function(){var e=n.getDocumentPosition().row,i=c.$annotations[e];if(!i)return u();if(e==a.session.getLength()){var o=a.renderer.pixelToScreenCoordinates(0,n.y).row,s=n.$pos;if(o>a.session.documentToScreenRow(s.row,s.column))return u()}if(r!=i)if(r=i.text.join("<br/>"),l.setHtml(r),l.show(),a._signal("showGutterTooltip",l),a.on("mousewheel",u),t.$tooltipFollowsMouse)h(n);else{var d=n.domEvent.target.getBoundingClientRect(),p=l.getElement().style;p.left=d.right+"px",p.top=d.bottom+"px"}}():u()}),50))})),o.addListener(a.renderer.$gutter,"mouseout",(function(t){n=null,r&&!e&&(e=setTimeout((function(){e=null,u()}),50))})),a.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var e=this.getDocumentPosition();this.$inSelection=t.contains(e.row,e.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/event"),o=t("../lib/useragent");function a(t){var e=t.editor,n=i.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",o.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(e){t[e]=this[e]}),this),e.addEventListener("mousedown",this.onMouseDown.bind(t));var a,c,l,u,h,d,p,f,g,m,v,y=e.container,b=0;function _(){var t=d;(function(t,n){var i=Date.now();m&&n&&t.row==n.row&&n&&t.column==n.column?s(v.x,v.y,c,l)>5?m=null:i-m>=200&&(e.renderer.scrollCursorIntoView(),m=null):(e.moveCursorToPosition(t),m=i,v={x:c,y:l})})(d=e.renderer.screenToTextCoordinates(c,l),t),function(t,n){var i=Date.now(),r=e.renderer.layerConfig.lineHeight,o=e.renderer.layerConfig.characterWidth,a=e.renderer.scroller.getBoundingClientRect(),s={x:{left:c-a.left,right:a.right-c},y:{top:l-a.top,bottom:a.bottom-l}},u=Math.min(s.x.left,s.x.right),h=Math.min(s.y.top,s.y.bottom),d={row:t.row,column:t.column};u/o<=2&&(d.column+=s.x.left<s.x.right?-3:2),h/r<=1&&(d.row+=s.y.top<s.y.bottom?-1:1),t.row!=d.row||t.column!=d.column&&n&&t.row==n.row?g?i-g>=200&&e.renderer.scrollCursorIntoView(d):g=i:g=null}(d,t)}function C(){h=e.selection.toOrientedRange(),a=e.session.addMarker(h,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),_(),u=setInterval(_,20),b=0,r.addListener(document,"mousemove",I)}function x(){clearInterval(u),e.session.removeMarker(a),a=null,e.selection.fromOrientedRange(h),e.isFocused()&&!f&&e.$resetCursorStyle(),h=null,d=null,b=0,g=null,m=null,r.removeListener(document,"mousemove",I)}this.onDragStart=function(t){if(this.cancelDrag||!y.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(t)}),0),t.preventDefault()}h=e.getSelectionRange();var r=t.dataTransfer;r.effectAllowed=e.getReadOnly()?"copy":"copyMove",o.isOpera&&(e.container.appendChild(n),n.scrollTop=0),r.setDragImage&&r.setDragImage(n,0,0),o.isOpera&&e.container.removeChild(n),r.clearData(),r.setData("Text",e.session.getTextRange()),f=!0,this.setState("drag")},this.onDragEnd=function(t){y.draggable=!1,f=!1,this.setState(null),e.getReadOnly()||(p||"move"!=t.dataTransfer.dropEffect||e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return c=t.clientX,l=t.clientY,a||C(),b++,t.dataTransfer.dropEffect=p=P(t),r.preventDefault(t)},this.onDragOver=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return c=t.clientX,l=t.clientY,a||(C(),b++),null!==w&&(w=null),t.dataTransfer.dropEffect=p=P(t),r.preventDefault(t)},this.onDragLeave=function(t){if(--b<=0&&a)return x(),p=null,r.preventDefault(t)},this.onDrop=function(t){if(d){var n=t.dataTransfer;if(f)switch(p){case"move":h=h.contains(d.row,d.column)?{start:d,end:d}:e.moveText(h,d);break;case"copy":h=e.moveText(h,d,!0)}else{var i=n.getData("Text");h={start:d,end:e.session.insert(d,i)},e.focus(),p=null}return x(),r.preventDefault(t)}},r.addListener(y,"dragstart",this.onDragStart.bind(t)),r.addListener(y,"dragend",this.onDragEnd.bind(t)),r.addListener(y,"dragenter",this.onDragEnter.bind(t)),r.addListener(y,"dragover",this.onDragOver.bind(t)),r.addListener(y,"dragleave",this.onDragLeave.bind(t)),r.addListener(y,"drop",this.onDrop.bind(t));var w=null;function I(){null==w&&(w=setTimeout((function(){null!=w&&a&&x()}),20))}function A(t){var e=t.types;return!e||Array.prototype.some.call(e,(function(t){return"text/plain"==t||"Text"==t}))}function P(t){var e=["copy","copymove","all","uninitialized"],n=o.isMac?t.altKey:t.ctrlKey,i="uninitialized";try{i=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var r="none";return n&&e.indexOf(i)>=0?r="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?r="move":e.indexOf(i)>=0&&(r="copy"),r}}function s(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging"),t.renderer.setCursorStyle(o.isWin?"default":"move"),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;o.isIE&&"dragReady"==this.state&&s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&e.dragDrop(),"dragWait"===this.state&&s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),i=t.getButton();if(1===(t.domEvent.detail||1)&&0===i&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var r=t.domEvent.target||t.domEvent.srcElement;"unselectable"in r&&(r.unselectable="on"),e.getDragDelay()?(o.isWebKit&&(this.cancelDrag=!0,e.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(a.prototype),e.DragdropHandler=a})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./mouse_event").MouseEvent,r=t("../lib/dom");e.addTouchListeners=function(t,e){var n,o,a,s,c,l,u,h,d,p="scroll",f=0,g=0,m=0,v=0;function y(){var t,n,i;d||(t=window.navigator&&window.navigator.clipboard,n=!1,i=function(i){var o,a,s=i.target.getAttribute("action");if("more"==s||!n)return n=!n,o=e.getCopyText(),a=e.session.getUndoManager().hasUndo(),void d.replaceChild(r.buildDom(n?["span",!o&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],o&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],o&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],t&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],a&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),d.firstChild);"paste"==s?t.readText().then((function(t){e.execCommand(s,t)})):s&&("cut"!=s&&"copy"!=s||(t?t.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(s)),d.firstChild.style.display="none",n=!1,"openCommandPallete"!=s&&e.focus()},d=r.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(t){p="menu",t.stopPropagation(),t.preventDefault(),e.textInput.focus()},ontouchend:function(t){t.stopPropagation(),t.preventDefault(),i(t)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container));var o=e.selection.cursor,a=e.renderer.textToScreenCoordinates(o.row,o.column),s=e.container.getBoundingClientRect();d.style.top=a.pageY-s.top-3+"px",d.style.right="10px",d.style.display="",d.firstChild.style.display="none",e.on("input",b)}function b(t){d&&(d.style.display="none"),e.off("input",b)}function _(){c=null,clearTimeout(c);var t=e.selection.getRange(),n=t.contains(u.row,u.column);!t.isEmpty()&&n||(e.selection.moveToPosition(u),e.selection.selectWord()),p="wait",y()}t.addEventListener("contextmenu",(function(t){h&&e.textInput.getElement().focus()})),t.addEventListener("touchstart",(function(t){var r=t.touches;if(c||r.length>1)return clearTimeout(c),c=null,a=-1,void(p="zoom");h=e.$mouseHandler.isMousePressed=!0;var l=e.renderer.layerConfig.lineHeight,d=e.renderer.layerConfig.lineHeight,y=t.timeStamp;s=y;var b=r[0],C=b.clientX,x=b.clientY;Math.abs(n-C)+Math.abs(o-x)>l&&(a=-1),n=t.clientX=C,o=t.clientY=x,m=v=0;var w=new i(t,e);if(u=w.getDocumentPosition(),y-a<500&&1==r.length&&!f)g++,t.preventDefault(),t.button=0,function(){c=null,clearTimeout(c),e.selection.moveToPosition(u);var t=g>=2?e.selection.getLineRange(u.row):e.session.getBracketRange(u);t&&!t.isEmpty()?e.selection.setRange(t):e.selection.selectWord(),p="wait"}();else{g=0;var I=e.selection.cursor,A=e.selection.isEmpty()?I:e.selection.anchor,P=e.renderer.$cursorLayer.getPixelPosition(I,!0),O=e.renderer.$cursorLayer.getPixelPosition(A,!0),M=e.renderer.scroller.getBoundingClientRect(),S=function(t,e){return(t/=d)*t+(e=e/l-.75)*e};if(t.clientX<M.left)return void(p="zoom");var k=S(t.clientX-M.left-P.left,t.clientY-M.top-P.top),E=S(t.clientX-M.left-O.left,t.clientY-M.top-O.top);k<3.5&&E<3.5&&(p=k>E?"cursor":"anchor"),p=E<3.5?"anchor":k<3.5?"cursor":"scroll",c=setTimeout(_,450)}a=y})),t.addEventListener("touchend",(function(t){h=e.$mouseHandler.isMousePressed=!1,l&&clearInterval(l),"zoom"==p?(p="",f=0):c?(e.selection.moveToPosition(u),f=0,y()):"scroll"==p?(f+=60,l=setInterval((function(){f--<=0&&(clearInterval(l),l=null),Math.abs(m)<.01&&(m=0),Math.abs(v)<.01&&(v=0),f<20&&(m*=.9),f<20&&(v*=.9);var t=e.session.getScrollTop();e.renderer.scrollBy(10*m,10*v),t==e.session.getScrollTop()&&(f=0)}),10),t.preventDefault(),b()):y(),clearTimeout(c),c=null})),t.addEventListener("touchmove",(function(t){c&&(clearTimeout(c),c=null);var r=t.touches;if(!(r.length>1||"zoom"==p)){var a=r[0],l=n-a.clientX,u=o-a.clientY;if("wait"==p){if(!(l*l+u*u>4))return t.preventDefault();p="cursor"}n=a.clientX,o=a.clientY,t.clientX=a.clientX,t.clientY=a.clientY;var h=t.timeStamp,d=h-s;if(s=h,"scroll"==p){var f=new i(t,e);f.speed=1,f.wheelX=l,f.wheelY=u,10*Math.abs(l)<Math.abs(u)&&(l=0),10*Math.abs(u)<Math.abs(l)&&(u=0),0!=d&&(m=l/d,v=u/d),e._emit("mousewheel",f),f.propagationStopped||(m=v=0)}else{var g=new i(t,e).getDocumentPosition();"cursor"==p?e.selection.moveCursorToPosition(g):"anchor"==p&&e.selection.setSelectionAnchor(g.row,g.column),e.renderer.scrollCursorIntoView(g),t.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=i.getDocumentHead(),r=document.createElement("script");r.src=t,n.appendChild(r),r.onload=r.onreadystatechange=function(t,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(t,e,n){"use strict";var i={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],i=this._defaultHandlers[t];if(n.length||i){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=r),e.preventDefault||(e.preventDefault=o),n=n.slice();for(var a=0;a<n.length&&(n[a](e,this),!e.propagationStopped);a++);return i&&!e.defaultPrevented?i(e,this):void 0}},i._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](e,this)}},i.once=function(t,e){var n=this;if(this.addEventListener(t,(function i(){n.removeEventListener(t,i),e.apply(null,arguments)})),!e)return new Promise((function(t){e=t}))},i.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var i=n[t],r=n._disabled_[t];r||(n._disabled_[t]=r=[]),r.push(i);var o=r.indexOf(e);-1!=o&&r.splice(o,1)}n[t]=e},i.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var i=n._disabled_[t];if(n[t]==e)i&&this.setDefaultHandler(t,i.pop());else if(i){var r=i.indexOf(e);-1!=r&&i.splice(r,1)}}},i.on=i.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];return i||(i=this._eventRegistry[t]=[]),-1==i.indexOf(e)&&i[n?"unshift":"push"](e),e},i.off=i.removeListener=i.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=i})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){var i=t("./oop"),r=t("./event_emitter").EventEmitter,o={setOptions:function(t){Object.keys(t).forEach((function(e){this.setOption(e,t[e])}),this)},getOptions:function(t){var e={};if(t)Array.isArray(t)||(e=t,t=Object.keys(e));else{var n=this.$options;t=Object.keys(n).filter((function(t){return!n[t].hidden}))}return t.forEach((function(t){e[t]=this.getOption(t)}),this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return a('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:a('misspelled option "'+t+'"')}};function a(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function s(t,e){var n=new Error(t);n.data=e,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var c=function(){this.$defaultOptions={}};(function(){i.implement(this,r),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach((function(e){var i=n[e];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=e),t.$options[i.name]=i,"initialValue"in i&&(t["$"+i.name]=i.initialValue)})),i.implement(t,o),this},this.resetOptions=function(t){Object.keys(t.$options).forEach((function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)}))},this.setDefaultValue=function(t,e,n){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][e])break;if(!this.$defaultOptions[t][e])return!1}var i=this.$defaultOptions[t]||(this.$defaultOptions[t]={});i[e]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,e,n):i[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach((function(n){this.setDefaultValue(t,n,e[n])}),this)},this.warn=a,this.reportError=s}).call(c.prototype),e.AppConfig=c})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(t,e,i){var r=t("./lib/lang"),o=(t("./lib/oop"),t("./lib/net")),a=t("./lib/app_config").AppConfig;i.exports=e=new a;var s=function(){return this||"undefined"!=typeof window&&window}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};e.get=function(t){if(!c.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return c[t]},e.set=function(t,e){if(c.hasOwnProperty(t))c[t]=e;else if(0==this.setDefaultValue("",t,e))throw new Error("Unknown config key: "+t)},e.all=function(){return r.copyObject(c)},e.$modes={},e.moduleUrl=function(t,e){if(c.$moduleUrls[t])return c.$moduleUrls[t];var n=t.split("/"),i="snippets"==(e=e||n[n.length-2]||"")?"/":"-",r=n[n.length-1];if("worker"==e&&"-"==i){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");r=r.replace(o,"")}(!r||r==e)&&n.length>1&&(r=n[n.length-2]);var a=c[e+"Path"];return null==a?a=c.basePath:"/"==i&&(e=i=""),a&&"/"!=a.slice(-1)&&(a+="/"),a+e+i+r+this.get("suffix")},e.setModuleUrl=function(t,e){return c.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,i){var r,a;Array.isArray(n)&&(a=n[0],n=n[1]);try{r=t(n)}catch(c){}if(r&&!e.$loading[n])return i&&i(r);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(i),!(e.$loading[n].length>1)){var s=function(){t([n],(function(t){e._emit("load.module",{name:n,module:t});var i=e.$loading[n];e.$loading[n]=null,i.forEach((function(e){e&&e(t)}))}))};if(!e.get("packaged"))return s();o.loadScript(e.moduleUrl(n,a),s),l()}};var l=function(){c.basePath||c.workerPath||c.modePath||c.themePath||Object.keys(c.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};function u(r){if(s&&s.document){c.packaged=r||t.packaged||i.packaged||s.define&&n(23).packaged;for(var o,a={},l="",u=document.currentScript||document._currentScript,h=(u&&u.ownerDocument||document).getElementsByTagName("script"),d=0;d<h.length;d++){var p=h[d],f=p.src||p.getAttribute("src");if(f){for(var g=p.attributes,m=0,v=g.length;m<v;m++){var y=g[m];0===y.name.indexOf("data-ace-")&&(a[(o=y.name.replace(/^data-ace-/,""),o.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})))]=y.value)}var b=f.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(l=b[1])}}for(var _ in l&&(a.base=a.base||l,a.packaged=!0),a.basePath=a.base,a.workerPath=a.workerPath||a.base,a.modePath=a.modePath||a.base,a.themePath=a.themePath||a.base,delete a.base,a)void 0!==a[_]&&e.set(_,a[_])}}u(!0),e.init=u,e.version="1.4.7"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,a=t("./default_gutter_handler").GutterHandler,s=t("./mouse_event").MouseEvent,c=t("./dragdrop_handler").DragdropHandler,l=t("./touch_handler").addTouchListeners,u=t("../config"),h=function(t){var e=this;this.editor=t,new o(this),new a(this),new c(this);var n=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},s=t.renderer.getMouseEventTarget();i.addListener(s,"click",this.onMouseEvent.bind(this,"click")),i.addListener(s,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([s,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),l(t.container,t);var u=t.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(s,"mousedown",n),i.addListener(u,"mousedown",n),r.isIE&&t.renderer.scrollBarV&&(i.addListener(t.renderer.scrollBarV.element,"mousedown",n),i.addListener(t.renderer.scrollBarH.element,"mousedown",n)),t.on("mousemove",(function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var i=t.renderer.screenToTextCoordinates(n.x,n.y),r=t.session.selection.getRange(),o=t.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new s(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new s(e,this.editor))},this.onMouseWheel=function(t,e){var n=new s(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var a=this,c=function(t){if(t){if(r.isWebKit&&!t.which&&a.releaseMouse)return a.releaseMouse();a.x=t.clientX,a.y=t.clientY,e&&e(t),a.mouseEvent=new s(t,a.editor),a.$mouseMoved=!0}},l=function(t){n.off("beforeEndOperation",h),clearInterval(d),u(),a[a.state+"End"]&&a[a.state+"End"](t),a.state="",a.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),a.$onCaptureMouseMove=a.releaseMouse=null,t&&a.onMouseEvent("mouseup",t),n.endOperation()},u=function(){a[a.state]&&a[a.state](),a.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout((function(){l(t)}));var h=function(t){a.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(a[a.state+"End"]&&a[a.state+"End"](),a.state="",a.releaseMouse())};n.on("beforeEndOperation",h),n.startOperation({command:{name:"mouse"}}),a.$onCaptureMouseMove=c,a.releaseMouse=i.capture(this.editor.container,c,l);var d=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=(function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&i.stopEvent(e.domEvent))}).bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(h.prototype),u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=h})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom");e.FoldHandler=function(t){t.on("click",(function(e){var n=e.getDocumentPosition(),r=t.session,o=r.getFoldAt(n.row,n.column,1);o&&(e.getAccelKey()?r.removeFold(o):r.expandFold(o),e.stop());var a=e.domEvent&&e.domEvent.target;a&&i.hasCssClass(a,"ace_inline_button")&&i.hasCssClass(a,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),t.renderer.scrollCursorIntoView())})),t.on("gutterclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session;i.foldWidgets&&i.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}})),t.on("gutterdblclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session,r=i.getParentFoldRangeData(n,!0),o=r.range||r.firstRange;if(o){var a=i.getFoldAt(n=o.start.row,i.getLine(n).length,1);a?i.removeFold(a):(i.addFold("...",o),t.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),null==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(e,t)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,i){for(var o,a=!1,s=this.$editor.commands,c=this.$handlers.length;c--&&!((o=this.$handlers[c].handleKeyboard(this.$data,t,e,n,i))&&o.command&&((a="null"==o.command||s.exec(o.command,this.$editor,o.args,i))&&i&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),a)););return a||-1!=t||(o={command:"insertstring"},a=s.exec("insertstring",this.$editor,e)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),a},this.onCommandKey=function(t,e,n){var r=i.keyCodeToString(n);return this.$callKeyboardHandlers(e,r,n,t)},this.onTextInput=function(t){return this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(t,e,n){"use strict";var i=0,r=0,o=!1,a=!1,s=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],l=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=11,h=18,d=[h,h,h,h,h,h,h,h,h,6,5,6,8,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,5,5,5,6,8,4,4,u,u,u,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,h,h,h,h,h,h,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,4,u,u,u,u,4,4,4,4,0,4,4,h,4,4,u,u,2,2,4,0,4,4,4,2,0,4,4,4,4,4],p=[8,8,8,8,8,8,8,8,8,8,8,h,h,h,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,u,u,u,u,u,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function f(t,e,n){if(!(r<t))if(1!=t||1!=i||a)for(var o,s,c,l,u=n.length,h=0;h<u;){if(e[h]>=t){for(o=h+1;o<u&&e[o]>=t;)o++;for(s=h,c=o-1;s<c;s++,c--)l=n[s],n[s]=n[c],n[c]=l;h=o}h++}else n.reverse()}function g(t,e,n,r){var c,l,d,p,f=e[r];switch(f){case 0:case 1:o=!1;case 4:case 3:return f;case 2:return o?3:2;case 7:return o=!0,1;case 8:return 4;case 9:return r<1||r+1>=e.length||2!=(c=n[r-1])&&3!=c||2!=(l=e[r+1])&&3!=l?4:(o&&(l=3),l==c?l:4);case 10:return 2==(c=r>0?n[r-1]:5)&&r+1<e.length&&2==e[r+1]?2:4;case u:if(r>0&&2==n[r-1])return 2;if(o)return 4;for(p=r+1,d=e.length;p<d&&e[p]==u;)p++;return p<d&&2==e[p]?2:4;case 12:for(d=e.length,p=r+1;p<d&&12==e[p];)p++;if(p<d){var g=t[r];if(c=e[p],(g>=1425&&g<=2303||64286==g)&&(1==c||7==c))return 1}return r<1||5==(c=e[r-1])?4:n[r-1];case 5:return o=!1,a=!0,i;case 6:return s=!0,4;case 13:case 14:case 16:case 17:case 15:o=!1;case h:return 4}}function m(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?e>191?0:d[e]:5==n?/[\u0591-\u05f4]/.test(t)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?12:/[\u0660-\u0669\u066b-\u066c]/.test(t)?3:1642==e?u:/[\u06f0-\u06f9]/.test(t)?2:7:32==n&&e<=8287?p[255&e]:254==n&&e>=65136?7:4}e.L=0,e.R=1,e.EN=2,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.RLE=7,e.DOT="\xb7",e.doBidiReorder=function(t,n,u){if(t.length<2)return{};var d=t.split(""),p=new Array(d.length),v=new Array(d.length),y=[];i=u?1:0,function(t,e,n,u){var h=i?l:c,d=null,p=null,f=null,v=0,y=null,b=-1,_=null,C=null,x=[];if(!u)for(_=0,u=[];_<n;_++)u[_]=m(t[_]);for(r=i,o=!1,a=!1,s=!1,C=0;C<n;C++){if(d=v,x[C]=p=g(t,u,x,C),y=240&(v=h[d][p]),e[C]=f=h[v&=15][5],y>0)if(16==y){for(_=b;_<C;_++)e[_]=1;b=-1}else b=-1;if(h[v][6])-1==b&&(b=C);else if(b>-1){for(_=b;_<C;_++)e[_]=f;b=-1}5==u[C]&&(e[C]=0),r|=f}if(s)for(_=0;_<n;_++)if(6==u[_]){e[_]=i;for(var w=_-1;w>=0&&8==u[w];w--)e[w]=i}}(d,y,d.length,n);for(var b=0;b<p.length;p[b]=b,b++);for(f(2,y,p),f(1,y,p),b=0;b<p.length-1;b++)3===n[b]?y[b]=e.AN:1===y[b]&&(n[b]>7&&n[b]<13||4===n[b]||n[b]===h)?y[b]=e.ON_R:b>0&&"\u0644"===d[b-1]&&/\u0622|\u0623|\u0625|\u0627/.test(d[b])&&(y[b-1]=y[b]=e.R_H,b++);for(d[d.length-1]===e.DOT&&(y[d.length-1]=e.B),"\u202b"===d[0]&&(y[0]=e.RLE),b=0;b<p.length;b++)v[b]=y[p[b]];return{logicalFromVisual:p,bidiLevels:v}},e.hasBidiCharacters=function(t,e){for(var n=!1,i=0;i<t.length;i++)e[i]=m(t.charAt(i)),n||1!=e[i]&&7!=e[i]&&3!=e[i]||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(t,e,n){"use strict";var i=t("./lib/bidiutil"),r=t("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(t.getValue())};(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&o.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var n=this.session.$getRowCacheIndex(e,this.currentRow);n>=0&&(t=this.session.$docRowCache[n])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,i=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===i;)i=n,t++;else t=this.currentRow;return t},this.updateRowLine=function(t,e){void 0===t&&(t=this.getDocumentRow());var n=t===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(t),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[t];o&&(void 0===e&&(e=this.getSplitIndex()),e>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=e<o.length?this.line.substring(o[e-1],o[e]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[e])),e==o.length&&(this.line+=this.showInvisibles?n:i.DOT)}else this.line+=this.showInvisibles?n:i.DOT;var a,s=this.session,c=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(t,e){return"\t"===t||s.isFullWidth(t.charCodeAt(0))?(a="\t"===t?s.getScreenTabSize(e+c):2,c+=a-1,r.stringRepeat(i.DOT,a)):t})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var t=[];this.bidiMap=i.hasBidiCharacters(this.line,t)||this.isRtlDir?i.doBidiReorder(this.line,t,this.isRtlDir):{}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.characterWidth!==t.$characterSize.width){this.fontMetrics=t;var e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=e,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setContentWidth=function(t){this.contentWidth=t},this.isRtlLine=function(t){return!!this.$isRtl||(null!=t?this.session.getLine(t).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(t,e){for(var n=t.getCursorPosition(),i=t.selection.getSelectionAnchor().row;i<=n.row;i++)e||t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE?e&&t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE&&t.session.doc.insert({column:0,row:i},t.session.$bidiHandler.RLE):t.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(t){t-=this.wrapIndent;var e=this.line.charAt(0)===this.RLE?1:0,n=t>e?this.session.getOverwrite()?t:t-1:e,r=i.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,a=0;!this.session.getOverwrite()&&t<=e&&o[r]%2!=0&&r++;for(var s=0;s<r;s++)a+=this.charWidths[o[s]];return!this.session.getOverwrite()&&t>e&&o[r]%2==0&&(a+=this.charWidths[o[r]]),this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(a+=this.rtlLineOffset),a},this.getSelections=function(t,e){var n,i=this.bidiMap,r=i.bidiLevels,o=[],a=0,s=Math.min(t,e)-this.wrapIndent,c=Math.max(t,e)-this.wrapIndent,l=!1,u=!1,h=0;this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,p=0;p<r.length;p++)n=r[p],(l=(d=i.logicalFromVisual[p])>=s&&d<c)&&!u?h=a:!l&&u&&o.push({left:h,width:a-h}),a+=this.charWidths[n],u=l;if(l&&p===r.length&&o.push({left:h,width:a-h}),this.isRtlDir)for(var f=0;f<o.length;f++)o[f].left+=this.rtlLineOffset;return o},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var e=0,n=(t=Math.max(t,0),0),i=0,r=this.bidiMap.bidiLevels,o=this.charWidths[r[i]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);t>n+o/2;){if(n+=o,i===r.length-1){o=0;break}o=this.charWidths[r[++i]]}return i>0&&r[i-1]%2!=0&&r[i]%2==0?(t<n&&i--,e=this.bidiMap.logicalFromVisual[i]):i>0&&r[i-1]%2==0&&r[i]%2!=0?e=1+(t>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===r.length-1&&0===o&&r[i-1]%2==0||!this.isRtlDir&&0===i&&r[i]%2!=0?e=1+this.bidiMap.logicalFromVisual[i]:(i>0&&r[i-1]%2!=0&&0!==o&&i--,e=this.bidiMap.logicalFromVisual[i]),0===e&&this.isRtlDir&&e++,e+this.wrapIndent}}).call(a.prototype),e.BidiHandler=a})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",(function(t){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),e.$isEmpty||e.$silent||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)})),this.anchor.on("change",(function(){e.$anchorChanged=!0,e.$isEmpty||e.$silent||e._emit("changeSelection")}))};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?a.fromPoints(e,e):this.isBackwards()?a.fromPoints(e,t):a.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var n=e?t.end:t.start,i=e?t.start:t.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(t,e,n,i){var r=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(n,i),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||r!=this.$isEmpty||o)&&this._emit("changeSelection")},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection((function(){this.moveCursorTo(t,e)}))},this.selectToPosition=function(t){this.$moveSelection((function(){this.moveCursorToPosition(t)}))},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if(void 0===e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,i="number"==typeof t?t:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,!0===e?new a(i,0,n,this.session.getLine(n).length):new a(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var i=t.column,r=t.column+e;return n<0&&(i=t.column-e,r=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(i,r).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e=this.lead,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(t,null,i.row,i.column).match(/^\s*/);r[0].length==e||this.session.$useEmacsStyleLineStart||(i.column+=r[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var i=n.search(/\s+$/);i>0&&(e.column=i)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(t,e,1);if(r)this.moveCursorTo(r.end.row,r.end.column);else{if(this.session.nonTokenRe.exec(i)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(e)),e>=n.length)return this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)}},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))this.moveCursorTo(t.start.row,t.start.column);else{var i=this.session.getFoldStringAt(e,n,-1);null==i&&(i=this.doc.getLine(e).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)}},this.$shortWordEndIndex=function(t){var e,n=0,i=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&i.test(e);)n++;if(n<1)for(r.lastIndex=0;(e=t[n])&&!r.test(e);)if(r.lastIndex=0,n++,i.test(e)){if(n>2){n--;break}for(;(e=t[n])&&i.test(e);)n++;if(n>2)break}}return r.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e),r=this.session.getFoldAt(t,e,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(e==n.length){var o=this.doc.getLength();do{t++,i=this.doc.getLine(t)}while(t<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),e=0}var a=this.$shortWordEndIndex(i);this.moveCursorTo(t,e+a)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getLine(e).substring(0,n);if(0===n){do{e--,i=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),a=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-a)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var r=this.session.screenToDocumentPosition(i.row+t,i.column,n);0!==t&&0===e&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&(r.row>0||t>0)&&r.row++,this.moveCursorTo(r.row,r.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var i=this.session.getFoldAt(t,e,1);i&&(t=i.start.row,e=i.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(r.charAt(e))&&r.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var i=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return a.fromPoints(e,n)}catch(i){return a.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map((function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e}));else(t=this.getRange()).isBackwards=this.isBackwards();return t},this.fromJSON=function(t){if(null==t.start){if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=a.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(s.prototype),e.Selection=s})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(t,e,n){"use strict";var i=t("./config"),r=2e3,o=function(t){for(var e in this.states=t,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[e],i=[],r=0,o=this.matchMappings[e]={defaultToken:"text"},a="g",s=[],c=0;c<n.length;c++){var l=n[c];if(l.defaultToken&&(o.defaultToken=l.defaultToken),l.caseInsensitive&&(a="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var u=l.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==h?l.token=l.token[0]:h-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:h-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(l.onMatch=h>1?this.$applyToken:l.token),h>1&&(/\\\d/.test(l.regex)?u=l.regex.replace(/\\([0-9]+)/g,(function(t,e){return"\\"+(parseInt(e,10)+r+1)})):(h=1,u=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||s.push(l)),o[r]=c,r+=h,i.push(u),l.onMatch||(l.onMatch=null)}}i.length||(o[0]=0,i.push("$")),s.forEach((function(t){t.splitRegex=this.createSplitterRegexp(t.regex,a)}),this),this.regExps[e]=new RegExp("("+i.join(")|(")+")|($)",a)}};(function(){this.$setMaxTokenCount=function(t){r=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"==typeof n)return[{type:n,value:t}];for(var i=[],r=0,o=n.length;r<o;r++)e[r]&&(i[i.length]={type:n[r],value:e[r]});return i},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)e[r+1]&&(n[n.length]={type:i[r],value:e[r+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(t,e){return e?"(?:":t}))},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var n=0,i=!1,r={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(t,e,o,a,s,c){return i?i="]"!=s:s?i=!0:a?(n==r.stack&&(r.end=c+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=c)),t})),null!=r.end&&/^\)*$/.test(t.substr(r.end))&&(t=t.substring(0,r.start)+t.substr(r.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);"#tmp"===(e=n[0])&&(n.shift(),e=n.shift())}else n=[];var i=e||"start",o=this.states[i];o||(o=this.states[i="start"]);var a=this.matchMappings[i],s=this.regExps[i];s.lastIndex=0;for(var c,l=[],u=0,h=0,d={type:null,value:""};c=s.exec(t);){var p=a.defaultToken,f=null,g=c[0],m=s.lastIndex;if(m-g.length>u){var v=t.substring(u,m-g.length);d.type==p?d.value+=v:(d.type&&l.push(d),d={type:p,value:v})}for(var y=0;y<c.length-2;y++)if(void 0!==c[y+1]){p=(f=o[a[y]]).onMatch?f.onMatch(g,i,n,t):f.token,f.next&&(i="string"==typeof f.next?f.next:f.next(i,n),(o=this.states[i])||(this.reportError("state doesn't exist",i),o=this.states[i="start"]),a=this.matchMappings[i],u=m,(s=this.regExps[i]).lastIndex=m),f.consumeLineEnd&&(u=m);break}if(g)if("string"==typeof p)f&&!1===f.merge||d.type!==p?(d.type&&l.push(d),d={type:p,value:g}):d.value+=g;else if(p)for(d.type&&l.push(d),d={type:null,value:""},y=0;y<p.length;y++)l.push(p[y]);if(u==t.length)break;if(u=m,h++>r){for(h>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});u<t.length;)d.type&&l.push(d),d={value:t.substring(u,u+=500),type:"overflow"};i="start",n=[];break}}return d.type&&l.push(d),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:l,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),e.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(t,e,n){"use strict";var i=t("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var i=t[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=i}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,r,o){var a="function"==typeof t?(new t).getRules():t;if(r)for(var s=0;s<r.length;s++)r[s]=e+r[s];else for(var c in r=[],a)r.push(e+c);if(this.addRules(a,e),n){var l=Array.prototype[o?"push":"unshift"];for(s=0;s<r.length;s++)l.apply(this.$rules[r[s]],i.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function r(o){var a=i[o];a.processed=!0;for(var s=0;s<a.length;s++){var c=a[s],l=null;Array.isArray(c)&&(l=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var u=c.next||c.push;if(u&&Array.isArray(u)){var h=c.stateName;h||("string"!=typeof(h=c.token)&&(h=h[0]||""),i[h]&&(h+=n++)),i[h]=u,c.next=h,r(h)}else"pop"==u&&(c.next=e);if(c.push&&(c.nextState=c.next||c.push,c.next=t,delete c.push),c.rules)for(var d in c.rules)i[d]?i[d].push&&i[d].push.apply(i[d],c.rules[d]):i[d]=c.rules[d];var p="string"==typeof c?c:c.include;if(p&&(l=Array.isArray(p)?p.map((function(t){return i[t]})):i[p]),l){var f=[s,1].concat(l);c.noEscape&&(f=f.filter((function(t){return!t.next}))),a.splice.apply(a,f),s--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}),this)},this.createKeywordMapper=function(t,e,n,i){var r=Object.create(null);return Object.keys(t).forEach((function(e){var o=t[e];n&&(o=o.toLowerCase());for(var a=o.split(i||"|"),s=a.length;s--;)r[a[s]]=e})),Object.getPrototypeOf(r)&&(r.__proto__=null),this.$keywordList=Object.keys(r),t=null,n?function(t){return r[t.toLowerCase()]||e}:function(t){return r[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),e.TextHighlightRules=r})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(t,e,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"==typeof t)var n=(new t).getBehaviours(e);else n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(i.prototype),e.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("./range").Range,r=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var i=t.getTokenAt(e,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)n+=t[e-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new i(this.$row,e,this.$row,e+t.value.length)}}).call(r.prototype),e.TokenIterator=r})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,n){"use strict";var i,r=t("../../lib/oop"),o=t("../behaviour").Behaviour,a=t("../../token_iterator").TokenIterator,s=t("../../lib/lang"),c=["text","paren.rparen","rparen","paren","punctuation.operator"],l=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},d=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,u.rangeCount!=t.multiSelect.rangeCount&&(u={rangeCount:t.multiSelect.rangeCount})),u[e])return i=u[e];i=u[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(t,e,n,i){var r=t.end.row-t.start.row;return{text:n+e+i,selection:[0,t.start.column+1,r,t.end.column+(r?0:1)]}},f=function t(e){this.add("braces","insertion",(function(n,r,o,a,c){var l=o.getCursorPosition(),u=a.doc.getLine(l.row);if("{"==c){d(o);var h=o.getSelectionRange(),f=a.doc.getTextRange(h);if(""!==f&&"{"!==f&&o.getWrapBehavioursEnabled())return p(h,f,"{","}");if(t.isSaneInsertion(o,a))return/[\]\}\)]/.test(u[l.column])||o.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(o,a,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(o,a,"{"),{text:"{",selection:[1,1]})}else if("}"==c){if(d(o),"}"==u.substring(l.column,l.column+1)&&null!==a.$findOpeningBracket("}",{column:l.column+1,row:l.row})&&t.isAutoInsertedClosing(l,u,c))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==c||"\r\n"==c){d(o);var g="";if(t.isMaybeInsertedClosing(l,u)&&(g=s.stringRepeat("}",i.maybeInsertedBrackets),t.clearMaybeInsertedClosing()),"}"===u.substring(l.column,l.column+1)){var m=a.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!m)return null;var v=this.$getIndent(a.getLine(m.row))}else{if(!g)return void t.clearMaybeInsertedClosing();v=this.$getIndent(u)}var y=v+a.getTabString();return{text:"\n"+y+"\n"+v+g,selection:[1,y.length,1,y.length]}}t.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(t,e,n,r,o){var a=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==a){if(d(n),"}"==r.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;i.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,n,i,r,o){if("("==o){d(i);var a=i.getSelectionRange(),s=r.doc.getTextRange(a);if(""!==s&&i.getWrapBehavioursEnabled())return p(a,s,"(",")");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row);if(")"==l.substring(c.column,c.column+1)&&null!==r.$findOpeningBracket(")",{column:c.column+1,row:c.row})&&t.isAutoInsertedClosing(c,l,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o&&(d(n),")"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("brackets","insertion",(function(e,n,i,r,o){if("["==o){d(i);var a=i.getSelectionRange(),s=r.doc.getTextRange(a);if(""!==s&&i.getWrapBehavioursEnabled())return p(a,s,"[","]");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){d(i);var c=i.getCursorPosition(),l=r.doc.getLine(c.row);if("]"==l.substring(c.column,c.column+1)&&null!==r.$findOpeningBracket("]",{column:c.column+1,row:c.row})&&t.isAutoInsertedClosing(c,l,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o&&(d(n),"]"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("string_dquotes","insertion",(function(t,e,n,i,r){var o=i.$mode.$quotes||h;if(1==r.length&&o[r]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(r))return;d(n);var a=r,s=n.getSelectionRange(),c=i.doc.getTextRange(s);if(!(""===c||1==c.length&&o[c])&&n.getWrapBehavioursEnabled())return p(s,c,a,a);if(!c){var l=n.getCursorPosition(),u=i.doc.getLine(l.row),f=u.substring(l.column-1,l.column),g=u.substring(l.column,l.column+1),m=i.getTokenAt(l.row,l.column),v=i.getTokenAt(l.row,l.column+1);if("\\"==f&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),_=!v||/string|escape/.test(v.type);if(g==a)(y=b!==_)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!_)return null;if(b&&_)return null;var C=i.$mode.tokenRe;C.lastIndex=0;var x=C.test(f);C.lastIndex=0;var w=C.test(f);if(x||w)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var I=u[l.column-2];if(f==a&&(I==a||C.test(I)))return null;y=!0}return{text:y?a+a:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(t,e,n,i,r){var o=i.$mode.$quotes||h,a=i.doc.getTextRange(r);if(!r.isMultiLine()&&o.hasOwnProperty(a)&&(d(n),i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==a))return r.end.column++,r}))};f.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),i=new a(e,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",c)){if(/[)}\]]/.test(t.session.getLine(n.row)[n.column]))return!0;var r=new a(e,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",c))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",l)},f.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},f.recordAutoInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},f.recordMaybeInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(t,e,n){return i.autoInsertedBrackets>0&&t.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&e.substr(t.column)===i.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(t,e){return i.maybeInsertedBrackets>0&&t.row===i.maybeInsertedRow&&e.substr(t.column)===i.maybeInsertedLineEnd&&e.substr(0,t.column)==i.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(f,o),e.CstyleBehaviour=f})),ace.define("ace/unicode",["require","exports","module"],(function(t,e,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],r=0,o=[],a=0;a<i.length;a+=2)o.push(r+=i[a]),i[a+1]&&o.push(45,r+=i[a+1]);e.wordChars=String.fromCharCode.apply(null,o)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var i=t("../config"),r=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,a=t("./behaviour/cstyle").CstyleBehaviour,s=t("../unicode"),c=t("../lib/lang"),l=t("../token_iterator").TokenIterator,u=t("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+s.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,i){var r=e.doc,o=!0,a=!0,s=1/0,l=e.getTabSize(),u=!1;if(this.lineCommentStart){Array.isArray(this.lineCommentStart)?(g=this.lineCommentStart.map(c.escapeRegExp).join("|"),p=this.lineCommentStart[0]):(g=c.escapeRegExp(this.lineCommentStart),p=this.lineCommentStart),g=new RegExp("^(\\s*)(?:"+g+") ?"),u=e.getUseSoftTabs(),y=function(t,e){var n=t.match(g);if(n){var i=n[1].length,o=n[0].length;d(t,i,o)||" "!=n[0][o-1]||o--,r.removeInLine(e,i,o)}};var h=p+" ",d=(v=function(t,e){o&&!/\S/.test(t)||(d(t,s,s)?r.insertInLine({row:e,column:s},h):r.insertInLine({row:e,column:s},p))},b=function(t,e){return g.test(t)},function(t,e,n){for(var i=0;e--&&" "==t.charAt(e);)i++;if(i%l!=0)return!1;for(i=0;" "==t.charAt(n++);)i++;return l>2?i%l!=l-1:i%l==0})}else{if(!this.blockComment)return!1;var p=this.blockComment.start,f=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+c.escapeRegExp(p)+")"),m=new RegExp("(?:"+c.escapeRegExp(f)+")\\s*$"),v=function(t,e){b(t,e)||o&&!/\S/.test(t)||(r.insertInLine({row:e,column:t.length},f),r.insertInLine({row:e,column:s},p))},y=function(t,e){var n;(n=t.match(m))&&r.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(g))&&r.removeInLine(e,n[1].length,n[0].length)},b=function(t,n){if(g.test(t))return!0;for(var i=e.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}function _(t){for(var e=n;e<=i;e++)t(r.getLine(e),e)}var C=1/0;_((function(t,e){var n=t.search(/\S/);-1!==n?(n<s&&(s=n),a&&!b(t,e)&&(a=!1)):C>t.length&&(C=t.length)})),s==1/0&&(s=C,o=!1,a=!1),u&&s%l!=0&&(s=Math.floor(s/l)*l),_(a?y:v)},this.toggleBlockComment=function(t,e,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,a,s=(g=new l(e,i.row,i.column)).getCurrentToken(),c=e.selection.toOrientedRange();if(s&&/comment/.test(s.type)){for(var h,d;s&&/comment/.test(s.type);){if(-1!=(m=s.value.indexOf(r.start))){var p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m;h=new u(p,f,p,f+r.start.length);break}s=g.stepBackward()}var g;for(s=(g=new l(e,i.row,i.column)).getCurrentToken();s&&/comment/.test(s.type);){var m;if(-1!=(m=s.value.indexOf(r.end))){p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m,d=new u(p,f,p,f+r.end.length);break}s=g.stepForward()}d&&e.remove(d),h&&(e.remove(h),o=h.start.row,a=-r.start.length)}else a=r.start.length,o=n.start.row,e.insert(n.end,r.end),e.insert(n.start,r.start);c.start.row==o&&(c.start.column+=a),c.end.row==o&&(c.end.column+=a),e.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t)if(t[e]){var n=t[e],r=n.prototype.$id,o=i.$modes[r];o||(i.$modes[r]=o=new n),i.$modes[e]||(i.$modes[e]=o),this.$embeds.push(e),this.$modes[e]=o}var a=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<a.length;e++)!function(t){var n=a[e],i=t[n];t[a[e]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(t,e,n){var i=e[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])&&(o=this.$modes[i[2][i[2].length-1]]))return o[t].apply(o,[i[1]].concat([].slice.call(e,1)));i=i[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o,a=i.split(this.$embeds[r]);if(!a[0]&&a[1])return e[0]=a[1],(o=this.$modes[this.$embeds[r]])[t].apply(o,e)}var s=n.apply(this,e);return n?s:void 0},this.transformAction=function(t,e,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var a in o)if(o[a][e]){var s=o[a][e].apply(this,arguments);if(s)return s}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var i in e)for(var r=e[i],o=0,a=r.length;o<a;o++)if("string"==typeof r[o].token)/keyword|support|storage/.test(r[o].token)&&n.push(r[o].regex);else if("object"==typeof r[o].token)for(var s=0,c=r[o].token.length;s<c;s++)/keyword|support|storage/.test(r[o].token[s])&&(i=r[o].regex.match(/\(.+?\)/g)[s],n.push(i.substr(1,i.length-2)));this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(t){return{name:t,value:t,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(h.prototype),e.Mode=h})),ace.define("ace/apply_delta",["require","exports","module"],(function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var i=e.start.row,r=e.start.column,o=t[i]||"";switch(e.action){case"insert":if(1===e.lines.length)t[i]=o.substring(0,r)+e.lines[0]+o.substring(r);else{var a=[i,1].concat(e.lines);t.splice.apply(t,a),t[i]=o.substring(0,r)+t[i],t[i+e.lines.length-1]+=o.substring(r)}break;case"remove":var s=e.end.column,c=e.end.row;i===c?t[i]=o.substring(0,r)+o.substring(s):t.splice(i,c-i+1,o.substring(0,r)+t[c].substring(s))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),void 0===n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){return t.row<e.row||t.row==e.row&&(n?t.column<=e.column:t.column<e.column)}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row)){var n=function(e,n,i){var r="insert"==e.action,o=(r?1:-1)*(e.end.row-e.start.row),a=(r?1:-1)*(e.end.column-e.start.column),s=e.start,c=r?s:e.end;return t(n,s,i)?{row:n.row,column:n.column}:t(c,n,!i)?{row:n.row+o,column:n.column+(n.row==c.row?a:0)}:{row:s.row,column:s.column}}(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var i;if(i=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=t("./anchor").Anchor,c=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){i.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new a(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new s(this,t,e)},this.$split=0==="aaa".split(/a/).length?function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{(e=this.getLines(t.start.row,t.end.row))[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),i=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[e]},!0),this.clonePos(i)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var i=this.getLine(t);return null==e&&(e=i.length),{row:t,column:e=Math.min(Math.max(e,0),i.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){var n=0;(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),i={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:e}),this.clonePos(i)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var i=this.clippedPos(t,e),r=this.clippedPos(t,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1);var n=(e=Math.min(Math.max(0,e),this.getLength()-1))==this.getLength()-1&&t>0,i=e<this.getLength()-1,r=n?t-1:t,o=n?this.getLine(r).length:0,s=i?e+1:e,c=i?0:this.getLine(s).length,l=new a(r,o,s,c),u=this.$lines.slice(t,e+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){return t instanceof a||(t=a.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty()?t.start:e==this.getTextRange(t)?t.end:(this.remove(t),e?this.insert(t.start,e):t.start)},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!a.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(r(this.$lines,t,e),this._signal("change",t)))},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,i=n.length-e+1,r=t.start.row,o=t.start.column,a=0,s=0;a<i;a=s){var c=n.slice(a,s+=e-1);c.push(""),this.applyDelta({start:this.pos(r+a,o),end:this.pos(r+s,o=0),action:t.action,lines:c},!0)}t.lines=n.slice(a),t.start.row=r+a,t.start.column=o,this.applyDelta(t,!0)},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=e||0,o=n.length;r<o;r++)if((t-=n[r].length+i)<0)return{row:r,column:t+n[r].length+i};return{row:o-1,column:t+n[o-1].length+i}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(t.row,n.length),a=e||0;a<o;++a)r+=n[a].length+i;return r+t.column}}).call(c.prototype),e.Document=c})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,i=-1,r=n.doc,o=e;n.lines[e];)e++;var a=r.getLength(),s=0;for(n.running=!1;e<a;){n.$tokenizeRow(e),i=e;do{e++}while(n.lines[e]);if(++s%5==0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==i&&(i=e),o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){this._signal("update",{data:{first:t,last:e}})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.tokenizer.getLineTokens(e,this.states[t-1],t);return this.states[t]+""!=n.state+""?(this.states[t]=n.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=n.tokens}}).call(o.prototype),e.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/lang"),r=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var a=o.lastRow,s=o.firstRow;s<=a;s++){var c=this.cache[s];null==c&&((c=i.getMatchOffsets(n.getLine(s),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(t){return new r(s,t.offset,s,t.offset+t.length)})),this.cache[s]=c.length?c:"");for(var l=c.length;l--;)e.drawSingleLineMarker(t,c[l].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../range").Range;function r(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new i(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(t){t.setFoldLine(this)}),this)}(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach((function(e){e.start.row+=t,e.end.row+=t}))},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort((function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)})),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var i,r,o=0,a=this.folds,s=!0;null==e&&(e=this.end.row,n=this.end.column);for(var c=0;c<a.length;c++){if(-1==(r=(i=a[c]).range.compareStart(e,n)))return void t(null,e,n,o,s);if(!t(null,i.start.row,i.start.column,o,s)&&t(i.placeholder,i.start.row,i.start.column,o)||0===r)return;s=!i.sameRow,o=i.end.column}t(null,e,n,o,s)},this.getNextFoldTo=function(t,e){for(var n,i,r=0;r<this.folds.length;r++){if(-1==(i=(n=this.folds[r]).range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var i,r,o=this.getNextFoldTo(t,e);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=e&&i.start.row!=t)window.console&&window.console.log(t,e,i);else if(i.start.row==t){var a=(r=this.folds).indexOf(i);for(0===a&&(this.start.column+=n);a<r.length;a++){if((i=r[a]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var i=this.folds,o=this.foldData,a=i.indexOf(n.fold),s=i[a-1];this.end.row=s.end.row,this.end.column=s.end.column;var c=new r(o,i=i.splice(a,i.length-a));return o.splice(o.indexOf(this)+1,0,c),c},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var i=this.foldData;i.splice(i.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach((function(e){t.push("  "+e.toString())})),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((t-=i.start.column-e)<0)return{row:i.start.row,column:i.start.column+t};if((t-=i.placeholder.length)<0)return i.start;e=i.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(r.prototype),e.FoldLine=r})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("./range").Range.comparePoints,r=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(t,e,n){for(var r=this.ranges,o=n||0;o<r.length;o++){var a=r[o],s=i(t,a.end);if(!(s>0)){var c=i(t,a.start);return 0===s?e&&0!==c?-o-2:o:c>0||0===c&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var i=this.pointIndex(t.end,e,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){for(var t,e=[],n=this.ranges,r=(n=n.sort((function(t,e){return i(t.start,e.start)})))[0],o=1;o<n.length;o++){var a=i((t=r).end,(r=n[o]).start);a<0||(0!=a||t.isEmpty()||r.isEmpty())&&(i(t.end,r.end)<0&&(t.end.row=r.end.row,t.end.column=r.end.column),n.splice(o,1),e.push(r),r=t,o--)}return this.ranges=n,e},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var i=this.pointIndex({row:t,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:e,column:0},i);r<0&&(r=-r-1);for(var o=[],a=i;a<r;a++)o.push(n[a]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){for(var e=t.start,n=t.end,i=e.row,r=n.row,o=this.ranges,a=0,s=o.length;a<s&&!((u=o[a]).end.row>=i);a++);if("insert"==t.action){for(var c=r-i,l=-e.column+n.column;a<s&&!((u=o[a]).start.row>i);a++)if(u.start.row==i&&u.start.column>=e.column&&(u.start.column==e.column&&this.$bias<=0||(u.start.column+=l,u.start.row+=c)),u.end.row==i&&u.end.column>=e.column){if(u.end.column==e.column&&this.$bias<0)continue;u.end.column==e.column&&l>0&&a<s-1&&u.end.column>u.start.column&&u.end.column==o[a+1].start.column&&(u.end.column-=l),u.end.column+=l,u.end.row+=c}}else for(c=i-r,l=e.column-n.column;a<s&&!((u=o[a]).start.row>r);a++)u.end.row<r&&(i<u.end.row||i==u.end.row&&e.column<u.end.column)?(u.end.row=i,u.end.column=e.column):u.end.row==r?u.end.column<=n.column?(c||u.end.column>e.column)&&(u.end.column=e.column,u.end.row=e.row):(u.end.column+=l,u.end.row+=c):u.end.row>r&&(u.end.row+=c),u.start.row<r&&(i<u.start.row||i==u.start.row&&e.column<u.start.column)?(u.start.row=i,u.start.column=e.column):u.start.row==r?u.start.column<=n.column?(c||u.start.column>e.column)&&(u.start.column=e.column,u.start.row=e.row):(u.start.column+=l,u.start.row+=c):u.start.row>r&&(u.start.row+=c);if(0!=c&&a<s)for(;a<s;a++){var u;(u=o[a]).start.row+=c,u.end.row+=c}}}).call(r.prototype),e.RangeList=r})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("../range_list").RangeList,r=t("../lib/oop"),o=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};function a(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function s(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}r.inherits(o,i),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach((function(e){e.setFoldLine(t)}))},this.clone=function(){var t=this.range.clone(),e=new o(t,this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){var e,n;a((e=t).start,n=this.start),a(e.end,n);for(var i=t.start.row,r=t.start.column,o=0,s=-1;o<this.subFolds.length&&1==(s=this.subFolds[o].range.compare(i,r));o++);var c=this.subFolds[o],l=0;if(0==s){if(c.range.containsRange(t))return c.addSubFold(t);l=1}i=t.range.end.row,r=t.range.end.column;var u=o;for(s=-1;u<this.subFolds.length&&1==(s=this.subFolds[u].range.compare(i,r));u++);0==s&&u++;for(var h=this.subFolds.splice(o,u-o,t),d=0==s?h.length-1:h.length,p=l;p<d;p++)t.addSubFold(h[p]);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return function(t,e){s(t.start,e),s(t.end,e)}(t,this.start)}}).call(o.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(t,e,n){"use strict";var i=t("../range").Range,r=t("./fold_line").FoldLine,o=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=function(){this.getFoldAt=function(t,e,n){var i=this.getFoldLine(t);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var a=r[o].range;if(a.contains(t,e)){if(1==n&&a.isEnd(t,e)&&!a.isEmpty())continue;if(-1==n&&a.isStart(t,e)&&!a.isEmpty())continue;return r[o]}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,i=this.$foldData,r=[];e.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var a=i[o].range.compareRange(t);if(2!=a){if(-2==a)break;for(var s=i[o].folds,c=0;c<s.length;c++){var l=s[c];if(-2==(a=l.range.compareRange(t)))break;if(2!=a){if(42==a)break;r.push(l)}}}}return e.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach((function(t){e=e.concat(this.getFoldsInRange(t))}),this)}else e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var i=0;i<e[n].folds.length;i++)t.push(e[n].folds[i]);return t},this.getFoldStringAt=function(t,e,n,i){if(!(i=i||this.getFoldLine(t)))return null;for(var r,o,a={end:{column:0}},s=0;s<i.folds.length;s++){var c=(o=i.folds[s]).range.compareEnd(t,e);if(-1==c){r=this.getLine(o.start.row).substring(a.end.column,o.start.column);break}if(0===c)return null;a=o}return r||(r=this.getLine(o.start.row).substring(a.end.column)),-1==n?r.substring(0,e-a.end.column):1==n?r.substring(e-a.end.column):r},this.getFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.start.row<=t&&r.end.row>=t)return r;if(r.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.end.row>=t)return r}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,i=e-t+1,r=0;r<n.length;r++){var o=n[r],a=o.end.row,s=o.start.row;if(a>=e){s<e&&(s>=t?i-=e-s:i=0);break}a>=t&&(i-=s>=t?a-s:a-t+1)}return i},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort((function(t,e){return t.start.row-e.start.row})),t},this.addFold=function(t,e){var n,i=this.$foldData,a=!1;t instanceof o?n=t:(n=new o(e,t)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(n.range);var s=n.start.row,c=n.start.column,l=n.end.row,u=n.end.column,h=this.getFoldAt(s,c,1),d=this.getFoldAt(l,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(s,c)&&this.removeFold(h),d&&!d.range.isEnd(l,u)&&this.removeFold(d);var p=this.getFoldsInRange(n.range);p.length>0&&(this.removeFolds(p),p.forEach((function(t){n.addSubFold(t)})));for(var f=0;f<i.length;f++){var g=i[f];if(l==g.start.row){g.addFold(n),a=!0;break}if(s==g.end.row){if(g.addFold(n),a=!0,!n.sameRow){var m=i[f+1];if(m&&m.start.row==l){g.merge(m);break}}break}if(l<=g.start.row)break}return a||(g=this.$addFoldLine(new r(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach((function(t){this.addFold(t)}),this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,i=e.end.row,r=this.$foldData,o=e.folds;if(1==o.length)r.splice(r.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var a=e.split(t.start.row,t.start.column);(o=a.folds).shift(),a.start.row=o[0].start.row,a.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach((function(t){this.removeFold(t)}),this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach((function(e){t.restoreRange(e),this.addFold(e)}),this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach((function(t){this.expandFold(t)}),this)},this.unfold=function(t,e){var n,r;if(null==t?(n=new i(0,0,this.getLength(),0),e=!0):n="number"==typeof t?new i(t,0,t,this.getLine(t).length):"row"in t?i.fromPoints(t,t):t,r=this.getFoldsInRangeList(n),e)this.removeFolds(r);else for(var o=r;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(r.length)return r},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,i,r){null==i&&(i=t.start.row),null==r&&(r=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,a="";return t.walk((function(t,e,n,s){if(!(e<i)){if(e==i){if(n<r)return;s=Math.max(r,s)}a+=null!=t?t:o.getLine(e).substring(s,n)}}),e,n),a},this.getDisplayLine=function(t,e,n,i){var r,o=this.getFoldLine(t);return o?this.getFoldDisplayLine(o,t,e,n,i):(r=this.doc.getLine(t)).substring(i||0,e||r.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map((function(e){var n=e.folds.map((function(t){return t.clone()}));return new r(t,n)}))},this.toggleFold=function(t){var e,n,i=this.selection.getRange();if(i.isEmpty()){var r=i.start;if(e=this.getFoldAt(r.row,r.column))return void this.expandFold(e);(n=this.findMatchingBracket(r))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:r.row,column:r.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(r.row,r.column)||i}else{var o=this.getFoldsInRange(i);if(t&&o.length)return void this.expandFolds(o);1==o.length&&(e=o[0])}if(e||(e=this.getFoldAt(i.start.row,i.start.column)),e&&e.range.toString()==i.toString())this.expandFold(e);else{var a="...";if(!i.isMultiLine()){if((a=this.getTextRange(i)).length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,i)}},this.getCommentFoldRange=function(t,e,n){var r=new a(this,t,e),o=r.getCurrentToken(),s=o.type;if(o&&/^comment|string/.test(s)){"comment"==(s=s.match(/comment|string/)[0])&&(s+="|doc-start");var c=new RegExp(s),l=new i;if(1!=n){do{o=r.stepBackward()}while(o&&c.test(o.type));r.stepForward()}if(l.start.row=r.getCurrentTokenRow(),l.start.column=r.getCurrentTokenColumn()+2,r=new a(this,t,e),-1!=n){var u=-1;do{if(o=r.stepForward(),-1==u){var h=this.getState(r.$row);c.test(h)||(u=r.$row)}else if(r.$row>u)break}while(o&&c.test(o.type));o=r.stepBackward()}else o=r.getCurrentToken();return l.end.row=r.getCurrentTokenRow(),l.end.column=r.getCurrentTokenColumn()+o.value.length-2,l}},this.foldAll=function(t,e,n){null==n&&(n=1e5);var i=this.foldWidgets;if(i){e=e||this.getLength();for(var r=t=t||0;r<e;r++)if(null==i[r]&&(i[r]=this.getFoldWidget(r)),"start"==i[r]){var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=e&&o.start.row>=t){r=o.end.row;try{var a=this.addFold("...",o);a&&(a.collapseChildren=n)}catch(s){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),t&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var i,r=t-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var a=this.getFoldWidgetRange(r);if(i||(i=a),a&&a.end.row>=t)break}r--}return{range:-1!==r&&a,firstRange:i}},this.onFoldWidgetClick=function(t,e){if(!this.$toggleFoldWidget(t,{children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey})){var n=e.target||e.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),i=this.getLine(t),r="end"===n?-1:1,o=this.getFoldAt(t,-1===r?0:i.length,r);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var a=this.getFoldWidgetRange(t,!0);if(a&&!a.isMultiLine()&&(o=this.getFoldAt(a.start.row,a.start.column,1))&&a.isEqual(o.range))return this.removeFold(o),o;if(e.siblings){var s=this.getParentFoldRangeData(t);if(s.range)var c=s.range.start.row+1,l=s.range.end.row;this.foldAll(c,l,e.all?1e4:0)}else e.children?(l=a?a.end.row:this.getLength(),this.foldAll(t+1,l,e.all?1e4:0)):a&&(e.all&&(a.collapseChildren=1e4),this.addFold("...",a));return a}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var i=this.getParentFoldRangeData(e,!0);if(n=i.range||i.firstRange){var r=this.getFoldAt(e=n.start.row,this.getLine(e).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var i=t("../token_iterator").TokenIterator,r=t("../range").Range;e.BracketMatch=function(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),i=!0,o=n.charAt(t.column-1),a=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(a||(o=n.charAt(t.column),t={row:t.row,column:t.column+1},a=o&&o.match(/([\(\[\{])|([\)\]\}])/),i=!1),!a)return null;if(a[1]){if(!(s=this.$findClosingBracket(a[1],t)))return null;e=r.fromPoints(t,s),i||(e.end.column++,e.start.column--),e.cursor=e.end}else{var s;if(!(s=this.$findOpeningBracket(a[2],t)))return null;e=r.fromPoints(s,t),i||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(t,e,n){var r=this.$brackets[t],o=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-a.getCurrentTokenColumn()-2,l=s.value;;){for(;c>=0;){var u=l.charAt(c);if(u==r){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:c+a.getCurrentTokenColumn()}}else u==t&&(o+=1);c-=1}do{s=a.stepBackward()}while(s&&!n.test(s.type));if(null==s)break;c=(l=s.value).length-1}return null}},this.$findClosingBracket=function(t,e,n){var r=this.$brackets[t],o=1,a=new i(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-a.getCurrentTokenColumn();;){for(var l=s.value,u=l.length;c<u;){var h=l.charAt(c);if(h==r){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:c+a.getCurrentTokenColumn()}}else h==t&&(o+=1);c+=1}do{s=a.stepForward()}while(s&&!n.test(s.type));if(null==s)break;c=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./bidihandler").BidiHandler,a=t("./config"),s=t("./lib/event_emitter").EventEmitter,c=t("./selection").Selection,l=t("./mode/text").Mode,u=t("./range").Range,h=t("./document").Document,d=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,f=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new c(this),this.$bidiHandler=new o(this),a.resetOptions(this),this.setMode(n),a._signal("session",this)};f.$uid=0,(function(){i.implement(this,s),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>1,o=t[r];if(e>o)n=r+1;else{if(!(e<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){this.$resetRowCache(t.data.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);!this.$fromUndo&&this.$undoManager&&(e&&e.length&&(this.$undoManager.add({action:"removeFolds",folds:e},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(t,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,i=this.bgTokenizer.getTokens(t),r=0;if(null==e){var o=i.length-1;r=this.getLine(t).length}else for(o=0;o<i.length&&!((r+=i[o].value.length)>=e);o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;t.addSession(this),this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.mergeUndoDeltas=!1},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,i){var r=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];e&&(delete(e.inFront?this.$frontMarkers:this.$backMarkers)[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,i){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var r=new u(t,0,e,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n=this.getLine(t),i=!1;if(e>0&&(i=!!n.charAt(e-1).match(this.tokenRe)),i||(i=!!n.charAt(e).match(this.tokenRe)),i)var r=this.tokenRe;else r=/^\s+$/.test(n.slice(e-1,e+1))?/\s/:this.nonTokenRe;var o=e;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}for(var a=e;a<n.length&&n.charAt(a).match(r);)a++;return new u(t,o,t,a)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){this.bgTokenizer.start(t.data.first),this._signal("tokenizerUpdate",t)},this.$modes=a.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"==typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,i=t.path}else i=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new l),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(e&&e());this.$modeId=i,a.loadModule(["mode",i],(function(t){if(this.$modeId!==i)return e&&e();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[i]=t,t.$id=i),this.$onChangeMode(t)),e&&e()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=t.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new d(n);var r=this;this.bgTokenizer.addEventListener("update",(function(t){r._signal("tokenizerUpdate",t)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){a.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach((function(e){e&&e.screenWidth>t&&(t=e.screenWidth)})),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],a=o?o.start.row:1/0,s=e.length,c=0;c<s;c++){if(c>a){if((c=o.end.row+1)>=s)break;a=(o=this.$foldData[r++])?o.start.row:1/0}null==n[c]&&(n[c]=this.$getStringScreenWidth(e[c])[0]),n[c]>i&&(i=n[c])}this.screenWidth=i}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=t.length-1;-1!=n;n--){var i=t[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!e&&this.$undoSelect&&(t.selectionBefore?this.selection.fromJSON(t.selectionBefore):this.selection.setRange(this.$getUndoSelection(t,!0))),this.$fromUndo=!1}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=0;n<t.length;n++){var i=t[n];"insert"!=i.action&&"remove"!=i.action||this.doc.applyDelta(i)}!e&&this.$undoSelect&&(t.selectionAfter?this.selection.fromJSON(t.selectionAfter):this.selection.setRange(this.$getUndoSelection(t,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e){function n(t){return e?"insert"!==t.action:"insert"===t.action}for(var i,r,o=0;o<t.length;o++){var a=t[o];a.start&&(i?n(a)?(-1==i.compare((r=a.start).row,r.column)&&i.setStart(r),1==i.compare((r=a.end).row,r.column)&&i.setEnd(r)):-1==i.compare((r=a.start).row,r.column)&&(i=u.fromPoints(a.start,a.start)):i=n(a)?u.fromPoints(a.start,a.end):u.fromPoints(a.start,a.start))}return i},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var i=this.getTextRange(t),r=this.getFoldsInRange(t),o=u.fromPoints(e,e);if(n||(this.remove(t),(l=(c=t.start.row-t.end.row)?-t.end.column:t.start.column-t.end.column)&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=l),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=l)),c&&o.start.row>=t.end.row&&(o.start.row+=c,o.end.row+=c)),o.end=this.insert(o.start,i),r.length){var a=t.start,s=o.start,c=s.row-a.row,l=s.column-a.column;this.addFolds(r.map((function(t){return(t=t.clone()).start.row==a.row&&(t.start.column+=l),t.end.row==a.row&&(t.end.column+=l),t.start.row+=c,t.end.row+=c,t})))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var i=t;i<=e;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),r=e.start.row;r<=e.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var a=0;a<i&&" "==o.charAt(a);++a);a<i&&"\t"==o.charAt(a)?(n.start.column=a,n.end.column=a+1):(n.start.column=0,n.end.column=a),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){if((r=this.getRowFoldStart(t+n))<0)return 0;var i=r-t}else if(n>0){var r;if((r=this.getRowFoldEnd(e+n))>this.doc.getLength()-1)return 0;i=r-e}else t=this.$clipRowToDocument(t),i=(e=this.$clipRowToDocument(e))-t+1;var o=new u(t,0,e,Number.MAX_VALUE),a=this.getFoldsInRange(o).map((function(t){return(t=t.clone()).start.row+=i,t.end.row+=i,t})),s=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+i,s),a.length&&this.addFolds(a),i},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var i=this.$constrainWrapLimit(t,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,i=t.start,r=t.end,o=i.row,a=r.row,s=a-o,c=null;if(this.$updating=!0,0!=s)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,s);var l=this.$foldData;c=this.getFoldsInRange(t),this.removeFolds(c);var u=0;if(g=this.getFoldLine(r.row)){g.addRemoveChars(r.row,r.column,i.column-r.column),g.shiftRow(-s);var h=this.getFoldLine(o);h&&h!==g&&(h.merge(g),g=h),u=l.indexOf(g)+1}for(;u<l.length;u++)(g=l[u]).start.row>=r.row&&g.shiftRow(-s);a=o}else{var d=Array(s);d.unshift(o,0);var p=e?this.$wrapData:this.$rowLengthCache;if(p.splice.apply(p,d),l=this.$foldData,u=0,g=this.getFoldLine(o)){var f=g.range.compareInside(i.row,i.column);0==f?(g=g.split(i.row,i.column))&&(g.shiftRow(s),g.addRemoveChars(a,0,r.column-i.column)):-1==f&&(g.addRemoveChars(o,0,r.column-i.column),g.shiftRow(s)),u=l.indexOf(g)+1}for(;u<l.length;u++){var g;(g=l[u]).start.row>=o&&g.shiftRow(s)}}else s=Math.abs(t.start.column-t.end.column),"remove"===n&&(c=this.getFoldsInRange(t),this.removeFolds(c),s=-s),(g=this.getFoldLine(o))&&g.addRemoveChars(o,i.column,s);return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,a):this.$updateRowLengthCache(o,a),c},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(n,i){var r,o,a=this.doc.getAllLines(),s=this.getTabSize(),c=this.$wrapData,l=this.$wrapLimit,u=n;for(i=Math.min(i,a.length-1);u<=i;)(o=this.getFoldLine(u,o))?(r=[],o.walk((function(n,i,o,s){var c;if(null!=n){(c=this.$getDisplayTokens(n,r.length))[0]=t;for(var l=1;l<c.length;l++)c[l]=e}else c=this.$getDisplayTokens(a[i].substring(s,o),r.length);r=r.concat(c)}).bind(this),o.end.row,a[o.end.row].length+1),c[o.start.row]=this.$computeWrapSplits(r,l,s),u=o.end.row+1):(r=this.$getDisplayTokens(a[u]),c[u]=this.$computeWrapSplits(r,l,s),u++)};var t=3,e=4;function n(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}this.$computeWrapSplits=function(n,i,r){if(0==n.length)return[];var o=[],a=n.length,s=0,c=0,l=this.$wrapAsCode,u=this.$indentedSoftWrap,h=i<=Math.max(2*r,8)||!1===u?0:Math.floor(i/2);function d(t){for(var e=t-s,i=s;i<t;i++){var a=n[i];12!==a&&2!==a||(e-=1)}o.length||(p=function(){var t=0;if(0===h)return t;if(u)for(var e=0;e<n.length;e++){var i=n[e];if(10==i)t+=1;else{if(11!=i){if(12==i)continue;break}t+=r}}return l&&!1!==u&&(t+=r),Math.min(t,h)}(),o.indent=p),o.push(c+=e),s=t}for(var p=0;a-s>i-p;){var f=s+i-p;if(n[f-1]>=10&&n[f]>=10)d(f);else if(n[f]!=t&&n[f]!=e){for(var g=Math.max(f-(i-(i>>2)),s-1);f>g&&n[f]<t;)f--;if(l){for(;f>g&&n[f]<t;)f--;for(;f>g&&9==n[f];)f--}else for(;f>g&&n[f]<10;)f--;f>g?d(++f):(2==n[f=s+i]&&f--,d(f-p))}else{for(;f!=s-1&&n[f]!=t;f--);if(f>s){d(f);continue}for(f=s+i;f<n.length&&n[f]==e;f++);if(f==n.length)break;d(f)}}return o},this.$getDisplayTokens=function(t,e){var i,r=[];e=e||0;for(var o=0;o<t.length;o++){var a=t.charCodeAt(o);if(9==a){i=this.getScreenTabSize(r.length+e),r.push(11);for(var s=1;s<i;s++)r.push(12)}else 32==a?r.push(10):a>39&&a<48||a>57&&a<64?r.push(9):a>=4352&&n(a)?r.push(1,2):r.push(1)}return r},this.$getStringScreenWidth=function(t,e,i){if(0==e)return[0,0];var r,o;for(null==e&&(e=1/0),i=i||0,o=0;o<t.length&&(9==(r=t.charCodeAt(o))?i+=this.getScreenTabSize(i):r>=4352&&n(r)?i+=2:i+=1,!(i>e));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(t){if(this.lineWidgets)var e=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-(t%this.$tabSize|0)},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var i,r,o=0,a=0,s=0,c=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,t),h=l.length;if(h&&u>=0){s=l[u],o=this.$docRowCache[u];var d=t>l[h-1]}else d=!h;for(var p=this.getLength()-1,f=this.getNextFoldLine(o),g=f?f.start.row:1/0;s<=t&&!(s+(c=this.getRowLength(o))>t||o>=p);)s+=c,++o>g&&(g=(f=this.getNextFoldLine(o=f.end.row+1,f))?f.start.row:1/0),d&&(this.$docRowCache.push(o),this.$screenRowCache.push(s));if(f&&f.start.row<=o)i=this.getFoldDisplayLine(f),o=f.start.row;else{if(s+c<=t||o>p)return{row:p,column:this.getLine(p).length};i=this.getLine(o),f=null}var m=0,v=Math.floor(t-s);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(r=y[v],v>0&&y.length&&(m=y.indent,i=i.substring(a=y[v-1]||y[y.length-1])))}return void 0!==n&&this.$bidiHandler.isBidiRow(s+v,o,v)&&(e=this.$bidiHandler.offsetToCol(n)),a+=this.$getStringScreenWidth(i,e-m)[1],this.$useWrapMode&&a>=r&&(a=r-1),f?f.idxToPosition(a):{row:o,column:a}},this.documentToScreenPosition=function(t,e){if(void 0===e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);var i,r=0,o=null;(i=this.getFoldAt(t=n.row,e=n.column,1))&&(t=i.start.row,e=i.start.column);var a,s=0,c=this.$docRowCache,l=this.$getRowCacheIndex(c,t),u=c.length;if(u&&l>=0){s=c[l],r=this.$screenRowCache[l];var h=t>c[u-1]}else h=!u;for(var d=this.getNextFoldLine(s),p=d?d.start.row:1/0;s<t;){if(s>=p){if((a=d.end.row+1)>t)break;p=(d=this.getNextFoldLine(a,d))?d.start.row:1/0}else a=s+1;r+=this.getRowLength(s),s=a,h&&(this.$docRowCache.push(s),this.$screenRowCache.push(r))}var f="";d&&s>=p?(f=this.getFoldDisplayLine(d,t,e),o=d.start.row):(f=this.getLine(t).substring(0,e),o=t);var g=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){for(var v=0;f.length>=m[v];)r++,v++;f=f.substring(m[v-1]||0,f.length),g=v>0?m.indent:0}}return{row:r,column:g+this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=(s=0,(e=this.$foldData[s++])?e.start.row:1/0);i<n;){var o=this.$wrapData[i];t+=o?o.length+1:1,++i>r&&(i=e.end.row+1,r=(e=this.$foldData[s++])?e.start.row:1/0)}else{t=this.getLength();for(var a=this.$foldData,s=0;s<a.length;s++)t-=(e=a[s]).end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,i){if(0===n)return[0,0];var r,o;for(n||(n=1/0),i=i||0,o=0;o<e.length&&!((i+="\t"===(r=e.charAt(o))?this.getScreenTabSize(i):t.getCharacterWidth(r))>n);o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=n}).call(f.prototype),t("./edit_session/folding").Folding.call(f.prototype),t("./edit_session/bracket_match").BracketMatch.call(f.prototype),a.defineOptions(f.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){(t=parseInt(t))>0&&this.$tabSize!==t&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(t){this.setFoldStyle(t)},handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId},handlesSet:!0}}),e.EditSession=f})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/lang"),r=t("./lib/oop"),o=t("./range").Range,a=function(){this.$options={}};(function(){this.set=function(t){return r.mixin(this.$options,t),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var i=null;return n.forEach((function(t,n,r,a){return i=new o(t,n,r,a),!(n==a&&e.start&&e.start.start&&0!=e.skipCurrent&&i.isEqual(e.start)&&(i=null,1))})),i},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,r=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),a=[],s=e.re;if(e.$isMultiLine){var c,l=s.length,u=r.length-l;t:for(var h=s.offset||0;h<=u;h++){for(var d=0;d<l;d++)if(-1==r[h+d].search(s[d]))continue t;var p=r[h],f=r[h+l-1],g=p.length-p.match(s[0])[0].length,m=f.match(s[l-1])[0].length;c&&c.end.row===h&&c.end.column>g||(a.push(c=new o(h,g,h+l-1,m)),l>2&&(h=h+l-2))}}else for(var v=0;v<r.length;v++){var y=i.getMatchOffsets(r[v],s);for(d=0;d<y.length;d++){var b=y[d];a.push(new o(v,b.offset,v,b.offset+b.length))}}if(n){var _=n.start.column,C=n.start.column;for(v=0,d=a.length-1;v<d&&a[v].start.column<_&&a[v].start.row==n.start.row;)v++;for(;v<d&&a[d].end.column>C&&a[d].end.row==n.end.row;)d--;for(a=a.slice(v,d+1),v=0,d=a.length;v<d;v++)a[v].start.row+=n.start.row,a[v].end.row+=n.start.row}return a},this.replace=function(t,e){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(i){var r=i.exec(t);if(!r||r[0].length!=t.length)return null;if(e=t.replace(i,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var a=t[o];e[o]=a&&a.toLowerCase()!=a?e[o].toUpperCase():e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=i.escapeRegExp(n)),t.wholeWord&&(n=function(t,e){function n(t){return/\w/.test(t)||e.regExp?"\\b":""}return n(t[0])+t+n(t[t.length-1])}(n,t));var r=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,r);try{var o=new RegExp(n,r)}catch(a){o=!1}return t.re=o},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],e))}catch(o){return!1}return i},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var i=1==e.backwards,r=0!=e.skipCurrent,o=e.range,a=e.start;a||(a=o?o[i?"end":"start"]:t.selection.getRange()),a.start&&(a=a[r!=i?"end":"start"]);var s=o?o.start.row:0,c=o?o.end.row:t.getLength()-1;if(i)var l=function(t){var n=a.row;if(!h(n,a.column,t)){for(n--;n>=s;n--)if(h(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=c,s=a.row;n>=s;n--)if(h(n,Number.MAX_VALUE,t))return}};else l=function(t){var n=a.row;if(!h(n,a.column,t)){for(n+=1;n<=c;n++)if(h(n,0,t))return;if(0!=e.wrap)for(n=s,c=a.row;n<=c;n++)if(h(n,0,t))return}};if(e.$isMultiLine)var u=n.length,h=function(e,r,o){var a=i?e-u+1:e;if(!(a<0)){var s=t.getLine(a),c=s.search(n[0]);if(!(!i&&c<r||-1===c)){for(var l=1;l<u;l++)if(-1==(s=t.getLine(a+l)).search(n[l]))return;var h=s.match(n[u-1])[0].length;if(!(i&&h>r))return!!o(a,c,a+u-1,h)||void 0}}};else h=i?function(e,i,r){var o,a=t.getLine(e),s=[],c=0;for(n.lastIndex=0;o=n.exec(a);){if(c=o.index,!(u=o[0].length)){if(c>=a.length)break;n.lastIndex=c+=1}if(o.index+u>i)break;s.push(o.index,u)}for(var l=s.length-1;l>=0;l-=2){var u,h=s[l-1];if(r(e,h,e,h+(u=s[l])))return!0}}:function(e,i,r){var o,a,s=t.getLine(e);for(n.lastIndex=i;a=n.exec(s);){var c=a[0].length;if(r(e,o=a.index,e,o+c))return!0;if(!c&&(n.lastIndex=o+=1,o>=s.length))return!1}};return{forEach:l}}}).call(a.prototype),e.Search=a})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/useragent"),o=i.KEY_MODS;function a(t,e){this.platform=e||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function s(t,e){a.call(this,t,e),this.$singleCommand=!1}s.prototype=a.prototype,(function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"==typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==t)delete i[r];else if(Array.isArray(o)){var a=o.indexOf(t);-1!=a&&(o.splice(a,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==typeof t&&t&&(null==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach((function(t){var i="";if(-1!=t.indexOf(" ")){var r=t.split(/\s+/);t=r.pop(),r.forEach((function(t){var e=this.parseKeys(t);this._addCommandToBinding(i+=(i?" ":"")+(o[e.hashId]+e.key),"chainKeys")}),this),i+=" "}var a=this.parseKeys(t);this._addCommandToBinding(i+(o[a.hashId]+a.key),e,n)}),this)},this._addCommandToBinding=function(e,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(r=o[e].indexOf(n))&&o[e].splice(r,1):o[e]=[o[e]],"number"!=typeof i&&(i=t(n));var a=o[e];for(r=0;r<a.length&&!(t(a[r])>i);r++);a.splice(r,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];if(n){if("string"==typeof n)return this.bindKey(n,e);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=e),this.addCommand(n))}}),this)},this.removeCommands=function(t){Object.keys(t).forEach((function(e){this.removeCommand(t[e])}),this)},this.bindKeys=function(t){Object.keys(t).forEach((function(e){this.bindKey(e,t[e])}),this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(t){return t})),n=e.pop(),r=i[n];if(i.FUNCTION_KEYS[r])n=i.FUNCTION_KEYS[r].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,a=e.length;a--;){var s=i.KEY_MODS[e[a]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+e[a]+" in "+t),!1;o|=s}return{key:n,hashId:o}},this.findKeyCommand=function(t,e){return this.commandKeyBinding[o[t]+e]},this.handleKeyboard=function(t,e,n,i){if(!(i<0)){var r=o[e]+n,a=this.commandKeyBinding[r];return t.$keyChain&&(t.$keyChain+=" "+r,a=this.commandKeyBinding[t.$keyChain]||a),!a||"chainKeys"!=a&&"chainKeys"!=a[a.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||i>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-r.length-1)),{command:a}):(t.$keyChain=t.$keyChain||r,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}).call(a.prototype),e.HashHandler=a,e.MultiHashHandler=s})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,a=function(t,e){r.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",(function(t){return t.command.exec(t.editor,t.args||{})}))};i.inherits(a,r),(function(){i.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var i=t.length;i--;)if(this.exec(t[i],e,n))return!0;return!1}if("string"==typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(0!=this.$checkCommandState&&t.isAvailable&&!t.isAvailable(e))return!1;var r={editor:e,command:t,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),!1!==r.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach((function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map((function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t}))}}).call(a.prototype),e.CommandManager=a})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(t,e,n){"use strict";var i=t("../lib/lang"),r=t("../config"),o=t("../range").Range;function a(t,e){return{win:t,mac:e}}e.commands=[{name:"showSettingsMenu",bindKey:a("Ctrl-,","Command-,"),exec:function(t){r.loadModule("ace/ext/settings_menu",(function(e){e.init(t),t.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:a("Alt-E","F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(t,e){"number"!=typeof e||isNaN(e)||t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:a("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:a("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty()?t.selection.getLineRange():t.selection.getRange();t._emit("cut",e),e.isEmpty()||t.session.remove(e),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t,!0)}))}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(i.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),r=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),a=t.session.doc.getLine(n.row).length,s=t.session.doc.getTextRange(t.selection.getRange()).replace(/\n\s*/," ").length,c=t.session.doc.getLine(n.row),l=n.row+1;l<=r.row+1;l++){var u=i.stringTrimLeft(i.stringTrimRight(t.session.doc.getLine(l)));0!==u.length&&(u=" "+u),c+=u}r.row+1<t.session.doc.getLength()-1&&(c+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new o(n.row,0,r.row+2,0),c),s>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+s)):(a=t.session.doc.getLine(n.row).length>a?a+1:a,t.selection.moveCursorTo(n.row,a))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,i=t.selection.rangeList.ranges,r=[];i.length<1&&(i=[t.selection.getRange()]);for(var a=0;a<i.length;a++)a==i.length-1&&(i[a].end.row===e&&i[a].end.column===n||r.push(new o(i[a].end.row,i[a].end.column,e,n))),0===a?0===i[a].start.row&&0===i[a].start.column||r.push(new o(0,0,i[a].start.row,i[a].start.column)):r.push(new o(i[a-1].end.row,i[a-1].end.column,i[a].start.row,i[a].start.column));for(t.exitMultiSelectMode(),t.clearSelection(),a=0;a<r.length;a++)t.selection.addRange(r[a],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:a("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/lang"),a=t("./lib/useragent"),s=t("./keyboard/textinput").TextInput,c=t("./mouse/mouse_handler").MouseHandler,l=t("./mouse/fold_handler").FoldHandler,u=t("./keyboard/keybinding").KeyBinding,h=t("./edit_session").EditSession,d=t("./search").Search,p=t("./range").Range,f=t("./lib/event_emitter").EventEmitter,g=t("./commands/command_manager").CommandManager,m=t("./commands/default_commands").commands,v=t("./config"),y=t("./token_iterator").TokenIterator,b=t("./clipboard"),_=function t(e,n,i){var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new g(a.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new l(this)),this.keyBinding=new u(this),this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall((function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",(function(t,e){e._$emitInputEvent.schedule(31)})),this.setSession(n||i&&i.session||new h("")),v.resetOptions(this),i&&this.setOptions(i),v._signal("editor",this)};_.$uid=0,(function(){i.implement(this,f),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(t){if(this.curOp){if(t&&!1===t.returnValue)return this.curOp=null;if(1==t&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var e=this.curOp.command,n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,i=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var r=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(e.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"==typeof t&&"ace"!=t){this.$keybindingId=t;var n=this;v.loadModule(["keybinding",t],(function(i){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(i&&i.handler),e&&e()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container).fontSize},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout((function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=e.findMatchingBracket(t.getCursorPosition());if(n)var i=new p(n.row,n.column,n.row,n.column+1);else e.$mode.getMatching&&(i=e.$mode.getMatching(t.session));i&&(e.$bracketHighlight=e.addMarker(i,"ace_bracket","text"))}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout((function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),i=new y(t.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,a=0,s=i.stepBackward();if("<"==s.value)do{s=r,(r=i.stepForward())&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(r&&a>=0);else{do{r=s,s=i.stepBackward(),r&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(s&&a<=0);i.stepForward()}if(!r)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var c=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),u=new p(c,l,c,l+r.value.length),h=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=h&&0!==u.compareRange(h.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(u,"ace_bracket","text"))}}}),50)}},this.focus=function(){var t=this;setTimeout((function(){t.isFocused()||t.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){this.renderer.updateLines(t.start.row,t.start.row==t.end.row?t.end.row:1/0,this.session.$useWrapMode),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column,i=e.end.column,r=t.getLine(e.start.row),o=r.substring(n,i);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),s=r.substring(n-1,i+1);if(a.test(s))return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText(),e=this.session.doc.getNewLineCharacter(),n=!1;if(!t&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),r=0;r<i.length;r++){var o=i[r];r&&i[r-1].start.row==o.start.row||(t+=this.session.getLine(o.start.row)+e)}}var a={text:t};return this._signal("copy",a),b.lineMode=n?a.text:"",a.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){this.commands.exec("paste",this,{text:t,event:e})},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text,n=e==b.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},e):this.insert(e);else if(n)this.selection.rangeList.ranges.forEach((function(t){i.insert({row:t.start.row,column:0},e)}));else{var r=e.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges;if(r.length!=o.length||!(2!=r.length||r[0]&&r[1]))return this.commands.exec("insertstring",this,e);for(var a=o.length;a--;){var s=o[a];s.isEmpty()||i.remove(s),i.insert(s.start,r[a])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=i.transformAction(n.getState(r.row),"insertion",this,n,t);o&&(t!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&-1==t.indexOf("\n")&&((a=new p.fromPoints(r,r)).end.column+=t.length,this.session.remove(a));else{var a=this.getSelectionRange();r=this.session.remove(a),this.clearSelection()}if("\n"==t||"\r\n"==t){var s=n.getLine(r.row);if(r.column>s.search(/\S|$/)){var c=s.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+c)}}this.clearSelection();var l=r.column,u=n.getState(r.row),h=(s=n.getLine(r.row),i.checkOutdent(u,s,t));if(n.insert(r,t),o&&o.selection&&this.selection.setSelectionRange(2==o.selection.length?new p(r.row,l+o.selection[0],r.row,l+o.selection[1]):new p(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3])),n.getDocument().isNewLine(t)){var d=i.getNextLineIndent(u,s.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},d)}h&&i.autoOutdent(u,n,r.row)},this.onTextInput=function(t,e){if(!e)return this.keyBinding.onTextInput(t);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,t,e);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(t,e){var n;(e.extendLeft||e.extendRight)&&((n=this.selection.getRange()).start.column-=e.extendLeft,n.end.column+=e.extendRight,this.selection.setRange(n),t||n.isEmpty()||this.remove()),!t&&this.selection.isEmpty()||this.insert(t,!0),(e.restoreStart||e.restoreEnd)&&((n=this.selection.getRange()).start.column-=e.restoreStart,n.end.column-=e.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(t,e,n){return this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(e.start.row),r=n.getMode().transformAction(i,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var a=n.getLine(e.end.row);/^\s+$/.test(a)&&(e.end.column=a.length)}}r&&(e=r)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,i,r=this.session.getLine(t.row);e<r.length?(n=r.charAt(e)+r.charAt(e-1),i=new p(t.row,e-1,t.row,e+1)):(n=r.charAt(e-1)+r.charAt(e-2),i=new p(t.row,e-2,t.row,e)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var n=t.getTextRange(e);if(!/^\s+$/.test(n))return u=this.$getSelectedRows(),void t.indentRows(u.first,u.last,"\t")}var i=t.getLine(e.start.row),r=e.start,a=t.getTabSize(),s=t.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var c=o.stringRepeat(" ",l=a-s%a);else{for(var l=s%a;" "==i[e.start.column-1]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();t.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],i=t.first;i<=t.last;i++)n.push(e.getLine(i));n.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}));var r=new p(0,0,0,0);for(i=t.first;i<=t.last;i++){var o=e.getLine(i);r.start.row=i,r.end.row=i,r.end.column=o.length,e.replace(r,n[i-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(t);n.lastIndex<e;){var r=n.exec(i);if(r.index<=e&&r.index+r[0].length>=e)return{value:r[0],start:r.index,end:r.index+r[0].length}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new p(e,n-1,e,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(e,n);if(o){var a=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,s=o.start+o.value.length-a,c=parseFloat(o.value);c*=Math.pow(10,s),c+=t*=a!==o.end&&n<a?Math.pow(10,o.end-n-1):Math.pow(10,o.end-n);var l=(c/=Math.pow(10,s)).toFixed(s),u=new p(e,o.start,e,o.end);this.session.replace(u,l),this.moveCursorTo(e,Math.max(o.start+1,n+l.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var t=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,r=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),a=e-i-1;a<0&&(a=0);var s=0,c=0,l=this;n.match(/[A-Za-z0-9_]+/)&&r.forEach((function(e,r){c=s+e.length,a>=s&&a<=c&&(n=e,l.selection.clearSelection(),l.moveCursorTo(t,s+i),l.selection.selectTo(t,c+i)),s=c}));for(var u,h=this.$toggleWordPairs,d=0;d<h.length;d++)for(var p=h[d],f=0;f<=1;f++){var g=+!f,m=n.match(new RegExp("^\\s?_?("+o.escapeRegExp(p[f])+")\\s?$","i"));m&&n.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(o.escapeRegExp(p[f]),"i"),(function(t){var e=p[g];return t.toUpperCase()==t?e=e.toUpperCase():t.charAt(0).toUpperCase()==t.charAt(0)&&(e=e.substr(0,0)+p[g].charAt(0).toUpperCase()+e.substr(1)),e})),this.insert(u),u="")}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),i=t.isBackwards();if(n.isEmpty()){var r=n.start.row;e.duplicateLines(r,r)}else{var o=i?n.start:n.end,a=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=a,t.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,e?0:t),e&&-1==t&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var a=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,c=0,l=a.length,u=0;u<l;u++){var h=u;a[u].moveBy(s,0);for(var d=(n=this.$getSelectedRows(a[u])).first,p=n.last;++u<l;){c&&a[u].moveBy(c,0);var f=this.$getSelectedRows(a[u]);if(e&&f.first!=p)break;if(!e&&f.first>p+1)break;p=f.last}for(u--,s=this.session.$moveLines(d,p,e?0:t),e&&-1==t&&(h=u+1);h<=u;)a[h].moveBy(s,0),h++;e||(s=0),c+=s}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(t)},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,i=this.renderer.layerConfig,r=t*Math.floor(i.height/i.lineHeight);!0===e?this.selection.$moveSelection((function(){this.moveCursorBy(r,0)})):!1===e&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection());var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,i){this.renderer.scrollToLine(t,e,n,i)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),i=new y(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var a,s,c=!1,l={},u=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!c;u++)if(h[o.value[u]])switch(s=h[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(l[s])&&(l[s]=0),o.value[u]){case"(":case"[":case"{":l[s]++;break;case")":case"]":case"}":l[s]--,-1===l[s]&&(a="bracket",c=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(l[o.value])&&(l[o.value]=0),"<"===r.value?l[o.value]++:"</"===r.value&&l[o.value]--,-1===l[o.value]&&(a="tag",c=!0));c||(r=o,o=i.stepForward(),u=0)}while(o&&!c);if(a){var d,f;if("bracket"===a)(d=this.session.getBracketRange(n))||(f=(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1)).start,(e||f.row===n.row&&Math.abs(f.column-n.column)<2)&&(d=this.session.getBracketRange(f)));else if("tag"===a){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(0===(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){c=!1;do{o=r,(r=i.stepBackward())&&(-1!==r.type.indexOf("tag-close")&&d.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?l[g]++:"</"===r.value&&l[g]--,0===l[g]&&(c=!0)))}while(r&&!c)}o&&o.type.indexOf("tag-name")&&(f=d.start).row==n.row&&Math.abs(f.column-n.column)<2&&(f=d.end)}(f=d&&d.cursor||f)&&(t?d&&e?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,t)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&i++;return this.selection.setSelectionRange(r),i},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return null!==(e=this.$search.replace(n,e))?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&i.mixin(e,t);var r=this.selection.getRange();null==e.needle&&((t=this.session.getTextRange(r)||this.$search.$options.needle)||(r=this.session.getWordRange(r.start.row,r.start.column),t=this.session.getTextRange(r)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:r});var o=this.$search.find(this.session);return e.preventScroll?o:o?(this.revealRange(o,n),o):(e.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.session.unfold(t),this.selection.setSelectionRange(t);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",(function(){i=!0})),a=this.renderer.on("beforeRender",(function(){i&&(e=n.renderer.container.getBoundingClientRect())})),s=this.renderer.on("afterRender",(function(){if(i&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,a=t.layerConfig,s=o.top-a.offset;null!=(i=o.top>=0&&s+e.top<0||!(o.top<a.height&&o.top+e.top+a.lineHeight>window.innerHeight)&&null)&&(r.style.top=s+"px",r.style.left=o.left+"px",r.style.height=a.lineHeight+"px",r.scrollIntoView(i)),i=e=null}}));this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",s),this.renderer.off("beforeRender",a))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,r.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))},this.prompt=function(t,e,n){var i=this;v.loadModule("./ext/prompt",(function(r){r.prompt(i,t,e,n)}))}}).call(_.prototype),v.defineOptions(_.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.textInput.setReadOnly(t),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(t){this.textInput.setCopyWithEmptySelection(t)},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(t){this.session.setValue(t)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(t){this.setSession(t)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(t){this.renderer.$gutterLayer.setShowLineNumbers(t),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),t&&this.$relativeLineNumbers?C.attach(this):C.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(t){this.$showLineNumbers&&t?C.attach(this):C.detach(this)}},placeholder:{set:function(t){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var t=this.renderer.$composition||this.getValue();if(t&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),r.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!t&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),r.addCssClass(this.container,"ace_hasPlaceholder");var e=r.createElement("div");e.className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode)}}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var C={getText:function(t,e){return(Math.abs(t.selection.lead.row-e)||e+1+(e<9?"\xb7":""))+""},getWidth:function(t,e,n){return Math.max(e.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(t,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(t){t.renderer.$gutterLayer.$renderer=this,t.on("changeSelection",this.update),this.update(null,t)},detach:function(t){t.renderer.$gutterLayer.$renderer==this&&(t.renderer.$gutterLayer.$renderer=null),t.off("changeSelection",this.update),this.update(null,t)}};e.Editor=_})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(t){this.$session=t},this.add=function(t,e,n){this.$fromUndo||t!=this.$lastDelta&&(!1!==e&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),t.id=this.$rev=++this.$maxRev),"remove"!=t.action&&"insert"!=t.action||(this.$lastDelta=t),this.lastDeltas.push(t))},this.addSelection=function(t,e){this.selections.push({value:t,rev:e||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var r=n[i][0];if(r.id<=t)break;r.id<e&&(r.ignore=!0)}this.lastDeltas=null},this.getSelection=function(t,e){for(var n=this.selections,i=n.length;i--;){var r=n[i];if(r.rev<t)return e&&(r=n[i+1]),r}},this.getRevision=function(){return this.$rev},this.getDeltas=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=null,r=0,o=n.length;o--;){var a=n[o][0];if(a.id<e&&!i&&(i=o+1),a.id<=t){r=o+1;break}}return n.slice(r,i)},this.getChangedRanges=function(t,e){null==e&&(e=this.$rev+1)},this.getChangedLines=function(t,e){null==e&&(e=this.$rev+1)},this.undo=function(t,e){this.lastDeltas=null;var n=this.$undoStack;if(function(t,e){for(var n=e;n--;){var i=t[n];if(i&&!i[0].ignore){for(;n<e-1;){var r=u(t[n],t[n+1]);t[n]=r[0],t[n+1]=r[1],n++}return!0}}}(n,n.length)){t||(t=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),r=null;return i&&i.length&&(r=t.undoChanges(i,e),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r}},this.redo=function(t,e){if(this.lastDeltas=null,t||(t=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(t,e){for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)g(t,i[r])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(t){t[0].id=++this.$maxRev}),this)}var i=this.$redoStack.pop(),r=null;return i&&(r=t.redoChanges(i,e),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r},this.$syncRev=function(){var t=this.$undoStack,e=t[t.length-1],n=e&&e[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(t){null==t&&(t=this.$rev),this.mark=t},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(t){return t?s(t):s(this.$undoStack)+"\n---\n"+s(this.$redoStack)}}).call(i.prototype);var r=t("./range").Range,o=r.comparePoints;function a(t){return{row:t.row,column:t.column}}function s(t){if(t=t||this,Array.isArray(t))return t.map(s).join("\n");var e="";return t.action?(e="insert"==t.action?"+":"-",e+="["+t.lines+"]"):t.value&&(e=Array.isArray(t.value)?t.value.map(c).join("\n"):c(t.value)),t.start&&(e+=c(t)),(t.id||t.rev)&&(e+="\t("+(t.id||t.rev)+")"),e}function c(t){return t.start.row+":"+t.start.column+"=>"+t.end.row+":"+t.end.column}function l(t,e){var n="insert"==t.action,i="insert"==e.action;if(n&&i)if(o(e.start,t.end)>=0)d(e,t,-1);else{if(!(o(e.start,t.start)<=0))return null;d(t,e,1)}else if(n&&!i)if(o(e.start,t.end)>=0)d(e,t,-1);else{if(!(o(e.end,t.start)<=0))return null;d(t,e,-1)}else if(!n&&i)if(o(e.start,t.start)>=0)d(e,t,1);else{if(!(o(e.start,t.start)<=0))return null;d(t,e,1)}else if(!n&&!i)if(o(e.start,t.start)>=0)d(e,t,1);else{if(!(o(e.end,t.start)<=0))return null;d(t,e,-1)}return[e,t]}function u(t,e){for(var n=t.length;n--;)for(var i=0;i<e.length;i++)if(!l(t[n],e[i])){for(;n<t.length;){for(;i--;)l(e[i],t[n]);i=e.length,n++}return[t,e]}return t.selectionBefore=e.selectionBefore=t.selectionAfter=e.selectionAfter=null,[e,t]}function h(t,e){var n="insert"==t.action,i="insert"==e.action;if(n&&i)o(t.start,e.start)<0?d(e,t,1):d(t,e,1);else if(n&&!i)o(t.start,e.end)>=0?d(t,e,-1):(o(t.start,e.start)<=0||d(t,r.fromPoints(e.start,t.start),-1),d(e,t,1));else if(!n&&i)o(e.start,t.end)>=0?d(e,t,-1):(o(e.start,t.start)<=0||d(e,r.fromPoints(t.start,e.start),-1),d(t,e,1));else if(!n&&!i)if(o(e.start,t.end)>=0)d(e,t,-1);else{var a,s;if(!(o(e.end,t.start)<=0))return o(t.start,e.start)<0&&(a=t,t=f(t,e.start)),o(t.end,e.end)>0&&(s=f(t,e.end)),p(e.end,t.start,t.end,-1),s&&!a&&(t.lines=s.lines,t.start=s.start,t.end=s.end,s=t),[e,a,s].filter(Boolean);d(t,e,-1)}return[e,t]}function d(t,e,n){p(t.start,e.start,e.end,n),p(t.end,e.start,e.end,n)}function p(t,e,n,i){t.row==(1==i?e:n).row&&(t.column+=i*(n.column-e.column)),t.row+=i*(n.row-e.row)}function f(t,e){var n=t.lines,i=t.end;t.end=a(e);var r=t.end.row-t.start.row,o=n.splice(r,n.length),s=r?e.column:e.column-t.start.column;return n.push(o[0].substring(0,s)),o[0]=o[0].substr(s),{start:a(e),end:i,lines:o,action:t.action}}function g(t,e){e=function(t){return{start:a(t.start),end:a(t.end),action:t.action,lines:t.lines.slice()}}(e);for(var n=t.length;n--;){for(var i=t[n],r=0;r<i.length;r++){var o=h(i[r],e);e=o[0],2!=o.length&&(o[2]?(i.splice(r+1,1,o[1],o[2]),r++):o[1]||(i.splice(r,1),r--))}i.length||t.splice(n,1)}return t}e.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=function(t,e){this.element=t,this.canvasHeight=e||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(t){i.translate(this.element,0,-t.firstRowScreen*t.lineHeight%this.canvasHeight-t.offset*this.$offsetCoefficient)},this.pageChanged=function(t,e){return Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)!==Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)},this.computeLineTop=function(t,e,n){var i=Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight);return n.documentToScreenRow(t,0)*e.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(t,e,n){return e.lineHeight*n.getRowLength(t)},this.getLength=function(){return this.cells.length},this.get=function(t){return this.cells[t]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(t){if(Array.isArray(t)){this.cells.push.apply(this.cells,t);for(var e=i.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.appendChild(e)}else this.cells.push(t),this.element.appendChild(t.element)},this.unshift=function(t){if(Array.isArray(t)){this.cells.unshift.apply(this.cells,t);for(var e=i.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.firstChild?this.element.insertBefore(e,this.element.firstChild):this.element.appendChild(e)}else this.cells.unshift(t),this.element.insertAdjacentElement("afterbegin",t.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(t){t&&(t.element.remove(),this.cellCache.push(t))},this.createCell=function(t,e,n,r){var o=this.cellCache.pop();if(!o){var a=i.createElement("div");r&&r(a),this.element.appendChild(a),o={element:a,text:"",row:t}}return o.row=t,o}}).call(r.prototype),e.Lines=r})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/lang"),a=t("../lib/event_emitter").EventEmitter,s=t("./lines").Lines,c=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new s(this.element),this.$lines.$offsetCoefficient=1};function l(t){var e=document.createTextNode("");t.appendChild(e);var n=i.createElement("span");return t.appendChild(n),t}(function(){r.implement(this,a),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var a=n.text;a=a?o.escapeHTML(a):n.html||"",-1===r.text.indexOf(a)&&r.text.push(a);var s=n.type;"error"==s?r.className=" ace_error":"warning"==s&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=s||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var i=new Array(n+1);i.unshift(e,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(t){this.config=t;var e=this.session,n=t.firstRow,i=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1);this.oldLastRow=i,this.config=t,this.$lines.moveContainer(t),this.$updateCursorRow();for(var r=e.getNextFoldLine(n),o=r?r.start.row:1/0,a=null,s=-1,c=n;;){if(c>o&&(o=(r=e.getNextFoldLine(c=r.end.row+1,r))?r.start.row:1/0),c>i){for(;this.$lines.getLength()>s+1;)this.$lines.pop();break}(a=this.$lines.get(++s))?a.row=c:(a=this.$lines.createCell(c,t,this.session,l),this.$lines.push(a)),this.$renderCell(a,t,r,c),c++}this._signal("afterRender"),this.$updateGutterWidth(t)},this.$updateGutterWidth=function(t){var e=this.session,n=e.gutterRenderer||this.$renderer,i=e.$firstLineNumber,r=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||e.$useWrapMode)&&(r=e.getLength()+i-1);var o=n?n.getWidth(e,r,t):r.toString().length*t.characterWidth,a=this.$padding||this.$computePadding();(o+=a.left+a.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var t=this.session.selection.getCursor();this.$cursorRow!==t.row&&(this.$cursorRow=t.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var t=this.session.selection.cursor.row;if(this.$cursorRow=t,!this.$cursorCell||this.$cursorCell.row!=t){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var e=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<e.length;n++){var i=e[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var r=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&r&&r.start.row==e[n-1].row))break;i=e[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$updateCursorRow(),this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=Math.min(t.lastRow+t.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!e||i<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var r=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);r>0;r--)this.$lines.shift();if(i>n)for(r=this.session.getFoldedRowCount(n+1,i);r>0;r--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLines(t,t.firstRow,e.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(t,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(t)},this.$renderLines=function(t,e,n){for(var i=[],r=e,o=this.session.getNextFoldLine(r),a=o?o.start.row:1/0;r>a&&(a=(o=this.session.getNextFoldLine(r=o.end.row+1,o))?o.start.row:1/0),!(r>n);){var s=this.$lines.createCell(r,t,this.session,l);this.$renderCell(s,t,o,r),i.push(s),r++}return i},this.$renderCell=function(t,e,n,r){var o=t.element,a=this.session,s=o.childNodes[0],c=o.childNodes[1],l=a.$firstLineNumber,u=a.$breakpoints,h=a.$decorations,d=a.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&a.foldWidgets,f=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(r==this.$cursorRow||n&&r<this.$cursorRow&&r>=f&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=t&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=t)),u[r]&&(g+=u[r]),h[r]&&(g+=h[r]),this.$annotations[r]&&(g+=this.$annotations[r].className),o.className!=g&&(o.className=g),p){var m=p[r];null==m&&(m=p[r]=a.getFoldWidget(r))}m?(g="ace_fold-widget ace_"+m,c.className!=(g+="start"==m&&r==f&&r<n.end.row?" ace_closed":" ace_open")&&(c.className=g),i.setStyle(c.style,"height",e.lineHeight+"px"),i.setStyle(c.style,"display","inline-block")):c&&i.setStyle(c.style,"display","none");var v=(d?d.getText(a,r):r+l).toString();return v!==s.data&&(s.data=v),i.setStyle(t.element.style,"height",this.$lines.computeLineHeight(r,e,a)+"px"),i.setStyle(t.element.style,"top",this.$lines.computeLineTop(r,e,a)+"px"),t.text=v,t},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(t){this.$highlightGutterLine=t},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(t.borderLeftWidth)||0)+(parseInt(t.paddingLeft)||0)+1,this.$padding.right=(parseInt(t.borderRightWidth)||0)+(parseInt(t.paddingRight)||0),this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(c.prototype),e.Gutter=c})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../range").Range,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.elt=function(t,e){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=e,n.className=t},this.update=function(t){if(t){var e;for(var n in this.config=t,this.i=0,this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(t.firstRow,t.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,t);i.renderer(e,r,this.$padding+r.start.column*t.characterWidth,o,t)}else"fullLine"==i.type?this.drawFullLineMarker(e,r,i.clazz,t):"screenLine"==i.type?this.drawScreenLineMarker(e,r,i.clazz,t):r.isMultiLine()?"text"==i.type?this.drawTextMarker(e,r,i.clazz,t):this.drawMultiLineMarker(e,r,i.clazz,t):this.drawSingleLineMarker(e,r,i.clazz+" ace_start ace_br15",t)}else i.update(e,this,this.session,t)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(t,e,n,r,o){for(var a=this.session,s=e.start.row,c=e.end.row,l=s,u=0,h=0,d=a.getScreenLastRowColumn(l),p=new i(l,e.start.column,l,h);l<=c;l++)p.start.row=p.end.row=l,p.start.column=l==s?e.start.column:a.getRowWrapIndent(l),p.end.column=d,u=h,h=d,d=l+1<c?a.getScreenLastRowColumn(l+1):l==c?0:e.end.column,this.drawSingleLineMarker(t,p,n+(l==s?" ace_start":"")+" ace_br"+((l==s||l==s+1&&e.start.column?1:0)|(u<h?2:0)|(h>d?4:0)|(l==c?8:0)),r,l==c?0:1,o)},this.drawMultiLineMarker=function(t,e,n,i,r){var o,a=this.$padding,s=i.lineHeight,c=this.$getTop(e.start.row,i),l=a+e.start.column*i.characterWidth;if(r=r||"",this.session.$bidiHandler.isBidiRow(e.start.row)?((o=e.clone()).end.row=o.start.row,o.end.column=this.session.getLine(o.start.row).length,this.drawBidiSingleLineMarker(t,o,n+" ace_br1 ace_start",i,null,r)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+c+"px;left:"+l+"px;"+(r||"")),this.session.$bidiHandler.isBidiRow(e.end.row)?((o=e.clone()).start.row=o.end.row,o.start.column=0,this.drawBidiSingleLineMarker(t,o,n+" ace_br12",i,null,r)):(c=this.$getTop(e.end.row,i),this.elt(n+" ace_br12","height:"+s+"px;width:"+e.end.column*i.characterWidth+"px;top:"+c+"px;left:"+a+"px;"+(r||""))),!((s=(e.end.row-e.start.row-1)*i.lineHeight)<=0)){c=this.$getTop(e.start.row+1,i);var u=(e.start.column?1:0)|(e.end.column?0:8);this.elt(n+(u?" ace_br"+u:""),"height:"+s+"px;right:0;top:"+c+"px;left:"+a+"px;"+(r||""))}},this.drawSingleLineMarker=function(t,e,n,i,r,o){if(this.session.$bidiHandler.isBidiRow(e.start.row))return this.drawBidiSingleLineMarker(t,e,n,i,r,o);var a=i.lineHeight,s=(e.end.column+(r||0)-e.start.column)*i.characterWidth,c=this.$getTop(e.start.row,i);this.elt(n,"height:"+a+"px;width:"+s+"px;top:"+c+"px;left:"+(this.$padding+e.start.column*i.characterWidth)+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(t,e,n,i,r,o){var a=i.lineHeight,s=this.$getTop(e.start.row,i),c=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach((function(t){this.elt(n,"height:"+a+"px;width:"+t.width+(r||0)+"px;top:"+s+"px;left:"+(c+t.left)+"px;"+(o||""))}),this)},this.drawFullLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),a=i.lineHeight;e.start.row!=e.end.row&&(a+=this.$getTop(e.end.row,i)-o),this.elt(n,"height:"+a+"px;top:"+o+"px;left:0;right:0;"+(r||""))},this.drawScreenLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i);this.elt(n,"height:"+i.lineHeight+"px;top:"+o+"px;left:0;right:0;"+(r||""))}}).call(o.prototype),e.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),a=t("./lines").Lines,s=t("../lib/event_emitter").EventEmitter,c=function(t){this.dom=r,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)};(function(){i.implement(this,s),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,e="\n"==t.getNewLineCharacter()&&"windows"!=t.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",(function(t){this._signal("changeCharacterSize",t)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++)this.showInvisibles?((i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=o.stringRepeat(this.TAB_CHAR,n),e.push(i)):e.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,r="ace_indent-guide",a="",s="";if(this.showInvisibles){r+=" ace_invisible",a=" ace_invisible_space",s=" ace_invisible_tab";var c=o.stringRepeat(this.SPACE_CHAR,this.tabSize),l=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else l=c=o.stringRepeat(" ",this.tabSize);(i=this.dom.createElement("span")).className=r+a,i.textContent=c,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=r+s,i.textContent=l,this.$tabStrings["\t"]=i}},this.updateLines=function(t,e,n){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var i=Math.max(e,t.firstRow),r=Math.min(n,t.lastRow),o=this.element.childNodes,a=0,s=t.firstRow;s<i;s++){if(c=this.session.getFoldLine(s)){if(c.containsRow(i)){i=c.start.row;break}s=c.end.row}a++}for(var c,l=!1,u=(c=this.session.getNextFoldLine(s=i))?c.start.row:1/0;s>u&&(u=(c=this.session.getNextFoldLine(s=c.end.row+1,c))?c.start.row:1/0),!(s>r);){var h=o[a++];if(h){this.dom.removeChildren(h),this.$renderLine(h,s,s==u&&c),l&&(h.style.top=this.$lines.computeLineTop(s,t,this.session)+"px");var d=t.lineHeight*this.session.getRowLength(s)+"px";h.style.height!=d&&(l=!0,h.style.height=d)}s++}if(l)for(;a<this.$lines.cells.length;){var p=this.$lines.cells[a++];p.element.style.top=this.$lines.computeLineTop(p.row,t,this.session)+"px"}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=t.lastRow;if(!e||(e?e.lastRow:-1)<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);i>0;i--)this.$lines.shift();if(e.lastRow>t.lastRow)for(i=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);i>0;i--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,e.firstRow-1)),t.lastRow>e.lastRow&&this.$lines.push(this.$renderLinesFragment(t,e.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,e,n){for(var i=[],o=e,a=this.session.getNextFoldLine(o),s=a?a.start.row:1/0;o>s&&(s=(a=this.session.getNextFoldLine(o=a.end.row+1,a))?a.start.row:1/0),!(o>n);){var c=this.$lines.createCell(o,t,this.session),l=c.element;this.dom.removeChildren(l),r.setStyle(l.style,"height",this.$lines.computeLineHeight(o,t,this.session)+"px"),r.setStyle(l.style,"top",this.$lines.computeLineTop(o,t,this.session)+"px"),this.$renderLine(l,o,o==s&&a),l.className=this.$useLineGroups()?"ace_line_group":"ace_line",i.push(c),o++}return i},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var e=t.firstRow,n=t.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(t,e,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,i){for(var r,a=this,s=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,c=this.dom.createFragment(this.element),l=0;r=s.exec(i);){var u=r[1],h=r[2],d=r[3],p=r[4],f=r[5];if(a.showInvisibles||!h){var g=l!=r.index?i.slice(l,r.index):"";if(l=r.index+r[0].length,g&&c.appendChild(this.dom.createTextNode(g,this.element)),u){var m=a.session.getScreenTabSize(e+r.index);c.appendChild(a.$tabStrings[m].cloneNode(!0)),e+=m-1}else h?a.showInvisibles?((y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",y.textContent=o.stringRepeat(a.SPACE_CHAR,h.length),c.appendChild(y)):c.appendChild(this.com.createTextNode(h,this.element)):d?((y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",y.textContent=o.stringRepeat(a.SPACE_CHAR,d.length),c.appendChild(y)):p?(e+=1,(y=this.dom.createElement("span")).style.width=2*a.config.characterWidth+"px",y.className=a.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",y.textContent=a.showInvisibles?a.SPACE_CHAR:p,c.appendChild(y)):f&&(e+=1,(y=this.dom.createElement("span")).style.width=2*a.config.characterWidth+"px",y.className="ace_cjk",y.textContent=f,c.appendChild(y))}}if(c.appendChild(this.dom.createTextNode(l?i.slice(l):i,this.element)),this.$textToken[n.type])t.appendChild(c);else{var v="ace_"+n.type.replace(/\./g," ace_"),y=this.dom.createElement("span");"fold"==n.type&&(y.style.width=n.value.length*this.config.characterWidth+"px"),y.className=v,y.appendChild(c),t.appendChild(y)}return e+i.length},this.renderIndentGuide=function(t,e,n){var i=e.search(this.$indentGuideRe);if(i<=0||i>=n)return e;if(" "==e[0]){for(var r=(i-=i%this.tabSize)/this.tabSize,o=0;o<r;o++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return e.substr(i)}if("\t"==e[0]){for(o=0;o<i;o++)t.appendChild(this.$tabStrings["\t"].cloneNode(!0));return e.substr(i)}return e},this.$createLineElement=function(t){var e=this.dom.createElement("div");return e.className="ace_line",e.style.height=this.config.lineHeight+"px",e},this.$renderWrappedLine=function(t,e,n){var i=0,r=0,a=n[0],s=0,c=this.$createLineElement();t.appendChild(c);for(var l=0;l<e.length;l++){var u=e[l],h=u.value;if(0==l&&this.displayIndentGuides){if(i=h.length,!(h=this.renderIndentGuide(c,h,a)))continue;i-=h.length}if(i+h.length<a)s=this.$renderToken(c,s,u,h),i+=h.length;else{for(;i+h.length>=a;)s=this.$renderToken(c,s,u,h.substring(0,a-i)),h=h.substring(a-i),i=a,c=this.$createLineElement(),t.appendChild(c),c.appendChild(this.dom.createTextNode(o.stringRepeat("\xa0",n.indent),this.element)),s=0,a=n[++r]||Number.MAX_VALUE;0!=h.length&&(i+=h.length,s=this.$renderToken(c,s,u,h))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(c,s,null,"",!0)},this.$renderSimpleLine=function(t,e){var n=0,i=e[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(t,r)),r&&(n=this.$renderToken(t,n,i,r));for(var o=1;o<e.length;o++){if(n+(r=(i=e[o]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,n,i,r);n=this.$renderToken(t,n,i,r)}},this.$renderOverflowMessage=function(t,e,n,i,r){n&&this.$renderToken(t,e,n,i.slice(0,this.MAX_LINE_LENGTH-e));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=r?"<hide>":"<click to see more...>",t.appendChild(o)},this.$renderLine=function(t,e,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var i=this.$getFoldLineTokens(e,n);else i=this.session.getTokens(e);var r=t;if(i.length){var o=this.session.getRowSplitData(e);o&&o.length?(this.$renderWrappedLine(t,i,o),r=t.lastChild):(r=t,this.$useLineGroups()&&(r=this.$createLineElement(),t.appendChild(r)),this.$renderSimpleLine(r,i))}else this.$useLineGroups()&&(r=this.$createLineElement(),t.appendChild(r));if(this.showInvisibles&&r){n&&(e=n.end.row);var a=this.dom.createElement("span");a.className="ace_invisible ace_invisible_eol",a.textContent=e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,r.appendChild(a)}},this.$getFoldLineTokens=function(t,e){var n=this.session,i=[],r=n.getTokens(t);return e.walk((function(t,e,o,a,s){null!=t?i.push({type:"fold",value:t}):(s&&(r=n.getTokens(e)),r.length&&function(t,e,n){for(var r=0,o=0;o+t[r].value.length<e;)if(o+=t[r].value.length,++r==t.length)return;for(o!=e&&((a=t[r].value.substring(e-o)).length>n-e&&(a=a.substring(0,n-e)),i.push({type:t[r].type,value:a}),o=e+a.length,r+=1);o<n&&r<t.length;){var a;i.push((a=t[r].value).length+o>n?{type:t[r].type,value:a.substring(0,n-o)}:t[r]),o+=a.length,r+=1}}(r,a,o))}),e.end.row,this.session.getLine(e.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(c.prototype),e.Text=c})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)i.setStyle(e[n].style,"opacity",t?"":"0")},this.$startCssAnimation=function(){for(var t=this.cursors,e=t.length;e--;)t[e].style.animationDuration=this.blinkInterval+"ms";setTimeout((function(){i.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){i.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t!=this.smoothBlinking&&(this.smoothBlinking=t,i.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var t=i.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout((function(){i.addCssClass(this.element,"ace_smooth-blinking")}).bind(this)),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var e=(function(){this.timeoutId=setTimeout((function(){t(!1)}),.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval((function(){t(!0),e()}),this.blinkInterval),e()}else this.$stopCssAnimation()},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(t,e){return t.top>=0&&t.top<e.maxHeight},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,r=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]),n=0;for(var o=e.length;n<o;n++){var a=this.getPixelPosition(e[n].cursor,!0);if(!((a.top>t.height+t.offset||a.top<0)&&n>1)){var s=this.cursors[r++]||this.addCursor(),c=s.style;this.drawCursor?this.drawCursor(s,a,t,e[n],this.session):this.isCursorInView(a,t)?(i.setStyle(c,"display","block"),i.translate(s,a.left,a.top),i.setStyle(c,"width",Math.round(t.characterWidth)+"px"),i.setStyle(c,"height",t.lineHeight+"px")):i.setStyle(c,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var l=this.session.getOverwrite();this.$setOverwrite(l),this.$pixelPos=a,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(r.prototype),e.Cursor=r})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/event"),a=t("./lib/event_emitter").EventEmitter,s=32768,c=function(t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,a),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(c.prototype);var l=function(t,e){c.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=r.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(l,c),(function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>s?(this.coeff=s/t,t=s):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}).call(l.prototype);var u=function(t,e){c.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(u,c),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}).call(u.prototype),e.ScrollBar=l,e.ScrollBarV=l,e.ScrollBarH=u,e.VScrollBar=l,e.HScrollBar=u})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(t,e,n){"use strict";var i=t("./lib/event"),r=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=e||window;var n=this;this._flush=function(t){n.pending=!1;var e=n.changes;if(e&&(i.blockIdle(100),n.changes=0,n.onRender(e)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(t){this.changes=this.changes|t,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},this.clear=function(t){var e=this.changes;return this.changes=0,e}}).call(r.prototype),e.RenderLoop=r})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(t,e,n){var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),a=t("../lib/event"),s=t("../lib/useragent"),c=t("../lib/event_emitter").EventEmitter,l=256,u="function"==typeof ResizeObserver,h=200,d=e.FontMetrics=function(t){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),this.$measureNode.innerHTML=o.stringRepeat("X",l),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,c),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",s.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(t){if(void 0===t&&(t=this.$measureSizes()),t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver((function(e){var n=e[0].contentRect;t.checkForSizeChanges({height:n.height,width:n.width/l})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=a.onIdle((function e(){t.checkForSizeChanges(),a.onIdle(e,500)}),500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(t){var e={height:(t||this.$measureNode).clientHeight,width:(t||this.$measureNode).clientWidth/l};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=o.stringRepeat(t,l),this.$main.getBoundingClientRect().width/l},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function t(e){return e?(window.getComputedStyle(e).zoom||1)*t(e.parentElement):1},this.$initTransformMeasureNodes=function(){var t=function(t,e){return["div",{style:"position: absolute;top:"+t+"px;left:"+e+"px;"}]};this.els=r.buildDom([t(0,0),t(h,0),t(0,h),t(h,h)],this.el)},this.transformCoordinates=function(t,e){function n(t,e,n){var i=t[1]*e[0]-t[0]*e[1];return[(-e[1]*n[0]+e[0]*n[1])/i,(+t[1]*n[0]-t[0]*n[1])/i]}function i(t,e){return[t[0]-e[0],t[1]-e[1]]}function r(t,e){return[t[0]+e[0],t[1]+e[1]]}function o(t,e){return[t*e[0],t*e[1]]}function a(t){var e=t.getBoundingClientRect();return[e.left,e.top]}t&&(t=o(1/this.$getZoom(this.el),t)),this.els||this.$initTransformMeasureNodes();var s=a(this.els[0]),c=a(this.els[1]),l=a(this.els[2]),u=a(this.els[3]),d=n(i(u,c),i(u,l),i(r(c,l),r(u,s))),p=o(1+d[0],i(c,s)),f=o(1+d[1],i(l,s));if(e){var g=e,m=d[0]*g[0]/h+d[1]*g[1]/h+1,v=r(o(g[0],p),o(g[1],f));return r(o(1/m/h,v),s)}var y=i(t,s),b=n(i(p,o(d[0],y)),i(f,o(d[1],y)),y);return o(h,b)}}).call(d.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./config"),a=t("./layer/gutter").Gutter,s=t("./layer/marker").Marker,c=t("./layer/text").Text,l=t("./layer/cursor").Cursor,u=t("./scrollbar").HScrollBar,h=t("./scrollbar").VScrollBar,d=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,f=t("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);opacity: 0.7;transform-origin: left;text-indent: 10px;}',m=t("./lib/useragent"),v=m.isIE;r.importCssString(g,"ace_editor.css");var y=function(t,e){var n=this;this.container=t||r.createElement("div"),r.addCssClass(this.container,"ace_editor"),r.HI_DPI&&r.addCssClass(this.container,"ace_hidpi"),this.setTheme(e),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var i=this.$textLayer=new c(this.content);this.canvas=i.element,this.$markerFront=new s(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener("scroll",(function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,f),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),r.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(t,e,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,i){var o=0,a=this.$size,s={width:a.width,height:a.height,scrollerHeight:a.scrollerHeight,scrollerWidth:a.scrollerWidth};if((i-=this.$extraHeight||0)&&(t||a.height!=i)&&(a.height=i,o|=this.CHANGE_SIZE,a.scrollerHeight=a.height,this.$horizScroll&&(a.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),n&&(t||a.width!=n)){o|=this.CHANGE_SIZE,a.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,r.setStyle(this.scrollBarH.element.style,"left",e+"px"),r.setStyle(this.scroller.style,"left",e+this.margin.left+"px"),a.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()-this.margin.h),r.setStyle(this.$gutter.style,"left",this.margin.left+"px");var c=this.scrollBarV.getWidth()+"px";r.setStyle(this.scrollBarH.element.style,"right",c),r.setStyle(this.scroller.style,"right",c),r.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(o|=this.CHANGE_FULL)}return a.$dirty=!n||!i,o&&this._signal("resize",s),o},this.onGutterResize=function(t){var e=this.$showGutter?t:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var t=Math.floor((this.$size.scrollerWidth-2*this.$padding)/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=r.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var t=this.textarea.style,e=this.$composition;if(this.$keepTextAreaAtCursor||e){var n=this.$cursorLayer.$pixelPos;if(n){e&&e.markerRange&&(n=this.$cursorLayer.getPixelPosition(e.markerRange.start,!0));var i=this.layerConfig,o=n.top,a=n.left,s=e&&e.useTextareaForIME?this.lineHeight:v?0:1;if((o-=i.offset)<0||o>i.height-s)r.translate(this.textarea,0,0);else{var c=1,l=this.$size.height-s;e?e.useTextareaForIME?c=this.characterWidth*this.session.$getStringScreenWidth(this.textarea.value)[0]:o+=this.lineHeight+2:o+=this.lineHeight,(a-=this.scrollLeft)>this.$size.scrollerWidth-c&&(a=this.$size.scrollerWidth-c),a+=this.gutterWidth+this.margin.left,r.setStyle(t,"height",s+"px"),r.setStyle(t,"width",c+"px"),r.translate(this.textarea,Math.min(a,this.$size.scrollerWidth-c),Math.min(o,l))}}}else r.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,i){var r=this.scrollMargin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.setMargin=function(t,e,n,i){var r=this.margin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>(t-=(e-this.lineHeight)*this.$scrollPastEnd)-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(t||e)){if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),r.translate(this.content,-this.scrollLeft,-n.offset);var o=n.minHeight+"px";r.setStyle(this.content.style,"width",n.width+2*this.$padding+"px"),r.setStyle(this.content.style,"height",o)}if(t&this.CHANGE_H_SCROLL&&(r.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender");if(t&this.CHANGE_SCROLL)return this.$changedLines=null,t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(t&this.CHANGE_GUTTER||t&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender");t&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):t&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender")}else this.$changes|=t},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,r=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-r-2*this.$padding<0),a=this.$horizScroll!==o;a&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var s=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var c=e.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,i-e.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,r+2*this.$padding-e.scrollerWidth+u.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-i+l<0||this.scrollTop>u.top),d=s!==h;d&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var p,f,g=this.scrollTop%this.lineHeight,m=Math.ceil(c/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),y=v+m,b=this.lineHeight;v=t.screenToDocumentRow(v,0);var _=t.getFoldLine(v);_&&(v=_.start.row),p=t.documentToScreenRow(v,0),f=t.getRowLength(v)*b,y=Math.min(t.screenToDocumentRow(y,0),t.getLength()-1),c=e.scrollerHeight+t.getRowLength(y)*b+f,g=this.scrollTop-p*b;var C=0;return(this.layerConfig.width!=r||a)&&(C=this.CHANGE_H_SCROLL),(a||d)&&(C|=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),d&&(r=this.$getLongestLine())),this.layerConfig={width:r,padding:this.$padding,firstRow:v,firstRowScreen:p,lastRow:y,lineHeight:b,characterWidth:this.characterWidth,minHeight:c,maxHeight:i,offset:g,gutterOffset:b?Math.max(0,Math.ceil((g+e.height-e.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(r-this.$padding),C},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1||e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),this.$textLayer&&t>this.$textLayer.MAX_LINE_LENGTH&&(t=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(t),r=i.left,o=i.top,a=n&&n.top||0,s=n&&n.bottom||0,c=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;c+a>o?(e&&c+a>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):c+this.$size.scrollerHeight-s<o+this.lineHeight&&(e&&c+this.$size.scrollerHeight-s<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+s-this.$size.scrollerHeight));var l=this.scrollLeft;l>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):l+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&r-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t).top-(this.$size.scrollerHeight-this.lineHeight)*(e||0);return this.session.setScrollTop(n),n},this.STEPS=8,this.$calcSteps=function(t,e){var n,i=0,r=this.STEPS,o=[];for(i=0;i<r;++i)o.push((n=t,(e-t)*(Math.pow(i/this.STEPS-1,3)+1)+n));return o},this.scrollToLine=function(t,e,n,i){var r=this.$cursorLayer.getPixelPosition({row:t,column:0}).top;e&&(r-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(r),!1!==n&&this.animateScrolling(o,i)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(t!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(t=r[0])==n)return}var o=i.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,e&&e())}),10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([t,e]);t=i[1]-this.gutterWidth-this.margin.left,e=i[0]}else n=this.scroller.getBoundingClientRect();var r=t+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,a=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),s=this.$blockCursor?Math.floor(o):Math.round(o);return{row:a,column:s,side:o-s>0?1:-1,offsetX:r}},this.screenToTextCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([t,e]);t=i[1]-this.gutterWidth-this.margin.left,e=i[0]}else n=this.scroller.getBoundingClientRect();var r=t+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,a=this.$blockCursor?Math.floor(o):Math.round(o),s=Math.floor((e+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(s,Math.max(a,0),r)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(t,e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,t)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth));return{pageX:n.left+r-this.scrollLeft,pageY:n.top+i.row*this.lineHeight-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition=t,t.cssText||(t.cssText=this.textarea.style.cssText),t.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):t.markerId=this.session.addMarker(t.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(t){var e=this.session.selection.cursor;this.addToken(t,"composition_placeholder",e.row,e.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),r.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(t,e,n,i){var r=this.session;r.bgTokenizer.lines[n]=null;var o={type:e,value:t},a=r.getTokens(n);if(null==i)a.push(o);else for(var s=0,c=0;c<a.length;c++){var l=a[c];if(i<=(s+=l.value.length)){var u=l.value.length-(s-i),h=l.value.slice(0,u),d=l.value.slice(u);a.splice(c,1,{type:l.type,value:h},o,{type:l.type,value:d});break}}this.updateLines(n,n)},this.setTheme=function(t,e){var n=this;function i(i){if(n.$themeId!=t)return e&&e();if(!i||!i.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");i.$id&&(n.$themeId=i.$id),r.importCssString(i.cssText,i.cssClass,n.container),n.theme&&r.removeCssClass(n.container,n.theme.cssClass);var o="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&o!=n.$padding&&n.setPadding(o),n.$theme=i.cssClass,n.theme=i,r.addCssClass(n.container,i.cssClass),r.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),e&&e()}this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t?i(t):o.loadModule(["theme",t||this.$options.theme.initialValue],i)},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){r.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){r.removeCssClass(this.container,t)},this.setCursorStyle=function(t){r.setStyle(this.scroller.style,"cursor",t)},this.setMouseCursor=function(t){r.setStyle(this.scroller.style,"cursor",t)},this.attachToShadowRoot=function(){r.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(y.prototype),o.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){this.$gutterLayer.setHighlightGutterLine(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){this.$scrollPastEnd!=(t=+t||0)&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),e.VirtualRenderer=y})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/net"),o=t("../lib/event_emitter").EventEmitter,a=t("../config");function s(t){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var e=function(t){var e="importScripts('"+r.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(i){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(e),n.getBlob("application/javascript")}}(t),n=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(n)}return new Worker(t)}var c=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,o),this.$createWorkerFromOldConfig=function(e,n,i,r,o){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl)r=r||a.moduleUrl(n,"worker");else{var c=this.$normalizePath;r=r||c(t.toUrl("ace/worker/worker.js",null,"_"));var l={};e.forEach((function(e){l[e]=c(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=s(r),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:l,module:n,classname:i}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return r.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,e.push(i)}this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker.postMessage({event:t,data:{data:e.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),this.deltaQueue.push(t.start,"insert"==t.action?t.lines:t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(c.prototype),e.UIWorkerClient=function(t,e,n){var i=null,r=!1,s=Object.create(o),l=[],u=new c({messageBuffer:l,terminate:function(){},postMessage:function(t){l.push(t),i&&(r?setTimeout(h):h())}});u.setEmitSync=function(t){r=t};var h=function(){var t=l.shift();t.command?i[t.command].apply(i,t.args):t.event&&s._signal(t.event,t.data)};return s.postMessage=function(t){u.onMessage({data:t})},s.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},s.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],(function(t){for(i=new t[n](s);l.length;)h()})),u},e.WorkerClient=c,e.createWorker=s})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("./range").Range,r=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),a=function(t,e,n,i,r,o){var a=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){a.onCursorChange()}))},this.$pos=n;var s=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=e.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),t.others.push(i)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,r=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===t.action)for(var a=this.others.length-1;a>=0;a--)this.doc.insertMergedLines(c={row:(s=this.others[a]).row,column:s.column+o},t.lines);else if("remove"===t.action)for(a=this.others.length-1;a>=0;a--){var s,c;this.doc.remove(new i((c={row:(s=this.others[a]).row,column:s.column+o}).row,c.column,c.row,c.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,r){e.removeMarker(n.markerId),n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(a.prototype),e.PlaceHolder=a})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){var i=t("../lib/event"),r=t("../lib/useragent");function o(t,e){return t.row==e.row&&t.column==e.column}e.onMouseDown=function(t){var e=t.domEvent,n=e.altKey,a=e.shiftKey,s=e.ctrlKey,c=t.getAccelKey(),l=t.getButton();if(s&&r.isMac&&(l=e.button),t.editor.inMultiSelectMode&&2==l)t.editor.textInput.onContextMenu(t.domEvent);else if(s||n||c){if(0===l){var u,h=t.editor,d=h.selection,p=h.inMultiSelectMode,f=t.getDocumentPosition(),g=d.getCursor(),m=t.inSelection()||d.isEmpty()&&o(f,g),v=t.x,y=t.y,b=h.session,_=h.renderer.pixelToScreenCoordinates(v,y),C=_;if(h.$mouseHandler.$enableJumpToDef)s&&n||c&&n?u=a?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(c&&!n){if(u="add",!p&&a)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&r.isMac&&e.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!p&&m)return;if(!p){var x=d.toOrientedRange();h.addSelectionMarker(x)}var w=d.rangeList.rangeAtPoint(f);h.inVirtualSelectionMode=!0,a&&(w=null,h.removeSelectionMarker(x=d.ranges[0]||x)),h.once("mouseup",(function(){var t=d.toOrientedRange();w&&t.isEmpty()&&o(w.cursor,t.cursor)?d.substractPoint(t.cursor):(a?d.substractPoint(x.cursor):x&&(h.removeSelectionMarker(x),d.addRange(x)),d.addRange(t)),h.inVirtualSelectionMode=!1}))}else if("block"==u){var I;t.stop(),h.inVirtualSelectionMode=!0;var A=[],P=function(){var t=h.renderer.pixelToScreenCoordinates(v,y),e=b.screenToDocumentPosition(t.row,t.column,t.offsetX);o(C,t)&&o(e,d.lead)||(C=t,h.selection.moveToPosition(e),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(A),A=d.rectangularRangeBlock(C,_),h.$mouseHandler.$clickSelection&&1==A.length&&A[0].isEmpty()&&(A[0]=h.$mouseHandler.$clickSelection.clone()),A.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};p&&!c?d.toSingleRange():!p&&c&&(I=d.toOrientedRange(),h.addSelectionMarker(I)),a?_=b.documentToScreenPosition(d.lead):d.moveToPosition(f),C={row:-1,column:-1};var O=P;i.capture(h.container,(function(t){v=t.clientX,y=t.clientY}),(function(t){P(),clearInterval(M),h.removeSelectionMarkers(A),A.length||(A=[d.toOrientedRange()]),I&&(h.removeSelectionMarker(I),d.toSingleRange(I));for(var e=0;e<A.length;e++)d.addRange(A[e]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null}));var M=setInterval((function(){O()}),20);return t.preventDefault()}}}else 0===l&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var i=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new i(e.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(t,e,n){var i=t("./range_list").RangeList,r=t("./range").Range,o=t("./selection").Selection,a=t("./mouse/multi_select_handler").onMouseDown,s=t("./lib/event"),c=t("./lib/lang"),l=t("./commands/multi_select_commands");e.commands=l.defaultCommands.concat(l.multiSelectCommands);var u=new(0,t("./search").Search),h=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var i=this.rangeList.add(t);return this.$onAddRange(t),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length&&this.$onRemoveRange(t)},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var i=this.ranges.indexOf(t[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=r.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{n=this.getRange();var i=this.isBackwards(),o=n.start.row,a=n.end.row;if(o==a){if(i)var s=n.end,c=n.start;else s=n.start,c=n.end;return this.addRange(r.fromPoints(c,c)),void this.addRange(r.fromPoints(s,s))}var l=[],u=this.getLineRange(o,!0);u.start.column=n.start.column,l.push(u);for(var h=o+1;h<a;h++)l.push(this.getLineRange(h,!0));(u=this.getLineRange(a,!0)).end.column=n.end.column,l.push(u),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=r.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var i=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var i=[],o=t.column<e.column;if(o)var a=t.column,s=e.column,c=t.offsetX,l=e.offsetX;else a=e.column,s=t.column,c=e.offsetX,l=t.offsetX;var u,h,d,p=t.row<e.row;if(p)var f=t.row,g=e.row;else f=e.row,g=t.row;a<0&&(a=0),f<0&&(f=0),f==g&&(n=!0);for(var m=f;m<=g;m++){var v=r.fromPoints(this.session.screenToDocumentPosition(m,a,c),this.session.screenToDocumentPosition(m,s,l));if(v.isEmpty()){if(u&&(h=v.end).row==(d=u).row&&h.column==d.column)break;u=v.end}v.cursor=o?v.start:v.end,i.push(v)}if(p&&i.reverse(),!n){for(var y=i.length-1;i[y].isEmpty()&&y>0;)y--;if(y>0)for(var b=0;i[b].isEmpty();)b++;for(var _=y;_>=b;_--)i[_].isEmpty()&&i.splice(_,1)}return i}}).call(o.prototype);var d=t("./editor").Editor;function p(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",a),t.commands.addCommands(l.defaultCommands),function(t){if(t.textInput){var e=t.textInput.getElement(),n=!1;s.addListener(e,"keydown",(function(e){t.$blockSelectEnabled&&18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey)?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&i()})),s.addListener(e,"keyup",i),s.addListener(e,"blur",i)}function i(e){n&&(t.renderer.setMouseCursor(""),n=!1)}}(t))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var i=t[n];if(i.marker){this.session.removeMarker(i.marker);var r=e.indexOf(i);-1!=r&&e.splice(r,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(l.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(l.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?i=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?i=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),i=e.exec(n,t.args||{})):i=e.multiSelectAction(n,t.args||{});else{var i=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var i,r=1==n||n&&n.$byLines,a=this.session,s=this.selection,c=(n&&n.keepOrder?s:s.rangeList).ranges;if(!c.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var l=s._eventRegistry;s._eventRegistry={};var u=new o(a);this.inVirtualSelectionMode=!0;for(var h=c.length;h--;){if(r)for(;h>0&&c[h].start.row==c[h-1].end.row;)h--;u.fromOrientedRange(c[h]),u.index=h,this.selection=a.selection=u;var d=t.exec?t.exec(this,e||{}):t(this,e||{});i||void 0===d||(i=d),u.toOrientedRange(c[h])}u.detach(),this.selection=a.selection=s,this.inVirtualSelectionMode=!1,s._eventRegistry=l,s.mergeOverlappingRanges(),s.ranges[0]&&s.fromOrientedRange(s.ranges[0]);var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],i=0;i<e.length;i++)n.push(this.session.getTextRange(e[i]));var r=this.session.getDocument().getNewLineCharacter();(t=n.join(r)).length==(n.length-1)*r.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var i=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=e.row||this.session.$clipPositionToDocument(i.row,i.column).column!=e.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(t,e,n){if((e=e||{}).needle=t||e.needle,null==e.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(i)}this.$search.set(e);var r=this.$search.findAll(this.session);if(!r.length)return 0;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var a=r.length;a--;)o.addRange(r[a],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),r.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var a,s=this.session.screenToDocumentPosition(o.row+t,o.column);if(n.isEmpty())l=s;else var c=this.session.documentToScreenPosition(i?n.end:n.start),l=this.session.screenToDocumentPosition(c.row+t,c.column);if(i?(a=r.fromPoints(s,l)).cursor=a.start:(a=r.fromPoints(l,s)).cursor=a.end,a.desiredColumn=o.column,this.selection.inMultiSelectMode){if(e)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(a),u&&this.selection.substractPoint(u)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,i=n.ranges,r=i.length;r--;)if((s=i[r]).isEmpty()){var o=e.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}n.mergeOverlappingRanges();var a=[];for(r=i.length;r--;)a.unshift(e.getTextRange(s=i[r]));for(t<0?a.unshift(a.pop()):a.push(a.shift()),r=i.length;r--;){var s;o=(s=i[r]).clone(),e.replace(s,a[r]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(t,e,n){var i=this.session,r=i.multiSelect.toOrientedRange();if(!r.isEmpty()||((r=i.getWordRange(r.start.row,r.start.column)).cursor=-1==t?r.start:r.end,this.multiSelect.addRange(r),!n)){var o=i.getTextRange(r),a=function(t,e,n){return u.$options.wrap=!0,u.$options.needle=e,u.$options.backwards=-1==n,u.find(t)}(i,o,t);a&&(a.cursor=-1==t?a.start:a.end,this.session.unfold(a),this.multiSelect.addRange(a),this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(r.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,i=-1,o=n.filter((function(t){if(t.cursor.row==i)return!0;i=t.cursor.row}));if(n.length&&o.length!=n.length-1){o.forEach((function(t){e.substractPoint(t.cursor)}));var a=0,s=1/0,l=n.map((function(e){var n=e.cursor,i=t.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>a&&(a=n.column),i<s&&(s=i),i}));n.forEach((function(e,n){var i=e.cursor,o=a-i.column,u=l[n]-s;o>u?t.insert(i,c.stringRepeat(" ",o-u)):t.remove(new r(i.row,i.column,i.row,i.column-o+u)),e.start.column=e.end.column=a,e.start.row=e.end.row=i.row,e.cursor=e.end})),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),h=u.start.row,d=u.end.row,p=h==d;if(p){var f,g=this.session.getLength();do{f=this.session.getLine(d)}while(/[=:]/.test(f)&&++d<g);do{f=this.session.getLine(h)}while(/[=:]/.test(f)&&--h>0);h<0&&(h=0),d>=g&&(d=g-1)}var m=this.session.removeFullLines(h,d);m=this.$reAlignText(m,p),this.session.insert({row:h,column:0},m.join("\n")+"\n"),p||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(t,e){var n,i,r,o=!0,a=!0;return t.map((function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==n?(n=e[1].length,i=e[2].length,r=e[3].length,e):(n+i+r!=e[1].length+e[2].length+e[3].length&&(a=!1),n!=e[1].length&&(o=!1),n>e[1].length&&(n=e[1].length),i<e[2].length&&(i=e[2].length),r>e[3].length&&(r=e[3].length),e):[t]})).map(e?l:o?a?function(t){return t[2]?s(n+i-t[2].length)+t[2]+s(r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}:l:function(t){return t[2]?s(n)+t[2]+s(r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]});function s(t){return c.stringRepeat(" ",t)}function l(t){return t[2]?s(n)+t[2]+s(i-t[2].length+r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}}}).call(d.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=p,t("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(t){p(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",a)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",a))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../../range").Range,r=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var r=/\S/,o=t.getLine(e),a=o.search(r);if(-1!=a){for(var s=n||o.length,c=t.getLength(),l=e,u=e;++e<c;){var h=t.getLine(e).search(r);if(-1!=h){if(h<=a){var d=t.getTokenAt(e,0);if(!d||"string"!==d.type)break}u=e}}if(u>l){var p=t.getLine(u).length;return new i(l,s,u,p)}}},this.openingBracketBlock=function(t,e,n,r,o){var a={row:n,column:r+1},s=t.$findClosingBracket(e,a,o);if(s){var c=t.foldWidgets[s.row];return null==c&&(c=t.getFoldWidget(s.row)),"start"==c&&s.row>a.row&&(s.row--,s.column=t.getLine(s.row).length),i.fromPoints(a,s)}},this.closingBracketBlock=function(t,e,n,r,o){var a={row:n,column:r},s=t.$findOpeningBracket(e,a);if(s)return s.column++,a.column--,i.fromPoints(s,a)}}).call(r.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e.$id="ace/theme/textmate",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(t,e,n){"use strict";t("./lib/oop");var i=t("./lib/dom");function r(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}t("./range"),(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets&&this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach((function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)})),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))}))}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var i=t.data,r=i.start.row,o=i.end.row,a="add"==t.action,s=r+1;s<o;s++)n[s]&&(n[s].hidden=a);n[o]&&(a?n[r]?n[o].hidden=a:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=a))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,i=t.end.row-n;if(0===i);else if("remove"==t.action)e.splice(n+1,i).forEach((function(t){t&&this.removeLineWidget(t)}),this),this.$updateRows();else{var r=new Array(i);r.unshift(n,0),e.splice.apply(e,r),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach((function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget})),e&&(this.session.lineWidgets=null)}},this.addLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t.session=this.session;var n=this.editor.renderer;t.html&&!t.el&&(t.el=i.createElement("div"),t.el.innerHTML=t.html),t.el&&(i.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,n.container.appendChild(t.el),t._inDocument=!0),t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight),null==t.rowCount&&(t.rowCount=t.pixelHeight/n.layerConfig.lineHeight);var r=this.session.getFoldAt(t.row,0);if(t.$fold=r,r){var o=this.session.lineWidgets;t.row!=r.end.row||o[r.start.row]?t.hidden=!0:o[r.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(n){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,i=e.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var a=n[o];if(a&&a.el&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,e.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/i.characterWidth));var s=a.h/i.lineHeight;a.coverLine&&(s-=this.session.getRowLineCount(a.row))<0&&(s=0),a.rowCount!=s&&(a.rowCount=s,a.row<r&&(r=a.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var a=r;a<=o;a++){var s=i[a];if(s&&s.el)if(s.hidden)s.el.style.top=-100-(s.pixelHeight||0)+"px";else{s._inDocument||(s._inDocument=!0,e.container.appendChild(s.el));var c=e.$cursorLayer.getPixelPosition({row:a,column:0},!0).top;s.coverLine||(c+=n.lineHeight*this.session.getRowLineCount(s.row)),s.el.style.top=c-n.offset+"px";var l=s.coverGutter?0:e.gutterWidth;s.fixedWidth||(l-=e.scrollLeft),s.el.style.left=l+"px",s.fullWidth&&s.screenWidth&&(s.el.style.minWidth=n.width+2*n.padding+"px"),s.el.style.right=s.fixedWidth?e.scrollBar.getWidth()+"px":""}}}}}).call(r.prototype),e.LineWidgets=r})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(t,e,n){"use strict";var i=t("../line_widgets").LineWidgets,r=t("../lib/dom"),o=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(t));var a=t.getCursorPosition(),s=a.row,c=n.widgetManager.getWidgetsAtRow(s).filter((function(t){return"errorMarker"==t.type}))[0];c?c.destroy():s-=e;var l,u=function(t,e,n){var i=t.getAnnotations().sort(o.comparePoints);if(i.length){var r=function(t,e,n){for(var i=0,r=t.length-1;i<=r;){var o=i+r>>1,a=n(e,t[o]);if(a>0)i=o+1;else{if(!(a<0))return o;r=o-1}}return-(i+1)}(i,{row:e,column:-1},o.comparePoints);r<0&&(r=-r-1),r>=i.length?r=n>0?0:i.length-1:0===r&&n<0&&(r=i.length-1);var a=i[r];if(a&&n){if(a.row===e){do{a=i[r+=n]}while(a&&a.row===e);if(!a)return i.slice()}var s=[];e=a.row;do{s[n<0?"unshift":"push"](a),a=i[r+=n]}while(a&&a.row==e);return s.length&&s}}}(n,s,e);if(u){var h=u[0];a.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,a.row=h.row,l=t.renderer.$gutterLayer.$annotations[a.row]}else{if(c)return;l={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(a.row),t.selection.moveToPosition(a);var d={row:a.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},p=d.el.appendChild(r.createElement("div")),f=d.el.appendChild(r.createElement("div"));f.className="error_widget_arrow "+l.className;var g=t.renderer.$cursorLayer.getPixelPosition(a).left;f.style.left=g+t.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(r.createElement("div"));var m=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}};d.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(d),t.off("changeSelection",d.destroy),t.off("changeSession",d.destroy),t.off("mouseup",d.destroy),t.off("change",d.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",d.destroy),t.on("changeSession",d.destroy),t.on("mouseup",d.destroy),t.on("change",d.destroy),t.session.widgetManager.addLineWidget(d),d.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var r=t("./lib/dom"),o=t("./lib/event"),a=t("./range").Range,s=t("./editor").Editor,c=t("./edit_session").EditSession,l=t("./undomanager").UndoManager,u=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.require=t,e.define=n(23),e.edit=function(t,n){if("string"==typeof t){var i=t;if(!(t=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(t&&t.env&&t.env.editor instanceof s)return t.env.editor;var a="";if(t&&/input|textarea/i.test(t.tagName)){var c=t;a=c.value,t=r.createElement("pre"),c.parentNode.replaceChild(t,c)}else t&&(a=t.textContent,t.innerHTML="");var l=e.createEditSession(a),h=new s(new u(t),l,n),d={document:l,editor:h,onResize:h.resize.bind(h,null)};return c&&(d.textarea=c),o.addListener(window,"resize",d.onResize),h.on("destroy",(function(){o.removeListener(window,"resize",d.onResize),d.editor.container.env=null})),h.container.env=h.env=d,h},e.createEditSession=function(t,e){var n=new c(t,e);return n.setUndoManager(new l),n},e.Range=a,e.Editor=s,e.EditSession=c,e.UndoManager=l,e.VirtualRenderer=u,e.version=e.config.version})),ace.require(["ace/ace"],(function(e){for(var n in e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e),e)e.hasOwnProperty(n)&&(window.ace[n]=e[n]);window.ace.default=window.ace,t&&(t.exports=window.ace)}))}).call(this,n(16)(t))},function(t,e,n){(function(t){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};i.inherits(o,r),e.JsonHighlightRules=o})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../range").Range,r=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e).match(/^(\s*\})/);if(!n)return 0;var r=n[1].length,o=t.findMatchingBracket({row:e,column:r});if(!o||o.row==e)return 0;var a=this.$getIndent(t.getLine(o.row));t.replace(new i(e,0,e,r-1),a)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(r.prototype),e.MatchingBraceOutdent=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(t,e,n){"use strict";var i=t("../../lib/oop"),r=t("../../range").Range,o=t("./fold_mode").FoldMode,a=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};i.inherits(a,o),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(t,e,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(t,e,n,i){var r,o=t.getLine(n);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(t,o,n);if(r=o.match(this.foldingStartMarker)){var a=r.index;if(r[1])return this.openingBracketBlock(t,r[1],n,a);var s=t.getCommentFoldRange(n,a+r[0].length,1);return s&&!s.isMultiLine()&&(i?s=this.getSectionRange(t,n):"all"!=e&&(s=null)),s}return"markbegin"!==e&&(r=o.match(this.foldingStopMarker))?(a=r.index+r[0].length,r[1]?this.closingBracketBlock(t,r[1],n,a):t.getCommentFoldRange(n,a,-1)):void 0},this.getSectionRange=function(t,e){for(var n=t.getLine(e),i=n.search(/\S/),o=e,a=n.length,s=e+=1,c=t.getLength();++e<c;){var l=(n=t.getLine(e)).search(/\S/);if(-1!==l){if(i>l)break;var u=this.getFoldWidgetRange(t,"all",e);if(u){if(u.start.row<=o)break;if(u.isMultiLine())e=u.end.row;else if(i==l)break}s=e}}return new r(o,a,s,t.getLine(s).length)},this.getCommentRegionBlock=function(t,e,n){for(var i=e.search(/\s*$/),o=t.getLength(),a=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<o;){e=t.getLine(n);var l=s.exec(e);if(l&&(l[1]?c--:c++,!c))break}if(n>a)return new r(a,i,n,e.length)}}).call(a.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text").Mode,o=t("./json_highlight_rules").JsonHighlightRules,a=t("./matching_brace_outdent").MatchingBraceOutdent,s=t("./behaviour/cstyle").CstyleBehaviour,c=t("./folding/cstyle").FoldMode,l=t("../worker/worker_client").WorkerClient,u=function(){this.HighlightRules=o,this.$outdent=new a,this.$behaviour=new s,this.foldingRules=new c};i.inherits(u,r),(function(){this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e);return"start"==t&&e.match(/^.*[\{\(\[]\s*$/)&&(i+=n),i},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.createWorker=function(t){var e=new l(["ace"],"ace/mode/json_worker","JsonWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/json"}).call(u.prototype),e.Mode=u})),ace.require(["ace/mode/json"],(function(e){t&&(t.exports=e)}))}).call(this,n(16)(t))},function(t,e,n){(function(t){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/lang"),o=t("../lib/event"),a='.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',s=t("../keyboard/hash_handler").HashHandler,c=t("../lib/keys");i.importCssString(a,"ace_searchbox");var l=function(t,e,n){var r=i.createElement("div");i.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"\u200b"],["span",{action:"findNext",class:"ace_searchbtn next"},"\u200b"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],r),this.element=r.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(t),i.importCssString(a,"ace_searchbox",t.container)};(function(){this.setEditor=function(t){t.searchBox=this,t.renderer.scroller.appendChild(this.element),this.editor=t},this.setSession=function(t){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(t){this.searchBox=t.querySelector(".ace_search_form"),this.replaceBox=t.querySelector(".ace_replace_form"),this.searchOption=t.querySelector("[action=searchInSelection]"),this.replaceOption=t.querySelector("[action=toggleReplace]"),this.regExpOption=t.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=t.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=t.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=t.querySelector(".ace_search_counter")},this.$init=function(){var t=this.element;this.$initElements(t);var e=this;o.addListener(t,"mousedown",(function(t){setTimeout((function(){e.activeInput.focus()}),0),o.stopPropagation(t)})),o.addListener(t,"click",(function(t){var n=(t.target||t.srcElement).getAttribute("action");n&&e[n]?e[n]():e.$searchBarKb.commands[n]&&e.$searchBarKb.commands[n].exec(e),o.stopPropagation(t)})),o.addCommandKeyListener(t,(function(t,n,i){var r=c.keyCodeToString(i),a=e.$searchBarKb.findKeyCommand(n,r);a&&a.exec&&(a.exec(e),o.stopEvent(t))})),this.$onChange=r.delayedCall((function(){e.find(!1,!1)})),o.addListener(this.searchInput,"input",(function(){e.$onChange.schedule(20)})),o.addListener(this.searchInput,"focus",(function(){e.activeInput=e.searchInput,e.searchInput.value&&e.highlight()})),o.addListener(this.replaceInput,"focus",(function(){e.activeInput=e.replaceInput,e.searchInput.value&&e.highlight()}))},this.$closeSearchBarKb=new s([{bindKey:"Esc",name:"closeSearchBar",exec:function(t){t.searchBox.hide()}}]),this.$searchBarKb=new s,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(t){var e=t.isReplace=!t.isReplace;t.replaceBox.style.display=e?"":"none",t.replaceOption.checked=!1,t.$syncOptions(),t.searchInput.focus()},"Ctrl-H|Command-Option-F":function(t){t.editor.getReadOnly()||(t.replaceOption.checked=!0,t.$syncOptions(),t.replaceInput.focus())},"Ctrl-G|Command-G":function(t){t.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(t){t.findPrev()},esc:function(t){setTimeout((function(){t.hide()}))},Return:function(t){t.activeInput==t.replaceInput&&t.replace(),t.findNext()},"Shift-Return":function(t){t.activeInput==t.replaceInput&&t.replace(),t.findPrev()},"Alt-Return":function(t){t.activeInput==t.replaceInput&&t.replaceAll(),t.findAll()},Tab:function(t){(t.activeInput==t.replaceInput?t.searchInput:t.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(t){t.regExpOption.checked=!t.regExpOption.checked,t.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(t){t.caseSensitiveOption.checked=!t.caseSensitiveOption.checked,t.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(t){t.wholeWordOption.checked=!t.wholeWordOption.checked,t.$syncOptions()}},{name:"toggleReplace",exec:function(t){t.replaceOption.checked=!t.replaceOption.checked,t.$syncOptions()}},{name:"searchInSelection",exec:function(t){t.searchOption.checked=!t.searchRange,t.setSearchRange(t.searchOption.checked&&t.editor.getSelectionRange()),t.$syncOptions()}}]),this.setSearchRange=function(t){this.searchRange=t,t?this.searchRangeMarker=this.editor.session.addMarker(t,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(t){i.setCssClass(this.replaceOption,"checked",this.searchRange),i.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",i.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),i.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),i.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var e=this.editor.getReadOnly();this.replaceOption.style.display=e?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!e?"":"none",this.find(!1,!1,t)},this.highlight=function(t){this.editor.session.highlight(t||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(t,e,n){var r=!this.editor.find(this.searchInput.value,{skipCurrent:t,backwards:e,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",r),this.editor._emit("findSearchBox",{match:!r}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var t=this.editor,e=t.$search.$options.re,n=0,i=0;if(e){var r=this.searchRange?t.session.getTextRange(this.searchRange):t.getValue(),o=t.session.doc.positionToIndex(t.selection.anchor);this.searchRange&&(o-=t.session.doc.positionToIndex(this.searchRange.start));for(var a,s=e.lastIndex=0;(a=e.exec(r))&&(n++,(s=a.index)<=o&&i++,!(n>999))&&(a[0]||(e.lastIndex=s+=1,!(s>=r.length))););}this.searchCounter.textContent=i+" of "+(n>999?"999+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var t=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",t),this.editor._emit("findSearchBox",{match:!t}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(t,e){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=e,t&&(this.searchInput.value=t),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var t=document.activeElement;return t==this.searchInput||t==this.replaceInput}}).call(l.prototype),e.SearchBox=l,e.Search=function(t,e){(t.searchBox||new l(t)).show(t.session.getTextRange(),e)}})),ace.require(["ace/ext/searchbox"],(function(e){t&&(t.exports=e)}))}).call(this,n(16)(t))},function(t,e){t.exports="data:application/javascript;base64,Im5vIHVzZSBzdHJpY3QiOwohKGZ1bmN0aW9uKHdpbmRvdykgewppZiAodHlwZW9mIHdpbmRvdy53aW5kb3cgIT0gInVuZGVmaW5lZCIgJiYgd2luZG93LmRvY3VtZW50KQogICAgcmV0dXJuOwppZiAod2luZG93LnJlcXVpcmUgJiYgd2luZG93LmRlZmluZSkKICAgIHJldHVybjsKCmlmICghd2luZG93LmNvbnNvbGUpIHsKICAgIHdpbmRvdy5jb25zb2xlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1zZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApOwogICAgICAgIHBvc3RNZXNzYWdlKHt0eXBlOiAibG9nIiwgZGF0YTogbXNnc30pOwogICAgfTsKICAgIHdpbmRvdy5jb25zb2xlLmVycm9yID0KICAgIHdpbmRvdy5jb25zb2xlLndhcm4gPSAKICAgIHdpbmRvdy5jb25zb2xlLmxvZyA9CiAgICB3aW5kb3cuY29uc29sZS50cmFjZSA9IHdpbmRvdy5jb25zb2xlOwp9CndpbmRvdy53aW5kb3cgPSB3aW5kb3c7CndpbmRvdy5hY2UgPSB3aW5kb3c7Cgp3aW5kb3cub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZpbGUsIGxpbmUsIGNvbCwgZXJyKSB7CiAgICBwb3N0TWVzc2FnZSh7dHlwZTogImVycm9yIiwgZGF0YTogewogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgZGF0YTogZXJyLmRhdGEsCiAgICAgICAgZmlsZTogZmlsZSwKICAgICAgICBsaW5lOiBsaW5lLCAKICAgICAgICBjb2w6IGNvbCwKICAgICAgICBzdGFjazogZXJyLnN0YWNrCiAgICB9fSk7Cn07Cgp3aW5kb3cubm9ybWFsaXplTW9kdWxlID0gZnVuY3Rpb24ocGFyZW50SWQsIG1vZHVsZU5hbWUpIHsKICAgIC8vIG5vcm1hbGl6ZSBwbHVnaW4gcmVxdWlyZXMKICAgIGlmIChtb2R1bGVOYW1lLmluZGV4T2YoIiEiKSAhPT0gLTEpIHsKICAgICAgICB2YXIgY2h1bmtzID0gbW9kdWxlTmFtZS5zcGxpdCgiISIpOwogICAgICAgIHJldHVybiB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBjaHVua3NbMF0pICsgIiEiICsgd2luZG93Lm5vcm1hbGl6ZU1vZHVsZShwYXJlbnRJZCwgY2h1bmtzWzFdKTsKICAgIH0KICAgIC8vIG5vcm1hbGl6ZSByZWxhdGl2ZSByZXF1aXJlcwogICAgaWYgKG1vZHVsZU5hbWUuY2hhckF0KDApID09ICIuIikgewogICAgICAgIHZhciBiYXNlID0gcGFyZW50SWQuc3BsaXQoIi8iKS5zbGljZSgwLCAtMSkuam9pbigiLyIpOwogICAgICAgIG1vZHVsZU5hbWUgPSAoYmFzZSA/IGJhc2UgKyAiLyIgOiAiIikgKyBtb2R1bGVOYW1lOwogICAgICAgIAogICAgICAgIHdoaWxlIChtb2R1bGVOYW1lLmluZGV4T2YoIi4iKSAhPT0gLTEgJiYgcHJldmlvdXMgIT0gbW9kdWxlTmFtZSkgewogICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBtb2R1bGVOYW1lOwogICAgICAgICAgICBtb2R1bGVOYW1lID0gbW9kdWxlTmFtZS5yZXBsYWNlKC9eXC5cLy8sICIiKS5yZXBsYWNlKC9cL1wuXC8vLCAiLyIpLnJlcGxhY2UoL1teXC9dK1wvXC5cLlwvLywgIiIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIG1vZHVsZU5hbWU7Cn07Cgp3aW5kb3cucmVxdWlyZSA9IGZ1bmN0aW9uIHJlcXVpcmUocGFyZW50SWQsIGlkKSB7CiAgICBpZiAoIWlkKSB7CiAgICAgICAgaWQgPSBwYXJlbnRJZDsKICAgICAgICBwYXJlbnRJZCA9IG51bGw7CiAgICB9CiAgICBpZiAoIWlkLmNoYXJBdCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIndvcmtlci5qcyByZXF1aXJlKCkgYWNjZXB0cyBvbmx5IChwYXJlbnRJZCwgaWQpIGFzIGFyZ3VtZW50cyIpOwoKICAgIGlkID0gd2luZG93Lm5vcm1hbGl6ZU1vZHVsZShwYXJlbnRJZCwgaWQpOwoKICAgIHZhciBtb2R1bGUgPSB3aW5kb3cucmVxdWlyZS5tb2R1bGVzW2lkXTsKICAgIGlmIChtb2R1bGUpIHsKICAgICAgICBpZiAoIW1vZHVsZS5pbml0aWFsaXplZCkgewogICAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5mYWN0b3J5KCkuZXhwb3J0czsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgfQogICAKICAgIGlmICghd2luZG93LnJlcXVpcmUudGxucykKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coInVuYWJsZSB0byBsb2FkICIgKyBpZCk7CiAgICAKICAgIHZhciBwYXRoID0gcmVzb2x2ZU1vZHVsZUlkKGlkLCB3aW5kb3cucmVxdWlyZS50bG5zKTsKICAgIGlmIChwYXRoLnNsaWNlKC0zKSAhPSAiLmpzIikgcGF0aCArPSAiLmpzIjsKICAgIAogICAgd2luZG93LnJlcXVpcmUuaWQgPSBpZDsKICAgIHdpbmRvdy5yZXF1aXJlLm1vZHVsZXNbaWRdID0ge307IC8vIHByZXZlbnQgaW5maW5pdGUgbG9vcCBvbiBicm9rZW4gbW9kdWxlcwogICAgaW1wb3J0U2NyaXB0cyhwYXRoKTsKICAgIHJldHVybiB3aW5kb3cucmVxdWlyZShwYXJlbnRJZCwgaWQpOwp9OwpmdW5jdGlvbiByZXNvbHZlTW9kdWxlSWQoaWQsIHBhdGhzKSB7CiAgICB2YXIgdGVzdFBhdGggPSBpZCwgdGFpbCA9ICIiOwogICAgd2hpbGUgKHRlc3RQYXRoKSB7CiAgICAgICAgdmFyIGFsaWFzID0gcGF0aHNbdGVzdFBhdGhdOwogICAgICAgIGlmICh0eXBlb2YgYWxpYXMgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgcmV0dXJuIGFsaWFzICsgdGFpbDsKICAgICAgICB9IGVsc2UgaWYgKGFsaWFzKSB7CiAgICAgICAgICAgIHJldHVybiAgYWxpYXMubG9jYXRpb24ucmVwbGFjZSgvXC8qJC8sICIvIikgKyAodGFpbCB8fCBhbGlhcy5tYWluIHx8IGFsaWFzLm5hbWUpOwogICAgICAgIH0gZWxzZSBpZiAoYWxpYXMgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9CiAgICAgICAgdmFyIGkgPSB0ZXN0UGF0aC5sYXN0SW5kZXhPZigiLyIpOwogICAgICAgIGlmIChpID09PSAtMSkgYnJlYWs7CiAgICAgICAgdGFpbCA9IHRlc3RQYXRoLnN1YnN0cihpKSArIHRhaWw7CiAgICAgICAgdGVzdFBhdGggPSB0ZXN0UGF0aC5zbGljZSgwLCBpKTsKICAgIH0KICAgIHJldHVybiBpZDsKfQp3aW5kb3cucmVxdWlyZS5tb2R1bGVzID0ge307CndpbmRvdy5yZXF1aXJlLnRsbnMgPSB7fTsKCndpbmRvdy5kZWZpbmUgPSBmdW5jdGlvbihpZCwgZGVwcywgZmFjdG9yeSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICAgIGZhY3RvcnkgPSBkZXBzOwogICAgICAgIGlmICh0eXBlb2YgaWQgIT0gInN0cmluZyIpIHsKICAgICAgICAgICAgZGVwcyA9IGlkOwogICAgICAgICAgICBpZCA9IHdpbmRvdy5yZXF1aXJlLmlkOwogICAgICAgIH0KICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgZmFjdG9yeSA9IGlkOwogICAgICAgIGRlcHMgPSBbXTsKICAgICAgICBpZCA9IHdpbmRvdy5yZXF1aXJlLmlkOwogICAgfQogICAgCiAgICBpZiAodHlwZW9mIGZhY3RvcnkgIT0gImZ1bmN0aW9uIikgewogICAgICAgIHdpbmRvdy5yZXF1aXJlLm1vZHVsZXNbaWRdID0gewogICAgICAgICAgICBleHBvcnRzOiBmYWN0b3J5LAogICAgICAgICAgICBpbml0aWFsaXplZDogdHJ1ZQogICAgICAgIH07CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICghZGVwcy5sZW5ndGgpCiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gZGVwZW5kZW5jaWVzLCB3ZSBpbmplY3QgInJlcXVpcmUiLCAiZXhwb3J0cyIgYW5kCiAgICAgICAgLy8gIm1vZHVsZSIgYXMgZGVwZW5kZW5jaWVzLCB0byBwcm92aWRlIENvbW1vbkpTIGNvbXBhdGliaWxpdHkuCiAgICAgICAgZGVwcyA9IFsicmVxdWlyZSIsICJleHBvcnRzIiwgIm1vZHVsZSJdOwoKICAgIHZhciByZXEgPSBmdW5jdGlvbihjaGlsZElkKSB7CiAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1aXJlKGlkLCBjaGlsZElkKTsKICAgIH07CgogICAgd2luZG93LnJlcXVpcmUubW9kdWxlc1tpZF0gPSB7CiAgICAgICAgZXhwb3J0czoge30sCiAgICAgICAgZmFjdG9yeTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSB0aGlzOwogICAgICAgICAgICB2YXIgcmV0dXJuRXhwb3J0cyA9IGZhY3RvcnkuYXBwbHkodGhpcywgZGVwcy5zbGljZSgwLCBmYWN0b3J5Lmxlbmd0aCkubWFwKGZ1bmN0aW9uKGRlcCkgewogICAgICAgICAgICAgICAgc3dpdGNoIChkZXApIHsKICAgICAgICAgICAgICAgICAgICAvLyBCZWNhdXNlICJyZXF1aXJlIiwgImV4cG9ydHMiIGFuZCAibW9kdWxlIiBhcmVuJ3QgYWN0dWFsCiAgICAgICAgICAgICAgICAgICAgLy8gZGVwZW5kZW5jaWVzLCB3ZSBtdXN0IGhhbmRsZSB0aGVtIHNlcGVyYXRlbHkuCiAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVxdWlyZSI6IHJldHVybiByZXE7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZXhwb3J0cyI6IHJldHVybiBtb2R1bGUuZXhwb3J0czsKICAgICAgICAgICAgICAgICAgICBjYXNlICJtb2R1bGUiOiAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgICAgICAvLyBCdXQgZm9yIGFsbCBvdGhlciBkZXBlbmRlbmNpZXMsIHdlIGNhbiBqdXN0IGdvIGFoZWFkIGFuZAogICAgICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgdGhlbS4KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAgICAgICAgcmV0dXJuIHJlcShkZXApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGlmIChyZXR1cm5FeHBvcnRzKQogICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSByZXR1cm5FeHBvcnRzOwogICAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgIH0KICAgIH07Cn07CndpbmRvdy5kZWZpbmUuYW1kID0ge307CnJlcXVpcmUudGxucyA9IHt9Owp3aW5kb3cuaW5pdEJhc2VVcmxzICA9IGZ1bmN0aW9uIGluaXRCYXNlVXJscyh0b3BMZXZlbE5hbWVzcGFjZXMpIHsKICAgIGZvciAodmFyIGkgaW4gdG9wTGV2ZWxOYW1lc3BhY2VzKQogICAgICAgIHJlcXVpcmUudGxuc1tpXSA9IHRvcExldmVsTmFtZXNwYWNlc1tpXTsKfTsKCndpbmRvdy5pbml0U2VuZGVyID0gZnVuY3Rpb24gaW5pdFNlbmRlcigpIHsKCiAgICB2YXIgRXZlbnRFbWl0dGVyID0gd2luZG93LnJlcXVpcmUoImFjZS9saWIvZXZlbnRfZW1pdHRlciIpLkV2ZW50RW1pdHRlcjsKICAgIHZhciBvb3AgPSB3aW5kb3cucmVxdWlyZSgiYWNlL2xpYi9vb3AiKTsKICAgIAogICAgdmFyIFNlbmRlciA9IGZ1bmN0aW9uKCkge307CiAgICAKICAgIChmdW5jdGlvbigpIHsKICAgICAgICAKICAgICAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICAgICAgICAgICAgICAKICAgICAgICB0aGlzLmNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSwgY2FsbGJhY2tJZCkgewogICAgICAgICAgICBwb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAiY2FsbCIsCiAgICAgICAgICAgICAgICBpZDogY2FsbGJhY2tJZCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgIAogICAgICAgIHRoaXMuZW1pdCA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEpIHsKICAgICAgICAgICAgcG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogImV2ZW50IiwKICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgCiAgICB9KS5jYWxsKFNlbmRlci5wcm90b3R5cGUpOwogICAgCiAgICByZXR1cm4gbmV3IFNlbmRlcigpOwp9OwoKdmFyIG1haW4gPSB3aW5kb3cubWFpbiA9IG51bGw7CnZhciBzZW5kZXIgPSB3aW5kb3cuc2VuZGVyID0gbnVsbDsKCndpbmRvdy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7CiAgICB2YXIgbXNnID0gZS5kYXRhOwogICAgaWYgKG1zZy5ldmVudCAmJiBzZW5kZXIpIHsKICAgICAgICBzZW5kZXIuX3NpZ25hbChtc2cuZXZlbnQsIG1zZy5kYXRhKTsKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5jb21tYW5kKSB7CiAgICAgICAgaWYgKG1haW5bbXNnLmNvbW1hbmRdKQogICAgICAgICAgICBtYWluW21zZy5jb21tYW5kXS5hcHBseShtYWluLCBtc2cuYXJncyk7CiAgICAgICAgZWxzZSBpZiAod2luZG93W21zZy5jb21tYW5kXSkKICAgICAgICAgICAgd2luZG93W21zZy5jb21tYW5kXS5hcHBseSh3aW5kb3csIG1zZy5hcmdzKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5rbm93biBjb21tYW5kOiIgKyBtc2cuY29tbWFuZCk7CiAgICB9CiAgICBlbHNlIGlmIChtc2cuaW5pdCkgewogICAgICAgIHdpbmRvdy5pbml0QmFzZVVybHMobXNnLnRsbnMpOwogICAgICAgIHJlcXVpcmUoImFjZS9saWIvZXM1LXNoaW0iKTsKICAgICAgICBzZW5kZXIgPSB3aW5kb3cuc2VuZGVyID0gd2luZG93LmluaXRTZW5kZXIoKTsKICAgICAgICB2YXIgY2xhenogPSByZXF1aXJlKG1zZy5tb2R1bGUpW21zZy5jbGFzc25hbWVdOwogICAgICAgIG1haW4gPSB3aW5kb3cubWFpbiA9IG5ldyBjbGF6eihzZW5kZXIpOwogICAgfQp9Owp9KSh0aGlzKTsKCmFjZS5kZWZpbmUoImFjZS9saWIvb29wIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCmV4cG9ydHMuaW5oZXJpdHMgPSBmdW5jdGlvbihjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9CiAgICB9KTsKfTsKCmV4cG9ydHMubWl4aW4gPSBmdW5jdGlvbihvYmosIG1peGluKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gbWl4aW4pIHsKICAgICAgICBvYmpba2V5XSA9IG1peGluW2tleV07CiAgICB9CiAgICByZXR1cm4gb2JqOwp9OwoKZXhwb3J0cy5pbXBsZW1lbnQgPSBmdW5jdGlvbihwcm90bywgbWl4aW4pIHsKICAgIGV4cG9ydHMubWl4aW4ocHJvdG8sIG1peGluKTsKfTsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL3JhbmdlIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKdmFyIGNvbXBhcmVQb2ludHMgPSBmdW5jdGlvbihwMSwgcDIpIHsKICAgIHJldHVybiBwMS5yb3cgLSBwMi5yb3cgfHwgcDEuY29sdW1uIC0gcDIuY29sdW1uOwp9Owp2YXIgUmFuZ2UgPSBmdW5jdGlvbihzdGFydFJvdywgc3RhcnRDb2x1bW4sIGVuZFJvdywgZW5kQ29sdW1uKSB7CiAgICB0aGlzLnN0YXJ0ID0gewogICAgICAgIHJvdzogc3RhcnRSb3csCiAgICAgICAgY29sdW1uOiBzdGFydENvbHVtbgogICAgfTsKCiAgICB0aGlzLmVuZCA9IHsKICAgICAgICByb3c6IGVuZFJvdywKICAgICAgICBjb2x1bW46IGVuZENvbHVtbgogICAgfTsKfTsKCihmdW5jdGlvbigpIHsKICAgIHRoaXMuaXNFcXVhbCA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQucm93ID09PSByYW5nZS5zdGFydC5yb3cgJiYKICAgICAgICAgICAgdGhpcy5lbmQucm93ID09PSByYW5nZS5lbmQucm93ICYmCiAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uID09PSByYW5nZS5zdGFydC5jb2x1bW4gJiYKICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID09PSByYW5nZS5lbmQuY29sdW1uOwogICAgfTsKICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gKCJSYW5nZTogWyIgKyB0aGlzLnN0YXJ0LnJvdyArICIvIiArIHRoaXMuc3RhcnQuY29sdW1uICsKICAgICAgICAgICAgIl0gLT4gWyIgKyB0aGlzLmVuZC5yb3cgKyAiLyIgKyB0aGlzLmVuZC5jb2x1bW4gKyAiXSIpOwogICAgfTsKCiAgICB0aGlzLmNvbnRhaW5zID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PSAwOwogICAgfTsKICAgIHRoaXMuY29tcGFyZVJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICB2YXIgY21wLAogICAgICAgICAgICBlbmQgPSByYW5nZS5lbmQsCiAgICAgICAgICAgIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQ7CgogICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShlbmQucm93LCBlbmQuY29sdW1uKTsKICAgICAgICBpZiAoY21wID09IDEpIHsKICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTsKICAgICAgICAgICAgaWYgKGNtcCA9PSAxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMjsKICAgICAgICAgICAgfSBlbHNlIGlmIChjbXAgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoY21wID09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiAtMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjbXAgPSB0aGlzLmNvbXBhcmUoc3RhcnQucm93LCBzdGFydC5jb2x1bW4pOwogICAgICAgICAgICBpZiAoY21wID09IC0xKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY21wID09IDEpIHsKICAgICAgICAgICAgICAgIHJldHVybiA0MjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuY29tcGFyZVBvaW50ID0gZnVuY3Rpb24ocCkgewogICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUocC5yb3csIHAuY29sdW1uKTsKICAgIH07CiAgICB0aGlzLmNvbnRhaW5zUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSkgewogICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVQb2ludChyYW5nZS5zdGFydCkgPT0gMCAmJiB0aGlzLmNvbXBhcmVQb2ludChyYW5nZS5lbmQpID09IDA7CiAgICB9OwogICAgdGhpcy5pbnRlcnNlY3RzID0gZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJlUmFuZ2UocmFuZ2UpOwogICAgICAgIHJldHVybiAoY21wID09IC0xIHx8IGNtcCA9PSAwIHx8IGNtcCA9PSAxKTsKICAgIH07CiAgICB0aGlzLmlzRW5kID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5lbmQucm93ID09IHJvdyAmJiB0aGlzLmVuZC5jb2x1bW4gPT0gY29sdW1uOwogICAgfTsKICAgIHRoaXMuaXNTdGFydCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQucm93ID09IHJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PSBjb2x1bW47CiAgICB9OwogICAgdGhpcy5zZXRTdGFydCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHR5cGVvZiByb3cgPT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPSByb3cuY29sdW1uOwogICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IHJvdy5yb3c7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zdGFydC5yb3cgPSByb3c7CiAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uID0gY29sdW1uOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLnNldEVuZCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHR5cGVvZiByb3cgPT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID0gcm93LmNvbHVtbjsKICAgICAgICAgICAgdGhpcy5lbmQucm93ID0gcm93LnJvdzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSByb3c7CiAgICAgICAgICAgIHRoaXMuZW5kLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5pbnNpZGUgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pID09IDApIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmQocm93LCBjb2x1bW4pIHx8IHRoaXMuaXNTdGFydChyb3csIGNvbHVtbikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CiAgICB0aGlzLmluc2lkZVN0YXJ0ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PSAwKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzRW5kKHJvdywgY29sdW1uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuaW5zaWRlRW5kID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PSAwKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzU3RhcnQocm93LCBjb2x1bW4pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdGhpcy5jb21wYXJlID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aUxpbmUoKSkgewogICAgICAgICAgICBpZiAocm93ID09PSB0aGlzLnN0YXJ0LnJvdykgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA8IHRoaXMuc3RhcnQuY29sdW1uID8gLTEgOiAoY29sdW1uID4gdGhpcy5lbmQuY29sdW1uID8gMSA6IDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocm93IDwgdGhpcy5zdGFydC5yb3cpCiAgICAgICAgICAgIHJldHVybiAtMTsKCiAgICAgICAgaWYgKHJvdyA+IHRoaXMuZW5kLnJvdykKICAgICAgICAgICAgcmV0dXJuIDE7CgogICAgICAgIGlmICh0aGlzLnN0YXJ0LnJvdyA9PT0gcm93KQogICAgICAgICAgICByZXR1cm4gY29sdW1uID49IHRoaXMuc3RhcnQuY29sdW1uID8gMCA6IC0xOwoKICAgICAgICBpZiAodGhpcy5lbmQucm93ID09PSByb3cpCiAgICAgICAgICAgIHJldHVybiBjb2x1bW4gPD0gdGhpcy5lbmQuY29sdW1uID8gMCA6IDE7CgogICAgICAgIHJldHVybiAwOwogICAgfTsKICAgIHRoaXMuY29tcGFyZVN0YXJ0ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbikgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuY29tcGFyZUVuZCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PSByb3cgJiYgdGhpcy5lbmQuY29sdW1uID09IGNvbHVtbikgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jb21wYXJlSW5zaWRlID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5lbmQucm93ID09IHJvdyAmJiB0aGlzLmVuZC5jb2x1bW4gPT0gY29sdW1uKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbikgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuY2xpcFJvd3MgPSBmdW5jdGlvbihmaXJzdFJvdywgbGFzdFJvdykgewogICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPiBsYXN0Um93KQogICAgICAgICAgICB2YXIgZW5kID0ge3JvdzogbGFzdFJvdyArIDEsIGNvbHVtbjogMH07CiAgICAgICAgZWxzZSBpZiAodGhpcy5lbmQucm93IDwgZmlyc3RSb3cpCiAgICAgICAgICAgIHZhciBlbmQgPSB7cm93OiBmaXJzdFJvdywgY29sdW1uOiAwfTsKCiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID4gbGFzdFJvdykKICAgICAgICAgICAgdmFyIHN0YXJ0ID0ge3JvdzogbGFzdFJvdyArIDEsIGNvbHVtbjogMH07CiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGFydC5yb3cgPCBmaXJzdFJvdykKICAgICAgICAgICAgdmFyIHN0YXJ0ID0ge3JvdzogZmlyc3RSb3csIGNvbHVtbjogMH07CgogICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0IHx8IHRoaXMuc3RhcnQsIGVuZCB8fCB0aGlzLmVuZCk7CiAgICB9OwogICAgdGhpcy5leHRlbmQgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pOwoKICAgICAgICBpZiAoY21wID09IDApCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIGVsc2UgaWYgKGNtcCA9PSAtMSkKICAgICAgICAgICAgdmFyIHN0YXJ0ID0ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07CiAgICAgICAgZWxzZQogICAgICAgICAgICB2YXIgZW5kID0ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07CgogICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0IHx8IHRoaXMuc3RhcnQsIGVuZCB8fCB0aGlzLmVuZCk7CiAgICB9OwoKICAgIHRoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiAodGhpcy5zdGFydC5yb3cgPT09IHRoaXMuZW5kLnJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gdGhpcy5lbmQuY29sdW1uKTsKICAgIH07CiAgICB0aGlzLmlzTXVsdGlMaW5lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXJ0LnJvdyAhPT0gdGhpcy5lbmQucm93KTsKICAgIH07CiAgICB0aGlzLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHModGhpcy5zdGFydCwgdGhpcy5lbmQpOwogICAgfTsKICAgIHRoaXMuY29sbGFwc2VSb3dzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHRoaXMuZW5kLmNvbHVtbiA9PSAwKQogICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMuc3RhcnQucm93LCAwLCBNYXRoLm1heCh0aGlzLnN0YXJ0LnJvdywgdGhpcy5lbmQucm93LTEpLCAwKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2UodGhpcy5zdGFydC5yb3csIDAsIHRoaXMuZW5kLnJvdywgMCk7CiAgICB9OwogICAgdGhpcy50b1NjcmVlblJhbmdlID0gZnVuY3Rpb24oc2Vzc2lvbikgewogICAgICAgIHZhciBzY3JlZW5Qb3NTdGFydCA9IHNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHRoaXMuc3RhcnQpOwogICAgICAgIHZhciBzY3JlZW5Qb3NFbmQgPSBzZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmVuZCk7CgogICAgICAgIHJldHVybiBuZXcgUmFuZ2UoCiAgICAgICAgICAgIHNjcmVlblBvc1N0YXJ0LnJvdywgc2NyZWVuUG9zU3RhcnQuY29sdW1uLAogICAgICAgICAgICBzY3JlZW5Qb3NFbmQucm93LCBzY3JlZW5Qb3NFbmQuY29sdW1uCiAgICAgICAgKTsKICAgIH07CiAgICB0aGlzLm1vdmVCeSA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgdGhpcy5zdGFydC5yb3cgKz0gcm93OwogICAgICAgIHRoaXMuc3RhcnQuY29sdW1uICs9IGNvbHVtbjsKICAgICAgICB0aGlzLmVuZC5yb3cgKz0gcm93OwogICAgICAgIHRoaXMuZW5kLmNvbHVtbiArPSBjb2x1bW47CiAgICB9OwoKfSkuY2FsbChSYW5nZS5wcm90b3R5cGUpOwpSYW5nZS5mcm9tUG9pbnRzID0gZnVuY3Rpb24oc3RhcnQsIGVuZCkgewogICAgcmV0dXJuIG5ldyBSYW5nZShzdGFydC5yb3csIHN0YXJ0LmNvbHVtbiwgZW5kLnJvdywgZW5kLmNvbHVtbik7Cn07ClJhbmdlLmNvbXBhcmVQb2ludHMgPSBjb21wYXJlUG9pbnRzOwoKUmFuZ2UuY29tcGFyZVBvaW50cyA9IGZ1bmN0aW9uKHAxLCBwMikgewogICAgcmV0dXJuIHAxLnJvdyAtIHAyLnJvdyB8fCBwMS5jb2x1bW4gLSBwMi5jb2x1bW47Cn07CgoKZXhwb3J0cy5SYW5nZSA9IFJhbmdlOwp9KTsKCmFjZS5kZWZpbmUoImFjZS9hcHBseV9kZWx0YSIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7CgpmdW5jdGlvbiB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsIGVycm9yVGV4dCl7CiAgICBjb25zb2xlLmxvZygiSW52YWxpZCBEZWx0YToiLCBkZWx0YSk7CiAgICB0aHJvdyAiSW52YWxpZCBEZWx0YTogIiArIGVycm9yVGV4dDsKfQoKZnVuY3Rpb24gcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBwb3NpdGlvbikgewogICAgcmV0dXJuIHBvc2l0aW9uLnJvdyAgICA+PSAwICYmIHBvc2l0aW9uLnJvdyAgICA8ICBkb2NMaW5lcy5sZW5ndGggJiYKICAgICAgICAgICBwb3NpdGlvbi5jb2x1bW4gPj0gMCAmJiBwb3NpdGlvbi5jb2x1bW4gPD0gZG9jTGluZXNbcG9zaXRpb24ucm93XS5sZW5ndGg7Cn0KCmZ1bmN0aW9uIHZhbGlkYXRlRGVsdGEoZG9jTGluZXMsIGRlbHRhKSB7CiAgICBpZiAoZGVsdGEuYWN0aW9uICE9ICJpbnNlcnQiICYmIGRlbHRhLmFjdGlvbiAhPSAicmVtb3ZlIikKICAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsICJkZWx0YS5hY3Rpb24gbXVzdCBiZSAnaW5zZXJ0JyBvciAncmVtb3ZlJyIpOwogICAgaWYgKCEoZGVsdGEubGluZXMgaW5zdGFuY2VvZiBBcnJheSkpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEubGluZXMgbXVzdCBiZSBhbiBBcnJheSIpOwogICAgaWYgKCFkZWx0YS5zdGFydCB8fCAhZGVsdGEuZW5kKQogICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuc3RhcnQvZW5kIG11c3QgYmUgYW4gcHJlc2VudCIpOwogICAgdmFyIHN0YXJ0ID0gZGVsdGEuc3RhcnQ7CiAgICBpZiAoIXBvc2l0aW9uSW5Eb2N1bWVudChkb2NMaW5lcywgZGVsdGEuc3RhcnQpKQogICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgImRlbHRhLnN0YXJ0IG11c3QgYmUgY29udGFpbmVkIGluIGRvY3VtZW50Iik7CiAgICB2YXIgZW5kID0gZGVsdGEuZW5kOwogICAgaWYgKGRlbHRhLmFjdGlvbiA9PSAicmVtb3ZlIiAmJiAhcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBlbmQpKQogICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgImRlbHRhLmVuZCBtdXN0IGNvbnRhaW5lZCBpbiBkb2N1bWVudCBmb3IgJ3JlbW92ZScgYWN0aW9ucyIpOwogICAgdmFyIG51bVJhbmdlUm93cyA9IGVuZC5yb3cgLSBzdGFydC5yb3c7CiAgICB2YXIgbnVtUmFuZ2VMYXN0TGluZUNoYXJzID0gKGVuZC5jb2x1bW4gLSAobnVtUmFuZ2VSb3dzID09IDAgPyBzdGFydC5jb2x1bW4gOiAwKSk7CiAgICBpZiAobnVtUmFuZ2VSb3dzICE9IGRlbHRhLmxpbmVzLmxlbmd0aCAtIDEgfHwgZGVsdGEubGluZXNbbnVtUmFuZ2VSb3dzXS5sZW5ndGggIT0gbnVtUmFuZ2VMYXN0TGluZUNoYXJzKQogICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgImRlbHRhLnJhbmdlIG11c3QgbWF0Y2ggZGVsdGEgbGluZXMiKTsKfQoKZXhwb3J0cy5hcHBseURlbHRhID0gZnVuY3Rpb24oZG9jTGluZXMsIGRlbHRhLCBkb05vdFZhbGlkYXRlKSB7CiAgICAKICAgIHZhciByb3cgPSBkZWx0YS5zdGFydC5yb3c7CiAgICB2YXIgc3RhcnRDb2x1bW4gPSBkZWx0YS5zdGFydC5jb2x1bW47CiAgICB2YXIgbGluZSA9IGRvY0xpbmVzW3Jvd10gfHwgIiI7CiAgICBzd2l0Y2ggKGRlbHRhLmFjdGlvbikgewogICAgICAgIGNhc2UgImluc2VydCI6CiAgICAgICAgICAgIHZhciBsaW5lcyA9IGRlbHRhLmxpbmVzOwogICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3ddID0gbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZGVsdGEubGluZXNbMF0gKyBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtyb3csIDFdLmNvbmNhdChkZWx0YS5saW5lcyk7CiAgICAgICAgICAgICAgICBkb2NMaW5lcy5zcGxpY2UuYXBwbHkoZG9jTGluZXMsIGFyZ3MpOwogICAgICAgICAgICAgICAgZG9jTGluZXNbcm93XSA9IGxpbmUuc3Vic3RyaW5nKDAsIHN0YXJ0Q29sdW1uKSArIGRvY0xpbmVzW3Jvd107CiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3cgKyBkZWx0YS5saW5lcy5sZW5ndGggLSAxXSArPSBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicmVtb3ZlIjoKICAgICAgICAgICAgdmFyIGVuZENvbHVtbiA9IGRlbHRhLmVuZC5jb2x1bW47CiAgICAgICAgICAgIHZhciBlbmRSb3cgPSBkZWx0YS5lbmQucm93OwogICAgICAgICAgICBpZiAocm93ID09PSBlbmRSb3cpIHsKICAgICAgICAgICAgICAgIGRvY0xpbmVzW3Jvd10gPSBsaW5lLnN1YnN0cmluZygwLCBzdGFydENvbHVtbikgKyBsaW5lLnN1YnN0cmluZyhlbmRDb2x1bW4pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZG9jTGluZXMuc3BsaWNlKAogICAgICAgICAgICAgICAgICAgIHJvdywgZW5kUm93IC0gcm93ICsgMSwKICAgICAgICAgICAgICAgICAgICBsaW5lLnN1YnN0cmluZygwLCBzdGFydENvbHVtbikgKyBkb2NMaW5lc1tlbmRSb3ddLnN1YnN0cmluZyhlbmRDb2x1bW4pCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgfQp9Owp9KTsKCmFjZS5kZWZpbmUoImFjZS9saWIvZXZlbnRfZW1pdHRlciIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgRXZlbnRFbWl0dGVyID0ge307CnZhciBzdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHsgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlOyB9Owp2YXIgcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfTsKCkV2ZW50RW1pdHRlci5fZW1pdCA9CkV2ZW50RW1pdHRlci5fZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkgewogICAgdGhpcy5fZXZlbnRSZWdpc3RyeSB8fCAodGhpcy5fZXZlbnRSZWdpc3RyeSA9IHt9KTsKICAgIHRoaXMuX2RlZmF1bHRIYW5kbGVycyB8fCAodGhpcy5fZGVmYXVsdEhhbmRsZXJzID0ge30pOwoKICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV0gfHwgW107CiAgICB2YXIgZGVmYXVsdEhhbmRsZXIgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnNbZXZlbnROYW1lXTsKICAgIGlmICghbGlzdGVuZXJzLmxlbmd0aCAmJiAhZGVmYXVsdEhhbmRsZXIpCiAgICAgICAgcmV0dXJuOwoKICAgIGlmICh0eXBlb2YgZSAhPSAib2JqZWN0IiB8fCAhZSkKICAgICAgICBlID0ge307CgogICAgaWYgKCFlLnR5cGUpCiAgICAgICAgZS50eXBlID0gZXZlbnROYW1lOwogICAgaWYgKCFlLnN0b3BQcm9wYWdhdGlvbikKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IHN0b3BQcm9wYWdhdGlvbjsKICAgIGlmICghZS5wcmV2ZW50RGVmYXVsdCkKICAgICAgICBlLnByZXZlbnREZWZhdWx0ID0gcHJldmVudERlZmF1bHQ7CgogICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKCk7CiAgICBmb3IgKHZhciBpPTA7IGk8bGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGlzdGVuZXJzW2ldKGUsIHRoaXMpOwogICAgICAgIGlmIChlLnByb3BhZ2F0aW9uU3RvcHBlZCkKICAgICAgICAgICAgYnJlYWs7CiAgICB9CiAgICAKICAgIGlmIChkZWZhdWx0SGFuZGxlciAmJiAhZS5kZWZhdWx0UHJldmVudGVkKQogICAgICAgIHJldHVybiBkZWZhdWx0SGFuZGxlcihlLCB0aGlzKTsKfTsKCgpFdmVudEVtaXR0ZXIuX3NpZ25hbCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkgewogICAgdmFyIGxpc3RlbmVycyA9ICh0aGlzLl9ldmVudFJlZ2lzdHJ5IHx8IHt9KVtldmVudE5hbWVdOwogICAgaWYgKCFsaXN0ZW5lcnMpCiAgICAgICAgcmV0dXJuOwogICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKCk7CiAgICBmb3IgKHZhciBpPTA7IGk8bGlzdGVuZXJzLmxlbmd0aDsgaSsrKQogICAgICAgIGxpc3RlbmVyc1tpXShlLCB0aGlzKTsKfTsKCkV2ZW50RW1pdHRlci5vbmNlID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgdmFyIF9zZWxmID0gdGhpczsKICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uIG5ld0NhbGxiYWNrKCkgewogICAgICAgIF9zZWxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBuZXdDYWxsYmFjayk7CiAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIH0pOwogICAgaWYgKCFjYWxsYmFjaykgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICAgIGNhbGxiYWNrID0gcmVzb2x2ZTsKICAgICAgICB9KTsKICAgIH0KfTsKCgpFdmVudEVtaXR0ZXIuc2V0RGVmYXVsdEhhbmRsZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnM7CiAgICBpZiAoIWhhbmRsZXJzKQogICAgICAgIGhhbmRsZXJzID0gdGhpcy5fZGVmYXVsdEhhbmRsZXJzID0ge19kaXNhYmxlZF86IHt9fTsKICAgIAogICAgaWYgKGhhbmRsZXJzW2V2ZW50TmFtZV0pIHsKICAgICAgICB2YXIgb2xkID0gaGFuZGxlcnNbZXZlbnROYW1lXTsKICAgICAgICB2YXIgZGlzYWJsZWQgPSBoYW5kbGVycy5fZGlzYWJsZWRfW2V2ZW50TmFtZV07CiAgICAgICAgaWYgKCFkaXNhYmxlZCkKICAgICAgICAgICAgaGFuZGxlcnMuX2Rpc2FibGVkX1tldmVudE5hbWVdID0gZGlzYWJsZWQgPSBbXTsKICAgICAgICBkaXNhYmxlZC5wdXNoKG9sZCk7CiAgICAgICAgdmFyIGkgPSBkaXNhYmxlZC5pbmRleE9mKGNhbGxiYWNrKTsKICAgICAgICBpZiAoaSAhPSAtMSkgCiAgICAgICAgICAgIGRpc2FibGVkLnNwbGljZShpLCAxKTsKICAgIH0KICAgIGhhbmRsZXJzW2V2ZW50TmFtZV0gPSBjYWxsYmFjazsKfTsKRXZlbnRFbWl0dGVyLnJlbW92ZURlZmF1bHRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgdmFyIGhhbmRsZXJzID0gdGhpcy5fZGVmYXVsdEhhbmRsZXJzOwogICAgaWYgKCFoYW5kbGVycykKICAgICAgICByZXR1cm47CiAgICB2YXIgZGlzYWJsZWQgPSBoYW5kbGVycy5fZGlzYWJsZWRfW2V2ZW50TmFtZV07CiAgICAKICAgIGlmIChoYW5kbGVyc1tldmVudE5hbWVdID09IGNhbGxiYWNrKSB7CiAgICAgICAgaWYgKGRpc2FibGVkKQogICAgICAgICAgICB0aGlzLnNldERlZmF1bHRIYW5kbGVyKGV2ZW50TmFtZSwgZGlzYWJsZWQucG9wKCkpOwogICAgfSBlbHNlIGlmIChkaXNhYmxlZCkgewogICAgICAgIHZhciBpID0gZGlzYWJsZWQuaW5kZXhPZihjYWxsYmFjayk7CiAgICAgICAgaWYgKGkgIT0gLTEpCiAgICAgICAgICAgIGRpc2FibGVkLnNwbGljZShpLCAxKTsKICAgIH0KfTsKCkV2ZW50RW1pdHRlci5vbiA9CkV2ZW50RW1pdHRlci5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaywgY2FwdHVyaW5nKSB7CiAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5ID0gdGhpcy5fZXZlbnRSZWdpc3RyeSB8fCB7fTsKCiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdOwogICAgaWYgKCFsaXN0ZW5lcnMpCiAgICAgICAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdID0gW107CgogICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSA9PSAtMSkKICAgICAgICBsaXN0ZW5lcnNbY2FwdHVyaW5nID8gInVuc2hpZnQiIDogInB1c2giXShjYWxsYmFjayk7CiAgICByZXR1cm4gY2FsbGJhY2s7Cn07CgpFdmVudEVtaXR0ZXIub2ZmID0KRXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyID0KRXZlbnRFbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5ID0gdGhpcy5fZXZlbnRSZWdpc3RyeSB8fCB7fTsKCiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdOwogICAgaWYgKCFsaXN0ZW5lcnMpCiAgICAgICAgcmV0dXJuOwoKICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTsKICAgIGlmIChpbmRleCAhPT0gLTEpCiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7Cn07CgpFdmVudEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7CiAgICBpZiAodGhpcy5fZXZlbnRSZWdpc3RyeSkgdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdID0gW107Cn07CgpleHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL2FuY2hvciIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi9saWIvb29wIik7CnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCIuL2xpYi9ldmVudF9lbWl0dGVyIikuRXZlbnRFbWl0dGVyOwoKdmFyIEFuY2hvciA9IGV4cG9ydHMuQW5jaG9yID0gZnVuY3Rpb24oZG9jLCByb3csIGNvbHVtbikgewogICAgdGhpcy4kb25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7CiAgICB0aGlzLmF0dGFjaChkb2MpOwogICAgCiAgICBpZiAodHlwZW9mIGNvbHVtbiA9PSAidW5kZWZpbmVkIikKICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHJvdy5yb3csIHJvdy5jb2x1bW4pOwogICAgZWxzZQogICAgICAgIHRoaXMuc2V0UG9zaXRpb24ocm93LCBjb2x1bW4pOwp9OwoKKGZ1bmN0aW9uKCkgewoKICAgIG9vcC5pbXBsZW1lbnQodGhpcywgRXZlbnRFbWl0dGVyKTsKICAgIHRoaXMuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudCh0aGlzLnJvdywgdGhpcy5jb2x1bW4pOwogICAgfTsKICAgIHRoaXMuZ2V0RG9jdW1lbnQgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudDsKICAgIH07CiAgICB0aGlzLiRpbnNlcnRSaWdodCA9IGZhbHNlOwogICAgdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uKGRlbHRhKSB7CiAgICAgICAgaWYgKGRlbHRhLnN0YXJ0LnJvdyA9PSBkZWx0YS5lbmQucm93ICYmIGRlbHRhLnN0YXJ0LnJvdyAhPSB0aGlzLnJvdykKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBpZiAoZGVsdGEuc3RhcnQucm93ID4gdGhpcy5yb3cpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgCiAgICAgICAgdmFyIHBvaW50ID0gJGdldFRyYW5zZm9ybWVkUG9pbnQoZGVsdGEsIHtyb3c6IHRoaXMucm93LCBjb2x1bW46IHRoaXMuY29sdW1ufSwgdGhpcy4kaW5zZXJ0UmlnaHQpOwogICAgICAgIHRoaXMuc2V0UG9zaXRpb24ocG9pbnQucm93LCBwb2ludC5jb2x1bW4sIHRydWUpOwogICAgfTsKICAgIAogICAgZnVuY3Rpb24gJHBvaW50c0luT3JkZXIocG9pbnQxLCBwb2ludDIsIGVxdWFsUG9pbnRzSW5PcmRlcikgewogICAgICAgIHZhciBiQ29sSXNBZnRlciA9IGVxdWFsUG9pbnRzSW5PcmRlciA/IHBvaW50MS5jb2x1bW4gPD0gcG9pbnQyLmNvbHVtbiA6IHBvaW50MS5jb2x1bW4gPCBwb2ludDIuY29sdW1uOwogICAgICAgIHJldHVybiAocG9pbnQxLnJvdyA8IHBvaW50Mi5yb3cpIHx8IChwb2ludDEucm93ID09IHBvaW50Mi5yb3cgJiYgYkNvbElzQWZ0ZXIpOwogICAgfQogICAgICAgICAgICAKICAgIGZ1bmN0aW9uICRnZXRUcmFuc2Zvcm1lZFBvaW50KGRlbHRhLCBwb2ludCwgbW92ZUlmRXF1YWwpIHsKICAgICAgICB2YXIgZGVsdGFJc0luc2VydCA9IGRlbHRhLmFjdGlvbiA9PSAiaW5zZXJ0IjsKICAgICAgICB2YXIgZGVsdGFSb3dTaGlmdCA9IChkZWx0YUlzSW5zZXJ0ID8gMSA6IC0xKSAqIChkZWx0YS5lbmQucm93ICAgIC0gZGVsdGEuc3RhcnQucm93KTsKICAgICAgICB2YXIgZGVsdGFDb2xTaGlmdCA9IChkZWx0YUlzSW5zZXJ0ID8gMSA6IC0xKSAqIChkZWx0YS5lbmQuY29sdW1uIC0gZGVsdGEuc3RhcnQuY29sdW1uKTsKICAgICAgICB2YXIgZGVsdGFTdGFydCA9IGRlbHRhLnN0YXJ0OwogICAgICAgIHZhciBkZWx0YUVuZCA9IGRlbHRhSXNJbnNlcnQgPyBkZWx0YVN0YXJ0IDogZGVsdGEuZW5kOyAvLyBDb2xsYXBzZSBpbnNlcnQgcmFuZ2UuCiAgICAgICAgaWYgKCRwb2ludHNJbk9yZGVyKHBvaW50LCBkZWx0YVN0YXJ0LCBtb3ZlSWZFcXVhbCkpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJvdzogcG9pbnQucm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBwb2ludC5jb2x1bW4KICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgaWYgKCRwb2ludHNJbk9yZGVyKGRlbHRhRW5kLCBwb2ludCwgIW1vdmVJZkVxdWFsKSkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcm93OiBwb2ludC5yb3cgKyBkZWx0YVJvd1NoaWZ0LAogICAgICAgICAgICAgICAgY29sdW1uOiBwb2ludC5jb2x1bW4gKyAocG9pbnQucm93ID09IGRlbHRhRW5kLnJvdyA/IGRlbHRhQ29sU2hpZnQgOiAwKQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByb3c6IGRlbHRhU3RhcnQucm93LAogICAgICAgICAgICBjb2x1bW46IGRlbHRhU3RhcnQuY29sdW1uCiAgICAgICAgfTsKICAgIH0KICAgIHRoaXMuc2V0UG9zaXRpb24gPSBmdW5jdGlvbihyb3csIGNvbHVtbiwgbm9DbGlwKSB7CiAgICAgICAgdmFyIHBvczsKICAgICAgICBpZiAobm9DbGlwKSB7CiAgICAgICAgICAgIHBvcyA9IHsKICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwb3MgPSB0aGlzLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KHJvdywgY29sdW1uKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnJvdyA9PSBwb3Mucm93ICYmIHRoaXMuY29sdW1uID09IHBvcy5jb2x1bW4pCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgdmFyIG9sZCA9IHsKICAgICAgICAgICAgcm93OiB0aGlzLnJvdywKICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbgogICAgICAgIH07CgogICAgICAgIHRoaXMucm93ID0gcG9zLnJvdzsKICAgICAgICB0aGlzLmNvbHVtbiA9IHBvcy5jb2x1bW47CiAgICAgICAgdGhpcy5fc2lnbmFsKCJjaGFuZ2UiLCB7CiAgICAgICAgICAgIG9sZDogb2xkLAogICAgICAgICAgICB2YWx1ZTogcG9zCiAgICAgICAgfSk7CiAgICB9OwogICAgdGhpcy5kZXRhY2ggPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIHRoaXMuJG9uQ2hhbmdlKTsKICAgIH07CiAgICB0aGlzLmF0dGFjaCA9IGZ1bmN0aW9uKGRvYykgewogICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2MgfHwgdGhpcy5kb2N1bWVudDsKICAgICAgICB0aGlzLmRvY3VtZW50Lm9uKCJjaGFuZ2UiLCB0aGlzLiRvbkNoYW5nZSk7CiAgICB9OwogICAgdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgdmFyIHBvcyA9IHt9OwoKICAgICAgICBpZiAocm93ID49IHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkpIHsKICAgICAgICAgICAgcG9zLnJvdyA9IE1hdGgubWF4KDAsIHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkgLSAxKTsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJvdyA8IDApIHsKICAgICAgICAgICAgcG9zLnJvdyA9IDA7CiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcG9zLnJvdyA9IHJvdzsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IE1hdGgubWluKHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGgsIE1hdGgubWF4KDAsIGNvbHVtbikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbHVtbiA8IDApCiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwOwoKICAgICAgICByZXR1cm4gcG9zOwogICAgfTsKCn0pLmNhbGwoQW5jaG9yLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9kb2N1bWVudCIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi9saWIvb29wIik7CnZhciBhcHBseURlbHRhID0gcmVxdWlyZSgiLi9hcHBseV9kZWx0YSIpLmFwcGx5RGVsdGE7CnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCIuL2xpYi9ldmVudF9lbWl0dGVyIikuRXZlbnRFbWl0dGVyOwp2YXIgUmFuZ2UgPSByZXF1aXJlKCIuL3JhbmdlIikuUmFuZ2U7CnZhciBBbmNob3IgPSByZXF1aXJlKCIuL2FuY2hvciIpLkFuY2hvcjsKCnZhciBEb2N1bWVudCA9IGZ1bmN0aW9uKHRleHRPckxpbmVzKSB7CiAgICB0aGlzLiRsaW5lcyA9IFsiIl07CiAgICBpZiAodGV4dE9yTGluZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbGluZXMgPSBbIiJdOwogICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRleHRPckxpbmVzKSkgewogICAgICAgIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMoe3JvdzogMCwgY29sdW1uOiAwfSwgdGV4dE9yTGluZXMpOwogICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluc2VydCh7cm93OiAwLCBjb2x1bW46MH0sIHRleHRPckxpbmVzKTsKICAgIH0KfTsKCihmdW5jdGlvbigpIHsKCiAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgIHZhciBsZW4gPSB0aGlzLmdldExlbmd0aCgpIC0gMTsKICAgICAgICB0aGlzLnJlbW92ZShuZXcgUmFuZ2UoMCwgMCwgbGVuLCB0aGlzLmdldExpbmUobGVuKS5sZW5ndGgpKTsKICAgICAgICB0aGlzLmluc2VydCh7cm93OiAwLCBjb2x1bW46IDB9LCB0ZXh0KTsKICAgIH07CiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsTGluZXMoKS5qb2luKHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpKTsKICAgIH07CiAgICB0aGlzLmNyZWF0ZUFuY2hvciA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7CiAgICAgICAgcmV0dXJuIG5ldyBBbmNob3IodGhpcywgcm93LCBjb2x1bW4pOwogICAgfTsKICAgIGlmICgiYWFhIi5zcGxpdCgvYS8pLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJHNwbGl0ID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cclxufFxyL2csICJcbiIpLnNwbGl0KCJcbiIpOwogICAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNwbGl0ID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXHJcbnxccnxcbi8pOwogICAgICAgIH07CiAgICB9CgoKICAgIHRoaXMuJGRldGVjdE5ld0xpbmUgPSBmdW5jdGlvbih0ZXh0KSB7CiAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCgvXi4qPyhcclxufFxyfFxuKS9tKTsKICAgICAgICB0aGlzLiRhdXRvTmV3TGluZSA9IG1hdGNoID8gbWF0Y2hbMV0gOiAiXG4iOwogICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlTmV3TGluZU1vZGUiKTsKICAgIH07CiAgICB0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBzd2l0Y2ggKHRoaXMuJG5ld0xpbmVNb2RlKSB7CiAgICAgICAgICBjYXNlICJ3aW5kb3dzIjoKICAgICAgICAgICAgcmV0dXJuICJcclxuIjsKICAgICAgICAgIGNhc2UgInVuaXgiOgogICAgICAgICAgICByZXR1cm4gIlxuIjsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRhdXRvTmV3TGluZSB8fCAiXG4iOwogICAgICAgIH0KICAgIH07CgogICAgdGhpcy4kYXV0b05ld0xpbmUgPSAiIjsKICAgIHRoaXMuJG5ld0xpbmVNb2RlID0gImF1dG8iOwogICAgdGhpcy5zZXROZXdMaW5lTW9kZSA9IGZ1bmN0aW9uKG5ld0xpbmVNb2RlKSB7CiAgICAgICAgaWYgKHRoaXMuJG5ld0xpbmVNb2RlID09PSBuZXdMaW5lTW9kZSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICB0aGlzLiRuZXdMaW5lTW9kZSA9IG5ld0xpbmVNb2RlOwogICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlTmV3TGluZU1vZGUiKTsKICAgIH07CiAgICB0aGlzLmdldE5ld0xpbmVNb2RlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG5ld0xpbmVNb2RlOwogICAgfTsKICAgIHRoaXMuaXNOZXdMaW5lID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgIHJldHVybiAodGV4dCA9PSAiXHJcbiIgfHwgdGV4dCA9PSAiXHIiIHx8IHRleHQgPT0gIlxuIik7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lID0gZnVuY3Rpb24ocm93KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzW3Jvd10gfHwgIiI7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lcyA9IGZ1bmN0aW9uKGZpcnN0Um93LCBsYXN0Um93KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzLnNsaWNlKGZpcnN0Um93LCBsYXN0Um93ICsgMSk7CiAgICB9OwogICAgdGhpcy5nZXRBbGxMaW5lcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldExpbmVzKDAsIHRoaXMuZ2V0TGVuZ3RoKCkpOwogICAgfTsKICAgIHRoaXMuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzLmxlbmd0aDsKICAgIH07CiAgICB0aGlzLmdldFRleHRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSkuam9pbih0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIoKSk7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lc0ZvclJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICB2YXIgbGluZXM7CiAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LnJvdyA9PT0gcmFuZ2UuZW5kLnJvdykgewogICAgICAgICAgICBsaW5lcyA9IFt0aGlzLmdldExpbmUocmFuZ2Uuc3RhcnQucm93KS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uLCByYW5nZS5lbmQuY29sdW1uKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGluZXMgPSB0aGlzLmdldExpbmVzKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2UuZW5kLnJvdyk7CiAgICAgICAgICAgIGxpbmVzWzBdID0gKGxpbmVzWzBdIHx8ICIiKS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uKTsKICAgICAgICAgICAgdmFyIGwgPSBsaW5lcy5sZW5ndGggLSAxOwogICAgICAgICAgICBpZiAocmFuZ2UuZW5kLnJvdyAtIHJhbmdlLnN0YXJ0LnJvdyA9PSBsKQogICAgICAgICAgICAgICAgbGluZXNbbF0gPSBsaW5lc1tsXS5zdWJzdHJpbmcoMCwgcmFuZ2UuZW5kLmNvbHVtbik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaW5lczsKICAgIH07CiAgICB0aGlzLmluc2VydExpbmVzID0gZnVuY3Rpb24ocm93LCBsaW5lcykgewogICAgICAgIGNvbnNvbGUud2FybigiVXNlIG9mIGRvY3VtZW50Lmluc2VydExpbmVzIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgaW5zZXJ0RnVsbExpbmVzIG1ldGhvZCBpbnN0ZWFkLiIpOwogICAgICAgIHJldHVybiB0aGlzLmluc2VydEZ1bGxMaW5lcyhyb3csIGxpbmVzKTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUxpbmVzID0gZnVuY3Rpb24oZmlyc3RSb3csIGxhc3RSb3cpIHsKICAgICAgICBjb25zb2xlLndhcm4oIlVzZSBvZiBkb2N1bWVudC5yZW1vdmVMaW5lcyBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIHJlbW92ZUZ1bGxMaW5lcyBtZXRob2QgaW5zdGVhZC4iKTsKICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVGdWxsTGluZXMoZmlyc3RSb3csIGxhc3RSb3cpOwogICAgfTsKICAgIHRoaXMuaW5zZXJ0TmV3TGluZSA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJVc2Ugb2YgZG9jdW1lbnQuaW5zZXJ0TmV3TGluZSBpcyBkZXByZWNhdGVkLiBVc2UgaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIFsnJywgJyddKSBpbnN0ZWFkLiIpOwogICAgICAgIHJldHVybiB0aGlzLmluc2VydE1lcmdlZExpbmVzKHBvc2l0aW9uLCBbIiIsICIiXSk7CiAgICB9OwogICAgdGhpcy5pbnNlcnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgdGV4dCkgewogICAgICAgIGlmICh0aGlzLmdldExlbmd0aCgpIDw9IDEpCiAgICAgICAgICAgIHRoaXMuJGRldGVjdE5ld0xpbmUodGV4dCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIHRoaXMuJHNwbGl0KHRleHQpKTsKICAgIH07CiAgICB0aGlzLmluc2VydEluTGluZSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCB0ZXh0KSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5jbGlwcGVkUG9zKHBvc2l0aW9uLnJvdywgcG9zaXRpb24uY29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5wb3MocG9zaXRpb24ucm93LCBwb3NpdGlvbi5jb2x1bW4gKyB0ZXh0Lmxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICBlbmQ6IGVuZCwKICAgICAgICAgICAgYWN0aW9uOiAiaW5zZXJ0IiwKICAgICAgICAgICAgbGluZXM6IFt0ZXh0XQogICAgICAgIH0sIHRydWUpOwogICAgICAgIAogICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKGVuZCk7CiAgICB9OwogICAgCiAgICB0aGlzLmNsaXBwZWRQb3MgPSBmdW5jdGlvbihyb3csIGNvbHVtbikgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpOwogICAgICAgIGlmIChyb3cgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByb3cgPSBsZW5ndGg7CiAgICAgICAgfSBlbHNlIGlmIChyb3cgPCAwKSB7CiAgICAgICAgICAgIHJvdyA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChyb3cgPj0gbGVuZ3RoKSB7CiAgICAgICAgICAgIHJvdyA9IGxlbmd0aCAtIDE7CiAgICAgICAgICAgIGNvbHVtbiA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmdldExpbmUocm93KTsKICAgICAgICBpZiAoY29sdW1uID09IHVuZGVmaW5lZCkKICAgICAgICAgICAgY29sdW1uID0gbGluZS5sZW5ndGg7CiAgICAgICAgY29sdW1uID0gTWF0aC5taW4oTWF0aC5tYXgoY29sdW1uLCAwKSwgbGluZS5sZW5ndGgpOwogICAgICAgIHJldHVybiB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufTsKICAgIH07CiAgICAKICAgIHRoaXMuY2xvbmVQb3MgPSBmdW5jdGlvbihwb3MpIHsKICAgICAgICByZXR1cm4ge3JvdzogcG9zLnJvdywgY29sdW1uOiBwb3MuY29sdW1ufTsKICAgIH07CiAgICAKICAgIHRoaXMucG9zID0gZnVuY3Rpb24ocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07CiAgICB9OwogICAgCiAgICB0aGlzLiRjbGlwUG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpOwogICAgICAgIGlmIChwb3NpdGlvbi5yb3cgPj0gbGVuZ3RoKSB7CiAgICAgICAgICAgIHBvc2l0aW9uLnJvdyA9IE1hdGgubWF4KDAsIGxlbmd0aCAtIDEpOwogICAgICAgICAgICBwb3NpdGlvbi5jb2x1bW4gPSB0aGlzLmdldExpbmUobGVuZ3RoIC0gMSkubGVuZ3RoOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBvc2l0aW9uLnJvdyA9IE1hdGgubWF4KDAsIHBvc2l0aW9uLnJvdyk7CiAgICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA9IE1hdGgubWluKE1hdGgubWF4KHBvc2l0aW9uLmNvbHVtbiwgMCksIHRoaXMuZ2V0TGluZShwb3NpdGlvbi5yb3cpLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgIH07CiAgICB0aGlzLmluc2VydEZ1bGxMaW5lcyA9IGZ1bmN0aW9uKHJvdywgbGluZXMpIHsKICAgICAgICByb3cgPSBNYXRoLm1pbihNYXRoLm1heChyb3csIDApLCB0aGlzLmdldExlbmd0aCgpKTsKICAgICAgICB2YXIgY29sdW1uID0gMDsKICAgICAgICBpZiAocm93IDwgdGhpcy5nZXRMZW5ndGgoKSkgewogICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChbIiJdKTsKICAgICAgICAgICAgY29sdW1uID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaW5lcyA9IFsiIl0uY29uY2F0KGxpbmVzKTsKICAgICAgICAgICAgcm93LS07CiAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMuJGxpbmVzW3Jvd10ubGVuZ3RoOwogICAgICAgIH0KICAgICAgICB0aGlzLmluc2VydE1lcmdlZExpbmVzKHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59LCBsaW5lcyk7CiAgICB9OyAgICAKICAgIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMgPSBmdW5jdGlvbihwb3NpdGlvbiwgbGluZXMpIHsKICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmNsaXBwZWRQb3MocG9zaXRpb24ucm93LCBwb3NpdGlvbi5jb2x1bW4pOwogICAgICAgIHZhciBlbmQgPSB7CiAgICAgICAgICAgIHJvdzogc3RhcnQucm93ICsgbGluZXMubGVuZ3RoIC0gMSwKICAgICAgICAgICAgY29sdW1uOiAobGluZXMubGVuZ3RoID09IDEgPyBzdGFydC5jb2x1bW4gOiAwKSArIGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aAogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICBlbmQ6IGVuZCwKICAgICAgICAgICAgYWN0aW9uOiAiaW5zZXJ0IiwKICAgICAgICAgICAgbGluZXM6IGxpbmVzCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVQb3MoZW5kKTsKICAgIH07CiAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLmVuZC5yb3csIHJhbmdlLmVuZC5jb2x1bW4pOwogICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgZW5kOiBlbmQsCiAgICAgICAgICAgIGFjdGlvbjogInJlbW92ZSIsCiAgICAgICAgICAgIGxpbmVzOiB0aGlzLmdldExpbmVzRm9yUmFuZ2Uoe3N0YXJ0OiBzdGFydCwgZW5kOiBlbmR9KQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKHN0YXJ0KTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUluTGluZSA9IGZ1bmN0aW9uKHJvdywgc3RhcnRDb2x1bW4sIGVuZENvbHVtbikgewogICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhyb3csIHN0YXJ0Q29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJvdywgZW5kQ29sdW1uKTsKICAgICAgICAKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGVuZDogZW5kLAogICAgICAgICAgICBhY3Rpb246ICJyZW1vdmUiLAogICAgICAgICAgICBsaW5lczogdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHtzdGFydDogc3RhcnQsIGVuZDogZW5kfSkKICAgICAgICB9LCB0cnVlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhzdGFydCk7CiAgICB9OwogICAgdGhpcy5yZW1vdmVGdWxsTGluZXMgPSBmdW5jdGlvbihmaXJzdFJvdywgbGFzdFJvdykgewogICAgICAgIGZpcnN0Um93ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlyc3RSb3cpLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7CiAgICAgICAgbGFzdFJvdyAgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBsYXN0Um93ICksIHRoaXMuZ2V0TGVuZ3RoKCkgLSAxKTsKICAgICAgICB2YXIgZGVsZXRlRmlyc3ROZXdMaW5lID0gbGFzdFJvdyA9PSB0aGlzLmdldExlbmd0aCgpIC0gMSAmJiBmaXJzdFJvdyA+IDA7CiAgICAgICAgdmFyIGRlbGV0ZUxhc3ROZXdMaW5lICA9IGxhc3RSb3cgIDwgdGhpcy5nZXRMZW5ndGgoKSAtIDE7CiAgICAgICAgdmFyIHN0YXJ0Um93ID0gKCBkZWxldGVGaXJzdE5ld0xpbmUgPyBmaXJzdFJvdyAtIDEgICAgICAgICAgICAgICAgICA6IGZpcnN0Um93ICAgICAgICAgICAgICAgICAgICApOwogICAgICAgIHZhciBzdGFydENvbCA9ICggZGVsZXRlRmlyc3ROZXdMaW5lID8gdGhpcy5nZXRMaW5lKHN0YXJ0Um93KS5sZW5ndGggOiAwICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICB2YXIgZW5kUm93ICAgPSAoIGRlbGV0ZUxhc3ROZXdMaW5lICA/IGxhc3RSb3cgKyAxICAgICAgICAgICAgICAgICAgIDogbGFzdFJvdyAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgdmFyIGVuZENvbCAgID0gKCBkZWxldGVMYXN0TmV3TGluZSAgPyAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0TGluZShlbmRSb3cpLmxlbmd0aCApOyAKICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbCk7CiAgICAgICAgdmFyIGRlbGV0ZWRMaW5lcyA9IHRoaXMuJGxpbmVzLnNsaWNlKGZpcnN0Um93LCBsYXN0Um93ICsgMSk7CiAgICAgICAgCiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0LAogICAgICAgICAgICBlbmQ6IHJhbmdlLmVuZCwKICAgICAgICAgICAgYWN0aW9uOiAicmVtb3ZlIiwKICAgICAgICAgICAgbGluZXM6IHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZGVsZXRlZExpbmVzOwogICAgfTsKICAgIHRoaXMucmVtb3ZlTmV3TGluZSA9IGZ1bmN0aW9uKHJvdykgewogICAgICAgIGlmIChyb3cgPCB0aGlzLmdldExlbmd0aCgpIC0gMSAmJiByb3cgPj0gMCkgewogICAgICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucG9zKHJvdywgdGhpcy5nZXRMaW5lKHJvdykubGVuZ3RoKSwKICAgICAgICAgICAgICAgIGVuZDogdGhpcy5wb3Mocm93ICsgMSwgMCksCiAgICAgICAgICAgICAgICBhY3Rpb246ICJyZW1vdmUiLAogICAgICAgICAgICAgICAgbGluZXM6IFsiIiwgIiJdCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLnJlcGxhY2UgPSBmdW5jdGlvbihyYW5nZSwgdGV4dCkgewogICAgICAgIGlmICghKHJhbmdlIGluc3RhbmNlb2YgUmFuZ2UpKQogICAgICAgICAgICByYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMocmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZCk7CiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwICYmIHJhbmdlLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIHJhbmdlLnN0YXJ0OwogICAgICAgIGlmICh0ZXh0ID09IHRoaXMuZ2V0VGV4dFJhbmdlKHJhbmdlKSkKICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmVuZDsKCiAgICAgICAgdGhpcy5yZW1vdmUocmFuZ2UpOwogICAgICAgIHZhciBlbmQ7CiAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgZW5kID0gdGhpcy5pbnNlcnQocmFuZ2Uuc3RhcnQsIHRleHQpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZW5kID0gcmFuZ2Uuc3RhcnQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBlbmQ7CiAgICB9OwogICAgdGhpcy5hcHBseURlbHRhcyA9IGZ1bmN0aW9uKGRlbHRhcykgewogICAgICAgIGZvciAodmFyIGk9MDsgaTxkZWx0YXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKGRlbHRhc1tpXSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMucmV2ZXJ0RGVsdGFzID0gZnVuY3Rpb24oZGVsdGFzKSB7CiAgICAgICAgZm9yICh2YXIgaT1kZWx0YXMubGVuZ3RoLTE7IGk+PTA7IGktLSkgewogICAgICAgICAgICB0aGlzLnJldmVydERlbHRhKGRlbHRhc1tpXSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuYXBwbHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRhLCBkb05vdFZhbGlkYXRlKSB7CiAgICAgICAgdmFyIGlzSW5zZXJ0ID0gZGVsdGEuYWN0aW9uID09ICJpbnNlcnQiOwogICAgICAgIGlmIChpc0luc2VydCA/IGRlbHRhLmxpbmVzLmxlbmd0aCA8PSAxICYmICFkZWx0YS5saW5lc1swXQogICAgICAgICAgICA6ICFSYW5nZS5jb21wYXJlUG9pbnRzKGRlbHRhLnN0YXJ0LCBkZWx0YS5lbmQpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKGlzSW5zZXJ0ICYmIGRlbHRhLmxpbmVzLmxlbmd0aCA+IDIwMDAwKSB7CiAgICAgICAgICAgIHRoaXMuJHNwbGl0QW5kYXBwbHlMYXJnZURlbHRhKGRlbHRhLCAyMDAwMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBhcHBseURlbHRhKHRoaXMuJGxpbmVzLCBkZWx0YSwgZG9Ob3RWYWxpZGF0ZSk7CiAgICAgICAgICAgIHRoaXMuX3NpZ25hbCgiY2hhbmdlIiwgZGVsdGEpOwogICAgICAgIH0KICAgIH07CiAgICAKICAgIHRoaXMuJHNwbGl0QW5kYXBwbHlMYXJnZURlbHRhID0gZnVuY3Rpb24oZGVsdGEsIE1BWCkgewogICAgICAgIHZhciBsaW5lcyA9IGRlbHRhLmxpbmVzOwogICAgICAgIHZhciBsID0gbGluZXMubGVuZ3RoIC0gTUFYICsgMTsKICAgICAgICB2YXIgcm93ID0gZGVsdGEuc3RhcnQucm93OyAKICAgICAgICB2YXIgY29sdW1uID0gZGVsdGEuc3RhcnQuY29sdW1uOwogICAgICAgIGZvciAodmFyIGZyb20gPSAwLCB0byA9IDA7IGZyb20gPCBsOyBmcm9tID0gdG8pIHsKICAgICAgICAgICAgdG8gKz0gTUFYIC0gMTsKICAgICAgICAgICAgdmFyIGNodW5rID0gbGluZXMuc2xpY2UoZnJvbSwgdG8pOwogICAgICAgICAgICBjaHVuay5wdXNoKCIiKTsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnBvcyhyb3cgKyBmcm9tLCBjb2x1bW4pLAogICAgICAgICAgICAgICAgZW5kOiB0aGlzLnBvcyhyb3cgKyB0bywgY29sdW1uID0gMCksCiAgICAgICAgICAgICAgICBhY3Rpb246IGRlbHRhLmFjdGlvbiwKICAgICAgICAgICAgICAgIGxpbmVzOiBjaHVuawogICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgZGVsdGEubGluZXMgPSBsaW5lcy5zbGljZShmcm9tKTsKICAgICAgICBkZWx0YS5zdGFydC5yb3cgPSByb3cgKyBmcm9tOwogICAgICAgIGRlbHRhLnN0YXJ0LmNvbHVtbiA9IGNvbHVtbjsKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoZGVsdGEsIHRydWUpOwogICAgfTsKICAgIHRoaXMucmV2ZXJ0RGVsdGEgPSBmdW5jdGlvbihkZWx0YSkgewogICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLmNsb25lUG9zKGRlbHRhLnN0YXJ0KSwKICAgICAgICAgICAgZW5kOiB0aGlzLmNsb25lUG9zKGRlbHRhLmVuZCksCiAgICAgICAgICAgIGFjdGlvbjogKGRlbHRhLmFjdGlvbiA9PSAiaW5zZXJ0IiA/ICJyZW1vdmUiIDogImluc2VydCIpLAogICAgICAgICAgICBsaW5lczogZGVsdGEubGluZXMuc2xpY2UoKQogICAgICAgIH0pOwogICAgfTsKICAgIHRoaXMuaW5kZXhUb1Bvc2l0aW9uID0gZnVuY3Rpb24oaW5kZXgsIHN0YXJ0Um93KSB7CiAgICAgICAgdmFyIGxpbmVzID0gdGhpcy4kbGluZXMgfHwgdGhpcy5nZXRBbGxMaW5lcygpOwogICAgICAgIHZhciBuZXdsaW5lTGVuZ3RoID0gdGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGkgPSBzdGFydFJvdyB8fCAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIGluZGV4IC09IGxpbmVzW2ldLmxlbmd0aCArIG5ld2xpbmVMZW5ndGg7CiAgICAgICAgICAgIGlmIChpbmRleCA8IDApCiAgICAgICAgICAgICAgICByZXR1cm4ge3JvdzogaSwgY29sdW1uOiBpbmRleCArIGxpbmVzW2ldLmxlbmd0aCArIG5ld2xpbmVMZW5ndGh9OwogICAgICAgIH0KICAgICAgICByZXR1cm4ge3JvdzogbC0xLCBjb2x1bW46IGluZGV4ICsgbGluZXNbbC0xXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RofTsKICAgIH07CiAgICB0aGlzLnBvc2l0aW9uVG9JbmRleCA9IGZ1bmN0aW9uKHBvcywgc3RhcnRSb3cpIHsKICAgICAgICB2YXIgbGluZXMgPSB0aGlzLiRsaW5lcyB8fCB0aGlzLmdldEFsbExpbmVzKCk7CiAgICAgICAgdmFyIG5ld2xpbmVMZW5ndGggPSB0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIoKS5sZW5ndGg7CiAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICB2YXIgcm93ID0gTWF0aC5taW4ocG9zLnJvdywgbGluZXMubGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRSb3cgfHwgMDsgaSA8IHJvdzsgKytpKQogICAgICAgICAgICBpbmRleCArPSBsaW5lc1tpXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RoOwoKICAgICAgICByZXR1cm4gaW5kZXggKyBwb3MuY29sdW1uOwogICAgfTsKCn0pLmNhbGwoRG9jdW1lbnQucHJvdG90eXBlKTsKCmV4cG9ydHMuRG9jdW1lbnQgPSBEb2N1bWVudDsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbGliL2xhbmciLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKZXhwb3J0cy5sYXN0ID0gZnVuY3Rpb24oYSkgewogICAgcmV0dXJuIGFbYS5sZW5ndGggLSAxXTsKfTsKCmV4cG9ydHMuc3RyaW5nUmV2ZXJzZSA9IGZ1bmN0aW9uKHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy5zcGxpdCgiIikucmV2ZXJzZSgpLmpvaW4oIiIpOwp9OwoKZXhwb3J0cy5zdHJpbmdSZXBlYXQgPSBmdW5jdGlvbiAoc3RyaW5nLCBjb3VudCkgewogICAgdmFyIHJlc3VsdCA9ICcnOwogICAgd2hpbGUgKGNvdW50ID4gMCkgewogICAgICAgIGlmIChjb3VudCAmIDEpCiAgICAgICAgICAgIHJlc3VsdCArPSBzdHJpbmc7CgogICAgICAgIGlmIChjb3VudCA+Pj0gMSkKICAgICAgICAgICAgc3RyaW5nICs9IHN0cmluZzsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7Cn07Cgp2YXIgdHJpbUJlZ2luUmVnZXhwID0gL15cc1xzKi87CnZhciB0cmltRW5kUmVnZXhwID0gL1xzXHMqJC87CgpleHBvcnRzLnN0cmluZ1RyaW1MZWZ0ID0gZnVuY3Rpb24gKHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHRyaW1CZWdpblJlZ2V4cCwgJycpOwp9OwoKZXhwb3J0cy5zdHJpbmdUcmltUmlnaHQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UodHJpbUVuZFJlZ2V4cCwgJycpOwp9OwoKZXhwb3J0cy5jb3B5T2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgY29weSA9IHt9OwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGNvcHlba2V5XSA9IG9ialtrZXldOwogICAgfQogICAgcmV0dXJuIGNvcHk7Cn07CgpleHBvcnRzLmNvcHlBcnJheSA9IGZ1bmN0aW9uKGFycmF5KXsKICAgIHZhciBjb3B5ID0gW107CiAgICBmb3IgKHZhciBpPTAsIGw9YXJyYXkubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgIGlmIChhcnJheVtpXSAmJiB0eXBlb2YgYXJyYXlbaV0gPT0gIm9iamVjdCIpCiAgICAgICAgICAgIGNvcHlbaV0gPSB0aGlzLmNvcHlPYmplY3QoYXJyYXlbaV0pOwogICAgICAgIGVsc2UgCiAgICAgICAgICAgIGNvcHlbaV0gPSBhcnJheVtpXTsKICAgIH0KICAgIHJldHVybiBjb3B5Owp9OwoKZXhwb3J0cy5kZWVwQ29weSA9IGZ1bmN0aW9uIGRlZXBDb3B5KG9iaikgewogICAgaWYgKHR5cGVvZiBvYmogIT09ICJvYmplY3QiIHx8ICFvYmopCiAgICAgICAgcmV0dXJuIG9iajsKICAgIHZhciBjb3B5OwogICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgIGNvcHkgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgPSAwOyBrZXkgPCBvYmoubGVuZ3RoOyBrZXkrKykgewogICAgICAgICAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb3B5OwogICAgfQogICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopICE9PSAiW29iamVjdCBPYmplY3RdIikKICAgICAgICByZXR1cm4gb2JqOwogICAgCiAgICBjb3B5ID0ge307CiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKQogICAgICAgIGNvcHlba2V5XSA9IGRlZXBDb3B5KG9ialtrZXldKTsKICAgIHJldHVybiBjb3B5Owp9OwoKZXhwb3J0cy5hcnJheVRvTWFwID0gZnVuY3Rpb24oYXJyKSB7CiAgICB2YXIgbWFwID0ge307CiAgICBmb3IgKHZhciBpPTA7IGk8YXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbWFwW2FycltpXV0gPSAxOwogICAgfQogICAgcmV0dXJuIG1hcDsKCn07CgpleHBvcnRzLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKHByb3BzKSB7CiAgICB2YXIgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGZvciAodmFyIGkgaW4gcHJvcHMpIHsKICAgICAgICBtYXBbaV0gPSBwcm9wc1tpXTsKICAgIH0KICAgIHJldHVybiBtYXA7Cn07CmV4cG9ydHMuYXJyYXlSZW1vdmUgPSBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8PSBhcnJheS5sZW5ndGg7IGkrKykgewogICAgaWYgKHZhbHVlID09PSBhcnJheVtpXSkgewogICAgICBhcnJheS5zcGxpY2UoaSwgMSk7CiAgICB9CiAgfQp9OwoKZXhwb3J0cy5lc2NhcGVSZWdFeHAgPSBmdW5jdGlvbihzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKis/XiR7fSgpfFtcXVwvXFxdKS9nLCAnXFwkMScpOwp9OwoKZXhwb3J0cy5lc2NhcGVIVE1MID0gZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gKCIiICsgc3RyKS5yZXBsYWNlKC8mL2csICImIzM4OyIpLnJlcGxhY2UoLyIvZywgIiYjMzQ7IikucmVwbGFjZSgvJy9nLCAiJiMzOTsiKS5yZXBsYWNlKC88L2csICImIzYwOyIpOwp9OwoKZXhwb3J0cy5nZXRNYXRjaE9mZnNldHMgPSBmdW5jdGlvbihzdHJpbmcsIHJlZ0V4cCkgewogICAgdmFyIG1hdGNoZXMgPSBbXTsKCiAgICBzdHJpbmcucmVwbGFjZShyZWdFeHAsIGZ1bmN0aW9uKHN0cikgewogICAgICAgIG1hdGNoZXMucHVzaCh7CiAgICAgICAgICAgIG9mZnNldDogYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMl0sCiAgICAgICAgICAgIGxlbmd0aDogc3RyLmxlbmd0aAogICAgICAgIH0pOwogICAgfSk7CgogICAgcmV0dXJuIG1hdGNoZXM7Cn07CmV4cG9ydHMuZGVmZXJyZWRDYWxsID0gZnVuY3Rpb24oZmNuKSB7CiAgICB2YXIgdGltZXIgPSBudWxsOwogICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgIGZjbigpOwogICAgfTsKCiAgICB2YXIgZGVmZXJyZWQgPSBmdW5jdGlvbih0aW1lb3V0KSB7CiAgICAgICAgZGVmZXJyZWQuY2FuY2VsKCk7CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aW1lb3V0IHx8IDApOwogICAgICAgIHJldHVybiBkZWZlcnJlZDsKICAgIH07CgogICAgZGVmZXJyZWQuc2NoZWR1bGUgPSBkZWZlcnJlZDsKCiAgICBkZWZlcnJlZC5jYWxsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5jYW5jZWwoKTsKICAgICAgICBmY24oKTsKICAgICAgICByZXR1cm4gZGVmZXJyZWQ7CiAgICB9OwoKICAgIGRlZmVycmVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgIHJldHVybiBkZWZlcnJlZDsKICAgIH07CiAgICAKICAgIGRlZmVycmVkLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aW1lcjsKICAgIH07CgogICAgcmV0dXJuIGRlZmVycmVkOwp9OwoKCmV4cG9ydHMuZGVsYXllZENhbGwgPSBmdW5jdGlvbihmY24sIGRlZmF1bHRUaW1lb3V0KSB7CiAgICB2YXIgdGltZXIgPSBudWxsOwogICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgIGZjbigpOwogICAgfTsKCiAgICB2YXIgX3NlbGYgPSBmdW5jdGlvbih0aW1lb3V0KSB7CiAgICAgICAgaWYgKHRpbWVyID09IG51bGwpCiAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChjYWxsYmFjaywgdGltZW91dCB8fCBkZWZhdWx0VGltZW91dCk7CiAgICB9OwoKICAgIF9zZWxmLmRlbGF5ID0gZnVuY3Rpb24odGltZW91dCkgewogICAgICAgIHRpbWVyICYmIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aW1lb3V0IHx8IGRlZmF1bHRUaW1lb3V0KTsKICAgIH07CiAgICBfc2VsZi5zY2hlZHVsZSA9IF9zZWxmOwoKICAgIF9zZWxmLmNhbGwgPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmNhbmNlbCgpOwogICAgICAgIGZjbigpOwogICAgfTsKCiAgICBfc2VsZi5jYW5jZWwgPSBmdW5jdGlvbigpIHsKICAgICAgICB0aW1lciAmJiBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIHRpbWVyID0gbnVsbDsKICAgIH07CgogICAgX3NlbGYuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRpbWVyOwogICAgfTsKCiAgICByZXR1cm4gX3NlbGY7Cn07Cn0pOwoKYWNlLmRlZmluZSgiYWNlL3dvcmtlci9taXJyb3IiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIFJhbmdlID0gcmVxdWlyZSgiLi4vcmFuZ2UiKS5SYW5nZTsKdmFyIERvY3VtZW50ID0gcmVxdWlyZSgiLi4vZG9jdW1lbnQiKS5Eb2N1bWVudDsKdmFyIGxhbmcgPSByZXF1aXJlKCIuLi9saWIvbGFuZyIpOwogICAgCnZhciBNaXJyb3IgPSBleHBvcnRzLk1pcnJvciA9IGZ1bmN0aW9uKHNlbmRlcikgewogICAgdGhpcy5zZW5kZXIgPSBzZW5kZXI7CiAgICB2YXIgZG9jID0gdGhpcy5kb2MgPSBuZXcgRG9jdW1lbnQoIiIpOwogICAgCiAgICB2YXIgZGVmZXJyZWRVcGRhdGUgPSB0aGlzLmRlZmVycmVkVXBkYXRlID0gbGFuZy5kZWxheWVkQ2FsbCh0aGlzLm9uVXBkYXRlLmJpbmQodGhpcykpOwogICAgCiAgICB2YXIgX3NlbGYgPSB0aGlzOwogICAgc2VuZGVyLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIGRhdGEgPSBlLmRhdGE7CiAgICAgICAgaWYgKGRhdGFbMF0uc3RhcnQpIHsKICAgICAgICAgICAgZG9jLmFwcGx5RGVsdGFzKGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YVtpKzFdKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0ge2FjdGlvbjogImluc2VydCIsIHN0YXJ0OiBkYXRhW2ldLCBsaW5lczogZGF0YVtpKzFdfTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB7YWN0aW9uOiAicmVtb3ZlIiwgc3RhcnQ6IGRhdGFbaV0sIGVuZDogZGF0YVtpKzFdfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvYy5hcHBseURlbHRhKGQsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChfc2VsZi4kdGltZW91dCkKICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkVXBkYXRlLnNjaGVkdWxlKF9zZWxmLiR0aW1lb3V0KTsKICAgICAgICBfc2VsZi5vblVwZGF0ZSgpOwogICAgfSk7Cn07CgooZnVuY3Rpb24oKSB7CiAgICAKICAgIHRoaXMuJHRpbWVvdXQgPSA1MDA7CiAgICAKICAgIHRoaXMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsKICAgICAgICB0aGlzLiR0aW1lb3V0ID0gdGltZW91dDsKICAgIH07CiAgICAKICAgIHRoaXMuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHRoaXMuZG9jLnNldFZhbHVlKHZhbHVlKTsKICAgICAgICB0aGlzLmRlZmVycmVkVXBkYXRlLnNjaGVkdWxlKHRoaXMuJHRpbWVvdXQpOwogICAgfTsKICAgIAogICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrSWQpIHsKICAgICAgICB0aGlzLnNlbmRlci5jYWxsYmFjayh0aGlzLmRvYy5nZXRWYWx1ZSgpLCBjYWxsYmFja0lkKTsKICAgIH07CiAgICAKICAgIHRoaXMub25VcGRhdGUgPSBmdW5jdGlvbigpIHsKICAgIH07CiAgICAKICAgIHRoaXMuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWRVcGRhdGUuaXNQZW5kaW5nKCk7CiAgICB9OwogICAgCn0pLmNhbGwoTWlycm9yLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9tb2RlL2pzb24vanNvbl9wYXJzZSIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7CgogICAgdmFyIGF0LCAgICAgLy8gVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICAgIGNoLCAgICAgLy8gVGhlIGN1cnJlbnQgY2hhcmFjdGVyCiAgICAgICAgZXNjYXBlZSA9IHsKICAgICAgICAgICAgJyInOiAgJyInLAogICAgICAgICAgICAnXFwnOiAnXFwnLAogICAgICAgICAgICAnLyc6ICAnLycsCiAgICAgICAgICAgIGI6ICAgICdcYicsCiAgICAgICAgICAgIGY6ICAgICdcZicsCiAgICAgICAgICAgIG46ICAgICdcbicsCiAgICAgICAgICAgIHI6ICAgICdccicsCiAgICAgICAgICAgIHQ6ICAgICdcdCcKICAgICAgICB9LAogICAgICAgIHRleHQsCgogICAgICAgIGVycm9yID0gZnVuY3Rpb24gKG0pIHsKCiAgICAgICAgICAgIHRocm93IHsKICAgICAgICAgICAgICAgIG5hbWU6ICAgICdTeW50YXhFcnJvcicsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtLAogICAgICAgICAgICAgICAgYXQ6ICAgICAgYXQsCiAgICAgICAgICAgICAgICB0ZXh0OiAgICB0ZXh0CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKCiAgICAgICAgbmV4dCA9IGZ1bmN0aW9uIChjKSB7CgogICAgICAgICAgICBpZiAoYyAmJiBjICE9PSBjaCkgewogICAgICAgICAgICAgICAgZXJyb3IoIkV4cGVjdGVkICciICsgYyArICInIGluc3RlYWQgb2YgJyIgKyBjaCArICInIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoID0gdGV4dC5jaGFyQXQoYXQpOwogICAgICAgICAgICBhdCArPSAxOwogICAgICAgICAgICByZXR1cm4gY2g7CiAgICAgICAgfSwKCiAgICAgICAgbnVtYmVyID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIG51bWJlciwKICAgICAgICAgICAgICAgIHN0cmluZyA9ICcnOwoKICAgICAgICAgICAgaWYgKGNoID09PSAnLScpIHsKICAgICAgICAgICAgICAgIHN0cmluZyA9ICctJzsKICAgICAgICAgICAgICAgIG5leHQoJy0nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aGlsZSAoY2ggPj0gJzAnICYmIGNoIDw9ICc5JykgewogICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjaCA9PT0gJy4nKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gJy4nOwogICAgICAgICAgICAgICAgd2hpbGUgKG5leHQoKSAmJiBjaCA+PSAnMCcgJiYgY2ggPD0gJzknKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjaCA9PT0gJ2UnIHx8IGNoID09PSAnRScpIHsKICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHsKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gY2g7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNoID49ICcwJyAmJiBjaCA8PSAnOScpIHsKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gY2g7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bWJlciA9ICtzdHJpbmc7CiAgICAgICAgICAgIGlmIChpc05hTihudW1iZXIpKSB7CiAgICAgICAgICAgICAgICBlcnJvcigiQmFkIG51bWJlciIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHN0cmluZyA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHZhciBoZXgsCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgc3RyaW5nID0gJycsCiAgICAgICAgICAgICAgICB1ZmZmZjsKCiAgICAgICAgICAgIGlmIChjaCA9PT0gJyInKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAobmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAnIicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICd1JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdWZmZmYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhleCA9IHBhcnNlSW50KG5leHQoKSwgMTYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoaGV4KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWZmZmYgPSB1ZmZmZiAqIDE2ICsgaGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodWZmZmYpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlc2NhcGVlW2NoXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBlc2NhcGVlW2NoXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA9PSAiXG4iIHx8IGNoID09ICJcciIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvcigiQmFkIHN0cmluZyIpOwogICAgICAgIH0sCgogICAgICAgIHdoaXRlID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgd2hpbGUgKGNoICYmIGNoIDw9ICcgJykgewogICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgd29yZCA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHN3aXRjaCAoY2gpIHsKICAgICAgICAgICAgY2FzZSAndCc6CiAgICAgICAgICAgICAgICBuZXh0KCd0Jyk7CiAgICAgICAgICAgICAgICBuZXh0KCdyJyk7CiAgICAgICAgICAgICAgICBuZXh0KCd1Jyk7CiAgICAgICAgICAgICAgICBuZXh0KCdlJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSAnZic6CiAgICAgICAgICAgICAgICBuZXh0KCdmJyk7CiAgICAgICAgICAgICAgICBuZXh0KCdhJyk7CiAgICAgICAgICAgICAgICBuZXh0KCdsJyk7CiAgICAgICAgICAgICAgICBuZXh0KCdzJyk7CiAgICAgICAgICAgICAgICBuZXh0KCdlJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGNhc2UgJ24nOgogICAgICAgICAgICAgICAgbmV4dCgnbicpOwogICAgICAgICAgICAgICAgbmV4dCgndScpOwogICAgICAgICAgICAgICAgbmV4dCgnbCcpOwogICAgICAgICAgICAgICAgbmV4dCgnbCcpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3IoIlVuZXhwZWN0ZWQgJyIgKyBjaCArICInIik7CiAgICAgICAgfSwKCiAgICAgICAgdmFsdWUsICAvLyBQbGFjZSBob2xkZXIgZm9yIHRoZSB2YWx1ZSBmdW5jdGlvbi4KCiAgICAgICAgYXJyYXkgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgYXJyYXkgPSBbXTsKCiAgICAgICAgICAgIGlmIChjaCA9PT0gJ1snKSB7CiAgICAgICAgICAgICAgICBuZXh0KCdbJyk7CiAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgaWYgKGNoID09PSAnXScpIHsKICAgICAgICAgICAgICAgICAgICBuZXh0KCddJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5OyAgIC8vIGVtcHR5IGFycmF5CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZSAoY2gpIHsKICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHZhbHVlKCkpOwogICAgICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAnXScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgnXScpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG5leHQoJywnKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVycm9yKCJCYWQgYXJyYXkiKTsKICAgICAgICB9LAoKICAgICAgICBvYmplY3QgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIga2V5LAogICAgICAgICAgICAgICAgb2JqZWN0ID0ge307CgogICAgICAgICAgICBpZiAoY2ggPT09ICd7JykgewogICAgICAgICAgICAgICAgbmV4dCgneycpOwogICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgnfScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7ICAgLy8gZW1wdHkgb2JqZWN0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZSAoY2gpIHsKICAgICAgICAgICAgICAgICAgICBrZXkgPSBzdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgICAgIG5leHQoJzonKTsKICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdEdXBsaWNhdGUga2V5ICInICsga2V5ICsgJyInKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZSgpOwogICAgICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAnfScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgnfScpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXh0KCcsJyk7CiAgICAgICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvcigiQmFkIG9iamVjdCIpOwogICAgICAgIH07CgogICAgdmFsdWUgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgIHdoaXRlKCk7CiAgICAgICAgc3dpdGNoIChjaCkgewogICAgICAgIGNhc2UgJ3snOgogICAgICAgICAgICByZXR1cm4gb2JqZWN0KCk7CiAgICAgICAgY2FzZSAnWyc6CiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOwogICAgICAgIGNhc2UgJyInOgogICAgICAgICAgICByZXR1cm4gc3RyaW5nKCk7CiAgICAgICAgY2FzZSAnLSc6CiAgICAgICAgICAgIHJldHVybiBudW1iZXIoKTsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gY2ggPj0gJzAnICYmIGNoIDw9ICc5JyA/IG51bWJlcigpIDogd29yZCgpOwogICAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UsIHJldml2ZXIpIHsKICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICB0ZXh0ID0gc291cmNlOwogICAgICAgIGF0ID0gMDsKICAgICAgICBjaCA9ICcgJzsKICAgICAgICByZXN1bHQgPSB2YWx1ZSgpOwogICAgICAgIHdoaXRlKCk7CiAgICAgICAgaWYgKGNoKSB7CiAgICAgICAgICAgIGVycm9yKCJTeW50YXggZXJyb3IiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0eXBlb2YgcmV2aXZlciA9PT0gJ2Z1bmN0aW9uJyA/IGZ1bmN0aW9uIHdhbGsoaG9sZGVyLCBrZXkpIHsKICAgICAgICAgICAgdmFyIGssIHYsIHZhbHVlID0gaG9sZGVyW2tleV07CiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBmb3IgKGsgaW4gdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGspKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB3YWxrKHZhbHVlLCBrKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVba10gPSB2OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW2tdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXZpdmVyLmNhbGwoaG9sZGVyLCBrZXksIHZhbHVlKTsKICAgICAgICB9KHsnJzogcmVzdWx0fSwgJycpIDogcmVzdWx0OwogICAgfTsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9qc29uX3dvcmtlciIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi4vbGliL29vcCIpOwp2YXIgTWlycm9yID0gcmVxdWlyZSgiLi4vd29ya2VyL21pcnJvciIpLk1pcnJvcjsKdmFyIHBhcnNlID0gcmVxdWlyZSgiLi9qc29uL2pzb25fcGFyc2UiKTsKCnZhciBKc29uV29ya2VyID0gZXhwb3J0cy5Kc29uV29ya2VyID0gZnVuY3Rpb24oc2VuZGVyKSB7CiAgICBNaXJyb3IuY2FsbCh0aGlzLCBzZW5kZXIpOwogICAgdGhpcy5zZXRUaW1lb3V0KDIwMCk7Cn07Cgpvb3AuaW5oZXJpdHMoSnNvbldvcmtlciwgTWlycm9yKTsKCihmdW5jdGlvbigpIHsKCiAgICB0aGlzLm9uVXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kb2MuZ2V0VmFsdWUoKTsKICAgICAgICB2YXIgZXJyb3JzID0gW107CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHZhbHVlKQogICAgICAgICAgICAgICAgcGFyc2UodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuZG9jLmluZGV4VG9Qb3NpdGlvbihlLmF0LTEpOwogICAgICAgICAgICBlcnJvcnMucHVzaCh7CiAgICAgICAgICAgICAgICByb3c6IHBvcy5yb3csCiAgICAgICAgICAgICAgICBjb2x1bW46IHBvcy5jb2x1bW4sCiAgICAgICAgICAgICAgICB0ZXh0OiBlLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlbmRlci5lbWl0KCJhbm5vdGF0ZSIsIGVycm9ycyk7CiAgICB9OwoKfSkuY2FsbChKc29uV29ya2VyLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9saWIvZXM1LXNoaW0iLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKCmZ1bmN0aW9uIEVtcHR5KCkge30KCmlmICghRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHsKICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZCh0aGF0KSB7IC8vIC5sZW5ndGggaXMgMQogICAgICAgIHZhciB0YXJnZXQgPSB0aGlzOwogICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSAiICsgdGFyZ2V0KTsKICAgICAgICB9CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7IC8vIGZvciBub3JtYWwgY2FsbAogICAgICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHsKCiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KAogICAgICAgICAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkoCiAgICAgICAgICAgICAgICAgICAgdGhhdCwKICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgfQoKICAgICAgICB9OwogICAgICAgIGlmKHRhcmdldC5wcm90b3R5cGUpIHsKICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTsKICAgICAgICAgICAgYm91bmQucHJvdG90eXBlID0gbmV3IEVtcHR5KCk7CiAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiBib3VuZDsKICAgIH07Cn0KdmFyIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDsKdmFyIHByb3RvdHlwZU9mQXJyYXkgPSBBcnJheS5wcm90b3R5cGU7CnZhciBwcm90b3R5cGVPZk9iamVjdCA9IE9iamVjdC5wcm90b3R5cGU7CnZhciBzbGljZSA9IHByb3RvdHlwZU9mQXJyYXkuc2xpY2U7CnZhciBfdG9TdHJpbmcgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QudG9TdHJpbmcpOwp2YXIgb3ducyA9IGNhbGwuYmluZChwcm90b3R5cGVPZk9iamVjdC5oYXNPd25Qcm9wZXJ0eSk7CnZhciBkZWZpbmVHZXR0ZXI7CnZhciBkZWZpbmVTZXR0ZXI7CnZhciBsb29rdXBHZXR0ZXI7CnZhciBsb29rdXBTZXR0ZXI7CnZhciBzdXBwb3J0c0FjY2Vzc29yczsKaWYgKChzdXBwb3J0c0FjY2Vzc29ycyA9IG93bnMocHJvdG90eXBlT2ZPYmplY3QsICJfX2RlZmluZUdldHRlcl9fIikpKSB7CiAgICBkZWZpbmVHZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19kZWZpbmVHZXR0ZXJfXyk7CiAgICBkZWZpbmVTZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19kZWZpbmVTZXR0ZXJfXyk7CiAgICBsb29rdXBHZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19sb29rdXBHZXR0ZXJfXyk7CiAgICBsb29rdXBTZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19sb29rdXBTZXR0ZXJfXyk7Cn0KaWYgKFsxLDJdLnNwbGljZSgwKS5sZW5ndGggIT0gMikgewogICAgaWYoZnVuY3Rpb24oKSB7IC8vIHRlc3QgSUUgPCA5IHRvIHNwbGljZSBidWcgLSBzZWUgaXNzdWUgIzEzOAogICAgICAgIGZ1bmN0aW9uIG1ha2VBcnJheShsKSB7CiAgICAgICAgICAgIHZhciBhID0gbmV3IEFycmF5KGwrMik7CiAgICAgICAgICAgIGFbMF0gPSBhWzFdID0gMDsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfQogICAgICAgIHZhciBhcnJheSA9IFtdLCBsZW5ndGhCZWZvcmU7CiAgICAgICAgCiAgICAgICAgYXJyYXkuc3BsaWNlLmFwcGx5KGFycmF5LCBtYWtlQXJyYXkoMjApKTsKICAgICAgICBhcnJheS5zcGxpY2UuYXBwbHkoYXJyYXksIG1ha2VBcnJheSgyNikpOwoKICAgICAgICBsZW5ndGhCZWZvcmUgPSBhcnJheS5sZW5ndGg7IC8vNDYKICAgICAgICBhcnJheS5zcGxpY2UoNSwgMCwgIlhYWCIpOyAvLyBhZGQgb25lIGVsZW1lbnQKCiAgICAgICAgbGVuZ3RoQmVmb3JlICsgMSA9PSBhcnJheS5sZW5ndGgKCiAgICAgICAgaWYgKGxlbmd0aEJlZm9yZSArIDEgPT0gYXJyYXkubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOy8vIGhhcyByaWdodCBzcGxpY2UgaW1wbGVtZW50YXRpb24gd2l0aG91dCBidWdzCiAgICAgICAgfQogICAgfSgpKSB7Ly9JRSA2LzcKICAgICAgICB2YXIgYXJyYXlfc3BsaWNlID0gQXJyYXkucHJvdG90eXBlLnNwbGljZTsKICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGRlbGV0ZUNvdW50KSB7CiAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5X3NwbGljZS5hcHBseSh0aGlzLCBbCiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPT09IHZvaWQgMCA/IDAgOiBzdGFydCwKICAgICAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9PT0gdm9pZCAwID8gKHRoaXMubGVuZ3RoIC0gc3RhcnQpIDogZGVsZXRlQ291bnQKICAgICAgICAgICAgICAgIF0uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSkpCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSBlbHNlIHsvL0lFOAogICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UgPSBmdW5jdGlvbihwb3MsIHJlbW92ZUNvdW50KXsKICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICAgICAgICBpZiAocG9zID4gMCkgewogICAgICAgICAgICAgICAgaWYgKHBvcyA+IGxlbmd0aCkKICAgICAgICAgICAgICAgICAgICBwb3MgPSBsZW5ndGg7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocG9zID09IHZvaWQgMCkgewogICAgICAgICAgICAgICAgcG9zID0gMDsKICAgICAgICAgICAgfSBlbHNlIGlmIChwb3MgPCAwKSB7CiAgICAgICAgICAgICAgICBwb3MgPSBNYXRoLm1heChsZW5ndGggKyBwb3MsIDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIShwb3MrcmVtb3ZlQ291bnQgPCBsZW5ndGgpKQogICAgICAgICAgICAgICAgcmVtb3ZlQ291bnQgPSBsZW5ndGggLSBwb3M7CgogICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2UocG9zLCBwb3MrcmVtb3ZlQ291bnQpOwogICAgICAgICAgICB2YXIgaW5zZXJ0ID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOwogICAgICAgICAgICB2YXIgYWRkID0gaW5zZXJ0Lmxlbmd0aDsgICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHBvcyA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpZiAoYWRkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoLmFwcGx5KHRoaXMsIGluc2VydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlID0gTWF0aC5taW4ocmVtb3ZlQ291bnQsIGxlbmd0aCAtIHBvcyk7CiAgICAgICAgICAgICAgICB2YXIgdGFpbE9sZFBvcyA9IHBvcyArIHJlbW92ZTsKICAgICAgICAgICAgICAgIHZhciB0YWlsTmV3UG9zID0gdGFpbE9sZFBvcyArIGFkZCAtIHJlbW92ZTsKICAgICAgICAgICAgICAgIHZhciB0YWlsQ291bnQgPSBsZW5ndGggLSB0YWlsT2xkUG9zOwogICAgICAgICAgICAgICAgdmFyIGxlbmd0aEFmdGVyUmVtb3ZlID0gbGVuZ3RoIC0gcmVtb3ZlOwoKICAgICAgICAgICAgICAgIGlmICh0YWlsTmV3UG9zIDwgdGFpbE9sZFBvcykgeyAvLyBjYXNlIEEKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhaWxDb3VudDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbdGFpbE5ld1BvcytpXSA9IHRoaXNbdGFpbE9sZFBvcytpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhaWxOZXdQb3MgPiB0YWlsT2xkUG9zKSB7IC8vIGNhc2UgQgogICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IHRhaWxDb3VudDsgaS0tOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1t0YWlsTmV3UG9zK2ldID0gdGhpc1t0YWlsT2xkUG9zK2ldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gLy8gZWxzZSwgYWRkID09IHJlbW92ZSAobm90aGluZyB0byBkbykKCiAgICAgICAgICAgICAgICBpZiAoYWRkICYmIHBvcyA9PT0gbGVuZ3RoQWZ0ZXJSZW1vdmUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aEFmdGVyUmVtb3ZlOyAvLyB0cnVuY2F0ZSBhcnJheQogICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaC5hcHBseSh0aGlzLCBpbnNlcnQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aEFmdGVyUmVtb3ZlICsgYWRkOyAvLyByZXNlcnZlcyBzcGFjZQogICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhZGQ7ICsraSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3BvcytpXSA9IGluc2VydFtpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlbW92ZWQ7CiAgICAgICAgfTsKICAgIH0KfQppZiAoIUFycmF5LmlzQXJyYXkpIHsKICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KG9iaikgewogICAgICAgIHJldHVybiBfdG9TdHJpbmcob2JqKSA9PSAiW29iamVjdCBBcnJheV0iOwogICAgfTsKfQp2YXIgYm94ZWRTdHJpbmcgPSBPYmplY3QoImEiKSwKICAgIHNwbGl0U3RyaW5nID0gYm94ZWRTdHJpbmdbMF0gIT0gImEiIHx8ICEoMCBpbiBib3hlZFN0cmluZyk7CgppZiAoIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZnVuIC8qLCB0aGlzcCovKSB7CiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLAogICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09ICJbb2JqZWN0IFN0cmluZ10iID8KICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoIiIpIDoKICAgICAgICAgICAgICAgIG9iamVjdCwKICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV0sCiAgICAgICAgICAgIGkgPSAtMSwKICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7CiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyAvLyBUT0RPIG1lc3NhZ2UKICAgICAgICB9CgogICAgICAgIHdoaWxlICgrK2kgPCBsZW5ndGgpIHsKICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikgewogICAgICAgICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CmlmICghQXJyYXkucHJvdG90eXBlLm1hcCkgewogICAgQXJyYXkucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChmdW4gLyosIHRoaXNwKi8pIHsKICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksCiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gIltvYmplY3QgU3RyaW5nXSIgPwogICAgICAgICAgICAgICAgdGhpcy5zcGxpdCgiIikgOgogICAgICAgICAgICAgICAgb2JqZWN0LAogICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMCwKICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSwKICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07CiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyAiIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBmdW4uY2FsbCh0aGlzcCwgc2VsZltpXSwgaSwgb2JqZWN0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07Cn0KaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsdGVyKSB7CiAgICBBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKGZ1biAvKiwgdGhpc3AgKi8pIHsKICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksCiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gIltvYmplY3QgU3RyaW5nXSIgPwogICAgICAgICAgICAgICAgdGhpcy5zcGxpdCgiIikgOgogICAgICAgICAgICAgICAgICAgIG9iamVjdCwKICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsCiAgICAgICAgICAgIHJlc3VsdCA9IFtdLAogICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07CiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyAiIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0gc2VsZltpXTsKICAgICAgICAgICAgICAgIGlmIChmdW4uY2FsbCh0aGlzcCwgdmFsdWUsIGksIG9iamVjdCkpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07Cn0KaWYgKCFBcnJheS5wcm90b3R5cGUuZXZlcnkpIHsKICAgIEFycmF5LnByb3RvdHlwZS5ldmVyeSA9IGZ1bmN0aW9uIGV2ZXJ5KGZ1biAvKiwgdGhpc3AgKi8pIHsKICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksCiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gIltvYmplY3QgU3RyaW5nXSIgPwogICAgICAgICAgICAgICAgdGhpcy5zcGxpdCgiIikgOgogICAgICAgICAgICAgICAgb2JqZWN0LAogICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMCwKICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07CiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyAiIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgIWZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Owp9CmlmICghQXJyYXkucHJvdG90eXBlLnNvbWUpIHsKICAgIEFycmF5LnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gc29tZShmdW4gLyosIHRoaXNwICovKSB7CiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLAogICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09ICJbb2JqZWN0IFN0cmluZ10iID8KICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoIiIpIDoKICAgICAgICAgICAgICAgIG9iamVjdCwKICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsCiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdOwogICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgIiBpcyBub3QgYSBmdW5jdGlvbiIpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIGZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Owp9CmlmICghQXJyYXkucHJvdG90eXBlLnJlZHVjZSkgewogICAgQXJyYXkucHJvdG90eXBlLnJlZHVjZSA9IGZ1bmN0aW9uIHJlZHVjZShmdW4gLyosIGluaXRpYWwqLykgewogICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSwKICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSAiW29iamVjdCBTdHJpbmddIiA/CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KCIiKSA6CiAgICAgICAgICAgICAgICBvYmplY3QsCiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwOwogICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgIiBpcyBub3QgYSBmdW5jdGlvbiIpOwogICAgICAgIH0KICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZSIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbMV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGZbaSsrXTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlICh0cnVlKTsKICAgICAgICB9CgogICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuLmNhbGwodm9pZCAwLCByZXN1bHQsIHNlbGZbaV0sIGksIG9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9Owp9CmlmICghQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0KSB7CiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQgPSBmdW5jdGlvbiByZWR1Y2VSaWdodChmdW4gLyosIGluaXRpYWwqLykgewogICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSwKICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSAiW29iamVjdCBTdHJpbmddIiA/CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KCIiKSA6CiAgICAgICAgICAgICAgICBvYmplY3QsCiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwOwogICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgIiBpcyBub3QgYSBmdW5jdGlvbiIpOwogICAgICAgIH0KICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigicmVkdWNlUmlnaHQgb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzdWx0LCBpID0gbGVuZ3RoIC0gMTsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3VtZW50c1sxXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VsZltpLS1dOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKC0taSA8IDApIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZWR1Y2VSaWdodCBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBkbyB7CiAgICAgICAgICAgIGlmIChpIGluIHRoaXMpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bi5jYWxsKHZvaWQgMCwgcmVzdWx0LCBzZWxmW2ldLCBpLCBvYmplY3QpOwogICAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAoaS0tKTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07Cn0KaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCAoWzAsIDFdLmluZGV4T2YoMSwgMikgIT0gLTEpKSB7CiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8gKSB7CiAgICAgICAgdmFyIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gIltvYmplY3QgU3RyaW5nXSIgPwogICAgICAgICAgICAgICAgdGhpcy5zcGxpdCgiIikgOgogICAgICAgICAgICAgICAgdG9PYmplY3QodGhpcyksCiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwOwoKICAgICAgICBpZiAoIWxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQoKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIGkgPSB0b0ludGVnZXIoYXJndW1lbnRzWzFdKTsKICAgICAgICB9CiAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heCgwLCBsZW5ndGggKyBpKTsKICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgc2VsZltpXSA9PT0gc291Z2h0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gLTE7CiAgICB9Owp9CmlmICghQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mIHx8IChbMCwgMV0ubGFzdEluZGV4T2YoMCwgLTMpICE9IC0xKSkgewogICAgQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8pIHsKICAgICAgICB2YXIgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSAiW29iamVjdCBTdHJpbmddIiA/CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KCIiKSA6CiAgICAgICAgICAgICAgICB0b09iamVjdCh0aGlzKSwKICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7CgogICAgICAgIGlmICghbGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgdmFyIGkgPSBsZW5ndGggLSAxOwogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICBpID0gTWF0aC5taW4oaSwgdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSkpOwogICAgICAgIH0KICAgICAgICBpID0gaSA+PSAwID8gaSA6IGxlbmd0aCAtIE1hdGguYWJzKGkpOwogICAgICAgIGZvciAoOyBpID49IDA7IGktLSkgewogICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIHNvdWdodCA9PT0gc2VsZltpXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0xOwogICAgfTsKfQppZiAoIU9iamVjdC5nZXRQcm90b3R5cGVPZikgewogICAgT2JqZWN0LmdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIG9iamVjdC5fX3Byb3RvX18gfHwgKAogICAgICAgICAgICBvYmplY3QuY29uc3RydWN0b3IgPwogICAgICAgICAgICBvYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlIDoKICAgICAgICAgICAgcHJvdG90eXBlT2ZPYmplY3QKICAgICAgICApOwogICAgfTsKfQppZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpIHsKICAgIHZhciBFUlJfTk9OX09CSkVDVCA9ICJPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNhbGxlZCBvbiBhICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIm5vbi1vYmplY3Q6ICI7CiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpIHsKICAgICAgICBpZiAoKHR5cGVvZiBvYmplY3QgIT0gIm9iamVjdCIgJiYgdHlwZW9mIG9iamVjdCAhPSAiZnVuY3Rpb24iKSB8fCBvYmplY3QgPT09IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRVJSX05PTl9PQkpFQ1QgKyBvYmplY3QpOwogICAgICAgIGlmICghb3ducyhvYmplY3QsIHByb3BlcnR5KSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICB2YXIgZGVzY3JpcHRvciwgZ2V0dGVyLCBzZXR0ZXI7CiAgICAgICAgZGVzY3JpcHRvciA9ICB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9OwogICAgICAgIGlmIChzdXBwb3J0c0FjY2Vzc29ycykgewogICAgICAgICAgICB2YXIgcHJvdG90eXBlID0gb2JqZWN0Ll9fcHJvdG9fXzsKICAgICAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZU9mT2JqZWN0OwoKICAgICAgICAgICAgdmFyIGdldHRlciA9IGxvb2t1cEdldHRlcihvYmplY3QsIHByb3BlcnR5KTsKICAgICAgICAgICAgdmFyIHNldHRlciA9IGxvb2t1cFNldHRlcihvYmplY3QsIHByb3BlcnR5KTsKICAgICAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTsKCiAgICAgICAgICAgIGlmIChnZXR0ZXIgfHwgc2V0dGVyKSB7CiAgICAgICAgICAgICAgICBpZiAoZ2V0dGVyKSBkZXNjcmlwdG9yLmdldCA9IGdldHRlcjsKICAgICAgICAgICAgICAgIGlmIChzZXR0ZXIpIGRlc2NyaXB0b3Iuc2V0ID0gc2V0dGVyOwogICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07CiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7CiAgICB9Owp9CmlmICghT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMpIHsKICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KTsKICAgIH07Cn0KaWYgKCFPYmplY3QuY3JlYXRlKSB7CiAgICB2YXIgY3JlYXRlRW1wdHk7CiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5fX3Byb3RvX18gPT09IG51bGwpIHsKICAgICAgICBjcmVhdGVFbXB0eSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHsgIl9fcHJvdG9fXyI6IG51bGwgfTsKICAgICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgICBjcmVhdGVFbXB0eSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGVtcHR5ID0ge307CiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZW1wdHkpCiAgICAgICAgICAgICAgICBlbXB0eVtpXSA9IG51bGw7CiAgICAgICAgICAgIGVtcHR5LmNvbnN0cnVjdG9yID0KICAgICAgICAgICAgZW1wdHkuaGFzT3duUHJvcGVydHkgPQogICAgICAgICAgICBlbXB0eS5wcm9wZXJ0eUlzRW51bWVyYWJsZSA9CiAgICAgICAgICAgIGVtcHR5LmlzUHJvdG90eXBlT2YgPQogICAgICAgICAgICBlbXB0eS50b0xvY2FsZVN0cmluZyA9CiAgICAgICAgICAgIGVtcHR5LnRvU3RyaW5nID0KICAgICAgICAgICAgZW1wdHkudmFsdWVPZiA9CiAgICAgICAgICAgIGVtcHR5Ll9fcHJvdG9fXyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiBlbXB0eTsKICAgICAgICB9CiAgICB9CgogICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHsKICAgICAgICB2YXIgb2JqZWN0OwogICAgICAgIGlmIChwcm90b3R5cGUgPT09IG51bGwpIHsKICAgICAgICAgICAgb2JqZWN0ID0gY3JlYXRlRW1wdHkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodHlwZW9mIHByb3RvdHlwZSAhPSAib2JqZWN0IikKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoInR5cGVvZiBwcm90b3R5cGVbIisodHlwZW9mIHByb3RvdHlwZSkrIl0gIT0gJ29iamVjdCciKTsKICAgICAgICAgICAgdmFyIFR5cGUgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgICAgVHlwZS5wcm90b3R5cGUgPSBwcm90b3R5cGU7CiAgICAgICAgICAgIG9iamVjdCA9IG5ldyBUeXBlKCk7CiAgICAgICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7CiAgICAgICAgfQogICAgICAgIGlmIChwcm9wZXJ0aWVzICE9PSB2b2lkIDApCiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iamVjdCwgcHJvcGVydGllcyk7CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgIH07Cn0KCmZ1bmN0aW9uIGRvZXNEZWZpbmVQcm9wZXJ0eVdvcmsob2JqZWN0KSB7CiAgICB0cnkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsICJzZW50aW5lbCIsIHt9KTsKICAgICAgICByZXR1cm4gInNlbnRpbmVsIiBpbiBvYmplY3Q7CiAgICB9IGNhdGNoIChleGNlcHRpb24pIHsKICAgIH0KfQppZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7CiAgICB2YXIgZGVmaW5lUHJvcGVydHlXb3Jrc09uT2JqZWN0ID0gZG9lc0RlZmluZVByb3BlcnR5V29yayh7fSk7CiAgICB2YXIgZGVmaW5lUHJvcGVydHlXb3Jrc09uRG9tID0gdHlwZW9mIGRvY3VtZW50ID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgZG9lc0RlZmluZVByb3BlcnR5V29yayhkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7CiAgICBpZiAoIWRlZmluZVByb3BlcnR5V29ya3NPbk9iamVjdCB8fCAhZGVmaW5lUHJvcGVydHlXb3Jrc09uRG9tKSB7CiAgICAgICAgdmFyIGRlZmluZVByb3BlcnR5RmFsbGJhY2sgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgICB9Cn0KCmlmICghT2JqZWN0LmRlZmluZVByb3BlcnR5IHx8IGRlZmluZVByb3BlcnR5RmFsbGJhY2spIHsKICAgIHZhciBFUlJfTk9OX09CSkVDVF9ERVNDUklQVE9SID0gIlByb3BlcnR5IGRlc2NyaXB0aW9uIG11c3QgYmUgYW4gb2JqZWN0OiAiOwogICAgdmFyIEVSUl9OT05fT0JKRUNUX1RBUkdFVCA9ICJPYmplY3QuZGVmaW5lUHJvcGVydHkgY2FsbGVkIG9uIG5vbi1vYmplY3Q6ICIKICAgIHZhciBFUlJfQUNDRVNTT1JTX05PVF9TVVBQT1JURUQgPSAiZ2V0dGVycyAmIHNldHRlcnMgY2FuIG5vdCBiZSBkZWZpbmVkICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvbiB0aGlzIGphdmFzY3JpcHQgZW5naW5lIjsKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7CiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqZWN0ICE9ICJvYmplY3QiICYmIHR5cGVvZiBvYmplY3QgIT0gImZ1bmN0aW9uIikgfHwgb2JqZWN0ID09PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEVSUl9OT05fT0JKRUNUX1RBUkdFVCArIG9iamVjdCk7CiAgICAgICAgaWYgKCh0eXBlb2YgZGVzY3JpcHRvciAhPSAib2JqZWN0IiAmJiB0eXBlb2YgZGVzY3JpcHRvciAhPSAiZnVuY3Rpb24iKSB8fCBkZXNjcmlwdG9yID09PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEVSUl9OT05fT0JKRUNUX0RFU0NSSVBUT1IgKyBkZXNjcmlwdG9yKTsKICAgICAgICBpZiAoZGVmaW5lUHJvcGVydHlGYWxsYmFjaykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmluZVByb3BlcnR5RmFsbGJhY2suY2FsbChPYmplY3QsIG9iamVjdCwgcHJvcGVydHksIGRlc2NyaXB0b3IpOwogICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAob3ducyhkZXNjcmlwdG9yLCAidmFsdWUiKSkgewoKICAgICAgICAgICAgaWYgKHN1cHBvcnRzQWNjZXNzb3JzICYmIChsb29rdXBHZXR0ZXIob2JqZWN0LCBwcm9wZXJ0eSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXBTZXR0ZXIob2JqZWN0LCBwcm9wZXJ0eSkpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcHJvdG90eXBlID0gb2JqZWN0Ll9fcHJvdG9fXzsKICAgICAgICAgICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGVPZk9iamVjdDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldOwogICAgICAgICAgICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IGRlc2NyaXB0b3IudmFsdWU7CiAgICAgICAgICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IGRlc2NyaXB0b3IudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXN1cHBvcnRzQWNjZXNzb3JzKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihFUlJfQUNDRVNTT1JTX05PVF9TVVBQT1JURUQpOwogICAgICAgICAgICBpZiAob3ducyhkZXNjcmlwdG9yLCAiZ2V0IikpCiAgICAgICAgICAgICAgICBkZWZpbmVHZXR0ZXIob2JqZWN0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvci5nZXQpOwogICAgICAgICAgICBpZiAob3ducyhkZXNjcmlwdG9yLCAic2V0IikpCiAgICAgICAgICAgICAgICBkZWZpbmVTZXR0ZXIob2JqZWN0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvci5zZXQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgIH07Cn0KaWYgKCFPYmplY3QuZGVmaW5lUHJvcGVydGllcykgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKG9iamVjdCwgcHJvcGVydGllcykgewogICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpIHsKICAgICAgICAgICAgaWYgKG93bnMocHJvcGVydGllcywgcHJvcGVydHkpKQogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIHByb3BlcnRpZXNbcHJvcGVydHldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgIH07Cn0KaWYgKCFPYmplY3Quc2VhbCkgewogICAgT2JqZWN0LnNlYWwgPSBmdW5jdGlvbiBzZWFsKG9iamVjdCkgewogICAgICAgIHJldHVybiBvYmplY3Q7CiAgICB9Owp9CmlmICghT2JqZWN0LmZyZWV6ZSkgewogICAgT2JqZWN0LmZyZWV6ZSA9IGZ1bmN0aW9uIGZyZWV6ZShvYmplY3QpIHsKICAgICAgICByZXR1cm4gb2JqZWN0OwogICAgfTsKfQp0cnkgewogICAgT2JqZWN0LmZyZWV6ZShmdW5jdGlvbiAoKSB7fSk7Cn0gY2F0Y2ggKGV4Y2VwdGlvbikgewogICAgT2JqZWN0LmZyZWV6ZSA9IChmdW5jdGlvbiBmcmVlemUoZnJlZXplT2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZyZWV6ZShvYmplY3QpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmcmVlemVPYmplY3Qob2JqZWN0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9KShPYmplY3QuZnJlZXplKTsKfQppZiAoIU9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucykgewogICAgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zID0gZnVuY3Rpb24gcHJldmVudEV4dGVuc2lvbnMob2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgIH07Cn0KaWYgKCFPYmplY3QuaXNTZWFsZWQpIHsKICAgIE9iamVjdC5pc1NlYWxlZCA9IGZ1bmN0aW9uIGlzU2VhbGVkKG9iamVjdCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH07Cn0KaWYgKCFPYmplY3QuaXNGcm96ZW4pIHsKICAgIE9iamVjdC5pc0Zyb3plbiA9IGZ1bmN0aW9uIGlzRnJvemVuKG9iamVjdCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH07Cn0KaWYgKCFPYmplY3QuaXNFeHRlbnNpYmxlKSB7CiAgICBPYmplY3QuaXNFeHRlbnNpYmxlID0gZnVuY3Rpb24gaXNFeHRlbnNpYmxlKG9iamVjdCkgewogICAgICAgIGlmIChPYmplY3Qob2JqZWN0KSA9PT0gb2JqZWN0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsgLy8gVE9ETyBtZXNzYWdlCiAgICAgICAgfQogICAgICAgIHZhciBuYW1lID0gJyc7CiAgICAgICAgd2hpbGUgKG93bnMob2JqZWN0LCBuYW1lKSkgewogICAgICAgICAgICBuYW1lICs9ICc/JzsKICAgICAgICB9CiAgICAgICAgb2JqZWN0W25hbWVdID0gdHJ1ZTsKICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSBvd25zKG9iamVjdCwgbmFtZSk7CiAgICAgICAgZGVsZXRlIG9iamVjdFtuYW1lXTsKICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7CiAgICB9Owp9CmlmICghT2JqZWN0LmtleXMpIHsKICAgIHZhciBoYXNEb250RW51bUJ1ZyA9IHRydWUsCiAgICAgICAgZG9udEVudW1zID0gWwogICAgICAgICAgICAidG9TdHJpbmciLAogICAgICAgICAgICAidG9Mb2NhbGVTdHJpbmciLAogICAgICAgICAgICAidmFsdWVPZiIsCiAgICAgICAgICAgICJoYXNPd25Qcm9wZXJ0eSIsCiAgICAgICAgICAgICJpc1Byb3RvdHlwZU9mIiwKICAgICAgICAgICAgInByb3BlcnR5SXNFbnVtZXJhYmxlIiwKICAgICAgICAgICAgImNvbnN0cnVjdG9yIgogICAgICAgIF0sCiAgICAgICAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDsKCiAgICBmb3IgKHZhciBrZXkgaW4geyJ0b1N0cmluZyI6IG51bGx9KSB7CiAgICAgICAgaGFzRG9udEVudW1CdWcgPSBmYWxzZTsKICAgIH0KCiAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7CgogICAgICAgIGlmICgKICAgICAgICAgICAgKHR5cGVvZiBvYmplY3QgIT0gIm9iamVjdCIgJiYgdHlwZW9mIG9iamVjdCAhPSAiZnVuY3Rpb24iKSB8fAogICAgICAgICAgICBvYmplY3QgPT09IG51bGwKICAgICAgICApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmtleXMgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGtleXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkgewogICAgICAgICAgICBpZiAob3ducyhvYmplY3QsIG5hbWUpKSB7CiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoYXNEb250RW51bUJ1ZykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkb250RW51bXNMZW5ndGg7IGkgPCBpaTsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZG9udEVudW0gPSBkb250RW51bXNbaV07CiAgICAgICAgICAgICAgICBpZiAob3ducyhvYmplY3QsIGRvbnRFbnVtKSkgewogICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChkb250RW51bSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGtleXM7CiAgICB9OwoKfQppZiAoIURhdGUubm93KSB7CiAgICBEYXRlLm5vdyA9IGZ1bmN0aW9uIG5vdygpIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9Owp9CnZhciB3cyA9ICJceDA5XHgwQVx4MEJceDBDXHgwRFx4MjBceEEwXHUxNjgwXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzIiArCiAgICAiXHUyMDA0XHUyMDA1XHUyMDA2XHUyMDA3XHUyMDA4XHUyMDA5XHUyMDBBXHUyMDJGXHUyMDVGXHUzMDAwXHUyMDI4IiArCiAgICAiXHUyMDI5XHVGRUZGIjsKaWYgKCFTdHJpbmcucHJvdG90eXBlLnRyaW0pIHsKICAgIHdzID0gIlsiICsgd3MgKyAiXSI7CiAgICB2YXIgdHJpbUJlZ2luUmVnZXhwID0gbmV3IFJlZ0V4cCgiXiIgKyB3cyArIHdzICsgIioiKSwKICAgICAgICB0cmltRW5kUmVnZXhwID0gbmV3IFJlZ0V4cCh3cyArIHdzICsgIiokIik7CiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiB0cmltKCkgewogICAgICAgIHJldHVybiBTdHJpbmcodGhpcykucmVwbGFjZSh0cmltQmVnaW5SZWdleHAsICIiKS5yZXBsYWNlKHRyaW1FbmRSZWdleHAsICIiKTsKICAgIH07Cn0KCmZ1bmN0aW9uIHRvSW50ZWdlcihuKSB7CiAgICBuID0gK247CiAgICBpZiAobiAhPT0gbikgeyAvLyBpc05hTgogICAgICAgIG4gPSAwOwogICAgfSBlbHNlIGlmIChuICE9PSAwICYmIG4gIT09ICgxLzApICYmIG4gIT09IC0oMS8wKSkgewogICAgICAgIG4gPSAobiA+IDAgfHwgLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhuKSk7CiAgICB9CiAgICByZXR1cm4gbjsKfQoKZnVuY3Rpb24gaXNQcmltaXRpdmUoaW5wdXQpIHsKICAgIHZhciB0eXBlID0gdHlwZW9mIGlucHV0OwogICAgcmV0dXJuICgKICAgICAgICBpbnB1dCA9PT0gbnVsbCB8fAogICAgICAgIHR5cGUgPT09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgdHlwZSA9PT0gImJvb2xlYW4iIHx8CiAgICAgICAgdHlwZSA9PT0gIm51bWJlciIgfHwKICAgICAgICB0eXBlID09PSAic3RyaW5nIgogICAgKTsKfQoKZnVuY3Rpb24gdG9QcmltaXRpdmUoaW5wdXQpIHsKICAgIHZhciB2YWwsIHZhbHVlT2YsIHRvU3RyaW5nOwogICAgaWYgKGlzUHJpbWl0aXZlKGlucHV0KSkgewogICAgICAgIHJldHVybiBpbnB1dDsKICAgIH0KICAgIHZhbHVlT2YgPSBpbnB1dC52YWx1ZU9mOwogICAgaWYgKHR5cGVvZiB2YWx1ZU9mID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgdmFsID0gdmFsdWVPZi5jYWxsKGlucHV0KTsKICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsKSkgewogICAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0KICAgIH0KICAgIHRvU3RyaW5nID0gaW5wdXQudG9TdHJpbmc7CiAgICBpZiAodHlwZW9mIHRvU3RyaW5nID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgdmFsID0gdG9TdHJpbmcuY2FsbChpbnB1dCk7CiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbCkpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICB9CiAgICB9CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7Cn0KdmFyIHRvT2JqZWN0ID0gZnVuY3Rpb24gKG8pIHsKICAgIGlmIChvID09IG51bGwpIHsgLy8gdGhpcyBtYXRjaGVzIGJvdGggbnVsbCBhbmQgdW5kZWZpbmVkCiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiY2FuJ3QgY29udmVydCAiK28rIiB0byBvYmplY3QiKTsKICAgIH0KICAgIHJldHVybiBPYmplY3Qobyk7Cn07Cgp9KTsK"},function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var i={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString())||"0"}var o=function(){function o(e,i,r,a){t(this,o);var s=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===r){var c=e&&""+e;c&&function(t){if(t.startsWith("hsl")){var e=t.match(/([\-\d\.e]+)/g).map(Number),i=n(e,4),r=i[0],a=i[1],c=i[2],l=i[3];void 0===l&&(l=1),s.hsla=[r/=360,a/=100,c/=100,l]}else if(t.startsWith("rgb")){var u=t.match(/([\-\d\.e]+)/g).map(Number),h=n(u,4),d=h[3];void 0===d&&(d=1),s.rgba=[h[0],h[1],h[2],d]}else s.rgba=t.startsWith("#")?o.hexToRgb(t):o.nameToRgb(t)||o.hexToRgb(t)}(c.toLowerCase())}else this.rgba=[e,i,r,void 0===a?1:a]}return e(o,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return r(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],i=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,i){return r(t*e[i],3===i?3:1)+n[i]}));return t?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=o.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=o.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(t){this.rgba=o.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(t){var e=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),n=i[e];return void 0===n?n:o.hexToRgb(n.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=n(t,4),i=e[0],r=e[1],o=e[2],a=e[3];i/=255,r/=255,o/=255;var s=Math.max(i,r,o),c=Math.min(i,r,o),l=void 0,u=void 0,h=(s+c)/2;if(s===c)l=u=0;else{var d=s-c;switch(u=h>.5?d/(2-s-c):d/(s+c),s){case i:l=(r-o)/d+(r<o?6:0);break;case r:l=(o-i)/d+2;break;case o:l=(i-r)/d+4}l/=6}return[l,u,h,a]}},{key:"hslToRgb",value:function(t){var e=n(t,4),i=e[0],r=e[1],o=e[2],a=e[3],s=void 0,c=void 0,l=void 0;if(0===r)s=c=l=o;else{var u=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},h=o<.5?o*(1+r):o+r-o*r,d=2*o-h;s=u(d,h,i+1/3),c=u(d,h,i),l=u(d,h,i-1/3)}var p=[255*s,255*c,255*l].map(Math.round);return p[3]=a,p}}]),o}(),a=function(){function n(){t(this,n),this._events=[]}return e(n,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(t,e,i){this._events=this._events.filter((function(r){var o=!0;return t&&t!==r.target&&(o=!1),e&&e!==r.type&&(o=!1),i&&i!==r.handler&&(o=!1),o&&n._doRemove(r.target,r.type,r.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(t){return n._doRemove(t.target,t.type,t.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),n}();function s(t,e,n){var i=!1;function r(t,e,n){return Math.max(e,Math.min(t,n))}function o(t,o,a){if(a&&(i=!0),i){t.preventDefault();var s=e.getBoundingClientRect(),c=s.width,l=s.height,u=o.clientY,h=r(o.clientX-s.left,0,c),d=r(u-s.top,0,l);n(h/c,d/l)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):i=!1}function s(t,e){1===t.touches.length?o(t,t.touches[0],e):i=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){i=!1})),t.add(e,"touchend",(function(t){i=!1})),t.add(e,"touchcancel",(function(t){i=!1}))}var c="keydown",l="mousedown",u="focusin";function h(t,e){return(e||document).querySelector(t)}function d(t){t.preventDefault(),t.stopPropagation()}function p(t,e,n,i,r){t.add(e,c,(function(t){n.indexOf(t.key)>=0&&(r&&d(t),i(t))}))}var f=document.createElement("style");return f.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(f),function(){function n(e){t(this,n),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1},this._events=new a,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return e(n,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var i in t)e[i]=t[i]}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var i=t.color||t.colour;i&&this._setColor(i)}var r=n.parent;if(r&&n.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(r,"click",o),p(this._events,r,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===c?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;t?e===l||e===u?t.timeStamp>(this.__containedEvent||0)+100&&(n=!0):(d(t),n=!0):n=!0,n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==l&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new o(t)}catch(r){if(e.failSilently)return;throw r}if(!this.settings.alpha){var i=n.hsla;i[3]=1,n.hsla=i}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,n,i=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(n=document.createElement("div")).innerHTML=e,n.firstElementChild);return this.domElement=i,this._domH=h(".picker_hue",i),this._domSL=h(".picker_sl",i),this._domA=h(".picker_alpha",i),this._domEdit=h(".picker_editor input",i),this._domSample=h(".picker_sample",i),this._domOkay=h(".picker_done button",i),this._domCancel=h(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor("#0cf"),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,i=this._events;function r(t,e,n){i.add(t,e,n)}r(n,"click",(function(t){return t.preventDefault()})),s(i,this._domH,(function(t,n){return e._setHSLA(t)})),s(i,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&s(i,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var o=this._domEdit;r(o,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(o,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,l,e),r(window,u,e),p(i,n,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};r(n,l,o),r(n,u,o),r(t._domCancel,"click",e)}));var a=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",a),p(i,n,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===i?e.classList.add(t):e.classList.remove(t)})),e.classList.add(i)}))}},{key:"_setHSLA",value:function(t,e,n,i,r){r=r||{};var o=this.colour,a=o.hsla;[t,e,n,i].forEach((function(t,e){(t||0===t)&&(a[e]=t)})),o.hsla=a,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,i="hsl("+360*n[0]+", 100%, 50%)",r=e.hslString,o=e.hslaString,a=this._domSL,s=this._domA,c=h(".picker_selector",this._domH),l=h(".picker_selector",a),u=h(".picker_selector",s);m(0,c,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,m(0,l,n[1]),v(0,l,1-n[2]),a.style.color=r,v(0,u,1-n[3]);var d=r,p=d.replace("hsl","hsla").replace(")",", 0)");if(this._domA.style.backgroundImage="linear-gradient("+[d,p]+"), url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var f=this.settings.alpha,g=void 0;switch(this.settings.editorFormat){case"rgb":g=e.printRGB(f);break;case"hsl":g=e.printHSL(f);break;default:g=e.printHex(f)}this._domEdit.value=g}this._domSample.style.color=o}function m(t,e,n){e.style.left=100*n+"%"}function v(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",i=e.style.display!==n;return i&&(e.style.display=n),i}}],[{key:"StyleElement",get:function(){return f}}]),n}()}()},function(t,e){window.ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],(function(t,e,n){e.isDark=!1,e.cssClass="ace-jsoneditor",e.cssText='.ace-jsoneditor .ace_gutter {\nbackground: #ebebeb;\ncolor: #333\n}\n\n.ace-jsoneditor.ace_editor {\nfont-family: "dejavu sans mono", "droid sans mono", consolas, monaco, "lucida console", "courier new", courier, monospace, sans-serif;\nline-height: 1.3;\nbackground-color: #fff;\n}\n.ace-jsoneditor .ace_print-margin {\nwidth: 1px;\nbackground: #e8e8e8\n}\n.ace-jsoneditor .ace_scroller {\nbackground-color: #FFFFFF\n}\n.ace-jsoneditor .ace_text-layer {\ncolor: gray\n}\n.ace-jsoneditor .ace_variable {\ncolor: #1a1a1a\n}\n.ace-jsoneditor .ace_cursor {\nborder-left: 2px solid #000000\n}\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\nborder-left: 0px;\nborder-bottom: 1px solid #000000\n}\n.ace-jsoneditor .ace_marker-layer .ace_selection {\nbackground: lightgray\n}\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\nbox-shadow: 0 0 3px 0px #FFFFFF;\nborder-radius: 2px\n}\n.ace-jsoneditor .ace_marker-layer .ace_step {\nbackground: rgb(255, 255, 0)\n}\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\nmargin: -1px 0 0 -1px;\nborder: 1px solid #BFBFBF\n}\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\nbackground: #FFFBD1\n}\n.ace-jsoneditor .ace_gutter-active-line {\nbackground-color : #dcdcdc\n}\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\nborder: 1px solid lightgray\n}\n.ace-jsoneditor .ace_invisible {\ncolor: #BFBFBF\n}\n.ace-jsoneditor .ace_keyword,\n.ace-jsoneditor .ace_meta,\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\ncolor: #AF956F\n}\n.ace-jsoneditor .ace_keyword.ace_operator {\ncolor: #484848\n}\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\ncolor: #96DC5F\n}\n.ace-jsoneditor .ace_constant.ace_language {\ncolor: darkorange\n}\n.ace-jsoneditor .ace_constant.ace_numeric {\ncolor: red\n}\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\ncolor: #BF78CC\n}\n.ace-jsoneditor .ace_invalid {\ncolor: #FFFFFF;\nbackground-color: #FF002A;\n}\n.ace-jsoneditor .ace_fold {\nbackground-color: #AF956F;\nborder-color: #000000\n}\n.ace-jsoneditor .ace_storage,\n.ace-jsoneditor .ace_support.ace_class,\n.ace-jsoneditor .ace_support.ace_function,\n.ace-jsoneditor .ace_support.ace_other,\n.ace-jsoneditor .ace_support.ace_type {\ncolor: #C52727\n}\n.ace-jsoneditor .ace_string {\ncolor: green\n}\n.ace-jsoneditor .ace_comment {\ncolor: #BCC8BA\n}\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\ncolor: #606060\n}\n.ace-jsoneditor .ace_markup.ace_underline {\ntext-decoration: underline\n}\n.ace-jsoneditor .ace_indent-guide {\nbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\n}',t("../lib/dom").importCssString(e.cssText,e.cssClass)}))},function(t,e,n){e.tryRequireAjv=function(){try{return n(43)}catch(t){}}},function(t,e,n){"use strict";var i=n(44),r=n(17),o=n(48),a=n(25),s=n(26),c=n(49),l=n(50),u=n(71),h=n(5);t.exports=v,v.prototype.validate=function(t,e){var n;if("string"==typeof t){if(!(n=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var i=this._addSchema(t);n=i.validate||this._compile(i)}var r=n(e);return!0!==n.$async&&(this.errors=n.errors),r},v.prototype.compile=function(t,e){var n=this._addSchema(t,void 0,e);return n.validate||this._compile(n)},v.prototype.addSchema=function(t,e,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)this.addSchema(t[o],void 0,n,i);return this}var a=this._getId(t);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return w(this,e=r.normalizeId(e||a)),this._schemas[e]=this._addSchema(t,n,i,!0),this},v.prototype.addMetaSchema=function(t,e,n){return this.addSchema(t,e,n,!0),this},v.prototype.validateSchema=function(t,e){var n=t.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(t){var e=t._opts.meta;return t._opts.defaultMeta="object"==typeof e?t._getId(e)||e:t.getSchema(f)?f:void 0,t._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(n,t);if(!i&&e){var r="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(r);this.logger.error(r)}return i},v.prototype.getSchema=function(t){var e=y(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var n=r.schema.call(t,{schema:{}},e);if(n){var o=n.schema,s=n.root,c=n.baseId,l=i.call(t,o,s,void 0,c);return t._fragments[e]=new a({ref:e,fragment:!0,schema:o,root:s,baseId:c,validate:l}),l}}(this,t)}},v.prototype.removeSchema=function(t){if(t instanceof RegExp)return b(this,this._schemas,t),b(this,this._refs,t),this;switch(typeof t){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var e=y(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var n=this._opts.serialize,i=n?n(t):t;this._cache.del(i);var o=this._getId(t);o&&(o=r.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},v.prototype.addFormat=function(t,e){return"string"==typeof e&&(e=new RegExp(e)),this._formats[t]=e,this},v.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var n=void 0===(e=e||{}).separator?", ":e.separator,i=void 0===e.dataVar?"data":e.dataVar,r="",o=0;o<t.length;o++){var a=t[o];a&&(r+=i+a.dataPath+" "+a.message+n)}return r.slice(0,-n.length)},v.prototype._addSchema=function(t,e,n,i){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(t):t,c=this._cache.get(s);if(c)return c;i=i||!1!==this._opts.addUsedSchema;var l=r.normalizeId(this._getId(t));l&&i&&w(this,l);var u,h=!1!==this._opts.validateSchema&&!e;h&&!(u=l&&l==r.normalizeId(t.$schema))&&this.validateSchema(t,!0);var d=r.ids.call(this,t),p=new a({id:l,schema:t,localRefs:d,cacheKey:s,meta:n});return"#"!=l[0]&&i&&(this._refs[l]=p),this._cache.put(s,p),h&&u&&this.validateSchema(t,!0),p},v.prototype._compile=function(t,e){if(t.compiling)return t.validate=o,o.schema=t.schema,o.errors=null,o.root=e||o,!0===t.schema.$async&&(o.$async=!0),o;var n,r;t.compiling=!0,t.meta&&(n=this._opts,this._opts=this._metaOpts);try{r=i.call(this,t.schema,e,t.localRefs)}catch(a){throw delete t.validate,a}finally{t.compiling=!1,t.meta&&(this._opts=n)}return t.validate=r,t.refs=r.refs,t.refVal=r.refVal,t.root=r.root,r;function o(){var e=t.validate,n=e.apply(this,arguments);return o.errors=e.errors,n}},v.prototype.compileAsync=n(72);var d=n(73);v.prototype.addKeyword=d.add,v.prototype.getKeyword=d.get,v.prototype.removeKeyword=d.remove,v.prototype.validateKeyword=d.validate;var p=n(19);v.ValidationError=p.Validation,v.MissingRefError=p.MissingRef,v.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",g=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m=["/properties"];function v(t){if(!(this instanceof v))return new v(t);t=this._opts=h.copy(t)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:I,warn:I,error:I};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(t.format),this._cache=t.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(t){switch(t.schemaId){case"auto":return x;case"id":return _;default:return C}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=s),this._metaOpts=function(t){for(var e=h.copy(t._opts),n=0;n<g.length;n++)delete e[g[n]];return e}(this),t.formats&&function(t){for(var e in t._opts.formats)t.addFormat(e,t._opts.formats[e])}(this),function(t){var e;if(t._opts.$data&&(e=n(76),t.addMetaSchema(e,e.$id,!0)),!1!==t._opts.meta){var i=n(32);t._opts.$data&&(i=u(i,m)),t.addMetaSchema(i,f,!0),t._refs["http://json-schema.org/schema"]=f}}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var n in e)t.addSchema(e[n],n)}(this)}function y(t,e){return e=r.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function b(t,e,n){for(var i in e){var r=e[i];r.meta||n&&!n.test(i)||(t._cache.del(r.cacheKey),delete e[i])}}function _(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function C(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function x(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function w(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function I(){}},function(t,e,n){"use strict";var i=n(17),r=n(5),o=n(19),a=n(26),s=n(27),c=r.ucs2length,l=n(18),u=o.Validation;function h(t,e,n){var i=p.call(this,t,e,n);return i>=0?{index:i,compiling:!0}:(this._compilations[i=this._compilations.length]={schema:t,root:e,baseId:n},{index:i,compiling:!1})}function d(t,e,n){var i=p.call(this,t,e,n);i>=0&&this._compilations.splice(i,1)}function p(t,e,n){for(var i=0;i<this._compilations.length;i++){var r=this._compilations[i];if(r.schema==t&&r.root==e&&r.baseId==n)return i}return-1}function f(t,e){return"var pattern"+t+" = new RegExp("+r.toQuotedString(e[t])+");"}function g(t){return"var default"+t+" = defaults["+t+"];"}function m(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function v(t){return"var customRule"+t+" = customRules["+t+"];"}function y(t,e){if(!t.length)return"";for(var n="",i=0;i<t.length;i++)n+=e(i,t);return n}t.exports=function t(e,n,p,b){var _=this,C=this._opts,x=[void 0],w={},I=[],A={},P=[],O={},M=[],S=h.call(this,e,n=n||{schema:e,refVal:x,refs:w},b),k=this._compilations[S.index];if(S.compiling)return k.callValidate=function t(){var e=k.validate,n=e.apply(this,arguments);return t.errors=e.errors,n};var E=this._formats,L=this.RULES;try{var T=N(e,n,p,b);k.validate=T;var R=k.callValidate;return R&&(R.schema=T.schema,R.errors=null,R.refs=T.refs,R.refVal=T.refVal,R.root=T.root,R.$async=T.$async,C.sourceCode&&(R.source=T.source)),T}finally{d.call(this,e,n,b)}function N(e,a,h,d){var p=!a||a&&a.schema==e;if(a.schema!=n.schema)return t.call(_,e,a,h,d);var b,A=!0===e.$async,O=s({isTop:!0,schema:e,isRoot:p,baseId:d,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:L,validate:s,util:r,resolve:i,resolveRef:B,usePattern:F,useDefault:z,useCustomRule:V,opts:C,formats:E,logger:_.logger,self:_});O=y(x,m)+y(I,f)+y(P,g)+y(M,v)+O,C.processCode&&(O=C.processCode(O));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",O)(_,L,E,n,x,P,M,l,c,u),x[0]=b}catch(S){throw _.logger.error("Error compiling schema, function code:",O),S}return b.schema=e,b.errors=null,b.refs=w,b.refVal=x,b.root=p?b:a,A&&(b.$async=!0),!0===C.sourceCode&&(b.source={code:O,patterns:I,defaults:P}),b}function B(e,r,o){r=i.url(e,r);var a,s,c=w[r];if(void 0!==c)return D(a=x[c],s="refVal["+c+"]");if(!o&&n.refs){var l=n.refs[r];if(void 0!==l)return D(a=n.refVal[l],s=j(r,a))}s=j(r);var u=i.call(_,N,n,r);if(void 0===u){var h=p&&p[r];h&&(u=i.inlineRef(h,C.inlineRefs)?h:t.call(_,h,n,p,e))}if(void 0!==u)return function(t,e){x[w[t]]=e}(r,u),D(u,s);!function(t){delete w[t]}(r)}function j(t,e){var n=x.length;return x[n]=e,w[t]=n,"refVal"+n}function D(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function F(t){var e=A[t];return void 0===e&&(e=A[t]=I.length,I[e]=t),"pattern"+e}function z(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return r.toQuotedString(t);case"object":if(null===t)return"null";var e=a(t),n=O[e];return void 0===n&&(n=O[e]=P.length,P[n]=t),"default"+n}}function V(t,e,n,i){if(!1!==_._opts.validateSchema){var r=t.definition.dependencies;if(r&&!r.every((function(t){return Object.prototype.hasOwnProperty.call(n,t)})))throw new Error("parent schema must have all required keywords: "+r.join(","));var o=t.definition.validateSchema;if(o&&!o(e)){var a="keyword schema is invalid: "+_.errorsText(o.errors);if("log"!=_._opts.validateSchema)throw new Error(a);_.logger.error(a)}}var s,c=t.definition.compile,l=t.definition.inline,u=t.definition.macro;if(c)s=c.call(_,e,n,i);else if(u)s=u.call(_,e,n,i),!1!==C.validateSchema&&_.validateSchema(s,!0);else if(l)s=l.call(_,i,t.keyword,e,n);else if(!(s=t.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var h=M.length;return M[h]=s,{code:"customRule"+h,validate:s}}}},function(t,e,n){!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var i=e.length-1,r=1;r<i;++r)e[r]=e[r].slice(1,-1);return e[i]=e[i].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function i(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function r(t){return t.toUpperCase()}function o(t){var i="[A-Za-z]",r="[0-9]",o=e(r,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=e("[\\:\\/\\?\\#\\[\\]\\@]",s),l=t?"[\\uE000-\\uF8FF]":"[]",u=e(i,r,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=n(i+e(i,r,"[\\+\\-\\.]")+"*"),d=n(n(a+"|"+e(u,s,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|"+r),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+r)),f=n(p+"\\."+p+"\\."+p+"\\."+p),g=n(o+"{1,4}"),m=n(n(g+"\\:"+g)+"|"+f),v=n(n(g+"\\:")+"{6}"+m),y=n("\\:\\:"+n(g+"\\:")+"{5}"+m),b=n(n(g)+"?\\:\\:"+n(g+"\\:")+"{4}"+m),_=n(n(n(g+"\\:")+"{0,1}"+g)+"?\\:\\:"+n(g+"\\:")+"{3}"+m),C=n(n(n(g+"\\:")+"{0,2}"+g)+"?\\:\\:"+n(g+"\\:")+"{2}"+m),x=n(n(n(g+"\\:")+"{0,3}"+g)+"?\\:\\:"+g+"\\:"+m),w=n(n(n(g+"\\:")+"{0,4}"+g)+"?\\:\\:"+m),I=n(n(n(g+"\\:")+"{0,5}"+g)+"?\\:\\:"+g),A=n(n(n(g+"\\:")+"{0,6}"+g)+"?\\:\\:"),P=n([v,y,b,_,C,x,w,I,A].join("|")),O=n(n(u+"|"+a)+"+"),M=(n(P+"\\%25"+O),n(P+n("\\%25|\\%(?!"+o+"{2})")+O)),S=n("[vV]"+o+"+\\."+e(u,s,"[\\:]")+"+"),k=n("\\["+n(M+"|"+P+"|"+S)+"\\]"),E=n(n(a+"|"+e(u,s))+"*"),L=n(k+"|"+f+"(?!"+E+")|"+E),T=n("[0-9]*"),R=n(n(d+"@")+"?"+L+n("\\:"+T)+"?"),N=n(a+"|"+e(u,s,"[\\:\\@]")),B=n(N+"*"),j=n(N+"+"),D=n(n(a+"|"+e(u,s,"[\\@]"))+"+"),F=n(n("\\/"+B)+"*"),z=n("\\/"+n(j+F)+"?"),V=n(D+F),G=n(j+F),Z="(?!"+N+")",W=(n(F+"|"+z+"|"+V+"|"+G+"|"+Z),n(n(N+"|"+e("[\\/\\?]",l))+"*")),H=n(n(N+"|[\\/\\?]")+"*"),U=n(n("\\/\\/"+R+F)+"|"+z+"|"+G+"|"+Z),$=n(h+"\\:"+U+n("\\?"+W)+"?"+n("\\#"+H)+"?"),K=n(n("\\/\\/"+R+F)+"|"+z+"|"+V+"|"+Z),X=n(K+n("\\?"+W)+"?"+n("\\#"+H)+"?");return n($+"|"+X),n(h+"\\:"+U+n("\\?"+W)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+L+")"+n("\\:("+T+")")+"?)")+"?("+F+"|"+z+"|"+G+"|"+Z+")"),n("\\?("+W+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+L+")"+n("\\:("+T+")")+"?)")+"?("+F+"|"+z+"|"+V+"|"+Z+")"),n("\\?("+W+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+L+")"+n("\\:("+T+")")+"?)")+"?("+F+"|"+z+"|"+G+"|"+Z+")"),n("\\?("+W+")"),n("\\#("+H+")"),n("("+d+")@"),n("\\:("+T+")"),{NOT_SCHEME:new RegExp(e("[^]",i,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,s),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,s),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,s),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,s),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,s,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,s),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,c),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+O+")")+"?\\]?$")}}var a=o(!1),s=o(!0),c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=36,h=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function v(t){throw new RangeError(f[t])}function y(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+function(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}((t=t.replace(p,".")).split("."),e).join(".")}var b=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},_=function(t,e,n){var i=0;for(t=n?g(t/700):t>>1,t+=g(t/e);t>455;i+=u)t=g(t/35);return g(i+36*t/(t+38))},C=function(t){return y(t,(function(t){return d.test(t)?"xn--"+function(t){var e=[],n=(t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e}(t)).length,i=128,r=0,o=72,a=!0,s=!1,c=void 0;try{for(var h,d=t[Symbol.iterator]();!(a=(h=d.next()).done);a=!0){var p=h.value;p<128&&e.push(m(p))}}catch(z){s=!0,c=z}finally{try{!a&&d.return&&d.return()}finally{if(s)throw c}}var f=e.length,y=f;for(f&&e.push("-");y<n;){var C=l,x=!0,w=!1,I=void 0;try{for(var A,P=t[Symbol.iterator]();!(x=(A=P.next()).done);x=!0){var O=A.value;O>=i&&O<C&&(C=O)}}catch(z){w=!0,I=z}finally{try{!x&&P.return&&P.return()}finally{if(w)throw I}}var M=y+1;C-i>g((l-r)/M)&&v("overflow"),r+=(C-i)*M,i=C;var S=!0,k=!1,E=void 0;try{for(var L,T=t[Symbol.iterator]();!(S=(L=T.next()).done);S=!0){var R=L.value;if(R<i&&++r>l&&v("overflow"),R==i){for(var N=r,B=u;;B+=u){var j=B<=o?1:B>=o+26?26:B-o;if(N<j)break;var D=N-j,F=u-j;e.push(m(b(j+D%F,0))),N=g(D/F)}e.push(m(b(N,0))),o=_(r,M,y==f),r=0,++y}}}catch(z){k=!0,E=z}finally{try{!S&&T.return&&T.return()}finally{if(k)throw E}}++r,++i}return e.join("")}(t):t}))},x=function(t){return y(t,(function(t){return h.test(t)?function(t){var e,n=[],i=t.length,r=0,o=128,a=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var c=0;c<s;++c)t.charCodeAt(c)>=128&&v("not-basic"),n.push(t.charCodeAt(c));for(var h=s>0?s+1:0;h<i;){for(var d=r,p=1,f=u;;f+=u){h>=i&&v("invalid-input");var m=(e=t.charCodeAt(h++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u;(m>=u||m>g((l-r)/p))&&v("overflow"),r+=m*p;var y=f<=a?1:f>=a+26?26:f-a;if(m<y)break;var b=u-y;p>g(l/b)&&v("overflow"),p*=b}var C=n.length+1;a=_(r-d,C,0==d),g(r/C)>l-o&&v("overflow"),o+=g(r/C),r%=C,n.splice(r++,0,o)}return String.fromCodePoint.apply(String,n)}(t.slice(4).toLowerCase()):t}))},w={};function I(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function A(t){for(var e="",n=0,i=t.length;n<i;){var r=parseInt(t.substr(n+1,2),16);if(r<128)e+=String.fromCharCode(r),n+=3;else if(r>=194&&r<224){if(i-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&r)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(r>=224){if(i-n>=9){var a=parseInt(t.substr(n+4,2),16),s=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function P(t,e){function n(t){var n=A(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,I).replace(e.PCT_ENCODED,r)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,I).replace(e.PCT_ENCODED,r)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,I).replace(e.PCT_ENCODED,r)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,I).replace(e.PCT_ENCODED,r)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,I).replace(e.PCT_ENCODED,r)),t}function O(t){return t.replace(/^0*(.*)/,"$1")||"0"}function M(t,e){var n=t.match(e.IPV4ADDRESS)||[],i=c(n,2)[1];return i?i.split(".").map(O).join("."):t}function S(t,e){var n=t.match(e.IPV6ADDRESS)||[],i=c(n,3),r=i[1],o=i[2];if(r){for(var a=r.toLowerCase().split("::").reverse(),s=c(a,2),l=s[0],u=s[1],h=u?u.split(":").map(O):[],d=l.split(":").map(O),p=e.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,g=d.length-f,m=Array(f),v=0;v<f;++v)m[v]=h[v]||d[g+v]||"";p&&(m[f-1]=M(m[f-1],e));var y=m.reduce((function(t,e,n){if(!e||"0"===e){var i=t[t.length-1];i&&i.index+i.length===n?i.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],b=void 0;if(y&&y.length>1){var _=m.slice(0,y.index),C=m.slice(y.index+y.length);b=_.join(":")+"::"+C.join(":")}else b=m.join(":");return o&&(b+="%"+o),b}return t}var k=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,E=void 0==="".match(/(){0}/)[1];function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==e.iri?s:a;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var r=t.match(k);if(r){E?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==t.indexOf("@")?r[3]:void 0,n.host=-1!==t.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==t.indexOf("?")?r[7]:void 0,n.fragment=-1!==t.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.host&&(n.host=S(M(n.host,i),i)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=w[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)P(n,i);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=C(n.host.replace(i.PCT_ENCODED,A).toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+c}P(n,a)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function T(t,e){var n=!1!==e.iri?s:a,i=[];return void 0!==t.userinfo&&(i.push(t.userinfo),i.push("@")),void 0!==t.host&&i.push(S(M(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"==typeof t.port&&(i.push(":"),i.push(t.port.toString(10))),i.length?i.join(""):void 0}var R=/^\.\.?\//,N=/^\/\.(\/|$)/,B=/^\/\.\.(\/|$)/,j=/^\/?(?:.|\n)*?(?=\/|$)/;function D(t){for(var e=[];t.length;)if(t.match(R))t=t.replace(R,"");else if(t.match(N))t=t.replace(N,"/");else if(t.match(B))t=t.replace(B,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(j);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];t=t.slice(i.length),e.push(i)}return e.join("")}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?s:a,i=[],r=w[(e.scheme||t.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||r&&r.domainHost)try{t.host=e.iri?x(t.host):C(t.host.replace(n.PCT_ENCODED,A).toLowerCase())}catch(l){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+l}P(t,n),"suffix"!==e.reference&&t.scheme&&(i.push(t.scheme),i.push(":"));var o=T(t,e);if(void 0!==o&&("suffix"!==e.reference&&i.push("//"),i.push(o),t.path&&"/"!==t.path.charAt(0)&&i.push("/")),void 0!==t.path){var c=t.path;e.absolutePath||r&&r.absolutePath||(c=D(c)),void 0===o&&(c=c.replace(/^\/\//,"/%2F")),i.push(c)}return void 0!==t.query&&(i.push("?"),i.push(t.query)),void 0!==t.fragment&&(i.push("#"),i.push(t.fragment)),i.join("")}function z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(t=L(F(t,n),n),e=L(F(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=D(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=D(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=D(e.path):(i.path=void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:e.path:"/"+e.path,i.path=D(i.path)),i.query=e.query):(i.path=t.path,i.query=void 0!==e.query?e.query:t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function V(t,e){return t&&t.toString().replace(e&&e.iri?s.PCT_ENCODED:a.PCT_ENCODED,A)}var G={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},Z={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},W={},H="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",U="[0-9A-Fa-f]",$=n(n("%[EFef][0-9A-Fa-f]%"+U+U+"%"+U+U)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+U+U)+"|"+n("%"+U+U)),K=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(H,"g"),Y=new RegExp($,"g"),q=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',K),"g"),J=new RegExp(e("[^]",H,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Q=J;function tt(t){var e=A(t);return e.match(X)?e:t}var et={scheme:"mailto",parse:function(t,e){var n=t,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var r=!1,o={},a=n.query.split("&"),s=0,c=a.length;s<c;++s){var l=a[s].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),h=0,d=u.length;h<d;++h)i.push(u[h]);break;case"subject":n.subject=V(l[1],e);break;case"body":n.body=V(l[1],e);break;default:r=!0,o[V(l[0],e)]=V(l[1],e)}}r&&(n.headers=o)}n.query=void 0;for(var p=0,f=i.length;p<f;++p){var g=i[p].split("@");if(g[0]=V(g[0]),e.unicodeSupport)g[1]=V(g[1],e).toLowerCase();else try{g[1]=C(V(g[1],e).toLowerCase())}catch(m){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+m}i[p]=g.join("@")}return n},serialize:function(t,e){var n,i=t,o=null!=(n=t.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,s=o.length;a<s;++a){var c=String(o[a]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Y,tt).replace(Y,r).replace(q,I),h=c.slice(l+1);try{h=e.iri?x(h):C(V(h,e).toLowerCase())}catch(g){i.error=i.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+g}o[a]=u+"@"+h}i.path=o.join(",")}var d=t.headers=t.headers||{};t.subject&&(d.subject=t.subject),t.body&&(d.body=t.body);var p=[];for(var f in d)d[f]!==W[f]&&p.push(f.replace(Y,tt).replace(Y,r).replace(J,I)+"="+d[f].replace(Y,tt).replace(Y,r).replace(Q,I));return p.length&&(i.query=p.join("&")),i}},nt=/^([^\:]+)\:(.*)/,it={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(nt),i=t;if(n){var r=e.scheme||i.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=w[r+":"+(e.nid||o)];i.nid=o,i.nss=a,i.path=void 0,s&&(i=s.parse(i,e))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(t,e){var n=t.nid,i=w[(e.scheme||t.scheme||"urn")+":"+(e.nid||n)];i&&(t=i.serialize(t,e));var r=t;return r.path=(n||e.nid)+":"+t.nss,r}},rt=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ot={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(rt)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};w[G.scheme]=G,w[Z.scheme]=Z,w[et.scheme]=et,w[it.scheme]=it,w[ot.scheme]=ot,t.SCHEMES=w,t.pctEncChar=I,t.pctDecChars=A,t.parse=L,t.removeDotSegments=D,t.serialize=F,t.resolveComponents=z,t.resolve=function(t,e,n){var i=function(t,e){var n={scheme:"null"};if(e)for(var i in e)n[i]=e[i];return n}(0,n);return F(z(L(t,i),L(e,i),i,!0),i)},t.normalize=function(t,e){return"string"==typeof t?t=F(L(t,e),e):"object"===i(t)&&(t=L(F(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=F(L(t,n),n):"object"===i(t)&&(t=F(t,n)),"string"==typeof e?e=F(L(e,n),n):"object"===i(e)&&(e=F(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?s.ESCAPE:a.ESCAPE,I)},t.unescapeComponent=V,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=0,i=t.length,r=0;r<i;)n++,(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<i&&56320==(64512&(e=t.charCodeAt(r)))&&r++;return n}},function(t,e,n){"use strict";var i=t.exports=function(t,e,n){"function"==typeof e&&(n=e,e={}),function t(e,n,r,o,a,s,c,l,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in n(o,a,s,c,l,u,h),o){var p=o[d];if(Array.isArray(p)){if(d in i.arrayKeywords)for(var f=0;f<p.length;f++)t(e,n,r,p[f],a+"/"+d+"/"+f,s,a,d,o,f)}else if(d in i.propsKeywords){if(p&&"object"==typeof p)for(var g in p)t(e,n,r,p[g],a+"/"+d+"/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,d,o,g)}else(d in i.keywords||e.allKeys&&!(d in i.skipKeywords))&&t(e,n,r,p,a+"/"+d,s,a,d,o)}r(o,a,s,c,l,u,h)}}(e,"function"==typeof(n=e.cb||n)?n:n.pre||function(){},n.post||function(){},t,"",t)};i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(t,e,n){"use strict";var i=t.exports=function(){this._cache={}};i.prototype.put=function(t,e){this._cache[t]=e},i.prototype.get=function(t){return this._cache[t]},i.prototype.del=function(t){delete this._cache[t]},i.prototype.clear=function(){this._cache={}}},function(t,e,n){"use strict";var i=n(5),r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,s=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function g(t){return i.copy(g[t="full"==t?"full":"fast"])}function m(t){var e=t.match(r);if(!e)return!1;var n,i=+e[2],a=+e[3];return i>=1&&i<=12&&a>=1&&a<=(2!=i||(n=+e[1])%4!=0||n%100==0&&n%400!=0?o[i]:29)}function v(t,e){var n=t.match(a);if(!n)return!1;var i=n[1],r=n[2],o=n[3];return(i<=23&&r<=59&&o<=59||23==i&&59==r&&60==o)&&(!e||n[5])}t.exports=g,g.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f},g.full={date:m,time:v,"date-time":function(t){var e=t.split(y);return 2==e.length&&m(e[0])&&v(e[1],!0)},uri:function(t){return b.test(t)&&c.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(t){return t.length<=255&&s.test(t)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:C,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var y=/t|\s/i,b=/\/|:/,_=/[^\\]\\Z/;function C(t){if(_.test(t))return!1;try{return new RegExp(t),!0}catch(e){return!1}}},function(t,e,n){"use strict";var i=n(51),r=n(5).toHash;t.exports=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=r(e),t.types=r(["number","integer","string","array","object","boolean","null"]),t.forEach((function(n){n.rules=n.rules.map((function(n){var r;if("object"==typeof n){var o=Object.keys(n)[0];r=n[o],n=o,r.forEach((function(n){e.push(n),t.all[n]=!0}))}return e.push(n),t.all[n]={keyword:n,code:i[n],implements:r}})),t.all.$comment={keyword:"$comment",code:i.$comment},n.type&&(t.types[n.type]=n)})),t.keywords=r(e.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},function(t,e,n){"use strict";t.exports={$ref:n(52),allOf:n(53),anyOf:n(54),$comment:n(55),const:n(56),contains:n(57),dependencies:n(58),enum:n(59),format:n(60),if:n(61),items:n(62),maximum:n(28),minimum:n(28),maxItems:n(29),minItems:n(29),maxLength:n(30),minLength:n(30),maxProperties:n(31),minProperties:n(31),multipleOf:n(63),not:n(64),oneOf:n(65),pattern:n(66),properties:n(67),propertyNames:n(68),required:n(69),uniqueItems:n(70),validate:n(27)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r,o=" ",a=t.dataLevel,s=t.schema[e],c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(a||""),h="valid"+t.level;if("#"==s||"#/"==s)t.isRoot?(i=t.async,r="validate"):(i=!0===t.root.schema.$async,r="root.refVal[0]");else{var d=t.resolveRef(t.baseId,s,t.isRoot);if(void 0===d){var p=t.MissingRefError.message(t.baseId,s);if("fail"==t.opts.missingRefs){t.logger.error(p),(v=v||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",!1!==t.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(o+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;o=v.pop(),o+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,s,p);t.logger.warn(p),l&&(o+=" if (true) { ")}}else if(d.inline){var g=t.util.copy(t);g.level++;var m="valid"+g.level;g.schema=d.schema,g.schemaPath="",g.errSchemaPath=s,o+=" "+t.validate(g).replace(/validate\.schema/g,d.code)+" ",l&&(o+=" if ("+m+") { ")}else i=!0===d.$async||t.async&&!1!==d.$async,r=d.code}if(r){var v;(v=v||[]).push(o),o="",o+=t.opts.passContext?" "+r+".call(this, ":" "+r+"( ",o+=" "+u+", (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var y=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?t.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),i){if(!t.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+h+"; "),o+=" try { await "+y+"; ",l&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+h+" = false; "),o+=" } ",l&&(o+=" if ("+h+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+r+".errors; else vErrors = vErrors.concat("+r+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.schema[e],o=t.schemaPath+t.util.getProperty(e),a=t.errSchemaPath+"/"+e,s=!t.opts.allErrors,c=t.util.copy(t),l="";c.level++;var u="valid"+c.level,h=c.baseId,d=!0,p=r;if(p)for(var f,g=-1,m=p.length-1;g<m;)f=p[g+=1],(t.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:t.util.schemaHasRules(f,t.RULES.all))&&(d=!1,c.schema=f,c.schemaPath=o+"["+g+"]",c.errSchemaPath=a+"/"+g,i+="  "+t.validate(c)+" ",c.baseId=h,s&&(i+=" if ("+u+") { ",l+="}"));return s&&(i+=d?" if (true) { ":" "+l.slice(0,-1)+" "),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var g="valid"+p.level;if(a.every((function(e){return t.opts.strictKeywords?"object"==typeof e&&Object.keys(e).length>0:t.util.schemaHasRules(e,t.RULES.all)}))){var m=p.baseId;i+=" var "+d+" = errors; var "+h+" = false;  ";var v=t.compositeRule;t.compositeRule=p.compositeRule=!0;var y=a;if(y)for(var b,_=-1,C=y.length-1;_<C;)b=y[_+=1],p.schema=b,p.schemaPath=s+"["+_+"]",p.errSchemaPath=c+"/"+_,i+="  "+t.validate(p)+" ",p.baseId=m,i+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",f+="}";t.compositeRule=p.compositeRule=v,i+=" "+f+" if (!"+h+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(i+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(i+=" } "),i=t.util.cleanUpCode(i)}else l&&(i+=" if (true) { ");return i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.errSchemaPath+"/"+e,o=t.util.toQuotedString(t.schema[e]);return!0===t.opts.$comment?i+=" console.log("+o+");":"function"==typeof t.opts.$comment&&(i+=" self._opts.$comment("+o+", "+t.util.toQuotedString(r)+", validate.root.schema);"),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(i+=" var schema"+r+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; "),d||(i+=" var schema"+r+" = validate.schema"+s+";");var p=p||[];p.push(i+="var "+h+" = equal("+u+", schema"+r+"); if (!"+h+") {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValue: schema"+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be equal to constant' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",l&&(i+=" else { "),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t);p.level++;var f="valid"+p.level,g="i"+r,m=p.dataLevel=t.dataLevel+1,v="data"+m,y=t.baseId,b=t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:t.util.schemaHasRules(a,t.RULES.all);if(i+="var "+d+" = errors;var "+h+";",b){var _=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=a,p.schemaPath=s,p.errSchemaPath=c,i+=" var "+f+" = false; for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers,!0);var C=u+"["+g+"]";p.dataPathArr[m]=g;var x=t.validate(p);p.baseId=y,t.util.varOccurences(x,v)<2?i+=" "+t.util.varReplace(x,v,C)+" ":i+=" var "+v+" = "+C+"; "+x+" ",i+=" if ("+f+") break; }  ",t.compositeRule=p.compositeRule=_,i+="  if (!"+f+") {"}else i+=" if ("+u+".length == 0) {";var w=w||[];w.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should contain a valid item' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var I=i;return i=w.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+I+"]); ":" validate.errors = ["+I+"]; return false; ":" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",b&&(i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),t.opts.allErrors&&(i+=" } "),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="errs__"+r,d=t.util.copy(t),p="";d.level++;var f="valid"+d.level,g={},m={},v=t.opts.ownProperties;for(C in a){var y=a[C],b=Array.isArray(y)?m:g;b[C]=y}i+="var "+h+" = errors;";var _=t.errorPath;for(var C in i+="var missing"+r+";",m)if((b=m[C]).length){if(i+=" if ( "+u+t.util.getProperty(C)+" !== undefined ",v&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(C)+"') "),l){i+=" && ( ";var x=b;if(x)for(var w=-1,I=x.length-1;w<I;)k=x[w+=1],w&&(i+=" || "),i+=" ( ( "+(R=u+(T=t.util.getProperty(k)))+" === undefined ",v&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(k)+"') "),i+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?k:T)+") ) ";i+=")) {  ";var A="missing"+r,P="' + "+A+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(_,A,!0):_+" + "+A);var O=O||[];O.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(C)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+t.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==t.opts.messages&&(i+=" , message: 'should have ",i+=1==b.length?"property "+t.util.escapeQuotes(b[0]):"properties "+t.util.escapeQuotes(b.join(", ")),i+=" when property "+t.util.escapeQuotes(C)+" is present' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var M=i;i=O.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var S=b;if(S)for(var k,E=-1,L=S.length-1;E<L;){k=S[E+=1];var T=t.util.getProperty(k),R=(P=t.util.escapeQuotes(k),u+T);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(_,k,t.opts.jsonPointers)),i+=" if ( "+R+" === undefined ",v&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(k)+"') "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(C)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+t.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==t.opts.messages&&(i+=" , message: 'should have ",i+=1==b.length?"property "+t.util.escapeQuotes(b[0]):"properties "+t.util.escapeQuotes(b.join(", ")),i+=" when property "+t.util.escapeQuotes(C)+" is present' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",l&&(p+="}",i+=" else { ")}t.errorPath=_;var N=d.baseId;for(var C in g)y=g[C],(t.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:t.util.schemaHasRules(y,t.RULES.all))&&(i+=" "+f+" = true; if ( "+u+t.util.getProperty(C)+" !== undefined ",v&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(C)+"') "),i+=") { ",d.schema=y,d.schemaPath=s+t.util.getProperty(C),d.errSchemaPath=c+"/"+t.util.escapeFragment(C),i+="  "+t.validate(d)+" ",d.baseId=N,i+=" }  ",l&&(i+=" if ("+f+") { ",p+="}"));return l&&(i+="   "+p+" if ("+h+" == errors) {"),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(i+=" var schema"+r+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ");var p="i"+r,f="schema"+r;d||(i+=" var "+f+" = validate.schema"+s+";"),i+="var "+h+";",d&&(i+=" if (schema"+r+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+r+")) "+h+" = false; else {"),i+=h+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+h+" = true; break; }",d&&(i+="  }  ");var g=g||[];g.push(i+=" if (!"+h+") {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValues: schema"+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",l&&(i+=" else { "),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||"");if(!1===t.opts.format)return l&&(i+=" if (true) { "),i;var h,d=t.opts.$data&&a&&a.$data;d?(i+=" var schema"+r+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",h="schema"+r):h=a;var p=t.opts.unknownFormats,f=Array.isArray(p);if(d)i+=" var "+(g="format"+r)+" = formats["+h+"]; var "+(m="isObject"+r)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(v="formatType"+r)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",t.async&&(i+=" var async"+r+" = "+g+".async; "),i+=" "+g+" = "+g+".validate; } if (  ",d&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (","ignore"!=p&&(i+=" ("+h+" && !"+g+" ",f&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+g+" && "+v+" == '"+n+"' && !(typeof "+g+" == 'function' ? ",i+=t.async?" (async"+r+" ? await "+g+"("+u+") : "+g+"("+u+")) ":" "+g+"("+u+") ",i+=" : "+g+".test("+u+"))))) {";else{var g;if(!(g=t.formats[a])){if("ignore"==p)return t.logger.warn('unknown format "'+a+'" ignored in schema at path "'+t.errSchemaPath+'"'),l&&(i+=" if (true) { "),i;if(f&&p.indexOf(a)>=0)return l&&(i+=" if (true) { "),i;throw new Error('unknown format "'+a+'" is used in schema at path "'+t.errSchemaPath+'"')}var m,v=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var y=!0===g.async;g=g.validate}if(v!=n)return l&&(i+=" if (true) { "),i;if(y){if(!t.async)throw new Error("async format in sync schema");i+=" if (!(await "+(b="formats"+t.util.getProperty(a)+".validate")+"("+u+"))) { "}else{i+=" if (! ";var b="formats"+t.util.getProperty(a);m&&(b+=".validate"),i+="function"==typeof g?" "+b+"("+u+") ":" "+b+".test("+u+") ",i+=") { "}}var _=_||[];_.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { format:  ",i+=d?""+h:""+t.util.toQuotedString(a),i+="  } ",!1!==t.opts.messages&&(i+=" , message: 'should match format \"",i+=d?"' + "+h+" + '":""+t.util.escapeQuotes(a),i+="\"' "),t.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+s:""+t.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var C=i;return i=_.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t);p.level++;var f="valid"+p.level,g=t.schema.then,m=t.schema.else,v=void 0!==g&&(t.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:t.util.schemaHasRules(g,t.RULES.all)),y=void 0!==m&&(t.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:t.util.schemaHasRules(m,t.RULES.all)),b=p.baseId;if(v||y){var _;p.createErrors=!1,p.schema=a,p.schemaPath=s,p.errSchemaPath=c,i+=" var "+d+" = errors; var "+h+" = true;  ";var C=t.compositeRule;t.compositeRule=p.compositeRule=!0,i+="  "+t.validate(p)+" ",p.baseId=b,p.createErrors=!0,i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",t.compositeRule=p.compositeRule=C,v?(i+=" if ("+f+") {  ",p.schema=t.schema.then,p.schemaPath=t.schemaPath+".then",p.errSchemaPath=t.errSchemaPath+"/then",i+="  "+t.validate(p)+" ",p.baseId=b,i+=" "+h+" = "+f+"; ",v&&y?i+=" var "+(_="ifClause"+r)+" = 'then'; ":_="'then'",i+=" } ",y&&(i+=" else { ")):i+=" if (!"+f+") { ",y&&(p.schema=t.schema.else,p.schemaPath=t.schemaPath+".else",p.errSchemaPath=t.errSchemaPath+"/else",i+="  "+t.validate(p)+" ",p.baseId=b,i+=" "+h+" = "+f+"; ",v&&y?i+=" var "+(_="ifClause"+r)+" = 'else'; ":_="'else'",i+=" } "),i+=" if (!"+h+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==t.opts.messages&&(i+=" , message: 'should match \"' + "+_+" + '\" schema' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(i+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),i+=" }   ",l&&(i+=" else { "),i=t.util.cleanUpCode(i)}else l&&(i+=" if (true) { ");return i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var g="valid"+p.level,m="i"+r,v=p.dataLevel=t.dataLevel+1,y="data"+v,b=t.baseId;if(i+="var "+d+" = errors;var "+h+";",Array.isArray(a)){var _=t.schema.additionalItems;if(!1===_){i+=" "+h+" = "+u+".length <= "+a.length+"; ";var C=c;c=t.errSchemaPath+"/additionalItems";var x=x||[];x.push(i+="  if (!"+h+") {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+a.length+" } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT have more than "+a.length+" items' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var w=i;i=x.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=C,l&&(f+="}",i+=" else { ")}var I=a;if(I)for(var A,P=-1,O=I.length-1;P<O;)if(A=I[P+=1],t.opts.strictKeywords?"object"==typeof A&&Object.keys(A).length>0:t.util.schemaHasRules(A,t.RULES.all)){i+=" "+g+" = true; if ("+u+".length > "+P+") { ";var M=u+"["+P+"]";p.schema=A,p.schemaPath=s+"["+P+"]",p.errSchemaPath=c+"/"+P,p.errorPath=t.util.getPathExpr(t.errorPath,P,t.opts.jsonPointers,!0),p.dataPathArr[v]=P;var S=t.validate(p);p.baseId=b,t.util.varOccurences(S,y)<2?i+=" "+t.util.varReplace(S,y,M)+" ":i+=" var "+y+" = "+M+"; "+S+" ",i+=" }  ",l&&(i+=" if ("+g+") { ",f+="}")}"object"==typeof _&&(t.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:t.util.schemaHasRules(_,t.RULES.all))&&(p.schema=_,p.schemaPath=t.schemaPath+".additionalItems",p.errSchemaPath=t.errSchemaPath+"/additionalItems",i+=" "+g+" = true; if ("+u+".length > "+a.length+") {  for (var "+m+" = "+a.length+"; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0),M=u+"["+m+"]",p.dataPathArr[v]=m,S=t.validate(p),p.baseId=b,t.util.varOccurences(S,y)<2?i+=" "+t.util.varReplace(S,y,M)+" ":i+=" var "+y+" = "+M+"; "+S+" ",l&&(i+=" if (!"+g+") break; "),i+=" } }  ",l&&(i+=" if ("+g+") { ",f+="}"))}else(t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:t.util.schemaHasRules(a,t.RULES.all))&&(p.schema=a,p.schemaPath=s,p.errSchemaPath=c,i+="  for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0),M=u+"["+m+"]",p.dataPathArr[v]=m,S=t.validate(p),p.baseId=b,t.util.varOccurences(S,y)<2?i+=" "+t.util.varReplace(S,y,M)+" ":i+=" var "+y+" = "+M+"; "+S+" ",l&&(i+=" if (!"+g+") break; "),i+=" }");return l&&(i+=" "+f+" if ("+d+" == errors) {"),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s,r+="var division"+o+";if (",d&&(r+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),r+=" (division"+o+" = "+h+" / "+i+", ",r+=t.opts.multipleOfPrecision?" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+t.opts.multipleOfPrecision+" ":" division"+o+" !== parseInt(division"+o+") ",r+=" ) ",d&&(r+="  )  ");var p=p||[];p.push(r+=" ) {   "),r="",!1!==t.createErrors?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { multipleOf: "+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be multiple of ",r+=d?"' + "+i:i+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var f=r;return r=p.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="errs__"+r,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:t.util.schemaHasRules(a,t.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=c,i+=" var "+h+" = errors;  ";var f,g=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),i+=" "+t.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),t.compositeRule=d.compositeRule=g;var m=m||[];m.push(i+=" if ("+p+") {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should NOT be valid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var v=i;i=m.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",t.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should NOT be valid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(i+=" if (false) { ");return i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var g="valid"+p.level,m=p.baseId,v="prevValid"+r,y="passingSchemas"+r;i+="var "+d+" = errors , "+v+" = false , "+h+" = false , "+y+" = null; ";var b=t.compositeRule;t.compositeRule=p.compositeRule=!0;var _=a;if(_)for(var C,x=-1,w=_.length-1;x<w;)C=_[x+=1],(t.opts.strictKeywords?"object"==typeof C&&Object.keys(C).length>0:t.util.schemaHasRules(C,t.RULES.all))?(p.schema=C,p.schemaPath=s+"["+x+"]",p.errSchemaPath=c+"/"+x,i+="  "+t.validate(p)+" ",p.baseId=m):i+=" var "+g+" = true; ",x&&(i+=" if ("+g+" && "+v+") { "+h+" = false; "+y+" = ["+y+", "+x+"]; } else { ",f+="}"),i+=" if ("+g+") { "+h+" = "+v+" = true; "+y+" = "+x+"; }";return t.compositeRule=p.compositeRule=b,i+=f+"if (!"+h+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==t.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(i+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),i+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",t.opts.allErrors&&(i+=" } "),i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d=t.opts.$data&&s&&s.$data;d?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s;var p=d?"(new RegExp("+i+"))":t.usePattern(s);r+="if ( ",d&&(r+=" ("+i+" !== undefined && typeof "+i+" != 'string') || ");var f=f||[];f.push(r+=" !"+p+".test("+h+") ) {   "),r="",!1!==t.createErrors?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { pattern:  ",r+=d?""+i:""+t.util.toQuotedString(s),r+="  } ",!1!==t.opts.messages&&(r+=" , message: 'should match pattern \"",r+=d?"' + "+i+" + '":""+t.util.escapeQuotes(s),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+c:""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var g=r;return r=f.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="errs__"+r,d=t.util.copy(t),p="";d.level++;var f="valid"+d.level,g="key"+r,m="idx"+r,v=d.dataLevel=t.dataLevel+1,y="data"+v,b="dataProperties"+r,_=Object.keys(a||{}),C=t.schema.patternProperties||{},x=Object.keys(C),w=t.schema.additionalProperties,I=_.length||x.length,A=!1===w,P="object"==typeof w&&Object.keys(w).length,O=t.opts.removeAdditional,M=A||P||O,S=t.opts.ownProperties,k=t.baseId,E=t.schema.required;if(E&&(!t.opts.$data||!E.$data)&&E.length<t.opts.loopRequired)var L=t.util.toHash(E);if(i+="var "+h+" = errors;var "+f+" = true;",S&&(i+=" var "+b+" = undefined;"),M){if(i+=S?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",I){if(i+=" var isAdditional"+r+" = !(false ",_.length)if(_.length>8)i+=" || validate.schema"+s+".hasOwnProperty("+g+") ";else{var T=_;if(T)for(var R=-1,N=T.length-1;R<N;)K=T[R+=1],i+=" || "+g+" == "+t.util.toQuotedString(K)+" "}if(x.length){var B=x;if(B)for(var j=-1,D=B.length-1;j<D;)rt=B[j+=1],i+=" || "+t.usePattern(rt)+".test("+g+") "}i+=" ); if (isAdditional"+r+") { "}if("all"==O)i+=" delete "+u+"["+g+"]; ";else{var F=t.errorPath,z="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),A)if(O)i+=" delete "+u+"["+g+"]; ";else{var V=c;c=t.errSchemaPath+"/additionalProperties",(et=et||[]).push(i+=" "+f+" = false; "),i="",!1!==t.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { additionalProperty: '"+z+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",i+="' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var G=i;i=et.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+G+"]); ":" validate.errors = ["+G+"]; return false; ":" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,l&&(i+=" break; ")}else if(P)if("failing"==O){i+=" var "+h+" = errors;  ";var Z=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=w,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var W=u+"["+g+"]";d.dataPathArr[v]=g;var H=t.validate(d);d.baseId=k,t.util.varOccurences(H,y)<2?i+=" "+t.util.varReplace(H,y,W)+" ":i+=" var "+y+" = "+W+"; "+H+" ",i+=" if (!"+f+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+g+"]; }  ",t.compositeRule=d.compositeRule=Z}else d.schema=w,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers),W=u+"["+g+"]",d.dataPathArr[v]=g,H=t.validate(d),d.baseId=k,t.util.varOccurences(H,y)<2?i+=" "+t.util.varReplace(H,y,W)+" ":i+=" var "+y+" = "+W+"; "+H+" ",l&&(i+=" if (!"+f+") break; ");t.errorPath=F}I&&(i+=" } "),i+=" }  ",l&&(i+=" if ("+f+") { ",p+="}")}var U=t.opts.useDefaults&&!t.compositeRule;if(_.length){var $=_;if($)for(var K,X=-1,Y=$.length-1;X<Y;){var q=a[K=$[X+=1]];if(t.opts.strictKeywords?"object"==typeof q&&Object.keys(q).length>0:t.util.schemaHasRules(q,t.RULES.all)){var J=t.util.getProperty(K),Q=(W=u+J,U&&void 0!==q.default);if(d.schema=q,d.schemaPath=s+J,d.errSchemaPath=c+"/"+t.util.escapeFragment(K),d.errorPath=t.util.getPath(t.errorPath,K,t.opts.jsonPointers),d.dataPathArr[v]=t.util.toQuotedString(K),H=t.validate(d),d.baseId=k,t.util.varOccurences(H,y)<2){H=t.util.varReplace(H,y,W);var tt=W}else tt=y,i+=" var "+y+" = "+W+"; ";if(Q)i+=" "+H+" ";else{if(L&&L[K]){i+=" if ( "+tt+" === undefined ",S&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(K)+"') "),i+=") { "+f+" = false; ",F=t.errorPath,V=c;var et,nt=t.util.escapeQuotes(K);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(F,K,t.opts.jsonPointers)),c=t.errSchemaPath+"/required",(et=et||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+nt+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+nt+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",G=i,i=et.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+G+"]); ":" validate.errors = ["+G+"]; return false; ":" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,t.errorPath=F,i+=" } else { "}else l?(i+=" if ( "+tt+" === undefined ",S&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(K)+"') "),i+=") { "+f+" = true; } else { "):(i+=" if ("+tt+" !== undefined ",S&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(K)+"') "),i+=" ) { ");i+=" "+H+" } "}}l&&(i+=" if ("+f+") { ",p+="}")}}if(x.length){var it=x;if(it)for(var rt,ot=-1,at=it.length-1;ot<at;)q=C[rt=it[ot+=1]],(t.opts.strictKeywords?"object"==typeof q&&Object.keys(q).length>0:t.util.schemaHasRules(q,t.RULES.all))&&(d.schema=q,d.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(rt),d.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(rt),i+=S?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",i+=" if ("+t.usePattern(rt)+".test("+g+")) { ",d.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers),W=u+"["+g+"]",d.dataPathArr[v]=g,H=t.validate(d),d.baseId=k,t.util.varOccurences(H,y)<2?i+=" "+t.util.varReplace(H,y,W)+" ":i+=" var "+y+" = "+W+"; "+H+" ",l&&(i+=" if (!"+f+") break; "),i+=" } ",l&&(i+=" else "+f+" = true; "),i+=" }  ",l&&(i+=" if ("+f+") { ",p+="}"))}return l&&(i+=" "+p+" if ("+h+" == errors) {"),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="errs__"+r,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(i+="var "+h+" = errors;",t.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:t.util.schemaHasRules(a,t.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=c;var f="key"+r,g="idx"+r,m="i"+r,v="' + "+f+" + '",y="data"+(d.dataLevel=t.dataLevel+1),b="dataProperties"+r,_=t.opts.ownProperties,C=t.baseId;_&&(i+=" var "+b+" = undefined; "),i+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+f+" = "+b+"["+g+"]; ":" for (var "+f+" in "+u+") { ",i+=" var startErrs"+r+" = errors; ";var x=f,w=t.compositeRule;t.compositeRule=d.compositeRule=!0;var I=t.validate(d);d.baseId=C,t.util.varOccurences(I,y)<2?i+=" "+t.util.varReplace(I,y,x)+" ":i+=" var "+y+" = "+x+"; "+I+" ",t.compositeRule=d.compositeRule=w,i+=" if (!"+p+") { for (var "+m+"=startErrs"+r+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+f+"; }   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { propertyName: '"+v+"' } ",!1!==t.opts.messages&&(i+=" , message: 'property name \\'"+v+"\\' is invalid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(i+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),l&&(i+=" break; "),i+=" } }"}return l&&(i+="  if ("+h+" == errors) {"),t.util.cleanUpCode(i)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=" ",r=t.level,o=t.dataLevel,a=t.schema[e],s=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,u="data"+(o||""),h="valid"+r,d=t.opts.$data&&a&&a.$data;d&&(i+=" var schema"+r+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ");var p="schema"+r;if(!d)if(a.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var f=[],g=a;if(g)for(var m,v=-1,y=g.length-1;v<y;){m=g[v+=1];var b=t.schema.properties[m];b&&(t.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:t.util.schemaHasRules(b,t.RULES.all))||(f[f.length]=m)}}else f=a;if(d||f.length){var _=t.errorPath,C=d||f.length>=t.opts.loopRequired,x=t.opts.ownProperties;if(l)if(i+=" var missing"+r+"; ",C){d||(i+=" var "+p+" = validate.schema"+s+"; ");var w="' + "+(S="schema"+r+"["+(O="i"+r)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(_,S,t.opts.jsonPointers)),i+=" var "+h+" = true; ",d&&(i+=" if (schema"+r+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+r+")) "+h+" = false; else {"),i+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { "+h+" = "+u+"["+p+"["+O+"]] !== undefined ",x&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+O+"]) "),i+="; if (!"+h+") break; } ",d&&(i+="  }  "),(A=A||[]).push(i+="  if (!"+h+") {   "),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+w+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var I=i;i=A.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+I+"]); ":" validate.errors = ["+I+"]; return false; ":" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var A,P=f;if(P)for(var O=-1,M=P.length-1;O<M;)E=P[O+=1],O&&(i+=" || "),i+=" ( ( "+(N=u+(R=t.util.getProperty(E)))+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(E)+"') "),i+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?E:R)+") ) ";i+=") {  ",w="' + "+(S="missing"+r)+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(_,S,!0):_+" + "+S),(A=A||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+w+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",I=i,i=A.pop(),i+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+I+"]); ":" validate.errors = ["+I+"]; return false; ":" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(C){var S;d||(i+=" var "+p+" = validate.schema"+s+"; "),w="' + "+(S="schema"+r+"["+(O="i"+r)+"]")+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(_,S,t.opts.jsonPointers)),d&&(i+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+w+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),i+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { if ("+u+"["+p+"["+O+"]] === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+O+"]) "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+w+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(i+="  }  ")}else{var k=f;if(k)for(var E,L=-1,T=k.length-1;L<T;){E=k[L+=1];var R=t.util.getProperty(E),N=(w=t.util.escapeQuotes(E),u+R);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(_,E,t.opts.jsonPointers)),i+=" if ( "+N+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(E)+"') "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==t.opts.messages&&(i+=" , message: '",i+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+w+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=_}else l&&(i+=" if (true) {");return i}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r=" ",o=t.level,a=t.dataLevel,s=t.schema[e],c=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d="valid"+o,p=t.opts.$data&&s&&s.$data;if(p?(r+=" var schema"+o+" = "+t.util.getData(s.$data,a,t.dataPathArr)+"; ",i="schema"+o):i=s,(s||p)&&!1!==t.opts.uniqueItems){p&&(r+=" var "+d+"; if ("+i+" === false || "+i+" === undefined) "+d+" = true; else if (typeof "+i+" != 'boolean') "+d+" = false; else { "),r+=" var i = "+h+".length , "+d+" = true , j; if (i > 1) { ";var f=t.schema.items&&t.schema.items.type,g=Array.isArray(f);!f||"object"==f||"array"==f||g&&(f.indexOf("object")>=0||f.indexOf("array")>=0)?r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+d+" = false; break outer; } } } ":(r+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ",r+=" if ("+t.util["checkDataType"+(g?"s":"")](f,"item",!0)+") continue; ",g&&(r+=" if (typeof item == 'string') item = '\"' + item; "),r+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),r+=" } ",p&&(r+="  }  ");var m=m||[];m.push(r+=" if (!"+d+") {   "),r="",!1!==t.createErrors?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",r+=p?"validate.schema"+c:""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var v=r;r=m.pop(),r+=!t.compositeRule&&u?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r}},function(t,e,n){"use strict";var i=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(t,e){for(var n=0;n<e.length;n++){t=JSON.parse(JSON.stringify(t));var r,o=e[n].split("/"),a=t;for(r=1;r<o.length;r++)a=a[o[r]];for(r=0;r<i.length;r++){var s=i[r],c=a[s];c&&(a[s]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return t}},function(t,e,n){"use strict";var i=n(19).MissingRef;t.exports=function t(e,n,r){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(r=n,n=void 0);var a=s(e).then((function(){var t=o._addSchema(e,void 0,n);return t.validate||function t(e){try{return o._compile(e)}catch(r){if(r instanceof i)return function(i){var r=i.missingSchema;if(l(r))throw new Error("Schema "+r+" is loaded but "+i.missingRef+" cannot be resolved");var a=o._loadingSchemas[r];return a||(a=o._loadingSchemas[r]=o._opts.loadSchema(r)).then(c,c),a.then((function(t){if(!l(r))return s(t).then((function(){l(r)||o.addSchema(t,r,void 0,n)}))})).then((function(){return t(e)}));function c(){delete o._loadingSchemas[r]}function l(t){return o._refs[t]||o._schemas[t]}}(r);throw r}}(t)}));return r&&a.then((function(t){r(null,t)}),r),a;function s(e){var n=e.$schema;return n&&!o.getSchema(n)?t.call(o,{$ref:n},!0):Promise.resolve()}}},function(t,e,n){"use strict";var i=/^[a-z_$][a-z0-9_$-]*$/i,r=n(74),o=n(75);t.exports={add:function(t,e){var n=this.RULES;if(n.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!i.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var o=e.type;if(Array.isArray(o))for(var a=0;a<o.length;a++)c(t,o[a],e);else c(t,o,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}function c(t,e,i){for(var o,a=0;a<n.length;a++){var s=n[a];if(s.type==e){o=s;break}}o||n.push(o={type:e,rules:[]});var c={keyword:t,definition:i,custom:!0,code:r,implements:i.implements};o.rules.push(c),n.custom[t]=c}return n.keywords[t]=n.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var n=0;n<e.length;n++)for(var i=e[n].rules,r=0;r<i.length;r++)if(i[r].keyword==t){i.splice(r,1);break}return this},validate:function t(e,n){t.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(i(e))return!0;if(t.errors=i.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r,o=" ",a=t.level,s=t.dataLevel,c=t.schema[e],l=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,d="data"+(s||""),p="valid"+a,f="errs__"+a,g=t.opts.$data&&c&&c.$data;g?(o+=" var schema"+a+" = "+t.util.getData(c.$data,s,t.dataPathArr)+"; ",r="schema"+a):r=c;var m,v,y,b,_,C=this,x="definition"+a,w=C.definition,I="";if(g&&w.$data){var A=w.validateSchema;o+=" var "+x+" = RULES.custom['"+e+"'].definition; var "+(_="keywordValidate"+a)+" = "+x+".validate;"}else{if(!(b=t.useCustomRule(C,c,t.schema,t)))return;r="validate.schema"+l,_=b.code,m=w.compile,v=w.inline,y=w.macro}var P=_+".errors",O="i"+a,M="ruleErr"+a,S=w.async;if(S&&!t.async)throw new Error("async keyword in sync schema");if(v||y||(o+=P+" = null;"),o+="var "+f+" = errors;var "+p+";",g&&w.$data&&(I+="}",o+=" if ("+r+" === undefined) { "+p+" = true; } else { ",A&&(I+="}",o+=" "+p+" = "+x+".validateSchema("+r+"); if ("+p+") { ")),v)o+=w.statements?" "+b.validate+" ":" "+p+" = "+b.validate+"; ";else if(y){var k=t.util.copy(t);I="",k.level++;var E="valid"+k.level;k.schema=b.validate,k.schemaPath="";var L=t.compositeRule;t.compositeRule=k.compositeRule=!0;var T=t.validate(k).replace(/validate\.schema/g,_);t.compositeRule=k.compositeRule=L,o+=" "+T}else{(j=j||[]).push(o),o="",o+="  "+_+".call( ",o+=t.opts.passContext?"this":"self",o+=m||!1===w.schema?" , "+d+" ":" , "+r+" , "+d+" , validate.schema"+t.schemaPath+" ",o+=" , (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var R=s?"data"+(s-1||""):"parentData",N=s?t.dataPathArr[s]:"parentDataProperty",B=o+=" , "+R+" , "+N+" , rootData )  ";o=j.pop(),!1===w.errors?(o+=" "+p+" = ",S&&(o+="await "),o+=B+"; "):o+=S?" var "+(P="customErrors"+a)+" = null; try { "+p+" = await "+B+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+p+" = "+B+"; "}if(w.modifying&&(o+=" if ("+R+") "+d+" = "+R+"["+N+"];"),o+=""+I,w.valid)h&&(o+=" if (true) { ");else{var j;o+=" if ( ",void 0===w.valid?(o+=" !",o+=y?""+E:""+p):o+=" "+!w.valid+" ",i=C.keyword,(j=j||[]).push(o+=") { "),(j=j||[]).push(o=""),o="",!1!==t.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+C.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+C.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var D=o;o=j.pop();var F=o+=!t.compositeRule&&h?t.async?" throw new ValidationError(["+D+"]); ":" validate.errors = ["+D+"]; return false; ":" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";o=j.pop(),v?w.errors?"full"!=w.errors&&(o+="  for (var "+O+"="+f+"; "+O+"<errors; "+O+"++) { var "+M+" = vErrors["+O+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+M+".schemaPath === undefined) { "+M+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(o+=" "+M+".schema = "+r+"; "+M+".data = "+d+"; "),o+=" } "):!1===w.errors?o+=" "+F+" ":(o+=" if ("+f+" == errors) { "+F+" } else {  for (var "+O+"="+f+"; "+O+"<errors; "+O+"++) { var "+M+" = vErrors["+O+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+M+".schemaPath === undefined) { "+M+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(o+=" "+M+".schema = "+r+"; "+M+".data = "+d+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==t.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+C.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+C.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(o+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===w.errors?o+=" "+F+" ":(o+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+O+"="+f+"; "+O+"<errors; "+O+"++) { var "+M+" = vErrors["+O+"]; if ("+M+".dataPath === undefined) "+M+".dataPath = (dataPath || '') + "+t.errorPath+";  "+M+'.schemaPath = "'+u+'";  ',t.opts.verbose&&(o+=" "+M+".schema = "+r+"; "+M+".data = "+d+"; "),o+=" } } else { "+F+" } "),o+=" } ",h&&(o+=" else { ")}return o}},function(t,e,n){"use strict";var i=n(32);t.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:i.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:i.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(t){t.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},function(t,e,n){"use strict";n.r(e);var i=n(13),r=n.n(i);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.locked=!1}var e;return(e=[{key:"highlight",value:function(t){this.locked||(this.node!==t&&(this.node&&this.node.setHighlight(!1),this.node=t,this.node.setHighlight(!0)),this._cancelUnhighlight())}},{key:"unhighlight",value:function(){if(!this.locked){var t=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout((function(){t.node.setHighlight(!1),t.node=void 0,t.unhighlightTimer=void 0}),0))}}},{key:"_cancelUnhighlight",value:function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),a=n(0);var s=function(){function t(e){function n(t){return e.node.findNodeByInternalPath(t)}!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(t){n(t.parentPath).childs[t.index].updateField(t.oldValue)},redo:function(t){n(t.parentPath).childs[t.index].updateField(t.newValue)}},editValue:{undo:function(t){n(t.path).updateValue(t.oldValue)},redo:function(t){n(t.path).updateValue(t.newValue)}},changeType:{undo:function(t){n(t.path).changeType(t.oldType)},redo:function(t){n(t.path).changeType(t.newType)}},appendNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath);t.nodes.forEach((function(t){e.appendChild(t)}))}},insertBeforeNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.beforePath);t.nodes.forEach((function(t){e.insertBefore(t,i)}))}},insertAfterNodes:{undo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.afterPath);t.nodes.forEach((function(t){e.insertAfter(t,i),i=t}))}},removeNodes:{undo:function(t){var e=n(t.parentPath),i=e.childs[t.index]||e.append;t.nodes.forEach((function(t){e.insertBefore(t,i)}))},redo:function(t){var e=n(t.parentPath);t.paths.map(n).forEach((function(t){e.removeChild(t)}))}},duplicateNodes:{undo:function(t){var e=n(t.parentPath);t.clonePaths.map(n).forEach((function(t){e.removeChild(t)}))},redo:function(t){var e=n(t.parentPath),i=n(t.afterPath);t.paths.map(n).forEach((function(t){var n=t.clone();if("object"===e.type){var r=e.getFieldNames();n.field=Object(a.findUniqueName)(t.field,r)}e.insertAfter(n,i),i=n}))}},moveNodes:{undo:function(t){var e=n(t.oldParentPath),i=n(t.newParentPath),r=e.childs[t.oldIndex]||e.append;i.childs.slice(t.newIndex,t.newIndex+t.count).forEach((function(n,i){n.field=t.fieldNames[i],e.moveBefore(n,r)})),null===t.newParentPathRedo&&(t.newParentPathRedo=i.getInternalPath())},redo:function(t){var e=n(t.oldParentPathRedo),i=n(t.newParentPathRedo),r=i.childs[t.newIndexRedo]||i.append;e.childs.slice(t.oldIndexRedo,t.oldIndexRedo+t.count).forEach((function(e,n){e.field=t.fieldNames[n],i.moveBefore(e,r)}))}},sort:{undo:function(t){var e=n(t.path);e.hideChilds(),e.childs=t.oldChilds,e.updateDom({updateIndexes:!0}),e.showChilds()},redo:function(t){var e=n(t.path);e.hideChilds(),e.childs=t.newChilds,e.updateDom({updateIndexes:!0}),e.showChilds()}},transform:{undo:function(t){n(t.path).setInternalValue(t.oldValue)},redo:function(t){n(t.path).setInternalValue(t.newValue)}}}}var e;return(e=[{key:"onChange",value:function(){}},{key:"add",value:function(t,e){this.index++,this.history[this.index]={action:t,params:e,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()}},{key:"clear",value:function(){this.history=[],this.index=-1,this.onChange()}},{key:"canUndo",value:function(){return this.index>=0}},{key:"canRedo",value:function(){return this.index<this.history.length-1}},{key:"undo",value:function(){if(this.canUndo()){var t=this.history[this.index];if(t){var e=this.actions[t.action];if(e&&e.undo){if(e.undo(t.params),t.params.oldSelection)try{this.editor.setDomSelection(t.params.oldSelection)}catch(n){console.error(n)}}else console.error(new Error('unknown action "'+t.action+'"'))}this.index--,this.onChange()}}},{key:"redo",value:function(){if(this.canRedo()){this.index++;var t=this.history[this.index];if(t){var e=this.actions[t.action];if(e&&e.redo){if(e.redo(t.params),t.params.newSelection)try{this.editor.setDomSelection(t.params.newSelection)}catch(n){console.error(n)}}else console.error(new Error('unknown action "'+t.action+'"'))}this.onChange()}}},{key:"destroy",value:function(){this.editor=null,this.history=[],this.index=-1}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),c=n(1);var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this;this.editor=e,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.results=null,this.dom={},this.dom.container=n;var r=document.createElement("div");this.dom.wrapper=r,r.className="jsoneditor-search",n.appendChild(r);var o=document.createElement("div");this.dom.results=o,o.className="jsoneditor-results",r.appendChild(o);var a=document.createElement("div");this.dom.input=a,a.className="jsoneditor-frame",a.title=Object(c.c)("searchTitle"),r.appendChild(a);var s=document.createElement("button");s.type="button",s.className="jsoneditor-refresh",a.appendChild(s);var l=document.createElement("input");l.type="text",this.dom.search=l,l.oninput=function(t){i._onDelayedSearch(t)},l.onchange=function(t){i._onSearch()},l.onkeydown=function(t){i._onKeyDown(t)},l.onkeyup=function(t){i._onKeyUp(t)},s.onclick=function(t){l.select()},a.appendChild(l);var u=document.createElement("button");u.type="button",u.title=Object(c.c)("searchNextResultTitle"),u.className="jsoneditor-next",u.onclick=function(){i.next()},a.appendChild(u);var h=document.createElement("button");h.type="button",h.title=Object(c.c)("searchPreviousResultTitle"),h.className="jsoneditor-previous",h.onclick=function(){i.previous()},a.appendChild(h)}var e;return(e=[{key:"next",value:function(t){if(this.results){var e=null!==this.resultIndex?this.resultIndex+1:0;e>this.results.length-1&&(e=0),this._setActiveResult(e,t)}}},{key:"previous",value:function(t){if(this.results){var e=this.results.length-1,n=null!==this.resultIndex?this.resultIndex-1:e;n<0&&(n=e),this._setActiveResult(n,t)}}},{key:"_setActiveResult",value:function(t,e){if(this.activeResult){var n=this.activeResult.node;"field"===this.activeResult.elem?delete n.searchFieldActive:delete n.searchValueActive,n.updateDom()}if(!this.results||!this.results[t])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=t;var i=this.results[this.resultIndex].node,r=this.results[this.resultIndex].elem;"field"===r?i.searchFieldActive=!0:i.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],i.updateDom(),i.scrollTo((function(){e&&i.focus(r)}))}},{key:"_clearDelay",value:function(){void 0!==this.timeout&&(clearTimeout(this.timeout),delete this.timeout)}},{key:"_onDelayedSearch",value:function(t){this._clearDelay();var e=this;this.timeout=setTimeout((function(t){e._onSearch()}),this.delay)}},{key:"_onSearch",value:function(t){this._clearDelay();var e=this.dom.search.value,n=e.length>0?e:void 0;if(n!==this.lastText||t){this.lastText=n,this.results=this.editor.search(n);var i=this.results[0]?this.results[0].node.MAX_SEARCH_RESULTS:1/0,r=0;if(this.activeResult)for(var o=0;o<this.results.length;o++)if(this.results[o].node===this.activeResult.node){r=o;break}if(this._setActiveResult(r,!1),void 0!==n){var a=this.results.length;this.dom.results.innerHTML=0===a?"no&nbsp;results":1===a?"1&nbsp;result":a>i?i+"+&nbsp;results":a+"&nbsp;results"}else this.dom.results.innerHTML=""}}},{key:"_onKeyDown",value:function(t){var e=t.which;27===e?(this.dom.search.value="",this._onSearch(),t.preventDefault(),t.stopPropagation()):13===e&&(t.ctrlKey?this._onSearch(!0):t.shiftKey?this.previous():this.next(),t.preventDefault(),t.stopPropagation())}},{key:"_onKeyUp",value:function(t){var e=t.keyCode;27!==e&&13!==e&&this._onDelayedSearch(t)}},{key:"clear",value:function(){this.dom.search.value="",this._onSearch()}},{key:"forceSearch",value:function(){this._onSearch(!0)}},{key:"isEmpty",value:function(){return""===this.dom.search.value}},{key:"destroy",value:function(){this.editor=null,this.dom.container.removeChild(this.dom.wrapper),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),u=n(3);var h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.root=n,this.path=document.createElement("div"),this.path.className="jsoneditor-treepath",this.path.setAttribute("tabindex",0),this.contentMenuClicked=!1,e.appendChild(this.path),this.reset())}var e;return(e=[{key:"reset",value:function(){this.path.innerHTML=Object(c.c)("selectNode")}},{key:"setPath",value:function(t){var e=this;function n(t){e.contentMenuClicked=!1,Object(a.addClassName)(e.path,"show-all"),e.path.style.width=e.path.parentNode.getBoundingClientRect().width-10+"px",e.path.onblur=function(){if(e.contentMenuClicked)return e.contentMenuClicked=!1,void e.path.focus();Object(a.removeClassName)(e.path,"show-all"),e.path.onblur=void 0,e.path.style.width="",e.setPath(t)}}function i(t){this.selectionCallback&&this.selectionCallback(t)}function r(t,e){this.contextMenuCallback&&this.contextMenuCallback(t,e)}this.path.innerHTML="",t&&t.length&&t.forEach((function(o,a){var s,c=document.createElement("span");if(c.className="jsoneditor-treepath-element",c.innerText=o.name,c.onclick=i.bind(e,o),e.path.appendChild(c),o.children.length&&((s=document.createElement("span")).className="jsoneditor-treepath-seperator",s.innerHTML="&#9658;",s.onclick=function(){e.contentMenuClicked=!0;var n=[];o.children.forEach((function(i){n.push({text:i.name,className:"jsoneditor-type-modes"+(t[a+1]+1&&t[a+1].name===i.name?" jsoneditor-selected":""),click:r.bind(e,o,i.name)})})),new u.a(n).show(s,e.root,!0)},e.path.appendChild(s)),a===t.length-1){var l=(s||c).getBoundingClientRect().right;if(e.path.offsetWidth<l&&(e.path.scrollLeft=l),e.path.scrollLeft){var h=document.createElement("span");h.className="jsoneditor-treepath-show-all-btn",h.title="show all path",h.innerHTML="...",h.onclick=n.bind(e,t),e.path.insertBefore(h,e.path.firstChild)}}}))}},{key:"onSectionSelected",value:function(t){"function"==typeof t&&(this.selectionCallback=t)}},{key:"onContextMenuItemSelected",value:function(t){"function"==typeof t&&(this.contextMenuCallback=t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),d=n(4),p=n.n(d),f=n(11),g=n.n(f),m=n(12),v=n(6),y=n(9),b=n(2);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var C=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.dom={},this.expanded=!1,n&&n instanceof Object?(this.setField(n.field,n.fieldEditable),"value"in n&&this.setValue(n.value,n.type),"internalValue"in n&&this.setInternalValue(n.internalValue)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=Object(a.debounce)(this._onChangeValue.bind(this),t.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=Object(a.debounce)(this._onChangeField.bind(this),t.prototype.DEBOUNCE_INTERVAL),this.visibleChilds=this.getMaxVisibleChilds()}var e;return(e=[{key:"getMaxVisibleChilds",value:function(){return this.editor&&this.editor.options&&this.editor.options.maxVisibleChilds?this.editor.options.maxVisibleChilds:x}},{key:"_updateEditability",value:function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,("tree"===this.editor.options.mode||"form"===this.editor.options.mode)&&"function"==typeof this.editor.options.onEditable)){var t=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()});"boolean"==typeof t?(this.editable.field=t,this.editable.value=t):("boolean"==typeof t.field&&(this.editable.field=t.field),"boolean"==typeof t.value&&(this.editable.value=t.value))}}},{key:"getPath",value:function(){for(var t=this,e=[];t;){var n=t.getName();void 0!==n&&e.unshift(n),t=t.parent}return e}},{key:"getInternalPath",value:function(){for(var t=this,e=[];t;)t.parent&&e.unshift(t.getIndex()),t=t.parent;return e}},{key:"getName",value:function(){return this.parent?"array"!==this.parent.type?this.field:this.index:void 0}},{key:"findNodeByPath",value:function(t){if(t){if(0===t.length)return this;if(t.length&&this.childs&&this.childs.length)for(var e=0;e<this.childs.length;++e)if(""+t[0]==""+this.childs[e].getName())return this.childs[e].findNodeByPath(t.slice(1))}}},{key:"findNodeByInternalPath",value:function(t){if(t){for(var e=this,n=0;n<t.length&&e;n++)e=e.childs[t[n]];return e}}},{key:"serialize",value:function(){return{value:this.getValue(),path:this.getPath()}}},{key:"findNode",value:function(t){for(var e=Object(a.parsePath)(t),n=this,i=function(){var t=e.shift();if("number"==typeof t){if("array"!==n.type)throw new Error("Cannot get child node at index "+t+": node is no array");n=n.childs[t]}else{if("object"!==n.type)throw new Error("Cannot get child node "+t+": node is no object");n=n.childs.filter((function(e){return e.field===t}))[0]}};n&&e.length>0;)i();return n}},{key:"findParents",value:function(){for(var t=[],e=this.parent;e;)t.unshift(e),e=e.parent;return t}},{key:"setError",value:function(t,e){this.error=t,this.errorChild=e,this.dom&&this.dom.tr&&this.updateError()}},{key:"updateError",value:function(){var t=this,e=this.fieldError||this.valueError||this.error,n=this.dom.tdError;if(e&&this.dom&&this.dom.tr){Object(a.addClassName)(this.dom.tr,"jsoneditor-validation-error"),n||(n=document.createElement("td"),this.dom.tdError=n,this.dom.tdValue.parentNode.appendChild(n));var i=document.createElement("button");i.type="button",i.className="jsoneditor-button jsoneditor-schema-error";var r=function(){t.dom.popupAnchor&&t.dom.popupAnchor.destroy()},o=function(){delete t.dom.popupAnchor},s=function(n){var r=t.editor.frame;t.dom.popupAnchor=Object(m.a)(i,r,o,n);var a=i.getBoundingClientRect(),s=r.getBoundingClientRect().width-a.x>120?"jsoneditor-above":"jsoneditor-left",c=document.createElement("div");c.className="jsoneditor-popover "+s,c.appendChild(document.createTextNode(e.message)),t.dom.popupAnchor.appendChild(c)};i.onmouseover=function(){t.dom.popupAnchor||s(!0)},i.onfocus=function(){r(),s(!1)},i.onblur=function(){r()};var c=this.errorChild;for(c&&(i.onclick=function(){c.findParents().forEach((function(t){t.expand(!1)})),c.scrollTo((function(){c.focus()}))});n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i)}else this.dom.tr&&Object(a.removeClassName)(this.dom.tr,"jsoneditor-validation-error"),n&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)}},{key:"getIndex",value:function(){if(this.parent){var t=this.parent.childs.indexOf(this);return-1!==t?t:null}return-1}},{key:"setParent",value:function(t){this.parent=t}},{key:"setField",value:function(t,e){this.field=t,this.previousField=t,this.fieldEditable=!0===e}},{key:"getField",value:function(){return void 0===this.field&&this._getDomField(),this.field}},{key:"setValue",value:function(e,n){var i,r,o,a,s,c=!1,l=this.childs;if(this.type=this._getType(e),n&&n!==this.type){if("string"!==n||"auto"!==this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+n+'"');this.type=n}if("array"===this.type){for(this.childs||(this.childs=[]),a=0;a<e.length;a++)void 0===(i=e[a])||i instanceof Function||(a<this.childs.length?((r=this.childs[a]).fieldEditable=!1,r.index=a,r.setValue(i)):(r=new t(this.editor,{value:i}),o=a<this.getMaxVisibleChilds(),this.appendChild(r,o,c)));for(s=this.childs.length;s>=e.length;s--)this.removeChild(this.childs[s],c)}else if("object"===this.type){for(this.childs||(this.childs=[]),s=this.childs.length-1;s>=0;s--)A(e,this.childs[s].field)||this.removeChild(this.childs[s],c);for(var u in a=0,e)A(e,u)&&(void 0===(i=e[u])||i instanceof Function||((r=this.findChildByProperty(u))?(r.setField(u,!0),r.setValue(i)):(r=new t(this.editor,{field:u,value:i}),o=a<this.getMaxVisibleChilds(),this.appendChild(r,o,c))),a++);this.value="",!0===this.editor.options.sortObjectKeys&&this.sort([],"asc")}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=e;Array.isArray(l)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"setInternalValue",value:function(e){var n,i,r,o,a,s=!1,c=this.childs;if(this.type=e.type,"array"===e.type){for(this.childs||(this.childs=[]),o=0;o<e.childs.length;o++)void 0===(n=e.childs[o])||n instanceof Function||(o<this.childs.length?((i=this.childs[o]).fieldEditable=!1,i.index=o,i.setInternalValue(n)):(i=new t(this.editor,{internalValue:n}),r=o<this.getMaxVisibleChilds(),this.appendChild(i,r,s)));for(a=this.childs.length;a>=e.childs.length;a--)this.removeChild(this.childs[a],s)}else if("object"===e.type){for(this.childs||(this.childs=[]),o=0;o<e.childs.length;o++)void 0===(n=e.childs[o])||n instanceof Function||(o<this.childs.length?(delete(i=this.childs[o]).index,i.setField(n.field,!0),i.setInternalValue(n.value)):(i=new t(this.editor,{field:n.field,internalValue:n.value}),r=o<this.getMaxVisibleChilds(),this.appendChild(i,r,s)));for(a=this.childs.length;a>=e.childs.length;a--)this.removeChild(this.childs[a],s)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=e.value;Array.isArray(c)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"recreateDom",value:function(){if(this.dom&&this.dom.tr&&this.dom.tr.parentNode){var t=this._detachFromDom();this.clearDom(),this._attachToDom(t)}else this.clearDom()}},{key:"getValue",value:function(){if("array"===this.type){var t=[];return this.childs.forEach((function(e){t.push(e.getValue())})),t}if("object"===this.type){var e={};return this.childs.forEach((function(t){e[t.getField()]=t.getValue()})),e}return void 0===this.value&&this._getDomValue(),this.value}},{key:"getInternalValue",value:function(){return"array"===this.type?{type:this.type,childs:this.childs.map((function(t){return t.getInternalValue()}))}:"object"===this.type?{type:this.type,childs:this.childs.map((function(t){return{field:t.getField(),value:t.getInternalValue()}}))}:(void 0===this.value&&this._getDomValue(),{type:this.type,value:this.value})}},{key:"getLevel",value:function(){return this.parent?this.parent.getLevel()+1:0}},{key:"getNodePath",value:function(){var t=this.parent?this.parent.getNodePath():[];return t.push(this),t}},{key:"clone",value:function(){var e=new t(this.editor);if(e.type=this.type,e.field=this.field,e.fieldInnerText=this.fieldInnerText,e.fieldEditable=this.fieldEditable,e.previousField=this.previousField,e.value=this.value,e.valueInnerText=this.valueInnerText,e.previousValue=this.previousValue,e.expanded=this.expanded,e.visibleChilds=this.visibleChilds,this.childs){var n=[];this.childs.forEach((function(t){var i=t.clone();i.setParent(e),n.push(i)})),e.childs=n}else e.childs=void 0;return e}},{key:"expand",value:function(t){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-expanded"),this.showChilds(),!1!==t&&this.childs.forEach((function(e){e.expand(t)})))}},{key:"collapse",value:function(t){this.childs&&(this.hideChilds(),!1!==t&&this.childs.forEach((function(e){e.collapse(t)})),this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-collapsed"),this.expanded=!1)}},{key:"showChilds",value:function(){if(this.childs&&this.expanded){var t,e=this.dom.tr,n=e?e.parentNode:void 0;if(n){var i=this.getAppendDom();i.parentNode||((t=e.nextSibling)?n.insertBefore(i,t):n.appendChild(i));var r=Math.min(this.childs.length,this.visibleChilds);t=this._getNextTr();for(var o=0;o<r;o++){var a=this.childs[o];a.getDom().parentNode||n.insertBefore(a.getDom(),t),a.showChilds()}var s=this.getShowMoreDom();t=this._getNextTr(),s.parentNode||n.insertBefore(s,t),this.showMore.updateDom()}}}},{key:"_getNextTr",value:function(){return this.showMore&&this.showMore.getDom().parentNode?this.showMore.getDom():this.append&&this.append.getDom().parentNode?this.append.getDom():void 0}},{key:"hide",value:function(t){var e=this.dom.tr,n=e?e.parentNode:void 0;n&&n.removeChild(e),this.dom.popupAnchor&&this.dom.popupAnchor.destroy(),this.hideChilds(t)}},{key:"hideChilds",value:function(t){if(this.childs&&this.expanded){var e=this.getAppendDom();e.parentNode&&e.parentNode.removeChild(e),this.childs.forEach((function(t){t.hide()}));var n=this.getShowMoreDom();n.parentNode&&n.parentNode.removeChild(n),t&&!t.resetVisibleChilds||(this.visibleChilds=this.getMaxVisibleChilds())}}},{key:"_updateCssClassName",value:function(){if(this.dom.field&&this.editor&&this.editor.options&&"function"==typeof this.editor.options.onClassName&&this.dom.tree){Object(a.removeAllClassNames)(this.dom.tree);var t=this.editor.options.onClassName({path:this.getPath(),field:this.field,value:this.value})||"";Object(a.addClassName)(this.dom.tree,"jsoneditor-values "+t)}}},{key:"recursivelyUpdateCssClassesOnNodes",value:function(){if(this._updateCssClassName(),Array.isArray(this.childs))for(var t=0;t<this.childs.length;t++)this.childs[t].recursivelyUpdateCssClassesOnNodes()}},{key:"expandTo",value:function(){for(var t=this.parent;t;)t.expanded||t.expand(),t=t.parent}},{key:"appendChild",value:function(t,e,n){if(this._hasChilds()){if(t.setParent(this),t.fieldEditable="object"===this.type,"array"===this.type&&(t.index=this.childs.length),"object"===this.type&&void 0===t.field&&t.setField(""),this.childs.push(t),this.expanded&&!1!==e){var i=t.getDom(),r=this._getNextTr(),o=r?r.parentNode:void 0;r&&o&&o.insertBefore(i,r),t.showChilds(),this.visibleChilds++}!1!==n&&(this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0}))}}},{key:"moveBefore",value:function(t,e){if(this._hasChilds()){var n=this.dom.tr?this.dom.tr.parentNode:void 0;if(n){var i=document.createElement("tr");i.style.height=n.clientHeight+"px",n.appendChild(i)}t.parent&&t.parent.removeChild(t),e instanceof P||!e?this.childs.length+1>this.visibleChilds?this.insertBefore(t,this.childs[this.visibleChilds-1]):this.appendChild(t):this.insertBefore(t,e),n&&n.removeChild(i)}}},{key:"insertBefore",value:function(t,e){if(this._hasChilds()){if(this.visibleChilds++,"object"===this.type&&void 0===t.field&&t.setField(""),e===this.append)t.setParent(this),t.fieldEditable="object"===this.type,this.childs.push(t);else{var n=this.childs.indexOf(e);if(-1===n)throw new Error("Node not found");t.setParent(this),t.fieldEditable="object"===this.type,this.childs.splice(n,0,t)}if(this.expanded){var i=t.getDom(),r=e.getDom(),o=r?r.parentNode:void 0;r&&o&&o.insertBefore(i,r),t.showChilds(),this.showChilds()}this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0})}}},{key:"insertAfter",value:function(t,e){if(this._hasChilds()){var n=this.childs.indexOf(e),i=this.childs[n+1];i?this.insertBefore(t,i):this.appendChild(t)}}},{key:"search",value:function(t,e){Array.isArray(e)||(e=[]);var n=t?t.toLowerCase():void 0;return delete this.searchField,delete this.searchValue,void 0!==this.field&&e.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.field).toLowerCase().indexOf(n)&&(this.searchField=!0,e.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?this.childs&&this.childs.forEach((function(n){n.search(t,e)})):void 0!==this.value&&e.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.value).toLowerCase().indexOf(n)&&(this.searchValue=!0,e.push({node:this,elem:"value"})),this._updateDomValue()),e}},{key:"scrollTo",value:function(t){this.expandPathToNode(),this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,t)}},{key:"expandPathToNode",value:function(){for(var t=this;t&&t.parent;){for(var e="array"===t.parent.type?t.index:t.parent.childs.indexOf(t);t.parent.visibleChilds<e+1;)t.parent.visibleChilds+=this.getMaxVisibleChilds();t.parent.expand(!1),t=t.parent}}},{key:"focus",value:function(e){if(t.focusElement=e,this.dom.tr&&this.dom.tr.parentNode){var n=this.dom;switch(e){case"drag":n.drag?n.drag.focus():n.menu.focus();break;case"menu":n.menu.focus();break;case"expand":this._hasChilds()?n.expand.focus():n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):n.menu.focus();break;case"field":n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):this._hasChilds()?n.expand.focus():n.menu.focus();break;case"value":default:n.select?n.select.focus():n.value&&!this._hasChilds()?(n.value.focus(),Object(a.selectContentEditable)(n.value)):n.field&&this.fieldEditable?(n.field.focus(),Object(a.selectContentEditable)(n.field)):this._hasChilds()?n.expand.focus():n.menu.focus()}}}},{key:"containsNode",value:function(t){if(this===t)return!0;var e=this.childs;if(e)for(var n=0,i=e.length;n<i;n++)if(e[n].containsNode(t))return!0;return!1}},{key:"removeChild",value:function(t,e){if(this.childs){var n=this.childs.indexOf(t);if(-1!==n){n<this.visibleChilds&&this.expanded&&this.visibleChilds--,t.hide(),delete t.searchField,delete t.searchValue;var i=this.childs.splice(n,1)[0];return i.parent=null,!1!==e&&this.updateDom({updateIndexes:!0}),i}}}},{key:"_remove",value:function(t){this.removeChild(t)}},{key:"changeType",value:function(t){var e=this.type;if(e!==t){if("string"!==t&&"auto"!==t||"string"!==e&&"auto"!==e){var n=this._detachFromDom();this.clearDom(),this.type=t,"object"===t?(this.childs||(this.childs=[]),this.childs.forEach((function(t){t.clearDom(),delete t.index,t.fieldEditable=!0,void 0===t.field&&(t.field="")})),"string"!==e&&"auto"!==e||(this.expanded=!0)):"array"===t?(this.childs||(this.childs=[]),this.childs.forEach((function(t,e){t.clearDom(),t.fieldEditable=!1,t.index=e})),"string"!==e&&"auto"!==e||(this.expanded=!0)):this.expanded=!1,this._attachToDom(n)}else this.type=t;"auto"!==t&&"string"!==t||(this.value="string"===t?String(this.value):Object(a.parseString)(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0})}}},{key:"deepEqual",value:function(t){var e;if("array"===this.type){if(!Array.isArray(t))return!1;if(this.childs.length!==t.length)return!1;for(e=0;e<this.childs.length;e++)if(!this.childs[e].deepEqual(t[e]))return!1}else if("object"===this.type){if("object"!==_(t)||!t)return!1;var n={},i=0;for(e=0;e<this.childs.length;e++){var r=this.childs[e];if(!n[r.field]){if(n[r.field]=!0,i++,!(r.field in t))return!1;if(!r.deepEqual(t[r.field]))return!1}}if(i!==Object.keys(t).length)return!1}else if(this.value!==t)return!1;return!0}},{key:"_getDomValue",value:function(){if(this._clearValueError(),this.dom.value&&"array"!==this.type&&"object"!==this.type&&(this.valueInnerText=Object(a.getInnerText)(this.dom.value)),void 0!==this.valueInnerText)try{var t;if("string"===this.type)t=this._unescapeHTML(this.valueInnerText);else{var e=this._unescapeHTML(this.valueInnerText);t=Object(a.parseString)(e)}t!==this.value&&(this.value=t,this._debouncedOnChangeValue())}catch(n){this._setValueError(Object(c.c)("cannotParseValueError"))}}},{key:"_setValueError",value:function(t){this.valueError={message:t},this.updateError()}},{key:"_clearValueError",value:function(){this.valueError&&(this.valueError=null,this.updateError())}},{key:"_setFieldError",value:function(t){this.fieldError={message:t},this.updateError()}},{key:"_clearFieldError",value:function(){this.fieldError&&(this.fieldError=null,this.updateError())}},{key:"_onChangeValue",value:function(){var t=this.editor.getDomSelection();if(t.range){var e=Object(a.textDiff)(String(this.value),String(this.previousValue));t.range.startOffset=e.start,t.range.endOffset=e.end}var n=this.editor.getDomSelection();if(n.range){var i=Object(a.textDiff)(String(this.previousValue),String(this.value));n.range.startOffset=i.start,n.range.endOffset=i.end}this.editor._onAction("editValue",{path:this.getInternalPath(),oldValue:this.previousValue,newValue:this.value,oldSelection:t,newSelection:n}),this.previousValue=this.value}},{key:"_onChangeField",value:function(){var t=this.editor.getDomSelection(),e=this.previousField||"";if(t.range){var n=Object(a.textDiff)(this.field,e);t.range.startOffset=n.start,t.range.endOffset=n.end}var i=this.editor.getDomSelection();if(i.range){var r=Object(a.textDiff)(e,this.field);i.range.startOffset=r.start,i.range.endOffset=r.end}this.editor._onAction("editField",{parentPath:this.parent.getInternalPath(),index:this.getIndex(),oldValue:this.previousField,newValue:this.field,oldSelection:t,newSelection:i}),this.previousField=this.field}},{key:"_updateDomValue",value:function(){var t=this.dom.value;if(t){var e=["jsoneditor-value"],n=this.value,i="auto"===this.type?Object(a.getType)(n):this.type,r="string"===i&&Object(a.isUrl)(n);if(e.push("jsoneditor-"+i),r&&e.push("jsoneditor-url"),""===String(this.value)&&"array"!==this.type&&"object"!==this.type&&e.push("jsoneditor-empty"),this.searchValueActive&&e.push("jsoneditor-highlight-active"),this.searchValue&&e.push("jsoneditor-highlight"),t.className=e.join(" "),t.title="array"===i||"object"===i?this.type+" containing "+(this.childs?this.childs.length:0)+" items":r&&this.editable.value?Object(c.c)("openUrl"):"","boolean"===i&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement("option"),this.dom.select.option.value="",this.dom.select.option.innerHTML="--",this.dom.select.appendChild(this.dom.select.option);for(var o=0;o<this.enum.length;o++)this.dom.select.option=document.createElement("option"),this.dom.select.option.value=this.enum[o],this.dom.select.option.innerHTML=this.enum[o],this.dom.select.option.value===this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||A(this.schema,"oneOf")||A(this.schema,"anyOf")||A(this.schema,"allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.innerHTML="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);this.editable.value&&this.editor.options.colorPicker&&"string"==typeof n&&Object(a.isValidColor)(n)?(this.dom.color||(this.dom.color=document.createElement("div"),this.dom.color.className="jsoneditor-color",this.dom.tdColor=document.createElement("td"),this.dom.tdColor.className="jsoneditor-tree",this.dom.tdColor.appendChild(this.dom.color),this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor,this.dom.tdValue),this.dom.value.style.color="#1A1A1A"),this.dom.color.style.backgroundColor=n):this._deleteDomColor(),this._showTimestampTag()?(this.dom.date||(this.dom.date=document.createElement("div"),this.dom.date.className="jsoneditor-date",this.dom.value.parentNode.appendChild(this.dom.date)),this.dom.date.innerHTML=new Date(n).toISOString(),this.dom.date.title=new Date(n).toString()):this.dom.date&&(this.dom.date.parentNode.removeChild(this.dom.date),delete this.dom.date),Object(a.stripFormatting)(t),this._updateDomDefault()}}},{key:"_deleteDomColor",value:function(){this.dom.color&&(this.dom.tdColor.parentNode.removeChild(this.dom.tdColor),delete this.dom.tdColor,delete this.dom.color,this.dom.value.style.color="")}},{key:"_updateDomField",value:function(){var t=this.dom.field;if(t){var e=Object(a.makeFieldTooltip)(this.schema,this.editor.options.language);e&&(t.title=e),""===String(this.field)&&"array"!==this.parent.type?Object(a.addClassName)(t,"jsoneditor-empty"):Object(a.removeClassName)(t,"jsoneditor-empty"),this.searchFieldActive?Object(a.addClassName)(t,"jsoneditor-highlight-active"):Object(a.removeClassName)(t,"jsoneditor-highlight-active"),this.searchField?Object(a.addClassName)(t,"jsoneditor-highlight"):Object(a.removeClassName)(t,"jsoneditor-highlight"),Object(a.stripFormatting)(t)}}},{key:"_getDomField",value:function(t){if(this._clearFieldError(),this.dom.field&&this.fieldEditable&&(this.fieldInnerText=Object(a.getInnerText)(this.dom.field)),void 0!==this.fieldInnerText)try{var e=this._unescapeHTML(this.fieldInnerText),n=this.parent.getFieldNames(this);-1!==n.indexOf(e)?t?(e=Object(a.findUniqueName)(e,n))!==this.field&&(this.field=e,this._debouncedOnChangeField()):this._setFieldError(Object(c.c)("duplicateFieldError")):e!==this.field&&(this.field=e,this._debouncedOnChangeField())}catch(i){this._setFieldError(Object(c.c)("cannotParseFieldError"))}}},{key:"_updateDomDefault",value:function(){if(this.schema&&void 0!==this.schema.default&&!this._hasChilds()){var t=this.dom.select?this.dom.select:this.dom.value;t&&(this.value===this.schema.default?(t.title=Object(c.c)("default"),Object(a.addClassName)(t,"jsoneditor-is-default"),Object(a.removeClassName)(t,"jsoneditor-is-not-default")):(t.removeAttribute("title"),Object(a.removeClassName)(t,"jsoneditor-is-default"),Object(a.addClassName)(t,"jsoneditor-is-not-default")))}}},{key:"_showTimestampTag",value:function(){if("number"!=typeof this.value)return!1;var t=this.editor.options.timestampTag;return"function"==typeof t?t({field:this.field,value:this.value,path:this.getPath()}):!0===t&&Object(a.isTimestamp)(this.field,this.value)}},{key:"clearDom",value:function(){this.dom={}}},{key:"getDom",value:function(){var t=this.dom;if(t.tr)return t.tr;if(this._updateEditability(),t.tr=document.createElement("tr"),t.tr.node=this,"tree"===this.editor.options.mode){var e=document.createElement("td");if(this.editable.field&&this.parent){var n=document.createElement("button");n.type="button",t.drag=n,n.className="jsoneditor-button jsoneditor-dragarea",n.title=Object(c.c)("drag"),e.appendChild(n)}t.tr.appendChild(e);var i=document.createElement("td"),r=document.createElement("button");r.type="button",t.menu=r,r.className="jsoneditor-button jsoneditor-contextmenu-button",r.title=Object(c.c)("actionsMenu"),i.appendChild(t.menu),t.tr.appendChild(i)}var o=document.createElement("td");return t.tr.appendChild(o),t.tree=this._createDomTree(),o.appendChild(t.tree),this.updateDom({updateIndexes:!0}),t.tr}},{key:"isVisible",value:function(){return this.dom&&this.dom.tr&&this.dom.tr.parentNode||!1}},{key:"isDescendantOf",value:function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1}},{key:"_createDomField",value:function(){return document.createElement("div")}},{key:"setHighlight",value:function(t){this.dom.tr&&(t?Object(a.addClassName)(this.dom.tr,"jsoneditor-highlight"):Object(a.removeClassName)(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(t),this.childs&&this.childs.forEach((function(e){e.setHighlight(t)})))}},{key:"setSelected",value:function(t,e){this.selected=t,this.dom.tr&&(t?Object(a.addClassName)(this.dom.tr,"jsoneditor-selected"):Object(a.removeClassName)(this.dom.tr,"jsoneditor-selected"),e?Object(a.addClassName)(this.dom.tr,"jsoneditor-first"):Object(a.removeClassName)(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(t),this.showMore&&this.showMore.setSelected(t),this.childs&&this.childs.forEach((function(e){e.setSelected(t)})))}},{key:"updateValue",value:function(t){this.value=t,this.previousValue=t,this.valueError=void 0,this.updateDom()}},{key:"updateField",value:function(t){this.field=t,this.previousField=t,this.fieldError=void 0,this.updateDom()}},{key:"updateDom",value:function(e){var n=this.dom.tree;n&&(n.style.marginLeft=24*this.getLevel()+"px");var i=this.dom.field;if(i){var r;if(this.fieldEditable?(i.contentEditable=this.editable.field,i.spellcheck=!1,i.className="jsoneditor-field"):(i.contentEditable=!1,i.className="jsoneditor-readonly"),void 0!==this.index)r=this.index;else if(void 0!==this.field)r=this.field;else{var o=this.editor.options.schema?t._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):void 0;r=o&&o.title?o.title:this._hasChilds()?this.type:""}i.innerHTML=this._escapeHTML(r),this._updateSchema()}var s=this.dom.value;s&&("array"===this.type||"object"===this.type?(this.updateNodeName(),Object(a.addClassName)(this.dom.tr,"jsoneditor-expandable")):(s.innerHTML=this._escapeHTML(this.value),Object(a.removeClassName)(this.dom.tr,"jsoneditor-expandable"))),this._updateDomField(),this._updateDomValue(),this._updateCssClassName(),e&&!0===e.updateIndexes&&this._updateDomIndexes(),e&&!0===e.recurse&&this.childs&&this.childs.forEach((function(t){t.updateDom(e)})),this.error&&this.updateError(),this.append&&this.append.updateDom(),this.showMore&&this.showMore.updateDom()}},{key:"_updateSchema",value:function(){this.editor&&this.editor.options&&(this.schema=this.editor.options.schema?t._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):null,this.schema?this.enum=t._findEnum(this.schema):delete this.enum)}},{key:"_updateDomIndexes",value:function(){var t=this.childs;this.dom.value&&t&&("array"===this.type?t.forEach((function(t,e){t.index=e;var n=t.dom.field;n&&(n.innerHTML=e)})):"object"===this.type&&t.forEach((function(t){void 0!==t.index&&(delete t.index,void 0===t.field&&(t.field=""))})))}},{key:"_createDomValue",value:function(){var t;return"array"===this.type?(t=document.createElement("div")).innerHTML="[...]":"object"===this.type?(t=document.createElement("div")).innerHTML="{...}":!this.editable.value&&Object(a.isUrl)(this.value)?((t=document.createElement("a")).href=this.value,t.innerHTML=this._escapeHTML(this.value)):((t=document.createElement("div")).contentEditable=this.editable.value,t.spellcheck=!1,t.innerHTML=this._escapeHTML(this.value)),t}},{key:"_createDomExpandButton",value:function(){var t=document.createElement("button");return t.type="button",this._hasChilds()?(t.className=this.expanded?"jsoneditor-button jsoneditor-expanded":"jsoneditor-button jsoneditor-collapsed",t.title=Object(c.c)("expandTitle")):(t.className="jsoneditor-button jsoneditor-invisible",t.title=""),t}},{key:"_createDomTree",value:function(){var t=this.dom,e=document.createElement("table"),n=document.createElement("tbody");e.style.borderCollapse="collapse",e.className="jsoneditor-values",e.appendChild(n);var i=document.createElement("tr");n.appendChild(i);var r=document.createElement("td");r.className="jsoneditor-tree",i.appendChild(r),t.expand=this._createDomExpandButton(),r.appendChild(t.expand),t.tdExpand=r;var o=document.createElement("td");o.className="jsoneditor-tree",i.appendChild(o),t.field=this._createDomField(),o.appendChild(t.field),t.tdField=o;var a=document.createElement("td");a.className="jsoneditor-tree",i.appendChild(a),"object"!==this.type&&"array"!==this.type&&(a.appendChild(document.createTextNode(":")),a.className="jsoneditor-separator"),t.tdSeparator=a;var s=document.createElement("td");return s.className="jsoneditor-tree",i.appendChild(s),t.value=this._createDomValue(),s.appendChild(t.value),t.tdValue=s,e}},{key:"onEvent",value:function(t){var e=t.type,n=t.target||t.srcElement,i=this.dom,r=this,o=this._hasChilds();if("function"==typeof this.editor.options.onEvent&&this._onEvent(t),n!==i.drag&&n!==i.menu||("mouseover"===e?this.editor.highlighter.highlight(this):"mouseout"===e&&this.editor.highlighter.unhighlight()),"click"===e&&n===i.menu){var s=r.editor.highlighter;s.highlight(r),s.lock(),Object(a.addClassName)(i.menu,"jsoneditor-selected"),this.showContextMenu(i.menu,(function(){Object(a.removeClassName)(i.menu,"jsoneditor-selected"),s.unlock(),s.unhighlight()}))}"click"===e&&n===i.expand&&o&&this._onExpand(t.ctrlKey),"click"!==e||t.target!==r.dom.tdColor&&t.target!==r.dom.color||this._showColorPicker(),"change"===e&&n===i.checkbox&&(this.dom.value.innerHTML=!this.value,this._getDomValue(),this._updateDomDefault()),"change"===e&&n===i.select&&(this.dom.value.innerHTML=i.select.value,this._getDomValue(),this._updateDomValue());var c=i.value;if(n===c)switch(e){case"blur":case"change":this._getDomValue(),this._clearValueError(),this._updateDomValue();var l=this._escapeHTML(this.value);c.innerHTML!==l&&(c.innerHTML=l);break;case"input":this._getDomValue(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"click":t.ctrlKey&&this.editable.value&&Object(a.isUrl)(this.value)&&(t.preventDefault(),window.open(this.value,"_blank"));break;case"keyup":this._getDomValue(),this._updateDomValue();break;case"cut":case"paste":setTimeout((function(){r._getDomValue(),r._updateDomValue()}),1)}var u=i.field;if(n===u)switch(e){case"blur":this._getDomField(!0),this._updateDomField();var h=this._escapeHTML(this.field);u.innerHTML!==h&&(u.innerHTML=h);break;case"input":this._getDomField(),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"keyup":this._getDomField(),this._updateDomField();break;case"cut":case"paste":setTimeout((function(){r._getDomField(),r._updateDomField()}),1)}var d=i.tree;d&&n===d.parentNode&&"click"===e&&!t.hasMoved&&((void 0!==t.offsetX?t.offsetX<24*(this.getLevel()+1):t.pageX<Object(a.getAbsoluteLeft)(i.tdSeparator))||o?u&&(Object(a.setEndOfContentEditable)(u),u.focus()):c&&!this.enum&&(Object(a.setEndOfContentEditable)(c),c.focus())),(n!==i.tdExpand||o)&&n!==i.tdField&&n!==i.tdSeparator||"click"!==e||t.hasMoved||u&&(Object(a.setEndOfContentEditable)(u),u.focus()),"keydown"===e&&this.onKeyDown(t)}},{key:"_onEvent",value:function(t){var e=t.target;if(e===this.dom.field||e===this.dom.value){var n={field:this.getField(),path:this.getPath()};this._hasChilds()||e!==this.dom.value||(n.value=this.getValue()),this.editor.options.onEvent(n,t)}}},{key:"onKeyDown",value:function(e){var n,i,r,o,s,c,l,u,h,d,p,f,g=e.which||e.keyCode,m=e.target||e.srcElement,v=e.ctrlKey,y=e.shiftKey,b=e.altKey,_=!1,C="tree"===this.editor.options.mode,x=this.editor.multiselection.nodes.length>0?this.editor.multiselection.nodes:[this],w=x[0],A=x[x.length-1];if(13===g)m===this.dom.value?this.editable.value&&!e.ctrlKey||Object(a.isUrl)(this.value)&&(window.open(this.value,"_blank"),_=!0):m===this.dom.expand&&this._hasChilds()&&(this._onExpand(e.ctrlKey),m.focus(),_=!0);else if(68===g)v&&C&&(t.onDuplicate(x),_=!0);else if(69===g)v&&(this._onExpand(y),m.focus(),_=!0);else if(77===g&&C)v&&(this.showContextMenu(m),_=!0);else if(46===g&&C)v&&(t.onRemove(x),_=!0);else if(45===g&&C)v&&!y?(this._onInsertBefore(),_=!0):v&&y&&(this._onInsertAfter(),_=!0);else if(35===g){if(b){var O=this._lastNode();O&&O.focus(t.focusElement||this._getElementName(m)),_=!0}}else if(36===g){if(b){var M=this._firstNode();M&&M.focus(t.focusElement||this._getElementName(m)),_=!0}}else if(37===g){if(b&&!y){var S=this._previousElement(m);S&&this.focus(this._getElementName(S)),_=!0}else if(b&&y&&C){if(A.expanded){var k=A.getAppendDom();r=k?k.nextSibling:void 0}else{var E=A.getDom();r=E.nextSibling}if(r){i=t.getNodeFromTarget(r);var L=t.getNodeFromTarget(r.nextSibling);i&&i instanceof P&&1!==A.parent.childs.length&&L&&L.parent&&(o=this.editor.getDomSelection(),s=(c=w.parent).childs[A.getIndex()+1]||c.append,l=w.getIndex(),u=L.getIndex(),h=c.getInternalPath(),d=L.parent.getInternalPath(),x.forEach((function(t){L.parent.moveBefore(t,L)})),this.focus(t.focusElement||this._getElementName(m)),this.editor._onAction("moveNodes",{count:x.length,fieldNames:x.map(I),oldParentPath:c.getInternalPath(),newParentPath:w.parent.getInternalPath(),oldIndex:s.getIndex(),newIndex:w.getIndex(),oldIndexRedo:l,newIndexRedo:u,oldParentPathRedo:h,newParentPathRedo:d,oldSelection:o,newSelection:this.editor.getDomSelection()}))}}}else if(38===g)b&&!y?((n=this._previousNode())&&(this.editor.deselect(!0),n.focus(t.focusElement||this._getElementName(m))),_=!0):!b&&v&&y&&C?((n=this._previousNode())&&((f=this.editor.multiselection).start=f.start||this,f.end=n,p=this.editor._findTopLevelNodes(f.start,f.end),this.editor.select(p),n.focus("field")),_=!0):b&&y&&C&&((n=w._previousNode())&&n.parent&&(o=this.editor.getDomSelection(),s=(c=w.parent).childs[A.getIndex()+1]||c.append,l=w.getIndex(),u=n.getIndex(),h=c.getInternalPath(),d=n.parent.getInternalPath(),x.forEach((function(t){n.parent.moveBefore(t,n)})),this.focus(t.focusElement||this._getElementName(m)),this.editor._onAction("moveNodes",{count:x.length,fieldNames:x.map(I),oldParentPath:c.getInternalPath(),newParentPath:w.parent.getInternalPath(),oldIndex:s.getIndex(),newIndex:w.getIndex(),oldIndexRedo:l,newIndexRedo:u,oldParentPathRedo:h,newParentPathRedo:d,oldSelection:o,newSelection:this.editor.getDomSelection()})),_=!0);else if(39===g){if(b&&!y){var T=this._nextElement(m);T&&this.focus(this._getElementName(T)),_=!0}else if(b&&y&&C){var R=(E=w.getDom()).previousSibling;R&&(n=t.getNodeFromTarget(R))&&n.parent&&!n.isVisible()&&(o=this.editor.getDomSelection(),s=(c=w.parent).childs[A.getIndex()+1]||c.append,l=w.getIndex(),u=n.getIndex(),h=c.getInternalPath(),d=n.parent.getInternalPath(),x.forEach((function(t){n.parent.moveBefore(t,n)})),this.focus(t.focusElement||this._getElementName(m)),this.editor._onAction("moveNodes",{count:x.length,fieldNames:x.map(I),oldParentPath:c.getInternalPath(),newParentPath:w.parent.getInternalPath(),oldIndex:s.getIndex(),newIndex:w.getIndex(),oldIndexRedo:l,newIndexRedo:u,oldParentPathRedo:h,newParentPathRedo:d,oldSelection:o,newSelection:this.editor.getDomSelection()}))}}else if(40===g)if(b&&!y)(i=this._nextNode())&&(this.editor.deselect(!0),i.focus(t.focusElement||this._getElementName(m))),_=!0;else if(!b&&v&&y&&C)(i=this._nextNode())&&((f=this.editor.multiselection).start=f.start||this,f.end=i,p=this.editor._findTopLevelNodes(f.start,f.end),this.editor.select(p),i.focus("field")),_=!0;else if(b&&y&&C){(i=A.expanded?A.append?A.append._nextNode():void 0:A._nextNode())&&!i.isVisible()&&(i=i.parent.showMore),i&&i instanceof P&&(i=A);var N=i&&(i._nextNode()||i.parent.append);N&&N.parent&&(o=this.editor.getDomSelection(),s=(c=w.parent).childs[A.getIndex()+1]||c.append,l=w.getIndex(),u=N.getIndex(),h=c.getInternalPath(),d=N.parent.getInternalPath(),x.forEach((function(t){N.parent.moveBefore(t,N)})),this.focus(t.focusElement||this._getElementName(m)),this.editor._onAction("moveNodes",{count:x.length,fieldNames:x.map(I),oldParentPath:c.getInternalPath(),newParentPath:w.parent.getInternalPath(),oldParentPathRedo:h,newParentPathRedo:d,oldIndexRedo:l,newIndexRedo:u,oldIndex:s.getIndex(),newIndex:w.getIndex(),oldSelection:o,newSelection:this.editor.getDomSelection()})),_=!0}_&&(e.preventDefault(),e.stopPropagation())}},{key:"_onExpand",value:function(t){if(t){var e=this.dom.tr.parentNode,n=e.parentNode,i=n.scrollTop;n.removeChild(e)}this.expanded?this.collapse(t):this.expand(t),t&&(n.appendChild(e),n.scrollTop=i)}},{key:"_showColorPicker",value:function(){if("function"==typeof this.editor.options.onColorPicker&&this.dom.color){var t=this;t._deleteDomColor(),t.updateDom();var e=Object(m.a)(this.dom.color,this.editor.frame);this.editor.options.onColorPicker(e,this.value,(function(e){"string"==typeof e&&e!==t.value&&(t._deleteDomColor(),t.value=e,t.updateDom(),t._debouncedOnChangeValue())}))}}},{key:"getFieldNames",value:function(t){return"object"===this.type?this.childs.filter((function(e){return e!==t})).map((function(t){return t.field})):[]}},{key:"_onInsertBefore",value:function(e,n,i){var r=this.editor.getDomSelection(),o=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});o.expand(!0);var a=this.getInternalPath();this.parent.insertBefore(o,this),this.editor.highlighter.unhighlight(),o.focus("field");var s=this.editor.getDomSelection();this.editor._onAction("insertBeforeNodes",{nodes:[o],paths:[o.getInternalPath()],beforePath:a,parentPath:this.parent.getInternalPath(),oldSelection:r,newSelection:s})}},{key:"_onInsertAfter",value:function(e,n,i){var r=this.editor.getDomSelection(),o=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});o.expand(!0),this.parent.insertAfter(o,this),this.editor.highlighter.unhighlight(),o.focus("field");var a=this.editor.getDomSelection();this.editor._onAction("insertAfterNodes",{nodes:[o],paths:[o.getInternalPath()],afterPath:this.getInternalPath(),parentPath:this.parent.getInternalPath(),oldSelection:r,newSelection:a})}},{key:"_onAppend",value:function(e,n,i){var r=this.editor.getDomSelection(),o=new t(this.editor,{field:void 0!==e?e:"",value:void 0!==n?n:"",type:i});o.expand(!0),this.parent.appendChild(o),this.editor.highlighter.unhighlight(),o.focus("field");var a=this.editor.getDomSelection();this.editor._onAction("appendNodes",{nodes:[o],paths:[o.getInternalPath()],parentPath:this.parent.getInternalPath(),oldSelection:r,newSelection:a})}},{key:"_onChangeType",value:function(t){var e=this.type;if(t!==e){var n=this.editor.getDomSelection();this.changeType(t);var i=this.editor.getDomSelection();this.editor._onAction("changeType",{path:this.getInternalPath(),oldType:e,newType:t,oldSelection:n,newSelection:i})}}},{key:"sort",value:function(t,e){if("string"==typeof t&&(t=Object(a.parsePath)(t)),this._hasChilds()){this.hideChilds();var n=this.childs;this.childs=this.childs.concat();var i="desc"===e?-1:1;this.childs.sort("object"===this.type?function(t,e){return i*g()(t.field,e.field)}:function(e,n){var r=e.getNestedChild(t),o=n.getNestedChild(t);if(!r)return i;if(!o)return-i;var a=r.value,s=o.value;return"string"!=typeof a&&"string"!=typeof s?a>s?i:a<s?-i:0:i*g()(a,s)}),this._updateDomIndexes(),this.editor._onAction("sort",{path:this.getInternalPath(),oldChilds:n,newChilds:this.childs}),this.showChilds()}}},{key:"update",value:function(t){var e=this.getInternalValue();this.setValue(t),this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:e,newValue:this.getInternalValue()})}},{key:"_detachFromDom",value:function(){var t,e=this.dom.tr?this.dom.tr.parentNode:void 0,n=(t=this.expanded?this.getAppendDom():this.getDom())&&t.parentNode?t.nextSibling:void 0;return this.hide({resetVisibleChilds:!1}),{table:e,nextTr:n}}},{key:"_attachToDom",value:function(t){t.table&&(t.nextTr?t.table.insertBefore(this.getDom(),t.nextTr):t.table.appendChild(this.getDom())),this.expanded&&this.showChilds()}},{key:"transform",value:function(t){if(this._hasChilds()){this.hideChilds();try{var e=this.getInternalValue(),n=this.getValue(),i=p.a.search(n,t);this.setValue(i);var r=this.getInternalValue();this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:e,newValue:r}),this.showChilds()}catch(o){this.showChilds(),this.editor._onError(o)}}}},{key:"extract",value:function(){this.editor.node.hideChilds(),this.hideChilds();try{var t=this.editor.node.getInternalValue();this.editor._setRoot(this);var e=this.editor.node.getInternalValue();this.editor._onAction("transform",{path:this.editor.node.getInternalPath(),oldValue:t,newValue:e})}catch(n){this.editor._onError(n)}finally{this.updateDom({recurse:!0}),this.showChilds()}}},{key:"getNestedChild",value:function(t){for(var e=0,n=this;n&&e<t.length;)n=n.findChildByProperty(t[e]),e++;return n}},{key:"findChildByProperty",value:function(t){if("object"===this.type)return this.childs.find((function(e){return e.field===t}))}},{key:"getAppendDom",value:function(){return this.append||(this.append=new P(this.editor),this.append.setParent(this)),this.append.getDom()}},{key:"getShowMoreDom",value:function(){return this.showMore||(this.showMore=new O(this.editor,this)),this.showMore.getDom()}},{key:"nextSibling",value:function(){var t=this.parent.childs.indexOf(this);return this.parent.childs[t+1]||this.parent.append}},{key:"_previousNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode){var i=n;do{e=t.getNodeFromTarget(i=i.previousSibling)}while(i&&e&&e instanceof P&&!e.isVisible())}return e}},{key:"_nextNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode){var i=n;do{e=t.getNodeFromTarget(i=i.nextSibling)}while(i&&e&&e instanceof P&&!e.isVisible())}return e}},{key:"_firstNode",value:function(){var e=null,n=this.getDom();return n&&n.parentNode&&(e=t.getNodeFromTarget(n.parentNode.firstChild)),e}},{key:"_lastNode",value:function(){var e=null,n=this.getDom();if(n&&n.parentNode){var i=n.parentNode.lastChild;for(e=t.getNodeFromTarget(i);i&&e&&!e.isVisible();)e=t.getNodeFromTarget(i=i.previousSibling)}return e}},{key:"_previousElement",value:function(t){var e=this.dom;switch(t){case e.value:if(this.fieldEditable)return e.field;case e.field:if(this._hasChilds())return e.expand;case e.expand:return e.menu;case e.menu:if(e.drag)return e.drag;default:return null}}},{key:"_nextElement",value:function(t){var e=this.dom;switch(t){case e.drag:return e.menu;case e.menu:if(this._hasChilds())return e.expand;case e.expand:if(this.fieldEditable)return e.field;case e.field:if(!this._hasChilds())return e.value;default:return null}}},{key:"_getElementName",value:function(t){var e=this;return Object.keys(this.dom).find((function(n){return e.dom[n]===t}))}},{key:"_hasChilds",value:function(){return"array"===this.type||"object"===this.type}},{key:"addTemplates",value:function(t,e){var n=this,i=n.editor.options.templates;if(null!=i){i.length&&t.push({type:"separator"});var r=function(t,e){n._onAppend(t,e)},o=function(t,e){n._onInsertBefore(t,e)};i.forEach((function(n){t.push({text:n.text,className:n.className||"jsoneditor-type-object",title:n.title,click:e?r.bind(this,n.field,n.value):o.bind(this,n.field,n.value)})}))}}},{key:"showContextMenu",value:function(e,n){var i=this,r=t.TYPE_TITLES,o=[];if(this.editable.value&&o.push({text:Object(c.c)("type"),title:Object(c.c)("typeTitle"),className:"jsoneditor-type-"+this.type,submenu:[{text:Object(c.c)("auto"),className:"jsoneditor-type-auto"+("auto"===this.type?" jsoneditor-selected":""),title:r.auto,click:function(){i._onChangeType("auto")}},{text:Object(c.c)("array"),className:"jsoneditor-type-array"+("array"===this.type?" jsoneditor-selected":""),title:r.array,click:function(){i._onChangeType("array")}},{text:Object(c.c)("object"),className:"jsoneditor-type-object"+("object"===this.type?" jsoneditor-selected":""),title:r.object,click:function(){i._onChangeType("object")}},{text:Object(c.c)("string"),className:"jsoneditor-type-string"+("string"===this.type?" jsoneditor-selected":""),title:r.string,click:function(){i._onChangeType("string")}}]}),this._hasChilds()&&(this.editor.options.enableSort&&o.push({text:Object(c.c)("sort"),title:Object(c.c)("sortTitle",{type:this.type}),className:"jsoneditor-sort-asc",click:function(){i.showSortModal()}}),this.editor.options.enableTransform&&o.push({text:Object(c.c)("transform"),title:Object(c.c)("transformTitle",{type:this.type}),className:"jsoneditor-transform",click:function(){i.showTransformModal()}}),this.parent&&o.push({text:Object(c.c)("extract"),title:Object(c.c)("extractTitle",{type:this.type}),className:"jsoneditor-extract",click:function(){i.extract()}})),this.parent&&this.parent._hasChilds()){o.length&&o.push({type:"separator"});var a=i.parent.childs;if(i===a[a.length-1]){var s=[{text:Object(c.c)("auto"),className:"jsoneditor-type-auto",title:r.auto,click:function(){i._onAppend("","","auto")}},{text:Object(c.c)("array"),className:"jsoneditor-type-array",title:r.array,click:function(){i._onAppend("",[])}},{text:Object(c.c)("object"),className:"jsoneditor-type-object",title:r.object,click:function(){i._onAppend("",{})}},{text:Object(c.c)("string"),className:"jsoneditor-type-string",title:r.string,click:function(){i._onAppend("","","string")}}];i.addTemplates(s,!0),o.push({text:Object(c.c)("appendText"),title:Object(c.c)("appendTitle"),submenuTitle:Object(c.c)("appendSubmenuTitle"),className:"jsoneditor-append",click:function(){i._onAppend("","","auto")},submenu:s})}var l=[{text:Object(c.c)("auto"),className:"jsoneditor-type-auto",title:r.auto,click:function(){i._onInsertBefore("","","auto")}},{text:Object(c.c)("array"),className:"jsoneditor-type-array",title:r.array,click:function(){i._onInsertBefore("",[])}},{text:Object(c.c)("object"),className:"jsoneditor-type-object",title:r.object,click:function(){i._onInsertBefore("",{})}},{text:Object(c.c)("string"),className:"jsoneditor-type-string",title:r.string,click:function(){i._onInsertBefore("","","string")}}];i.addTemplates(l,!1),o.push({text:Object(c.c)("insert"),title:Object(c.c)("insertTitle"),submenuTitle:Object(c.c)("insertSub"),className:"jsoneditor-insert",click:function(){i._onInsertBefore("","","auto")},submenu:l}),this.editable.field&&(o.push({text:Object(c.c)("duplicateText"),title:Object(c.c)("duplicateField"),className:"jsoneditor-duplicate",click:function(){t.onDuplicate(i)}}),o.push({text:Object(c.c)("removeText"),title:Object(c.c)("removeField"),className:"jsoneditor-remove",click:function(){t.onRemove(i)}}))}if(this.editor.options.onCreateMenu){var h=i.getPath();o=this.editor.options.onCreateMenu(o,{type:"single",path:h,paths:[h]})}new u.a(o,{close:n}).show(e,this.editor.frame)}},{key:"showSortModal",value:function(){var t=this,e=this.editor.options.modalAnchor||b.a,n=this.getValue();Object(v.a)(e,n,(function(e){var n=e.path,i=Object(a.parsePath)(n);t.sortedBy=e,t.sort(i,e.direction)}),t.sortedBy)}},{key:"showTransformModal",value:function(){var t=this,e=this.editor.options.modalAnchor||b.a,n=t.getValue();Object(y.a)(e,n,(function(e){t.transform(e)}))}},{key:"_getType",value:function(t){return t instanceof Array?"array":t instanceof Object?"object":"string"==typeof t&&"string"!=typeof Object(a.parseString)(t)?"string":"auto"}},{key:"_escapeHTML",value:function(t){if("string"!=typeof t)return String(t);var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),n=JSON.stringify(e),i=n.substring(1,n.length-1);return!0===this.editor.options.escapeUnicode&&(i=Object(a.escapeUnicodeChars)(i)),i}},{key:"_unescapeHTML",value:function(t){var e='"'+this._escapeJSON(t)+'"';return Object(a.parse)(e).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")}},{key:"_escapeJSON",value:function(t){for(var e="",n=0;n<t.length;){var i=t.charAt(n);"\n"===i?e+="\\n":"\\"===i?(e+=i,n++,""!==(i=t.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(e+="\\"),e+=i):e+='"'===i?'\\"':i,n++}return e}},{key:"updateNodeName",value:function(){var t,e=this.childs?this.childs.length:0;if("object"===this.type||"array"===this.type){if(this.editor.options.onNodeName)try{t=this.editor.options.onNodeName({path:this.getPath(),size:e,type:this.type})}catch(n){console.error("Error in onNodeName callback: ",n)}this.dom.value.innerHTML="object"===this.type?"{"+(t||e)+"}":"["+(t||e)+"]"}}},{key:"recursivelyUpdateNodeName",value:function(){var t;if(this.expanded&&(this.updateNodeName(),"undefined"!==this.childs))for(t in this.childs)this.childs[t].recursivelyUpdateNodeName()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();C.prototype.DEBOUNCE_INTERVAL=150,C.prototype.MAX_SEARCH_RESULTS=999;var x=100;function w(t){return t.getInternalPath()}function I(t){return t.getField()}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C.focusElement=void 0,C.select=function(t){setTimeout((function(){Object(a.selectContentEditable)(t)}),0)},C.onDragStart=function(t,e){if(!Array.isArray(t))return C.onDragStart([t],e);if(0!==t.length){var n=t[0],i=t[t.length-1],r=n.parent,o=C.getNodeFromTarget(e.target),s=n.editor,c=Object(a.getAbsoluteTop)(o.dom.tr)-Object(a.getAbsoluteTop)(n.dom.tr);s.mousemove||(s.mousemove=Object(a.addEventListener)(window,"mousemove",(function(e){C.onDrag(t,e)}))),s.mouseup||(s.mouseup=Object(a.addEventListener)(window,"mouseup",(function(e){C.onDragEnd(t,e)}))),s.highlighter.lock(),s.drag={oldCursor:document.body.style.cursor,oldSelection:s.getDomSelection(),oldPaths:t.map(w),oldParent:r,oldNextNode:r.childs[i.getIndex()+1]||r.append,oldParentPathRedo:r.getInternalPath(),oldIndexRedo:n.getIndex(),mouseX:e.pageX,offsetY:c,level:n.getLevel()},document.body.style.cursor="move",e.preventDefault()}},C.onDrag=function(t,e){if(!Array.isArray(t))return C.onDrag([t],e);if(0!==t.length){var n,i,r,o,s,c,l,u,h,d,p,f=t[0].editor,g=e.pageY-f.drag.offsetY,m=e.pageX,v=!1,y=t[0],b=y.dom.tr,_=Object(a.getAbsoluteTop)(b),x=b.offsetHeight;if(g<_){n=b;do{c=C.getNodeFromTarget(n=n.previousSibling),u=n?Object(a.getAbsoluteTop)(n):0}while(n&&g<u);c&&!c.parent&&(c=void 0),c||(c=C.getNodeFromTarget(n=(s=b.parentNode.firstChild)?s.nextSibling:void 0))===y&&(c=void 0),c&&c.isVisible()&&g>(u=(n=c.dom.tr)?Object(a.getAbsoluteTop)(n):0)+x&&(c=void 0),c&&(t.forEach((function(t){c.parent.moveBefore(t,c)})),v=!0)}else{var w=t[t.length-1];if(r=(o=w.expanded&&w.append?w.append.getDom():w.dom.tr)?o.nextSibling:void 0){h=Object(a.getAbsoluteTop)(r),i=r;do{l=C.getNodeFromTarget(i),i&&(d=i.nextSibling?Object(a.getAbsoluteTop)(i.nextSibling):0,p=i?d-h:0,l&&l.parent.childs.length===t.length&&l.parent.childs[t.length-1]===w&&(_+=27),i=i.nextSibling)}while(i&&g>_+p);if(l&&l.parent){var I=Math.round((m-f.drag.mouseX)/24/2),A=f.drag.level+I,O=l.getLevel();for(n=l.dom.tr&&l.dom.tr.previousSibling;O<A&&n;){if(c=C.getNodeFromTarget(n),t.some((function(t){return t===c||c.isDescendantOf(t)})));else{if(!(c instanceof P))break;var M=c.parent.childs;if(M.length===t.length&&M[t.length-1]===w)break;O=(l=C.getNodeFromTarget(n)).getLevel()}n=n.previousSibling}l instanceof P&&!l.isVisible()&&l.parent.showMore.isVisible()&&(l=l._nextNode()),l&&l.dom.tr&&o.nextSibling!==l.dom.tr&&(t.forEach((function(t){l.parent.moveBefore(t,l)})),v=!0)}}}v&&(f.drag.mouseX=m,f.drag.level=y.getLevel()),f.startAutoScroll(g),e.preventDefault()}},C.onDragEnd=function(t,e){if(!Array.isArray(t))return C.onDrag([t],e);if(0!==t.length){var n=t[0],i=n.editor;t[0]&&t[0].dom.menu.focus();var r=i.drag.oldParent.getInternalPath(),o=n.parent.getInternalPath(),s=i.drag.oldParent===n.parent,c=i.drag.oldNextNode.getIndex(),l=n.getIndex(),u=i.drag.oldParentPathRedo,h=i.drag.oldIndexRedo,d=s&&h<l?l+t.length:l;s&&h===l||i._onAction("moveNodes",{count:t.length,fieldNames:t.map(I),oldParentPath:r,newParentPath:o,oldIndex:c,newIndex:l,oldIndexRedo:h,newIndexRedo:d,oldParentPathRedo:u,newParentPathRedo:null,oldSelection:i.drag.oldSelection,newSelection:i.getDomSelection()}),document.body.style.cursor=i.drag.oldCursor,i.highlighter.unlock(),t.forEach((function(t){t.updateDom(),e.target!==t.dom.drag&&e.target!==t.dom.menu&&i.highlighter.unhighlight()})),delete i.drag,i.mousemove&&(Object(a.removeEventListener)(window,"mousemove",i.mousemove),delete i.mousemove),i.mouseup&&(Object(a.removeEventListener)(window,"mouseup",i.mouseup),delete i.mouseup),i.stopAutoScroll(),e.preventDefault()}},C._findEnum=function(t){if(t.enum)return t.enum;var e=t.oneOf||t.anyOf||t.allOf;if(e){var n=e.filter((function(t){return t.enum}));if(n.length>0)return n[0].enum}return null},C._findSchema=function(t,e,n){var i=t,r=i,o=t.oneOf||t.anyOf||t.allOf;o||(o=[t]);for(var a=0;a<o.length;a++){"$ref"in(i=o[a])&&"string"==typeof i.$ref&&(i=e[i.$ref])&&(r=C._findSchema(i,e,n));for(var s=0;s<n.length&&i;s++){var c=n.slice(s+1,n.length),l=n[s];if("string"!=typeof l||!i.patternProperties||i.properties&&l in i.properties)"string"==typeof l&&i.properties?l in i.properties?(i=i.properties[l])&&(r=C._findSchema(i,e,c)):r=null:"number"==typeof l&&i.items&&(i=i.items)&&(r=C._findSchema(i,e,c));else for(var u in i.patternProperties)l.match(u)&&(r=C._findSchema(i.patternProperties[u],e,c))}}return r===t&&n.length>0?null:r},C.onRemove=function(t){if(!Array.isArray(t))return C.onRemove([t]);if(t&&t.length>0){var e=t[0],n=e.parent,i=e.editor,r=e.getIndex();i.highlighter.unhighlight();var o=i.getDomSelection();C.blurNodes(t);var a=i.getDomSelection(),s=t.map(w);t.forEach((function(t){t.parent._remove(t)})),i._onAction("removeNodes",{nodes:t,paths:s,parentPath:n.getInternalPath(),index:r,oldSelection:o,newSelection:a})}},C.onDuplicate=function(t){if(!Array.isArray(t))return C.onDuplicate([t]);if(t&&t.length>0){var e=t[t.length-1],n=e.parent,i=e.editor;i.deselect(i.multiselection.nodes);var r=i.getDomSelection(),o=e,s=t.map((function(t){var e=t.clone();if("object"===t.parent.type){var i=t.parent.getFieldNames();e.field=Object(a.findUniqueName)(t.field,i)}return n.insertAfter(e,o),o=e,e}));1===t.length?"object"===s[0].parent.type?(s[0].dom.field.innerHTML=t[0].field,s[0].focus("field")):s[0].focus():i.select(s);var c=i.getDomSelection();i._onAction("duplicateNodes",{paths:t.map(w),clonePaths:s.map(w),afterPath:e.getInternalPath(),parentPath:n.getInternalPath(),oldSelection:r,newSelection:c})}},C.getNodeFromTarget=function(t){for(;t;){if(t.node)return t.node;t=t.parentNode}},C.targetIsColorPicker=function(t){var e=C.getNodeFromTarget(t);if(e)for(var n=t&&t.parentNode;n;){if(n===e.dom.color)return!0;n=n.parentNode}return!1},C.blurNodes=function(t){if(Array.isArray(t)){var e=t[0],n=e.parent,i=e.getIndex();n.childs[i+t.length]?n.childs[i+t.length].focus():n.childs[i-1]?n.childs[i-1].focus():n.focus()}else C.blurNodes([t])},C.TYPE_TITLES={auto:Object(c.c)("autoType"),object:Object(c.c)("objectType"),array:Object(c.c)("arrayType"),string:Object(c.c)("stringType")};var P=function(t){function e(t){this.editor=t,this.dom={}}return(e.prototype=new t).getDom=function(){var t=this.dom;if(t.tr)return t.tr;this._updateEditability();var e=document.createElement("tr");if(e.className="jsoneditor-append",e.node=this,t.tr=e,"tree"===this.editor.options.mode){t.tdDrag=document.createElement("td");var n=document.createElement("td");t.tdMenu=n;var i=document.createElement("button");i.type="button",i.className="jsoneditor-button jsoneditor-contextmenu-button",i.title="Click to open the actions menu (Ctrl+M)",t.menu=i,n.appendChild(t.menu)}var r=document.createElement("td"),o=document.createElement("div");return o.innerHTML="("+Object(c.c)("empty")+")",o.className="jsoneditor-readonly",r.appendChild(o),t.td=r,t.text=o,this.updateDom(),e},e.prototype.getPath=function(){return null},e.prototype.getIndex=function(){return null},e.prototype.updateDom=function(t){var e=this.dom,n=e.td;n&&(n.style.paddingLeft=24*this.getLevel()+26+"px");var i=e.text;i&&(i.innerHTML="("+Object(c.c)("empty")+" "+this.parent.type+")");var r=e.tr;this.isVisible()?e.tr.firstChild||(e.tdDrag&&r.appendChild(e.tdDrag),e.tdMenu&&r.appendChild(e.tdMenu),r.appendChild(n)):e.tr.firstChild&&(e.tdDrag&&r.removeChild(e.tdDrag),e.tdMenu&&r.removeChild(e.tdMenu),r.removeChild(n))},e.prototype.isVisible=function(){return 0===this.parent.childs.length},e.prototype.showContextMenu=function(e,n){var i=this,r=t.TYPE_TITLES,o=[{text:Object(c.c)("auto"),className:"jsoneditor-type-auto",title:r.auto,click:function(){i._onAppend("","","auto")}},{text:Object(c.c)("array"),className:"jsoneditor-type-array",title:r.array,click:function(){i._onAppend("",[])}},{text:Object(c.c)("object"),className:"jsoneditor-type-object",title:r.object,click:function(){i._onAppend("",{})}},{text:Object(c.c)("string"),className:"jsoneditor-type-string",title:r.string,click:function(){i._onAppend("","","string")}}];i.addTemplates(o,!0);var a=[{text:Object(c.c)("appendText"),title:Object(c.c)("appendTitleAuto"),submenuTitle:Object(c.c)("appendSubmenuTitle"),className:"jsoneditor-insert",click:function(){i._onAppend("","","auto")},submenu:o}];if(this.editor.options.onCreateMenu){var s=i.parent.getPath();a=this.editor.options.onCreateMenu(a,{type:"append",path:s,paths:[s]})}new u.a(a,{close:n}).show(e,this.editor.frame)},e.prototype.onEvent=function(t){var e=t.type,n=t.target||t.srcElement,i=this.dom;if(n===i.menu&&("mouseover"===e?this.editor.highlighter.highlight(this.parent):"mouseout"===e&&this.editor.highlighter.unhighlight()),"click"===e&&n===i.menu){var r=this.editor.highlighter;r.highlight(this.parent),r.lock(),Object(a.addClassName)(i.menu,"jsoneditor-selected"),this.showContextMenu(i.menu,(function(){Object(a.removeClassName)(i.menu,"jsoneditor-selected"),r.unlock(),r.unhighlight()}))}"keydown"===e&&this.onKeyDown(t)},e}(C),O=function(t){function e(t,e){this.editor=t,this.parent=e,this.dom={}}return(e.prototype=new t).getDom=function(){if(this.dom.tr)return this.dom.tr;if(this._updateEditability(),!this.dom.tr){var t=this,e=this.parent,n=document.createElement("a");n.appendChild(document.createTextNode(Object(c.c)("showMore"))),n.href="#",n.onclick=function(n){return e.visibleChilds=Math.floor(e.visibleChilds/e.getMaxVisibleChilds()+1)*e.getMaxVisibleChilds(),t.updateDom(),e.showChilds(),n.preventDefault(),!1};var i=document.createElement("a");i.appendChild(document.createTextNode(Object(c.c)("showAll"))),i.href="#",i.onclick=function(n){return e.visibleChilds=1/0,t.updateDom(),e.showChilds(),n.preventDefault(),!1};var r=document.createElement("div"),o=document.createTextNode(this._getShowMoreText());r.className="jsoneditor-show-more",r.appendChild(o),r.appendChild(n),r.appendChild(document.createTextNode(". ")),r.appendChild(i),r.appendChild(document.createTextNode(". "));var a=document.createElement("td");a.appendChild(r);var s=document.createElement("tr");"tree"===this.editor.options.mode&&(s.appendChild(document.createElement("td")),s.appendChild(document.createElement("td"))),s.appendChild(a),s.className="jsoneditor-show-more",this.dom.tr=s,this.dom.moreContents=r,this.dom.moreText=o}return this.updateDom(),this.dom.tr},e.prototype.updateDom=function(t){if(this.isVisible()){if(this.dom.tr.node=this.parent.childs[this.parent.visibleChilds],!this.dom.tr.parentNode){var e=this.parent._getNextTr();e&&e.parentNode.insertBefore(this.dom.tr,e)}this.dom.moreText.nodeValue=this._getShowMoreText(),this.dom.moreContents.style.marginLeft=24*(this.getLevel()+1)+"px"}else this.dom.tr&&this.dom.tr.parentNode&&this.dom.tr.parentNode.removeChild(this.dom.tr)},e.prototype._getShowMoreText=function(){return Object(c.c)("showMoreStatus",{visibleChilds:this.parent.visibleChilds,totalChilds:this.parent.childs.length})+" "},e.prototype.isVisible=function(){return this.parent.expanded&&this.parent.childs.length>this.parent.visibleChilds},e.prototype.onEvent=function(t){"keydown"===t.type&&this.onKeyDown(t)},e}(C),M=n(7),S=n(8),k={start:function(t,e,n){return 0===e.indexOf(t)},contain:function(t,e,n){return e.indexOf(t)>-1}};n.d(e,"treeModeMixins",(function(){return L}));var E={create:function(t,e){if(!t)throw new Error("No container element provided.");this.container=t,this.dom={},this.highlighter=new o,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.validationSequence=0,this.errorNodes=[],this.lastSchemaErrors=void 0,this.node=null,this.focusTarget=null,this._setOptions(e),e.autocomplete&&(this.autocomplete=function(t){(t=t||{}).filter=t.filter||"start",t.trigger=t.trigger||"keydown",t.confirmKeys=t.confirmKeys||[39,35,9],t.caseSensitive=t.caseSensitive||!1;var e="",n="",i=document.createElement("div");i.style.position="relative",i.style.outline="0",i.style.border="0",i.style.margin="0",i.style.padding="0";var r,o,a=document.createElement("div");function s(t){var e,n;document.createRange?((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(t),e.collapse(!1),e.select())}function c(t){return void 0===r&&((r=document.createElement("span")).style.visibility="hidden",r.style.position="fixed",r.style.outline="0",r.style.margin="0",r.style.padding="0",r.style.border="0",r.style.left="0",r.style.whiteSpace="pre",r.style.fontSize=e,r.style.fontFamily=n,r.style.fontWeight="normal",document.body.appendChild(r)),r.innerHTML=String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r.getBoundingClientRect().right}a.className="autocomplete dropdown",a.style.position="absolute",a.style.visibility="hidden";var l={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},startFrom:0,options:[],element:null,elementHint:null,elementStyle:null,wrapper:i,show:function(t,r,o){var s=this;this.startFrom=r,this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null),""===e&&(e=window.getComputedStyle(t).getPropertyValue("font-size")),""===n&&(n=window.getComputedStyle(t).getPropertyValue("font-family")),a.style.marginLeft="0",a.style.marginTop=t.getBoundingClientRect().height+"px",this.options=o.map(String),this.element!==t&&(this.element=t,this.elementStyle={zIndex:this.element.style.zIndex,position:this.element.style.position,backgroundColor:this.element.style.backgroundColor,borderColor:this.element.style.borderColor}),this.element.style.zIndex=3,this.element.style.position="relative",this.element.style.backgroundColor="transparent",this.element.style.borderColor="transparent",this.elementHint=t.cloneNode(),this.elementHint.className="autocomplete hint",this.elementHint.style.zIndex=2,this.elementHint.style.position="absolute",this.elementHint.onfocus=function(){s.element.focus()},this.element.addEventListener&&(this.element.removeEventListener("keydown",h),this.element.addEventListener("keydown",h,!1),this.element.removeEventListener("blur",d),this.element.addEventListener("blur",d,!1)),i.appendChild(this.elementHint),i.appendChild(a),t.parentElement.appendChild(i),this.repaint(t)},setText:function(t){this.element.innerText=t},getText:function(){return this.element.innerText},hideDropDown:function(){this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null,u.hide(),this.element.style.zIndex=this.elementStyle.zIndex,this.element.style.position=this.elementStyle.position,this.element.style.backgroundColor=this.elementStyle.backgroundColor,this.element.style.borderColor=this.elementStyle.borderColor)},repaint:function(e){var n=e.innerText;n=n.replace("\n","");var i=this.options.length,r=n.substring(this.startFrom);o=n.substring(0,this.startFrom);for(var s=0;s<i;s++){var l=this.options[s];if(!t.caseSensitive&&0===l.toLowerCase().indexOf(r.toLowerCase())||t.caseSensitive&&0===l.indexOf(r)){this.elementHint.innerText=o+r+l.substring(r.length),this.elementHint.realInnerText=o+l;break}}a.style.left=c(o)+"px",u.refresh(r,this.options),this.elementHint.style.width=c(this.elementHint.innerText)+10+"px","hidden"===a.style.visibility||(this.elementHint.style.width=c(this.elementHint.innerText)+a.clientWidth+"px")}},u=function(e,n){var i=[],r=0,o=-1,a=function(){this.style.backgroundColor="#ddd"},s=function(){this.style.backgroundColor=""},c=function(){l.hide(),l.onmouseselection(this.__hint,l.rs)},l={rs:n,hide:function(){e.style.visibility="hidden"},refresh:function(n,o){e.style.visibility="hidden",r=0,e.innerHTML="";var u=window.innerHeight||document.documentElement.clientHeight,h=e.parentNode.getBoundingClientRect(),d=h.top-6,p=u-h.bottom-6;i=[];var f="function"==typeof t.filter?t.filter:k[t.filter],g=f?o.filter((function(e){return f(t.caseSensitive?n:n.toLowerCase(),t.caseSensitive?e:e.toLowerCase(),t)})):[];0!==(i=g.map((function(t){var i=document.createElement("div");return i.className="item",i.onmouseover=a,i.onmouseout=s,i.onmousedown=c,i.__hint=t,i.innerHTML=t.substring(0,n.length)+"<b>"+t.substring(n.length)+"</b>",e.appendChild(i),i}))).length&&(1===i.length&&(n.toLowerCase()===i[0].__hint.toLowerCase()&&!t.caseSensitive||n===i[0].__hint&&t.caseSensitive)||i.length<2||(l.highlight(0),d>3*p?(e.style.maxHeight=d+"px",e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom="",e.style.maxHeight=p+"px"),e.style.visibility="visible"))},highlight:function(t){-1!==o&&i[o]&&(i[o].className="item"),i[t].className="item hover",o=t},move:function(t){return"hidden"===e.style.visibility?"":(r+t===-1||r+t===i.length||l.highlight(r+=t),i[r].__hint)},onmouseselection:function(){}};return l}(a,l),h=(function(e){var n=(e=e||window.event).keyCode;if(null!=this.elementHint&&33!==n&&34!==n){if(27===n)return l.hideDropDown(),l.element.focus(),e.preventDefault(),void e.stopPropagation();var i=this.element.innerText;if(i=i.replace("\n",""),t.confirmKeys.indexOf(n)>=0)return 9===n&&0===this.elementHint.innerText.length&&l.onTab(),void(this.elementHint.innerText.length>0&&this.element.innerText!==this.elementHint.realInnerText&&(this.element.innerText=this.elementHint.realInnerText,l.hideDropDown(),s(this.element),9===n&&(l.element.focus(),e.preventDefault(),e.stopPropagation())));if(13!==n){if(40===n){var r=i.substring(this.startFrom),c=u.move(1);return""===c&&l.onArrowDown(),this.elementHint.innerText=o+r+c.substring(r.length),this.elementHint.realInnerText=o+c,e.preventDefault(),void e.stopPropagation()}if(38===n){var h=i.substring(this.startFrom),d=u.move(-1);""===d&&l.onArrowUp(),this.elementHint.innerText=o+h+d.substring(h.length),this.elementHint.realInnerText=o+d,e.preventDefault(),e.stopPropagation()}}else if(0===this.elementHint.innerText.length)l.onEnter();else{var p="hidden"===a.style.visibility;if(u.hide(),p)return l.hideDropDown(),l.element.focus(),void l.onEnter();this.element.innerText=this.elementHint.realInnerText,l.hideDropDown(),s(this.element),e.preventDefault(),e.stopPropagation()}}}).bind(l),d=function(t){l.hideDropDown()};return u.onmouseselection=function(t,e){e.element.innerText=e.elementHint.innerText=o+t,e.hideDropDown(),window.setTimeout((function(){e.element.focus(),s(e.element)}),1)},l}(e.autocomplete)),this.options.history&&"view"!==this.options.mode&&(this.history=new s(this)),this._createFrame(),this._createTable()},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.frameFocusTracker.destroy()},_setOptions:function(t){var e=this;this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null,schemaRefs:null,autocomplete:null,navigationBar:!0,mainMenuBar:!0,onSelectionChange:null,colorPicker:!0,onColorPicker:function(t,e,n){if(r.a){var i=t.getBoundingClientRect().top,o=window.innerHeight;new r.a({parent:t,color:e,popup:o-i<300&&i>300?"top":"bottom",onDone:function(t){var e=1===t.rgba[3]?t.hex.substr(0,7):t.hex;n(e)}}).show()}else console.warn("Cannot open color picker: the `vanilla-picker` library is not included in the bundle. Either use the full bundle or implement your own color picker using `onColorPicker`.")},timestampTag:!0,onEvent:null,enableSort:!0,enableTransform:!0},t&&Object.keys(t).forEach((function(n){e.options[n]=t[n]})),this.setSchema(this.options.schema,this.options.schemaRefs),this._debouncedValidate=Object(a.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),t.onSelectionChange&&this.onSelectionChange(t.onSelectionChange),Object(c.b)(this.options.languages),Object(c.a)(this.options.language)},set:function(t){if(t instanceof Function||void 0===t)this.clear();else{this.content.removeChild(this.table);var e=new C(this,{field:this.options.name,value:t});this._setRoot(e),this.validate(),this.node.expand(!1),this.content.appendChild(this.table)}this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},update:function(t){if(!this.node.deepEqual(t)){var e=this.getSelection();if(this.onChangeDisabled=!0,this.node.update(t),this.onChangeDisabled=!1,this.validate(),this.searchBox&&!this.searchBox.isEmpty()&&this.searchBox.forceSearch(),e&&e.start&&e.end){var n=this.node.findNodeByPath(e.start.path),i=this.node.findNodeByPath(e.end.path);n&&i?this.setSelection(e.start,e.end):this.setSelection({},{})}else this.setSelection({},{})}},get:function(){return this.node?this.node.getValue():void 0},getText:function(){return JSON.stringify(this.get())},setText:function(t){try{this.set(Object(a.parse)(t))}catch(n){var e=Object(a.repair)(t);this.set(Object(a.parse)(e))}},updateText:function(t){try{this.update(Object(a.parse)(t))}catch(n){var e=Object(a.repair)(t);this.update(Object(a.parse)(e))}},setName:function(t){this.options.name=t,this.node&&this.node.updateField(this.options.name)},getName:function(){return this.options.name},focus:function(){var t=this.scrollableContent.querySelector("[contenteditable=true]");t?t.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(t=this.frame.querySelector("button"))&&t.focus()},clear:function(){this.node&&(this.node.hide(),delete this.node),this.treePath&&this.treePath.reset()},_setRoot:function(t){this.clear(),this.node=t,t.setParent(null),t.setField(this.getName(),!1),delete t.index,this.tbody.appendChild(t.getDom())},search:function(t){var e;return this.node?(this.content.removeChild(this.table),e=this.node.search(t),this.content.appendChild(this.table)):e=[],e},expandAll:function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},collapseAll:function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},_onAction:function(t,e){this.history&&this.history.add(t,e),this._onChange()},_onChange:function(){if(!this.onChangeDisabled){if(this.selection=this.getDomSelection(),this._debouncedValidate(),this.treePath){var t=this.node&&this.selection?this.node.findNodeByInternalPath(this.selection.path):this.multiselection?this.multiselection.nodes[0]:void 0;t?this._updateTreePath(t.getNodePath()):this.treePath.reset()}if(this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(e){console.error("Error in onChangeJSON callback: ",e)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(e){console.error("Error in onChangeText callback: ",e)}if(this.options.onClassName&&this.node.recursivelyUpdateCssClassesOnNodes(),this.options.onNodeName&&this.node.childs)try{this.node.recursivelyUpdateNodeName()}catch(e){console.error("Error in onNodeName callback: ",e)}}},validate:function(){var t=this,e=this.node;if(e){var n=e.getValue(),i=[];this.validateSchema&&(this.validateSchema(n)||(i=this.validateSchema.errors.map((function(t){return Object(a.improveSchemaError)(t)})).map((function(t){return{node:e.findNode(t.dataPath),error:t,type:"validation"}})).filter((function(t){return null!=t.node}))));try{this.validationSequence++;var r=this,o=this.validationSequence;this._validateCustom(n).then((function(e){if(o===r.validationSequence){var n=[].concat(i,e||[]);r._renderValidationErrors(n),"function"==typeof t.options.onValidationError&&(Object(a.isValidationErrorChanged)(n,t.lastSchemaErrors)&&t.options.onValidationError.call(t,n),t.lastSchemaErrors=n)}})).catch((function(t){console.error(t)}))}catch(s){console.error(s)}}},_renderValidationErrors:function(t){this.errorNodes&&this.errorNodes.forEach((function(t){t.setError(null)}));var e=t.reduce((function(t,e){return e.node.findParents().filter((function(e){return!t.some((function(t){return t[0]===e}))})).map((function(t){return[t,e.node]})).concat(t)}),[]);this.errorNodes=e.map((function(t){return{node:t[0],child:t[1],error:{message:"object"===t[0].type?"Contains invalid properties":"Contains invalid items"}}})).concat(t).map((function(t){return t.node.setError(t.error,t.child),t.node}))},_validateCustom:function(t){try{if(this.options.onValidate){var e=this.node,n=this.options.onValidate(t);return(Object(a.isPromise)(n)?n:Promise.resolve(n)).then((function(t){return Array.isArray(t)?t.filter((function(t){var e=Object(a.isValidValidationError)(t);return e||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',t),e})).map((function(t){var n;try{n=t&&t.path?e.findNodeByPath(t.path):null}catch(i){}return n||console.warn("Ignoring validation error: node not found. Path:",t.path,"Error:",t),{node:n,error:t,type:"customValidation"}})).filter((function(t){return t&&t.node&&t.error&&t.error.message})):null}))}}catch(i){return Promise.reject(i)}return Promise.resolve(null)},refresh:function(){this.node&&this.node.updateDom({recurse:!0})},startAutoScroll:function(t){var e=this,n=this.scrollableContent,i=Object(a.getAbsoluteTop)(n),r=n.clientHeight,o=i+r;this.autoScrollStep=t<i+24&&n.scrollTop>0?(i+24-t)/3:t>o-24&&r+n.scrollTop<n.scrollHeight?(o-24-t)/3:void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval((function(){e.autoScrollStep?n.scrollTop-=e.autoScrollStep:e.stopAutoScroll()}),50)):this.stopAutoScroll()},stopAutoScroll:function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},setDomSelection:function(t){if(t)if("scrollTop"in t&&this.scrollableContent&&(this.scrollableContent.scrollTop=t.scrollTop),t.paths){var e=this,n=t.paths.map((function(t){return e.node.findNodeByInternalPath(t)}));this.select(n)}else{var i=t.path?this.node.findNodeByInternalPath(t.path):null,r=i&&t.domName?i.dom[t.domName]:null;if(t.range&&r){var o=Object.assign({},t.range,{container:r});Object(a.setSelectionOffset)(o)}else i&&i.focus()}},getDomSelection:function(){var t=C.getNodeFromTarget(this.focusTarget),e=this.focusTarget,n=t?Object.keys(t.dom).find((function(n){return t.dom[n]===e})):null,i=Object(a.getSelectionOffset)();return i&&"DIV"!==i.container.nodeName&&(i=null),i&&i.container!==e&&(i=null),i&&delete i.container,{path:t?t.getInternalPath():null,domName:n,range:i,paths:this.multiselection.length>0?this.multiselection.nodes.map((function(t){return t.getInternalPath()})):null,scrollTop:this.scrollableContent?this.scrollableContent.scrollTop:0}},scrollTo:function(t,e){var n=this.scrollableContent;if(n){var i=this;i.animateTimeout&&(clearTimeout(i.animateTimeout),delete i.animateTimeout),i.animateCallback&&(i.animateCallback(!1),delete i.animateCallback);var r=n.clientHeight,o=n.scrollHeight-r,a=Math.min(Math.max(t-r/4,0),o);!function t(){var r=a-n.scrollTop;Math.abs(r)>3?(n.scrollTop+=r/3,i.animateCallback=e,i.animateTimeout=setTimeout(t,50)):(e&&e(!0),n.scrollTop=a,delete i.animateTimeout,delete i.animateCallback)}()}else e&&e(!1)},_createFrame:function(){this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame),this.contentOuter=document.createElement("div"),this.contentOuter.className="jsoneditor-outer";var t=this;function e(e){t._onEvent&&t._onEvent(e)}if(this.frameFocusTracker=new S.a({target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null}),this.frame.onclick=function(t){var n=t.target;e(t),"BUTTON"===n.nodeName&&t.preventDefault()},this.frame.oninput=e,this.frame.onchange=e,this.frame.onkeydown=e,this.frame.onkeyup=e,this.frame.oncut=e,this.frame.onpaste=e,this.frame.onmousedown=e,this.frame.onmouseup=e,this.frame.onmouseover=e,this.frame.onmouseout=e,Object(a.addEventListener)(this.frame,"focus",e,!0),Object(a.addEventListener)(this.frame,"blur",e,!0),this.frame.onfocusin=e,this.frame.onfocusout=e,this.options.mainMenuBar){Object(a.addClassName)(this.contentOuter,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var n=document.createElement("button");n.type="button",n.className="jsoneditor-expand-all",n.title=Object(c.c)("expandAll"),n.onclick=function(){t.expandAll()},this.menu.appendChild(n);var i=document.createElement("button");if(i.type="button",i.title=Object(c.c)("collapseAll"),i.className="jsoneditor-collapse-all",i.onclick=function(){t.collapseAll()},this.menu.appendChild(i),this.options.enableSort){var r=document.createElement("button");r.type="button",r.className="jsoneditor-sort",r.title=Object(c.c)("sortTitleShort"),r.onclick=function(){t.node.showSortModal()},this.menu.appendChild(r)}if(this.options.enableTransform){var o=document.createElement("button");o.type="button",o.title=Object(c.c)("transformTitleShort"),o.className="jsoneditor-transform",o.onclick=function(){t.node.showTransformModal()},this.menu.appendChild(o)}if(this.history){var s=document.createElement("button");s.type="button",s.className="jsoneditor-undo jsoneditor-separator",s.title=Object(c.c)("undo"),s.onclick=function(){t._onUndo()},this.menu.appendChild(s),this.dom.undo=s;var u=document.createElement("button");u.type="button",u.className="jsoneditor-redo",u.title=Object(c.c)("redo"),u.onclick=function(){t._onRedo()},this.menu.appendChild(u),this.dom.redo=u,this.history.onChange=function(){s.disabled=!t.history.canUndo(),u.disabled=!t.history.canRedo()},this.history.onChange()}if(this.options&&this.options.modes&&this.options.modes.length){var d=this;this.modeSwitcher=new M.a(this.menu,this.options.modes,this.options.mode,(function(t){d.setMode(t),d.modeSwitcher.focus()}))}this.options.search&&(this.searchBox=new l(this,this.menu))}this.options.navigationBar&&(this.navBar=document.createElement("div"),this.navBar.className="jsoneditor-navigation-bar nav-bar-empty",this.frame.appendChild(this.navBar),this.treePath=new h(this.navBar,this.frame),this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this)),this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this)))},_onUndo:function(){this.history&&(this.history.undo(),this._onChange())},_onRedo:function(){this.history&&(this.history.redo(),this._onChange())},_onEvent:function(t){if(!C.targetIsColorPicker(t.target)){var e=C.getNodeFromTarget(t.target);if("keydown"===t.type&&this._onKeyDown(t),e&&"focus"===t.type&&(this.focusTarget=t.target,this.options.autocomplete&&"focus"===this.options.autocomplete.trigger&&this._showAutoComplete(t.target)),"mousedown"===t.type&&this._startDragDistance(t),"mousemove"!==t.type&&"mouseup"!==t.type&&"click"!==t.type||this._updateDragDistance(t),e&&this.options&&this.options.navigationBar&&e&&("keydown"===t.type||"mousedown"===t.type)){var n=this;setTimeout((function(){n._updateTreePath(e.getNodePath())}))}if(e&&e.selected){if("click"===t.type){if(t.target===e.dom.menu)return void this.showContextMenu(t.target);t.hasMoved||this.deselect()}"mousedown"===t.type&&C.onDragStart(this.multiselection.nodes,t)}else"mousedown"===t.type&&Object(a.hasParentNode)(t.target,this.content)&&(this.deselect(),e&&t.target===e.dom.drag?C.onDragStart(e,t):(!e||t.target!==e.dom.field&&t.target!==e.dom.value&&t.target!==e.dom.select)&&this._onMultiSelectStart(t));e&&e.onEvent(t)}},_updateTreePath:function(t){if(t&&t.length){Object(a.removeClassName)(this.navBar,"nav-bar-empty");var e=[];t.forEach((function(t){var i={name:n(t),node:t,children:[]};t.childs&&t.childs.length&&t.childs.forEach((function(t){i.children.push({name:n(t),node:t})})),e.push(i)})),this.treePath.setPath(e)}else Object(a.addClassName)(this.navBar,"nav-bar-empty");function n(t){return t.parent?"array"===t.parent.type?t.index:t.field:t.type}},_onTreePathSectionSelected:function(t){t&&t.node&&(t.node.expandTo(),t.node.focus())},_onTreePathMenuItemSelected:function(t,e){if(t&&t.children.length){var n=t.children.find((function(t){return t.name===e}));n&&n.node&&(this._updateTreePath(n.node.getNodePath()),n.node.expandTo(),n.node.focus())}},_startDragDistance:function(t){this.dragDistanceEvent={initialTarget:t.target,initialPageX:t.pageX,initialPageY:t.pageY,dragDistance:0,hasMoved:!1}},_updateDragDistance:function(t){this.dragDistanceEvent||this._startDragDistance(t);var e=t.pageX-this.dragDistanceEvent.initialPageX,n=t.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(e*e+n*n),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||this.dragDistanceEvent.dragDistance>10,t.dragDistance=this.dragDistanceEvent.dragDistance,t.hasMoved=this.dragDistanceEvent.hasMoved,t.dragDistance},_onMultiSelectStart:function(t){var e=C.getNodeFromTarget(t.target);if("tree"===this.options.mode&&void 0===this.options.onEditable){this.multiselection={start:e||null,end:null,nodes:[]},this._startDragDistance(t);var n=this;this.mousemove||(this.mousemove=Object(a.addEventListener)(window,"mousemove",(function(t){n._onMultiSelect(t)}))),this.mouseup||(this.mouseup=Object(a.addEventListener)(window,"mouseup",(function(t){n._onMultiSelectEnd(t)}))),t.preventDefault()}},_onMultiSelect:function(t){if(t.preventDefault(),this._updateDragDistance(t),t.hasMoved){var e=C.getNodeFromTarget(t.target);e&&(null==this.multiselection.start&&(this.multiselection.start=e),this.multiselection.end=e),this.deselect();var n=this.multiselection.start,i=this.multiselection.end||this.multiselection.start;if(n&&i){if(this.multiselection.nodes=this._findTopLevelNodes(n,i),this.multiselection.nodes&&this.multiselection.nodes.length){var r=this.multiselection.nodes[0];this.multiselection.direction=this.multiselection.start===r||this.multiselection.start.isDescendantOf(r)?"down":"up"}this.select(this.multiselection.nodes)}}},_onMultiSelectEnd:function(){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&(Object(a.removeEventListener)(window,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&(Object(a.removeEventListener)(window,"mouseup",this.mouseup),delete this.mouseup)},deselect:function(t){var e=!!this.multiselection.nodes.length;this.multiselection.nodes.forEach((function(t){t.setSelected(!1)})),this.multiselection.nodes=[],t&&(this.multiselection.start=null,this.multiselection.end=null),e&&this._selectionChangedHandler&&this._selectionChangedHandler()},select:function(t){if(!Array.isArray(t))return this.select([t]);if(t){this.deselect(),this.multiselection.nodes=t.slice(0);var e=t[0];if(t.forEach((function(t){t.expandPathToNode(),t.setSelected(!0,t===e)})),this._selectionChangedHandler){var n=this.getSelection();this._selectionChangedHandler(n.start,n.end)}}},_findTopLevelNodes:function(t,e){for(var n=t.getNodePath(),i=e.getNodePath(),r=0;r<n.length&&n[r]===i[r];)r++;var o=n[r-1],a=n[r],s=i[r];if(a&&s||(o.parent?(a=o,s=o,o=o.parent):(a=o.childs[0],s=o.childs[o.childs.length-1])),o&&a&&s){var c=o.childs.indexOf(a),l=o.childs.indexOf(s),u=Math.min(c,l),h=Math.max(c,l);return o.childs.slice(u,h+1)}return[]},_showAutoComplete:function(t){var e=C.getNodeFromTarget(t),n="";t.className.indexOf("jsoneditor-value")>=0&&(n="value"),t.className.indexOf("jsoneditor-field")>=0&&(n="field");var i=this;setTimeout((function(){if(e&&("focus"===i.options.autocomplete.trigger||t.innerText.length>0)){var r=i.options.autocomplete.getOptions(t.innerText,e.getPath(),n,e.editor);null===r?i.autocomplete.hideDropDown():"function"==typeof r.then?r.then((function(e){null===e?i.autocomplete.hideDropDown():e.options?i.autocomplete.show(t,e.startFrom,e.options):i.autocomplete.show(t,0,e)})).catch((function(t){console.error(t)})):r.options?i.autocomplete.show(t,r.startFrom,r.options):i.autocomplete.show(t,0,r)}else i.autocomplete.hideDropDown()}),50)},_onKeyDown:function(t){var e=t.which||t.keyCode,n=t.altKey,i=t.ctrlKey,r=t.metaKey,o=t.shiftKey,s=!1,c=this.focusTarget;if(9===e){var l=this;setTimeout((function(){l.focusTarget!==c&&Object(a.selectContentEditable)(l.focusTarget)}),0)}this.searchBox&&(i&&70===e?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),s=!0):(114===e||i&&71===e)&&(o?this.searchBox.previous(!0):this.searchBox.next(!0),s=!0)),this.history&&(i&&!o&&90===e?(this._onUndo(),s=!0):i&&o&&90===e&&(this._onRedo(),s=!0)),this.options.autocomplete&&!s&&(i||n||r||1!==t.key.length&&8!==e&&46!==e||(s=!1,this._showAutoComplete(t.target))),s&&(t.preventDefault(),t.stopPropagation())},_createTable:function(){var t;this.options.navigationBar&&Object(a.addClassName)(this.contentOuter,"has-nav-bar"),this.scrollableContent=document.createElement("div"),this.scrollableContent.className="jsoneditor-tree",this.contentOuter.appendChild(this.scrollableContent),this.content=document.createElement("div"),this.content.className="jsoneditor-tree-inner",this.scrollableContent.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table),this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&((t=document.createElement("col")).width="24px",this.colgroupContent.appendChild(t)),(t=document.createElement("col")).width="24px",this.colgroupContent.appendChild(t),t=document.createElement("col"),this.colgroupContent.appendChild(t),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(this.contentOuter)},showContextMenu:function(t,e){var n=[],i=this.multiselection.nodes.slice();if(n.push({text:Object(c.c)("duplicateText"),title:Object(c.c)("duplicateTitle"),className:"jsoneditor-duplicate",click:function(){C.onDuplicate(i)}}),n.push({text:Object(c.c)("remove"),title:Object(c.c)("removeTitle"),className:"jsoneditor-remove",click:function(){C.onRemove(i)}}),this.options.onCreateMenu){var r=i.map((function(t){return t.getPath()}));n=this.options.onCreateMenu(n,{type:"multiple",path:r[0],paths:r})}new u.a(n,{close:e}).show(t,this.frame)},getSelection:function(){var t={start:null,end:null};if(this.multiselection.nodes&&this.multiselection.nodes.length&&this.multiselection.nodes.length){var e=this.multiselection.nodes[0],n=this.multiselection.nodes[this.multiselection.nodes.length-1];"down"===this.multiselection.direction?(t.start=e.serialize(),t.end=n.serialize()):(t.start=n.serialize(),t.end=e.serialize())}return t},onSelectionChange:function(t){"function"==typeof t&&(this._selectionChangedHandler=Object(a.debounce)(t,this.DEBOUNCE_INTERVAL))},setSelection:function(t,e){t&&t.dom&&t.range&&(console.warn("setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options"),this.setDomSelection(t));var n=this._getNodeInstancesByRange(t,e);n.forEach((function(t){t.expandTo()})),this.select(n)},_getNodeInstancesByRange:function(t,e){var n,i;t&&t.path&&(n=this.node.findNodeByPath(t.path),e&&e.path&&(i=this.node.findNodeByPath(e.path)));var r=[];if(n instanceof C)if(i instanceof C&&i!==n)if(n.parent===i.parent){n.getIndex()<i.getIndex()?(t=n,e=i):(t=i,e=n);var o=t;r.push(o);do{o=o.nextSibling(),r.push(o)}while(o&&o!==e)}else r=this._findTopLevelNodes(n,i);else r.push(n);return r},getNodesByRange:function(t,e){var n=this._getNodeInstancesByRange(t,e),i=[];return n.forEach((function(t){i.push(t.serialize())})),i}},L=[{mode:"tree",mixin:E,data:"json"},{mode:"view",mixin:E,data:"json"},{mode:"form",mixin:E,data:"json"}]},function(t,e,n){"use strict";n.r(e);var i=n(4),r=n.n(i),o=n(1),a=n(7),s=n(15),c=n(6),l=n(9),u=n(21),h=n(2),d=n(8),p=n(0);var f=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onChange=e,this.calculateItemSize=n||function(){return 1},this.limit=i,this.items=[],this.index=-1}var e;return(e=[{key:"add",value:function(t){for(;this._calculateHistorySize()>this.limit&&this.items.length>1;)this.items.shift(),this.index--;this.items=this.items.slice(0,this.index+1),this.items.push(t),this.index++,this.onChange()}},{key:"_calculateHistorySize",value:function(){var t=this.calculateItemSize,e=0;return this.items.forEach((function(n){e+=t(n)})),e}},{key:"undo",value:function(){if(this.canUndo())return this.index--,this.onChange(),this.items[this.index]}},{key:"redo",value:function(){if(this.canRedo())return this.index++,this.onChange(),this.items[this.index]}},{key:"canUndo",value:function(){return this.index>0}},{key:"canRedo",value:function(){return this.index<this.items.length-1}},{key:"clear",value:function(){this.items=[],this.index=-1,this.onChange()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();n.d(e,"previewModeMixins",(function(){return v}));var g=u.textModeMixins[0].mixin,m={create:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.statusBar&&(e.statusBar=!0),e.mainMenuBar=!1!==e.mainMenuBar,e.enableSort=!1!==e.enableSort,e.enableTransform=!1!==e.enableTransform,this.options=e,this.indentation="number"==typeof e.indentation?Number(e.indentation):2,this.mode="preview";var n=this;this.container=t,this.dom={},this.json=void 0,this.text="",this._debouncedValidate=Object(p.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-preview",this.frame.onclick=function(t){t.preventDefault()};var i={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};if(this.frameFocusTracker=new d.a(i),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.dom.busy=document.createElement("div"),this.dom.busy.className="jsoneditor-busy",this.dom.busyContent=document.createElement("span"),this.dom.busyContent.innerHTML="busy...",this.dom.busy.appendChild(this.dom.busyContent),this.content.appendChild(this.dom.busy),this.dom.previewContent=document.createElement("pre"),this.dom.previewContent.className="jsoneditor-preview",this.dom.previewText=document.createTextNode(""),this.dom.previewContent.appendChild(this.dom.previewText),this.content.appendChild(this.dom.previewContent),this.options.mainMenuBar){Object(p.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var r=document.createElement("button");r.type="button",r.className="jsoneditor-format",r.title="Format JSON data, with proper indentation and line feeds (Ctrl+\\)",this.menu.appendChild(r),r.onclick=function(){n.executeWithBusyMessage((function(){try{n.format()}catch(t){n._onError(t)}}),"formatting...")};var c=document.createElement("button");if(c.type="button",c.className="jsoneditor-compact",c.title="Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",this.menu.appendChild(c),c.onclick=function(){n.executeWithBusyMessage((function(){try{n.compact()}catch(t){n._onError(t)}}),"compacting...")},this.options.enableSort){var l=document.createElement("button");l.type="button",l.className="jsoneditor-sort",l.title=Object(o.c)("sortTitleShort"),l.onclick=function(){n._showSortModal()},this.menu.appendChild(l)}if(this.options.enableTransform){var u=document.createElement("button");u.type="button",u.title=Object(o.c)("transformTitleShort"),u.className="jsoneditor-transform",u.onclick=function(){n._showTransformModal()},this.dom.transform=u,this.menu.appendChild(u)}var g=document.createElement("button");if(g.type="button",g.className="jsoneditor-repair",g.title="Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.",this.menu.appendChild(g),g.onclick=function(){void 0===n.json&&n.executeWithBusyMessage((function(){try{n.repair()}catch(t){n._onError(t)}}),"repairing...")},!1!==this.options.history){var m=function(){n.dom.undo.disabled=!n.history.canUndo(),n.dom.redo.disabled=!n.history.canRedo()},v=function(t){return 2*t.text.length};this.history=new f(m,v,h.c);var y=document.createElement("button");y.type="button",y.className="jsoneditor-undo jsoneditor-separator",y.title=Object(o.c)("undo"),y.onclick=function(){var t=n.history.undo();t&&n._applyHistory(t)},this.menu.appendChild(y),this.dom.undo=y;var b=document.createElement("button");b.type="button",b.className="jsoneditor-redo",b.title=Object(o.c)("redo"),b.onclick=function(){var t=n.history.redo();t&&n._applyHistory(t)},this.menu.appendChild(b),this.dom.redo=b,this.history.onChange()}this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new a.a(this.menu,this.options.modes,this.options.mode,(function(t){n.setMode(t),n.modeSwitcher.focus()})))}if(this.errorTable=new s.a({errorTableVisible:!0,onToggleVisibility:function(){n.validate()},onFocusLine:null,onChangeHeight:function(t){var e=t+(n.dom.statusBar?n.dom.statusBar.clientHeight:0)+1;n.content.style.marginBottom=-e+"px",n.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.content),this.frame.appendChild(this.errorTable.getErrorTable()),this.container.appendChild(this.frame),e.statusBar){Object(p.addClassName)(this.content,"has-status-bar");var _=document.createElement("div");this.dom.statusBar=_,_.className="jsoneditor-statusbar",this.frame.appendChild(_),this.dom.fileSizeInfo=document.createElement("span"),this.dom.fileSizeInfo.className="jsoneditor-size-info",this.dom.fileSizeInfo.innerText="",_.appendChild(this.dom.fileSizeInfo),this.dom.arrayInfo=document.createElement("span"),this.dom.arrayInfo.className="jsoneditor-size-info",this.dom.arrayInfo.innerText="",_.appendChild(this.dom.arrayInfo),_.appendChild(this.errorTable.getErrorCounter()),_.appendChild(this.errorTable.getWarningIcon()),_.appendChild(this.errorTable.getErrorIcon())}this._renderPreview(),this.setSchema(this.options.schema,this.options.schemaRefs)},_renderPreview:function(){var t=this.getText();this.dom.previewText.nodeValue=Object(p.limitCharacters)(t,h.b),this.dom.fileSizeInfo&&(this.dom.fileSizeInfo.innerText="Size: "+Object(p.formatSize)(t.length)),this.dom.arrayInfo&&(this.dom.arrayInfo.innerText=Array.isArray(this.json)?"Array: "+this.json.length+" items":"")},_onChange:function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(t){console.error("Error in onChangeJSON callback: ",t)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(t){console.error("Error in onChangeText callback: ",t)}},_showSortModal:function(){var t=this;this.executeWithBusyMessage((function(){var e=t.options.modalAnchor||h.a,n=t.get();t._renderPreview(),Object(c.a)(e,n,(function(e){t.executeWithBusyMessage((function(){!function(e,n){if(Array.isArray(e)){var i=Object(p.sort)(e,n.path,n.direction);t.sortedBy=n,t._setAndFireOnChange(i)}if(Object(p.isObject)(e)){var r=Object(p.sortObjectKeys)(e,n.direction);t.sortedBy=n,t._setAndFireOnChange(r)}}(n,e)}),"sorting...")}),t.sortedBy)}),"parsing...")},_showTransformModal:function(){var t=this;this.executeWithBusyMessage((function(){var e=t.options.modalAnchor||h.a,n=t.get();t._renderPreview(),Object(l.a)(e,n,(function(e){t.executeWithBusyMessage((function(){var i=r.a.search(n,e);t._setAndFireOnChange(i)}),"transforming...")}))}),"parsing...")},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this._debouncedValidate=null,this.history.clear(),this.history=null,this.frameFocusTracker.destroy()},compact:function(){var t=this.get(),e=JSON.stringify(t);this._setTextAndFireOnChange(e,t)},format:function(){var t=this.get(),e=JSON.stringify(t,null,this.indentation);this._setTextAndFireOnChange(e,t)},repair:function(){var t=this.getText(),e=Object(p.repair)(t);this._setTextAndFireOnChange(e)},focus:function(){this.dom.transform.focus()},set:function(t){this.history&&this.history.clear(),this._set(t)},update:function(t){this._set(t)},_set:function(t){this.text=void 0,this.json=t,this._renderPreview(),this._pushHistory(),this._debouncedValidate()},_setAndFireOnChange:function(t){this._set(t),this._onChange()},get:function(){if(void 0===this.json){var t=this.getText();this.json=Object(p.parse)(t)}return this.json},getText:function(){return void 0===this.text&&(this.text=JSON.stringify(this.json,null,this.indentation),!0===this.options.escapeUnicode&&(this.text=Object(p.escapeUnicodeChars)(this.text))),this.text},setText:function(t){this.history&&this.history.clear(),this._setText(t)},updateText:function(t){this.getText()!==t&&this._setText(t)},_setText:function(t,e){if(this.text=!0===this.options.escapeUnicode?Object(p.escapeUnicodeChars)(t):t,this.json=e,this._renderPreview(),void 0===this.json){var n=this;this.executeWithBusyMessage((function(){try{n.json=n.get(),n._renderPreview(),n._pushHistory()}catch(t){}}),"parsing...")}else this._pushHistory();this._debouncedValidate()},_setTextAndFireOnChange:function(t,e){this._setText(t,e),this._onChange()},_applyHistory:function(t){this.json=t.json,this.text=t.text,this._renderPreview(),this._debouncedValidate()},_pushHistory:function(){this.history&&this.history.add({text:this.text,json:this.json})},executeWithBusyMessage:function(t,e){if(this.getText().length>h.d){var n=this;Object(p.addClassName)(n.frame,"busy"),n.dom.busyContent.innerText=e,setTimeout((function(){t(),Object(p.removeClassName)(n.frame,"busy"),n.dom.busyContent.innerText=""}),100)}else t()}};m.validate=g.validate,m._renderErrors=g._renderErrors;var v=[{mode:"preview",mixin:m,data:"json"}]}])},t.exports=i()}}]);